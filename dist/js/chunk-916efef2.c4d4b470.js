(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-916efef2"],{"0b68":function(t,e,a){},"4c28":function(t,e,a){},"731c":function(t,e,a){"use strict";a("0b68")},8992:function(t,e,a){"use strict";a("4c28")},ef52:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delivery-manager"},[a("div",{staticClass:"selectBox"},[a("div",{staticClass:"left-box mar-right"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("基础操作")]),a("div",{staticClass:"base-item base-left"},[a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.syncSurfaceBefore}},[t._v("批量同步面单信息")]),a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.batnchDownLoad(t.multipleSelection,"down")}}},[t._v("批量下载平台面单")])],1),a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.batnchDownLoad(t.multipleSelection,"view")}}},[t._v("批量预览打印平台面单")]),a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.getExportData}},[t._v("导出数据")])],1),a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.downTWface}},[t._v("批量打印台湾虚拟面单")]),a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.downLoadPickList}},[t._v("批量下载拣货单")])],1)],1)])]),a("div",{staticClass:"right-box"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("列表筛选操作")]),a("div",{staticClass:"base-item"},[a("el-row",{staticClass:"row-style"},[a("storeChoose",{attrs:{"is-all":!0,spanWidth:"90px",selectWidth:"180px",source:"orderCenter"},on:{changeMallList:t.changeMallList}}),a("div",{staticClass:"tool-item"},[a("span",[t._v("创建时间：")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:function(e){return t.changeTime(e,"createTime")}},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}})],1)],1),a("el-row",{staticClass:"row-style"},[a("div",{staticClass:"tool-item mar-right"},[a("span",[t._v("发货状态：")]),a("el-select",{staticClass:"inputBox",attrs:{placeholder:"",size:"mini"},model:{value:t.selectForm.orderStatus,callback:function(e){t.$set(t.selectForm,"orderStatus",e)},expression:"selectForm.orderStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.orderStatusList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("div",{staticClass:"tool-item mar-right"},[a("span",[t._v("物流单号：")]),a("el-select",{staticClass:"inputBox",attrs:{placeholder:"",size:"mini"},model:{value:t.selectForm.hasTrackingNo,callback:function(e){t.$set(t.selectForm,"hasTrackingNo",e)},expression:"selectForm.hasTrackingNo"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已申请",value:"1"}}),a("el-option",{attrs:{label:"未申请",value:"2"}})],1)],1),a("div",{staticClass:"tool-item mar-right"},[a("span",[t._v("面单下载状态：")]),a("el-select",{staticClass:"inputBox",attrs:{placeholder:"",size:"mini"},model:{value:t.selectForm.isPrint,callback:function(e){t.$set(t.selectForm,"isPrint",e)},expression:"selectForm.isPrint"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已下载",value:"1"}}),a("el-option",{attrs:{label:"未下载",value:"2"}})],1)],1),a("div",{staticClass:"tool-item mar-right"},[a("span",[t._v("截止时间：")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){return t.changeTime(e,"shipByDate")}},model:{value:t.shipByDate,callback:function(e){t.shipByDate=e},expression:"shipByDate"}})],1)]),a("el-row",{staticClass:"row-style"},[a("div",{staticClass:"tool-item mar-right"},[a("span",[t._v("订单编号：")]),a("el-input",{staticClass:"inputBox",attrs:{size:"mini",clearable:""},model:{value:t.selectForm.orderSn,callback:function(e){t.$set(t.selectForm,"orderSn",e)},expression:"selectForm.orderSn"}})],1),a("el-button",{staticClass:"mar-right",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getOrderList(1)}}},[t._v("搜索")]),a("el-button",{staticClass:"mar-right",attrs:{size:"mini",type:"primary"},on:{click:function(e){t.goodsSearchVisible=!0}}},[t._v("订单号批量查询")]),a("el-button",{staticClass:"mar-right",attrs:{size:"mini",type:"primary"},on:{click:t.openBefore}},[t._v("批量添加本地备注")]),a("el-checkbox",{staticClass:"mar-right",model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}},[t._v("隐藏日志")]),a("p",{staticClass:"tableActive"},[t._v("同步和打印台湾站的面单信息（除711外），请走代理")])],1)],1)])])]),a("div",{staticClass:"content"},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{"use-virtual":"",border:!1,data:t.tableData,"tooltip-effect":"dark",height:"630px"},on:{"selection-change":t.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),a("u-table-column",{attrs:{prop:"order_sn",label:"订单编号","min-width":"170px",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(a){return t.copyItem(e.row.order_sn)}}}),a("span",{staticClass:"tableActive",on:{click:function(a){return t.viewDetails("orderDetail",e.row.order_id,e.row.mall_info.platform_mall_id)}}},[t._v(t._s(e.row.order_sn))])]}}])}),a("u-table-column",{attrs:{label:"操作",prop:"","min-width":"150px",fixed:"left",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",{staticStyle:{width:"100px","margin-left":"10px"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{size:"mini",plain:"",type:"primary"}},[t._v(" 更多操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(a){return t.syncFaceDataSingle(e.row)}}},[t._v("同步面单信息")])]),a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(a){return t.batnchDownLoad([e.row],"view")}}},[t._v("面单预览")])]),a("el-dropdown-item",[0!=e.row.hasLogistics?a("div",{staticClass:"dropdownItem",on:{click:function(a){return t.batnchDownLoad([e.row],"down")}}},[t._v("下载面单")]):t._e()])],1)],1)]}}])}),a("u-table-column",{attrs:{"min-width":"80px",label:"站点",prop:"country",align:"center",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.mall_info?[t._v(t._s(t._f("chineseSite")(e.row.mall_info.country)))]:void 0}}],null,!0)}),a("u-table-column",{attrs:{label:"店铺名称",prop:"mall_info.platform_mall_name","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{align:"center",label:"商品数量","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.goods_count))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"123456",label:"商品详情","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.openGoodsDetail(e.row)}}},[t._v("商品详情")])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"created_time",label:"订单创建时间","min-width":"140"}}),a("u-table-column",{attrs:{align:"center",prop:"ship_by_date",label:"截止发货时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.ship_by_date))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"ship_by_date",label:"是否已申请物流单号","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{style:{color:""==e.row.tracking_no?"red":"#32CD32"}},[t._v(t._s(""==e.row.tracking_no?"未申请":"已申请"))])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"ship_by_date",label:"是否同步面单信息","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{style:{color:0==e.row.hasLogistics?"red":"#32CD32"}},[t._v(t._s(0==e.row.hasLogistics?"否":"是"))])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"order_status",label:"发货状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{style:{color:t.changeOrderStatus(e.row.order_status,"color")}},[t._v(t._s(t.changeOrderStatus(e.row.order_status)))])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"logistics_name",label:"虾皮物流","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.logistics_name))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"tracking_no",label:"虾皮物流单号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tracking_no))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"remark",label:"本地备注","min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{directives:[{name:"show",rawName:"v-show",value:!(e.row.id===t.activeRemarkID),expression:"!(scope.row.id === activeRemarkID ? true : false)"}],staticStyle:{cursor:"pointer"},on:{click:function(a){return t.editRemark(e.$index,e.row.id)}}},[a("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})],1),e.row.id===t.activeRemarkID?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){return t.changeRemark(e.row.id,e.$index)}},model:{value:t.orderRemark,callback:function(e){t.orderRemark=e},expression:"orderRemark"}}):t._e()]}}])}),a("u-table-column",{attrs:{align:"center",prop:"note",label:"shopee备注","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.note))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"note",label:"是否已下载面单","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("1"==e.row.is_print?"已下载":"未下载"))]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,50,100,200],"page-size":t.pageSize,"current-page":t.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}}),a("el-dialog",{attrs:{title:"商品详情",visible:t.goodsListVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(e){t.goodsListVisible=e},close:t.closeDialog}},[a("el-table",{ref:"goodsTable",attrs:{data:t.goodsList,"tooltip-effect":"dark",height:"400px"}},[a("el-table-column",{attrs:{align:"center",prop:"order_sn",label:"订单编号","min-width":"120"}}),a("el-table-column",{attrs:{align:"center",label:"商品图片","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"56px",height:"56px"},attrs:{src:t._f("imageRender")([e.row.goods_img])}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"goods_id",label:"商品ID","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.openUrl(t.clickRow,e.row.goods_id,"product")}}},[t._v(t._s(e.row.goods_id))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"goods_count",label:"商品数量","min-width":"120"}}),a("el-table-column",{attrs:{align:"center",prop:"variation_name",label:"商品规格","min-width":"120"}})],1)],1),a("el-dialog",{attrs:{title:"订单号批量查询",visible:t.goodsSearchVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(e){t.goodsSearchVisible=e},close:t.closeDialog}},[a("p",[t._v("请输入订单号，一行一个，最多五十个")]),a("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.goodsOrderSnStr,callback:function(e){t.goodsOrderSnStr=e},expression:"goodsOrderSnStr"}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getOrderList(1,t.goodsOrderSnStr)}}},[t._v("批量查询")])],1)],1),a("el-dialog",{attrs:{title:"批量添加本地备注",visible:t.localRamarkVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(e){t.localRamarkVisible=e}}},[a("div",{staticClass:"remark-style"},[a("span",[t._v("本地备注")]),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.localRamark,callback:function(e){t.localRamark=e},expression:"localRamark"}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.batchSetRemark}},[t._v("批量添加")])],1)])],1)},r=[],i=a("1da1"),s=(a("96cf"),a("159b"),a("a15b"),a("c740"),a("d3b7"),a("25f0"),a("4de4"),a("b64b"),a("7db0"),a("b0c0"),a("ac1f"),a("5319"),a("caad"),a("2532"),a("a9e3"),a("99af"),a("a434"),a("d81d"),a("1276"),a("bcd0")),o=a("feb6"),l=a("0e0b"),c=a("0098"),u={components:{storeChoose:o["a"]},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},selectMallList:[],createTime:[],shipByDate:[],selectForm:{orderStatus:2,orderSn:"",isPrint:"",hasTrackingNo:"2"},orderStatusList:s["o"],trackStatus:["","已申请","未申请"],logisticsStatusList:["未下载","已下载","未下载"],total:0,pageSize:20,currentPage:1,multipleSelection:[],tableLoading:!1,tableData:[],showConsole:!0,goodsList:[],goodsListVisible:!1,goodsSearchVisible:!1,goodsOrderSnStr:"",localRamarkVisible:!1,localRamark:"",activeRemarkID:"",orderRemark:""}},mounted:function(){var t=this;this.createTime=Object(l["f"])(15),setTimeout((function(){t.getOrderList()}),2e3)},methods:{updateOrderPrintStatus:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=[],t.forEach((function(t){n.push(t.MainOrderNo)})),r={mainOrderSns:n.join(","),isPrint:"1"},a.next=5,e.$api.updateOrderPrintStatus(r);case 5:i=a.sent,200===i.data.code&&n.forEach((function(t){var a=e.tableData.findIndex((function(e){return e.main_order_sn===t}));a>-1&&e.$set(e.tableData[a],"is_print","1")}));case 7:case"end":return a.stop()}}),a)})))()},changeTime:function(t,e,a){var n=Object(l["n"])(new Date(t[0]).getTime(),new Date(t[1]).getTime());if(n>93)return a?this[e][a]=Object(l["f"])(30):this[e]=Object(l["f"])(30),this.$message.warning("只支持查询或导出93天内的数据,请重新选择时间！")},downTWface:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.multipleSelection.filter((function(t){return"TW"==t.country})),a.length){e.next=4;break}return e.abrupt("return",t.$message.warning("请选择台湾站订单数据"));case 4:return n=[],a.forEach((function(t){n.push(t.main_order_sn)})),r=n.toString(),i={mainOrderSns:r},e.next=10,t.$api.getLogisticsInformationBatch(i);case 10:s=e.sent,o=[],o=200===s.data.code&&s.data.data.length?s.data.data:a,t.downFace(o,a,"TW",!1,!1,!1,!0),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),t.tableLoading=!1;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()})),batnchDownLoad:function(t,e){var a=this;if(!t.length)return this.$message.warning("请选择要操作的数据！");"down"==e?this.$confirm("pdf文件后缀是否小写?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){a.batchPrintOrderSurface(t,!0,!0,!1,!1)})).catch((function(){a.batchPrintOrderSurface(t,!1,!0,!1,!1)})):"view"==e&&this.$confirm("是否需要打印虚拟面单?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){a.batchPrintOrderSurface(t,!1,!1,!0,!0)})).catch((function(){a.batchPrintOrderSurface(t,!1,!1,!0,!1)}))},batchPrintOrderSurface:function(t,e,a,n,r){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var o,l,c,u,d,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o="",l={},c="",t.forEach((function(t,e){l[t.country]=t.country,o=t.country,c=0===e?t.main_order_sn:c+","+t.main_order_sn})),!(Object.keys(l).length>1)){i.next=6;break}return i.abrupt("return",s.$message.warning("由于每个站点面单不一致，请分站点批量预览和打印！"));case 6:return u={mainOrderSns:c},d=[],i.prev=8,i.next=11,s.$api.getLogisticsInformationBatch(u);case 11:if(p=i.sent,200!==p.data.code){i.next=16;break}d=p.data.data,i.next=17;break;case 16:return i.abrupt("return",s.$message.warning("面单获取失败！"));case 17:if(d.length){i.next=19;break}return i.abrupt("return",s.$message.warning("暂无面单信息"));case 19:s.downFace(d,t,o,e,a,n,r),i.next=25;break;case 22:i.prev=22,i.t0=i["catch"](8),s.tableLoading=!1;case 25:case"end":return i.stop()}}),i,null,[[8,22]])})))()},downFace:function(t,e,a,n,r,s,o){var l=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var c,u,d,p,m,f,h,g,b,w,_,v,S,y,k,x,L,C,O,I,R;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:l.showConsole=!1,l.$refs.Logs.consoleMsg="",i.prev=2,c=[],u=function(n){var r=t[n];if(!r.url&&"TW"!==a)return l.$refs.Logs.writeLog("订单".concat(r.order_sn,"未获取到面单信息"),!1),"continue";var i=e.find((function(t){return t.order_sn==r.order_sn})),s={PDFUrl:r.url||"",OrderNo:i.order_sn,MainOrderNo:i.main_order_sn,PlatformLogisticsId:i.tracking_no,PlatformLogisticsName:"",CreateTime:i.created_at,BuyerName:i.name,BuyerPhone:i.phone,BuyerAddress:r.data&&r.data.full_address?r.data.full_address:i.address,BuyerNote:"",BarInfo:{BarCode:i.order_sn,BarCodeWidth:200,BarCodeHeight:50},SkuList:[i.goodsInfo[0].variation_sku.replace("=|=",""),i.goodsInfo[0].goods_count],IsNeedCut:30007==i.logistics_id||30008==i.logistics_id,IsUseA4Size:!1,PdfWidth:320,PdfHeight:425,LocationY:-420,PrintStatus:"0",MallId:i.mall_info.platform_mall_id,MallName:i.mall_info.platform_mall_name};c.push(s)},d=0;case 6:if(!(d<t.length)){i.next=13;break}if(p=u(d),"continue"!==p){i.next=10;break}return i.abrupt("continue",10);case 10:d++,i.next=6;break;case 13:return m={IsDownload:r,PdfExtendName:n?".pdf":".PDF",PdfExtendNameIsLower:n,IsPrintVirtualFaceSheet:o,Site:a,IsShowWindow:s,PdfInfoList:c,VirtualPdfPath:{},ConvertFaceInfoList:[]},i.next=16,window["BaseUtilBridgeService"].getOrderPdfInfo(m);case 16:if(f=i.sent,h=JSON.parse(f),200==h.code){i.next=22;break}for(b in g="",h.failList)g=g+","+b+","+h.failList[b],g=g.substring(1);return i.abrupt("return",l.$refs.Logs.writeLog("预览失败,".concat(g),!1));case 22:if(w=JSON.parse(JSON.stringify(c)),w.forEach((function(t){var e=h.data.find((function(e){return e&&e.OrderSn==t.OrderNo}));e&&(t.PDFUrl=e.PDFFilePath)})),_=null,v={},!o){i.next=33;break}return i.next=29,window["BaseUtilBridgeService"].getVirtualFace(w,!0);case 29:if(_=i.sent,v=_&&JSON.parse(_),v&&"200"==v.code){i.next=33;break}return i.abrupt("return",l.$message.warning("获取虚拟面单失败"));case 33:S=[],y=function(n){var r=t[n];if(!r.url&&"TW"!==a)return l.$refs.Logs.writeLog("订单".concat(r.order_sn,"未获取到面单信息"),!1),"continue";var i=e.find((function(t){return t.order_sn==r.order_sn})),s=h.data&&h.data.find((function(t){return t&&t.OrderSn==i.order_sn}))||null,c={HtmlFilePath:s?s.PDFFilePath:r.url&&r.url.includes(".html")?r.url:"",PDFFilePath:s?s.PDFFilePath:r.url&&r.url.includes(".PDF")||r.url&&r.url.includes(".pdf")?r.url:"",LogisticsId:i.logistics_id.toString(),OrderSn:i.order_sn,MallId:Number(i.mall_info.platform_mall_id),VirtualFilePath:o?v.data[i.order_sn]:""};S.push(c)},k=0;case 36:if(!(k<t.length)){i.next=43;break}if(x=y(k),"continue"!==x){i.next=40;break}return i.abrupt("continue",40);case 40:k++,i.next=36;break;case 43:return i.next=45,window["BaseUtilBridgeService"].htmlToPdf(S,!1);case 45:if(L=i.sent,C=L&&JSON.parse(L),200==C.code){i.next=51;break}for(I in O="",C.failList)O=O+","+I+","+C.failList[I],O=O.substring(1);return i.abrupt("return",l.$refs.Logs.writeLog("打印面单失败,".concat(O),!1));case 51:return R={IsDownload:r,PdfExtendName:n?".pdf":".PDF",PdfExtendNameIsLower:n,IsPrintVirtualFaceSheet:o,Site:a,IsShowWindow:s,PdfInfoList:w,VirtualPdfPath:o?v.data:{},ConvertFaceInfoList:C.data},l.tableLoading=!0,i.next=55,window["BaseUtilBridgeService"].downloadPdf(R);case 55:return l.tableLoading=!1,r&&l.$refs.Logs.writeLog("面单下载完成,请前往桌面查看",!0),i.next=59,l.updateOrderPrintStatus(c);case 59:o&&l.$refs.Logs.writeLog("虚拟面单下载完成,请前往软件所在文件夹查看",!0),i.next=66;break;case 62:i.prev=62,i.t0=i["catch"](2),l.tableLoading=!1,i.t0.includes("进程")?l.$refs.Logs.writeLog("打印面单失败，文件被占用请重启软件",!1):l.$refs.Logs.writeLog("打印面单失败，".concat(i.t0),!1);case 66:case"end":return i.stop()}}),i,null,[[2,62]])})))()},syncFaceDataSingle:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("1"!=t.hasLogistics||""==t.tracking_no){a.next=2;break}return a.abrupt("return",e.$message.warning("订单面单已存在，无需再同步！"));case 2:e.syncSurface([t],!0);case 3:case"end":return a.stop()}}),a)})))()},syncSurfaceBefore:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.multipleSelection.length){e.next=2;break}return e.abrupt("return",t.$message.warning("请先选择数据！"));case 2:if(a=t.multipleSelection.filter((function(t){return"1"!==t.hasLogistics||""==t.tracking_no})),a.length){e.next=5;break}return e.abrupt("return",t.$message.warning("当前没有需要同步面单的订单！"));case 5:n=a.filter((function(t){return"TW"==t.country})),n.length?t.$confirm("是否同时批量同步台湾站点的面单（同步台湾站的面单将会缩短发货时效，请谨慎选择）!","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){t.syncSurface(a,!0)})).catch((function(){var e=a.filter((function(t){return"TW"!==t.country}));t.syncSurface(e,!1)})):t.syncSurface(a,!1);case 7:case"end":return e.stop()}}),e)})))()},syncSurface:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.showConsole=!1,t.length){n.next=4;break}return a.$refs.Logs.writeLog("没有要同步的订单！",!0),n.abrupt("return");case 4:a.$refs.Logs.writeLog("同步面单信息开始，请耐心等待！",!0),r=new c["a"](a,a.$refs.Logs.writeLog),r.handleStart(t,e);case 7:case"end":return n.stop()}}),n)})))()},downLoadPickList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.multipleSelection.length){e.next=2;break}return e.abrupt("return",t.$message.warning("请先选择数据！"));case 2:t.showConsole=!1,t.$refs.Logs.writeLog("下载拣货单开始，请耐心等待！",!0),a=new c["a"](t,t.$refs.Logs.writeLog),a.getPickListData(t.multipleSelection);case 6:case"end":return e.stop()}}),e)})))()},getExportData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,o,l,c,u,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.multipleSelection.length){e.next=4;break}t.tableToExcel([t.multipleSelection]),e.next=36;break;case 4:return a="",t.selectMallList.forEach((function(t,e){a=0===e?t.id:a+","+t.id})),n=JSON.parse(JSON.stringify(t.selectForm)),n["page"]=1,n["pageSize"]=200,n["sysMallId"]=a,n["createTime"]=t.createTime.length?t.createTime[0]+" 00:00:00/"+t.createTime[1]+" 23:59:59":"",t.tableLoading=!0,e.next=14,t.$api.getDeliveryList(n);case 14:r=e.sent,s=r.data,o=[],l=s&&200===s.code&&s.data.data&&s.data.data||[];case 18:if(!l||!l.length){e.next=29;break}return l.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.joinLink(a,a.goodsInfo[0].goods_id);case 2:a.goodsLink=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=o.concat(l),n.page++,e.next=24,t.$api.getDeliveryList(n);case 24:c=e.sent,u=c.data,l=u&&200===u.code&&u.data.data&&u.data.data||[],e.next=18;break;case 29:if(t.tableLoading=!1,o.length){e.next=32;break}return e.abrupt("return",t.$message.warning("没有可导出的数据！"));case 32:if(d=[],p=JSON.parse(JSON.stringify(o)),p.length>7e3){m=0;while(p.length)d[m]=p.splice(0,7e3),m++}else d[0]=p;t.tableToExcel(d);case 36:case"end":return e.stop()}}),e)})))()},tableToExcel:function(t){for(var e=1,a="<tr>\n            <td>编号</td>\n            <td>站点</td>\n            <td>店铺名称</td>\n            <td>订单编号</td>\n            <td>商品数量</td>\n            <td>商品规格</td>\n            <td>商品链接</td>\n            <td>商品图片</td>\n            <td>订单创建时间</td>\n            <td>截止发货时间</td>\n            <td>是否已申请物流单号</td>\n            <td>是否同步面单信息</td>\n            <td>发货状态</td>\n            <td>虾皮物流</td>\n            <td>虾皮物流单号</td>\n            </tr>",n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)for(var o=r[i],c=0;c<o.goodsInfo.length;c++){var u=o.goodsInfo[c];a+="<tr><td>".concat(e++,"</td>\n                <td>").concat(o.mall_info&&o.mall_info.country?this.$filters.chineseSite(o.mall_info.country):"\t","</td>\n                <td>").concat(o.mall_info&&o.mall_info.platform_mall_name?o.mall_info.platform_mall_name:"\t","</td>\n                <td style=\"mso-number-format:'@';\">").concat(u.order_sn?u.order_sn:"\t","</td>\n                <td>").concat(u.goods_count?u.goods_count:"\t","</td>\n                <td>").concat(u?u.variation_name:"\t","</td>\n                <td>").concat(o.goodsLink?o.goodsLink:"\t","</td>\n                <td>").concat(u?this.$filters.imageRender([u.goods_img]):"\t","</td>\n                <td>").concat(o.created_time?o.created_time:"\t","</td>\n                <td>").concat(o.ship_by_date?o.ship_by_date:"\t","</td>\n                <td>").concat(o.is_apply_tracking_no?this.trackStatus[o.is_apply_tracking_no]:"\t","</td>\n                <td>").concat(0==o.hasLogistics?"否":"是\t","</td>\n                <td>").concat(o.order_status?Object(s["d"])(o.order_status):"\t","</td>\n                <td>").concat(o.logistics_name?o.logistics_name:"\t","</td>\n                <td>").concat(o.tracking_no?o.tracking_no:"\t","</td>\n                </tr>")}Object(l["j"])("发货管理订单数据",a)},changeRemark:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$api.setLocalRemark({id:t,remark:a.orderRemark});case 2:if(r=n.sent,200!=r.data.code){n.next=8;break}return a.$message.success("设置备注成功"),a.tableData[e].remark=a.orderRemark,a.activeRemarkID="",n.abrupt("return");case 8:a.$message.error("设置备注失败"),a.activeRemarkID="";case 10:case"end":return n.stop()}}),n)})))()},editRemark:function(t,e){this.activeRemarkID=e,this.orderRemark=this.tableData[t].remark},openBefore:function(){if(!this.multipleSelection.length)return this.$message.warning("请先选择需要备注的商品！");this.localRamarkVisible=!0},batchSetRemark:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.multipleSelection.length){e.next=2;break}return e.abrupt("return",t.$message.warning("请先选择需要标记的商品！"));case 2:t.showConsole=!1,t.multipleSelection.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={id:a.id,remark:t.localRamark},e.next=3,t.$api.setLocalRemark(n);case 3:r=e.sent,200===r.data.code?(t.$refs.multipleTable.toggleRowSelection(a,!1),t.$refs.Logs.writeLog("订单编号【".concat(a.order_sn,"】备注成功"),!0)):t.$refs.Logs.writeLog("订单编号【".concat(a.order_sn,"】备注失败-").concat(r.data.message),!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.closeDialog(),t.getOrderList();case 6:case"end":return e.stop()}}),e)})))()},handleKey:function(t){return t.split("\n").map((function(t){return t.replace(/(^\s*)|(\s*$)/g,"")})).filter((function(t){return""!=t}))},openGoodsDetail:function(t){this.clickRow=t,this.goodsList=t.goodsInfo,this.goodsListVisible=!0},closeDialog:function(){this.clickRow={},this.goodsList=[],this.goodsSearchVisible=!1,this.goodsOrderSnStr="",this.localRamark="",this.localRamarkVisible=!1},getOrderList:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r="",a.selectMallList.forEach((function(t,e){r=0===e?t.id:r+","+t.id})),i=JSON.parse(JSON.stringify(a.selectForm)),a.currentPage=t||a.currentPage,i["page"]=a.currentPage,i["pageSize"]=a.pageSize,i["sysMallIds"]=r,i["createTime"]=a.createTime&&a.createTime.length?a.createTime[0]+" 00:00:00/"+a.createTime[1]+" 23:59:59":"",i["shipByDate"]=a.shipByDate&&a.shipByDate.length?a.shipByDate[0]+" 00:00:00/"+a.shipByDate[1]+" 23:59:59":"",e&&(s=a.handleKey(e),s=s.splice(0,50),i.orderSn=s.join(",")),a.tableLoading=!0,n.next=13,a.$api.getDeliveryList(i);case 13:o=n.sent,200===o.data.code?(a.tableData=o.data.data.data,a.total=o.data.data.total):a.$message.error("获取列表失败，".concat(o.data?o.data.message:"")),a.tableLoading=!1,a.closeDialog();case 17:case"end":return n.stop()}}),n)})))()},joinLink:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r="",!t.mall_info||!t.mall_info.platform_mall_id){n.next=7;break}return i={platform_mall_id:t.mall_info?t.mall_info.platform_mall_id:""},n.next=5,a.$shopeemanService.getWebUrl(t.country,i);case 5:s=n.sent,r=s+"/product/"+t.mall_info.platform_mall_id+"/"+e;case 7:return n.abrupt("return",r);case 8:case"end":return n.stop()}}),n)})))()},openUrl:function(t,e,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var i,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=t,"product"!==a){r.next=7;break}return s={platform_mall_id:t.mall_info.platform_mall_id},r.next=5,n.$shopeemanService.getWebUrl(t.country,s);case 5:o=r.sent,i=o+"/product/"+t.mall_info.platform_mall_id+"/"+e;case 7:n.$BaseUtilService.openUrl(i);case 8:case"end":return r.stop()}}),r)})))()},viewDetails:function(t,e,a){var n={type:t,shopId:a,id:e};this.$BaseUtilService.getOrderDetailInfo(a,JSON.stringify(n))},changeMallList:function(t){this.selectMallList=t.mallList},handleCurrentChange:function(t){this.currentPage=t,this.getOrderList()},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this.getOrderList()},handleSelectionChange:function(t){this.multipleSelection=t},copyItem:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var a=document.createRange();a.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(n){}e.parentElement.removeChild(e)},changeOrderStatus:s["d"]}},d=u,p=(a("731c"),a("2877")),m=Object(p["a"])(d,n,r,!1,null,"b05dd4c6",null);e["default"]=m.exports},feb6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"storeChooseUL"},[t.isMall?a("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:t.isBanPerform},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{disabled:t.isBanPerform,multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupIdList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})})),1)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{disabled:t.isBanPerform,placeholder:"",multiple:!t.isAShop,"collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:"",clearable:""},on:{"visible-change":function(e){return t.filterMall("")}},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[t.isAShop?t._e():a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteShowList,(function(e,n){return t.showMall(e,n)?a("el-option",{key:n,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}}):t._e()}))],2)],1),t.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},r=[],i=a("1da1"),s=a("b85c"),o=a("2909"),l=(a("96cf"),a("d81d"),a("fb6a"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("99af"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("c740"),a("7db0"),a("7646")),c=a("2b0e");c["default"].directive("loadmore",{bind:function(t,e){var a=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t,e){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var a=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var n=e.indexOf("")>-1,r=t.indexOf("")>-1;n!==r?this.groupId=r?Object(o["a"])(this.groupIdList.map((function(t){return t.id}))):[]:r?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var n=this.isShowName;if(!this.isAShop){var r=e.includes(""),i=t.includes("");if(r!==i||e.toString()===t.toString()&&this.isShowNameAll)if(i&&(!n||n&&!this.isShowNameAll)){var l=n&&Object(o["a"])(this.siteShowList.map((function(t){return t.platform_mall_id})))||[""].concat(Object(o["a"])(this.siteList.map((function(t){return t.platform_mall_id})))),c=new Set([].concat(Object(o["a"])(l),Object(o["a"])(e)));this.site=Object(o["a"])(c),this.isShowNameAll=!0,n&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(n){var d=n&&Object(o["a"])(this.siteShowList.map((function(t){return t.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,m=d.length>this.site.length&&d||this.site;u=new Set(this.site);var f,h=Object(s["a"])(m);try{for(h.s();!(f=h.n()).done;){var g=f.value;p.includes(g)&&u.delete(g)}}catch(b){h.e(b)}finally{h.f()}u.delete("")}this.site=Object(o["a"])(u)}else i?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1}setTimeout((function(){a.changeMallList(),a.filterMall(n),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,i,s,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.site=[],n=e.countryVal,r=[],!(e.jsonMallData.length>0)){a.next=7;break}r=e.jsonMallData,a.next=12;break;case 7:return a.next=9,e.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:i=a.sent,r=JSON.parse(i)||[],e.jsonMallData=JSON.parse(i)||[];case 12:if(!(r.length>0)){a.next=17;break}1===t&&(e.siteList=""===n?r:r.filter((function(t){return t.country===n}))),2===t&&(0===e.groupId.length?e.siteList=[]:(e.siteList=[],e.groupId.forEach((function(t){r.forEach((function(a){n?t===a.group_id&&n===a.country&&e.siteList.push(a):t===a.group_id&&e.siteList.push(a)}))})))),a.next=22;break;case 17:return s={country:"",mallGroupIds:""},a.next=20,e.mallListAPIInstance.ddMallGoodsGetMallList(s);case 20:o=a.sent,200===o.code?(e.$appConfig.temporaryCacheInfo("save","mallAllData",o.data),l=o.data||[],e.siteList=l,e.jsonMallData=l,e.siteList=""===n?l:l.filter((function(t){return t.country===n}))):e.$message.error("获取分组、店铺列表失败");case 22:0===e.groupIdList.length&&(e.groupIdList=[{group_name:"全部",id:""}],e.groupId=[""],e.siteList.forEach((function(t){var a=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&a<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=!e.isAShop&&[""]||""}),10);case 24:case"end":return a.stop()}}),a)})))()},changeMallList:function(){var t=this,e=[],a="";if(this.isAShop){var n=this.siteList.find((function(e){return e.platform_mall_id===t.site}));a=this.site,e.push(n)}else this.site.forEach((function(n){if(n){var r=t.siteList.find((function(t){return t.platform_mall_id===n}));e.push(r),a+=n+","}}));!this.countryVal&&this.groupId.indexOf("")>-1&&(a=e.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))},filterMall:function(t){var e=this,a=t&&this.isShowName!==t?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){e.isShowName!==t&&(e.mallShowIndex=0),e.isShowName=t||"";var a=e.siteList;t&&(a=e.siteList.filter((function(e){var a=e.mall_alias_name||e.platform_mall_name;return a.includes(t)}))),e.siteShowList=a}),a)},showMall:function(t,e){var a=t.mall_alias_name||t.platform_mall_name,n=this.site[0]===t.platform_mall_id;return n||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteShowList.length>this.showMallNumber){var a=0;t?(a=this.mallShowIndex+10,a=a<this.siteShowList.length-this.showMallNumber&&a||this.siteShowList.length-this.showMallNumber):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30),this.mallShowIndex=a}}}},d=u,p=(a("8992"),a("2877")),m=Object(p["a"])(d,n,r,!1,null,null,null);e["a"]=m.exports}}]);