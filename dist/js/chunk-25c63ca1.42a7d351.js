(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25c63ca1"],{"0b64":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var i=a("1da1"),r=a("d4ec"),n=a("bee2"),s=(a("96cf"),function(){function t(e){Object(r["a"])(this,t),this._this=e}return Object(n["a"])(t,[{key:"putModelActive",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$shopeemanService.mixChinese(e,"/api/marketing/v3/discount/nominate/",a,{Headers:{"Content-Type":" application/json"}},"put");case 3:if(i=t.sent,r=i&&JSON.parse(i),!r||200!==r.status){t.next=14;break}if(n=JSON.parse(r.data),!n||0!==n.code){t.next=11;break}return t.abrupt("return",{code:200,data:n.data||[]});case 11:return t.abrupt("return",{code:50001,data:n.message||r.statusText||""});case 12:t.next=17;break;case 14:if(403!==r.status){t.next=16;break}return t.abrupt("return",{code:r.status,data:"操作失败，店铺未登录！"});case 16:return t.abrupt("return",{code:r.status,data:"操作失败".concat(r.statusText)});case 17:t.next=22;break;case 19:return t.prev=19,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"操作异常： ".concat(t.t0)});case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"deleteCollectGoodsInfo",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$commodityService.deleteCollectGoodsInfo(e);case 3:if(a=t.sent,i=this.isJsonString(a),200!==i.code){t.next=7;break}return t.abrupt("return",{code:200});case 7:return t.abrupt("return",{code:201,data:i.msg});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"删除云商品库数据异常 ".concat(t.t0)});case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"dismissInvalidProducts",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},a["ids"]=[e.id],a["mallId"]=e.platform_mall_id,t.next=6,this._this.$shopeemanService.postChinese(e.country,"/api/v3/product/dismiss_invalid_products?",a);case 6:if(i=t.sent,r=this.isJsonString(i),200!==r.status){t.next=12;break}if(n=this.isJsonString(r.data),0!==n.code){t.next=12;break}return t.abrupt("return",{code:200});case 12:return t.abrupt("return",{code:201,data:r.statusText});case 15:return t.prev=15,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"确认虾皮禁卖异常： ".concat(t.t0)});case 18:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteAddOnDealSubItemList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,i){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={},r["add_on_deal_id"]=a,r["create_type"]=0,r["sub_item_list"]=i,r["mallId"]=e.platform_mall_id,t.next=8,this._this.$shopeemanService.postChinese(e.country,"/api/marketing/v3/add_on_deal/sub_item_list/?",r);case 8:if(n=t.sent,s=this.isJsonString(this.isJsonString(n).data),"success"!==s.message){t.next=12;break}return t.abrupt("return",{code:200});case 12:return t.abrupt("return",{code:201,data:s.message});case 15:return t.prev=15,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"删除加购子商品异常： ".concat(t.t0)});case 18:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(e,a,i){return t.apply(this,arguments)}return e}()},{key:"getAdd0nDealAggrSubItemList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i["add_on_deal_id"]=a,i["mallId"]=e.platform_mall_id,t.prev=3,t.next=6,this._this.$shopeemanService.getChinese(e.country,"/api/marketing/v3/add_on_deal/aggr_sub_item_list/?",i);case 6:if(r=t.sent,n=this.isJsonString(this.isJsonString(r).data),"success"!==n.message){t.next=10;break}return t.abrupt("return",{code:200,data:n.data});case 10:return t.abrupt("return",{code:201,data:n.message});case 13:return t.prev=13,t.t0=t["catch"](3),t.abrupt("return",{code:-2,data:"子商品加购活动列表异常： ".concat(t.t0)});case 16:case"end":return t.stop()}}),t,this,[[3,13]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"deleteAddOnDealMainItemList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,i){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={},r["add_on_deal_id"]=i,r["main_item_list"]=[{item_id:e.id,status:a}],r["mallId"]=e.platform_mall_id,t.next=7,this._this.$shopeemanService.postChinese(e.country,"/api/marketing/v3/add_on_deal/main_item_list/?",r);case 7:if(n=t.sent,s=this.isJsonString(this.isJsonString(n).data),"success"!==s.message){t.next=11;break}return t.abrupt("return",{code:200});case 11:return t.abrupt("return",{code:201,data:s.message});case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"删除加购主商品异常： ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e,a,i){return t.apply(this,arguments)}return e}()},{key:"getAdd0nDealAggrMainItemList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var i,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={},i["add_on_deal_id"]=a,i["mallId"]=e.platform_mall_id,t.prev=3,t.next=6,this._this.$shopeemanService.getChinese(e.country,"/api/marketing/v3/add_on_deal/aggr_main_item_list/?",i);case 6:if(r=t.sent,n=this.isJsonString(r),200!==n.status){t.next=11;break}return s=this.isJsonString(n.data),t.abrupt("return",{code:200,data:s.data});case 11:return t.abrupt("return",{code:201,data:n.statusText});case 14:return t.prev=14,t.t0=t["catch"](3),t.abrupt("return",{code:-2,data:"主商品加购活动列表异常： ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[3,14]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getAddOnDealStandardSearch",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a["search_type"]="item_id",a["keyword"]=e.id,a["mallId"]=e.platform_mall_id,t.prev=4,t.next=7,this._this.$shopeemanService.getChinese(e.country,"/api/marketing/v3/add_on_deal/standard_search/?",a);case 7:if(i=t.sent,r=this.isJsonString(i),200!==r.status){t.next=12;break}return n=this.isJsonString(r.data),t.abrupt("return",{code:200,data:n.data});case 12:return t.abrupt("return",{code:201,data:r.statusText});case 15:return t.prev=15,t.t0=t["catch"](4),t.abrupt("return",{code:-2,data:"加购活动异常： ".concat(t.t0)});case 18:case"end":return t.stop()}}),t,this,[[4,15]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteBundleGoods",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i={},i["bundle_deal_id"]=a,i["items"]=[{item_id:e.id}],i["mallId"]=e.platform_mall_id,t.next=7,this._this.$shopeemanService.deleteChinese(e.country,"/api/marketing/v3/bundle_deal/item/",i,{headers:{"Content-Type":"application/json",referer:"portal/marketing/bundle/".concat(a)}});case 7:if(r=t.sent,n=this.isJsonString(this.isJsonString(r).data),"success"!==n.message){t.next=11;break}return t.abrupt("return",{code:200});case 11:return t.abrupt("return",{code:201,data:n.message});case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"删除套装商品异常： ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getBundleDeal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a["keyword"]=e.id,a["search_type"]="item_id",a["mallId"]=e.platform_mall_id,t.prev=4,t.next=7,this._this.$shopeemanService.getChineseReferer(e.country,"/api/marketing/v3/bundle_deal/standard_search/?",a);case 7:if(i=t.sent,r=this.isJsonString(i),200!==r.status){t.next=12;break}return n=this.isJsonString(r.data),t.abrupt("return",{code:200,data:n.data});case 12:return t.abrupt("return",{code:201,data:r.statusText});case 15:return t.prev=15,t.t0=t["catch"](4),t.abrupt("return",{code:-2,data:"套装活动异常： ".concat(t.t0)});case 18:case"end":return t.stop()}}),t,this,[[4,15]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteDiscountCampainDetail",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i={},i["discount_id"]=a,i["itemid_list"]=[e.id],i["mallId"]=e.platform_mall_id,t.next=7,this._this.$shopeemanService.deleteChinese(e.country,"/api/marketing/v3/discount/nominate/abnormal/",i,{headers:{"Content-Type":"application/json",referer:"/portal/marketing/discount/".concat(a,"/")}});case 7:if(r=t.sent,n=this.isJsonString(this.isJsonString(r).data),"success"!==n.message){t.next=11;break}return t.abrupt("return",{code:200});case 11:return t.abrupt("return",{code:201,data:n.message});case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"删除折扣商品异常： ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getMallDiscountsIdByKeyword",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a["search_type"]="item_id",a["keyword"]=e.id,a["mallId"]=e.platform_mall_id,a["promotion_status"]="ongoing",t.prev=5,t.next=8,this._this.$shopeemanService.getChinese(e.country,"/api/marketing/v3/discount/standard_search/?",a);case 8:if(i=t.sent,r=this.isJsonString(i),200!==r.status){t.next=13;break}return n=this.isJsonString(r.data),t.abrupt("return",{code:200,data:n.data});case 13:return t.abrupt("return",{code:201,data:r.statusText});case 16:return t.prev=16,t.t0=t["catch"](5),t.abrupt("return",{code:-2,data:"折扣活动异常： ".concat(t.t0)});case 19:case"end":return t.stop()}}),t,this,[[5,16]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCategoryName",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a,i,r){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$commodityService.getCategoryTbInfo(e,a+"",i,r);case 3:if(n=t.sent,s=this.isJsonString(n),200!==s.code){t.next=7;break}return t.abrupt("return",{code:200,data:s.data});case 7:return t.abrupt("return",{code:201,data:s.msg});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"获取类目名异常： ".concat(t.t0)});case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e,a,i,r){return t.apply(this,arguments)}return e}()},{key:"searchProductList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,r,n,s,o,c,l,u,d,p,m,h,g,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.mItem,i=e.pageSize,r=e.searchType,n=e.keyword,s=e.goodsMin,o=e.goodsMax,c=e.soldMin,l=e.soldMax,u=e.listType,d=e.categoryId,p=e.cursor,t.prev=1,m={page_number:a.pageNumber,page_size:i,mallId:a.platform_mall_id,search_type:r,keyword:n,category_id:d,stock_min:s,stock_max:o,sold_min:c,sold_max:l,list_type:u,count_list_types:"sold_out,banned,deboosted,deleted,unlisted",source:"seller_center",cursor:p,version:"4.0.0"},t.next=5,this._this.$shopeemanService.getChinese(a.country,"/api/v3/product/search_product_list/?",m,{headers:{accept:"application/json, text/plain, */*"}});case 5:if(h=t.sent,g=this.isJsonString(h),200!==g.status){t.next=12;break}if(b=this.isJsonString(g.data),"success"!==b.message){t.next=11;break}return t.abrupt("return",{code:200,data:b.data});case 11:return t.abrupt("return",{code:201,data:"数据获取失败：".concat(b.message)});case 12:if(403!==g.status){t.next=14;break}return t.abrupt("return",{code:403,data:"未登录，请登录后再查询"});case 14:if(0!==g.status){t.next=16;break}return t.abrupt("return",{code:0,data:"异常，请检查代理"});case 16:return t.abrupt("return",{code:g.status,data:"".concat(g.statusText)});case 19:return t.prev=19,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取数据异常： ".concat(t.t0)});case 22:case"end":return t.stop()}}),t,this,[[1,19]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getMpskuList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,i,r,n,s,o,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.mItem,i=e.pageSize,r=e.listType,n=e.listOrderType,t.prev=1,s={page_number:a.pageNumber,page_size:i,mallId:a.platform_mall_id,list_type:r,source:"seller_center",version:"1.0.0"},n&&(s["list_order_type"]=n),t.next=6,this._this.$shopeemanService.getChinese(a.country,"/api/v3/mpsku/get_mpsku_list/?",s,{headers:{accept:"application/json, text/plain, */*"}});case 6:if(o=t.sent,c=this.isJsonString(o),200!==c.status){t.next=13;break}if(l=this.isJsonString(c.data),"success"!==l.message){t.next=12;break}return t.abrupt("return",{code:200,data:l.data});case 12:return t.abrupt("return",{code:201,data:"数据获取失败：".concat(l.message)});case 13:if(403!==c.status){t.next=15;break}return t.abrupt("return",{code:403,data:"未登录，请登录后再查询"});case 15:if(0!==c.status){t.next=17;break}return t.abrupt("return",{code:0,data:"异常，请检查代理"});case 17:return t.abrupt("return",{code:c.status,data:"".concat(c.statusText)});case 20:return t.prev=20,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取数据异常： ".concat(t.t0)});case 23:case"end":return t.stop()}}),t,this,[[1,20]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isJsonString",value:function(t){if("string"!==typeof t)return t;try{return JSON.parse(t),JSON.parse(t)}catch(e){return t}}}]),t}())},"1b67":function(t,e,a){},"4c28":function(t,e,a){},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}},"73da":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"container-row"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("storeChoose",{on:{changeMallList:t.changeMallList}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.isFold=!t.isFold}}},[t._v(t._s(t.isFold?"折叠":"展开"))])],1),t.isFold?a("ul",{staticStyle:{"margin-bottom":"5px"}},[a("li",{staticClass:"data"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("商品数据相关")]),a("div",{staticClass:"base-item"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("li",{staticClass:"data-input"},[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"销售量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.soldMin,callback:function(e){t.soldMin=e},expression:"soldMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.soldMax,callback:function(e){t.soldMax=e},expression:"soldMax"}})],1),a("el-form-item",{attrs:{label:"访客量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.viewMin,callback:function(e){t.viewMin=e},expression:"viewMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.viewMax,callback:function(e){t.viewMax=e},expression:"viewMax"}})],1),a("el-form-item",{attrs:{label:"粉丝量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.likeMin,callback:function(e){t.likeMin=e},expression:"likeMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.likeMax,callback:function(e){t.likeMax=e},expression:"likeMax"}})],1),a("el-form-item",{attrs:{label:"价格："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.priceMin,callback:function(e){t.priceMin=e},expression:"priceMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.priceMax,callback:function(e){t.priceMax=e},expression:"priceMax"}})],1),a("el-form-item",{attrs:{label:"商品数量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.goodsMin,callback:function(e){t.goodsMin=e},expression:"goodsMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.goodsMax,callback:function(e){t.goodsMax=e},expression:"goodsMax"}})],1)],1)],1),a("li",[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"是否售空："}},[a("el-select",{attrs:{size:"mini",filterable:"",disabled:t.operationBut},model:{value:t.sellStatus,callback:function(e){t.sellStatus=e},expression:"sellStatus"}},[a("el-option",{attrs:{value:0,label:"全部"}}),t._l(t.sellStatusList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),a("el-form-item",{attrs:{label:"商品状态："}},[a("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"goodsStatus")}},model:{value:t.goodsStatus,callback:function(e){t.goodsStatus=e},expression:"goodsStatus"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("goodsStatus",t.goodsStatusList)}}}),t._l(t.goodsStatusList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),a("el-form-item",{attrs:{label:"上家来源："}},[a("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"source")}},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("source",t.sourceList)}}}),t._l(t.sourceList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),a("el-form-item",{attrs:{label:"更新时间："}},[a("el-date-picker",{attrs:{disabled:t.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.modifyTime,callback:function(e){t.modifyTime=e},expression:"modifyTime"}})],1),a("el-form-item",{attrs:{label:"创建时间："}},[a("el-date-picker",{attrs:{disabled:t.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}})],1)],1)],1)]),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("li",[a("el-checkbox",{staticStyle:{"margin-right":"3px"},attrs:{disabled:t.operationBut},model:{value:t.productNumChecked,callback:function(e){t.productNumChecked=e},expression:"productNumChecked"}},[t._v("单店查询商品数量")]),a("el-input",{staticStyle:{width:"105px"},attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productNum,callback:function(e){t.productNum=e},expression:"productNum"}})],1),a("li",{staticClass:"data-goods"},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:t.operationBut,size:"mini",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-select",{attrs:{slot:"prepend",disabled:t.operationBut},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1)]),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{staticStyle:{"margin-right":"3px"},attrs:{disabled:t.operationBut,type:"primary",size:"mini"},on:{click:function(e){t.editCategory=1,t.categoryVisible=!0}}},[t._v("选择类目")]),a("el-input",{staticStyle:{width:"455px"},attrs:{disabled:!0,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.categoryName,callback:function(e){t.categoryName=e},expression:"categoryName"}})],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("syncOriginGoodsNum")}}},[t._v("同步上家库存")]),a("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("goodsMove")}}},[t._v("商品搬迁")]),a("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchConfirm")}}},[t._v("批量确认")]),a("el-button",{attrs:{type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("refurbishment")}}},[t._v("商品一键翻新")])],1),a("ul",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=100,t.queryData()}}},[t._v("一键查询100小时以上无流量商品")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=200,t.queryData()}}},[t._v("一键查询200小时以上无流量商品")])],1)])])]),a("li",{staticClass:"operation"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("操作选项")]),a("div",{staticClass:"base-item"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=1,t.queryData()}}},[t._v("查询数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchTitle")}}},[t._v("批量编辑标题")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.operation("batchUpDownProduct"),t.upDown=!1}}},[t._v("批量上架")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=1,t.operation("batchDelete")}}},[t._v("批量删除")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchCategory")}}},[t._v("批量修改类目属性")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchDescription")}}},[t._v("批量编辑描述")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.operation("batchUpDownProduct"),t.upDown=!0}}},[t._v("批量下架")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.operationBut},on:{click:function(e){t.stop(),t.flag=!0}}},[t._v("取消操作")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:t.queryBanned}},[t._v("一键查询禁卖商品")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}},[t._v("隐藏日志")])],1),a("ul",[a("li",{staticClass:"operation-input"},[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"商品库存："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productStock,callback:function(e){t.productStock=e},expression:"productStock"}})],1),a("el-form-item",{attrs:{label:"商品价格："}},[a("el-input",{staticClass:"mini-input",attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]-/g,'')"},model:{value:t.productPrice1,callback:function(e){t.productPrice1=e},expression:"productPrice1"}}),t._v(" % + "),a("el-input",{staticClass:"mini-input",attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]-/g,'')"},model:{value:t.productPrice2,callback:function(e){t.productPrice2=e},expression:"productPrice2"}})],1),a("el-form-item",{attrs:{label:"发货天数："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productDay,callback:function(e){t.productDay=e},expression:"productDay"}})],1),a("el-form-item",{attrs:{label:"物流方式："}},[a("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"logistics")}},model:{value:t.logistics,callback:function(e){t.logistics=e},expression:"logistics"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("logistics",t.logisticsList)}}}),t._l(t.logisticsList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.ShipId,label:t.ShipName}})}))],2)],1),a("el-form-item",{attrs:{label:"商品重量："}},[a("el-input",{staticStyle:{width:"102px"},attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d.]/g,'')"},model:{value:t.productWeight,callback:function(e){t.productWeight=e},expression:"productWeight"}}),a("span",{staticClass:"red-span",staticStyle:{"margin-left":"3px"}},[t._v("kg")])],1),a("div",{staticStyle:{"line-height":"31px"}},[a("el-radio",{attrs:{disabled:t.operationBut,label:1},model:{value:t.freightRadio,callback:function(e){t.freightRadio=e},expression:"freightRadio"}},[t._v("免运")]),a("el-radio",{attrs:{disabled:t.operationBut,label:2},model:{value:t.freightRadio,callback:function(e){t.freightRadio=e},expression:"freightRadio"}},[t._v("运费由买家承担")])],1),a("el-form-item",{attrs:{label:"商品尺寸："}},[a("el-input",{staticClass:"mini-input item",attrs:{disabled:t.operationBut,size:"mini",placeholder:"长",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productLength,callback:function(e){t.productLength=e},expression:"productLength"}}),t._v("* "),a("el-input",{staticClass:"mini-input item",attrs:{disabled:t.operationBut,size:"mini",placeholder:"宽",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productWidth,callback:function(e){t.productWidth=e},expression:"productWidth"}}),t._v("* "),a("el-input",{staticClass:"mini-input item",attrs:{disabled:t.operationBut,size:"mini",placeholder:"高",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productHeight,callback:function(e){t.productHeight=e},expression:"productHeight"}})],1)],1)],1),a("li",{staticClass:"operation-but"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchStock")}}},[t._v("批量更新库存")]),a("span",{staticClass:"red-span"},[t._v("（0，表示库存设置为0）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("batchPrice")}}},[t._v("批量更新价格")]),a("span",{staticClass:"red-span"},[t._v("（加价公式：原价+原价*百分比+数值）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("batchDay")}}},[t._v("批量更新天数")]),a("span",{staticClass:"red-span"},[t._v("（最长30天）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[t.isCustomShipFee?a("el-popover",{attrs:{placement:"right",width:"320",trigger:"click"}},[a("div",[t._l(t.logistics,(function(e,i){return a("div",{key:i},t._l(t.logisticsList,(function(i,r){return a("div",{key:r},[i.ShipId===e&&!0===i.IsCustomShipFee?a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("span",{staticStyle:{"line-height":"24px","margin-right":"10px"}},[t._v(t._s(i.ShipName))]),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:i.CustomShipFee,callback:function(e){t.$set(i,"CustomShipFee",e)},expression:"item2.CustomShipFee"}})],1):t._e()])})),0)})),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchLogistics")}}},[t._v("确 定")])],1)],2),a("el-button",{attrs:{slot:"reference",disabled:t.operationBut,type:"primary",size:"mini"},slot:"reference"},[t._v("批量更新物流方式")])],1):t._e(),t.isCustomShipFee?t._e():a("el-button",{attrs:{slot:"reference",type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("batchLogistics")}},slot:"reference"},[t._v("批量更新物流方式")]),a("span",{staticClass:"red-span"},[t._v("（请先至商家后台开启对应物流方式）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchWeight")}}},[t._v("批量更新重量")]),a("span",{staticClass:"red-span"},[t._v("（必须大于0kg）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchFreight")}}},[t._v("批量更新运费")]),a("span",{staticClass:"red-span"},[t._v("（只能更改当前商品已开启的物流）")])],1),a("ul",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchSize")}}},[t._v("批量修改商品尺寸")])],1)])])])])]),a("li",{staticClass:"progress"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("操作进度相关")]),a("div",{staticClass:"base-item"},[a("ul",[a("el-progress",{staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.percentage),status:"success"}})],1),a("ul",[a("li",[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"查询数量："}},[t._v(" "+t._s(t.queryNum)+" ")]),a("el-form-item",{attrs:{label:"更新数量："}},[t._v(" "+t._s(t.updateNum)+" ")]),a("el-form-item",{attrs:{label:"成功数量："}},[t._v(" "+t._s(t.successNum)+" ")]),a("el-form-item",{attrs:{label:"失败数量："}},[t._v(" "+t._s(t.failNum)+" ")])],1)],1)])])])])]):t._e(),t.isFold?a("ul",[a("span",{staticClass:"red-span"},[t._v("说明：库存公式：设置后的库存 = 原库存 +（填写的库存）；如果填写的库存为零将会把商品的库存置为0； 价格公式：设置后的价格 = 原价 +（原价*填写的百分比）+（填写的价格）")])]):t._e()]),a("el-row",{attrs:{id:"article"}},[a("u-table",{ref:"plTable",attrs:{data:t.tableData,"use-virtual":"",height:t.isFold?490:800,"row-height":68,"data-changes-scroll-top":!1,border:!1,"header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":t.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("chineseSite")(a.country))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"200",label:"类目",prop:"","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.getCategoryName(a.categoryId,a.country))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"店铺名",prop:"mallName","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.images?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t._f("imageRender")([i.images])}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t._f("imageRender")([i.images,!0])}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1):t._e()]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"上家类型",prop:"platformTypeStr"}}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"上家链接"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.productId?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(i.productId)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e(),a("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(i,2)}}},[t._v(" "+t._s(i.productId)+" ")])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"itemID"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.id?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(i.id)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e(),a("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(i,1)}}},[t._v(" "+t._s(i.id)+" ")])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"价格",prop:"price",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"库存",prop:"stock",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"标题",prop:"name","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"red-span",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.viewDetails(i)}}},[t._v(t._s(i.name))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.status&&"color:"+t.statusColor[i.status]},[t._v(t._s(t.statusObj[i.status]))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"创建时间",prop:"create_time",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.$dayjs(a.create_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"更新时间",prop:"modify_time",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.$dayjs(a.modify_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"销售量",prop:"sold",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"访客量",prop:"view_count",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"粉丝量",prop:"like_count",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"操作状态","show-overflow-tooltip":"",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.color&&"color:"+i.color},[t._v(t._s(t._f("errorMsg")(i.batchStatus)))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"更多操作","show-overflow-tooltip":"",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-dropdown",{staticStyle:{width:"80px","margin-left":"10px"},attrs:{trigger:"click",size:"mini"}},[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",plain:"",type:"primary"}},[t._v(" 操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(e){return t.topExtension(i)}}},[t._v("置顶推广")])]),a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(e){return t.editParent(i)}}},[t._v("修改上家")])])],1)],1)]}}])})],1)],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}})],1),t.categoryVisible?a("el-dialog",{staticClass:"category-dialog",attrs:{modal:!1,title:"类目映射",visible:t.categoryVisible,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.categoryVisible=e}}},[t.categoryVisible?a("categoryMapping",{attrs:{country:t.country,"mall-list":t.selectMallList,"goods-current":{}},on:{categoryChange:t.categoryChange}}):t._e()],1):t._e(),a("el-dialog",{staticClass:"title-dialog",attrs:{title:"批量编辑标题",modal:!1,visible:t.titleVisible,width:"600px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.titleVisible=e}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"编辑类型："}},[a("div",[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("新标题直接填入")])]),a("el-radio",{attrs:{label:1},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新标题")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要新增多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:2},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新增关键词/标题前")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要新增多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:3},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新增关键词/标题后")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要删除多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:4},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("删除关键词")])],1)],1)]),a("el-form-item",{attrs:{label:"新标题/关键字："}},[a("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:t.titleVal,callback:function(e){t.titleVal=e},expression:"titleVal"}})],1)],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editProduct("setTitle")}}},[t._v("保 存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.titleVisible=!1}}},[t._v("关 闭")])],1)],1),a("el-dialog",{staticClass:"get-description-dialog",attrs:{title:"获取描述模板",modal:!1,visible:t.getDescriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.getDescriptionVisible=e}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"描述："}},[a("div",[a("el-radio",{attrs:{label:1},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("新增关键词/描述前")]),a("el-radio",{attrs:{label:2},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("新增关键词/描述后")]),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要删除多个关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:3},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("删除关键词")])],1),a("el-radio",{attrs:{label:4},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("模板")]),a("el-radio",{attrs:{label:5},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("模板+SKU")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.selectDescription(0)}}},[t._v("选择模板")])],1)]),1===t.descriptionRadio||2===t.descriptionRadio||3===t.descriptionRadio?a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:t.descriptionVal,callback:function(e){t.descriptionVal=e},expression:"descriptionVal"}})],1):t._e()],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editProduct("setDescription")}}},[t._v("确 认")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getDescriptionVisible=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{staticClass:"description-dialog",attrs:{title:"描述模板",modal:!1,visible:t.descriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.descriptionVisible=e}}},[a("div",[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[t._v("标签：")]),a("el-select",{attrs:{size:"mini"},model:{value:t.descriptionConfigId,callback:function(e){t.descriptionConfigId=e},expression:"descriptionConfigId"}},t._l(t.descriptionLabelList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.lable,value:t.id}})})),1)],1),a("li",[a("span",[t._v("新增标签：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.descriptionConfig.tag,callback:function(e){t.$set(t.descriptionConfig,"tag",e)},expression:"descriptionConfig.tag"}})],1)]),a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[t._v("描述：")]),a("el-input",{staticStyle:{width:"430px"},attrs:{type:"textarea",rows:6,resize:"none",placeholder:"",size:"mini"},model:{value:t.descriptionConfig.text,callback:function(e){t.$set(t.descriptionConfig,"text",e)},expression:"descriptionConfig.text"}})],1)]),a("div",{staticClass:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.selectDescription(1)}}},[t._v("保存")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.selectDescription(2)}}},[t._v("删除")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.selectDescription(3)}}},[t._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.selectDescription(4)}}},[t._v("取消")])],1)])]),a("el-dialog",{staticClass:"parent-dialog",attrs:{title:"上家产品修改",modal:!1,visible:t.parentVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.parentVisible=e}}},[a("div",[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("上家产品ID设置")]),a("div",{staticClass:"base-item"},[a("div",[a("span",[t._v("上家类型：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.parentType,callback:function(e){t.parentType=e},expression:"parentType"}},t._l(t.parentTypeList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),a("div",[a("span",[t._v("   产品ID：")]),a("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini"},model:{value:t.parentId,callback:function(e){t.parentId=e},expression:"parentId"}}),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.parentLoad1},on:{click:function(e){return t.editpParentSku(1)}}},[t._v("修 改")])],1)])]),a("div",[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("上家产品链接设置")]),a("div",{staticClass:"base-item"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v(" 1688链接模板：https://detail.1688.com/offer/604199841804.html ")]),a("div",[a("span",[t._v("产品链接：")]),a("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini"},model:{value:t.parentUrl,callback:function(e){t.parentUrl=e},expression:"parentUrl"}}),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.parentLoad2},on:{click:function(e){return t.editpParentSku(2)}}},[t._v("修 改")])],1)])])])])]),a("el-dialog",{staticClass:"activity-dialog",attrs:{modal:!1,title:"活动信息",visible:t.activityVisible,width:"505px",top:"30vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.activityVisible=e}}},[a("div",{staticClass:"wrap"},[a("span",[t._v("活动折扣：")]),a("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.discountVal,callback:function(e){t.discountVal=e},expression:"discountVal"}}),t._v("% ")],1),a("div",{staticClass:"wrap tip"},[a("span",[t._v("商品折扣 = 商品原价*折扣%。如原价100元的商品，输入80，最后的折扣价格为80元")])]),a("div",{staticClass:"wrap"},[a("span",[t._v("限购数量：")]),a("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.quotaVal,callback:function(e){t.quotaVal=e},expression:"quotaVal"}})],1),a("div",{staticClass:"wrap but"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.saveActivityMsg}},[t._v("保 存")])],1)]),t.moveSetVisible?a("el-dialog",{staticClass:"moveSet-dialog",attrs:{modal:!1,title:"商品搬迁设置",visible:t.moveSetVisible,width:"590px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.moveSetVisible=e}}},[a("div",{staticClass:"wrap tip"},[a("span",[t._v("店铺商品设有店铺文字水印的谨慎操作")])]),a("div",{staticClass:"wrap"},[a("span",[t._v("搬迁类型：")]),a("el-radio",{staticStyle:{"margin-right":"77.5px"},attrs:{label:"1"},model:{value:t.moveType,callback:function(e){t.moveType=e},expression:"moveType"}},[t._v("同站点搬迁")]),a("el-radio",{attrs:{label:"2"},model:{value:t.moveType,callback:function(e){t.moveType=e},expression:"moveType"}},[t._v("跨站点搬迁")])],1),"1"===t.moveType?a("div",[a("div",{staticClass:"wrap"},[a("span",[t._v("搬迁模式：")]),a("el-radio",{attrs:{label:"1"},model:{value:t.movePattern,callback:function(e){t.movePattern=e},expression:"movePattern"}},[t._v("全部搬迁至所有店铺")]),a("el-radio",{attrs:{label:"2"},model:{value:t.movePattern,callback:function(e){t.movePattern=e},expression:"movePattern"}},[t._v("随机分配店铺搬迁")])],1),a("div",{staticClass:"wrap"},[a("storeChoose",{attrs:{"span-width":"60px","parent-country":t.country,"is-mall":""},on:{changeMallList:t.changeMoveMallList}})],1),a("div",{staticClass:"wrap but"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.moveSetVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.goodsDetermineMove}},[t._v("确 定")])],1)]):a("div",[a("div",{staticClass:"wrap tip"},[a("span",[t._v("跨站点搬迁将商品原链接跳转至采集页面，无上家类型的跳转shopee商品链接")])]),a("div",{staticClass:"wrap but"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.setLink}},[t._v("跳转至采集")])],1)])]):t._e(),t.moveVisible?a("el-dialog",{staticClass:"move-dialog",attrs:{modal:!1,title:"商品搬迁",visible:t.moveVisible,width:"1280px",top:"7vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.moveVisible=e},close:t.handelClose}},[a("ul",[a("li",[a("span",[t._v("上新间隔：")]),a("el-input",{attrs:{disabled:t.goodsMoveBut,size:"mini"},model:{value:t.moveTime,callback:function(e){t.moveTime=e},expression:"moveTime"}}),t._v("秒 ")],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:t.goodsMoveBut,size:"mini"},on:{click:t.batchSetSize}},[t._v("批量调整重量/体积")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.goodsMoveBut},on:{click:t.startGoodsMove}},[t._v("开 始")]),a("el-button",{attrs:{size:"mini",disabled:!t.goodsMoveBut,loading:t.cancelMoveLoad},on:{click:function(e){t.cancelMove=!0,t.cancelMoveLoad=!0}}},[t._v("取 消")])],1),a("li",[a("span",[t._v("商品总数："),a("span",{staticStyle:{color:"#0000ff"}},[t._v(t._s(t.moveTotal))])])]),a("li",[a("span",[t._v("成功总数："),a("span",{staticStyle:{color:"green"}},[t._v(t._s(t.moveSuccess))])])]),a("li",[a("span",[t._v("失败总数："),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.movefail))])])])]),a("el-table",{ref:"moveTable",attrs:{"data-changes-scroll-top":!1,border:!1,data:t.goodsMoveData,height:"550px","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":t.moveSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{align:"center","min-width":"80",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("chineseSite")(a.country))+" ")]}}],null,!1,2790571770)}),a("el-table-column",{attrs:{align:"center","min-width":"120",label:"店铺名",prop:"mallName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"shopee类目",prop:"categoryName","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"red-span",on:{click:function(e){t.categoryVisible=!0,t.editCategory=3,t.moveCategory=i}}},[t._v(t._s(i.categoryName))])]}}],null,!1,2408045582)}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.images?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t._f("imageRender")([i.images])}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t._f("imageRender")([i.images,!0])}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1):t._e()]}}],null,!1,921439261)}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"上家类型",prop:"platformTypeStr"}}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"上家链接"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.productId?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(i.productId)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e(),a("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(i,2)}}},[t._v(" "+t._s(i.productId)+" ")])]}}],null,!1,64974631)}),a("el-table-column",{attrs:{align:"center","min-width":"120",label:"itemID"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.id?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(i.id)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e(),a("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(i,1)}}},[t._v(" "+t._s(i.id)+" ")])]}}],null,!1,988702031)}),a("el-table-column",{attrs:{align:"center","min-width":"80",label:"价格",prop:"price",sortable:""}}),a("el-table-column",{attrs:{align:"center","min-width":"80",label:"库存",prop:"stock",sortable:""}}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"标题",prop:"name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.status&&"color:"+t.statusColor[i.status]},[t._v(t._s(t.statusObj[i.status]))])]}}],null,!1,4189161824)}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"销售量",prop:"sold"}}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getMoveDetails(i)}}},[t._v("查看详情")])]}}],null,!1,3099083642)}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"操作状态","show-overflow-tooltip":"",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.color&&"color:"+i.color},[t._v(t._s(t._f("errorMsg")(i.moveStatus)))])]}}],null,!1,2832947155)})],1)],1):t._e(),a("el-dialog",{attrs:{title:"设置商品重量和体积",width:"300px",top:"25vh","close-on-click-modal":!1,modal:!1,visible:t.goodsSizeVisible},on:{"update:visible":function(e){t.goodsSizeVisible=e}}},[t.goodsSizeVisible?a("goods-size",{on:{goodsSizeChange:t.goodsSizeChange}}):t._e()],1),t.detailsVisible?a("el-dialog",{staticClass:"details-dialog",attrs:{modal:!1,title:"上新状态查看",visible:t.detailsVisible,width:"1280px",top:"7vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.detailsVisible=e}}},[a("el-table",{attrs:{"data-changes-scroll-top":!1,border:!1,data:t.moveDetailsData,height:"590px","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"上家ID","min-width":"100",prop:"productId"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"red-span",on:{click:function(e){return t.openUrl(i,2)}}},[t._v(" "+t._s(i.productId)+" ")])]}}],null,!1,1170900030)}),a("el-table-column",{attrs:{align:"center",label:"shopeeId","min-width":"100",prop:"shopeeId"}}),a("el-table-column",{attrs:{align:"center",label:"店铺名称","min-width":"150",prop:"mallName"}}),a("el-table-column",{attrs:{align:"center",label:"上新后标题","min-width":"200",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"name",staticStyle:{height:"60px","text-align":"left"}},[t._v(" "+t._s(i.name)+" ")])]}}],null,!1,3467410001)}),a("el-table-column",{attrs:{align:"center",label:"上新状态","min-width":"150",prop:"status","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.color&&"color:"+i.color},[t._v(t._s(t._f("errorMsg")(i.status)))])]}}],null,!1,1092467426)}),a("el-table-column",{attrs:{align:"center",label:"上新后价格","min-width":"100",prop:"price"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.price?parseInt(a.price).toFixed(2):"")+" ")]}}],null,!1,3513771721)}),a("el-table-column",{attrs:{align:"center",label:"来源","min-width":"100",prop:"source"}})],1)],1):t._e()],1)},r=[],n=a("2909"),s=a("53ca"),o=a("b85c"),c=a("1da1"),l=(a("96cf"),a("4de4"),a("a4d3"),a("e01a"),a("ac1f"),a("1276"),a("a15b"),a("99af"),a("159b"),a("a9e3"),a("caad"),a("2532"),a("c740"),a("3ca3"),a("ddb0"),a("b0c0"),a("fb6a"),a("498a"),a("d81d"),a("d3b7"),a("25f0"),a("b680"),a("466d"),a("5b81"),a("6062"),a("5319"),a("0b64")),u=a("feb6"),d=a("0e0b"),p=a("eb09"),m=a("c12c"),h={components:{StoreChoose:u["a"],categoryMapping:p["a"],goodsSize:m["a"]},data:function(){return{index:1,isFold:!0,showConsole:!0,parentVisible:!1,activityVisible:!1,categoryVisible:!1,titleVisible:!1,sourceVisible:!1,getDescriptionVisible:!1,operationBut:!1,flag:!1,cursor:null,upDown:!0,GoodsList:new l["a"](this),editCategory:null,categoryList:{},categoryNameArr:{},categoryIdList:[],testStr:"",categoryName:"",productNumChecked:!1,productNum:50,freightRadio:2,titleRadio:1,titleVal:"",descriptionRadio:4,descriptionVal:"",descriptionConfig:{description:"",text:"",lable:"",tag:""},descriptionConfigId:"",descriptionConfigText:"",descriptionLabelList:[],descriptionVisible:!1,queryType:"",percentage:0,selectMallList:"",country:"",tableData:[],deleteData:[],deleteId:[],multipleSelection:[],pageSize:48,sellStatus:0,goodsStatus:0,goodsStatusName:"",goodsStatusVal:"",searchType:"id",keyword:"",source:0,queryNum:0,updateNum:0,successNum:0,failNum:0,createTime:[],modifyTime:[],goodsMin:0,goodsMax:99999999,soldMin:0,soldMax:99999999,priceMin:0,priceMax:99999999,viewMin:0,viewMax:99999999,likeMin:0,likeMax:99999999,platformData:{},logistics:0,isCustomShipFee:!1,logisticsFeeList:[],logisticsList:[],productStock:10,productPrice1:-1,productPrice2:0,productWeight:1,productLength:"",productWidth:"",productHeight:"",minDays:0,maxDays:0,productDay:15,preOrderDeliveryDays:2,minLength:0,maxLength:0,parentType:1,parentId:"",parentUrl:"",goodsValue:"",parentLoad1:!1,parentLoad2:!1,discountVal:null,quotaVal:null,discountId:"",isRefurbishProduct:!1,isUseProductChannel:!0,moveVisible:!1,moveSetVisible:!1,moveType:"1",movePattern:"1",selectMoveMallList:"",goodsMoveData:[],moveCategory:{},moveTime:40,moveTotal:0,moveSuccess:0,movefail:0,moveSelection:[],goodsSizeVisible:!1,goodsSize:"",goodsMoveBut:!1,moveDetails:[],moveDetailsData:[],detailsVisible:!1,cancelMove:!1,cancelMoveLoad:!1,isMove:!1,sellStatusList:[{value:1,label:"售空"},{value:2,label:"非售空"}],goodsStatusList:[{value:1,label:"正常"},{value:6,label:"审核中"},{value:3,label:"禁卖下架"},{value:11,label:"已售完"},{value:8,label:"待上架"},{value:4,label:"禁卖shopee官方删除"},{value:100,label:"已压制"}],statusObj:{1:"正常",2:"审核中",6:"审核中",3:"禁卖下架",11:"已售完",8:"待上架",4:"禁卖shopee官方删除",100:"已压制"},statusFilter:{1:"live",8:"unlisted",2:"banned",3:"banned",11:"sold_out",100:"deboosted",4:"deleted"},statusColor:{8:"red"},operationObj:{setTitle:"标题",setDescription:"描述",setStock:"库存",setPrice:"价格",setDay:"发货天数",setWeight:"重量",setSize:"尺寸",setFreight:"运费",setLogistics:"物流方式",setCategory:"类目属性"},parentTypeObj:{1:"拼多多",2:"淘宝",8:"1688",9:"lazada"},searchTypeList:[{value:"name",label:"商品名称"},{value:"sku",label:"主商品货号"},{value:"msku",label:"商品规格货号"},{value:"id",label:"商品编号"},{value:"originId",label:"上家商品ID"}],sourceList:[{value:"拼多多",label:"拼多多"},{value:"淘宝",label:"淘宝"},{value:"天猫",label:"天猫"},{value:"自有产品",label:"自有产品"},{value:"皮皮虾供货平台",label:"皮皮虾供货平台"},{value:"货老板",label:"货老板"},{value:"1688",label:"1688"},{value:"Lazada",label:"Lazada"},{value:"京喜",label:"京喜"},{value:"Shopee",label:"Shopee"},{value:"速卖通",label:"速卖通"},{value:"天猫淘宝海外平台",label:"天猫淘宝海外平台"}],countryArr:["SG","GL","PH","VN","TW","MY","ID","TH","MX","CO","CL","PL","FR","ES"],parentTypeList:[{value:1,label:"拼多多"},{value:2,label:"淘宝天猫"},{value:8,label:"1688"},{value:9,label:"lazada"}]}},computed:{getCategoryName:function(){return function(t,e){if(!this.categoryNameArr[t]){var a="正在获取类目...";return this.setCategoryName(t,e),a||""}var i=this.categoryNameArr[t];return i||""}}},watch:{country:function(t){this.getLogistics(),this.getDayLength("")},descriptionConfigId:function(t){var e=this.descriptionLabelList.filter((function(e){return e&&e.id===t}))[0];this.descriptionConfig.text=e&&e.description||"",this.descriptionConfig.description=e&&e.description||"",this.descriptionConfig.lable=e&&e.lable||""}},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.createTime=[(new Date).getTime()-1296e7,new Date],e.next=3,t.selectAll("goodsStatus",t.goodsStatusList);case 3:return e.next=5,t.selectAll("source",t.sourceList);case 5:case"end":return e.stop()}}),e)})))()},methods:{setCategoryName:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,c,l,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=[],n=t.split(","),s=Object(o["a"])(n),i.prev=3,s.s();case 5:if((c=s.n()).done){i.next=17;break}if(l=c.value,!a.categoryIdList[l]){i.next=11;break}"类目获取失败"===a.categoryIdList[l]?r=["类目获取失败"]:r.push(a.categoryIdList[l].categories?"".concat(a.categoryIdList[l].categories[0].category_name,"(").concat(a.categoryIdList[l].categories[0].category_cn_name,")"):""),i.next=15;break;case 11:return i.next=13,a.GoodsList.getCategoryName(e,l,"0","");case 13:u=i.sent,200===u.code?(a.categoryIdList[l]=u.data,r.push(u.data.categories?"".concat(u.data.categories[0].category_name,"(").concat(u.data.categories[0].category_cn_name,")"):"")):a.categoryIdList[l]="类目获取失败";case 15:i.next=5;break;case 17:i.next=22;break;case 19:i.prev=19,i.t0=i["catch"](3),s.e(i.t0);case 22:return i.prev=22,s.f(),i.finish(22);case 25:a.categoryNameArr[t]=r.join("->");case 26:case"end":return i.stop()}}),i,null,[[3,19,22,25]])})))()},setLink:function(){var t=[];this.multipleSelection.forEach((function(e){t.push(e.url)})),localStorage.setItem("linkKey",t),this.moveSetVisible=!1,this.$message.success("链接保存成功，请前往商品链接采集页面")},getMoveDetails:function(t){this.detailsVisible=!0,this.moveDetails.length>0&&(this.moveDetailsData=this.moveDetails.filter((function(e){return e.productId===t.productId})))},startGoodsMove:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(t.moveTime)<40)){e.next=2;break}return e.abrupt("return",t.$message("上新间隔时间不得小于40秒"));case 2:return t.goodsMoveBut=!0,t.isRefurbishProduct=!0,t.isMove=!0,t.cancelMove=!1,t.moveDetails=[],t.selectMoveMallList.forEach((function(t){t["isCreateNum"]=0,t["createNum"]=0})),t.moveSuccess=0,t.movefail=0,e.next=12,Object(d["c"])(t.goodsMoveData,t.goodsMoveOperation);case 12:t.goodsMoveBut=!1,t.isRefurbishProduct=!1,t.cancelMoveLoad=!1,t.isMove=!1;case 16:case"end":return e.stop()}}),e)})))()},goodsMoveOperation:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,p,m,h,g,b,f,v,_,y;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.cancelMove){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.moveStatus(t,"".concat(a.cancelMove?"取消搬迁":"正在获取商品详情..."),!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=52;break}if(n=s.data,a.goodsSize&&(n["weight"]=a.goodsSize["weight"],n["dimension"]["width"]=Number(a.goodsSize["width"]),n["dimension"]["height"]=Number(a.goodsSize["height"]),n["dimension"]["length"]=Number(a.goodsSize["long"])),null===t||void 0===t||!t.isCategoryName){i.next=38;break}o=[],a.categoryList.categoryList.forEach((function(t){o.push(t.category_id)})),c=[],l=0;case 18:if(!(l<a.categoryList.attributesList.length)){i.next=36;break}if(u=a.categoryList.attributesList[l],!a.countryArr.includes(t.country)){i.next=30;break}if(!(u.attribute_id<1)){i.next=24;break}return n["brand_id"]=u.options,i.abrupt("continue",33);case 24:p={},p["attribute_id"]=u.attribute_id,p["attribute_value_id"]=u.options,c.push(p),i.next=33;break;case 30:m={custom_value:{}},m["custom_value "]["raw_value "]=u.selected_attribute_value_name,c.push(m);case 33:l++,i.next=18;break;case 36:n["attributes"]=c,n["category_path"]=o;case 38:h=[],"2"===a.movePattern?(g=a.selectMoveMallList.length,b=a.goodsMoveData.findIndex((function(e){return e.id===t.id})),f=b%g,h=[a.selectMoveMallList[f]]):h=a.selectMoveMallList,v=regeneratorRuntime.mark((function e(i){var r,s,o,c,l,u,p,m,g,b,f,v,_,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=h[i],e.prev=1,!a.cancelMove){e.next=4;break}return e.abrupt("return","break");case 4:if(s={},o=r.mall_alias_name||r.platform_mall_name,a.moveStatus(t,"开始上新到".concat(o),!0),r.platform_mall_id!==t.platform_mall_id){e.next=15;break}a.moveStatus(t,"同店铺商品无需再次上新",!1),r["status"]="同店铺商品无需再次上新",r["color"]="red",a.movefail++,++r["isCreateNum"],e.next=78;break;case 15:return e.prev=15,c={},c["product_id"]=n.id,c["mallId"]=r.platform_mall_id,e.next=21,a.$shopeemanService.getLogistics(r.country,c);case 21:if(l=e.sent,200!==l.code){e.next=26;break}return e.next=25,a.getLogisticsInfo(l.data.list,!1,r);case 25:n["logistics_channels"]=e.sent;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](15),++r["isCreateNum"],a.moveStatus(t,"商品信息物流异常".concat(e.t0),!1);case 32:return u="天猫淘宝海外平台"===t.platformTypeStr?t.id:"",e.next=35,a.$BaseUtilService.buildGoodCode(t.platform,t.id,t.country,r.platform_mall_id,u);case 35:return n["parent_sku"]=e.sent,p=a.$filters.special_characters,m=p[Math.floor(Math.random()*p.length)],n["name"]=m+" "+n.name,a.getTitleLength(t),n["name"]=n.name.trim().slice(0,a.maxLength),e.next=43,Object(d["s"])(r,n.images,a);case 43:if(g=e.sent,n["images"]=n.images.map((function(t){return t=g[t],t})),b={mallId:r.platform_mall_id},!r.isCreate){e.next=49;break}return e.next=49,Object(d["w"])(1e3*Number(a.moveTime));case 49:return f=r["createNum"]++,e.next=52,Object(d["y"])((function(){return f===r["isCreateNum"]}),36e5);case 52:return e.next=54,a.$shopeemanService.createProduct(r.country,b,[n]);case 54:if(v=e.sent,200!==v.code){e.next=73;break}return setTimeout((function(){++r["isCreateNum"]}),1e3*Number(a.moveTime)),a.moveStatus(t,"店铺【".concat(o,"】发布成功"),!0),r["status"]="发布成功",r["color"]="green",a.moveSuccess++,_={},_["product_id"]=v.data.product_id,_["shop_id"]=r.platform_mall_id,_["version"]="3.2.0",e.next=67,a.$shopeemanService.searchProductDetail(r.country,_);case 67:y=e.sent,s["name"]=y.data.name,s["shopeeId"]=v.data.product_id,s["price"]=y.data.price,e.next=78;break;case 73:++r["isCreateNum"],a.moveStatus(t,"店铺【".concat(o,"】").concat(v.data),!1),r["status"]="".concat(v.data),r["color"]="red",a.movefail++;case 78:s["productId"]=t.productId,s["mallName"]=o,s["status"]=r.status,s["color"]=r.color,s["source"]=t.platformTypeStr,s["url"]=t.url,a.moveDetails.push(s),e.next=90;break;case 87:e.prev=87,e.t1=e["catch"](1),++r["isCreateNum"];case 90:case"end":return e.stop()}}),e,null,[[1,87],[15,28]])})),_=0;case 42:if(!(_<h.length)){i.next=50;break}return i.delegateYield(v(_),"t0",44);case 44:if(y=i.t0,"break"!==y){i.next=47;break}return i.abrupt("break",50);case 47:_++,i.next=42;break;case 50:i.next=54;break;case 52:a.movefail++,a.moveStatus(t,"".concat(s.data),!1);case 54:i.next=60;break;case 56:i.prev=56,i.t1=i["catch"](4),a.movefail++,a.moveStatus(t,"商品搬迁异常".concat(i.t1),!1);case 60:return i.prev=60,--r.count,i.finish(60);case 63:case"end":return i.stop()}}),i,null,[[4,56,60,63]])})))()},goodsDetermineMove:function(){var t=this;if(!this.selectMoveMallList.length)return this.$message("至少选择一个店铺");this.moveVisible=!0,this.goodsMoveData=JSON.parse(JSON.stringify(this.multipleSelection)),this.moveTotal="2"===this.movePattern?this.goodsMoveData.length:this.goodsMoveData.length*this.selectMoveMallList.length,this.$nextTick((function(){t.goodsMoveData.forEach((function(e){t.$refs.moveTable.toggleRowSelection(e)}))}))},batchSetSize:function(){if(!this.moveSelection.length)return this.$message("请选择数据后操作");this.goodsSizeVisible=!0},goodsSizeChange:function(t){t&&(this.goodsSize=t),this.goodsSizeVisible=!1},goodsMove:function(){this.moveSetVisible=!0,this.moveType="1",this.movePattern="1"},saveActivityMsg:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.discountVal&&!(Number(t.discountVal)>100)){e.next=2;break}return e.abrupt("return",t.$message("请输 0 - 100 之间的值"));case 2:if(t.quotaVal){e.next=4;break}return e.abrupt("return",t.$message("请输入限购数量"));case 4:return t.initData(),t.activityVisible=!1,t.isRefurbishProduct=!0,t.isMove=!1,t.updateNum=t.multipleSelection.length,t.deleteId=[],e.next=12,Object(d["c"])(t.multipleSelection,t.startRefurbishment);case 12:return e.next=14,t.deleteCollectGoodsInfo();case 14:t.operationBut=!1,t.isRefurbishProduct=!1;case 16:case"end":return e.stop()}}),e)})))()},startRefurbishment:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=39;break}return n=s.data,i.next=14,a.deleteProduct(t);case 14:if(o=i.sent,c=o.batchStatus,l=o.code,-2!==l){i.next=20;break}return a.failNum++,i.abrupt("return",a.batchStatus(t,"".concat(c),!1));case 20:return a.batchStatus(t,"".concat(c),!0),u={mallId:t.platform_mall_id},a.getTitleLength(t),n["name"]=n.name.trim().slice(0,a.maxLength),i.next=26,a.$shopeemanService.createProduct(t.country,u,[n]);case 26:if(p=i.sent,200!==p.code){i.next=35;break}if(a.batchStatus(t,"发布成功",!0),a.successNum++,!t.campaignTypeList.Name.includes(1)){i.next=33;break}return i.next=33,a.putModelActive(t,p.data.product_id);case 33:i.next=37;break;case 35:a.batchStatus(t,"发布失败:".concat(p.data),!1),a.failNum++;case 37:i.next=41;break;case 39:a.batchStatus(t,s.data,!1),a.failNum++;case 41:i.next=47;break;case 43:i.prev=43,i.t0=i["catch"](4),a.failNum++,a.batchStatus(t,"翻新异常".concat(i.t0),!1);case 47:return i.prev=47,--r.count,m=100/a.multipleSelection.length,a.percentage+=m,i.finish(47);case 52:case"end":return i.stop()}}),i,null,[[4,43,47,52]])})))()},putModelActive:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,r={},r["product_id"]=e,r["version"]="3.2.0",r["shop_id"]=t.platform_mall_id,i.next=7,a.$shopeemanService.searchProductDetail(t.country,r);case 7:if(n=i.sent,200!==n.code){i.next=18;break}return s=[],n.data.model_list.forEach((function(t){var e={is_stock_insufficient:!1,itemid:n.data.id,modelid:t.id,promotion_price:(Number(t.price)*(Number(a.discountVal)/100)).toFixed(2).toString(),status:1,user_item_limit:0,promotion_stock:Number(a.quotaVal)};s.push(e)})),o={discount_id:a.discountId,discount_model_list:s,mallId:t.platform_mall_id},i.next=14,a.GoodsList.putModelActive(t.country,o);case 14:c=i.sent,200===c.code?a.$refs.Logs.writeLog("商品itemId【".concat(t.id,"】创建折扣活动成功"),!0):a.$refs.Logs.writeLog("商品itemId【".concat(t.id,"】创建折扣活动失败").concat(c.data),!1),i.next=19;break;case 18:a.$refs.Logs.writeLog("商品itemId【".concat(t.id,"】获取详情失败：").concat(n.data),!0);case 19:i.next=23;break;case 21:i.prev=21,i.t0=i["catch"](0);case 23:case"end":return i.stop()}}),i,null,[[0,21]])})))()},refurbishment:function(){var t=this;this.$confirm("商品一键翻新操作有风险，请谨慎使用！（如商品删除成功，上新失败，商品将不会复原）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.activityVisible=!0;case 1:case"end":return e.stop()}}),e)}))))},syncOriginGoodsNum:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.initData(),t.updateNum=t.multipleSelection.length,e.next=5,Object(d["c"])(t.multipleSelection,t.syncOriginGoods);case 5:t.operationBut=!1;case 6:case"end":return e.stop()}}),e)})))()},syncOriginGoods:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.prev=1,!a.flag){i.next=5;break}return Object(d["x"])(),i.abrupt("return");case 5:return a.batchStatus(t,"开始同步上家库存...",!0),i.next=8,Object(d["g"])(t.productId,t.platform,t.platform_mall_id,t.id,t.country,"",a.$refs.Logs.writeLog,t.oriShopId,t.oriSite,a,t);case 8:i.next=12;break;case 10:i.prev=10,i.t0=i["catch"](1);case 12:return i.prev=12,--r.count,n=100/a.multipleSelection.length,a.percentage+=n,i.finish(12);case 17:case"end":return i.stop()}}),i,null,[[1,10,12,17]])})))()},editpParentSku:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i="",r="",a.prev=2,1!==t){a.next=11;break}if(e.parentId.trim()){a.next=6;break}return a.abrupt("return",e.$message("产品ID不能为空"));case 6:i=e.parentId,r=e.parentType,e.parentLoad1=!0,a.next=33;break;case 11:if(e.parentUrl.trim()){a.next=13;break}return a.abrupt("return",e.$message("产品链接不能为空"));case 13:if(n=/(yangkeduo.com)|(item.taobao.com)|(detail.1688.com)|(www.lazada)/g,s=e.parentUrl.match(n),s){a.next=17;break}return a.abrupt("return",e.$message("链接:".concat(e.parentUrl," 识别支持平台失败"),!1));case 17:a.t0=s[0],a.next="yangkeduo.com"===a.t0?20:"item.taobao.com"===a.t0?23:"detail.1688.com"===a.t0?26:"www.lazada"===a.t0?29:32;break;case 20:return i=e.parentUrl.match(/goods_id=(\d+)/)[1],r=1,a.abrupt("break",32);case 23:return i=e.parentUrl.match(/id=(\d+)/)[1],r=2,a.abrupt("break",32);case 26:return i=e.parentUrl.match(/(\d+)\.html/)[1],r=8,a.abrupt("break",32);case 29:return i=e.parentUrl.match(/(\d+)\.html/)[1],r=9,a.abrupt("break",32);case 32:e.parentLoad2=!0;case 33:return o="天猫淘宝海外平台"===e.goodsValue.platformTypeStr?e.goodsValue.id:"",a.next=36,e.$BaseUtilService.buildGoodCode(r,i,e.goodsValue.country,e.goodsValue.platform_mall_id,o);case 36:return c=a.sent,l={},a.next=40,e.getProductDetail(e.goodsValue);case 40:if(u=a.sent,200!==u.code){a.next=68;break}return l=u.data,l["parent_sku"]=c,d={mallId:e.goodsValue.platform_mall_id},a.next=47,e.$shopeemanService.handleProductEdit(e.goodsValue.country,d,[l]);case 47:if(p=a.sent,200!==p.code){a.next=65;break}e.batchStatus(e.goodsValue,"修改成功",!0),e.goodsValue.platformTypeStr=e.parentTypeObj[r],e.goodsValue.productId=i,a.t1=r,a.next=1===a.t1?55:2===a.t1?57:8===a.t1?59:9===a.t1?61:63;break;case 55:return e.goodsValue.url="http://mobile.yangkeduo.com/goods.html?goods_id=".concat(i),a.abrupt("break",63);case 57:return e.goodsValue.url="https://item.taobao.com/item.htm?id=".concat(i),a.abrupt("break",63);case 59:return e.goodsValue.url="https://detail.1688.com/offer/".concat(i,".html"),a.abrupt("break",63);case 61:return e.goodsValue.url="".concat(e.$filters.lazadaGoodsUrl(e.goodsValue.country),"/").concat(i,".html"),a.abrupt("break",63);case 63:a.next=66;break;case 65:e.batchStatus(e.goodsValue,"修改失败：".concat(p.data),!1);case 66:a.next=69;break;case 68:e.$message.error("".concat(u.data));case 69:a.next=75;break;case 71:a.prev=71,a.t2=a["catch"](2),e.batchStatus(e.goodsValue,"修改上家异常：".concat(a.t2),!1),e.parentVisible=!1;case 75:e.parentVisible=!1,e.parentLoad1=!1,e.parentLoad2=!1;case 78:case"end":return a.stop()}}),a,null,[[2,71]])})))()},editParent:function(t){this.parentVisible=!0,this.goodsValue=t,this.parentType=1,this.parentId="",this.parentUrl=""},topExtension:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={id:Number(t.id),shop_id:t.platform_mall_id},a.next=3,e.$shopeemanService.handleGoodsTop(t.country,i);case 3:r=a.sent,200===r.code?e.batchStatus(t,"商品置顶成功！",!0):e.batchStatus(t,"".concat(r.data),!1);case 5:case"end":return a.stop()}}),a)})))()},categoryChange:function(t){if(t)if(this.categoryList=t,1===this.editCategory){var e=[];this.categoryList.categoryList.forEach((function(t){e.push("".concat(t.category_name,"(").concat(t.category_cn_name,")"))})),this.categoryName=e.join("->")}else if(2===this.editCategory)this.editProduct("setCategory");else{var a=this.categoryList.categoryList.length-1,i=this.categoryList.categoryList[a].category_name,r=this.categoryList.categoryList[a].category_cn_name;this.moveCategory.categoryName="".concat(i,"(").concat(r,")"),this.moveCategory.isCategoryName=!0}else this.categoryName="";this.categoryVisible=!1},batchCategory:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.categoryVisible=!0,t.editCategory=2;case 2:case"end":return e.stop()}}),e)})))()},batchConfirm:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.updateNum=t.multipleSelection.length,e.next=4,Object(d["c"])(t.multipleSelection,t.confirmProduct);case 4:t.operationBut=!1;case 5:case"end":return e.stop()}}),e)})))()},confirmProduct:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:if(i.prev=4,4===t.status){i.next=10;break}a.failNum++,a.batchStatus(t,"该商品不属于禁卖shopee官方删除",!1),i.next=14;break;case 10:return i.next=12,a.GoodsList.dismissInvalidProducts(t);case 12:n=i.sent,200===n.code?(a.successNum++,a.batchStatus(t,"确认禁卖成功",!0),a.successNum++):(a.failNum++,a.batchStatus(t,"确认禁卖失败",!1));case 14:i.next=20;break;case 16:i.prev=16,i.t0=i["catch"](4),a.failNum++,a.batchStatus(t,"确认禁卖异常",!1);case 20:return i.prev=20,--r.count,s=100/a.multipleSelection.length,a.percentage+=s,i.finish(20);case 25:case"end":return i.stop()}}),i,null,[[4,16,20,25]])})))()},batchLogistics:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(a=t.logistics)&&void 0!==a&&a.length){e.next=2;break}return e.abrupt("return",t.$message("至少选择一种物流方式"));case 2:if(i=!1,t.isCustomShipFee&&(i=t.logistics.some((function(e){return t.logisticsList.some((function(t){return t.ShipId===e&&t.IsCustomShipFee&&""===t.CustomShipFee}))}))),!i){e.next=6;break}return e.abrupt("return",t.$message("请输入运费"));case 6:t.editProduct("setLogistics");case 7:case"end":return e.stop()}}),e)})))()},batchFreight:function(){this.editProduct("setFreight")},batchSize:function(){if(!this.productLength||Number(this.productLength)<=0||!this.productWidth||Number(this.productWidth)<=0||!this.productHeight||Number(this.productHeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setSize")},batchWeight:function(){if(!this.productWeight||Number(this.productWeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setWeight")},batchDay:function(){return this.productDay?Number(this.productDay)>30?this.$message("最长不超过30天"):void this.editProduct("setDay"):this.$message("请填写预售天数")},batchPrice:function(){return this.productPrice1?this.productPrice2||0===Number(this.productPrice2)?void this.editProduct("setPrice"):this.$message("数值不能为空"):this.$message("价格百分比不能为空")},batchStock:function(){if(!this.productStock||Number(this.productStock)<0||Number(this.productStock)>1e7)return this.$message("仓库必须在 0 到 10000000 之间");this.editProduct("setStock")},batchTitle:function(){this.titleVisible=!0,this.titleRadio=1,this.titleVal=""},batchDescription:function(){this.getDescriptionVisible=!0,this.descriptionRadio=4,this.descriptionVal=""},editProduct:function(t){var e=this;if("setTitle"===t){if(1===this.titleRadio&&!this.titleVal)return this.$message("新标题不能为空");if((2===this.titleRadio||3===this.titleRadio||4===this.titleRadio)&&!this.titleVal)return this.$message("关键词不能为空")}if("setDescription"===t){if((1===this.descriptionRadio||2===this.descriptionRadio||3===this.descriptionRadio)&&!this.descriptionVal)return this.$message("关键词不能为空");if((4===this.descriptionRadio||5===this.descriptionRadio)&&!this.descriptionConfig.description)return this.$message("请选择模板")}this.isUseProductChannel="setLogistics"!==t,this.$confirm("确定更新商品吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.initData(),e.titleVisible=!1,e.getDescriptionVisible=!1,e.multipleSelection.forEach((function(e){e.edit=t})),e.updateNum=e.multipleSelection.length,a.next=7,Object(d["c"])(e.multipleSelection,e[t]);case 7:e.operationBut=!1;case 8:case"end":return a.stop()}}),a)}))))},getProductDetail:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={},r={},r["product_id"]=t.id,r["version"]="3.2.0",r["shop_id"]=t.platform_mall_id,a.next=7,e.$shopeemanService.searchProductDetail(t.country,r);case 7:if(n=a.sent,200!==n.code||!n.data){a.next=19;break}if(Number(n.data.id)!==Number(t.id)){a.next=16;break}return i=JSON.parse(JSON.stringify(n.data)),a.next=13,e.getProductInfo(i,t);case 13:return a.abrupt("return",{code:200,data:i});case 16:return a.abrupt("return",{code:201,data:"获取到的产品id不一致"});case 17:a.next=20;break;case 19:return a.abrupt("return",{code:0,data:"获取商品详情失败"});case 20:case"end":return a.stop()}}),a)})))()},handleProductEdit:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.batchStatus(e,"正在更新".concat(a.operationObj[e.edit],"..."),!0),r={mallId:e.platform_mall_id},i.next=4,a.$shopeemanService.handleProductEdit(e.country,r,[t]);case 4:n=i.sent,200===n.code?(a.successNum++,"setStock"===e.edit&&(s=0,e.model_list.forEach((function(t){s+=Number(a.productStock)})),e.stock=s),"setPrice"===e.edit&&(o=[],e.model_list.forEach((function(t){o.push(Math.ceil(Number(t.price_info.normal_price)+Number(t.price_info.normal_price)*(Number(a.productPrice1)/100)+Number(a.productPrice2)))})),e.price=Math.min.apply(null,o)),"setTitle"===e.edit&&(e.name=t.name),a.batchStatus(e,"更新".concat(a.operationObj[e.edit],"成功"),!0)):(a.failNum++,a.batchStatus(e,"更新".concat(a.operationObj[e.edit],"失败").concat(n.data),!1));case 6:case"end":return i.stop()}}),i)})))()},setCategory:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,p,m,h;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=40;break}n=s.data,o=[],a.categoryList.categoryList.forEach((function(t){o.push(t.category_id)})),c=[],l=0;case 16:if(!(l<a.categoryList.attributesList.length)){i.next=34;break}if(u=a.categoryList.attributesList[l],!a.countryArr.includes(t.country)){i.next=28;break}if(!(u.attribute_id<1)){i.next=22;break}return n["brand_id"]=u.options,i.abrupt("continue",31);case 22:p={},p["attribute_id"]=u.attribute_id,p["attribute_value_id"]=u.options,c.push(p),i.next=31;break;case 28:m={custom_value:{}},m["custom_value "]["raw_value "]=u.selected_attribute_value_name,c.push(m);case 31:l++,i.next=16;break;case 34:return n["attributes"]=c,n["category_path"]=o,i.next=38,a.handleProductEdit(n,t);case 38:i.next=42;break;case 40:a.batchStatus(t,s.data,!1),a.failNum++;case 42:i.next=48;break;case 44:i.prev=44,i.t0=i["catch"](4),a.batchStatus(t,"更新类目异常",!1),a.failNum++;case 48:return i.prev=48,h=100/a.multipleSelection.length,a.percentage+=h,--r.count,i.finish(48);case 53:case"end":return i.stop()}}),i,null,[[4,44,48,53]])})))()},setLogistics:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,c,l,u,p,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(o=i.sent,200!==o.code){i.next=28;break}n=o.data,c=[],l=function(e){var i=n.logistics_channels[e];if(a.logistics.includes(i.channelid.toString())&&0===i.parent_channel_id){if(!1===i.enabled){var r=[];a.logistics.forEach((function(t){a.logisticsList.forEach((function(e){t===e.ShipId&&t===i.channelid.toString()&&r.push(e)}))}));var s=(null===r||void 0===r?void 0:r.length)>0?r[0].ShipName:i.channelid.toString();return a.batchStatus(t,"物流方式：".concat(s,"未开启"),!1),{v:void 0}}c.push(i.channelid.toString())}},u=0;case 15:if(!(u<n.logistics_channels.length)){i.next=22;break}if(p=l(u),"object"!==Object(s["a"])(p)){i.next=19;break}return i.abrupt("return",p.v);case 19:u++,i.next=15;break;case 22:for(m=function(t){var e=n.logistics_channels[t],i=[];a.logistics.forEach((function(t){a.logisticsList.forEach((function(a){t===a.ShipId&&t===e.channelid.toString()&&i.push(a)}))})),c.includes(e.channelid.toString())?e.enabled=!0:e.enabled=!1,(null===i||void 0===i?void 0:i.length)>0&&""!==i[0].CustomShipFee&&(e.price=i[0].CustomShipFee)},h=0;h<n.logistics_channels.length;h++)m(h);return i.next=26,a.handleProductEdit(n,t);case 26:i.next=30;break;case 28:a.batchStatus(t,o.data,!1),a.failNum++;case 30:i.next=36;break;case 32:i.prev=32,i.t0=i["catch"](5),a.batchStatus(t,"更新物流方式异常",!1),a.failNum++;case 36:return i.prev=36,g=100/a.multipleSelection.length,a.percentage+=g,--r.count,i.finish(36);case 41:case"end":return i.stop()}}),i,null,[[5,32,36,41]])})))()},setFreight:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=17;break}for(n=s.data,o=0;o<n.logistics_channels.length;o++)c=n.logistics_channels[o],c.enabled&&(c.cover_shipping_fee=1===a.freightRadio);return i.next=15,a.handleProductEdit(n,t);case 15:i.next=19;break;case 17:a.batchStatus(t,s.data,!1),a.failNum++;case 19:i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](5),a.batchStatus(t,"更新运费异常",!1),a.failNum++;case 25:return i.prev=25,l=100/a.multipleSelection.length,a.percentage+=l,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[5,21,25,30]])})))()},setSize:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=19;break}return n=s.data,n["dimension"]["width"]=Number(a.productWidth),n["dimension"]["length"]=Number(a.productLength),n["dimension"]["height"]=Number(a.productHeight),i.next=17,a.handleProductEdit(n,t);case 17:i.next=21;break;case 19:a.batchStatus(t,s.data,!1),a.failNum++;case 21:i.next=27;break;case 23:i.prev=23,i.t0=i["catch"](5),a.batchStatus(t,"更新尺寸异常",!1),a.failNum++;case 27:return i.prev=27,o=100/a.multipleSelection.length,a.percentage+=o,--r.count,i.finish(27);case 32:case"end":return i.stop()}}),i,null,[[5,23,27,32]])})))()},setWeight:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=17;break}return n=s.data,n["weight"]=a.productWeight+"",i.next=15,a.handleProductEdit(n,t);case 15:i.next=19;break;case 17:a.batchStatus(t,s.data,!1),a.failNum++;case 19:i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](5),a.batchStatus(t,"更新重量异常",!1),a.failNum++;case 25:return i.prev=25,o=100/a.multipleSelection.length,a.percentage+=o,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[5,21,25,30]])})))()},setDay:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=23;break}if(n=s.data,a.getDayLength(t),!(Number(a.productDay)>Number(a.maxDays)||Number(a.productDay)<Number(a.preOrderDeliveryDays))){i.next=17;break}a.batchStatus(t,"出货天数需设置在 "+a.preOrderDeliveryDays+" 到 "+a.maxDays+" 天",!1),i.next=21;break;case 17:return n["pre_order"]=!(Number(a.productDay)<a.minDays),n["days_to_ship"]=n.pre_order?Number(a.productDay):a.preOrderDeliveryDays,i.next=21,a.handleProductEdit(n,t);case 21:i.next=25;break;case 23:a.batchStatus(t,s.data,!1),a.failNum++;case 25:i.next=31;break;case 27:i.prev=27,i.t0=i["catch"](5),a.batchStatus(t,"更新天数异常",!1),a.failNum++;case 31:return i.prev=31,o=100/a.multipleSelection.length,a.percentage+=o,--r.count,i.finish(31);case 36:case"end":return i.stop()}}),i,null,[[5,27,31,36]])})))()},setPrice:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=18;break}for(n=s.data,"ID"===t.country&&a.checkCountryPriceForID(n,t),o=0;o<n.model_list.length;o++)c=n.model_list[o],c.price=Math.ceil(Number(c.price)+Number(c.price)*(Number(a.productPrice1)/100)+Number(a.productPrice2))+"";return i.next=16,a.handleProductEdit(n,t);case 16:i.next=20;break;case 18:a.batchStatus(t,s.data,!1),a.failNum++;case 20:i.next=26;break;case 22:i.prev=22,i.t0=i["catch"](5),a.batchStatus(t,"更新价格异常",!1),a.failNum++;case 26:return i.prev=26,l=100/a.multipleSelection.length,a.percentage+=l,--r.count,i.finish(26);case 31:case"end":return i.stop()}}),i,null,[[5,22,26,31]])})))()},setStock:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=17;break}for(n=s.data,o=0;o<n.model_list.length;o++)c=n.model_list[o],c.stock=Number(a.productStock);return i.next=15,a.handleProductEdit(n,t);case 15:i.next=19;break;case 17:a.batchStatus(t,s.data,!1),a.failNum++;case 19:i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](5),a.batchStatus(t,"更新库存异常",!1),a.failNum++;case 25:return i.prev=25,l=100/a.multipleSelection.length,a.percentage+=l,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[5,21,25,30]])})))()},setDescription:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,p,m,h,g,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return n="",s={},i.prev=6,a.batchStatus(t,"正在获取商品详情...",!0),i.next=10,a.getProductDetail(t);case 10:if(o=i.sent,200!==o.code){i.next=38;break}s=o.data,a.descriptionVal=a.descriptionVal.replaceAll("；",";"),i.t0=a.descriptionRadio,i.next=1===i.t0?17:2===i.t0?19:3===i.t0?21:4===i.t0?23:5===i.t0?25:28;break;case 17:return s["description"]=a.descriptionVal+s.description,i.abrupt("break",28);case 19:return s["description"]=s.description+a.descriptionVal,i.abrupt("break",28);case 21:if(a.descriptionVal.indexOf(";")>-1)for(c=a.descriptionVal.split(";"),l=0;l<c.length;l++)u=c[l],s["description"]=s.description.replaceAll(u,"");else s["description"]=s.description.replaceAll(a.descriptionVal,"");return i.abrupt("break",28);case 23:return s["description"]=a.descriptionConfig.description,i.abrupt("break",28);case 25:for(p=0;p<s.tier_variation.length;p++)for(m=s.tier_variation[p],h=0;h<m.options.length;h++)g=m.options[h],n+=g+"\n";return s["description"]=a.descriptionConfig.description+"\n"+n,i.abrupt("break",28);case 28:if(a.getDescriptionLength(t),!("description"===t.edit&&0!==a.minLength&&s.description.length<a.minLength)){i.next=33;break}a.batchStatus(t,"描述长度过短：最小长度"+a.minLength,!1),i.next=36;break;case 33:return s["description"]=s["description"].trim().replaceAll(";"," ").slice(0,a.maxLength),i.next=36,a.handleProductEdit(s,t);case 36:i.next=40;break;case 38:a.batchStatus(t,o.data,!1),a.failNum++;case 40:i.next=46;break;case 42:i.prev=42,i.t1=i["catch"](6),a.batchStatus(t,"更新描述异常",!1),a.failNum++;case 46:return i.prev=46,b=100/a.multipleSelection.length,a.percentage+=b,--r.count,i.finish(46);case 51:case"end":return i.stop()}}),i,null,[[6,42,46,51]])})))()},setTitle:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.batchStatus(t,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(t);case 9:if(s=i.sent,200!==s.code){i.next=35;break}n=s.data,a.titleVal=a.titleVal.replaceAll("；",";"),i.t0=a.titleRadio,i.next=1===i.t0?16:2===i.t0?18:3===i.t0?20:4===i.t0?22:24;break;case 16:return n["name"]=a.titleVal,i.abrupt("break",24);case 18:return n["name"]=a.titleVal+n.name,i.abrupt("break",24);case 20:return n["name"]=n.name+a.titleVal,i.abrupt("break",24);case 22:if(a.titleVal.indexOf(";")>-1)for(o=a.titleVal.split(";"),c=0;c<o.length;c++)l=o[c],n["name"]=n.name.replaceAll(l,"");else n["name"]=n.name.replaceAll(a.titleVal,"");return i.abrupt("break",24);case 24:if(a.getTitleLength(t),!(0!==a.minLength&&n.name.length<a.minLength)){i.next=30;break}a.batchStatus(t,"标题长度过短：最小长度"+a.minLength,!1),a.failNum++,i.next=33;break;case 30:return n["name"]=n["name"].trim().replaceAll(";"," ").slice(0,a.maxLength),i.next=33,a.handleProductEdit(n,t);case 33:i.next=37;break;case 35:a.batchStatus(t,s.data,!1),a.failNum++;case 37:i.next=43;break;case 39:i.prev=39,i.t1=i["catch"](4),a.batchStatus(t,"更新标题异常",!1),a.failNum++;case 43:return i.prev=43,u=100/a.multipleSelection.length,a.percentage+=u,--r.count,i.finish(43);case 48:case"end":return i.stop()}}),i,null,[[4,39,43,48]])})))()},getProductInfo:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,d,p,m,h,g,b,f,v,_;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(i.prev=0,t.id=a.isRefurbishProduct?0:Number(t.id),t.name=t.name.toString().trim(),t.brand_id=Number(t.brand_id),t.size_chart=t.size_chart.toString(),t.category_path=JSON.parse(JSON.stringify(t.category_path)),t.add_on_deal=JSON.parse(JSON.stringify(t.add_on_deal)),null===t||void 0===t||!t.attributes){i.next=23;break}c=[],l={},u=0;case 11:if(!(u<t.attributes.length)){i.next=22;break}if(m=t.attributes[u],h=null===m||void 0===m||null===(d=m.custom_value.raw_value)||void 0===d?void 0:d.toString(),h||"0"!==(null===h||void 0===h||null===(p=h.attribute_value_id)||void 0===p?void 0:p.toString())){i.next=16;break}return i.abrupt("continue",19);case 16:g=m.attribute_id.toString(),l=!g||"0"===g||h?{attribute_id:Number(g),custom_value:{raw_value:m.custom_value.raw_value.toString(),unit:null===m||void 0===m||null===(b=m.custom_value)||void 0===b||null===(f=b.unit)||void 0===f?void 0:f.toString()}}:{attribute_id:Number(g),attribute_value_id:Number(m.attribute_value_id)},c.push(l);case 19:u++,i.next=11;break;case 22:t.attributes=c;case 23:if(a.countryArr.includes(e.country)&&(t.ds_attr_rcmd_id="".concat(a.guid().toString(),"|a|EN"),t.ds_cat_rcmd_id="".concat(a.guid().toString(),"|c|EN")),t.stock=Number(t.stock),t.parent_sku=t.parent_sku.toString(),t.price=t.price.toString(),a.isRefurbishProduct&&Number(t.price_before_discount)>0&&(t.price=t.price_before_discount.toString()),t.price_before_discount=t.price_before_discount.toString(),t.input_normal_price=t.price_info?t.price_info.input_normal_price.toString():"0",t.input_promotion_price=t.price_info?t.price_info.input_promotion_price.toString():"0",t.weight=t.weight.toString(),t.dimension=JSON.parse(JSON.stringify(t.dimension)),t.pre_order=JSON.parse(t.pre_order),t.days_to_ship=Number(t.days_to_ship),t.description=t.description.toString().trim(),t.installment_tenures=JSON.parse(JSON.stringify(t.installment_tenures)),a.getModelList(t.model_list,a.isRefurbishProduct),a.isMove){i.next=54;break}return i.prev=39,v={},v["product_id"]=t.id,v["mallId"]=e.platform_mall_id,i.next=45,a.$shopeemanService.getLogistics(e.country,v);case 45:if(_=i.sent,200!==_.code){i.next=50;break}return i.next=49,a.getLogisticsInfo(_.data.list,a.isUseProductChannel,e);case 49:t.logistics_channels=i.sent;case 50:i.next=54;break;case 52:i.prev=52,i.t0=i["catch"](39);case 54:t.images=JSON.parse(JSON.stringify(t.images)),(null===(r=t.tier_variation)||void 0===r?void 0:r.length)>0&&(t.tier_variation=JSON.parse(JSON.stringify(t.tier_variation))),"8"===t.status.toString()&&(t.unlisted=!0),1===(null===(n=t.model_list)||void 0===n?void 0:n.length)&&1===(null===(s=t.tier_variation)||void 0===s?void 0:s.length)&&(t.tier_variation[0].options[0]||(t.tier_variation[0].options[0]=t.tier_variation[0].name?t.tier_variation[0].name:t.model_list[0].name),t.tier_variation[0].name||(t.tier_variation[0].name=t.model_list[0].name)),null!==t&&void 0!==t&&null!==(o=t.min_purchase_limit_info)&&void 0!==o&&o.min_purchase_limit&&(t.min_purchase_limit_info.min_purchase_limit=Number(t.min_purchase_limit_info.min_purchase_limit)?Number(t.min_purchase_limit_info.min_purchase_limit):1,t.min_purchase_limit=t.min_purchase_limit_info.min_purchase_limit<1?1:t.min_purchase_limit_info.min_purchase_limit),a.checkCountryPriceForID(t,e),i.next=64;break;case 62:i.prev=62,i.t1=i["catch"](0);case 64:case"end":return i.stop()}}),i,null,[[0,62],[39,52]])})))()},checkCountryPriceForID:function(t,e){if("ID"===e.country){var a;if("0"!==t.input_normal_price)e.in_promotion&&(t.price=t.input_normal_price),t.price=t.input_normal_price;else for(var i=0;i<t.model_list.length;i++){var r=t.model_list[i];if(t.price===e.price.toString()){if(e.in_promotion){t.price=r.input_promotion_price;break}t.price=r.input_normal_price;break}}if((null===(a=t.model_list)||void 0===a?void 0:a.length)>0)for(var n=0;n<t.model_list.length;n++){var s=t.model_list[n];e.in_promotion?e.price=e.input_normal_price:s.price=s.input_normal_price}}},getLogisticsInfo:function(t,e,a){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,s,o,c,l,u,d,p,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=[],o=[],!((null===(n=t)||void 0===n?void 0:n.length)>0)){r.next=10;break}return u={platform_mall_id:a.platform_mall_id},r.next=6,i.$shopeemanService.getChinese(a.country,"/api/v3/logistics/get_channel_list/?",u);case 6:d=r.sent,d=JSON.parse(JSON.parse(d).data),null!==(c=d)&&void 0!==c&&null!==(l=c.data)&&void 0!==l&&l.list&&(o=d.data.list),t=i.filterLogistics(t,o,e);case 10:for(p=0;p<t.length;p++)m=t[p],h={},h.channelid=Number(m.channel_id),h.price=m.price?m.price.toString():"0.00",h.enabled=JSON.parse(m.enabled),h.cover_shipping_fee=JSON.parse(m.cover_shipping_fee),h.sizeid=Number(m.size_id),h.size=Number(m.size),h.parent_channel_id=Number(m.parent_channel_id),s.push(h);return r.abrupt("return",s);case 12:case"end":return r.stop()}}),r)})))()},filterLogistics:function(t,e,a){for(var i=[],r=0;r<e.length;r++){var n=e[r],s=n.channel_id.toString(),o="parent_channel_id"in n?n.parent_channel_id.toString():"0";if("0"===o&&(JSON.parse(n.is_mask_channel)||JSON.parse(n.enabled))){for(var c=!1,l=0;l<t.length;l++){var u=t[l];if(u.channel_id.toString()===s){a||(u.enabled=n.enabled.toString()),null!==u&&void 0!==u&&u.default_price||(u.default_price="0.00"),i.push(u),c=!0;break}}c||(n.price=n.price?n.price.toString:"0.00",n.cover_shipping_fee=!("0"===n.cover_shipping_fee.toString()||"false"===n.cover_shipping_fee.toString()),n.size_id=0,n.size=0,i.push(n))}}return i},getModelList:function(t,e){try{if((null===t||void 0===t?void 0:t.length)>0)for(var a=0;a<t.length;a++){var i=t[a];i.id=e?0:Number(i.id),i.name=e?"":!i.name&&i.sku?i.sku:i.name.toString(),i.sku=i.sku.toString(),i.stock=Number(i.stock),i.price=i.price.toString(),e&&Number(i.price_before_discount)>0&&(i.price=i.price_before_discount.toString()),i.tier_index=JSON.parse(JSON.stringify(i.tier_index)),i.input_normal_price=i.price_info.input_normal_price.toString(),i.input_promotion_price=i.price_info.input_promotion_price.toString(),i.is_default=!!JSON.parse(i.is_default)&&JSON.parse(i.is_default)}}catch(r){}},deleteActicity:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c,l,u,d,p,m,h,g,b,f,v,_,y,x;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.prev=0,i=0;case 2:if(!(i<t.campaignTypeList.Name.length)){a.next=74;break}if(r=t.campaignTypeList.Name[i],n="",1!==r){a.next=20;break}return c="",a.next=9,e.GoodsList.getMallDiscountsIdByKeyword(t);case 9:if(l=a.sent,c=null===(s=l.data)||void 0===s||null===(o=s.hits[0])||void 0===o?void 0:o.promotionid,!c){a.next=18;break}return e.discountId=c,a.next=15,e.GoodsList.deleteDiscountCampainDetail(t,c);case 15:if(u=a.sent,200===u.code){a.next=18;break}return a.abrupt("return",{batchStatus:"删除折扣活动失败：".concat(u.data),color:!1,code:u.code});case 18:a.next=71;break;case 20:if(3!==r){a.next=32;break}return a.next=23,e.GoodsList.getBundleDeal(t,n);case 23:return d=a.sent,n=d.data.hits[0].bundle_deal_id,a.next=27,e.GoodsList.deleteBundleGoods(t,n);case 27:if(p=a.sent,200===p.code){a.next=30;break}return a.abrupt("return",{batchStatus:"删除套装活动失败：".concat(p.data),color:!1,code:p.code});case 30:a.next=71;break;case 32:if(4!==r){a.next=70;break}return a.next=35,e.GoodsList.getAddOnDealStandardSearch(t);case 35:if(m=a.sent,n=m.data.add_on_deal_list[0].add_on_deal_id,!t.campaignTypeList.IsSelected){a.next=52;break}return a.next=40,e.GoodsList.getAdd0nDealAggrMainItemList(t,n);case 40:return h=a.sent,g=h.data.main_item_list.filter((function(e){return e.item_id===t.id})),b="",1===g[0].status&&(b=0),2===g[0].status&&(b=1),a.next=47,e.GoodsList.deleteAddOnDealMainItemList(t,b,n);case 47:if(f=a.sent,200===f.code){a.next=50;break}return a.abrupt("return",{batchStatus:"删除主商品加购活动失败：".concat(f.data),color:!1,code:f.code});case 50:a.next=68;break;case 52:return a.next=54,e.GoodsList.getAdd0nDealAggrSubItemList(t,n);case 54:if(v=a.sent,_=v.data.sub_item_list.filter((function(e){return e.item_id===t.id})),_.map((function(t){delete t.input_sub_item_price,delete t.price,delete t.sub_item_price,t.status=0})),!((null===_||void 0===_?void 0:_.length)>0)){a.next=68;break}y=0;case 59:if(!(y<_.length)){a.next=68;break}return a.next=62,e.GoodsList.deleteAddOnDealSubItemList(t,n,_);case 62:if(x=a.sent,200===x.code){a.next=65;break}return a.abrupt("return",{batchStatus:"删除子商品加购活动失败：".concat(x.data),color:!1,code:x.code});case 65:y++,a.next=59;break;case 68:a.next=71;break;case 70:return a.abrupt("continue",71);case 71:i++,a.next=2;break;case 74:return a.abrupt("return",{batchStatus:"删除活动成功",color:!0,code:200});case 77:return a.prev=77,a.t0=a["catch"](0),a.abrupt("return",{batchStatus:"删除活动异常",color:!1,code:-2});case 80:case"end":return a.stop()}}),a,null,[[0,77]])})))()},batchUpDownProduct:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.updateNum=t.multipleSelection.length,e.next=4,Object(d["c"])(t.multipleSelection,t.upDownProduct);case 4:t.operationBut=!1;case 5:case"end":return e.stop()}}),e)})))()},upDownProduct:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:if(i.prev=4,!a.upDown){i.next=13;break}if(!((null===(n=t.campaignTypeList.Name)||void 0===n?void 0:n.length)>0)){i.next=13;break}return i.next=9,a.deleteActicity(t,t.campaignTypeList);case 9:s=i.sent,o=s.batchStatus,c=s.color,a.batchStatus(t,o,c);case 13:return l=[{id:Number(t.id),unlisted:a.upDown}],u={mallId:t.platform_mall_id},i.next=17,a.$shopeemanService.handleGoodsDelist(t.country,u,l);case 17:p=i.sent,200===p.code?(a.successNum++,a.batchStatus(t,"".concat(a.upDown?"下架成功":"上架成功"),!0)):(a.failNum++,a.batchStatus(t,p.data,!1)),i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](4),a.failNum++,a.batchStatus(t,"".concat(a.upDown?"下架异常":"上架异常"),!1);case 25:return i.prev=25,m=100/a.multipleSelection.length,a.percentage+=m,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[4,21,25,30]])})))()},batchDelete:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:(null===(a=t.tableData)||void 0===a?void 0:a.length)>0&&(100===t.queryType||200===t.queryType)?t.deleteData=t.tableData:t.deleteData=t.multipleSelection,t.$confirm("确定删除【".concat(t.deleteData.length,"】个商品吗"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.deleteId=[],t.updateNum=t.deleteData.length,e.next=5,Object(d["c"])(t.deleteData,t.deleteProduct);case 5:return e.next=7,t.deleteCollectGoodsInfo();case 7:t.operationBut=!1;case 8:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return Object(d["x"])(),i.abrupt("return");case 4:if(i.prev=4,a.batchStatus(t,"正在删除商品...",!0),!((null===(n=t.campaignTypeList.Name)||void 0===n?void 0:n.length)>0)){i.next=17;break}return i.next=9,a.deleteActicity(t,t.campaignTypeList);case 9:if(s=i.sent,o=s.batchStatus,c=s.color,l=s.code,200===l){i.next=17;break}if(!a.isRefurbishProduct){i.next=16;break}return i.abrupt("return",{batchStatus:o,code:-2});case 16:return i.abrupt("return",a.batchStatus(t,o,c));case 17:return u={product_id_list:[Number(t.id)],mallId:t.platform_mall_id},i.next=20,a.$shopeemanService.handleGoodsDelete(t.country,u);case 20:if(p=i.sent,200!==p.code){i.next=29;break}if(!a.isRefurbishProduct){i.next=24;break}return i.abrupt("return",{batchStatus:"删除成功-开始上新",code:200});case 24:a.successNum++,a.batchStatus(t,"删除成功",!0),a.deleteId.push(t.id),i.next=33;break;case 29:if(!a.isRefurbishProduct){i.next=31;break}return i.abrupt("return",{batchStatus:"删除失败：".concat(p.data),code:-2});case 31:a.failNum++,a.batchStatus(t,"删除失败：".concat(p.data),!1);case 33:i.next=41;break;case 35:if(i.prev=35,i.t0=i["catch"](4),!a.isRefurbishProduct){i.next=39;break}return i.abrupt("return",{batchStatus:"删除异常",code:-2});case 39:a.failNum++,a.batchStatus(t,"删除异常",!1);case 41:return i.prev=41,a.isRefurbishProduct||(m=100/a.deleteData.length,a.percentage+=m),--r.count,i.finish(41);case 45:case"end":return i.stop()}}),i,null,[[4,35,41,45]])})))()},deleteCollectGoodsInfo:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.deleteId.length>0)){e.next=6;break}return t.$refs.Logs.writeLog("正在删除云商品库数据...",!0),e.next=4,t.GoodsList.deleteCollectGoodsInfo(t.deleteId);case 4:a=e.sent,200===a.code?t.$refs.Logs.writeLog("删除云商品库数据成功",!0):t.$refs.Logs.writeLog("删除云商品库数据失败：".concat(a.data),!1);case 6:case"end":return e.stop()}}),e)})))()},getGoodsActInfo:function(t){try{var e,a,i,r,s=null,o={},c=[];if(null!==t&&void 0!==t&&null!==(e=t.ongoing_upcoming_campaigns)&&void 0!==e&&e.upcoming_campaigns)if(s=t.ongoing_upcoming_campaigns.upcoming_campaigns,(null===(i=s)||void 0===i?void 0:i.length)>0)for(var l=0;l<s.length;l++){var u=s[l];c.push(u.campaign_type)}if(null!==t&&void 0!==t&&null!==(a=t.ongoing_upcoming_campaigns)&&void 0!==a&&a.ongoing_campaigns)if(s=t.ongoing_upcoming_campaigns.ongoing_campaigns,(null===(r=s)||void 0===r?void 0:r.length)>0)for(var d=0;d<s.length;d++){var p=s[d];c.push(p.campaign_type)}return o.Name=Object(n["a"])(new Set(c)),o.IsSelected=t.add_on_deal,o}catch(m){}},getDayLength:function(t){var e=t?t.country:this.country;switch(e){case"TH":case"MY":case"SG":this.minDays=7,this.maxDays=30,this.productDay=t?this.productDay:15,this.preOrderDeliveryDays=2;break;case"TW":this.minDays=5,this.maxDays=20,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=3;break;case"PH":this.minDays=7,this.maxDays=30,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=2;break;case"ID":this.minDays=7,this.maxDays=15,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=2;break;case"VN":this.minDays=7,this.maxDays=15,this.productDay=t?this.productDay:7,this.preOrderDeliveryDays=2;break;case"BR":this.minDays=5,this.maxDays=10,this.productDay=t?this.productDay:7,this.preOrderDeliveryDays=3;break}},getDescriptionLength:function(t){switch(t.country){case"TH":this.maxLength=3e3,this.minLength=25;break;case"VN":this.maxLength=3e3,this.minLength=100;break;case"MY":case"SG":case"ID":this.maxLength=3e3,this.minLength=20;break;case"PH":this.maxLength=3e3,this.minLength=5;break;case"TW":case"BR":this.maxLength=3e3,this.minLength=1;break}},getTitleLength:function(t){switch(t.country){case"TH":case"MY":this.maxLength=120,this.minLength=20;break;case"VN":case"SG":this.maxLength=120,this.minLength=10;break;case"TW":this.maxLength=60,this.minLength=5;break;case"PH":this.maxLength=100,this.minLength=20;break;case"ID":this.maxLength=100,this.minLength=5;break;case"BR":this.maxLength=120,this.minLength=1;break}},operation:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==(i=e.multipleSelection)&&void 0!==i&&i.length){a.next=2;break}return a.abrupt("return",e.$message("没有可操作的商品，请选择"));case 2:e[t]();case 3:case"end":return a.stop()}}),a)})))()},selectDescription:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t){a.next=10;break}return a.next=3,e.$commodityService.descriptionTemplateList();case 3:i=a.sent,r=JSON.parse(i),e.descriptionLabelList=r.data||[],e.descriptionConfigId?(n=e.descriptionLabelList.filter((function(t){return t&&t.id===e.descriptionConfigId}))[0],e.descriptionConfig.text=n&&n.description||e.descriptionConfig.text,e.descriptionConfig.description=n&&n.description||e.descriptionConfig.description,e.descriptionConfig.lable=n&&n.lable||""):e.descriptionConfigId=e.descriptionLabelList[0]&&e.descriptionLabelList[0].id||"",e.descriptionVisible=!0,a.next=31;break;case 10:if(1!==t){a.next=21;break}return s=e.descriptionConfig.tag||e.descriptionConfig.lable,a.next=14,e.$commodityService.uploadDescriptionTemplate(s,e.descriptionConfig.text);case 14:o=a.sent,c=JSON.parse(o),e.descriptionConfig.tag="",e.descriptionConfigId=parseInt(c.data),e.descriptionConfig.description=e.descriptionConfig.text,a.next=30;break;case 21:if(2!==t){a.next=29;break}return a.next=24,e.$commodityService.deleteDescriptionTemplate(e.descriptionConfigId);case 24:l=a.sent,u=JSON.parse(l),200===u.code?(e.descriptionConfigId="",e.$message.success("删除成功")):e.$message.error("删除失败"),a.next=30;break;case 29:3===t?e.descriptionConfig.description=e.descriptionConfig.text:4===t&&(e.descriptionConfig.text=e.descriptionConfig.description);case 30:e.descriptionVisible=!1;case 31:case"end":return a.stop()}}),a)})))()},viewDetails:function(t){var e={type:"itemDetail",shopId:t.platform_mall_id,id:t.id};this.$BaseUtilService.getOrderDetailInfo(t.platform_mall_id,JSON.stringify(e))},getLogistics:function(){var t=this,e=this.$shopeeManConfig.getLogisticsList();e=e[this.country]||[],this.logisticsList=[],this.logistics=[],e.forEach((function(e){e.CustomShipFee="",t.logisticsList.push(e),e.IsSelected&&t.logistics.push(e.ShipId)})),this.setIsCustomShipFee()},queryData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectMallList.length){e.next=2;break}return e.abrupt("return",t.$message("请选择店铺"));case 2:if(null!==(a=t.goodsStatus)&&void 0!==a&&a.length){e.next=4;break}return e.abrupt("return",t.$message("请选择商品状态"));case 4:if(null!==(i=t.source)&&void 0!==i&&i.length){e.next=6;break}return e.abrupt("return",t.$message("请选择上家来源"));case 6:if(!(t.soldMin<0||t.soldMax>99999999)){e.next=8;break}return e.abrupt("return",t.$message("销售量请输入0-99999999之间的数字"));case 8:if(!(t.viewMin<0||t.viewMax>99999999)){e.next=10;break}return e.abrupt("return",t.$message("访客量请输入0-99999999之间的数字"));case 10:if(!(t.likeMin<0||t.likeMax>99999999)){e.next=12;break}return e.abrupt("return",t.$message("粉丝量请输入0-99999999之间的数字"));case 12:if(!(t.priceMin<0||t.priceMax>99999999)){e.next=14;break}return e.abrupt("return",t.$message("价格请输入0-99999999之间的数字"));case 14:if(!(t.goodsMin<0||t.goodsMax>99999999)){e.next=16;break}return e.abrupt("return",t.$message("商品数量请输入0-99999999之间的数字"));case 16:t.initData(),t.flag=!1,t.queryNum=0,t.tableData=[],t.$refs.Logs.consoleMsg="",t.showConsole=!1,1===t.queryType?t.$refs.Logs.writeLog("开始查询...",!0):100===t.queryType?t.$refs.Logs.writeLog("开始查询100小时内无流量商品",!0):200===t.queryType&&t.$refs.Logs.writeLog("开始查询200小时内无流量商品",!0),t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[],t.isFlag=!0})),t.index=1,r=0;case 26:if(!(r<t.goodsStatus.length)){e.next=45;break}if(!t.flag){e.next=29;break}return e.abrupt("break",45);case 29:if(n=t.goodsStatus[r],t.goodsStatusVal=n,0!==n&&100!==t.queryType&&200!==t.queryType){e.next=38;break}return t.goodsStatusName="",e.next=35,Object(d["c"])(t.selectMallList,t.getTableData);case 35:return e.abrupt("break",45);case 38:return t.goodsStatusName=t.statusFilter[n],t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[],t.isFlag=!0})),e.next=42,Object(d["c"])(t.selectMallList,t.getTableData);case 42:r++,e.next=26;break;case 45:t.operationBut=!1,t.showConsole=!0,t.cursor=null,t.$refs.Logs.writeLog("查询完成",!0),100!==t.queryType&&200!==t.queryType||(null===(s=t.tableData)||void 0===s?void 0:s.length)>0&&t.batchDelete();case 50:case"end":return e.stop()}}),e)})))()},getTableData:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,d,p,m,h,g,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return a.stop(),i.abrupt("return");case 4:if(n="",s=t.mall_alias_name||t.platform_mall_name,i.prev=6,o={},o["mItem"]=t,o["pageSize"]=a.pageSize,o["listType"]=a.goodsStatusName?a.goodsStatusName:"all",!("originId"!==a.searchType&&a.keyword||a.goodsMax<99999999&&a.goodsMax>0||a.goodsMin>0&&a.goodsMin<99999999||a.soldMin>0&&a.soldMin<99999999||a.soldMax<99999999&&a.soldMax>0||a.categoryName)){i.next=21;break}return 100!==a.queryType&&200!==a.queryType&&(a.keyword&&(o["searchType"]=a.searchType,o["keyword"]=a.keyword.trim()),a.categoryName&&(o["categoryId"]=a.categoryList.categoryList[a.categoryList.categoryList.length-1].category_id),o["goodsMin"]=a.goodsMin,o["goodsMax"]=a.goodsMax),o["soldMin"]=a.soldMin,o["soldMax"]=a.soldMax,a.cursor&&(o["cursor"]=a.cursor),i.next=18,a.GoodsList.searchProductList(o);case 18:n=i.sent,i.next=24;break;case 21:return i.next=23,a.GoodsList.getMpskuList(o);case 23:n=i.sent;case 24:if(200!==n.code){i.next=34;break}if(a.cursor=n.data.page_info.cursor,null===(c=n.data.list)||void 0===c||!c.length){i.next=32;break}return a.$refs.Logs.writeLog("查询店铺【".concat(s,"】第【").concat(t.pageNumber,"】页数据：").concat(n.data.list.length),!0),i.next=30,a.setTableData(n.data.list,t,s);case 30:l=a.filterData(n.data.list),a.productNumChecked?t.mylist=l:(a.tableData=a.tableData.concat(l),a.queryNum=a.tableData.length);case 32:i.next=35;break;case 34:a.$refs.Logs.writeLog("店铺【".concat(s,"】").concat(n.data),!1);case 35:i.next=40;break;case 37:i.prev=37,i.t0=i["catch"](6),a.$refs.Logs.writeLog("店铺【".concat(s,"】获取数据异常"),!1);case 40:if(i.prev=40,m=a.tableData.filter((function(e){return e.platform_mall_id===t.platform_mall_id})),a.productNumChecked&&m.length<Number(a.productNum)&&(h=Number(a.productNum)-m.length,a.tableData=a.tableData.concat(t.mylist.slice(0,h)),g=a.tableData.filter((function(e){return e.platform_mall_id===t.platform_mall_id})),g.length>=Number(a.productNum)&&(t.isFlag=!1)),!((null===(u=n)||void 0===u||null===(d=u.data)||void 0===d||null===(p=d.list)||void 0===p?void 0:p.length)>=a.pageSize&&t.isFlag)||a.flag){i.next=50;break}if(t.pageNumber++,a.flag){i.next=48;break}return i.next=48,a.getTableData(t,r);case 48:i.next=54;break;case 50:a.queryNum=a.tableData.length,b=8===a.goodsStatus.length||100===a.queryType||200===a.queryType?1:a.goodsStatus.length,a.percentage=a.index++/(a.selectMallList.length*b)*100,--r.count;case 54:return i.finish(40);case 55:case"end":return i.stop()}}),i,null,[[6,37,40,55]])})))()},queryBanned:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.tableData=[],t.operationBut=!0,t.showConsole=!1,t.$refs.Logs.consoleMsg="",t.flag=!1,t.$refs.Logs.writeLog("开始查询禁卖商品...",!0),t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[],t.isFlag=!0})),e.next=10,Object(d["c"])(t.selectMallList,t.getBannedData);case 10:t.operationBut=!1,t.showConsole=!0,t.$refs.Logs.writeLog("禁卖商品查询结束",!0);case 13:case"end":return e.stop()}}),e)})))()},getBannedData:function(t){var e=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,c,l,u,d,p,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},!a.flag){i.next=4;break}return a.stop(),i.abrupt("return");case 4:return n="",s=t.mall_alias_name||t.platform_mall_name,i.prev=6,o={},o["mItem"]=t,o["pageSize"]=a.pageSize,o["listType"]="banned",o["listOrderType"]="list_time_asc",i.next=14,a.GoodsList.getMpskuList(o);case 14:if(n=i.sent,200!==n.code){i.next=23;break}if(null===(c=n.data.list)||void 0===c||!c.length){i.next=21;break}return a.$refs.Logs.writeLog("查询店铺【".concat(s,"】第【").concat(t.pageNumber,"】页数据：").concat(n.data.list.length),!0),i.next=20,a.setTableData(n.data.list,t,s);case 20:a.productNumChecked?t.mylist=n.data.list:(a.tableData=a.tableData.concat(n.data.list),a.queryNum=a.tableData.length);case 21:i.next=24;break;case 23:a.$refs.Logs.writeLog("店铺【".concat(s,"】").concat(n.data),!1);case 24:i.next=29;break;case 26:i.prev=26,i.t0=i["catch"](6),a.$refs.Logs.writeLog("店铺【".concat(s,"】获取数据异常"),!1);case 29:if(i.prev=29,p=a.tableData.filter((function(e){return e.platform_mall_id===t.platform_mall_id})),a.productNumChecked&&p.length<Number(a.productNum)&&(m=Number(a.productNum)-p.length,a.tableData=a.tableData.concat(t.mylist.slice(0,m)),h=a.tableData.filter((function(e){return e.platform_mall_id===t.platform_mall_id})),h.length>=Number(a.productNum)&&(t.isFlag=!1)),!((null===(l=n)||void 0===l||null===(u=l.data)||void 0===u||null===(d=u.list)||void 0===d?void 0:d.length)>=a.pageSize&&t.isFlag)){i.next=39;break}if(t.pageNumber++,a.flag){i.next=37;break}return i.next=37,a.getBannedData(t,r);case 37:i.next=43;break;case 39:a.queryNum=a.tableData.length,g=100/a.selectMallList.length,a.percentage+=g,--r.count;case 43:return i.finish(29);case 44:case"end":return i.stop()}}),i,null,[[6,26,29,44]])})))()},setTableData:function(t,e,a){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=regeneratorRuntime.mark((function r(n){var s,o,c,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t[n],o=0,c=0,l=[],u="",s.country=e.country,s.mallName=a,s.create_time=1e3*s.create_time,s.modify_time=1e3*s.modify_time,s.images=s.images[0],s.platform_mall_id=e.platform_mall_id,s.model_list.forEach((function(t){l.push(Number(t.price_info.normal_price)),o+=Number(t.stock_info.normal_stock),c+=Number(t.sold)})),s.categoryId=s.category_path.toString(),s.stock=o,s.sold=c,s.price=Math.min.apply(null,l),u=2===s.status?6:1===s.status&&0===s.stock?11:1===s.status&&100===i.goodsStatusVal?100:s.status,s.status=u,r.next=20,i.getPlatformData(s.parent_sku);case 20:s.platformTypeStr=i.platformData["platformTypeStr"]||"",s.productId=i.platformData["productId"]||"",s.url=i.platformData["url"]||"",s.platform=i.platformData["platform"]||"",s.oriShopId=i.platformData["shopId"]||"",s.oriSite=i.platformData["site"]||"",s.campaignTypeList=i.getGoodsActInfo(s);case 27:case"end":return r.stop()}}),r)})),s=0;case 2:if(!(s<t.length)){r.next=7;break}return r.delegateYield(n(s),"t0",4);case 4:s++,r.next=2;break;case 7:case"end":return r.stop()}}),r)})))()},filterData:function(t){for(var e=[],a=0;a<t.length;a++){var i,r,n,s,o=t[a];if(100!==this.queryType&&200!==this.queryType){if("originId"===this.searchType&&this.keyword&&this.keyword!==o.productId)continue;if(6===this.goodsStatusVal&&6!==o.status)continue;if(this.goodsStatusVal&&6!==this.goodsStatusVal&&6===o.status)continue;if(1===Number(this.sellStatus)&&Number(o.stock)>0)continue;if(2===Number(this.sellStatus)&&0===Number(o.stock))continue}(0===this.source[0]||this.source.includes(o.platformTypeStr))&&((null===(i=this.modifyTime)||void 0===i||!i.length||o.modify_time>=this.modifyTime[0])&&(null===(r=this.modifyTime)||void 0===r||!r.length||o.modify_time<=new Date(this.modifyTime[1]).getTime())&&(null===(n=this.createTime)||void 0===n||!n.length||o.create_time>=this.createTime[0])&&(null===(s=this.createTime)||void 0===s||!s.length||o.create_time<=new Date(this.createTime[1]).getTime())&&Number(o.price)>=Number(this.priceMin)&&Number(o.price)<=Number(this.priceMax)&&Number(o.view_count)>=Number(this.viewMin)&&Number(o.view_count)<=Number(this.viewMax)&&Number(o.like_count)>=Number(this.likeMin)&&Number(o.like_count)<=Number(this.likeMax)&&(100===this.queryType&&(Number((new Date).getTime())-Number(o.create_time)<36e7||0!==Number(o.view_count)||0!==Number(o.like_count))||200===this.queryType&&(Number((new Date).getTime())-Number(o.create_time)<72e7||0!==Number(o.view_count)||0!==Number(o.like_count))||e.push(o)))}return e},getPlatformData:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.decryptShopeeItemSku(t);case 2:i=e.platformData["platform"],r=e.platformData["productId"],5===i&&r.toString().includes("-")&&(e.getSelfGoodsPlatform(t),e.platformData&&e.platformData["platform"]&&(i=e.platformData["platform"])),n=Object(d["n"])(i,e.platformData),s=n.url,o=n.platformTypeStr,e.platformData["url"]=s,e.platformData["platformTypeStr"]=o;case 8:case"end":return a.stop()}}),a)})))()},decryptShopeeItemSku:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,i=/^[+-]?\d*[.]?\d*$/,!(t.length<30)){a.next=10;break}return a.next=5,e.$userInfo.user_create_time;case 5:r=a.sent,r&&(n=new Date(r).getTime(),s=new Date("2018-12-20 00:00:00").getTime(),n>s&&(e.platformData["platform"]=5,e.platformData["productId"]=t)),t.indexOf("_")>-1?(o=t.split("_"),i.test(o[0])&&i.test(o[1])?(c=Number(o[1]),1===c||2===c||3===c||5===c||6===c||7===c||8===c?(e.platformData["platform"]=c,e.platformData["productId"]=o[0]):(e.platformData["platform"]=5,e.platformData["productId"]=t)):(e.platformData["platform"]=5,e.platformData["productId"]=t)):i.test(t)?(e.platformData["platform"]=1,e.platformData["productId"]=t):(e.platformData["platform"]=5,e.platformData["productId"]=t),a.next=14;break;case 10:return a.next=12,e.$BaseUtilService.decGoodCode(t);case 12:l=a.sent,l.indexOf("-")>-1?(u=l.split("-"),e.getPlatformSimpleStr(u[0],u)):(e.platformData["platform"]=5,e.platformData["productId"]=t);case 14:a.next=18;break;case 16:a.prev=16,a.t0=a["catch"](0);case 18:case"end":return a.stop()}}),a,null,[[0,16]])})))()},getPlatformSimpleStr:function(t,e){try{var a=e[1];"pdd"===t.toLocaleLowerCase()?(this.platformData["platform"]=1,this.platformData["productId"]=a):"tb"===t.toLocaleLowerCase()||"tm"===t.toLocaleLowerCase()?(this.platformData["platform"]=2,this.platformData["productId"]=a):"tb"===t.toLocaleLowerCase()?(this.platformData["platform"]=3,this.platformData["productId"]=a):"own"===t.toLocaleLowerCase()?(this.platformData["platform"]=5,this.platformData["productId"]=a):"ghpt"===t.toLocaleLowerCase()?(this.platformData["platform"]=6,this.platformData["productId"]=a):"alibaba"===t.toLocaleLowerCase()?(this.platformData["platform"]=8,this.platformData["productId"]=a):"hyj"===t.toLocaleLowerCase()||"hlb"===t.toLocaleLowerCase()?(this.platformData["platform"]=7,this.platformData["productId"]=a,this.platformData["site"]=e[2],this.platformData["shopId"]=e[3]):"shopee"===t.toLocaleLowerCase()?(this.platformData["platform"]=11,this.platformData["productId"]=a,this.platformData["site"]=e[2],this.platformData["shopId"]=e[3]):"aliexpress"===t.toLocaleLowerCase()?(this.platformData["platform"]=12,this.platformData["productId"]=a):"lazada"===t.toLocaleLowerCase()?(this.platformData["platform"]=9,this.platformData["productId"]=a,this.platformData["site"]=e[2]):"hyjhw"===t.toLocaleLowerCase()?(this.platformData["platform"]=15,this.platformData["productId"]=a,this.platformData["site"]=e[2]):"jx"===t.toLocaleLowerCase()?(this.platformData["platform"]=10,this.platformData["productId"]=a,this.platformData["site"]=e[2]):"crossbroder"===t.toLocaleLowerCase()&&(this.platformData["platform"]=13,this.platformData["productId"]=a,this.platformData["userId"]=e.Length>2?e[2]:"")}catch(i){}},getSelfGoodsPlatform:function(t){var e=5,a="",i=[];try{t.includes("-")&&(i=t.split("-"),e=i[0]),this.getPlatformSimpleStr(e,i)}catch(r){this.platformData["platform"]=e,this.platformData["productId"]=a}},selectAll:function(t,e){var a=this;this[t].length<e.length?(this[t]=[],this[t].push(0),e.map((function(e){a[t].push("logistics"===t?e.ShipId:e.value)}))):this[t]=[],"logistics"===t&&this.setIsCustomShipFee()},changeSelect:function(t,e){(t.includes(0)||t.length!==this[e].length)&&t.includes(0)&&t.length-1<this[e].length&&(this[e]=this[e].filter((function(t){return 0!==t}))),"logistics"===e&&this.setIsCustomShipFee()},setIsCustomShipFee:function(){var t=this;this.isCustomShipFee=this.logistics.some((function(e){return t.logisticsList.some((function(t){return t.ShipId===e&&t.IsCustomShipFee}))}))},openUrl:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1===e)try{r=a.$filters.countryShopeebuyCom(t.country),a.$BaseUtilService.openUrl("".concat(r,"/product/").concat(t.platform_mall_id,"/").concat(t.id))}catch(n){a.$message.error("打开失败")}else 2===e?a.$BaseUtilService.openUrl(t.url):a.$BaseUtilService.openUrl(t);case 1:case"end":return i.stop()}}),i)})))()},changeMallList:function(t){this.selectMallList=t,this.country=t.country},changeMoveMallList:function(t){this.selectMoveMallList=t},handleSelectionChange:function(t){this.multipleSelection=t},moveSelectionChange:function(t){this.moveSelection=t},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)}))},handelClose:function(){this.moveSuccess=0,this.movefail=0,this.moveTime=40,this.goodsSize="",this.moveDetails=[],this.moveDetailsData=[]},batchStatus:function(t,e,a){this.$set(t,"batchStatus",e),this.$set(t,"color",a?"green":"red")},moveStatus:function(t,e,a){this.$set(t,"moveStatus",e),this.$set(t,"color",a?"green":"red")},stop:function(){this.$refs.Logs.writeLog("停止操作",!0),Object(d["x"])()},initData:function(){this.operationBut=!0,this.isMove=!1,this.isRefurbishProduct=!1,this.percentage=0,this.updateNum=0,this.successNum=0,this.failNum=0},exportTableData:function(){var t,e=this;if(null===(t=this.tableData)||void 0===t||!t.length)return this.$message("暂无数据导出");var a="<tr>\n          <td>站点</td>\n          <td>店铺名</td>\n          <td>主图</td>\n          <td>类目</td>\n          <td>上家类型</td>\n          <td>上家链接</td>\n          <td>itemID</td>\n          <td>itemID链接</td>\n          <td>价格</td>\n          <td>库存</td>\n          <td>标题</td>\n          <td>状态</td>\n          <td>创建时间</td>\n          <td>更新时间</td>\n          <td>销售量</td>\n          <td>访客量</td>\n          <td>粉丝量</td>\n        </td>";this.tableData.forEach((function(t){a+="<tr>\n        <td>".concat(t.country?e.$filters.chineseSite(t.country):"\t","</td>\n        <td>").concat(t.mallName?t.mallName:"\t","</td>\n        <td>").concat(t.images?e.$filters.imageRender([t.images]):"\t","</td>\n        <td>").concat(t.categoryId?e.getCategoryName(t.categoryId,t.country):"\t","</td>\n        <td>").concat(t.platformTypeStr?t.platformTypeStr:"\t","</td>\n        <td>").concat(t.url?t.url:"\t","</td>\n        <td>").concat(t.id?t.id:"\t","</td>\n        <td>").concat(t.id?"".concat(e.$filters.countryShopeebuyCom(t.country),"/product/").concat(t.platform_mall_id,"/").concat(t.id):"\t","</td>\n        <td>").concat(t.price?t.price:"\t","</td>\n        <td>").concat(t.stock?t.stock:"\t","</td>\n        <td>").concat(t.name?t.name:"\t","</td>\n        <td>").concat(t.status?e.statusObj[t.status]:"\t","</td>\n        <td>").concat(t.create_time?e.$dayjs(t.create_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(t.modify_time?e.$dayjs(t.modify_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(t.sold?t.sold:"\t","</td>\n        <td>").concat(t.view_count?t.view_count:"\t","</td>\n        <td>").concat(t.like_count?t.like_count:"\t","</td>\n        </tr>")})),Object(d["i"])("商品列表数据",a)},copy:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var a=document.createRange();a.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(i){}e.parentElement.removeChild(e)}}},g=h,b=(a("952e"),a("2877")),f=Object(b["a"])(g,i,r,!1,null,"0794e4a2",null);e["default"]=f.exports},8992:function(t,e,a){"use strict";a("4c28")},"952e":function(t,e,a){"use strict";a("1b67")},9772:function(t,e,a){},b0bd:function(t,e,a){"use strict";a("9772")},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var i=a("06c5");function r(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(i["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(c)throw s}}}}},c12c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contaniner category-mapp"},[a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[t._v("商品重量(kg)：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.goodsSize.weight,callback:function(e){t.$set(t.goodsSize,"weight",e)},expression:"goodsSize.weight"}})],1),a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[t._v("商品长度(cm)：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.goodsSize.long,callback:function(e){t.$set(t.goodsSize,"long",e)},expression:"goodsSize.long"}})],1),a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[t._v("商品宽度(cm)：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.goodsSize.width,callback:function(e){t.$set(t.goodsSize,"width",e)},expression:"goodsSize.width"}})],1),a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[t._v("商品高度(cm)：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.goodsSize.height,callback:function(e){t.$set(t.goodsSize,"height",e)},expression:"goodsSize.height"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-evenly",margin:"15px 0"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$emit("goodsSizeChange",t.goodsSize)}}},[t._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$emit("goodsSizeChange","")}}},[t._v("取消")])],1)])},r=[],n={name:"goods-size",data:function(){return{goodsSize:{width:"0",height:"0",long:"0",weight:"0"}}}},s=n,o=a("2877"),c=Object(o["a"])(s,i,r,!1,null,"1e5dfb64",null);e["a"]=c.exports},eb09:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category-mapp contaniner"},[a("div",{staticClass:"category_dialog"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"keepRight"},[t._v("店铺站点：")]),t.country?a("div",[t._v(t._s(t._f("chineseSite")(t.country)))]):a("div",[a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.countryOption,callback:function(e){t.countryOption=e},expression:"countryOption"}},t._l(t.countriesOption,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._l(t.categoryList,(function(e,i){return a("div",{key:i,staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight"},[t._v(t._s(i+1)+"级类目：")]),a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",filterable:""},on:{change:function(e){return t.setCategory(t.categoryAction[i],i)}},model:{value:t.categoryAction[i],callback:function(e){t.$set(t.categoryAction,i,e)},expression:"categoryAction[index]"}},[a("el-option",{attrs:{value:"",label:"全部"}}),t._l(e,(function(t){return a("el-option",{key:t.id,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1)}))],2),a("div",{staticClass:"category_box",staticStyle:{"margin-left":"20px"}},[t._m(0),t._l(t.attributesList,(function(e,i){return a("div",{key:i,staticClass:"on_new_dialog_box line_height_28"},[a("div",{staticClass:"width_single_150"},[t._v(t._s(e.attribute_name)+"("+t._s(e.attribute_cn_name)+")")]),a("div",[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",filterable:""},model:{value:e.options,callback:function(a){t.$set(e,"options",a)},expression:"item.options"}},t._l(e.new_options_obj,(function(t){return a("el-option",{key:t.value_id,attrs:{label:t.value,value:t.value_id}})})),1)],1)])}))],2)]),a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-top":"25px","justify-content":"space-evenly"}},[t.mallList[0]?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmCategory(0)}}},[t._v("　刷　新　")]):t._e(),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmCategory()}}},[t._v("　确　定　")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$emit("categoryChange","")}}},[t._v("　取　消　")])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"width_single_150"},[t._v("属性名称：")]),a("div",[t._v("属性值"),a("span",{staticStyle:{color:"red"}},[t._v("(必填)")])])])}],n=a("1da1"),s=(a("159b"),a("7db0"),a("b0c0"),a("c740"),a("a434"),a("96cf"),{name:"category-mapping",props:{country:{type:String,default:function(){return""}},goodsCurrent:{type:Object,default:function(){return{}}},mallList:{type:Array,default:function(){return[]}}},data:function(){return{countriesOption:this.$filters.countries_option,countryOption:"TH",categoryAction:[],attributesCurrent:[],categoryList:[],attributesList:[]}},watch:{countryOption:function(t){this.enterCategory()}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.enterCategory();case 2:case"end":return e.stop()}}),e)})))()},methods:{confirmCategory:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c,l,u,d,p,m,h,g,b,f,v,_,y,x,k,S,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:-1,r=e.country||e.countryOption,n=[],e.categoryList.forEach((function(t,a){var i=t.find((function(t){return t.category_id===e.categoryAction[a]}));i&&n.push(i)})),!(e.goodsCurrent&&i<0)){a.next=17;break}if(s=e.goodsCurrent.originCategoryId||e.goodsCurrent.category_id,o=e.goodsCurrent.platform||e.goodsCurrent.source,!s||!o){a.next=14;break}return c=[],e.attributesList.forEach((function(t){var e=t.new_options_obj.find((function(e){return e.value_id===t.options}));c.push({attributeId:t.attribute_id,attributeName:t.attribute_name,valueId:e.value_id,value:e.value})})),l={relationCategoryId:s,country:e.country,platformId:o,platformCategoryId:n[n.length-1].category_id,categoryAttributes:c},a.next=13,e.$commodityService.saveCategoryRelation(l);case 13:a.sent;case 14:e.$emit("categoryChange",{categoryList:n,attributesList:e.attributesList,country:r||e.countryOption}),a.next=56;break;case 17:return i=i<0?0:i,u=e.mallList[i],d=e.categoryAction[e.categoryAction.length-1],p={mallId:u.platform_mall_id,category_ids:d,brand_status:1,cursor:0,limit:100},a.next=23,e.$shopeemanService.getBrandList(r,p,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 23:if(m=a.sent,h=JSON.parse(m),!(h.status>=200&&h.status<=300)){a.next=54;break}if(g=JSON.parse(h.data),0!==g.code){a.next=51;break}return b=g.data&&g.data.list[0]&&g.data.list[0].brand_list,f=[],b.forEach((function(t){f.push({value:t.name,value_id:t.brand_id})})),v=[{category_id:d,attribute_id:0,is_mandatory:1,attribute_name:"Brand",attribute_cn_name:"品牌",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(f),attribute_label:"",is_key_attribute:1}],a.prev=32,a.next=35,e.$shopeemanService.getAttributeTree(r,p,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 35:_=a.sent,y=JSON.parse(_),x=JSON.parse(y.data),k=x&&x.data&&x.data.list[0]&&x.data.list[0].attribute_tree||[],k.forEach((function(t){var e=[];t.children.forEach((function(t){e.push({value:t.display_name||t.name,value_id:t.value_id})})),v.push({category_id:d,attribute_id:t.attribute_id,is_mandatory:t.mandatory?1:0,attribute_name:t.display_name||t.name,attribute_cn_name:"",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(e),attribute_label:"",is_key_attribute:0})})),a.next=44;break;case 42:a.prev=42,a.t0=a["catch"](32);case 44:return a.prev=44,a.next=47,e.$commodityService.uploadCateGoryAttr(v);case 47:return S=a.sent,w=JSON.parse(S),200===w.code?e.$message.success("同步成功"):e.$message.error("同步失败"),a.finish(44);case 51:e.$emit("categoryChange",""),a.next=56;break;case 54:return a.next=56,e.confirmCategory(++i);case 56:case"end":return a.stop()}}),a,null,[[32,42,44,51]])})))()},getAttribute:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.categoryAction[t.categoryAction.length-1]||t.categoryAction[t.categoryAction.length-2]||"0",i=t.country||t.countryOption,e.next=4,t.$commodityService.getAttributeInfo(i,a);case 4:r=e.sent,n=JSON.parse(r),t.attributesList=[],200===n.code&&(s=n.data&&n.data.attributes||[],s.forEach((function(e){var a=t.attributesCurrent.findIndex((function(t){return t.attribute_id===e.attribute_id})),i=t.attributesCurrent[a]&&t.attributesCurrent[a].value_id||0;e.new_options_obj=e.new_options&&JSON.parse(e.new_options)||[],e.options=a>-1&&parseInt(i)||e.new_options_obj[0]&&e.new_options_obj[0].value_id,t.attributesList.push(e)})),t.attributesCurrent=[]);case 8:case"end":return e.stop()}}),e)})))()},setCategory:function(t,e){this.categoryList.splice(e+1,this.categoryList.length-e),this.categoryAction.splice(e+1,this.categoryAction.length-e),this.enterCategory(t+"",++e)},enterCategory:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c,l,u,d,p,m,h,g,b,f,v;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"0",r=t.length>1&&void 0!==t[1]?t[1]:0,n=t.length>2&&void 0!==t[2]?t[2]:null,s=t.length>3&&void 0!==t[3]?t[3]:"1",o=e.country||e.countryOption,0!==r||0!==e.attributesCurrent.length){a.next=19;break}if(e.categoryAction=n&&n.categoryIdList||[],!e.goodsCurrent||!e.goodsCurrent.goodsId&&!e.goodsCurrent.goods_id){a.next=19;break}return e.categoryAction=[],u=e.goodsCurrent.originCategoryId||e.goodsCurrent.category_id,d=e.goodsCurrent.platform||e.goodsCurrent.source,a.next=13,e.$commodityService.getCategoryRelation(u,o,d);case 13:p=a.sent,m=JSON.parse(p),e.attributesCurrent=m.data&&m.data.attributes||[],i=(null===m||void 0===m||null===(c=m.data)||void 0===c||null===(l=c.category)||void 0===l?void 0:l.platform_category_id)||i,s="0"===i&&s||0,!s&&e.categoryAction.unshift(i);case 19:if(!i){a.next=47;break}return h=JSON.parse(JSON.stringify(e.categoryList))||[],a.next=23,e.$commodityService.getCategoryTbInfo(o,i,s);case 23:if(g=a.sent,b=JSON.parse(g),200!==b.code){a.next=45;break}if(f=b.data,0!==s){a.next=35;break}return v=(null===f||void 0===f?void 0:f.categories[0].parent_id)||0,v&&e.categoryAction.unshift(v),s=0===v?1:0,a.next=33,e.enterCategory(v+"",0,null,s);case 33:a.next=45;break;case 35:if(!f||!f.categories){a.next=43;break}return h[r]=f.categories,e.categoryList=h,e.categoryAction[r]=e.categoryAction[r]||h[r][0].category_id,a.next=41,e.enterCategory(e.categoryAction[r],++r);case 41:a.next=45;break;case 43:return a.next=45,e.getAttribute();case 45:a.next=49;break;case 47:return a.next=49,e.getAttribute(!0);case 49:case"end":return a.stop()}}),a)})))()}}}),o=s,c=(a("b0bd"),a("2877")),l=Object(c["a"])(o,i,r,!1,null,null,null);e["a"]=l.exports},feb6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"storeChooseUL"},[t.isMall?a("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.groupIdList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:""},on:{"visible-change":function(e){return t.filterMall("")}},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteShowList,(function(e,i){return t.showMall(e,i)?a("el-option",{key:i,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}}):t._e()}))],2)],1),t.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},r=[],n=a("1da1"),s=a("b85c"),o=a("2909"),c=(a("96cf"),a("99af"),a("d81d"),a("fb6a"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("c740"),a("7db0"),a("7646")),l=a("2b0e");l["default"].directive("loadmore",{bind:function(t,e){var a=this,i=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");i.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)})),i.addEventListener("blur",(function(){a.scrollTop=0}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new c["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t,e){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var a=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var i=e.indexOf("")>-1,r=t.indexOf("")>-1;i!==r?this.groupId=r?[""].concat(Object(o["a"])(this.groupIdList.map((function(t){return t.id})))):[]:r?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var i=this.isShowName,r=e.includes(""),n=t.includes("");if(r!==n||e.toString()===t.toString()&&this.isShowNameAll)if(n&&(!i||i&&!this.isShowNameAll)){var c=i&&Object(o["a"])(this.siteShowList.map((function(t){return t.platform_mall_id})))||[""].concat(Object(o["a"])(this.siteList.map((function(t){return t.platform_mall_id})))),l=new Set([].concat(Object(o["a"])(c),Object(o["a"])(e)));this.site=Object(o["a"])(l),this.isShowNameAll=!0,i&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(i){var d=i&&Object(o["a"])(this.siteShowList.map((function(t){return t.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,m=d.length>this.site.length&&d||this.site;u=new Set(this.site);var h,g=Object(s["a"])(m);try{for(g.s();!(h=g.n()).done;){var b=h.value;p.includes(b)&&u.delete(b)}}catch(f){g.e(f)}finally{g.f()}u.delete("")}this.site=Object(o["a"])(u)}else n?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1;setTimeout((function(){a.changeMallList(),a.filterMall(i),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.site=[],i=e.countryVal,r=[],!(e.jsonMallData.length>0)){a.next=7;break}r=e.jsonMallData,a.next=12;break;case 7:return a.next=9,e.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:n=a.sent,r=JSON.parse(n)||[],e.jsonMallData=JSON.parse(n)||[];case 12:if(!(r.length>0)){a.next=17;break}1===t&&(e.siteList=""===i?r:r.filter((function(t){return t.country===i}))),2===t&&(0===e.groupId.length?e.siteList=[]:(e.siteList=[],e.groupId.forEach((function(t){r.forEach((function(a){i?t===a.group_id&&i===a.country&&e.siteList.push(a):t===a.group_id&&e.siteList.push(a)}))})))),a.next=22;break;case 17:return s={country:"",mallGroupIds:""},a.next=20,e.mallListAPIInstance.ddMallGoodsGetMallList(s);case 20:o=a.sent,200===o.code?(e.$appConfig.temporaryCacheInfo("save","mallAllData",o.data),c=o.data||[],e.siteList=c,e.jsonMallData=c,e.siteList=""===i?c:c.filter((function(t){return t.country===i}))):e.$message.error("获取分组、店铺列表失败");case 22:0===e.groupIdList.length&&(e.groupId=[""],e.siteList.forEach((function(t){var a=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&a<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=[""]}),10);case 24:case"end":return a.stop()}}),a)})))()},changeMallList:function(){var t=this,e=[],a="";this.site.forEach((function(i){if(i){var r=t.siteList.find((function(t){return t.platform_mall_id===i}));e.push(r),a+=i+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(a=e.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))},filterMall:function(t){var e=this,a=t&&this.isShowName!==t?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){e.isShowName=t||"";var a=e.siteList;t&&(a=e.siteList.filter((function(e){var a=e.mall_alias_name||e.platform_mall_name;return a.includes(t)}))),e.mallShowIndex=0,e.siteShowList=a}),a)},showMall:function(t,e){var a=t.mall_alias_name||t.platform_mall_name,i=this.site[0]===t.platform_mall_id;return i||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteShowList.length>this.showMallNumber){var a=0;t?(a=this.mallShowIndex+10,a=a<this.siteShowList.length-this.showMallNumber&&a||this.siteShowList.length-this.showMallNumber):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30),this.mallShowIndex=a}}}},d=u,p=(a("8992"),a("2877")),m=Object(p["a"])(d,i,r,!1,null,null,null);e["a"]=m.exports}}]);