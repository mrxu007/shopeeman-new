(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4add3b36"],{3909:function(e,t,a){"use strict";a("ae0b")},"4c28":function(e,t,a){},"78d0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"workbench"},[a("div",{staticClass:"top-box"},[a("div",{staticClass:"operate"},[a("div",[e._v("基础操作")]),a("div",{staticClass:"line"}),a("div",{staticClass:"btn-items"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.markOrderNeedDeal}},[e._v("标记需仓库紧急处理")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setNoWait}},[e._v("标记无需等待子包裹")])],1),a("div",{staticClass:"btn-items"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.trackingNumberChangeOrderFun}},[e._v("采购物流单号变更")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.noticeTodeliver(2)}}},[e._v("通知仓库暂停发货")])],1),a("div",{staticClass:"btn-items"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.noticeTodeliver(1)}}},[e._v("通知仓库发货")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setColorLabelFun}},[e._v("批量标记颜色标识")])],1),a("div",{staticClass:"btn-items"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.compareDataVisible()}}},[e._v("批量推送订单至仓库")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.extService_visible}},[e._v("批量添加增值服务")])],1),a("div",{staticClass:"btn-items"})]),a("div",{staticClass:"search-list"},[a("div",[e._v("列表筛选操作")]),a("div",{staticClass:"line"}),a("div",{staticClass:"form-items"},[a("div",{staticClass:"select-item"},[a("storeChoose",{attrs:{"is-all":!0,"show-mall-all":!0},on:{changeMallList:e.setMallId}})],1)]),a("div",{staticClass:"select-item",staticStyle:{"margin-bottom":"5px",display:"flex"}},[a("div",[a("span",{staticClass:"search-title"},[e._v("订单创建时间：")]),a("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","picker-options":e.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.createdTime,callback:function(t){e.createdTime=t},expression:"createdTime"}})],1),a("div",{staticStyle:{"margin-left":"30px"}},[a("span",{staticClass:"search-title "},[e._v("颜色标识：")]),a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:""},model:{value:e.colorLabelId,callback:function(t){e.colorLabelId=t},expression:"colorLabelId"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),a("el-option",{attrs:{label:"未标识",value:"-1"}}),a("el-option",{attrs:{label:"已标识",value:"-2"}}),e._l(e.colorLogoList,(function(e){return a("el-option",{key:e.id,style:e.color,attrs:{label:e.name,value:e.id}})}))],2)],1)]),a("div",{staticClass:"form-items"},[a("div",{staticClass:"select-item"},[a("span",{staticClass:"search-title"},[e._v("包裹入库时间：")]),a("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","picker-options":e.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.storageTime,callback:function(t){e.storageTime=t},expression:"storageTime"}})],1),a("div",{staticClass:"select-item",staticStyle:{"margin-left":"25px"}},[a("span",{staticClass:"search-title"},[e._v("订单编号：")]),a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:""},model:{value:e.packageOrderSn,callback:function(t){e.packageOrderSn=t},expression:"packageOrderSn"}}),a("span",{staticClass:"search-title",staticStyle:{"margin-left":"8px"}},[e._v("采购物流单号：")]),a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:""},model:{value:e.statuoriginalTrackingNumbers,callback:function(t){e.statuoriginalTrackingNumbers=t},expression:"statuoriginalTrackingNumbers"}})],1)]),a("div",{staticClass:"form-items"},[a("div",{staticClass:"select-item"},[a("span",{staticClass:"search-title"},[e._v("包裹出库时间：")]),a("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","picker-options":e.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.outboundTime,callback:function(t){e.outboundTime=t},expression:"outboundTime"}})],1),a("div",{staticClass:"select-item"},[a("span",{staticClass:"search-title"},[e._v("订单发货状态：")]),a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",placeholder:"全部"},model:{value:e.deliveryStatus,callback:function(t){e.deliveryStatus=t},expression:"deliveryStatus"}},e._l(e.deliverStateList,(function(e){return a("el-option",{key:e.deliveryStatus,attrs:{label:e.label,value:e.deliveryStatus}})})),1)],1),a("div",{staticClass:"select-item",staticStyle:{"margin-left":"5px"}},[a("span",{staticClass:"search-title"},[e._v("包裹异常类型：")]),a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",placeholder:"全部"},model:{value:e.exceptionType,callback:function(t){e.exceptionType=t},expression:"exceptionType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.abnormalTypeList,(function(e){return a("el-option",{key:e.exception_type,attrs:{label:e.label,value:e.exception_type}})}))],2)],1)]),a("div",{staticClass:"select-item",staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"m-80",staticStyle:{"margin-left":"4px"},attrs:{type:"primary",size:"mini",loading:e.orderPackageLoading},on:{click:e.orderPackage}},[e._v("搜索")]),e.isExport?a("el-progress",{staticStyle:{width:"160px",display:"inline-block","margin-left":"10px"},attrs:{"text-inside":!0,"stroke-width":26,percentage:(100*e.exportNum/e.total).toFixed(2)-0}}):a("el-button",{staticClass:"m-80",staticStyle:{width:"100px"},attrs:{loading:e.exportLoading,type:"primary",size:"mini"},on:{click:function(t){return e.tableToExcel(1)}}},[e._v("导出数据")]),a("el-button",{staticClass:"m-80",staticStyle:{width:"120px"},attrs:{type:"primary",size:"mini"},on:{click:e.remarkFun}},[e._v("批量更新用户备注")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.closelogData}},[e._v("清空日志")]),a("el-checkbox",{staticStyle:{margin:"4px"},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}},[e._v("隐藏日志")])],1)])]),a("div",{staticClass:"table-box"},[a("el-table",{ref:"workbenchTable",staticStyle:{width:"100%"},attrs:{height:"calc(100vh - 350px)",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"},"cell-style":{textAlign:"center"},"row-style":{height:"80px"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40",fixed:""}}),a("el-table-column",{attrs:{label:"序号",width:"40",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1+(e.currentPage-1)*e.pageSize)+" ")]}}])}),a("el-table-column",{attrs:{label:"站点","min-width":"80px",prop:"country",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("chineseSite")(r.country)))])]}}])}),a("el-table-column",{attrs:{label:"店铺名称","min-width":"150px",prop:"mall_alias_name"}}),a("el-table-column",{attrs:{label:"仓库","min-width":"120px",prop:"warehouse_name"}}),a("el-table-column",{attrs:{label:"颜色标识","min-width":"100px",prop:"colorText"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.colorinfo?a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{width:"auto",height:"auto"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(r.colorinfo.name))]),a("div",{style:{backgroundColor:r.colorinfo.color.split(":")[1],width:e.colorStyle.width,height:e.colorStyle.height}})]):e._e()]}}])}),a("el-table-column",{attrs:{label:"订单编号","min-width":"180px",prop:"package_order_sn"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.package_order_sn?a("span",[e._v(e._s(t.row.package_order_sn)+" "),a("span",{staticClass:"copyIcon",on:{click:function(a){return e.copy(t.row.package_order_sn)}}},[a("i",{staticClass:"el-icon-document-copy"})])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"数量","min-width":"100px",prop:"goodsCount"}}),a("el-table-column",{attrs:{label:"商品详情","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.getGoodsInfo(t.row.package_order_sn,t.row.delivery_status,t.row),e.currenWarehouse=t.row.warehouse_name}}},[e._v("查看签收详情")])],1)]}}])}),a("el-table-column",{attrs:{label:"包裹重量","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.package_weight)+"g")])]}}])}),a("el-table-column",{attrs:{label:"发货金额","min-width":"100px",prop:"amount"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.amount+"元"))])]}}])}),a("el-table-column",{attrs:{label:"不等待子包裹发货","min-width":"120px",prop:"is_mark_outbound"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"goods-detail"},[e._v(" "+e._s(t.row.is_mark_outbound>0?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{label:"订单发货状态","min-width":"100px",prop:"delivery_status"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.delivery_statusList[r.delivery_status]))])]}}])}),a("el-table-column",{attrs:{label:"异常类型","min-width":"100px",prop:"exceptionText"}}),a("el-table-column",{attrs:{label:"订单创建时间","min-width":"150px",prop:"order_created_time"}}),a("el-table-column",{attrs:{label:"订单平台状态","min-width":"110px",prop:"order_status"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.orderStatusList[r.order_status]))])]}}])}),a("el-table-column",{attrs:{label:"截止发货时间","min-width":"150px",prop:"order_ship_by_date"}}),a("el-table-column",{attrs:{label:"入库时间","min-width":"150px",prop:"storage_time"}}),a("el-table-column",{attrs:{label:"出库时间","min-width":"150px",prop:"outbound_time"}}),a("el-table-column",{attrs:{label:"入库图片","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.storage_image?a("el-tooltip",{staticStyle:{width:"56px",height:"56px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.row.storage_image,width:"400px",height:"400px"}})]),a("el-image",{staticStyle:{"border-radius":"4px",margin:"0 auto"},attrs:{src:t.row.storage_image,alt:"",width:"56px",height:"56px"}})],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"出库图片","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.outbound_image?a("el-tooltip",{staticStyle:{width:"56px",height:"56px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.row.outbound_image,width:"400px",height:"400px"}})]),a("el-image",{staticStyle:{"border-radius":"4px",margin:"0 auto"},attrs:{src:t.row.outbound_image,alt:"",width:"56px",height:"56px"}})],1):e._e()]}}])}),a("el-table-column",{attrs:{"min-width":"240px",align:"left",label:"备注",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"text-align":"left","margin-left":"10px"}},[e._v("仓库备注："+e._s(t.row.remark))]),a("p",{staticStyle:{"text-align":"left","margin-left":"10px"}},[e._v(" 用户备注： "),a("span",{directives:[{name:"show",rawName:"v-show",value:!(t.row.id===e.activeRemarkID),expression:"!(scope.row.id === activeRemarkID ? true : false)"}]},[e._v(e._s(t.row.user_remark))]),t.row.id===e.activeRemarkID?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"120px"},attrs:{placeholder:"请输入备注内容",size:"mini",clearable:""},on:{blur:function(a){return e.changeRemark(t.row.package_order_sn,t.$index)}},model:{value:e.orderRemark,callback:function(t){e.orderRemark=t},expression:"orderRemark"}}):e._e(),a("i",{staticClass:"el-icon-edit-outline",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.editRemark(t.$index,t.row.id)}}})],1)]}}])}),a("el-table-column",{attrs:{label:"运输方式","min-width":"150px",prop:"transport_type"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(1===Number(r.transport_type)?"空运":"陆运"))])]}}])}),a("el-table-column",{attrs:{label:"货物类型","min-width":"150px",prop:"package_type"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.packageType[r.package_type]))])]}}])}),a("el-table-column",{attrs:{label:"增值服务名称","min-width":"150px",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.ext_service&&r.ext_service.name))])]}}])}),a("el-table-column",{attrs:{label:"增值服务金额","min-width":"150px",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.ext_service&&r.ext_service.price))])]}}])}),a("el-table-column",{attrs:{label:"增值服务备注","min-width":"150px",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.ext_service&&r.ext_service.remark))])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[100,200]},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"dialog-order",attrs:{title:"批量更新用户备注",width:"400px",top:"6vh","close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.remarkVisible},on:{"update:visible":function(t){e.remarkVisible=t},closed:e.closeDialog5}},[a("div",{staticClass:"order-dialog"},[a("div",{staticClass:"form-item",staticStyle:{"margin-left":"-28px"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{size:"mini",clearable:"",placeholder:"请输入备注"},model:{value:e.newRemark,callback:function(t){e.newRemark=t},expression:"newRemark"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.remarkServe}},[e._v("提交")])],1)])]),a("el-dialog",{staticClass:"dialog-order",attrs:{title:"采购物流单号变更",width:"400px",top:"6vh","close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.orderVisible},on:{"update:visible":function(t){e.orderVisible=t},closed:e.closeDialog1}},[a("div",{staticClass:"order-dialog"},[a("ul",[a("li",[a("label",[e._v("原订单编号:")]),a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",placeholder:"原订单编号"},model:{value:e.oldOrderSn,callback:function(t){e.oldOrderSn=t},expression:"oldOrderSn"}})],1),a("li",{staticStyle:{"margin-left":"-15px"}},[a("label",[e._v("采购物流单号:")]),a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",placeholder:"采购物流单号"},model:{value:e.package_code,callback:function(t){e.package_code=t},expression:"package_code"}})],1),a("li",[a("label",[e._v("新订单编号:")]),a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:"",placeholder:"新订单编号"},model:{value:e.newOrderSn,callback:function(t){e.newOrderSn=t},expression:"newOrderSn"}})],1),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary",size:"mini"},on:{click:e.trackingNumberChangeOrder}},[e._v("保存")])],1)])]),a("el-dialog",{staticClass:"dialog-color",attrs:{title:"标记颜色标识",width:"400px",top:"6vh","close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.colorVisible},on:{"update:visible":function(t){e.colorVisible=t},closed:e.closeDialog}},[a("div",{staticClass:"color-dialog"},[a("div",{staticClass:"form-item",staticStyle:{"margin-left":"28px"}},[a("span",{staticClass:"search-title"},[e._v("颜色标识：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",clearable:""},model:{value:e.colorLabelId1,callback:function(t){e.colorLabelId1=t},expression:"colorLabelId1"}},[a("el-option",{attrs:{label:"取消标识",value:"0"}}),e._l(e.colorLogoList,(function(e){return a("el-option",{key:e.id,style:e.color,attrs:{label:e.name,value:e.id}})}))],2),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setColorLabel}},[e._v("保存")])],1)])]),a("el-dialog",{staticClass:"dialog-delay",attrs:{title:"设置延迟推单时间(小时)",width:"400px",top:"6vh","close-on-press-escape":!1,"close-on-click-modal":!1,visible:e.delayVisible},on:{"update:visible":function(t){e.delayVisible=t},closed:e.closeDialog2}},[a("div",{staticClass:"delay-dialog"},[a("div",{staticClass:"form-item"},[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"不超过24小时"},model:{value:e.delayTime,callback:function(t){e.delayTime=t},expression:"delayTime"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.timeDelay}},[e._v("保存")])],1)])]),a("el-dialog",{staticClass:"dialog-order",attrs:{title:"包裹详情",width:"1200px",top:"6vh",visible:e.dialogVisible2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],ref:"workbenchTable",staticStyle:{width:"100%"},attrs:{"max-height":"590px",data:e.goodsList,"tooltip-effect":"dark","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"},"cell-style":{textAlign:"center"},"row-style":{height:"80px"}}},[a("el-table-column",{attrs:{label:"订单编号","min-width":"180px",prop:"order_sn",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.order_sn?a("span",[e._v(e._s(r.order_sn)+" "),a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(r.order_sn)}}},[a("i",{staticClass:"el-icon-document-copy"})])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"商品名称","min-width":"300px",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.goods?a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{width:"200px",height:"auto"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.goods.goods_name))]),a("el-button",{staticClass:"bindmallclass",attrs:{type:"text"}},[e._v(e._s(t.row.goods.goods_name))])],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"商品ID","min-width":"110px",prop:"warehouse_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.goods?a("div",{staticClass:"goods-detail"},[a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return e.open(t.row)}}},[e._v(" "+e._s(t.row.goods.goods_id)+" ")])],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"数量","min-width":"40px",prop:"goods_count"}}),a("el-table-column",{attrs:{label:"拍单订单号","min-width":"190px",prop:"shot_order_sn"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shotOrder&&t.row.shotOrder.shot_order_sn?a("div",{staticClass:"goods-detail"},[e._v(" "+e._s(t.row.shotOrder.shot_order_sn)),a("span",{staticClass:"copyIcon",on:{click:function(a){return e.copy(t.row.shotOrder.shot_order_sn)}}},[a("i",{staticClass:"el-icon-document-copy"})])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"拍单时间","min-width":"150px",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shotOrder?a("div",{staticClass:"goods-detail"},[e._v(" "+e._s(t.row.shotOrder.shotted_at)+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"物流单号","min-width":"150px",prop:"package_code"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.package_code?a("span",[e._v(e._s(r.package_code)+" "),a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(r.package_code)}}},[a("i",{staticClass:"el-icon-document-copy"})])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(r.package&&e.packageStatus[r.package.status]||"")+" ")])]}}])}),a("el-table-column",{attrs:{label:"签收时间","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.package?a("p",[e._v(e._s(t.row.package.package_time))]):e._e()]}}])}),a("el-table-column",{attrs:{label:"包裹签收图片","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.package&&t.row.package.package_image?a("el-tooltip",{staticStyle:{width:"56px",height:"56px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.row.package.package_image,width:"400px",height:"400px"}})]),a("el-image",{staticStyle:{"border-radius":"4px",margin:"0 auto"},attrs:{src:t.row.package.package_image,alt:"",width:"56px",height:"56px"}})],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"申请赔付",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.peifu?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.applyDialog(t.row)}}},[e._v("申请赔付")]):e._e()]}}])})],1)],1),a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"80px",margin:"0 30px 10px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible2=!1}}},[e._v("关 闭")])],1)]),a("el-dialog",{attrs:{title:"添加增值服务",visible:e.dialogExtService,width:"400px"},on:{"update:visible":function(t){e.dialogExtService=t},closed:e.closeDialog4}},[a("div",{staticClass:"exe_itemAll"},[a("div",{staticClass:"exe_item"},[a("span",[e._v(" 增值服务: ")]),a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.extParams.name,callback:function(t){e.$set(e.extParams,"name",t)},expression:"extParams.name"}},[a("el-option",{attrs:{value:e.extParams.name,label:e.extParams.name}})],1)],1),a("div",{staticClass:"exe_item"},[a("span",[e._v(" 服务价格: ")]),a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",clearable:"",size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.extParams.price,callback:function(t){e.$set(e.extParams,"price",t)},expression:"extParams.price"}})],1),a("div",{staticClass:"exe_item"},[a("span",[e._v(" 服务备注: ")]),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.extParams.remark,callback:function(t){e.$set(e.extParams,"remark",t)},expression:"extParams.remark"}})],1),a("div",{staticClass:"exe_item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.extService()}}},[e._v("确 定")])],1)])]),a("el-dialog",{attrs:{title:"同步数据至仓库",visible:e.dialog_compareData,width:"950px"},on:{"update:visible":function(t){e.dialog_compareData=t},closed:e.closeDialog3}},[a("div",{staticClass:"compareData_allItem"},[a("div",{staticClass:"compareData_item"},[a("span",[e._v(" 温馨提示：1：请务必确认订单对应店铺绑定的仓库是否正确 ")]),a("span",[e._v(" 温馨提示：2：若店铺同时绑定了国内仓和海外仓，则通过采购平台区分 (Lazada和Shopeeman默认为海外仓，其余默认国内仓，自有商品无法识别) ")]),a("span",[e._v(" 温馨提示：3：若店铺绑定的自有仓库，请重新绑定仓库，否则无法将数同步至仓库 ，将导致您的商品无法出库！！！ ")])]),a("div",{staticClass:"compareData_item"},[a("el-table",{attrs:{"header-cell-style":{background:"#f7fafa"},data:e.compareDataList,"row-style":{height:"50px"},"max-height":"400"}},[a("el-table-column",{attrs:{prop:"country",label:"站点","min-width":"80px",align:"center",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e._f("chineseSite")(r.country)))])]}}])}),a("el-table-column",{attrs:{prop:"mall_alias_name",label:"店铺名称","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.mall_alias_name?r.mall_alias_name:r.platform_mall_name))])]}}])}),a("el-table-column",{attrs:{prop:"warehouse_name",label:"当前绑定仓库","min-width":"200px",align:"center"}}),a("el-table-column",{attrs:{prop:"",label:"是否可同步","min-width":"100px",align:"center"}},[a("span",[e._v("是")])]),a("el-table-column",{attrs:{prop:"warehouse_num",label:"主订单数","min-width":"100px",align:"center",fixed:"right"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.compareData()}}},[e._v("确 定")])],1)])]),a("el-dialog",{staticClass:"apply-dialog",attrs:{title:"申请赔付",top:"6vh",visible:e.applyVisible,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.applyVisible=t},close:e.handleClose}},[a("div",{staticClass:"wrap"},[a("div",{staticClass:"left"},[a("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"订单编号："}},[e._v(" "+e._s(e.applyOrderSn)+" ")]),a("el-form-item",{attrs:{label:"拍单订单号："}},[e._v(" "+e._s(e.applyShotOrderSn)+" ")]),a("el-form-item",{attrs:{label:"采购物流单号："}},[e._v(" "+e._s(e.applyPackageCode)+" ")]),a("el-form-item",{attrs:{label:"当前状态："}},[e._v(" "+e._s(e.packageStatus[e.applyStatus]?e.packageStatus[e.applyStatus]:"")+" ")]),a("el-form-item",{attrs:{label:"包裹所属仓库："}},[e._v(" "+e._s(e.currenWarehouse)+" ")])],1)],1),a("div",{staticClass:"right"},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"赔付类型："}},[a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:e.handleChange1},model:{value:e.applyType,callback:function(t){e.applyType=t},expression:"applyType"}},e._l(e.applyTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v("如需赔付清关费，请填写在备注中")])],1),a("el-form-item",{attrs:{label:"赔付金额："}},[a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.applyMoney))])]),a("el-form-item",{attrs:{label:"赔付原因："}},[a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.applyTypeCause,callback:function(t){e.applyTypeCause=t},expression:"applyTypeCause"}},e._l(e.applyTypeCauseList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"图片凭证："}},e._l(e.applyImages,(function(t,r){return a("div",{key:r},[a("div",t?[a("el-image",{attrs:{src:t},on:{click:function(e){t=""}}})]:[a("el-upload",{attrs:{accept:".jpg,.jpeg,.png,.webp",action:"#","show-file-list":!1,"auto-upload":!1,"list-type":"picture-card","on-change":e.handleChange2}},[a("i",{staticClass:"el-icon-plus",on:{click:function(t){return e.getImagesIndex(r)}}})])],1)])})),0),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",rows:5,size:"mini",resize:"none",placeholder:"请输入内容",maxlength:"150","show-word-limit":""},model:{value:e.applyRemark,callback:function(t){e.applyRemark=t},expression:"applyRemark"}})],1)],1)],1)]),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.applyLoading},on:{click:e.applyCompensation}},[e._v(" 申请赔付 ")])],1)]),a("Logs",{ref:"autoReplyLogs",attrs:{clear:""},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}})],1)},i=[],s=a("1da1"),l=(a("b0c0"),a("99af"),a("159b"),a("c740"),a("d3b7"),a("25f0"),a("a15b"),a("a9e3"),a("fb6a"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("ac1f"),a("5319"),a("96cf"),a("0e0b")),n=[{label:"全部",deliveryStatus:0},{label:"待入库",deliveryStatus:1},{label:"等待包裹",deliveryStatus:2},{label:"紧急入库",deliveryStatus:3},{label:"待出库",deliveryStatus:4},{label:"已出库",deliveryStatus:5},{label:"已完成",deliveryStatus:6},{label:"订单作废",deliveryStatus:7},{label:"暂停发货",deliveryStatus:8},{label:"异常",deliveryStatus:9},{label:"已变更包裹",deliveryStatus:10},{label:"缺件",deliveryStatus:11},{label:"损坏",deliveryStatus:12},{label:"超重",deliveryStatus:13},{label:"缺失面单",deliveryStatus:14},{label:"渠道退件",deliveryStatus:15},{label:"丢件",deliveryStatus:16},{label:"海外退件",deliveryStatus:17},{label:"等待拆件",deliveryStatus:18}],o=[{label:"正常",exception_type:0},{label:"缺件",exception_type:1},{label:"超长超重拦截",exception_type:2},{label:"打印订单失败",exception_type:3},{label:"欠费",exception_type:4}],c=[{label:"等待中",order_status:1},{label:"未发货",order_status:2},{label:"部分发货",order_status:3},{label:"已发货",order_status:4},{label:"已取消",order_status:5},{label:"无法履行",order_status:6},{label:"已发货，未确认发票",order_status:7},{label:"等待可行性",order_status:8}],u=[{label:"已签收",status:1},{label:"已经拒收",status:2},{label:"匹配不到订单包裹",status:3},{label:"包裹已销毁",status:4},{label:"包裹丢件",status:5},{label:"申请退件",status:6},{label:"已退件",status:7},{label:"已匹配订单",status:8},{label:"此包裹为平台物流单号",status:9},{label:"包裹下架",status:10}],d=a("feb6"),p=a("63c1"),m={components:{storeChoose:d["a"]},directives:{focus:{inserted:function(e,t,a){e.querySelector("input").focus()}}},data:function(){return{peifu:!1,currenWarehouse:"",exportLoading:!1,detailLoading:!1,showlog:!0,colorStyle:{width:"100px",height:"20px"},orderStatusList:{1:"待支付",2:"待发货",3:"已发货",4:"已完成",5:"取消中",6:"已取消",7:"退款/退货",8:"确认签收",9:"退款成功",10:"退款失败",20:"无售后订单"},statusList:{1:"待发货",2:"订单作废",3:"暂停发货"},delivery_statusList:{1:"待入库",2:"等待包裹",3:"紧急入库",4:"待出库",5:"已出库",6:"已完成",7:"订单作废",8:"暂停发货",9:"异常"},shopeeConfig:new p["a"],compareDataList:[],dialog_compareData:!1,dialogExtService:!1,extParams:{packageOrderSns:"",name:"",price:"",remark:""},orderPackageLoading:!1,isLoading:!1,tableData:[],multipleSelection:[],currentPage:1,pageSize:100,site:"",total:0,siteList:[{label:"全部",value:""}],shopGroup:[],shopGroupList:[{label:"店铺1",value:"1"},{label:"店铺2",value:"2"}],shopAccount:[],shopAccountList:[],activeRemarkID:0,orderRemark:"",createdTime:[],deliveryStatus:"",deliverStateList:n,exceptionType:"",abnormalTypeList:o,packageStatusList:u,goodsPackageStatusList:["","已签收,未拣货","已拣货","申请退件","已退件","未签收"],statuoriginalTrackingNumbers:"",storageTime:[],packageOrderSn:"",colorLabelId:"0",colorLabelId1:"0",colorLogoList:[],outboundTime:[],colorVisible:!1,orderVisible:!1,delayVisible:!1,newOrderSn:"",oldOrderSn:"",package_code:"",delayTime:"24",exportOrderList:[],dialogVisible2:!1,goodsList:[],transportType:["海运","空运","陆运"],packageType:["","普货","敏感货","商检货"],isExport:!1,exportIndex:0,exportNum:0,pickerOptions:{disabledDate:function(e){var t=Date.now()-80352e5;return e.getTime()>Date.now()||e.getTime()<t}},remarkVisible:!1,newRemark:"",applyVisible:!1,applyType:1,applyTypeCause:1,applyOrderSn:"",applyImages:["","",""],applyRemark:"",applyPackageCode:"",applyShotOrderSn:"",applyStatus:"",applyMoney:"",imagesIndex:"",applyLoading:!1,packageStatus:{1:"已签收",2:"已拒收",3:"匹配不到订单包裹",4:"包裹已销毁",5:"包裹丢件",6:"申请退件",7:"已退件"},applyTypeList:[{value:1,label:"赔付运费"},{value:2,label:"赔付采购价"},{value:4,label:"赔付采购价+运费"}],applyTypeCauseList:[{value:1,label:"仓库丢件"},{value:2,label:"仓库漏发"},{value:3,label:"超材出库"},{value:4,label:"买家收货不符"},{value:5,label:"包裹到齐48小时未出库"},{value:6,label:"已出库，虾皮仓未发货致订单取消"}]}},mounted:function(){this.createdTime=Object(l["e"])(7),this.getInfo(),this.orderPackage()},methods:{open:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.BaseUtilBridgeService.openUrl(e.goods.goods_url);case 1:case"end":return t.stop()}}),t)})))()},applyCompensation:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.applyImages.some((function(e){return""!==e})),a){t.next=3;break}return t.abrupt("return",e.$message.warning("请上传图片凭证"));case 3:return e.applyLoading=!0,r={type:e.applyType,typeCause:e.applyTypeCause,orderSn:e.applyOrderSn,images:e.applyImages,remark:e.applyRemark},t.prev=5,t.next=8,e.$api.applyCompensation(r);case 8:if(i=t.sent,s=i.data,200===s.code){t.next=14;break}return e.$message.error(s.message),e.applyLoading=!1,t.abrupt("return");case 14:e.$message.success("申请赔付成功"),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),e.$message.error("申请赔付异常","".concat(t.t0));case 20:e.applyLoading=!1;case 21:case"end":return t.stop()}}),t,null,[[5,17]])})))()},applyDialog:function(e){this.applyVisible=!0,this.applyOrderSn=e.order_sn,this.applyPackageCode=e.package_code,this.applyShotOrderSn=e.shotOrder&&e.shotOrder.shot_order_sn?e.shotOrder.shot_order_sn:"",this.applyStatus=e.package&&e.package.status?e.package.status:"",this.getMoney()},getMoney:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={type:e.applyType,orderSn:e.applyOrderSn},t.prev=1,t.next=4,e.$api.getMoney(a);case 4:if(r=t.sent,i=r.data,200===i.code){t.next=9;break}return e.$message.error(i.message),t.abrupt("return");case 9:e.applyMoney=i.data.amount,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.$message.error("获取赔付金额异常","".concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},handleChange1:function(){this.getMoney()},handleChange2:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t,i=e.raw,/\.(jpg|jpeg|png|webp)$/.test(i.name.toLowerCase())){a.next=6;break}return t.showlog=!1,t.$refs.autoReplyLogs.writeLog("上传格式不对,请上传jpg、jpeg、png、webp格式的图片",!1),a.abrupt("return");case 6:n=new FileReader,n.readAsDataURL(i),n.onload=Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.imgData=n.result,a=Object(l["t"])(!1,32)+"_"+(new Date).getTime(),e.next=4,t.$ossService.uploadFile(r.imgData,a);case 4:i=e.sent,t.applyImages[t.imagesIndex]=i,t.$forceUpdate();case 7:case"end":return e.stop()}}),e)})));case 9:case"end":return a.stop()}}),a)})))()},getImagesIndex:function(e){this.imagesIndex=e},closelogData:function(){this.$refs.autoReplyLogs.consoleMsg=""},remarkFun:function(){this.multipleSelection.length?this.remarkVisible=!0:this.$message.warning("请勾选一条需要操作的数据")},remarkServe:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.newRemark){t.next=3;break}return e.$message.warning("请输入备注"),t.abrupt("return");case 3:t.prev=3,e.showlog=!1,e.$refs.autoReplyLogs.writeLog("批量备注订单开始......"),a=0;case 7:if(!(a<e.multipleSelection.length)){t.next=22;break}return r={packageOrderSn:e.multipleSelection[a].package_order_sn,remark:e.newRemark},t.next=11,e.$api.setUserRemark(r);case 11:if(i=t.sent,s=i.data,200!==s.code){t.next=17;break}e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.multipleSelection[a].package_order_sn,"】，备注成功"),!0),t.next=19;break;case 17:return e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.multipleSelection[a].package_order_sn,"】，").concat(s.message),!1),t.abrupt("continue",19);case 19:a++,t.next=7;break;case 22:e.$refs.autoReplyLogs.writeLog("批量备注订单完成"),e.orderPackage(),e.closeDialog5(),t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](3),e.closeDialog5();case 30:case"end":return t.stop()}}),t,null,[[3,27]])})))()},closeDialog5:function(){this.newRemark="",this.remarkVisible=!1},closeDialog3:function(){this.dialog_compareData=!1},compareDataVisible:function(){var e=this;if(!this.multipleSelection.length)return this.$message.warning("请勾选需要操作的数据"),!1;try{this.compareDataList=[],this.multipleSelection.forEach((function(t){t.warehouse_num=1;var a=e.compareDataList.findIndex((function(e){return t.mall_alias_name===e.mall_alias_name&&t.warehouse_name===e.warehouse_name}));-1!==a?e.compareDataList[a].warehouse_num=e.compareDataList[a].warehouse_num+t.warehouse_num:e.compareDataList.push(t)})),this.dialog_compareData=!0}catch(t){}},compareData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showlog=!1,e.$refs.autoReplyLogs.writeLog("开始批量推送订单至仓库......"),a=0;case 3:if(!(a<e.compareDataList.length)){t.next=24;break}return t.prev=4,r={sysOrderId:e.compareDataList[a].sys_order_id,warehouseUserId:e.compareDataList[a].warehouse_id},t.next=8,e.$api.uploadWarehouseOrder(r);case 8:if(i=t.sent,200!==i.status){t.next=13;break}e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.compareDataList[a].package_order_sn,"】，推送成功"),!0),t.next=15;break;case 13:return e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.compareDataList[a].package_order_sn,"】，推送成功"),!1),t.abrupt("continue",21);case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t["catch"](4),e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.compareDataList[a].package_order_sn,"】，推送成功"),!1),t.abrupt("break",24);case 21:a++,t.next=3;break;case 24:e.$refs.autoReplyLogs.writeLog("批量推送订单至仓库结束"),e.closeDialog3();case 26:case"end":return t.stop()}}),t,null,[[4,17]])})))()},getPackage:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},closeDialog4:function(){this.extParams={packageOrderSns:"",name:"",price:"",remark:""},this.dialogExtService=!1},extService_visible:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,l,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=3;break}return e.$message.warning("请勾选需要操作的数据"),t.abrupt("return",!1);case 3:s=e.multipleSelection[0].warehouse_name,l=0;case 5:if(!(l<e.multipleSelection.length)){t.next=12;break}if(s===e.multipleSelection[l].warehouse_name){t.next=9;break}return e.$message.warning("只能批量给同一个仓库的包裹添加增值服务"),t.abrupt("return");case 9:l++,t.next=5;break;case 12:return n={wid:e.multipleSelection[0].wid,key:"value_added_services"},t.next=15,e.$XzyNetMessageService.post("xzy.warehouse.config",n);case 15:if(o=t.sent,c=JSON.parse(JSON.parse(o).data),200===c.code){t.next=20;break}return e.$message.error("获取服务增值信息失败"),t.abrupt("return");case 20:e.extParams.name=(null===c||void 0===c||null===(a=c.data[0])||void 0===a?void 0:a.name)||"",e.extParams.price=(null===c||void 0===c||null===(r=c.data[0])||void 0===r?void 0:r.price)||"",e.extParams.remark=(null===c||void 0===c||null===(i=c.data[0])||void 0===i?void 0:i.remark)||"",e.dialogExtService=!0;case 24:case"end":return t.stop()}}),t)})))()},extService:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.extParams.name&&""!==e.extParams.price){t.next=4;break}e.$message.warning("服务名、价格不能为空"),t.next=31;break;case 4:t.prev=4,e.showlog=!1,e.$refs.autoReplyLogs.writeLog("开始添加增值服务......"),a=0;case 8:if(!(a<e.multipleSelection.length)){t.next=22;break}return e.extParams.packageOrderSns=e.multipleSelection[a].package_order_sn,t.next=12,e.$api.uploadExtService(e.extParams);case 12:if(r=t.sent,200!==r.data.code){t.next=17;break}e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.multipleSelection[a].package_order_sn,"】，添加成功"),!0),t.next=19;break;case 17:return e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.multipleSelection[a].package_order_sn,"】，").concat(r.data.message),!1),t.abrupt("continue",19);case 19:a++,t.next=8;break;case 22:e.$refs.autoReplyLogs.writeLog("添加增值服务完成"),t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](4),e.$message.error("".concat(t.t0));case 28:e.extParams={packageOrderSns:"",name:"",price:"",remark:""},e.dialogExtService=!1,e.orderPackage();case 31:case"end":return t.stop()}}),t,null,[[4,25]])})))()},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(){this.orderPackage()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.orderPackage()},closeDialog:function(){this.colorLabelId1="0",this.colorVisible=!1},closeDialog1:function(){this.orderVisible=!1},closeDialog2:function(){this.delayVisible=!1},getInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(l["d"])().then((function(t){e.colorLogoList=t})),Object(l["p"])().then((function(t){e.shopAccountList=t}));case 2:case"end":return t.stop()}}),t)})))()},setMallId:function(e){var t=[];""===e.country&&0===e.length||e.length===this.shopAccountList.length?t=[]:e.forEach((function(e){t.push(e.id)})),this.shopAccount=t},orderPackage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,n,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.orderPackageLoading=!0,e.tableData=[],e.isLoading=!0,a=e.shopAccount.toString(),r={page:e.currentPage,pageSize:e.pageSize,status:"",packageOrderSn:e.packageOrderSn,originalTrackingNumber:e.statuoriginalTrackingNumbers,exceptionType:e.exceptionType,deliveryStatus:e.deliveryStatus,colorLabelId:e.colorLabelId,sysMallIds:a},e.createdTime&&e.createdTime.length&&(r.createdTime=e.setDateFmt(e.createdTime).join("/")),e.storageTime&&e.storageTime.length&&(r.storageTime=e.setDateFmt(e.storageTime).join("/")),e.outboundTime&&e.outboundTime.length&&(r.outboundTime=e.setDateFmt(e.outboundTime).join("/")),t.prev=8,t.next=11,e.$api.orderPackage(r);case 11:if(i=t.sent,s=i.data,200!==s.code){t.next=31;break}e.total=s.data.total,n=s.data.data,u=0;case 17:if(!(u<n.length)){t.next=29;break}if(d=n[u],""===e.site||d.country===e.site){t.next=21;break}return t.abrupt("continue",26);case 21:d.mall_alias_name=Object(l["q"])(e.shopAccountList,"label","id",d.sys_mall_id),d.exceptionText=Object(l["q"])(o,"label","exception_type",d.exception_type),d.orderStatusText=Object(l["q"])(c,"label","order_status",d.order_status),d.colorinfo=Object(l["l"])(e.colorLogoList,d.color_id)||"",e.tableData.push(d);case 26:u++,t.next=17;break;case 29:t.next=32;break;case 31:e.$message.error(s.message);case 32:e.isLoading=!1,t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](8),e.isLoading=!1;case 38:e.orderPackageLoading=!1;case 39:case"end":return t.stop()}}),t,null,[[8,35]])})))()},setSelect:function(){var e=this;this.tableData.forEach((function(t){e.$refs.workbenchTable.toggleRowSelection(t,!1)}))},setNoWait:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,l,n,o,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=3;break}return e.$message.warning("请勾选需要操作的数据"),t.abrupt("return");case 3:for(e.isLoading=!0,a="",r=e.multipleSelection,a=r[0].id,i=1;i<r.length;i++)s=r[i],a+=","+s.id;return t.prev=8,l={id:a},t.next=12,e.$api.setNoWait(l);case 12:if(n=t.sent,o=n.data,200===o.code)e.$message.success("操作成功");else for(c="",u=0;u<o.data.length;u++)d=o.data[u],200!==d.code&&(c=d.message,e.showlog=!1,e.$refs.autoReplyLogs.writeLog("订单号【".concat(d.package_order_sn,"】标记失败，").concat(c),!1));e.orderPackage(),e.isLoading=!1,t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](8),e.isLoading=!1;case 22:case"end":return t.stop()}}),t,null,[[8,19]])})))()},markOrderNeedDeal:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s,l,n,o,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=3;break}return e.$message.warning("请勾选需要操作的数据"),t.abrupt("return");case 3:for(e.isLoading=!0,a="",r=e.multipleSelection,a=r[0].id,i=1;i<r.length;i++)s=r[i],a+=","+s.id;return t.prev=8,l={id:a},t.next=12,e.$api.markOrderNeedDeal(l);case 12:if(n=t.sent,o=n.data,200===o.code)e.$message.error("操作成功");else for(c="",u=0;u<o.data.length;u++)d=o.data[u],200!==d.code&&(c=d.message,e.showlog=!1,e.$refs.autoReplyLogs.writeLog("订单号【".concat(d.package_order_sn,"】标记失败，").concat(c),!1));e.orderPackage(),e.isLoading=!1,t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](8),e.isLoading=!1;case 22:case"end":return t.stop()}}),t,null,[[8,19]])})))()},noticeTodeliver:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s,l,n,o,c,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.multipleSelection.length){a.next=3;break}return t.$message.warning("请勾选需要操作的数据"),a.abrupt("return");case 3:for(t.isLoading=!0,r="",i=t.multipleSelection,r=i[0].id,s=1;s<i.length;s++)l=i[s],r+=","+l.id;return a.prev=8,n={id:r,isDelivery:e},a.next=12,t.$api.noticeTodeliver(n);case 12:if(o=a.sent,c=o.data,200===c.code)t.$message.success("操作成功"),t.orderPackage();else for(u="",d=0;d<c.data.length;d++)p=c.data[d],200!==p.code&&(u=p.message,t.showlog=!1,t.$refs.autoReplyLogs.writeLog("订单号【".concat(p.package_order_sn,"】通知失败，").concat(u),!1));t.isLoading=!1,a.next=21;break;case 18:a.prev=18,a.t0=a["catch"](8),t.isLoading=!1;case 21:case"end":return a.stop()}}),a,null,[[8,18]])})))()},editRemark:function(e,t){this.activeRemarkID=t,this.orderRemark=this.tableData[e].user_remark},changeRemark:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$api.setUserRemark({packageOrderSn:e,remark:a.orderRemark});case 2:if(i=r.sent,a.tableData[t].user_remark=a.orderRemark,a.isfocus=!0,a.activeRemarkID="",200===i.data.code){r.next=9;break}return a.$message.error("修改失败:".concat(i.data.message),!1),r.abrupt("return");case 9:a.$message.success("修改成功",!0);case 10:case"end":return r.stop()}}),r)})))()},trackingNumberChangeOrderFun:function(){this.orderVisible=!0},trackingNumberChangeOrder:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.newOrderSn&&""!==e.oldOrderSn&&""!==e.package_code){t.next=3;break}return e.$message.error("请确保输入信息有效"),t.abrupt("return");case 3:return e.isLoading=!0,t.prev=4,a={trackingNumber:e.package_code,primaryOrderSn:e.oldOrderSn,orderSn:e.newOrderSn},t.next=8,e.$api.trackingNumberChangeOrder(a);case 8:r=t.sent,i=r.data,200===i.code?(e.$message.success("操作成功"),e.orderPackage()):e.$message.warning(i.message),e.orderVisible=!1,e.isLoading=!1,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](4),e.orderVisible=!1,e.isLoading=!1;case 19:case"end":return t.stop()}}),t,null,[[4,15]])})))()},setColorLabelFun:function(){this.multipleSelection.length?this.colorVisible=!0:this.$message.warning("请勾选需要操作的数据")},setColorLabel:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,e.showlog=!1,e.$refs.autoReplyLogs.writeLog("正在给订单号标识颜色......"),a=0;case 4:if(!(a<e.multipleSelection.length)){t.next=18;break}return r={sysOrderIds:e.multipleSelection[a].sys_order_id,id:e.colorLabelId1},t.next=8,e.$api.setColorLabel(r);case 8:if(i=t.sent,200!==i.data.code){t.next=13;break}e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.multipleSelection[a].package_order_sn,"】，标识成功"),!0),t.next=15;break;case 13:return e.$refs.autoReplyLogs.writeLog("订单号【".concat(e.multipleSelection[a].package_order_sn,"】，标识失败"),!1),t.abrupt("continue",15);case 15:a++,t.next=4;break;case 18:e.$refs.autoReplyLogs.writeLog("订单号标识颜色完成"),e.colorVisible=!1,e.orderPackage(),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),e.colorVisible=!1;case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},userInfo:function(){var e=localStorage.getItem("delayTime");Number(e)||this.$api.userInfo().then((function(t){200===t.data.code&&(e=t.data.data.xzyDelayedTime?t.data.data.xzyDelayedTime:24,localStorage.setItem("delayTime",e))})),this.delayTime=e},timeDelayFun:function(){this.delayVisible=!0},timeDelay:function(){var e=this,t=this.delayTime-0;if(""!==t)if(t>24)this.$message.warning("时间不能超过24小时");else if(t<10)this.$message.warning("时间不能少于10小时");else{var a={xzyDelayedTime:Math.round(t)};this.$api.timeDelay(a).then((function(t){200===t.data.code?e.$message.success("设置成功"):e.$message.error(t.data.message),e.closeDialog2()})).catch((function(){e.closeDialog2()}))}else this.$message.warning("请输入延迟时间")},setDateFmt:function(e){return e[0]=e[0].length>15?e[0]:e[0]+" 00:00:00",e[1]=e[1].length>15?e[1]:e[1]+" 23:59:59",e},getGoodsInfo:function(e,t,a){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.dialogVisible2=!0,a={packageOrderSn:e},t.prev=2,r.detailLoading=!0,t.next=6,r.$api.getGoodsInfo({params:a});case 6:i=t.sent,s=i.data,200===s.code&&(r.goodsList=s.data,r.goodsList.forEach((function(e){var t;1===e.isAbnormslPayment||null!==(t=e.package)&&void 0!==t&&t.package_time?r.peifu=!0:r.peifu=!1}))),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),r.$message.error("".concat(t.t0));case 14:r.detailLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},tableToExcel:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s,n,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.exportLoading=!0,r=t.shopAccount.toString(),i={page:e,pageSize:200,status:"",packageOrderSn:t.packageOrderSn,originalTrackingNumber:t.statuoriginalTrackingNumbers,exceptionType:t.exceptionType,deliveryStatus:t.deliveryStatus,colorLabelId:t.colorLabelId,sysMallIds:r},t.createdTime&&t.createdTime.length&&(i.createdTime=t.setDateFmt(t.createdTime).join("/")),t.storageTime&&t.storageTime.length&&(i.storageTime=t.setDateFmt(t.storageTime).join("/")),t.outboundTime&&t.outboundTime.length&&(i.outboundTime=t.setDateFmt(t.outboundTime).join("/")),a.prev=6,a.next=9,t.$api.orderPackage(i);case 9:if(s=a.sent,n=s.data,200!==n.code){a.next=27;break}c=n.data.data,u=0;case 14:if(!(u<c.length)){a.next=25;break}if(d=c[u],""===t.site||d.country===t.site){a.next=18;break}return a.abrupt("continue",22);case 18:d.mall_alias_name=Object(l["q"])(t.shopAccountList,"label","id",d.sys_mall_id),d.exceptionText=Object(l["q"])(o,"label","exception_type",d.exception_type),d.colorinfo=Object(l["l"])(t.colorLogoList,d.color_id)||"",t.exportOrderList.push(d);case 22:u++,a.next=14;break;case 25:a.next=28;break;case 27:t.$message.error(n.message);case 28:a.next=33;break;case 30:a.prev=30,a.t0=a["catch"](6),t.$message.error("".concat(a.t0));case 33:t.exportOrderList.length<t.total?t.tableToExcel(e+1):(t.exportLoading=!1,t.importBilling(t.exportOrderList));case 34:case"end":return a.stop()}}),a,null,[[6,30]])})))()},importBilling:function(){var e=this,t=1,a="<tr><td>编号</td><td>站点</td><td>店铺名称</td><td>仓库</td><td>颜色标识</td><td>订单编号</td><td>数量</td><td>包裹重量(g)</td><td>发货金额</td><td>运输方式</td><td>货物类型</td><td>不等待子包裹发货</td>\n            <td>订单发货状态</td><td>异常类型</td><td>订单创建时间</td><td>订单平台状态</td><td>截止发货时间</td><td>入库时间</td><td>出库时间</td>\n            <td>入库图片</td><td>出库图片</td><td>仓库备注</td><td>用户备注</td>\n            <td>增值服务名称</td><td>增值服务金额</td><td>增值服务备注</td>\n            </tr>";this.exportOrderList.forEach((function(r){a+="<tr><td>".concat(t++,"</td>\n                <td>").concat(r.country?e.$filters.chineseSite(r.country):"\t","</td>\n                <td>").concat(r.mall_alias_name?r.mall_alias_name:"\t","</td>\n                <td>").concat(r.warehouse_name,"</td>\n                <td>").concat(r.colorinfo?r.colorinfo.name:"\t","</td>\n                <td style=\"mso-number-format:'@';\">").concat(r.package_order_sn?r.package_order_sn:"\t","</td>\n                <td>").concat(r.goodsCount?r.goodsCount:"\t","</td>\n                <td>").concat(r.package_weight?r.package_weight:"\t","</td>\n                <td>").concat(r.amount?r.amount+"元":"\t","</td>\n                <td>").concat(r.transport_type?e.transportType[r.transport_type]:"\t","</td>\n                <td>").concat(r.package_type?e.packageType[r.package_type]:"\t","</td>\n                <td>").concat(r.is_mark_outbound>0?"是":"否\t","</td>\n                <td>").concat(r.delivery_status?e.delivery_statusList[r.delivery_status]:"\t","</td>\n                <td>").concat(r.exceptionText?r.exceptionText:"\t","</td>\n                <td>").concat(r.order_created_time+"\t","</td>\n                <td>").concat(r.order_status?e.orderStatusList[r.order_status]:"\t","</td>\n                <td>").concat(r.order_ship_by_date?r.order_ship_by_date:"\t","</td>\n                <td>").concat(r.storage_time?r.storage_time:"\t","</td>\n                <td>").concat(r.outbound_time?r.outbound_time:"\t","</td>\n                <td>").concat(r.storage_image?r.storage_image:"\t","</td>\n                 <td>").concat(r.outbound_image?r.outbound_image:"\t","</td>\n               <td>").concat(r.remark?r.remark:"\t","</td>\n               <td>").concat(r.user_remark?r.user_remark:"\t","</td>\n               <td>").concat(r.ext_service?r.ext_service.name:"\t","</td>\n               <td>").concat(r.ext_service?r.ext_service.price:"\t","</td>\n               <td>").concat(r.ext_service?r.ext_service.remark:"\t","</td>\n                </tr>")}));var r="仓库包裹数据".concat(new Date(Date.now()+288e5).toISOString().slice(0,10)),i='<html xmlns:o="urn:schemas-microsoft-com:office:office"\n                xmlns:x="urn:schemas-microsoft-com:office:excel"\n                xmlns="http://www.w3.org/TR/REC-html40">\n                <head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet>\n                  <x:Name>'.concat(r,"</x:Name>\n                  <x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet>\n                  </x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e\n                  </head><body><table>").concat(a,"</table></body></html>"),s=new Blob([i],{type:"html",name:r}),l=document.createElement("a");document.body.appendChild(l),l.href=URL.createObjectURL(s),l.download="仓库包裹数据".concat(new Date(Date.now()+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"").slice(0,20),".xls"),l.click(),document.body.removeChild(l)},copy:function(e){var t=document.createElement("div");t.id="tempTarget",t.style.opacity="0",t.innerText=e,document.body.appendChild(t);try{var a=document.createRange();a.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(r){}t.parentElement.removeChild(t)},handleClose:function(){this.applyType=1,this.applyTypeCause=1,this.applyRemark="",this.applyImages=["","",""]}}},g=m,h=(a("3909"),a("2877")),b=Object(h["a"])(g,r,i,!1,null,"1c9f11e2",null);t["default"]=b.exports},8992:function(e,t,a){"use strict";a("4c28")},ae0b:function(e,t,a){},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var r=a("06c5");function i(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,n=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,l=e},f:function(){try{n||null==a["return"]||a["return"]()}finally{if(o)throw l}}}}},feb6:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"storeChooseUL"},[e.isMall?a("li",[e._v(e._s(e._f("chineseSite")(e.countryVal)))]):a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.groupIdList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})}))],2)],1),a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"","filter-method":e.filterMall,size:"mini",filterable:""},on:{"visible-change":function(t){return e.filterMall("")}},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.siteShowList,(function(t,r){return e.showMall(t,r)?a("el-option",{key:r,attrs:{label:t.mall_alias_name||t.platform_mall_name,value:t.platform_mall_id}}):e._e()}))],2)],1),e.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:e.reset}},[e._v("　刷　　新　")])],1):e._e()])])},i=[],s=a("1da1"),l=a("b85c"),n=a("2909"),o=(a("96cf"),a("99af"),a("d81d"),a("fb6a"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("c740"),a("7db0"),a("7646")),c=a("2b0e");c["default"].directive("loadmore",{bind:function(e,t){var a=this,r=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");r.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?t.value(!0,this):this.scrollTop<30&&t.value(!1,this)})),r.addEventListener("blur",(function(){a.scrollTop=0}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new o["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(e){this.siteShowList=e},countryVal:{handler:function(e,t){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(e,t){var a=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var r=t.indexOf("")>-1,i=e.indexOf("")>-1;r!==i?this.groupId=i?[""].concat(Object(n["a"])(this.groupIdList.map((function(e){return e.id})))):[]:i?this.groupId=e.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(e,t){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var r=this.isShowName,i=t.includes(""),s=e.includes("");if(i!==s||t.toString()===e.toString()&&this.isShowNameAll)if(s&&(!r||r&&!this.isShowNameAll)){var o=r&&Object(n["a"])(this.siteShowList.map((function(e){return e.platform_mall_id})))||[""].concat(Object(n["a"])(this.siteList.map((function(e){return e.platform_mall_id})))),c=new Set([].concat(Object(n["a"])(o),Object(n["a"])(t)));this.site=Object(n["a"])(c),this.isShowNameAll=!0,r&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(r){var d=r&&Object(n["a"])(this.siteShowList.map((function(e){return e.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,m=d.length>this.site.length&&d||this.site;u=new Set(this.site);var g,h=Object(l["a"])(m);try{for(h.s();!(g=h.n()).done;){var b=g.value;p.includes(b)&&u.delete(b)}}catch(f){h.e(f)}finally{h.f()}u.delete("")}this.site=Object(n["a"])(u)}else s?this.site=e.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1;setTimeout((function(){a.changeMallList(),a.filterMall(r),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s,l,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.site=[],r=t.countryVal,i=[],!(t.jsonMallData.length>0)){a.next=7;break}i=t.jsonMallData,a.next=12;break;case 7:return a.next=9,t.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:s=a.sent,i=JSON.parse(s)||[],t.jsonMallData=JSON.parse(s)||[];case 12:if(!(i.length>0)){a.next=17;break}1===e&&(t.siteList=""===r?i:i.filter((function(e){return e.country===r}))),2===e&&(0===t.groupId.length?t.siteList=[]:(t.siteList=[],t.groupId.forEach((function(e){i.forEach((function(a){r?e===a.group_id&&r===a.country&&t.siteList.push(a):e===a.group_id&&t.siteList.push(a)}))})))),a.next=22;break;case 17:return l={country:"",mallGroupIds:""},a.next=20,t.mallListAPIInstance.ddMallGoodsGetMallList(l);case 20:n=a.sent,200===n.code?(t.$appConfig.temporaryCacheInfo("save","mallAllData",n.data),o=n.data||[],t.siteList=o,t.jsonMallData=o,t.siteList=""===r?o:o.filter((function(e){return e.country===r}))):t.$message.error("获取分组、店铺列表失败");case 22:0===t.groupIdList.length&&(t.groupId=[""],t.siteList.forEach((function(e){var a=t.groupIdList.findIndex((function(t){return t.id===e.group_id}));e.group_name&&a<0&&(t.groupIdList.push({group_name:e.group_name,id:e.group_id}),t.groupId.push(e.group_id))}))),setTimeout((function(){t.isAllowSet2=!0,t.isAllowSet1=!0,t.site=[""]}),10);case 24:case"end":return a.stop()}}),a)})))()},changeMallList:function(){var e=this,t=[],a="";this.site.forEach((function(r){if(r){var i=e.siteList.find((function(e){return e.platform_mall_id===r}));t.push(i),a+=r+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(a=t.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:t,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(t["country"]=this.countryVal,this.$emit("changeMallList",t))},filterMall:function(e){var t=this,a=e&&this.isShowName!==e?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){t.isShowName=e||"";var a=t.siteList;e&&(a=t.siteList.filter((function(t){var a=t.mall_alias_name||t.platform_mall_name;return a.includes(e)}))),t.mallShowIndex=0,t.siteShowList=a}),a)},showMall:function(e,t){var a=e.mall_alias_name||e.platform_mall_name,r=this.site[0]===e.platform_mall_id;return r||this.mallShowIndex<=t&&t<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(e,t){if(this.siteShowList.length>this.showMallNumber){var a=0;e?(a=this.mallShowIndex+10,a=a<this.siteShowList.length-this.showMallNumber&&a||this.siteShowList.length-this.showMallNumber):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(t.scrollTop=e?t.scrollTop-100:30),this.mallShowIndex=a}}}},d=u,p=(a("8992"),a("2877")),m=Object(p["a"])(d,r,i,!1,null,null,null);t["a"]=m.exports}}]);