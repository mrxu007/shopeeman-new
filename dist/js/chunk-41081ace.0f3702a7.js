(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41081ace"],{"0695":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"wrap"},[a("li",[a("span",[t._v("一级类目：")]),a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(e){t.categroyVal2="",t.categroyVal3="",t.handleChange01()}},model:{value:t.categroyVal1,callback:function(e){t.categroyVal1=e},expression:"categroyVal1"}},[a("el-option",{attrs:{label:"全部",value:0}}),t._l(t.categroyList1,(function(t,e){return a("el-option",{key:t.id,attrs:{label:t.cat_name,value:t.id}})}))],2)],1),a("li",[a("span",[t._v("二级类目：")]),a("el-select",{attrs:{filterable:"",disabled:!t.categroyVal1,placeholder:"请选择",size:"mini"},on:{change:function(e){t.categroyVal3="",t.handleChange02()}},model:{value:t.categroyVal2,callback:function(e){t.categroyVal2=e},expression:"categroyVal2"}},t._l(t.categroyList2,(function(t,e){return a("el-option",{key:t.id,attrs:{label:t.cat_name,value:t.id}})})),1)],1),a("li",[a("span",[t._v("三级类目：")]),a("el-select",{attrs:{filterable:"",disabled:!t.categroyVal2,placeholder:"请选择",size:"mini"},on:{change:function(e){return t.handleChange03()}},model:{value:t.categroyVal3,callback:function(e){t.categroyVal3=e},expression:"categroyVal3"}},t._l(t.categroyList3,(function(t,e){return a("el-option",{key:t.id,attrs:{label:t.cat_name,value:t.id}})})),1)],1)])])},i=[],n=a("1da1"),r=(a("96cf"),a("7db0"),{name:"ProductChoose",props:{isClean:{type:Boolean,default:!1},isAll:{type:Boolean,default:!1},cataInfo:{type:Array,default:function(){return[]}}},data:function(){return{categroyList1:[],categroyList2:[],categroyList3:[],categroyVal1:"",categroyVal2:"",categroyVal3:"",categroyData:[],categroyVal1Name:"",categroyVal2Name:"",categroyVal3Name:""}},watch:{},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:if(!t.cataInfo.length){e.next=22;break}if(t.categroyVal1=t.cataInfo[0],a=t.categroyList1.find((function(e){return e.id==t.categroyVal1})),!a){e.next=12;break}return t.categroyVal1Name=a.cat_name,t.$emit("CateId",{id:t.categroyVal1,name:[t.categroyVal1Name]}),e.next=10,t.getCategoryInfo(t.categroyVal1);case 10:t.categroyList2=t.categroyData,t.categroyVal2=t.cataInfo[1];case 12:if(!t.categroyVal2){e.next=22;break}if(s=t.categroyList2.find((function(e){return e.id==t.categroyVal2})),!s){e.next=21;break}return t.categroyVal2Name=s.cat_name,t.$emit("CateId",{id:t.categroyVal2,name:[t.categroyVal1Name,t.categroyVal2Name]}),e.next=19,t.getCategoryInfo(t.categroyVal2);case 19:t.categroyList3=t.categroyData,t.categroyVal3=t.cataInfo[2];case 21:t.categroyVal3&&(i=t.categroyList3.find((function(e){return e.id==t.categroyVal3})),i&&(t.categroyVal3Name=i.cat_name,t.$emit("CateId",{id:t.categroyVal3,name:[t.categroyVal1Name,t.categroyVal2Name,t.categroyVal3Name]})));case 22:case"end":return e.stop()}}),e)})))()},methods:{cleanData:function(){this.categroyVal1="",this.categroyVal2="",this.categroyVal3="",this.$emit("CateId",0)},init:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCategoryInfo(0);case 2:t.categroyList1=t.categroyData;case 3:case"end":return e.stop()}}),e)})))()},handleChange01:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCategoryInfo(t.categroyVal1);case 2:t.categroyList2=t.categroyData,t.isAll?(a=t.categroyList1.find((function(e){return e.id==t.categroyVal1})),t.categroyVal1Name=a?a.cat_name:"",t.$emit("CateId",{id:t.categroyVal1,name:[t.categroyVal1Name]})):t.$emit("CateId",t.categroyVal1);case 4:case"end":return e.stop()}}),e)})))()},handleChange02:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCategoryInfo(t.categroyVal2);case 2:t.categroyList3=t.categroyData,t.isAll?(a=t.categroyList2.find((function(e){return e.id==t.categroyVal2})),t.categroyVal2Name=a.cat_name,t.$emit("CateId",{id:t.categroyVal2,name:[t.categroyVal1Name,t.categroyVal2Name]})):t.$emit("CateId",t.categroyVal2);case 4:case"end":return e.stop()}}),e)})))()},handleChange03:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAll?(a=t.categroyList3.find((function(e){return e.id==t.categroyVal3})),t.categroyVal3Name=a.cat_name,t.$emit("CateId",{id:t.categroyVal3,name:[t.categroyVal1Name,t.categroyVal2Name,t.categroyVal3Name]})):t.$emit("CateId",t.categroyVal3);case 1:case"end":return e.stop()}}),e)})))()},getCategoryInfo:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s="",a.prev=1,a.next=4,e.$commodityService.getCategoryInfo(t);case 4:s=a.sent,i=JSON.parse(s),200===i.status_code?e.categroyData=i.data:e.$message.error(i.message),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),e.$message.error("产品中心类目获取失败");case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()}}}),c=r,o=(a("a250"),a("2877")),l=Object(o["a"])(c,s,i,!1,null,"4694c14b",null);e["a"]=l.exports},"46d6":function(t,e,a){},"8a6b":function(t,e,a){"use strict";a("bb45")},"9d17":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-center"},[a("div",{staticClass:"selectBox"},[a("div",{staticClass:"select-row"},[a("div",{staticClass:"item-box"},[a("span",{staticStyle:{width:"80px"}},[t._v("商品创建时间:")]),a("el-date-picker",{staticStyle:{width:"220px"},attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.returnCreateTime,callback:function(e){t.$set(t.form,"returnCreateTime",e)},expression:"form.returnCreateTime"}})],1),a("div",{staticClass:"item-box"},[a("product-choose",{ref:"isClean",staticClass:"mar-left",on:{CateId:t.CateId}})],1),a("div",{staticClass:"item-box mar-left"},[a("span",[t._v("商品状态：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.form.returnStatus,callback:function(e){t.$set(t.form,"returnStatus",e)},expression:"form.returnStatus"}},[a("el-option",{attrs:{label:"全部",value:-1}}),t._l(t.returnStatusList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1)]),a("div",{staticClass:"select-row"},[a("div",{staticClass:"item-box"},[a("span",{staticStyle:{width:"80px"}},[t._v("商品更新时间:")]),a("el-date-picker",{staticStyle:{width:"220px"},attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.returnUpdateTime,callback:function(e){t.$set(t.form,"returnUpdateTime",e)},expression:"form.returnUpdateTime"}})],1),a("div",{staticClass:"item-box"},[a("span",{staticClass:"mar-left"},[t._v("Sku编码：")]),a("el-input",{staticStyle:{width:"178px"},attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:t.form.returnSkuId,callback:function(e){t.$set(t.form,"returnSkuId",e)},expression:"form.returnSkuId"}})],1),a("div",{staticClass:"item-box"},[a("span",[t._v("商品名称：")]),a("el-input",{staticStyle:{width:"178px"},attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:t.form.returnGoodsName,callback:function(e){t.$set(t.form,"returnGoodsName",e)},expression:"form.returnGoodsName"}})],1),a("div",{staticClass:"item-box"},[a("span",[t._v("商品ID：")]),a("el-input",{staticStyle:{width:"178px"},attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:t.form.returnGoodsId,callback:function(e){t.$set(t.form,"returnGoodsId",e)},expression:"form.returnGoodsId"}})],1),a("el-button",{staticClass:"mar-left",attrs:{type:"primary",size:"mini"},on:{click:t.getProductList}},[t._v("查询")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.createVisible=!0}}},[t._v("创建商品")]),a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"margin-left":"20px"},attrs:{accept:".xlsx,.xls","on-change":t.uploadShip,action:"","show-file-list":!1,"auto-upload":!1}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("导入商品")])],1),a("el-button",{staticClass:"mar-left",attrs:{type:"primary",size:"mini"},on:{click:t.downloadTemplate}},[t._v("下载导入模板")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:t.showlog,callback:function(e){t.showlog=e},expression:"showlog"}},[t._v("隐藏日志")])],1)]),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"plTable",attrs:{"header-align":"center",height:"calc(100vh - 183px)",data:t.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"商品ID",width:"100",prop:"product_id",fixed:""}}),a("el-table-column",{attrs:{align:"center",prop:"product_name",label:"商品名称",width:"120","show-overflow-tooltip":""}}),t._e(),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{align:"center",prop:"cate_name",label:"商品类目",width:"200"}}),a("el-table-column",{attrs:{width:"90",align:"center",label:"商品主图"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[s.image_url?a("el-tooltip",{staticStyle:{width:"90px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:s.image_url,width:"400px",height:"280px"}})]),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:s.image_url}})],1):t._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"商品状态",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(0===s.status?"在售":"已下架"))])]}}])}),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"120",align:"center"}}),a("el-table-column",{attrs:{prop:"stock",label:"库存",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"140",align:"center"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间",width:"140",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editGoods(s)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.deleteProduct(s)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,50,100],"page-size":t.pageSize,"current-page":t.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showlog,callback:function(e){t.showlog=e},expression:"showlog"}}),t.createVisible?a("el-dialog",{attrs:{visible:t.createVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1200px"},on:{"update:visible":function(e){t.createVisible=e},close:t.closeDialog}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.activeRow.product_id?"编辑商品":"创建商品"))]),a("div",{staticClass:"create-product-style"},[a("div",{staticClass:"item-box"},[a("span",[t._v("商品名称：")]),a("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini",maxlength:"255","show-word-limit":"",placeholder:"请输入商品名称"},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}})],1),a("div",{staticClass:"item-box mar-top"},[a("product-choose",{ref:"isClean",attrs:{isAll:!0,cataInfo:t.editCateIds},on:{CateId:t.cataInfo}})],1),a("div",{staticClass:"item-box mar-top"},[a("div",{staticClass:"item-box"},[a("span",[t._v("商品状态：")]),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.goodStatus,callback:function(e){t.goodStatus=e},expression:"goodStatus"}},t._l(t.returnStatusList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"item-box mar-left"},[a("span",[t._v("备注：")]),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:t.goodsRemark,callback:function(e){t.goodsRemark=e},expression:"goodsRemark"}})],1)]),a("div",{staticClass:"item-box mar-top"},[a("span",{staticClass:"span-label"}),a("span",[t._v("销售资料")])]),a("el-row",{staticClass:"mar-top"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"sku-box"},[a("span",{staticClass:"sku-title"},[t._v("规格一")]),a("div",{staticClass:"sku-item"},[a("div",{staticClass:"tool-item"},[a("span",[t._v("规格名称")]),a("el-input",{attrs:{placeholder:"",size:"mini",clearable:""},model:{value:t.spec1name,callback:function(e){t.spec1name=e},expression:"spec1name"}})],1),a("div",{staticClass:"tool-item"},[a("span",[t._v("选项")]),a("div",{staticClass:"sku-item-box"},t._l(t.skuSpec1,(function(e,s){return a("div",{key:s+"spec1",staticClass:"sku-Spec"},[a("el-select",{attrs:{placeholder:"",size:"mini",filterable:"","allow-create":!0},on:{change:function(e){return t.sepcInput(e,s)}},model:{value:e.sku_name,callback:function(a){t.$set(e,"sku_name",a)},expression:"item.sku_name"}},t._l(t.skucode,(function(t,e){return a("el-option",{key:e,attrs:{label:t.zh_name,value:t.zh_name}})})),1),e.sku_image?a("div",{staticStyle:{width:"42px",height:"42px"}},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.sku_image},on:{click:function(t){e.sku_image=""}}})],1):a("div",[a("el-upload",{staticClass:"sku-image-uploader",attrs:{action:"#","show-file-list":!1,"on-progress":t.successFile}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(e){return t.setImgFlag("sku",s)}}})])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.deleteSpec1(s)}}},[t._v("删除")])],1)})),0)]),a("div",{staticClass:"tool-item"},[a("span"),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"mini"},on:{click:t.addSpec1}},[t._v("添加选项")])],1)])])]),a("el-col",{staticClass:"mar-left",attrs:{span:8}},[a("div",{staticClass:"sku-box"},[a("div",{staticClass:"sku-title"},[a("el-checkbox",{model:{value:t.skuSecondCheck,callback:function(e){t.skuSecondCheck=e},expression:"skuSecondCheck"}},[t._v("规格二")])],1),a("div",{staticClass:"sku-item"},[a("div",{staticClass:"tool-item"},[a("span",[t._v("规格名称")]),a("el-input",{attrs:{placeholder:"",size:"mini",clearable:"",disabled:!t.skuSecondCheck},model:{value:t.spec2name,callback:function(e){t.spec2name=e},expression:"spec2name"}})],1),a("div",{staticClass:"tool-item"},[a("span",[t._v("选项")]),a("div",{staticClass:"sku-item-box"},t._l(t.skuSpec2,(function(e,s){return a("div",{key:s+"spec2",staticClass:"sku-Spec"},[a("el-select",{attrs:{placeholder:"",size:"mini",filterable:"","allow-create":!0},on:{change:function(e){return t.sepcInput(e,s)}},model:{value:e.sku_name,callback:function(a){t.$set(e,"sku_name",a)},expression:"item.sku_name"}},t._l(t.skucode,(function(t,e){return a("el-option",{key:e,attrs:{label:t.zh_name,value:t.zh_name}})})),1),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.skuSecondCheck},on:{click:function(e){return t.deleteSpec2(s)}}},[t._v("删除")])],1)})),0)]),a("div",{staticClass:"tool-item"},[a("span"),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"mini",disabled:!t.skuSecondCheck},on:{click:t.addSpec2}},[t._v("添加选项")])],1)])])])],1),a("el-row",{staticClass:"item-box mar-top"},[a("span",[t._v("规格资讯")]),a("div",{staticClass:"item-box"},[a("span",[t._v("商品价格")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsPrice,callback:function(e){t.goodsPrice=e},expression:"goodsPrice"}})],1),a("div",{staticClass:"item-box mar-left"},[a("span",[t._v("商品数量")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsNum,callback:function(e){t.goodsNum=e},expression:"goodsNum"}})],1),a("div",{staticClass:"item-box mar-left"},[a("span",[t._v("商品货号")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsNo,callback:function(e){t.goodsNo=e},expression:"goodsNo"}})],1),a("el-button",{staticClass:"mar-left",attrs:{size:"mini",type:"primary"},on:{click:t.batchChangeSku}},[t._v("批量更新")])],1),a("div",{staticClass:"item-box mar-top"},[a("el-table",{ref:"skuTable",attrs:{data:t.skuList,"tooltip-effect":"dark",height:"280"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{width:"120px",label:"规格一",prop:"sku_name1",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sku_name1))]}}],null,!1,2368132985)}),a("el-table-column",{attrs:{width:"120px",label:"规格二",prop:"sku_name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sku_name2))]}}],null,!1,378117809)}),a("el-table-column",{attrs:{width:"120px",label:"库存",prop:"stock_num",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:e.row.stock_num,callback:function(a){t.$set(e.row,"stock_num",a)},expression:"scope.row.stock_num"}})]}}],null,!1,1744286777)}),a("el-table-column",{attrs:{width:"120px",label:"价格",prop:"sku_price",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:e.row.sku_price,callback:function(a){t.$set(e.row,"sku_price",a)},expression:"scope.row.sku_price"}})]}}],null,!1,4221989615)}),a("el-table-column",{attrs:{"min-width":"60px",label:"规格图",prop:"sku_image",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"42px",height:"42px"},attrs:{src:t.row.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])]}}],null,!1,3697054959)}),a("el-table-column",{attrs:{width:"140px",label:"商品货号",prop:"sku_name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sku_no))]}}],null,!1,589538542)})],1)],1),a("div",{staticClass:"item-box mar-top"},[a("span",{staticClass:"span-label"}),a("span",[t._v("媒体管理")])]),a("div",{staticClass:"item-box mar-top"},[a("span",[t._v("轮播图片")]),a("div",{staticClass:"img-box"},[t._l(t.slideImageList,(function(e,s){return a("div",{key:s,staticClass:"image-item"},[a("img",{attrs:{src:e}}),a("div",{staticClass:"form-item"},[a("div",{staticClass:"btn2",on:{click:function(e){return t.replaceImage("slide",s)}}},[t._v("替换")]),a("div",{staticClass:"btn2",on:{click:function(e){return t.deleteImage("slide",s)}}},[t._v("删除")])])])})),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-progress":t.successFile}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(e){return t.setImgFlag("slide")}}})])],2)]),a("div",{staticClass:"item-box mar-top"},[a("span",[t._v("详情图片")]),a("div",{staticClass:"img-box"},[t._l(t.detailImageList,(function(e,s){return a("div",{key:s,staticClass:"image-item"},[a("img",{attrs:{src:e}}),a("div",{staticClass:"form-item"},[a("div",{staticClass:"btn2",on:{click:function(e){return t.replaceImage("detail",s)}}},[t._v("替换")]),a("div",{staticClass:"btn2",on:{click:function(e){return t.deleteImage("detail",s)}}},[t._v("删除")])])])})),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-progress":t.successFile}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(e){return t.setImgFlag("detail")}}})])],2)]),a("div",{staticClass:"item-box mar-top"},[a("span",[t._v("尺寸图片")]),a("div",{staticClass:"img-box"},[t._l(t.sizeImageList,(function(e,s){return a("div",{key:s,staticClass:"image-item"},[a("img",{attrs:{src:e}}),a("div",{staticClass:"form-item"},[a("div",{staticClass:"btn2",on:{click:function(e){return t.replaceImage("size",s)}}},[t._v("替换")]),a("div",{staticClass:"btn2",on:{click:function(e){return t.deleteImage("size",s)}}},[t._v("删除")])])])})),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-progress":t.successFile}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(e){return t.setImgFlag("size")}}})])],2)]),a("div",{staticClass:"item-box mar-top"},[a("span",{staticClass:"span-label"}),a("p",[t._v("出库及配送相关")])]),a("div",{staticClass:"item-box mar-top"},[a("span",[t._v("商品重量")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsWeight,callback:function(e){t.goodsWeight=e},expression:"goodsWeight"}}),t._v("kg "),a("div",{staticClass:"mar-left"},[t._v("长"),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsLength,callback:function(e){t.goodsLength=e},expression:"goodsLength"}}),t._v("cm")],1),a("div",{staticClass:"mar-left"},[t._v("宽"),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsWidth,callback:function(e){t.goodsWidth=e},expression:"goodsWidth"}}),t._v("cm")],1),a("div",{staticClass:"mar-left"},[t._v("高"),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.goodsHeight,callback:function(e){t.goodsHeight=e},expression:"goodsHeight"}}),t._v("cm")],1)],1),a("div",{staticClass:"item-box mar-top"},[a("span",{staticClass:"span-label"}),a("p",[t._v("出库及配送相关")])]),a("div",{staticClass:"item-box mar-top"},[a("span",[t._v("商品描述")]),a("el-input",{attrs:{type:"textarea",resize:"none",rows:10,clearable:"",size:"mini"},model:{value:t.goodsDes,callback:function(e){t.goodsDes=e},expression:"goodsDes"}})],1),a("div",{staticClass:"item-box mar-top",staticStyle:{"justify-content":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.saveProduct}},[t._v("保 存")])],1)],1)]):t._e()],1)},i=[],n=a("1da1"),r=(a("96cf"),a("a9e3"),a("99af"),a("3ca3"),a("ddb0"),a("159b"),a("ac1f"),a("1276"),a("b0c0"),a("c740"),a("4e82"),a("d81d"),a("4de4"),a("a15b"),a("a434"),a("7db0"),a("0695")),c=a("0e0b"),o=a("1146"),l=a.n(o),u={components:{ProductChoose:r["a"]},data:function(){return{form:{returnCreateTime:[(new Date).getTime()-2592e6,new Date],returnCategory:"",returnStatus:-1,returnUpdateTime:[],returnSkuId:"",returnGoodsName:"",returnGoodsId:""},showlog:!0,tableLoading:!1,multipleSelection:[],tableData:[],pageSize:20,currentPage:1,total:0,returnStatusList:[{value:0,label:"在售"},{value:1,label:"已下架"}],createVisible:!1,goodsName:"",goodStatus:0,goodsRemark:"",skuSecondCheck:!1,spec1name:"规格一",spec2name:"规格二",goodsPrice:"",goodsNum:"",goodsNo:"",slideImageList:[],detailImageList:[],sizeImageList:[],goodsWeight:0,goodsLength:0,goodsWidth:0,goodsHeight:0,goodsDes:"",imgFlage:"",skuSpec1:[],skuSpec2:[],skuList:[],skuImgIndex:0,skuListCopy:[],skucode:[],spec1:"",createCateInfo:{},activeRow:{},editCateIds:[],demonstration:[{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"SB",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"R",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"PD",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"DGR",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"PU",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"B",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"BL",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"},{goodsname:"导入测试鞋子类目",skuid:438,goodsweight:1,goodsvolume:"2 * 2 * 2",Details:"详情信息选填",status:1,Specifications1:"Y",Specifications2:"",Specificationsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",skuprice:19,skunum:222,Rotationimg:"http://pkg.91cyt.com/tmp/1638518612974.png",Detailsimg:"http://pkg.91cyt.com/tmp/1638518612974.png",sizeimg:"http://pkg.91cyt.com/tmp/1638518612974.png"}],excelImportData:[]}},mounted:function(){this.getProductList(),this.getskucode()},methods:{filterSelect:function(t,e,a){this[a][e].sku_name=t},exportData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i,n,r,c,o,l,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=[],!t.multipleSelection.length){e.next=5;break}a=t.multipleSelection,e.next=33;break;case 5:return s=t.form.returnCreateTime.length?"".concat(t.$dayjs(t.form.returnCreateTime[0]).format("YYYY-MM-DD HH:mm:ss")):"",i=t.form.returnCreateTime.length?"".concat(t.$dayjs(t.form.returnCreateTime[1]).format("YYYY-MM-DD HH:mm:ss")):"",n=t.form.returnUpdateTime.length?"".concat(t.$dayjs(t.form.returnUpdateTime[0]).format("YYYY-MM-DD HH:mm:ss")):"",r=t.form.returnUpdateTime.length?"".concat(t.$dayjs(t.form.returnUpdateTime[1]).format("YYYY-MM-DD HH:mm:ss")):"",c={CateId:Number(t.form.returnCategory),ProductName:t.form.returnGoodsName,ProductId:t.form.returnGoodsId,SkuId:t.form.returnSkuId,Status:t.form.returnStatus,StartTime:s,EndTime:i,UpdateStartTime:n,UpdateEndTime:r},c["page"]=t.currentPage,c["page_size"]=t.pageSize,t.tableLoading=!0,e.next=15,t.$commodityService.getProductList(c);case 15:o=e.sent,l=o&&JSON.parse(o),u=l&&l.status_code?l.data.data:[];case 18:if(!u.length){e.next=32;break}if(a=a.concat(u),!(u.length<t.pageSize)){e.next=24;break}u=[],e.next=30;break;case 24:return c["page"]++,e.next=27,t.$commodityService.getProductList(c);case 27:d=e.sent,p=d&&JSON.parse(d),u=p&&p.status_code?p.data.data:[];case 30:e.next=18;break;case 32:t.tableLoading=!1;case 33:t.exportDetail(a);case 34:case"end":return e.stop()}}),e)})))()},exportDetail:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.length){a.next=2;break}return a.abrupt("return",e.$message.warning("没有可导出的数据！"));case 2:s="<tr>\n        <td>商品ID</td>\n        <td>商品名称</td>\n        <td>商品类目</td>\n        <td>商品主图</td>\n        <td>SKU名称</td>\n        <td>颜色</td>\n        <td>尺寸</td>\n        <td>长</td>\n        <td>宽</td>\n        <td>高</td>\n        <td>重量</td>\n        <td>商品状态</td>\n        <td>价格</td>\n        <td>库存</td>\n        <td>备注</td>\n        <td>创建时间</td>\n        <td>更新时间</td>\n    </tr>",i=regeneratorRuntime.mark((function a(i){var n,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t[i],a.next=3,e.$commodityService.getdetails({priductid:n.product_id,language:""});case 3:r=a.sent,c=r&&JSON.parse(r),200===c.status_code&&(n=c.data),n.sku_list&&n.sku_list.length?n.sku_list.forEach((function(t){s+="<tr><td>".concat(n.product_id?n.product_id:"\t","</td>\n                    <td>").concat(n.product_name?n.product_name:"\t","</td>\n                    <td>").concat(n.cate_name?n.cate_name:"\t","</td>\n                    <td>").concat(n.image_url?n.image_url:"\t","</td>\n                    <td>").concat(t.Sku_name?t.Sku_name:"\t","</td>\n                    <td>").concat(t.Sku_spec.length?t.Sku_spec[0].Spec_value:"\t","</td>\n                    <td>").concat(2==t.Sku_spec.length?t.Sku_spec[1].Spec_value:"\t","</td>\n                    <td>").concat(n.volume&&n.volume.split("*")[0]?n.volume.split("*")[0]:"\t","</td>\n                    <td>").concat(n.volume&&n.volume.split("*")[1]?n.volume.split("*")[1]:"\t","</td>\n                    <td>").concat(n.volume&&n.volume.split("*")[2]?n.volume.split("*")[2]:"\t","</td>\n                    <td>").concat(n.weight?n.weight:"\t","</td>\n                    <td>").concat(0===n.status?"在售":"已下架\t","</td>\n                     <td>").concat(t.Price?t.Price:"\t","</td>\n                     <td>").concat(t.Stock?t.Stock:"\t","</td>\n                     <td>").concat(n.created_at?n.created_at:"\t","</td>\n                     <td>").concat(n.updated_at?n.updated_at:"\t","</td>\n                </tr>")})):s+="<tr><td>".concat(n.product_id?n.product_id:"\t","</td>\n                    <td>").concat(n.product_name?n.product_name:"\t","</td>\n                    <td>").concat(n.cate_name?n.cate_name:"\t","</td>\n                    <td>").concat(n.image_url?n.image_url:"\t","</td>\n                    <td>").concat("\t","</td>\n                    <td>").concat("\t","</td>\n                    <td>").concat("\t","</td>\n                    <td>").concat(n.volume&&n.volume.split("*")[0]?n.volume.split("*")[0]:"\t","</td>\n                    <td>").concat(n.volume&&n.volume.split("*")[1]?n.volume.split("*")[1]:"\t","</td>\n                    <td>").concat(n.volume&&n.volume.split("*")[2]?n.volume.split("*")[2]:"\t","</td>\n                    <td>").concat(n.weight?n.weight:"\t","</td>\n                    <td>").concat(0===n.status?"在售":"已下架\t","</td>\n                     <td>").concat(n.price?n.price:"\t","</td>\n                     <td>").concat(n.stock?n.stock:"\t","</td>\n                     <td>").concat(n.created_at?n.created_at:"\t","</td>\n                     <td>").concat(n.updated_at?n.updated_at:"\t","</td>\n                </tr>");case 7:case"end":return a.stop()}}),a)})),n=0;case 5:if(!(n<t.length)){a.next=10;break}return a.delegateYield(i(n),"t0",7);case 7:n++,a.next=5;break;case 10:Object(c["i"])("产品中心数据",s);case 11:case"end":return a.stop()}}),a)})))()},uploadShip:function(t,e){var a={0:t.raw};this.readExcel(a)},readExcel:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.showlog=!1,e.$refs.Logs.writeLog("读取文件开始",!0),!(t.length<=0)){a.next=6;break}return a.abrupt("return",!1);case 6:if(/\.(xls|xlsx)$/.test(t[0].name.toLowerCase())){a.next=9;break}return e.$message.error("上传格式不正确，请上传xls或者xlsx格式"),a.abrupt("return",!1);case 9:s=new FileReader,s.onload=function(t){try{var a=t.target.result,s=l.a.read(a,{type:"binary"}),i=s.SheetNames[0],r=l.a.utils.sheet_to_json(s.Sheets[i]),c=r,o=c.length;if(0===o)return void e.$message.error("导入信息不能为空");var u=[];c.forEach(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,n,r,c,o,l,d,p,m,g,k,h,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e["商品名称(必填)"],s=e["商品类目ID(必填，请复制程序中的类目ID,可在类目窗口进行选择)"],i=e["商品净重(kg)(选填)"],n=e["商品体积(cm)(选填，格式 长*宽*高)"],r=e["详情信息(选填)"],c=e["商品状态(必填)"],o=e["规格一(必填，一行一个)"],l=e["规格二(选填，一行一个)"],d=e["规格图(必填，一行一张)"],p=e["SKU价格(必填，一行一个价格)"],m=e["SKU库存(必填，一行一个库存)"],g=e["轮播图(选填，同一商品名称，只需要填写一次，使用英文逗号隔开(','),默认第一张为主图)"],k=e["详情图片(选填，同一商品名称，只需要填写一次，使用英文逗号隔开(','))"],h=e["尺寸图片(选填，同一商品名称，只需要填写一次，使用英文逗号隔开(','))"],a&&s&&o&&d&&(f={productName:a,cateId:s,productWeight:i,productVolume:n,productDesc:r,productStatus:c,spec1:o,spec2:l,skuImage:d,skuPrice:p,skuStock:m,slideImage:g,detailImage:k,sizeImage:h},u.push(f));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.dealWithExcelData(u)}catch(d){}},s.readAsBinaryString(t[0]);case 12:case"end":return a.stop()}}),a)})))()},dealWithExcelData:function(t){for(var e=this,a=function(a){var s=t[a],i=e.excelImportData.findIndex((function(t){return t.productName===s.productName}));if(i<0){var n={sku_name:s.spec1,sku_image:s.skuImage,sku_price:s.skuPrice,sku_stock:s.skuStock},r=[n],c=[];if(s.spec2){var o={sku_name:s.spec2};c=[o]}var l={productName:s.productName,productVolume:s.productVolume,productDesc:s.productDesc,productStatus:s.productStatus,cateId:s.cateId,specList1:r,specList2:c,slideImage:s.slideImage?s.slideImage.split(","):[],detailImage:s.detailImage?s.detailImage.split(","):[],sizeImage:s.sizeImage?s.sizeImage.split(","):[]};e.excelImportData.push(l)}else{var u=e.excelImportData[i],d=u.specList1.findIndex((function(t){return t.sku_name==s.spec1}));if(d<0){var p={sku_name:s.spec1,sku_image:s.skuImage,sku_price:s.skuPrice,sku_stock:s.skuStock};e.excelImportData[i].specList1.push(p)}if(s.spec2){var m=u.specList2.findIndex((function(t){return t.sku_name==s.spec2}));if(m<0){var g={sku_name:s.spec2};e.excelImportData[i].specList2.push(g)}}}},s=0;s<t.length;s++)a(s);this.$refs.Logs.writeLog("共导入有效商品【".concat(this.excelImportData.length,"】条，开始创建商品"),!0),this.createImportProduct(this.excelImportData)},createImportProduct:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=regeneratorRuntime.mark((function a(s){var i,n,r,c,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t[s],i.specList1=i.specList1.sort((function(t,e){return t.sku_price-e.sku_price})),n=[],r=0,i.specList1.length>0&&0==i.specList2.length?i.specList1.forEach((function(t){r+=t.sku_stock;var e={spec_id:"999",spec_name:"规格一",spec_value:t.sku_name},a=[e],s={sku_id:null,sku_name:t.sku_name,price:t.sku_price,market_price:null,cost_price:null,image_url:t.sku_image,out_sku_id:"",stock:t.sku_stock,available_stock:null,weight:null,volume:null,purchase_platform_id:null,purchase_goods_id:null,purchase_goods_url:null,sort:"0",status:"1",sku_spec:a};n.push(s)})):i.specList1.length>0&&i.specList2.length>0&&i.specList1.forEach((function(t){r+=t.sku_stock,i.specList2.forEach((function(e){var a={spec_id:"999",spec_name:"规格一",spec_value:t.sku_name},s={spec_id:"999",spec_name:"规格二",spec_value:e.sku_name},i=[a,s],r={sku_id:null,sku_name:t.sku_name+"/"+e.sku_name,price:t.sku_price,market_price:null,cost_price:null,image_url:t.sku_image,out_sku_id:"",stock:t.sku_stock,available_stock:null,weight:null,volume:null,purchase_platform_id:null,purchase_goods_id:null,purchase_goods_url:null,sort:"0",status:"1",sku_spec:i};n.push(r)}))})),c={product_id:(new Date).getTime(),product_name:i.productName,cate_id:i.cateId,cate_name:"",brand_id:"0",goods_type:i.productStatus,price:i.specList1[0].sku_price,market_price:null,cost_price:null,product_url:null,image_url:i.specList1[0].sku_image,out_product_id:null,stock:r,available_stock:null,weight:i.productWeight,volume:"",unit:null,remark:"",sort:null,audit_status:null,status:"1",product_desc:i.productDesc,sku_list:n,detail_gallery:i.detailImage,carousel_gallery:i.slideImage,size_gallery:i.sizeImage},a.next=8,e.$commodityService.saveProduct(c);case 8:o=a.sent,l=JSON.parse(o),200===l.status_code?(s===t.length-1&&(e.getProductList(),e.$refs.Logs.writeLog("导入商品结束",!0)),e.$refs.Logs.writeLog("创建商品【".concat(i.productName,"】,成功"),!0)):e.$refs.Logs.writeLog("创建商品【".concat(i.productName,"】失败"),!1);case 11:case"end":return a.stop()}}),a)})),i=0;case 2:if(!(i<t.length)){a.next=7;break}return a.delegateYield(s(i),"t0",4);case 4:i++,a.next=2;break;case 7:case"end":return a.stop()}}),a)})))()},downloadTemplate:function(){var t='<tr>\n      <td style="width: 200px; text-align:left;">商品名称<span style="color:red">(必填)</span></td>\n      <td style="width: 200px; text-align:left;">商品类目ID<span style="color:red">(必填，请复制程序中的类目ID,可在类目窗口进行选择)</span></td>\n      <td style="width: 200px; text-align:left;">商品净重(kg)<span style="color:red">(选填)</span></td>\n      <td style="width: 200px; text-align:left;">商品体积(cm)<span style="color:red">(选填，格式 长*宽*高)</span></td>\n      <td style="width: 200px; text-align:left;">详情信息<span style="color:red">(选填)</span></td>\n      <td style="width: 200px; text-align:left;">商品状态<span style="color:red">(必填)</span></td>\n      <td style="width: 200px; text-align:left;">规格一<span style="color:red">(必填，一行一个)</span></td>\n      <td style="width: 200px; text-align:left;">规格二<span style="color:red">(选填，一行一个)</span></td>\n      <td style="width: 200px; text-align:left;">规格图<span style="color:red">(必填，一行一张)</span></td>\n      <td style="width: 200px; text-align:left;">SKU价格<span style="color:red">(必填，一行一个价格)</span></td>\n      <td style="width: 200px; text-align:left;">SKU库存<span style="color:red">(必填，一行一个库存)</span></td>\n      <td style="width: 200px; text-align:left;">轮播图<span style="color:red">(选填，同一商品名称，只需要填写一次，使用英文逗号隔开(\',\'),默认第一张为主图)</span></td>\n      <td style="width: 200px; text-align:left;">详情图片<span style="color:red">(选填，同一商品名称，只需要填写一次，使用英文逗号隔开(\',\'))</span></td>\n      <td style="width: 200px; text-align:left;">尺寸图片<span style="color:red">(选填，同一商品名称，只需要填写一次，使用英文逗号隔开(\',\'))</span></td>\n      </tr>';this.demonstration.map((function(e){t+='\n        <tr>\n          <td style="text-align:left;">'.concat(e.goodsname,'</td>\n          <td style="text-align:left;">').concat(e.skuid,'</td>\n          <td style="text-align:left;">').concat(e.goodsweight||"",'</td>\n          <td style="text-align:left;">').concat(e.goodsvolume||"",'</td>\n          <td style="text-align:left;">').concat(e.Details||"",'</td>\n          <td style="text-align:left;">').concat(e.status,'</td>\n          <td style="text-align:left;">').concat(e.Specifications1,'</td>\n          <td style="text-align:left;">').concat(e.Specifications2||"",'</td>\n          <td style="text-align:left;">').concat(e.Specificationsimg,'</td>\n          <td style="text-align:left;">').concat(e.skuprice,'</td>\n          <td style="text-align:left;">').concat(e.skunum,'</td>\n          <td style="text-align:left;">').concat(e.Rotationimg||"",'</td>\n          <td style="text-align:left;">').concat(e.Detailsimg||"",'</td>\n          <td style="text-align:left;">').concat(e.sizeimg||"","</td>\n        </tr>\n        ")})),Object(c["i"])("自有商品模板",t)},deleteProduct:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$confirm("此操作将删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$commodityService.delgoods({productId:t.product_id,productUid:t.uid});case 2:s=a.sent,s=JSON.parse(s),200===s.status_code?(e.$message.success("删除成功"),e.$refs.Logs.writeLog("删除商品成功",!0)):(e.$message.error("删除失败".concat(s.message)),e.$refs.Logs.writeLog("删除商品失败",!1)),e.getProductList();case 6:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},editGoods:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.activeRow=t,a.next=3,e.$commodityService.getdetails({priductid:t.product_id,language:""});case 3:if(s=a.sent,i=s&&JSON.parse(s),200!==i.status_code){a.next=26;break}i.data.cate.cat_id_1&&(e.editCateIds[0]=i.data.cate.cat_id_1),i.data.cate.cat_id_2&&(e.editCateIds[1]=i.data.cate.cat_id_2),i.data.cate.cat_id_3&&(e.editCateIds[2]=i.data.cate.cat_id_3),e.createVisible=!0,e.goodsName=i.data.product_name,e.goodsRemark=i.data.remark,e.slideImageList=i.data.detail.carousel_gallery,e.detailImageList=i.data.detail.detail_gallery,e.sizeImageList=i.data.detail.size_gallery,e.goodsWeight=i.data.weight,n=i.data.volume.split("*"),e.goodsLength=n.length?n[0]:0,e.goodsWidth=n.length?n[1]:0,e.goodsHeight=n.length?n[2]:0,e.goodsDes=i.data.detail.product_desc,e.goodStatus=i.data.goods_type,i.data.sku_list.forEach((function(t){var a={sku_no:t.Out_sku_id,sku_id:t.Sku_id,id:t.Id,sku_name1:t.Sku_name.split("/")[0],sku_name2:t.Sku_name.split("/")[1]||null,stock_num:t.Stock,sku_price:t.Price,sku_image:t.Image_url};e.dealWithSpec(t.Sku_spec,t.Image_url),e.skuList.push(a)})),e.skuListCopy=JSON.parse(JSON.stringify(e.skuList)),a.next=27;break;case 26:return a.abrupt("return",e.$message.error("获取商品详情失败"));case 27:case"end":return a.stop()}}),a)})))()},dealWithSpec:function(t,e){var a=t||[];if(a.length){this.spec1name=a[0].Spec_Name;var s=this.skuSpec1.findIndex((function(t){return t.sku_name==a[0].Spec_value}));if(s<0){var i={sku_name:a[0].Spec_value,sku_image:e};this.skuSpec1.push(i)}if(a[1]){this.spec2name=a[1].Spec_Name;var n=this.skuSpec2.findIndex((function(t){return t.sku_name==a[1].Spec_value}));if(n<0){var r={sku_name:a[1].Spec_value};this.skuSpec2.push(r)}}}},closeDialog:function(){this.spec1name="规格一",this.spec2name="规格二",this.skuSpec1=[],this.skuSpec2=[],this.goodsPrice="",this.goodsNum="",this.goodsNo="",this.slideImageList=[],this.detailImageList=[],this.sizeImageList=[],this.goodsWeight=0,this.goodsLength=0,this.goodsWidth=0,this.goodsHeight=0,this.goodsDes="",this.skuList=[],this.skuListCopy=[],this.goodsName="",this.goodStatus=0,this.goodsRemark="",this.skuSecondCheck=!1,this.getProductList()},saveProduct:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i,n,r,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.skuList.filter((function(t){return!t.sku_image})),!a.length){e.next=3;break}return e.abrupt("return",t.$message.warning("请上传规格图！"));case 3:return s=t.createCateInfo.name.join(">"),i=0,t.skuList.sort((function(t,e){return t.sku_price-e.sku_price})),n=[],t.skuList.forEach((function(e){i+=Number(e.stock_num);var a={spec_id:"999",spec_name:t.spec1name,spec_value:e.sku_name1},s=[a];if(e.sku_name2){var r={spec_id:"999",spec_name:t.spec2name,spec_value:e.sku_name2};s.push(r)}var c={sku_id:e.sku_id,sku_name:e.sku_name2?"".concat(e.sku_name1,"/").concat(e.sku_name2):e.sku_name1,price:e.sku_price,market_price:null,cost_price:null,image_url:e.sku_image,out_sku_id:e.sku_no,stock:e.stock_num,available_stock:null,weight:null,volume:null,purchase_platform_id:null,purchase_goods_id:null,purchase_goods_url:null,sort:"0",status:"1",sku_spec:s};n.push(c)})),r={product_id:t.activeRow.product_id||(new Date).getTime(),product_name:t.goodsName,cate_id:t.createCateInfo.id,cate_name:s,brand_id:"0",goods_type:t.goodStatus,price:t.skuList[0].sku_price,market_price:null,cost_price:null,product_url:null,image_url:t.slideImageList[0],out_product_id:null,stock:i,available_stock:null,weight:t.goodsWeight,volume:"".concat(t.goodsLength,"*").concat(t.goodsWidth,"*").concat(t.goodsHeight),unit:null,remark:t.goodsRemark,sort:null,audit_status:null,status:"1",product_desc:t.goodsDes,sku_list:n,detail_gallery:t.detailImageList,carousel_gallery:t.slideImageList,size_gallery:t.sizeImageList},e.next=11,t.$commodityService.saveProduct(r);case 11:if(c=e.sent,o=JSON.parse(c),200!==o.status_code){e.next=17;break}return e.abrupt("return",t.$message.success("保存商品成功！"));case 17:return e.abrupt("return",t.$message.error("保存商品失败，".concat(o.message)));case 18:case"end":return e.stop()}}),e)})))()},cataInfo:function(t){this.createCateInfo=t},batchChangeSku:function(){var t=this;this.skuList.forEach((function(e){e.stock_num=t.goodsNum,e.sku_price=t.goodsPrice,e.sku_no=t.goodsNo}))},deleteSpec1:function(t){this.skuSpec1.splice(t,1),this.createSkuList()},deleteSpec2:function(t){this.skuSpec2.splice(t,1),this.createSkuList()},getskucode:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$commodityService.getskucode();case 3:a=e.sent,s=JSON.parse(a),200===s.status_code&&(t.skucode=s.data),e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](0),t.$message.error("获取sku配置失败"),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},sepcInput:function(t,e){var a=this.skuList.find((function(e){return e.sku_name1===t||e.sku_name2===t}));if(a)return this.$message.warning("此规格已存在");this.createSkuList()},addSpec1:function(){var t={sku_name:"",sku_image:""};this.skuSpec1.push(t),this.createSkuList()},addSpec2:function(){var t={sku_name:""};this.skuSpec2.push(t),this.createSkuList()},createSkuList:function(){var t=this;if(this.skuList=[],0===this.skuSpec1.length&&0===this.skuSpec2.length&&(this.skuList=[]),this.skuSpec1.length>0&&0===this.skuSpec2.length&&(this.skuList=this.skuSpec1.map((function(e){var a=t.skuListCopy.find((function(t){return t.sku_name1===e.sku_name}));return a?{sku_no:a.sku_no,sku_id:a.sku_id,id:a.id,sku_name1:a.sku_name1,sku_name2:"",stock_num:a.stock_num,sku_price:a.sku_price,sku_image:e.sku_image,remark:a.remark,created_at:a.created_at}:{sku_no:t.goodsNo,sku_id:null,id:0,sku_name1:e.sku_name,sku_name2:"",stock_num:t.goodsNum,sku_price:t.goodsPrice,sku_image:e.sku_image,remark:"",created_at:null}}))),0===this.skuSpec1.length&&this.skuSpec2.length>0)return this.$message.warning("规格一必填！");this.skuSpec1.length>0&&this.skuSpec2.length>0&&this.skuSpec1.forEach((function(e){t.skuSpec2.forEach((function(a){var s=t.skuListCopy.find((function(t){return t.sku_name1===e.sku_name&&t.sku_name2===a.sku_name}));s?t.skuList.push({sku_no:s.sku_no,sku_id:s.sku_id,id:s.id,sku_name1:s.sku_name1,sku_name2:s.sku_name2,stock_num:s.stock_num,sku_price:s.sku_price,sku_image:e.sku_image,remark:s.remark,created_at:s.created_at}):t.skuList.push({sku_no:t.goodsNo,sku_id:null,id:0,sku_name1:e.sku_name,sku_name2:a.sku_name,stock_num:t.goodsNum,sku_price:t.goodsPrice,sku_image:e.sku_image,remark:"",created_at:null})}))}))},deleteImage:function(t,e){"slide"===t?this.slideImageList.splice(e,1):"detail"===t?this.detailImageList.splice(e,1):"size"===t&&this.sizeImageList.splice(e,1)},replaceImage:function(t,e){var a=this,s=document.createElement("input");s.type="file",s.onchange=function(){var i=s.files[0],r=new FileReader;r.readAsDataURL(i),r.onload=function(){var s=Object(n["a"])(regeneratorRuntime.mark((function s(i){var n,o,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=r.result,o=Object(c["t"])(!1,32)+"_"+(new Date).getTime(),s.next=4,a.$ossService.uploadFile(n,o);case 4:l=s.sent,"slide"===t?a.$set(a.slideImageList,e,l):"detail"===t?a.$set(a.detailImageList,e,l):"size"===t&&a.$set(a.sizeImageList,e,l);case 6:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()};var i=new MouseEvent("click");s.dispatchEvent(i)},setImgFlag:function(t,e){this.imgFlage=t,this.skuImgIndex=e},successFile:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a,s=e.raw,/\.(jpg|jpeg|png|webp)$/.test(s.name.toLowerCase())){t.next=5;break}return a.$message("上传格式不对,请上传jpg、jpeg、png、webp格式的图片"),t.abrupt("return");case 5:i=new FileReader,i.readAsDataURL(s),i.onload=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.result,s=Object(c["t"])(!1,32)+"_"+(new Date).getTime(),t.next=4,a.$ossService.uploadFile(e,s);case 4:n=t.sent,"slide"===a.imgFlage?a.slideImageList.push(n):"detail"===a.imgFlage?a.detailImageList.push(n):"size"===a.imgFlage?a.sizeImageList.push(n):"sku"===a.imgFlage&&(a.skuSpec1[a.skuImgIndex].sku_image=n,a.createSkuList());case 6:case"end":return t.stop()}}),t)})));case 8:case"end":return t.stop()}}),t)})))()},getProductList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i,n,r,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.form.returnCreateTime.length?"".concat(t.$dayjs(t.form.returnCreateTime[0]).format("YYYY-MM-DD HH:mm:ss")):"",s=t.form.returnCreateTime.length?"".concat(t.$dayjs(t.form.returnCreateTime[1]).format("YYYY-MM-DD HH:mm:ss")):"",i=t.form.returnUpdateTime.length?"".concat(t.$dayjs(t.form.returnUpdateTime[0]).format("YYYY-MM-DD HH:mm:ss")):"",n=t.form.returnUpdateTime.length?"".concat(t.$dayjs(t.form.returnUpdateTime[1]).format("YYYY-MM-DD HH:mm:ss")):"",r={CateId:Number(t.form.returnCategory),ProductName:t.form.returnGoodsName,ProductId:t.form.returnGoodsId,SkuId:t.form.returnSkuId,Status:t.form.returnStatus,StartTime:a,EndTime:s,UpdateStartTime:i,UpdateEndTime:n},r["page"]=t.currentPage,r["page_size"]=t.pageSize,t.tableLoading=!0,e.next=10,t.$commodityService.getProductList(r);case 10:if(c=e.sent,o=c&&JSON.parse(c),!o||200!==o.status_code){e.next=17;break}t.total=o.data.total,t.tableData=o.data.data,e.next=19;break;case 17:return t.tableLoading=!1,e.abrupt("return",t.$message.warning("查询失败，".concat(o.message)));case 19:t.tableLoading=!1;case 20:case"end":return e.stop()}}),e)})))()},CateId:function(t){this.form.returnCategory=t},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.currentPage=t},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t}}},d=u,p=(a("8a6b"),a("2877")),m=Object(p["a"])(d,s,i,!1,null,"f19c5408",null);e["default"]=m.exports},a250:function(t,e,a){"use strict";a("46d6")},bb45:function(t,e,a){}}]);