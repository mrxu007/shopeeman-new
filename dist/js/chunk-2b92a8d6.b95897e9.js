(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b92a8d6"],{"30be":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"contaniner"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"自动回复",name:"autoReply"}},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"header-top"},[a("storeChoose",{staticStyle:{"margin-bottom":"10px"},attrs:{source:"autoReply"},on:{changeMallList:t.changeMallList}}),a("el-col",{staticClass:"header-two-top",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.autoReplyVisible=!0,t.autoReplyTitle="批量设置自动回复内容"}}},[t._v(" 批量设置预设自动回复 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSetAutoReply(1,"",1)}}},[t._v("批量开启预设自动回复")]),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSetAutoReply(0,"",1)}}},[t._v("批量关闭预设自动回复")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.autoReplyVisible=!0,t.autoReplyTitle="批量设置离线回复内容"}}},[t._v(" 批量设置离线自动回复 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSetAutoReply(1)}}},[t._v("批量开启离线自动回复")]),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSetAutoReply(0)}}},[t._v("批量关闭离线自动回复")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchAutoReplyTable}},[t._v("搜索")]),a("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.autoReplyShowConsole,callback:function(e){t.autoReplyShowConsole=e},expression:"autoReplyShowConsole"}},[t._v("隐藏日志")])],1)],1)],1),a("el-row",{staticClass:"article"},[a("el-col",{attrs:{span:t.isShowLog?20:24}},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.autoReplyLoad,expression:"autoReplyLoad"}],ref:"tableAutoReply",attrs:{height:t.height,data:t.tableDataAutoReply,"use-virtual":"","data-changes-scroll-top":!1,"row-height":t.rowHeight,border:!1},on:{"selection-change":t.handleSelectionChange1,"table-body-scroll":t.tableScroll}},[a("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),a("u-table-column",{attrs:{align:"left",type:"index",label:"序列号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"店铺名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"预设自动回复"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"reply_setting"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(a){return a.stopPropagation(),t.setAutoReply(e.row)}},model:{value:e.row.auto_reply_status,callback:function(a){t.$set(e.row,"auto_reply_status",a)},expression:"scope.row.auto_reply_status"}}),a("div",{staticClass:"reply_content"},[t._v(" "+t._s(e.row.auto_reply_content)+" ")])],1)]}}])}),a("u-table-column",{attrs:{align:"left",label:"离线自动回复"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"reply_setting"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(a){return a.stopPropagation(),t.setOfflineReply(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}}),a("div",{staticClass:"reply_content"},[t._v(" "+t._s(e.row.content)+" ")])],1)]}}])})],1)],1),t.isShowLog?a("el-col",{attrs:{span:4}},[a("div",{staticClass:"log-show",style:"height:"+t.height+"px"})]):t._e()],1),a("Logs",{ref:"autoReplyLogs",attrs:{clear:""},model:{value:t.autoReplyShowConsole,callback:function(e){t.autoReplyShowConsole=e},expression:"autoReplyShowConsole"}})],1),a("el-tab-pane",{attrs:{label:"常见问题助理",name:"FAQAssistant"}},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"header-top"},[a("storeChoose",{staticStyle:{"margin-bottom":"10px"},attrs:{source:"FAQAssistant"},on:{changeMallList:t.changeMallList}}),a("el-col",{staticClass:"header-two-top",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allFaqsShopSettings(1,1)}}},[t._v("批量开启")]),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allFaqsShopSettings(0,1)}}},[t._v("批量关闭")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.updateFaqsShop("批量添加常见问题")}}},[t._v(" 批量添加常见问题 ")]),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allFaqsShopSettings()}}},[t._v("批量删除常见问题")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.scFaqsTable}},[t._v("搜索")]),a("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.FAQAssistantShowConsole,callback:function(e){t.FAQAssistantShowConsole=e},expression:"FAQAssistantShowConsole"}},[t._v("隐藏日志")])],1)],1)],1),a("el-row",{staticClass:"article"},[a("el-col",{attrs:{span:t.isShowLog?20:24}},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.FAQAssistantLoad,expression:"FAQAssistantLoad"}],ref:"FAQAssistant",attrs:{height:t.height,"use-virtual":"","data-changes-scroll-top":!1,"row-height":t.rowHeight,data:t.tableDataFAQAssistant,border:!1},on:{"selection-change":t.handleSelectionChange2,"table-body-scroll":t.tableScroll}},[a("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),a("u-table-column",{attrs:{align:"left",type:"index",label:"序列号",width:"80"}}),a("u-table-column",{attrs:{align:"left",label:"店铺名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"分组名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.group_name)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"问候语",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.greeting_content)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"常见问题助理",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(a){return a.stopPropagation(),t.setFaqsShopSettings(e.row)}},model:{value:e.row.faq_status,callback:function(a){t.$set(e.row,"faq_status",a)},expression:"scope.row.faq_status"}})]}}])}),a("u-table-column",{attrs:{align:"left",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.updateFaqsShop("编辑常见问题",e.row)}}},[t._v("编辑 ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.deleteFaqsShopSettings(e.row)}}},[t._v("删除")])]}}])})],1)],1),t.isShowLog?a("el-col",{attrs:{span:4}},[a("div",{staticClass:"log-show",style:"height:"+t.height+"px"})]):t._e()],1),a("Logs",{ref:"FAQAssistantLogs",attrs:{clear:""},model:{value:t.FAQAssistantShowConsole,callback:function(e){t.FAQAssistantShowConsole=e},expression:"FAQAssistantShowConsole"}})],1),a("el-tab-pane",{attrs:{label:"讯息快捷",name:"messageQuickly"}},[a("el-row",{staticClass:"header"},[a("el-col",{staticClass:"header-top"},[a("storeChoose",{staticStyle:{"margin-bottom":"10px"},attrs:{source:"messageQuickly"},on:{changeMallList:t.changeMallList}}),a("el-col",{staticClass:"header-two-top",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSwitch_DeleteMessageShortcutsGroups(1,1)}}},[t._v("批量开启 ")]),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSwitch_DeleteMessageShortcutsGroups(0,1)}}},[t._v("批量关闭")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addMessageQuickly()}}},[t._v("批量添加")]),a("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSwitch_DeleteMessageShortcutsGroups()}}},[t._v("批量删除")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.messageShortcutsGroupsTable}},[t._v("搜索")]),a("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.messageQuicklyShowConsole,callback:function(e){t.messageQuicklyShowConsole=e},expression:"messageQuicklyShowConsole"}},[t._v("隐藏日志")])],1)],1)],1),a("el-row",{staticClass:"article"},[a("el-col",{attrs:{span:t.isShowLog?20:24}},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.messageQuicklyLoad,expression:"messageQuicklyLoad"}],ref:"tableMessageQuickly",attrs:{height:t.height,"use-virtual":"",data:t.tableDataMessageQuickly,"data-changes-scroll-top":!1,"row-height":t.rowHeight,border:!1},on:{"selection-change":t.handleSelectionChange3,"table-body-scroll":t.tableScroll}},[a("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),a("u-table-column",{attrs:{align:"left",type:"index",label:"序列号",width:"80"}}),a("u-table-column",{attrs:{align:"left",label:"店铺名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"分组名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),a("u-table-column",{attrs:{align:"left",label:"分组状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(a){return a.stopPropagation(),t.switchMessageShortcutsGroups(e.row)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("u-table-column",{attrs:{align:"left",label:"讯息内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"message_content"},t._l(e.row.message_shortcuts,(function(e){return a("p",{key:e.id,staticClass:"contentP"},[t._v(t._s(e.content))])})),0)]}}])}),a("u-table-column",{attrs:{align:"left",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.updateMessageQuickly(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.deleteMessageShortcutsGroups(e.row)}}},[t._v("删除")])]}}])})],1)],1),t.isShowLog?a("el-col",{attrs:{span:4}},[a("div",{staticClass:"log-show",style:"height:"+t.height+"px"})]):t._e()],1),a("Logs",{ref:"messageQuicklyLogs",attrs:{clear:""},model:{value:t.messageQuicklyShowConsole,callback:function(e){t.messageQuicklyShowConsole=e},expression:"messageQuicklyShowConsole"}})],1)],1),a("div",{staticClass:"autoReply_dialog"},[a("el-dialog",{attrs:{title:t.autoReplyTitle,visible:t.autoReplyVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.autoReplyVisible=e}}},[a("div",[a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"textarea",rows:12,placeholder:"请输入内容",resize:"none"},model:{value:t.autoReplyText,callback:function(e){t.autoReplyText=e},expression:"autoReplyText"}}),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSetAutoReply(-1,t.autoReplyText)}}},[t._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.autoReplyVisible=!1}}},[t._v("取消")])],1)],1)])],1),a("div",{staticClass:"FAQAssistant_dialog"},[a("el-dialog",{attrs:{title:t.FAQAssistantTitle,visible:t.FAQAssistantVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.FAQAssistantVisible=e}}},[t.FAQAssistantAction?a("div",{staticClass:"FAQAssistant_box"},[a("div",{staticClass:"FAQAssistant_title"},[a("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("分组")]),a("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入分组（长度<80）",size:"mini"},model:{value:t.FAQAssistantAction.group_name,callback:function(e){t.$set(t.FAQAssistantAction,"group_name",e)},expression:"FAQAssistantAction.group_name"}})],1),a("div",{staticClass:"FAQAssistant_title"},[a("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("问候语")]),a("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入问候语（长度<80）",size:"mini"},model:{value:t.FAQAssistantAction.greeting_content,callback:function(e){t.$set(t.FAQAssistantAction,"greeting_content",e)},expression:"FAQAssistantAction.greeting_content"}})],1),a("div",{staticClass:"FAQAssistant_content"},t._l(t.FAQAssistantAction.categorys,(function(e,s){return a("div",{key:s,staticClass:"FAQAssistant_item"},[a("div",{staticClass:"item_title"},[a("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("常见问题类型")]),a("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入问题类型（长度<80）",size:"mini"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"item.title"}})],1),a("div",{staticClass:"item_content"},[a("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("内容1")]),a("div",{staticClass:"content_content"},[a("el-input",{attrs:{placeholder:"请输入具体问题（长度<80）",size:"mini"},model:{value:e.questions[0].question,callback:function(a){t.$set(e.questions[0],"question",a)},expression:"item.questions[0].question"}}),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"mini",type:"textarea",rows:3,placeholder:"请输入具体答案（长度<80）",resize:"none"},model:{value:e.questions[0].answer,callback:function(a){t.$set(e.questions[0],"answer",a)},expression:"item.questions[0].answer"}})],1)]),a("div",{staticClass:"item_content"},[a("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("内容2")]),a("div",{staticClass:"content_content"},[a("el-input",{attrs:{placeholder:"请输入具体问题（长度<80）",size:"mini"},model:{value:e.questions[1].question,callback:function(a){t.$set(e.questions[1],"question",a)},expression:"item.questions[1].question"}}),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"mini",type:"textarea",rows:3,placeholder:"请输入具体答案（长度<80）",resize:"none"},model:{value:e.questions[1].answer,callback:function(a){t.$set(e.questions[1],"answer",a)},expression:"item.questions[1].answer"}})],1)]),a("div",{staticClass:"item_content"},[a("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("内容3")]),a("div",{staticClass:"content_content"},[a("el-input",{attrs:{placeholder:"请输入具体问题（长度<80）",size:"mini"},model:{value:e.questions[2].question,callback:function(a){t.$set(e.questions[2],"question",a)},expression:"item.questions[2].question"}}),a("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"mini",type:"textarea",rows:3,placeholder:"请输入具体答案（长度<80）",resize:"none"},model:{value:e.questions[2].answer,callback:function(a){t.$set(e.questions[2],"answer",a)},expression:"item.questions[2].answer"}})],1)])])})),0),a("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"10px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateCategorys(1)}}},[t._v("新增类型")]),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",disabled:t.FAQAssistantAction.categorys.length<2},on:{click:function(e){return t.updateCategorys()}}},[t._v("删除 ")])],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmFaqsShopSettings}},[t._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.FAQAssistantVisible=!1}}},[t._v("取消")])],1)]):t._e()])],1),a("div",{staticClass:"messageQuickly_dialog"},[a("el-dialog",{attrs:{title:t.messageQuicklyTitle,visible:t.messageQuicklyVisible,"close-on-click-modal":!1,width:"450px"},on:{"update:visible":function(e){t.messageQuicklyVisible=e}}},[a("div",{staticClass:"messageQuickly_box"},[a("div",{staticClass:"messageQuickly_title"},[a("div",{staticStyle:{width:"80px"}},[t._v("群组名称")]),a("el-input",{attrs:{size:"mini"},model:{value:t.messageQuicklyAction&&t.messageQuicklyAction.name,callback:function(e){t.$set(t.messageQuicklyAction&&t.messageQuicklyAction,"name",e)},expression:"messageQuicklyAction && messageQuicklyAction.name"}})],1),a("div",{staticClass:"messageQuickly_content"},t._l(t.messageQuicklyAction&&t.messageQuicklyAction.message_shortcuts,(function(e,s){return a("div",{key:s,staticClass:"content"},[a("div",{staticStyle:{width:"60px"}},[t._v("讯息"+t._s(s+1))]),a("el-input",{attrs:{size:"mini"},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}})],1)})),0),a("div",{staticClass:"messageQuickly_add"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addMessageQuicklyList}},[t._v("添 加 讯 息")])],1),a("div",{staticClass:"messageQuickly_footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.messageShortcutsGroups_dialog}},[t._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.messageQuicklyVisible=!1}}},[t._v("取消")])],1)])])],1)],1)},i=[],l=a("1da1"),n=(a("c740"),a("a434"),a("ac1f"),a("5319"),a("159b"),a("99af"),a("b0c0"),a("96cf"),a("feb6")),o=a("0e0b"),r={components:{storeChoose:n["a"]},data:function(){return{activeName:"autoReply",source:"autoReply",isShowLog:!1,height:300,rowHeight:50,SiteList:{autoReply:[],FAQAssistant:[],messageQuickly:[]},autoReplyVisible:!1,autoReplyTitle:"",autoReplyText:"",tableDataAutoReply:[],selectDataAutoReply:[],FAQAssistantVisible:!1,FAQAssistantTitle:"",FAQAssistantAction:null,tableDataFAQAssistant:[],selectDataFAQAssistant:[],messageQuicklyVisible:!1,messageQuicklyTitle:"",messageQuicklyAction:null,tableDataMessageQuickly:[],selectDataMessageQuickly:[],autoReplyShowConsole:!0,FAQAssistantShowConsole:!0,messageQuicklyShowConsole:!0,autoReplyLoad:0,FAQAssistantLoad:0,messageQuicklyLoad:0}},watch:{},created:function(){var t=this;this.resizeHeight(),window.addEventListener("resize",(function(e){t.resizeHeight()}))},methods:{changeMallList:function(t){t.mallList&&t.mallList.length>0&&(this.source=t.source,this.SiteList[t.source]=t.mallList)},searchAutoReplyTable:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableDataAutoReply=[],a=t.SiteList.autoReply||[],t.$refs.autoReplyLogs.writeLog("开始查询",!0),t.autoReplyLoad=a.length,e.next=6,Object(o["c"])(a,t.getAutoReplyTable);case 6:e.sent,t.autoReplyLoad=0;case 8:case"end":return e.stop()}}),e)})))()},getAutoReplyTable:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c,u,m,p;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},l={country:t.country,platform_mall_id:t.platform_mall_id,platform_mall_name:t.platform_mall_name,mall_alias_name:t.mall_alias_name},a.$refs.autoReplyLogs.writeLog("正在获取店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设回复"),!0),s.next=5,a.$shopeemanService.scOfflineReply(t.country,{shop_id:t.platform_mall_id,timezone:8});case 5:return n=s.sent,s.next=8,a.$shopeemanService.scChatSetting(t.country,{shop_id:t.platform_mall_id});case 8:if(o=s.sent,s.prev=9,r=JSON.parse(n),c=JSON.parse(r.data),u=JSON.parse(o),m=JSON.parse(u.data),200!==r.status){s.next=19;break}a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复获取成功"),!0),l=Object.assign(l,c,{status:"enabled"===c.status}),s.next=25;break;case 19:if(403!==r.status){s.next=24;break}return a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),s.abrupt("return");case 24:a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复获取失败"),!1);case 25:200===u.status?(a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复获取成功"),!0),l=Object.assign(l,m,{auto_reply_status:"enabled"===m.auto_reply_status})):a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复获取失败"),!1),p=a.tableDataAutoReply.findIndex((function(t){return t.platform_mall_id===l.platform_mall_id})),p>-1?a.tableDataAutoReply.splice(p,1,l):a.tableDataAutoReply.push(l),s.next=33;break;case 30:s.prev=30,s.t0=s["catch"](9),a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设回复获取失败"),!1);case 33:return s.prev=33,i.count--,s.finish(33);case 36:case"end":return s.stop()}}),s,null,[[9,30,33,36]])})))()},setAutoReply:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:"",l=e.length>2&&void 0!==e[2]?e[2]:-1,a.autoReplyLoad||(a.autoReplyLoad=1),n=t.auto_reply_status,l>-1&&(n=!!l),a.$refs.autoReplyLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复"),!0),s.next=8,a.$shopeemanService.setChatSetting(t.country,{shop_id:parseInt(t.platform_mall_id),auto_reply_status:n?"enabled":"disabled",auto_reply_content:i||t.auto_reply_content});case 8:if(o=s.sent,r=JSON.parse(o),!(r.status>=200&&r.status<300)){s.next=14;break}a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复设置成功"),!0),s.next=20;break;case 14:if(403!==r.status){s.next=19;break}return a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),s.abrupt("return");case 19:a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复设置失败"),!1);case 20:--a.autoReplyLoad||a.searchAutoReplyTable();case 21:case"end":return s.stop()}}),s)})))()},setOfflineReply:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:"",l=e.length>2&&void 0!==e[2]?e[2]:-1,a.autoReplyLoad||(a.autoReplyLoad=1),n=t.status,l>-1&&(n=!!l),a.$refs.autoReplyLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复"),!0),o={shop_id:parseInt(t.platform_mall_id),status:n?"enabled":"disabled",content:i||t.content,timezone:8,working_days:t.working_days},o=JSON.stringify(o).replace(/\s*(\d+):\s*(\d+):00/g,"$1:$2"),s.next=10,a.$shopeemanService.setOfflineReply(t.country,JSON.parse(o),{headers:{referer:"/portal/assistant/basic/autoReply"}});case 10:if(r=s.sent,c=JSON.parse(r),!(c.status>=200&&c.status<300)){s.next=16;break}a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复设置成功"),!0),s.next=22;break;case 16:if(403!==c.status){s.next=21;break}return a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),s.abrupt("return");case 21:a.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复设置失败"),!1);case 22:--a.autoReplyLoad||a.searchAutoReplyTable();case 23:case"end":return s.stop()}}),s)})))()},allSetAutoReply:function(t,e,a){var s=this;0!==this.selectDataAutoReply.length?(this.autoReplyVisible&&(this.autoReplyVisible=!1,a="批量设置自动回复内容"===this.autoReplyTitle),this.autoReplyLoad=this.selectDataAutoReply.length,this.selectDataAutoReply.forEach((function(i){a&&s.setAutoReply(i,e,t),!a&&s.setOfflineReply(i,e,t)}))):this.$message.error("至少选择一条预设回复")},scFaqsTable:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableDataFAQAssistant=[],a=t.SiteList.FAQAssistant||[],t.$refs.FAQAssistantLogs.writeLog("开始查询",!0),t.FAQAssistantLoad=a.length,e.next=6,Object(o["c"])(a,t.getFaqsTable);case 6:e.sent,t.FAQAssistantLoad=0;case 8:case"end":return e.stop()}}),e)})))()},getFaqsTable:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},s.prev=1,a.$refs.FAQAssistantLogs.writeLog("正在获取店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),s.next=5,a.$shopeemanService.scFaqs(t.country,{shop_id:t.platform_mall_id,group_type:1});case 5:l=s.sent,n={country:t.country,platform_mall_id:t.platform_mall_id,platform_mall_name:t.platform_mall_name,mall_alias_name:t.mall_alias_name},o=JSON.parse(l),o.status>=200&&o.status<300?(r=o.data,c=JSON.parse(r),a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题获取成功，共有").concat(c.length||0,"条"),!0),c.forEach((function(t){t=Object.assign(t,n,{faq_status:!!t.faq_status});var e=a.tableDataFAQAssistant.findIndex((function(t){return t.faq_id===n.faq_id}));e>-1?a.tableDataFAQAssistant.splice(e,1,t):a.tableDataFAQAssistant.push(t)}))):403===o.status?a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1):a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题获取失败"),!1),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](1),a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题获取失败"),!1);case 14:return s.prev=14,i.count--,s.finish(14);case 17:case"end":return s.stop()}}),s,null,[[1,11,14,17]])})))()},setFaqsShopSettings:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:-1,l=e.length>2?e[2]:void 0,a.FAQAssistantLoad||(a.FAQAssistantLoad=1),a.$refs.FAQAssistantLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),n={shop_id:parseInt(t.platform_mall_id),faq_id:t.faq_id},l||(o=t.faq_status?1:0,i>-1&&(o=i),n["faq_status"]=o),s.next=8,a.$shopeemanService.faqsShopSettings(t.country,n);case 8:r=s.sent,c=JSON.parse(r),c.status>=200&&c.status<300?a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题设置成功"),!0):a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题设置失败"),!1),--a.FAQAssistantLoad||a.scFaqsTable();case 12:case"end":return s.stop()}}),s)})))()},deleteFaqsShopSettings:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.FAQAssistantLoad||(e.FAQAssistantLoad=1),e.$refs.FAQAssistantLogs.writeLog("正在删除店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),a.next=4,e.$shopeemanService.deleteFaqsShopSettings(t.country,{shop_id:parseInt(t.platform_mall_id),faq_id:t.faq_id},{headers:{referer:"/portal/assistant/faq","Content-Type":"application/json;charset=UTF-8"}});case 4:s=a.sent,i=JSON.parse(s),i.status>=200&&i.status<300?e.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题删除成功"),!0):e.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题删除失败"),!1),--e.FAQAssistantLoad||e.scFaqsTable();case 8:case"end":return a.stop()}}),a)})))()},updateFaqsShopSettings:function(t,e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a.FAQAssistantLoad||(a.FAQAssistantLoad=1),a.FAQAssistantVisible=!1,!e){s.next=12;break}return a.$refs.FAQAssistantLogs.writeLog("正在编辑店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),i={shop_id:parseInt(t.platform_mall_id),group_name:t.group_name,greeting_content:t.greeting_content,faq_id:t.faq_id,faq_type:t.faq_type,categorys:t.categorys,faq_status:t.faq_status?1:0},s.next=7,a.$shopeemanService.faqsShopSettings(t.country,i);case 7:l=s.sent,n=JSON.parse(l),n.status>=200&&n.status<300?a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题编辑成功"),!0):a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题编辑失败"),!1),s.next=19;break;case 12:return a.$refs.FAQAssistantLogs.writeLog("正在添加店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),o={shop_id:parseInt(t.platform_mall_id),group_name:t.group_name,greeting_content:t.greeting_content,faq_status:t.faq_status?1:0,faq_type:t.faq_type,categorys:t.categorys},s.next=16,a.$shopeemanService.updateFaqsShopSettings(t.country,o);case 16:r=s.sent,c=JSON.parse(r),c.status>=200&&c.status<300?a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题添加成功"),!0):a.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题添加失败"),!1);case 19:--a.FAQAssistantLoad||a.scFaqsTable();case 20:case"end":return s.stop()}}),s)})))()},confirmFaqsShopSettings:function(){var t=this,e=this.FAQAssistantAction&&this.FAQAssistantAction.platform_mall_id;e?this.updateFaqsShopSettings(this.FAQAssistantAction,1):(this.FAQAssistantLoad=this.SiteList.FAQAssistant.length,this.SiteList.FAQAssistant.forEach((function(e){var a=JSON.parse(JSON.stringify(e));a=Object.assign(a,t.FAQAssistantAction),t.updateFaqsShopSettings(a)})))},updateFaqsShop:function(t,e){if(this.FAQAssistantVisible=!0,this.FAQAssistantTitle=t,"编辑常见问题"===t){for(var a=e,s=0;s<a.categorys.length;s++){var i=a.categorys[s].questions||[];i[0]=i[0]||{answer:"",is_fake:!0,question:""},i[1]=i[1]||{answer:"",is_fake:!0,question:""},i[2]=i[2]||{answer:"",is_fake:!0,question:""},a.categorys[s].questions=i}this.FAQAssistantAction=a}else this.FAQAssistantAction={group_name:"",greeting_content:"",faq_status:0,faq_type:1,categorys:[{is_fake:!0,title:"",questions:[{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""}]}]}},updateCategorys:function(t){t?this.FAQAssistantAction.categorys.push({is_fake:!0,title:"",questions:[{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""}]}):this.FAQAssistantAction.categorys.length>1&&this.FAQAssistantAction.categorys.splice(this.FAQAssistantAction.categorys.length-1,1)},allFaqsShopSettings:function(t,e){var a=this;this.FAQAssistantLoad=this.selectDataFAQAssistant.length,this.selectDataFAQAssistant.length?this.selectDataFAQAssistant.forEach((function(s){e&&a.setFaqsShopSettings(s,t),!e&&a.deleteFaqsShopSettings(s,t)})):this.$message.error("至少选择一个常见问题")},messageShortcutsGroupsTable:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.messageQuicklyLogs.writeLog("开始查询",!0),t.tableDataMessageQuickly=[],a=t.SiteList.messageQuickly||[],t.messageQuicklyLoad=a.length,e.next=6,Object(o["c"])(a,t.getMessageShortcutsGroupsTable);case 6:e.sent,t.messageQuicklyLoad=0;case 8:case"end":return e.stop()}}),e)})))()},getMessageShortcutsGroupsTable:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},s.prev=1,a.$refs.messageQuicklyLogs.writeLog("正在获取店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),s.next=5,a.$shopeemanService.messageShortcutsGroups(t.country,{shop_id:t.platform_mall_id,group_type:1});case 5:if(l=s.sent,n=JSON.stringify({country:t.country,platform_mall_id:t.platform_mall_id,platform_mall_name:t.platform_mall_name,mall_alias_name:t.mall_alias_name}),o=JSON.parse(l),!(o.status>=200&&o.status<300)){s.next=15;break}r=o.data,c=JSON.parse(r),a.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息获取成功，共").concat(c.length||0,"条"),!0),c.forEach((function(t){var e=Object.assign(JSON.parse(n),t,{state:"enabled"===t.state}),s=a.tableDataMessageQuickly.findIndex((function(t){return t.id===e.id}));s>-1?a.tableDataMessageQuickly.splice(s,1,e):a.tableDataMessageQuickly.push(e)})),s.next=21;break;case 15:if(403!==o.status){s.next=20;break}return a.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),s.abrupt("return");case 20:a.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息获取失败"),!1);case 21:s.next=26;break;case 23:s.prev=23,s.t0=s["catch"](1),a.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息获取失败"),!1);case 26:return s.prev=26,i.count--,s.finish(26);case 29:case"end":return s.stop()}}),s,null,[[1,23,26,29]])})))()},switchMessageShortcutsGroups:function(t){var e=arguments,a=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var i,l,n,o,r,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:-1,l=e.length>2?e[2]:void 0,a.messageQuicklyLoad||(a.messageQuicklyLoad=1),a.$refs.messageQuicklyLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),n={shop_id:parseInt(t.platform_mall_id),group_type:1,id:t.id},l?(n["group_name"]=l.name,n["message_shortcuts"]=l.message_shortcuts):(o=t.state,i>-1&&(o=!!i),n["state"]=o?"enabled":"disabled"),s.next=8,a.$shopeemanService.switchMessageShortcutsGroups(t.country,n,{headers:{referer:"/portal/assistant/basic/messageShortcuts"}});case 8:r=s.sent,c=JSON.parse(r),c.status>=200&&c.status<300?a.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息设置成功"),!0):a.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息设置失败"),!1),--a.messageQuicklyLoad||a.messageShortcutsGroupsTable();case 12:case"end":return s.stop()}}),s)})))()},addMessageShortcutsGroups:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.messageQuicklyLoad||(e.messageQuicklyLoad=1),e.$refs.messageQuicklyLogs.writeLog("正在添加店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),a.next=4,e.$shopeemanService.setShortcutsGroups(t.country,{shop_id:parseInt(t.platform_mall_id),group_type:1,group_name:e.messageQuicklyAction.name,message_shortcuts:e.messageQuicklyAction.message_shortcuts});case 4:s=a.sent,i=JSON.parse(s),i.status>=200&&i.status<300?e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息添加成功"),!0):e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息添加失败"),!1),--e.messageQuicklyLoad||e.messageShortcutsGroupsTable();case 8:case"end":return a.stop()}}),a)})))()},deleteMessageShortcutsGroups:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.messageQuicklyLoad||(e.messageQuicklyLoad=1),e.$refs.messageQuicklyLogs.writeLog("正在删除店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),a.next=4,e.$shopeemanService.deleteMessageShortcutsGroups(t.country,{shop_id:parseInt(t.platform_mall_id),group_type:1,id:t.id},{headers:{referer:"/portal/assistant/basic/messageShortcuts","Content-Type":"application/json;charset=UTF-8"}});case 4:s=a.sent,i=JSON.parse(s),i.status>=200&&i.status<300?e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息删除成功"),!0):e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息删除失败"),!1),--e.messageQuicklyLoad||e.messageShortcutsGroupsTable();case 8:case"end":return a.stop()}}),a)})))()},allSwitch_DeleteMessageShortcutsGroups:function(t,e){var a=this;this.selectDataMessageQuickly.length?(this.messageQuicklyLoad=this.selectDataMessageQuickly.length,this.selectDataMessageQuickly.forEach((function(s){e&&a.switchMessageShortcutsGroups(s,t),!e&&a.deleteMessageShortcutsGroups(s,t)}))):this.$message.error("至少选择一条讯息")},addMessageQuickly:function(){this.messageQuicklyAction={name:"",message_shortcuts:[{content:""}]},this.messageQuicklyTitle="批量添加快捷讯息",this.messageQuicklyVisible=!0},addMessageQuicklyList:function(){this.messageQuicklyAction.message_shortcuts.length<20?this.messageQuicklyAction.message_shortcuts.push({content:""}):this.$message.error("最多可添加20条讯息")},updateMessageQuickly:function(t){this.messageQuicklyAction=JSON.parse(JSON.stringify(t)),this.messageQuicklyTitle="编辑快捷讯息",this.messageQuicklyVisible=!0},messageShortcutsGroups_dialog:function(){var t=this;this.messageQuicklyShowConsole=!1,this.messageQuicklyVisible=!1;var e="编辑快捷讯息"===this.messageQuicklyTitle;e?this.switchMessageShortcutsGroups(this.messageQuicklyAction,0,this.messageQuicklyAction):(this.messageQuicklyLoad=this.SiteList[this.activeName].length,this.SiteList[this.activeName].forEach((function(e){t.addMessageShortcutsGroups(e)})))},handleClick:function(){},handleSelectionChange1:function(t){this.selectDataAutoReply=t},handleSelectionChange2:function(t){this.selectDataFAQAssistant=t},handleSelectionChange3:function(t){this.selectDataMessageQuickly=t},resizeHeight:function(){var t=window.innerHeight;this.height=t-190},tableScroll:function(){}}},c=r,u=(a("811f"),a("73a4"),a("2877")),m=Object(u["a"])(c,s,i,!1,null,"6c3a7cbd",null);e["default"]=m.exports},"4c28":function(t,e,a){},"73a4":function(t,e,a){"use strict";a("ac69")},"811f":function(t,e,a){"use strict";a("f943")},8992:function(t,e,a){"use strict";a("4c28")},ac69:function(t,e,a){},f943:function(t,e,a){},feb6:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"storeChooseUL"},[t.isMall?a("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.groupIdList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:""},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[t.isShowName?t._e():a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteShowList,(function(e,s){return t.showMall(e,s)?a("el-option",{key:s,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}}):t._e()}))],2)],1),t.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},i=[],l=a("1da1"),n=a("2909"),o=(a("96cf"),a("99af"),a("d81d"),a("fb6a"),a("4de4"),a("159b"),a("c740"),a("7db0"),a("caad"),a("2532"),a("7646")),r=a("2b0e");r["default"].directive("loadmore",{bind:function(t,e){var a=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)}))}});var c={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new o["a"](this),isShowName:"",showMallNumber:100,mallShowIndex:0,jsonMallData:[]}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t,e){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var a=this;if(this.isAllowSet2){this.isAllowSet2=!1;var s=e.indexOf("")>-1,i=t.indexOf("")>-1;s!==i?this.groupId=i?[""].concat(Object(n["a"])(this.groupIdList.map((function(t){return t.id})))):[]:i?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var s=e.indexOf("")>-1,i=t.indexOf("")>-1;s!==i?this.site=i?[""].concat(Object(n["a"])(this.siteList.map((function(t){return t.platform_mall_id})))):[]:i?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length&&this.site.unshift(""),setTimeout((function(){a.changeMallList(),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,i,l,n,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.site=[],s=e.countryVal,i=[],!(e.jsonMallData.length>0)){a.next=7;break}i=e.jsonMallData,a.next=12;break;case 7:return a.next=9,e.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:l=a.sent,i=JSON.parse(l)||[],e.jsonMallData=JSON.parse(l)||[];case 12:if(!(i.length>0)){a.next=17;break}1===t&&(e.siteList=""===s?i:i.filter((function(t){return t.country===s}))),2===t&&(0===e.groupId.length?e.siteList=[]:(e.siteList=[],e.groupId.forEach((function(t){i.forEach((function(a){s?t===a.group_id&&s===a.country&&e.siteList.push(a):t===a.group_id&&e.siteList.push(a)}))})))),a.next=22;break;case 17:return n={country:"",mallGroupIds:""},a.next=20,e.mallListAPIInstance.ddMallGoodsGetMallList(n);case 20:o=a.sent,200===o.code?(e.$appConfig.temporaryCacheInfo("save","mallAllData",o.data),r=o.data||[],e.siteList=r,e.jsonMallData=r,e.siteList=""===s?r:r.filter((function(t){return t.country===s}))):e.$message.error("获取分组、店铺列表失败");case 22:0===e.groupIdList.length&&(e.groupId=[""],e.siteList.forEach((function(t){var a=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&a<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=[""]}),10);case 24:case"end":return a.stop()}}),a)})))()},changeMallList:function(){var t=this,e=[],a="";this.site.forEach((function(s){if(s){var i=t.siteList.find((function(t){return t.platform_mall_id===s}));e.push(i),a+=s+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(a=e.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))},filterMall:function(t){this.isShowName=t||"";var e=this.siteList.filter((function(e){var a=e.mall_alias_name||e.platform_mall_name;return a.includes(t)}));this.showMallNumber=e.length-this.showMallNumber;var a=this.siteList.filter((function(e){var a=e.mall_alias_name||e.platform_mall_name;return!a.includes(t)}));this.siteShowList=[].concat(Object(n["a"])(e),Object(n["a"])(a))},showMall:function(t,e){var a=t.mall_alias_name||t.platform_mall_name,s=this.site[0]===t.platform_mall_id;return s||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteShowList.length>this.showMallNumber){var a=0;t?(a=this.mallShowIndex+10,a=a<this.siteShowList.length&&a||this.mallShowIndex):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30),this.mallShowIndex=a}}}},u=c,m=(a("8992"),a("2877")),p=Object(m["a"])(u,s,i,!1,null,null,null);e["a"]=p.exports}}]);