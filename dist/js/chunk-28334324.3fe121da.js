(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28334324"],{"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},7037:function(e,t,r){function a(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=a=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),a(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},"81a6":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d3b7"),r("25f0"),r("a9e3"),r("fb6a");function a(){this.date=new Date,"function"!==typeof this.newGUID&&(a.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),r=this.hexadecimal(this.getGUIDTime(),16),a=0;a<9;a++)e+=Math.floor(16*Math.random()).toString(16);e+=t,e+=r;while(e.length<32)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},a.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},a.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},a.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},a.prototype.hexadecimal=function(e,t,r){return void 0!=r?parseInt(e.toString(),r).toString(t):parseInt(e.toString()).toString(t)},a.prototype.formatGUID=function(e){var t=e.slice(0,8)+"-",r=e.slice(8,12)+"-",a=e.slice(12,16)+"-",n=e.slice(16,20)+"-",o=e.slice(20);return t+r+a+n+o})}},d1dd:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r("53ca"),n=r("b85c"),o=r("2909"),s=r("1da1"),i=r("d4ec"),c=r("bee2"),u=r("ade3"),l=(r("96cf"),r("a9e3"),r("ac1f"),r("1276"),r("a434"),r("159b"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("4de4"),r("b680"),r("99af"),r("c740"),r("f68b")),m=r("0e0b"),p=r("2b0e"),h=function(){function e(){Object(i["a"])(this,e),Object(u["a"])(this,"mallTest",""),Object(u["a"])(this,"MallAPIInstance",new l["a"](new p["default"])),Object(u["a"])(this,"mallSearchList",[]),Object(u["a"])(this,"storeLog",{})}return Object(c["a"])(e,[{key:"autoAddFenceActive",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=["TH"],r=0,a=t;case 2:if(!(r<a.length)){e.next=14;break}return n=a[r],o={},o["country"]=n,o["log_message"]=[],e.next=9,window.BaseUtilBridgeService.getAttentionUserTask(n);case 9:s=e.sent,s.length&&(i=(new Date).getTime(),c=Number(s[0].exec_time),this.runTesk(i-c,s));case 11:r++,e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"runTesk",value:function(e,t){var r=this;e=e>0?0:0-e,setTimeout(Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.mallTest=t[0],e.next=3,r.searchMall(r.mallTest);case 3:return e.next=5,r.startCancer();case 5:return e.next=7,window.BaseUtilBridgeService.deleteAttentionUserTask(r.mallTest.id);case 7:return a={country:r.mallTest.country,mall_ids:r.mallTest.mall_ids,mall_names:r.mallTest.mall_names,product_max:r.mallTest.product_max,last_login_day:r.mallTest.last_login_day,open_hour:r.mallTest.open_hour,open_minute:r.mallTest.open_minute,key_word:r.mallTest.key_word,follow_number:r.mallTest.mallTest,follow_interval:r.mallTest.follow_interval,is_not_follow_min_order_evaluation:r.mallTest.is_not_follow_min_order_evaluation,min_order_evaluation:r.mallTest.min_order_evaluation,is_not_follow_followed_day:r.mallTest.is_not_follow_followed_day,followed_day:r.mallTest.followed_day,followed_type:r.mallTest.followed_type,cancel_follow_number:r.mallTest.cancel_follow_number,cancel_follow_sort_type:r.cancel_follow_sort_type.cancel_follow_sort_type,exec_time:(new Date).getTime()},e.next=10,window.BaseUtilBridgeService.saveAttentionUserTask(a);case 10:return n=e.sent,r.storeLog["task_id"]=n[0].id,r.storeLog["country"]=r.mall[0].country,r.storeLog["log_message"]=[],e.next=16,window.BaseUtilBridgeService.saveAttentionUserLog(r.storeLog);case 16:case"end":return e.stop()}}),e)}))),e)}},{key:"searchMall",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,i,c,u,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=10*t.mall_ids.split(",").length,a=[],this.storeLog["log_message"].push("正在查询关注店铺...."),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),n=0;case 5:if(!(n<r)){e.next=40;break}return s={},s["country"]=t.country,s["mallId"]=Number(t.mall_ids.split(",")[0]),s["newest"]=60*n,s["keyword"]=t.key_word,e.next=13,this.searchMallInstance(s);case 13:if(i=e.sent,i.length){e.next=18;break}return this.storeLog["log_message"].push("暂无数据"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return");case 18:if(!i.length){e.next=34;break}return e.next=21,this.filterList(i);case 21:if(c=e.sent,!c.length){e.next=29;break}if((u=a).push.apply(u,Object(o["a"])(c)),!(a.length>=r)){e.next=27;break}return a=a.splice(0,r),e.abrupt("break",40);case 27:e.next=32;break;case 29:return this.storeLog["log_message"].push("此关键词暂未搜索到数据，请更换关键词或重试！"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("break",40);case 32:e.next=37;break;case 34:return this.storeLog["log_message"].push("数据已被过滤空，请更换关键词或放宽搜索条件后重试！"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("break",40);case 37:n++,e.next=5;break;case 40:this.mallSearchList=[],a.forEach((function(e){e.item_basic.totalRate=e.item_basic.item_rating.rating_count.reduce((function(e,t,r,a){return e+t})),l.mallSearchList.push(e.item_basic)}));case 42:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchMallInstance",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.mallId,r["by"]="relevancy",r["keyword"]=t.keyword,r["limit"]=60,r["newest"]=t.newest,r["order"]="desc",r["page_type"]="search",r["rating_filter"]=this.mallTest.min_order_evaluation,e.prev=10,e.next=13,this.MallAPIInstance.addCancerMall(r);case 13:if(a=e.sent,200!==a.status){e.next=18;break}return e.abrupt("return",JSON.parse(a.data).items);case 18:return this.storeLog["log_message"].push("店铺搜索请求失败,230-line:${res.status}"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return",[]);case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](10),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,this,[[10,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],a=new Map,t.forEach((function(e){a.has(e.item_basic.itemid)||a.has(e.item_basic.shopid)||a.set(e.itemid,e)})),r=Object(o["a"])(a.values()),n=Number(this.mallTest.product_max),s=r.filter((function(e){var t=e.item_basic.item_rating.rating_count.reduce((function(e,t,r,a){return e+t}));if(Number(e.item_basic.liked_count)>=100&&Number(e.item_basic.liked_count)<=1e4&&Number(e.item_basic.item_rating.rating_star.toFixed(2))>=4.5&&Number(e.item_basic.item_rating.rating_star.toFixed(2))<=5&&t>=50&&t<=5e3&&e.item_basic.stock>=n)return e})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isLogin",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.MallAPIInstance.isLogin(t);case 2:if(r=e.sent,200!==r.code||!r.data){e.next=7;break}return e.abrupt("return",!0);case 7:return this.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺未登录")),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startCancer",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.storeLog["log_message"].push("数据正在处理......"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),this.mallSearchList,this.mallSearchList.length){e.next=7;break}return this.storeLog["log_message"].push("当前关键词暂无数据"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return");case 7:return r=this.mallTest.mall_ids.split(","),a=this.mallTest.mall_names.split(","),n=this.mallSearchList.forEach((function(e){return e.shopid})),o=r.forEach((function(e,t){return{platform_mall_id:e,mall_alias_name:a[t],country:s.mallTest.country,mallIDlist:n}})),this.storeLog["log_message"].push("数据正在处理"),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.next=15,Object(m["c"])(o,this.getFllowerInfo);case 15:this.storeLog["log_message"].push("数据处理结束"),this.storeLog["created_at"]=this.formatTime((new Date).getTime());case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowerInfo",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,o,s,i,c,u,l,p,h,f,d=this,g=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:{count:1},e.prev=1,o=t.mallIDlist,this.storeLog["log_message"].push("正在查询【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺关注信息")),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.next=7,this.isLogin(t);case 7:if(s=e.sent,s){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,this.getHomeMallData(t);case 12:if(i=e.sent,this.$set(t,"following",i?i.account.following_count:0),this.$set(t,"fence",i?i.follower_count:0),i){e.next=19;break}return this.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺暂无数据")),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return");case 19:return e.next=21,this.getHomeFollowingList(t,i.account.following_count);case 21:c=e.sent,this.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺关注用户数：【").concat(c.length,"】")),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),u=Number(t.newFollow),l=Object(n["a"])(o),e.prev=26,h=regeneratorRuntime.mark((function e(){var r,o,s,i,l,h,f,g,_,b,x,v,w,k,y,S,T,L,F,I,A,D;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=p.value,!d.isStop){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(o={},o["country"]=t.country,o["mallId"]=t.platform_mall_id,o["shopid"]=r,"0"!==d.mallTest.followed_type){e.next=73;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】正在获取").concat(r,"店铺粉丝信息")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),s=!0,o["offset"]=0,e.next=14,d.GetShopLikes(o);case 14:i=e.sent,d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】获取第").concat(o.offset/20+1,"页粉丝")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),l=Object(n["a"])(i),e.prev=18,f=regeneratorRuntime.mark((function e(){var a,n,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=h.value,!d.isStop){e.next=3;break}return e.abrupt("return",{v:{v:void 0}});case 3:return e.next=5,d.filterShopDatas(i,t.country,t.platform_mall_id);case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return","continue");case 8:if(!c.length){e.next=12;break}if(o=c.findIndex((function(e){return e.ShopId===a.ShopId})),!(o>=0)){e.next=12;break}return e.abrupt("return","continue");case 12:return e.next=14,d.runAttention(a,t,r);case 14:if(l=e.sent,!l){e.next=19;break}u++,e.next=23;break;case 19:return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(a.UserName,"失败")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),s=!1,e.abrupt("return","continue");case 23:if(!Number(d.mallTest.follow_number)){e.next=28;break}if(!(u>=Number(d.mallTest.follow_number))){e.next=26;break}return e.abrupt("return",{v:{v:void 0}});case 26:e.next=32;break;case 28:if(!(t.following+u>=3e3)){e.next=32;break}return d.storeLog["log_message"].push("关注已达上限"),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 32:case"end":return e.stop()}}),e)})),l.s();case 21:if((h=l.n()).done){e.next=30;break}return e.delegateYield(f(),"t0",23);case 23:if(g=e.t0,"continue"!==g){e.next=26;break}return e.abrupt("continue",28);case 26:if("object"!==Object(a["a"])(g)){e.next=28;break}return e.abrupt("return",g.v);case 28:e.next=21;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](18),l.e(e.t1);case 35:return e.prev=35,l.f(),e.finish(35);case 38:d.storeLog["log_message"].push("新增关注".concat(u,"个")),d.storeLog["created_at"]=d.formatTime((new Date).getTime());case 40:if(!s){e.next=68;break}if(!d.isStop){e.next=43;break}return e.abrupt("return",{v:void 0});case 43:return o["offset"]+=20,e.next=46,d.GetShopLikes(o);case 46:i=e.sent,d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】获取第").concat(o.offset/20+1,"页粉丝数据")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),_=regeneratorRuntime.mark((function e(a){var n,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d.isStop){e.next=2;break}return e.abrupt("return",{v:{v:void 0}});case 2:return n=i[a],e.next=5,d.filterShopDatas(n,t.country,t.platform_mall_id);case 5:if(o=e.sent,o){e.next=8;break}return e.abrupt("return","continue");case 8:if(!c.length){e.next=12;break}if(s=c.findIndex((function(e){return e.ShopId===n.ShopId})),!(s>=0)){e.next=12;break}return e.abrupt("return","continue");case 12:return e.next=14,d.runAttention(n,t,r);case 14:if(l=e.sent,!l){e.next=19;break}u++,e.next=22;break;case 19:return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(n.UserName,"失败")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return","continue");case 22:if(!Number(d.mallTest.follow_number)){e.next=29;break}if(!(u>=Number(d.mallTest.follow_number))){e.next=27;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(n.UserName,"成功")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 27:e.next=33;break;case 29:if(!(t.following+u>=3e3)){e.next=33;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 33:case"end":return e.stop()}}),e)})),b=0;case 51:if(!(b<i.length)){e.next=61;break}return e.delegateYield(_(b),"t2",53);case 53:if(x=e.t2,"continue"!==x){e.next=56;break}return e.abrupt("continue",58);case 56:if("object"!==Object(a["a"])(x)){e.next=58;break}return e.abrupt("return",x.v);case 58:b++,e.next=51;break;case 61:return i.length<20&&(d.storeLog["log_message"].push("【".concat(r,"】查找结束")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),s=!1),d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(u,"个")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.next=66,Object(m["y"])(1e3*Number(d.mallTest.follow_interval));case 66:e.next=40;break;case 68:d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】操作结束")),d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(u,"个")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.next=131;break;case 73:return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】正在获取评价用户信息")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),v=!0,w=[],k=d.mallSearchList.findIndex((function(e){return e.shopid===Number(r)})),y=d.mallSearchList[k].itemid,S=0,d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】获取").concat(r,"第【").concat(S/52+1,"】页评价用户")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.next=84,d.GetShopComment(y,r,t,S);case 84:if(w=e.sent,w.length){e.next=89;break}return d.storeLog["log_message"].push("".concat(r,"暂无用户评价")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return","continue");case 89:T=regeneratorRuntime.mark((function e(r){var a,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=w[r],n={},n["ShopId"]=a.author_shopid,n["UserName"]=a.author_username,!c.length){e.next=8;break}if(o=c.findIndex((function(e){return Number(e.ShopId)===Number(n.ShopId)})),!(o>=0)){e.next=8;break}return e.abrupt("return","continue");case 8:return e.next=10,d.runAttention(n,t,a.shopid);case 10:if(s=e.sent,!s){e.next=15;break}u++,e.next=19;break;case 15:return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(n.UserName,"失败")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),v=!1,e.abrupt("return","continue");case 19:if(!Number(d.mallTest.follow_number)){e.next=26;break}if(!(u>=Number(d.mallTest.follow_number))){e.next=24;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注成功")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 24:e.next=30;break;case 26:if(!(t.following+u>=3e3)){e.next=30;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 30:case"end":return e.stop()}}),e)})),L=0;case 91:if(!(L<w.length)){e.next=101;break}return e.delegateYield(T(L),"t3",93);case 93:if(F=e.t3,"continue"!==F){e.next=96;break}return e.abrupt("continue",98);case 96:if("object"!==Object(a["a"])(F)){e.next=98;break}return e.abrupt("return",F.v);case 98:L++,e.next=91;break;case 101:d.$set(t,"newFollow",u);case 102:if(!v){e.next=128;break}if(!d.isStop){e.next=105;break}return e.abrupt("return",{v:void 0});case 105:return S+=52,d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】获取").concat(r,"第【").concat(S/52+1,"】页评价用户")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.next=110,d.GetShopComment(y,r,t,S);case 110:w=e.sent,I=regeneratorRuntime.mark((function e(a){var n,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d.isStop){e.next=2;break}return e.abrupt("return",{v:{v:void 0}});case 2:if(n=w[a],o={},o["ShopId"]=n.shopid,o["UserName"]=n.author_username,!c.length){e.next=10;break}if(s=c.findIndex((function(e){return e.ShopId===o.ShopId})),!(s>=0)){e.next=10;break}return e.abrupt("return","continue");case 10:return e.next=12,d.runAttention(o,t,r);case 12:if(i=e.sent,!i){e.next=17;break}u++,e.next=20;break;case 17:return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(o.UserName,"失败")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return","continue");case 20:if(!Number(d.mallTest.follow_number)){e.next=27;break}if(!(u>=Number(d.mallTest.follow_number))){e.next=25;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注成功")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 25:e.next=31;break;case 27:if(!(t.following+u>=3e3)){e.next=31;break}return d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),e.abrupt("return",{v:{v:void 0}});case 31:case"end":return e.stop()}}),e)})),A=0;case 113:if(!(A<w.length)){e.next=123;break}return e.delegateYield(I(A),"t4",115);case 115:if(D=e.t4,"continue"!==D){e.next=118;break}return e.abrupt("continue",120);case 118:if("object"!==Object(a["a"])(D)){e.next=120;break}return e.abrupt("return",D.v);case 120:A++,e.next=113;break;case 123:return w.length<52&&(d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】查找结束")),d.storeLog["created_at"]=d.formatTime((new Date).getTime()),v=!1),e.next=126,Object(m["y"])(1e3*Number(d.mallTest.follow_interval));case 126:e.next=102;break;case 128:d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】成功关注").concat(u,"个粉丝")),d.storeLog["log_message"].push("【".concat(t.mall_alias_name||t.platform_mall_name,"】操作结束")),d.storeLog["created_at"]=d.formatTime((new Date).getTime());case 131:case"end":return e.stop()}}),e,null,[[18,32,35,38]])})),l.s();case 29:if((p=l.n()).done){e.next=38;break}return e.delegateYield(h(),"t0",31);case 31:if(f=e.t0,"continue"!==f){e.next=34;break}return e.abrupt("continue",36);case 34:if("object"!==Object(a["a"])(f)){e.next=36;break}return e.abrupt("return",f.v);case 36:e.next=29;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e["catch"](26),l.e(e.t1);case 43:return e.prev=43,l.f(),e.finish(43);case 46:this.$refs.Logs.writeLog("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注结束"),!0),e.next=52;break;case 49:e.prev=49,e.t2=e["catch"](1),this.$refs.Logs.writeLog("用户信息获取失败-line373，".concat(e.t2),!1);case 52:return e.prev=52,--r.count,e.finish(52);case 55:case"end":return e.stop()}}),e,this,[[1,49,52,55],[26,40,43,46]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeMallData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.platform_mall_id,e.next=5,this.MallAPIInstance.UserProfile(r);case 5:if(a=e.sent,200!==a.code){e.next=19;break}return n=a.data.username,r["username"]=n,e.next=11,this.MallAPIInstance.getHomeMallinfo(r);case 11:if(o=e.sent,200!==o.code){e.next=16;break}return e.abrupt("return",o.data);case 16:return e.abrupt("return","");case 17:e.next=20;break;case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeFollowingList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a["country"]=t.country,a["mallId"]=t.platform_mall_id,a["offset"]=0,a["mallName"]=t.mall_alias_name||t.platform_mall_name,e.next=7,this.getHomeFllowering(a);case 7:if(n=e.sent,o=n,o.length){e.next=11;break}return e.abrupt("return",[]);case 11:if(!(n.length>=20)){e.next=21;break}if(!this.isStop){e.next=14;break}return e.abrupt("break",21);case 14:return a["offset"]+=20,e.next=17,this.getHomeFllowering(a);case 17:n=e.sent,o=o.concat(n),e.next=11;break;case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"GetShopLikes",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.mallId,r["shopid"]=t.shopid,r["offset"]=t.offset,r["limit"]=20,r["offset_of_offset"]=0,r["timeStamp"]=(new Date).getTime(),e.next=10,this.MallAPIInstance.getFllower(r);case 10:if(a=e.sent,200!==a.code){e.next=15;break}return e.abrupt("return",a.data);case 15:return this.storeLog["log_message"].push("粉丝获取失败，".concat(a.message)),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterShopDatas",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getActiveUser({country:r,mallId:a,userName:t.UserName});case 2:if(n=e.sent,o=new Date((new Date).toLocaleDateString()).getTime(),s=o-o*(Number(this.mallTest.last_login_day)-1),!(n>s)){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"runAttention",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["country"]=r.country,n["mallId"]=r.platform_mall_id,n["userShopid"]=t.ShopId,n["followMallID"]=a,e.next=7,this.MallAPIInstance.buyerFollow(n);case 7:if(o=e.sent,200===o.code){e.next=13;break}this.storeLog["log_message"].push("【".concat(r.mall_alias_name||r.platform_mall_name,"】关注").concat(t.UserName,"失败,").concat(o.message)),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.next=21;break;case 13:if(!o.data){e.next=19;break}return this.storeLog["log_message"].push("【".concat(r.mall_alias_name||r.platform_mall_name,"】关注").concat(t.UserName,"成功")),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return",!0);case 19:this.storeLog["log_message"].push("【".concat(r.mall_alias_name||r.platform_mall_name,"】关注").concat(t.UserName,"失败,").concat(o.message)),this.storeLog["created_at"]=this.formatTime((new Date).getTime());case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"GetShopComment",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r,a,n){var o,s,i,c,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={},o["mallId"]=a.platform_mall_id,o["country"]=a.country,o["itemid"]=t,o["offset"]=n,o["shopid"]=r,e.next=8,this.MallAPIInstance.getShoppComment(o);case 8:if(s=e.sent,200!==s.code){e.next=15;break}return i=s.data.ratings||[],c=i.filter((function(e){if(e.rating_star>=Number(u.mallTest.min_order_evaluation))return e})),e.abrupt("return",c);case 15:return this.storeLog["log_message"].push("商品评价获取失败".concat(s.message)),this.storeLog["created_at"]=this.formatTime((new Date).getTime()),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,this)})));function t(t,r,a,n){return e.apply(this,arguments)}return t}()}]),e}()},f68b:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r("4d63"),r("ac1f"),r("25f0"),r("d3b7"),r("3ca3"),r("10d1"),r("ddb0"),r("80e0"),r("5319"),r("a4d3"),r("e01a"),r("fb6a"),r("b64b");var a=r("7037"),n=r.n(a);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(){i=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,a,n){var s=new RegExp(e,a);return t.set(s,n||t.get(e)),o(s,r.prototype)}function a(e,r){var a=t.get(r);return Object.keys(a).reduce((function(t,r){return t[r]=e[a[r]],t}),Object.create(null))}return s(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=a(r,this)),r},r.prototype[Symbol.replace]=function(r,o){if("string"===typeof o){var s=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+s[t]})))}if("function"===typeof o){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!==n()(e[e.length-1])&&(e=[].slice.call(e),e.push(a(e,i))),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},i.apply(this,arguments)}var c=r("1da1"),u=r("d4ec"),l=r("bee2"),m=(r("96cf"),r("5b81"),r("4de4"),r("81a6"),function(){function e(t){Object(u["a"])(this,e),this._this=t}return Object(l["a"])(e,[{key:"urlencode",value:function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}},{key:"guid",value:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}))}},{key:"addCancerMall",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a=encodeURI(r.keyword),n={},n["mallId"]=r.mallId,n["by"]=r.by,n["keyword"]=r.keyword,n["limit"]=r.limit,n["newest"]=r.newest,n["order"]=r.order,n["page_type"]=r.page_type,n["scenario"]="PAGE_GLOBAL_SEARCH",n["version"]=2,o=this.guid(),e.next=16,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v4/search/search_items?",n,{headers:{"Content-type":"application/json",referer:"/search?keyword=".concat(a,"&trackingId=searchhint-1646186021-961459e5-99cb-11ec-85af-8a3d66826fb4"),Accept:"application/json","If-None-Match-":this.guid(),"x-api-source":"pc","sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","X-CSRFToken":o}});case 16:return s=e.sent,e.abrupt("return",JSON.parse(s));case 20:return e.prev=20,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"店铺搜索异常 ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[1,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllower",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.shopid,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,e.next=11,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.shopid,"/followers/?"),a,{headers:{"Content-type":"text/html; charset=utf-8",referer:"/shop/".concat(r.shopid,"/followers/?__classic__=1"),accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 11:n=e.sent,o=JSON.parse(n).data,s=i(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),c={},u=[];do{c=s.exec(o),null!==(l=c)&&void 0!==l&&l.groups&&u.push(c.groups)}while(c=s.exec(o));if(!n){e.next=21;break}return e.abrupt("return",{code:200,data:u});case 21:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"粉丝请求异常 ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[1,24]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyerFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["isAddCsrfToken"]=!0,a["userShopid"]=r.userShopid,a["csrfmiddlewaretoken"]=this.guid().replaceAll("-",""),e.next=9,this._this.$shopeemanService.postChineseBuyer(r.country,"/buyer/follow/shop/".concat(r.userShopid,"/"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":"52","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1",referer:"/shop/".concat(r.followMallID,"/followers/?__classic__=1"),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" */*","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid()}});case 9:if(n=e.sent,o=JSON.parse(n),200!==o.status){e.next=19;break}if(!JSON.parse(o.data).success){e.next=16;break}return e.abrupt("return",{code:200,data:!0});case 16:return e.abrupt("return",{code:200,data:!1});case 17:e.next=20;break;case 19:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"关注请求异常 ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyerUNFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["isAddCsrfToken"]=!0,a["ShopId"]=r.ShopId,a["csrfmiddlewaretoken"]=this.guid().replaceAll("-",""),e.next=9,this._this.$shopeemanService.postChineseBuyer(r.country,"/buyer/unfollow/shop/".concat(r.ShopId,"/"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":"52","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1",referer:"/shop/".concat(r.followMallID,"/followers/?__classic__=1"),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" */*","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid()}});case 9:if(n=e.sent,!n){e.next=14;break}return e.abrupt("return",{code:200,data:!0});case 14:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"取消关注用户请求异常 ".concat(e.t0)});case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CommentFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.userShopid,n=this.guid(),e.next=8,this._this.$shopeemanService.postChineseBuyer(r.country,"/api/v4/shop/follow",a,{headers:{"Content-Type":"application/json","Content-Length":"20","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?0",referer:"/shop/".concat(r.userShopid),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" application/json","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-CN,zh;q=0.9","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid(),"X-CSRFToken":n}});case 8:if(o=e.sent,s=JSON.parse(o),200!==s.status){e.next=18;break}if(!JSON.parse(s.data).success){e.next=15;break}return e.abrupt("return",{code:200,data:!0});case 15:return e.abrupt("return",{code:200,data:!1});case 16:e.next=19;break;case 18:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"关注评价请求异常 ".concat(e.t0)});case 24:case"end":return e.stop()}}),e,this,[[1,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CommentUNFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.userShopid,n=this.guid(),e.next=8,this._this.$shopeemanService.postChineseBuyer(r.country,"/api/v4/shop/unfollow",a,{headers:{"Content-Type":"application/json","Content-Length":"20","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?0",referer:"/shop/".concat(r.userShopid),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" application/json","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-CN,zh;q=0.9","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid(),"X-CSRFToken":n}});case 8:if(o=e.sent,s=JSON.parse(o),200!==s.status){e.next=18;break}if(!JSON.parse(s.data).success){e.next=15;break}return e.abrupt("return",{code:200,data:!0});case 15:return e.abrupt("return",{code:200,data:!1});case 16:e.next=19;break;case 18:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"取关评价用户请求异常 ".concat(e.t0)});case 24:case"end":return e.stop()}}),e,this,[[1,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getActiveTimeFollower",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.mallId,a["username"]=r.username,e.next=8,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v4/shop/get_shop_detail?",a,{headers:{"X-API-SOURCE":"pc","Content-Type":"application/xml"}});case 8:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=14;break}return e.abrupt("return",{code:200,data:o.data});case 14:return e.abrupt("return",{code:201,data:[],message:o.error});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"粉丝活跃时间 ".concat(e.t0)});case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowerHostMall",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,e.next=10,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.mallId,"/followers/?"),a,{headers:{"Content-type":"text/html; charset=utf-8",referer:"/shop/".concat(r.mallId,"/followers/?__classic__=1"),accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 10:n=e.sent,o=JSON.parse(n).data,s=i(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),c={},u=[];do{c=s.exec(o),null!==(l=c)&&void 0!==l&&l.groups&&u.push(c.groups)}while(c=s.exec(o));if(!n){e.next=20;break}return e.abrupt("return",{code:200,data:u});case 20:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"粉丝请求异常 ".concat(e.t0)});case 26:case"end":return e.stop()}}),e,this,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getShoppComment",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["filter"]=0,a["flag"]=1,a["itemid"]=r.itemid,a["limit"]=52,a["offset"]=r.offset,a["shopid"]=r.shopid,a["type"]=0,e.next=13,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v2/item/get_ratings?",a,{headers:{accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 13:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=19;break}return e.abrupt("return",{code:200,data:o.data});case 19:return e.abrupt("return",{code:201,data:[],message:o.error});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"获取评论 ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeMallinfo",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t,a={},a["mallId"]=r.mallId,a["username"]=r.username,e.next=7,this._this.$shopeemanService.getChinese(r.country,"/api/v4/shop/get_shop_detail?",a,{headers:{"X-API-SOURCE":"pc","Content-Type":"application/xml",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate"}});case 7:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=13;break}return e.abrupt("return",{code:200,data:o.data});case 13:return e.abrupt("return",{code:201,data:[],message:o.error});case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:[],message:"主要店铺信息 ".concat(e.t0)});case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"UserProfile",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,e.next=6,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v2/user/profile/get/",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml"}});case 6:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),!o.error){e.next=12;break}return e.abrupt("return",{code:201,data:"",message:o.error_msg});case 12:return e.abrupt("return",{code:200,data:o.data});case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"用户信息获取 ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowering",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,a["__classic__"]=1,e.next=11,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.mallId,"/following/?"),a,{headers:{referer:"/shop/".concat(r.mallId,"/following/"),"Accept-Encoding":"gzip, deflate"}});case 11:n=e.sent,o=JSON.parse(n).data,s=i(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),c={},u=[];do{c=s.exec(o),null!==(l=c)&&void 0!==l&&l.groups&&u.push(c.groups)}while(c=s.exec(o));if(!n){e.next=21;break}return e.abrupt("return",{code:200,data:u});case 21:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"host粉丝请求异常 ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[1,24]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isLogin",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.platform_mall_id,e.next=6,this._this.$shopeemanService.getChinese(r.country,"/api/v2/login/?",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml"}});case 6:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),!o.errcode){e.next=12;break}return e.abrupt("return",{code:200,data:!1,message:"店铺未登录"});case 12:return e.abrupt("return",{code:200,data:!0});case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"判断用户是否登录请求异常 ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"add0",value:function(e){return e<10?"0"+e:e}},{key:"formatTime",value:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),s=t.getMinutes(),i=t.getSeconds();return r+"-"+this.add0(a)+"-"+this.add0(n)+" "+this.add0(o)+":"+this.add0(s)+":"+this.add0(i)}}]),e}())}}]);