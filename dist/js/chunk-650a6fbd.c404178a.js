(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-650a6fbd"],{"9e7c":function(e,t,a){"use strict";a("e55e")},cab8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",[a("li",[a("span",[e._v("仓库名称：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.wid,callback:function(t){e.$set(e.form,"wid",t)},expression:"form.wid"}},[a("el-option",{attrs:{value:"0",label:"全部"}}),e._l(e.widList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.warehouse_name}})}))],2)],1),a("li",[a("span",[e._v("系统商品编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.sys_sku_id,callback:function(t){e.$set(e.form,"sys_sku_id",t)},expression:"form.sys_sku_id"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.getSharedIndex()}}},[e._v("搜 索")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportTableData}},[e._v("导出数据")])],1)])]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],ref:"plTable",attrs:{height:"calc(100vh - 165px)","row-style":{height:"45px"},data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{label:"仓库名称",align:"center","min-width":"100",prop:"warehouse_name"}}),a("el-table-column",{attrs:{prop:"sys_sku_id",label:"系统商品编号","min-width":"120",align:"center"}}),a("el-table-column",{attrs:{label:"商品编号(SkuId)",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.stock&&a.stock.sku_id?a.stock.sku_id:"")+" ")]}}])}),a("el-table-column",{attrs:{label:"商品名称",align:"center","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.stock&&a.stock.goods_name?a.stock.goods_name:"")+" ")]}}])}),a("el-table-column",{attrs:{label:"商品规格",align:"center","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.stock&&a.stock.sku_name?a.stock.sku_name:"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{style:e.colorObj[r.status]&&"color:"+e.colorObj[r.status]},[e._v(e._s(r.status?e.statusObj[r.status]:""))])]}}])}),a("el-table-column",{attrs:{prop:"shared_num",label:"共享库存",align:"center","min-width":"70"}}),a("el-table-column",{attrs:{prop:"consume_num",label:"可使用库存",align:"center","min-width":"80"}}),a("el-table-column",{attrs:{label:"商品单价(RMB)",align:"center","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.stock&&a.stock.sku_price?a.stock.sku_price/100:"")+" ")]}}])}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.stock.sku_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.stock.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.stock.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{"min-width":"130",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.stock.sku_url?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(r.stock.sku_url)}}},[e._v("查看商品链接")]):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],s=a("1da1"),o=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("99af"),a("4de4"),a("96cf"),a("d4ec")),c=a("bee2"),i=function(){function e(t){Object(o["a"])(this,e),this._this=t}return Object(c["a"])(e,[{key:"overseasWh",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("overseasWh",t);case 3:if(a=e.sent,"null"===a){e.next=7;break}return r=JSON.parse(a),e.abrupt("return",{code:200,data:r.warehouse_name});case 7:return e.abrupt("return",{code:200,data:""});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取海外仓库中文名异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSharedIndex",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.getSharedIndex",t);case 3:if(a=e.sent,r=JSON.parse(JSON.parse(a).data),200!==r.code){e.next=7;break}return e.abrupt("return",{code:200,data:r.data});case 7:return e.abrupt("return",{code:r.code,data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取共享给我的海外仓库存列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOverseasWarehouse",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("allWh","");case 3:if(t=e.sent,a=this.isJsonString(t),null===a||void 0===a||!a.length){e.next=7;break}return e.abrupt("return",{code:200,data:a});case 7:return e.abrupt("return",{code:201,data:"仓库列表为空"});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取仓库列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"isJsonString",value:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}}}]),e}(),u=a("0e0b"),l={data:function(){return{isShowLoading:!1,ShareMyBroadStock:new i(this),total:0,pageSize:30,page:1,tableData:[],widList:[],form:{wid:"0",sys_sku_id:"",status:""},statusObj:{1:"正常",2:"已完成",3:"弃用"},colorObj:{1:"green",3:"red"}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOverseasWarehouse();case 2:return t.next=4,e.getSharedIndex();case 4:case"end":return t.stop()}}),t)})))()},methods:{getSharedIndex:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,e.form.page=e.page,e.form.page_num=e.pageSize,t.next=5,e.ShareMyBroadStock.getSharedIndex(e.form);case 5:if(a=t.sent,200!==a.code){t.next=21;break}e.tableData=a.data.data,e.total=a.data.total,r=0;case 10:if(!(r<e.tableData.length)){t.next=19;break}return n=e.tableData[r],t.next=14,e.ShareMyBroadStock.overseasWh(n.wid);case 14:s=t.sent,200===s.code?e.$set(n,"warehouse_name",s.data):e.$set(n,"warehouse_name","");case 16:r++,t.next=10;break;case 19:t.next=22;break;case 21:e.$message.error(a.data);case 22:e.isShowLoading=!1;case 23:case"end":return t.stop()}}),t)})))()},getOverseasWarehouse:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Map,t.next=3,e.ShareMyBroadStock.getOverseasWarehouse();case 3:r=t.sent,200===r.code?(r.data.forEach((function(t){e.widList=e.widList.concat(t.child)})),e.widList=e.widList.filter((function(e){return!a.has(e.id)&&a.set(e.id,1)}))):e.$message.error(r.data);case 5:case"end":return t.stop()}}),t)})))()},openUrl:function(e){window.open(e)},exportTableData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.total){t.next=2;break}return t.abrupt("return",e.$message("暂无导出数据"));case 2:e.isShowLoading=!0,a=[],r=e.form,r.pageSize=e.pageSize,r.page=1;case 7:if(!(a.length<e.total)){t.next=22;break}return t.next=10,e.ShareMyBroadStock.getSharedIndex(r);case 10:if(n=t.sent,200!==n.code){t.next=17;break}o=n.data.data,o.forEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ShareMyBroadStock.overseasWh(r.wid);case 2:n=t.sent,200===n.code?r.warehouse_name=n.data:r.warehouse_name="",a.push(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.page++,t.next=20;break;case 17:return e.$message.error("导出数据错误",n.data),e.isShowLoading=!1,t.abrupt("break",22);case 20:t.next=7;break;case 22:c="<tr>\n          <td>仓库名称</td>\n          <td>系统商品编号</td>\n          <td>商品编号</td>\n          <td>商品名称</td>\n          <td>商品规格</td>\n          <td>状态</td>\n          <td>共享库存</td>\n          <td>可使用库存</td>\n          <td>商品单价(RMB)</td>\n          <td>商品图片</td>\n          <td>商品链接</td>\n        </td>",a.forEach((function(t){c+="<tr>\n        <td>".concat(t.warehouse_name?t.warehouse_name:"\t","</td>\n        <td>").concat(t.sys_sku_id?t.sys_sku_id:"\t","</td>\n        <td style=\"mso-number-format:'@';\">").concat(t.stock&&t.stock.sku_id?t.stock.sku_id:"\t","</td>\n        <td>").concat(t.stock&&t.stock.goods_name?t.stock.goods_name:"\t","</td>\n        <td>").concat(t.stock&&t.stock.sku_name?t.stock.sku_name:"\t","</td>\n        <td>").concat(e.statusObj[t.status]?e.statusObj[t.status]:"\t","</td>\n        <td>").concat(t.shared_num?t.shared_num:"\t","</td>\n        <td>").concat(t.consume_num?t.consume_num:"\t","</td>\n        <td>").concat(t.stock&&t.stock.sku_price?t.stock.sku_price/100:"\t","</td>\n        <td>").concat(t.stock.sku_image||t.stock.real_image_url+"\t","</td>\n         <td>").concat(t.stock&&t.stock.sku_url?t.stock.sku_url:"\t","</td>\n        </tr>")})),e.isShowLoading=!1,Object(u["h"])("共享给我的海外仓库存数据",c);case 26:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getSharedIndex()},handleCurrentChange:function(e){this.page=e,this.getSharedIndex()}}},d=l,h=(a("9e7c"),a("2877")),p=Object(h["a"])(d,r,n,!1,null,"8a8db6e6",null);t["default"]=p.exports},e55e:function(e,t,a){}}]);