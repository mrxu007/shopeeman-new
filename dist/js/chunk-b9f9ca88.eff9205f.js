(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9f9ca88"],{"3a98":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"detai"},[n("div",{staticClass:"condition"},[n("div",{staticClass:"left-box mar-right"},[n("div",{staticClass:"base-box"},[n("span",{staticClass:"base-title"},[t._v("基础操作")]),n("div",{staticClass:"base-item"},[n("div",{staticClass:"row"},[n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.setShotStatusFun}},[t._v("采购状态变更")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.syncAfterOrder("")}}},[t._v("售后同步")]),n("el-checkbox",{staticClass:"mar-left",model:{value:t.mall_compare,callback:function(e){t.mall_compare=e},expression:"mall_compare"}},[t._v("全店同步")])],1),n("div",{staticClass:"row"},[n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.respondCancelRequest("reject","拒绝")}}},[t._v("批量拒绝买家取消订单")]),n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.respondCancelRequest("accept","接受")}}},[t._v("批量接受买家取消订单")])],1),n("div",{staticClass:"row"},[n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){t.colorVisible=!0}}},[t._v("批量标记颜色标识")]),n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.getExportData}},[t._v("导出数据")])],1)])])]),n("div",{staticClass:"right-box"},[n("div",{staticClass:"base-box"},[n("span",{staticClass:"base-title"},[t._v("基础操作")]),n("div",{staticClass:"base-item"},[n("div",{staticClass:"row"},[n("storeChoose",{attrs:{"is-all":!0,"show-mall":!0},on:{changeMallList:t.changeMallList}}),n("div",{staticClass:"row_item"},[n("label",[t._v("创建时间：")]),n("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:function(e){return t.changeTime(e,"cloumn_date1")}},model:{value:t.cloumn_date1,callback:function(e){t.cloumn_date1=e},expression:"cloumn_date1"}})],1)],1),n("div",{staticClass:"row"},[n("div",{staticClass:"row_item"},[n("label",[t._v("售后状态：")]),n("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:t.query.refundStatus,callback:function(e){t.$set(t.query,"refundStatus",e)},expression:"query.refundStatus"}},[n("el-option",{attrs:{label:"全部",value:""}}),n("el-option",{attrs:{label:"取消中",value:"5"}}),n("el-option",{attrs:{label:"已取消",value:"6"}}),n("el-option",{attrs:{label:"退货退款中",value:"7"}}),n("el-option",{attrs:{label:"退款成功",value:"9"}}),n("el-option",{attrs:{label:"退款失败",value:"10"}})],1)],1),n("div",{staticClass:"row_item"},[n("label",[t._v("采购状态：")]),n("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:t.query.shotOrderStatus,callback:function(e){t.$set(t.query,"shotOrderStatus",e)},expression:"query.shotOrderStatus"}},[n("el-option",{attrs:{label:"全部",value:""}}),n("el-option",{attrs:{label:"待拍单",value:"1"}}),n("el-option",{attrs:{label:"拍单中",value:"2"}}),n("el-option",{attrs:{label:"拍单成功",value:"3"}}),n("el-option",{attrs:{label:"拍单失败",value:"4"}})],1)],1),n("div",{staticClass:"row_item"},[n("label",[t._v("颜色标识：")]),n("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:t.query.colorLabelId,callback:function(e){t.$set(t.query,"colorLabelId",e)},expression:"query.colorLabelId"}},[n("el-option",{attrs:{label:"全部",value:0}}),n("el-option",{attrs:{label:"未标识",value:-1}}),n("el-option",{attrs:{label:"已标识",value:-2}}),t._l(t.selectColorList,(function(t){return n("el-option",{key:t.id,style:{color:t.color},attrs:{label:t.name,value:t.id}})}))],2)],1),n("div",{staticClass:"row_item"},[n("label",[t._v("申请时间：")]),n("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:function(e){return t.changeTime(e,"cloumn_date2")}},model:{value:t.cloumn_date2,callback:function(e){t.cloumn_date2=e},expression:"cloumn_date2"}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"row_item"},[n("el-select",{staticStyle:{width:"120px","margin-right":"3px"},attrs:{size:"mini"},on:{change:function(e){t.inputDes=""}},model:{value:t.selType,callback:function(e){t.selType=e},expression:"selType"}},[n("el-option",{attrs:{label:"订单编号",value:"orderSn"}}),n("el-option",{attrs:{label:"采购物流单号",value:"trackingNumber"}}),n("el-option",{attrs:{label:"采购单号",value:"shotOrderSn"}})],1),n("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:""},model:{value:t.inputDes,callback:function(e){t.inputDes=e},expression:"inputDes"}})],1),n("div",{staticClass:"row_item"},[n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.search(1)}}},[t._v("搜索")])],1)]),n("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"row_item"},[n("el-checkbox",{model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}},[t._v("隐藏日志")])],1)])])])])]),n("div",{staticClass:"table-form"},[n("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{border:!1,"use-virtual":"",height:"600px",data:t.tableList,"tooltip-effect":"dark","row-style":{height:"60px !important"},"cell-style":{padding:"0px"}},on:{"selection-change":t.handleSelectionChange}},[n("u-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),n("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.page-1)*t.pageSize+e.$index+1))]}}])}),n("u-table-column",{attrs:{label:"订单编号",prop:"order_sn","min-width":"180px",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(a.order_sn)}}}),n("span",{staticClass:"tableActive",on:{click:function(e){return t.viewDetails("orderDetail",a.order_id,a.mall_info.platform_mall_id)}}},[t._v(t._s(a.order_sn))])])]}}])}),n("u-table-column",{attrs:{label:"站点",prop:"country","min-width":"60px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t._f("chineseSite")(a.mall_info.country)))])]}}])}),n("u-table-column",{attrs:{label:"店铺名称",prop:"mall_info.platform_mall_name",width:"120px",align:"center","show-overflow-tooltip":""}}),n("u-table-column",{attrs:{align:"center",prop:"color_id",label:"颜色标识",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",{style:{background:t.changeColorLabel(e.row.color_id),height:"20px"}}),n("span",[t._v(t._s(t.changeColorLabel(e.row.color_id,"name")))])]}}])}),n("u-table-column",{attrs:{label:"退款金额",prop:"refund_amount","min-width":"100px",align:"center"}}),n("u-table-column",{attrs:{label:"售后状态",prop:"status","min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("p",{style:{color:t.changeOrderStatus(a.status,"color")}},[t._v(t._s(t.changeOrderStatus(a.status)))])]}}])}),n("u-table-column",{attrs:{label:"申请时间",prop:"update_time","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"采购状态",prop:"shot_order_info.shot_status","min-width":"90px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",{style:{color:t.changeShotStatus(a.shot_order_info.shot_status,"color")}},[t._v(t._s(t.changeShotStatus(a.shot_order_info.shot_status)))])]}}])}),n("u-table-column",{attrs:{label:"售后原因",prop:"after_reason","min-width":"150px",align:"center","show-overflow-tooltip":""}}),n("u-table-column",{attrs:{label:"本地备注",prop:"remark","min-width":"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.isChecked?n("el-input",{directives:[{name:"fo",rawName:"v-fo"}],attrs:{size:"mini",resize:"none",placeholder:"本地备注"},on:{blur:function(e){return t.changeRemark(a)}},model:{value:a.remark,callback:function(e){t.$set(a,"remark",e)},expression:"row.remark"}}):n("span",{on:{click:function(t){a.isChecked=!0}}},[n("el-input",{attrs:{disabled:!a.isChecked,size:"mini"},model:{value:a.remark,callback:function(e){t.$set(a,"remark",e)},expression:"row.remark"}})],1)]}}])}),n("u-table-column",{attrs:{label:"商品ID",prop:"goods_info.goods_id","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(a.goods_info.goods_id)}}}),n("span",{staticClass:"tableActive",on:{click:function(e){return t.openUrl(a,"product")}}},[t._v(t._s(a.goods_info.goods_id))])])]}}])}),n("u-table-column",{attrs:{label:"商品数量",prop:"goods_info.goods_count","min-width":"150px",align:"center"}}),n("u-table-column",{attrs:{label:"商品图片",prop:"goods_info.goods_img","min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tooltip",{staticStyle:{width:"32px",height:"32px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t._f("imageRender")([a.goods_info.goods_img])}})],1),n("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t._f("imageRender")([a.goods_info.goods_img,!0])}})],1)]}}])}),n("u-table-column",{attrs:{align:"center",label:"商品类目",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.categoryName)+" ")])]}}])}),n("u-table-column",{attrs:{label:"商品规格",prop:"goods_info.variation_name","min-width":"100px",align:"center"}}),n("u-table-column",{attrs:{label:"采购商品ID",prop:"goods_info.ori_goods_id","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.goods_info.ori_goods_id?n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(a.goods_info.ori_goods_id)}}}):t._e(),a.goods_info.ori_goods_id?n("span",[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.openUrl(a.goods_info.ori_url)}}},[t._v(" "+t._s(a.goods_info.ori_goods_id)+" ")])],1):t._e()]}}])}),n("u-table-column",{attrs:{label:"采购订单号",width:"150","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.shot_order_info.shot_order_sn?n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(n){return t.copy(e.row.shot_order_info.shot_order_sn)}}}):t._e(),n("span",{staticClass:"tableActive"},[t._v(t._s(e.row.shot_order_info.shot_order_sn))])]}}])}),n("u-table-column",{attrs:{label:"采购时间",prop:"shot_order_info.shotted_at","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"采购物流单号",prop:"shot_order_info.shot_tracking_number","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.shot_order_info.shot_tracking_number?n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(a.shot_order_info.shot_tracking_number)}}}):t._e(),a.shot_order_info.shot_tracking_number?n("span",{staticClass:"tableActive"},[t._v(t._s(a.shot_order_info.shot_tracking_number)+" ")]):t._e()]}}])}),n("u-table-column",{attrs:{align:"center",prop:"buy_account_info",label:"采购账号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.shot_order_info.buy_account_info?e.row.shot_order_info.buy_account_info.name:""))]}}])}),n("u-table-column",{attrs:{label:"订单创建时间",prop:"after_created_at","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"订单截止发货时间",prop:"","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"退货物流号",prop:"return_tracking_number","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"退件发货地址",prop:"return_delivery_time","min-width":"200px",align:"center"}}),n("u-table-column",{attrs:{label:"退货地址",prop:"return_address","min-width":"200px",align:"center"}}),n("u-table-column",{attrs:{label:"退货邮寄地址",prop:"return_pickup_address","min-width":"200px",align:"center"}}),n("u-table-column",{attrs:{label:"操作",prop:"","min-width":"150px",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row,o=e.$index;return[n("el-dropdown",{staticStyle:{width:"100px","margin-left":"10px"}},[n("el-button",{staticStyle:{width:"100px"},attrs:{size:"mini",plain:"",type:"primary"}},[t._v(" 更多操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.goodsDelete(a)}}},[t._v("删除商品")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.goodsDelist(a)}}},[t._v("下架商品")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){t.shotVisible=!0,t.multipleSelection=[a]}}},[t._v("修改采购状态")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.syncAfterOrder(a)}}},[t._v("同步此店铺售后订单")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.setColorSingle(a,o)}}},[t._v("订单颜色标识")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.SyncOrderSingle(a)}}},[t._v("同步此订单")])])],1)],1)]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[20,50,100,200],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),n("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}}),t.colorVisible?n("el-dialog",{attrs:{title:"选择颜色标识",visible:t.colorVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.colorVisible=e}}},[n("div",{staticClass:"color-style"},[n("el-table",{ref:"colorTable",staticStyle:{width:"100%"},attrs:{data:t.colorList,"tooltip-effect":"dark",height:"500"}},[n("el-table-column",{attrs:{label:"标识选择",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-radio",{attrs:{label:e.$index},nativeOn:{change:function(n){return t.getCurrentRow(e.row)}},model:{value:t.colorRadio,callback:function(e){t.colorRadio=e},expression:"colorRadio"}})]}}],null,!1,3784151285)}),n("el-table-column",{attrs:{prop:"name",label:"颜色"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"colorBox",style:{background:t.row.color}})]}}],null,!1,482107263)}),n("el-table-column",{attrs:{prop:"name",label:"标识名称"}})],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.setColor(t.multipleSelection)}}},[t._v("设置颜色")])],1)]):t._e(),n("el-dialog",{staticClass:"dialog-color",attrs:{title:"采购状态变更",width:"300px","close-on-click-modal":!1,visible:t.shotVisible},on:{"update:visible":function(e){t.shotVisible=e}}},[n("div",{staticClass:"color-dialog"},[n("div",{staticClass:"form-item"},[n("span",{staticClass:"search-title"},[t._v("状态：")]),n("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"mini",clearable:""},model:{value:t.shotstatus,callback:function(e){t.shotstatus=e},expression:"shotstatus"}},t._l(t.shotstatusList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.setShotStatus(t.multipleSelection)}}},[t._v("保存")])],1)])])],1)},o=[],r=n("1da1"),i=n("ade3"),s=(n("96cf"),n("ac1f"),n("841c"),n("99af"),n("7db0"),n("b0c0"),n("159b"),n("c740"),n("d3b7"),n("25f0"),n("a15b"),n("5319"),n("bcd0")),l=n("feb6"),c=n("0e0b"),u=n("de70"),d=n("e578"),p={components:{storeChoose:l["a"]},data:function(){var t;return t={pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},orderRemark:"",activeRemarkID:0,shotVisible:!1,shotstatus:"",shotstatusList:[{label:"待拍单",value:1},{label:"拍单中",value:2},{label:"拍单成功",value:3},{label:"拍单失败",value:4},{label:"待支付",value:5},{label:"已完成",value:6},{label:"已取消",value:7},{label:"已申请退款",value:8},{label:"退款成功",value:9},{label:"付款失败",value:10}],rowData:"",multipleSelection:[],colorVisible:!1,mall_compare:!0,showConsole:!1,selType:"orderSn",inputDes:"",cloumn_date1:[],cloumn_date2:[],query:{sysMallIds:"",refundStatus:"",color:"",shotOrderStatus:"",afterApplyTime:"",createdTime:"",colorLabelId:0},page:1,pageSize:20,total:0,tableList:[],loading:!1,buyerAccountList:[],searchMallList:[],statusAfterList:s["w"]},Object(i["a"])(t,"showConsole",!0),Object(i["a"])(t,"colorRow",{}),Object(i["a"])(t,"colorList",[]),Object(i["a"])(t,"colorVisible",!1),Object(i["a"])(t,"colorRadio",""),Object(i["a"])(t,"selectColorList",[]),Object(i["a"])(t,"categoryInfo",{}),t},mounted:function(){var t=this;this.loading=!0,this.getBuyerList(),this.getColorList(),this.cloumn_date1=Object(c["e"])(15),setTimeout((function(){t.search()}),2e3)},methods:{SyncOrderSingle:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showConsole=!1,e.$refs.Logs.consoleMsg="",e.$refs.Logs.writeLog("【".concat(t.order_id,"】开始同步，请耐心等待!"),!0),a=new u["a"],n.next=6,a.startSingel(t,e.$refs.Logs.writeLog);case 6:case"end":return n.stop()}}),n)})))()},changeTime:function(t,e,n){var a=Object(c["m"])(new Date(t[0]).getTime(),new Date(t[1]).getTime());if(a>93)return n?this[e][n]=Object(c["e"])(30):this[e]=Object(c["e"])(30),this.$message.warning("只支持查询或导出93天内的数据,请重新选择时间！")},respondCancelRequest:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o,r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n.multipleSelection.length){a.next=2;break}return a.abrupt("return",n.$message.warning("请选择要操作的数据"));case 2:n.showConsole=!1,o=0;case 4:if(!(o<n.multipleSelection.length)){a.next=14;break}return r=n.multipleSelection[o],i={action:t,order_id:r.order_id,mallId:r.mall_info.platform_mall_id},a.next=9,n.$shopeemanService.respondCancelRequest(r.country,i);case 9:s=a.sent,200===s.code?n.$refs.Logs.writeLog("订单【".concat(r.order_sn,"】").concat(e,"买家取消订单操作成功"),!0):403===s.code?n.$refs.Logs.writeLog("订单【".concat(r.order_sn,"】").concat(e,"买家取消订单操作失败，店铺未登录"),!1):s.data.indexOf("order not ready to cancel")>-1?n.$refs.Logs.writeLog("订单【".concat(r.order_sn,"】").concat(e,"该订单状态无法执行此操作，可能已回复，请知悉！"),!0):n.$refs.Logs.writeLog("订单【".concat(r.order_sn,"】").concat(e,"买家取消订单操作失败，").concat(s.data),!1);case 11:o++,a.next=4;break;case 14:case"end":return a.stop()}}),a)})))()},goodsDelete:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$confirm("是否删除该商品?","商品删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["a"])(e,t)})).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},goodsDelist:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$confirm("是否下架该商品?","商品下架",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["b"])(e,t)})).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},changeColorLabel:function(t,e){var n=this.colorList.find((function(e){return e.id==t}));return"name"===e?n&&0!==n.id?n.name:"":n?n.color:""},setColorSingle:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.clickRow=t,n.multipleSelection=[t],n.colorVisible=!0;case 3:case"end":return e.stop()}}),e)})))()},setColor:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a="",t.forEach((function(t,e){a=0===e?t.id:a+","+t.id})),o={sysOrderIds:a,id:e.colorRow.id},n.next=5,e.$api.setColorLabel(o);case 5:r=n.sent,200===r.data.code?(t.forEach((function(t){var n=e.tableList.findIndex((function(e){return e.id==t.id}));n>-1&&(e.tableList[n].color_id=e.colorRow.id)})),e.colorVisible=!1,e.colorRow={},e.$message.success("设置成功")):e.$message.error("设置失败-".concat(r.data.message));case 7:case"end":return n.stop()}}),n)})))()},getColorList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.colorLabelList();case 2:n=e.sent,200===n.data.code&&(t.selectColorList=JSON.parse(JSON.stringify(n.data.data)),t.colorList=n.data.data,a={id:0,name:"取消标识",color:""},t.colorList.unshift(a));case 4:case"end":return e.stop()}}),e)})))()},getCurrentRow:function(t){this.colorRow=t},syncAfterOrder:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,l,c,d,p,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=[],e.showConsole=!1,e.$refs.Logs.consoleMsg="",!t){n.next=7;break}a=[t.mall_info],n.next=16;break;case 7:if(!e.mall_compare){n.next=15;break}return n.next=10,e.$appConfig.getGlobalCacheInfo("allMallInfo","key");case 10:if(o=n.sent,r=o&&JSON.parse(o),r)for(i in r)a.push(r[i]);n.next=16;break;case 15:a=e.searchMallList;case 16:if(0!=a.length){n.next=19;break}return e.$refs.Logs.writeLog("店铺数据为空，同步操作已取消!",!1),n.abrupt("return");case 19:e.$refs.Logs.writeLog("开始同步售后订单，请耐心等待!",!0),l=0;case 21:if(!(l<a.length)){n.next=35;break}c=a[l],d=0;case 24:if(!(d<s["w"].length)){n.next=32;break}return p=s["w"][d],h=new u["a"](c,p,e,e.$refs.Logs.writeLog),n.next=29,h.start("".concat(l+1,"/").concat(a.length),"manual",60);case 29:d++,n.next=24;break;case 32:l++,n.next=21;break;case 35:e.$refs.Logs.writeLog("售后订单同步已完成！！！",!0);case 36:case"end":return n.stop()}}),n)})))()},editRemark:function(t,e){this.activeRemarkID=e,this.orderRemark=this.tableList[t].remark},changeRemark:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isChecked=!1,n.next=3,e.$api.orderSaveRemark({id:t.id,remark:t.remark});case 3:if(a=n.sent,200===a.data.code){n.next=7;break}return e.$message.error("修改失败:".concat(a.data.message),!1),n.abrupt("return");case 7:e.$message.success("修改成功",!0);case 8:case"end":return n.stop()}}),n)})))()},viewDetails:function(t,e,n){var a={type:t,shopId:n,id:e};this.$BaseUtilService.getOrderDetailInfo(n,JSON.stringify(a))},openUrl:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t,"product"!==e){a.next=7;break}return r={platform_mall_id:t.mall_info.platform_mall_id},a.next=5,n.$shopeemanService.getWebUrl(t.country,r);case 5:i=a.sent,o=i+"/product/"+t.mall_info.platform_mall_id+"/"+t.goods_info.goods_id;case 7:n.$BaseUtilService.openUrl(o);case 8:case"end":return a.stop()}}),a)})))()},open:function(t,e,n,a){if("orderID"===a){var o={type:t,shopId:n,id:e};this.$BaseUtilService.getOrderDetailInfo(n,JSON.stringify(o))}"goodsID"===a&&window.BaseUtilBridgeService.openUrl("https://id.xiapibuy.com/product/"+n+"/"+e),"orderGoodsID"===a&&window.BaseUtilBridgeService.openUrl("http://mobile.yangkeduo.com/goods.html?goods_id="+e)},getBuyerList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getBuyerList();case 2:n=e.sent,200===n.data.code&&(t.buyerAccountList=n.data.data);case 4:case"end":return e.stop()}}),e)})))()},getorderDetail:function(t){if(t.shot_order_info.buy_account_info){var e=null;this.buyerAccountList.forEach((function(n){n.name===t.shot_order_info.buy_account_info.name&&n.type===t.shot_order_info.buy_account_info.name&&(e=n)}));var n=this.changeAccountParams(e);this.changeType(n),this.changeAccountParams(n)}else this.$message.warning("云端没有此账户信息，请让拍单人员上传或登录")},changeType:function(t){switch(t){case 1:return 1;case 2:return 0;case 8:return 5;case 10:return 3;case 9:return 7;case 11:return 8;default:return t}},changeAccountParams:function(t){var e={UserNameCache:t.cache_path,Password:"",shotOrderPlatform:this.changeType(t.type),LoginedCookies:t.login_info,UserName:t.name,Cookiestr:JSON.stringify(t.login_info),AccountType:t.type,Ua:t.ua,Country:t.site||""};return e},getExportData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,o,r,i,s,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="",t.searchMallList.forEach((function(t,e){n=0===e?t.id:n+","+t.id})),t.query.createdTime=t.cloumn_date1&&t.cloumn_date1.length>0?t.cloumn_date1.join("/").toString():"",t.query.afterApplyTime=t.cloumn_date2&&t.cloumn_date2.length>0?t.cloumn_date2.join("/").toString():"",a=t.query,a.sysMallIds=n,a[t.selType]=t.inputDes,a.page=1,a.pageSize=200,t.loading=!0,e.next=12,t.$api.aftermarket(a);case 12:o=e.sent,r=o.data,i=[],s=r&&200===r.code&&r.data.data&&r.data.data||[];case 16:if(!s||!s.length){e.next=26;break}return i=i.concat(s),a.page++,e.next=21,t.$api.aftermarket(a);case 21:l=e.sent,c=l.data,s=c&&200===c.code&&c.data.data&&c.data.data||[],e.next=16;break;case 26:t.loading=!1,t.tableToExcel(i);case 28:case"end":return e.stop()}}),e)})))()},tableToExcel:function(t){var e=this;if(t.length){var n=1,a="<tr>\n            <td>编号</td>\n            <td>站点</td>\n            <td>店铺名称</td>\n            <td>颜色标识</td>\n            <td>订单编号</td>\n            <td>退款金额</td>\n            <td>售后状态</td>\n            <td>申请时间</td>\n            <td>售后原因</td>\n            <td>本地备注</td>\n            <td>采购状态</td>\n            <td>商品ID</td>\n            <td>商品数量</td>\n            <td>商品图片</td>\n            <td>商品类目</td>\n            <td>商品规格</td>\n            <td>采购商品ID</td>\n            <td>采购订单号</td>\n            <td>采购时间</td>\n            <td>采购物流单号</td>\n            <td>采购账号</td>\n            <td>订单创建时间</td>\n            <td>退货物流号</td>\n            <td>退货地址</td>\n            <td>退货邮寄地址</td>\n            </tr>",o=t;o.forEach((function(t){a+="<tr><td>".concat(n++,"</td>\n                <td>").concat(t.mall_info&&t.mall_info.country?e.$filters.chineseSite(t.mall_info.country):"\t","</td>\n                <td>").concat(t.mall_info&&t.mall_info.platform_mall_name?t.mall_info.platform_mall_name:"\t","</td>\n                <td>").concat(t.color_id?e.changeColorLabel(t.color_id,"name"):"-\t","</td>\n                <td style=\"mso-number-format:'@';\">").concat(t.order_sn?t.order_sn:"\t","</td>\n                <td>").concat(t.refund_amount?t.refund_amount:"\t","</td>\n                <td>").concat(t.status?Object(s["d"])(t.status):"\t","</td>\n                <td>").concat(t.update_time?t.update_time:"\t","</td>\n                <td>").concat(t.after_reason?t.after_reason:"\t","</td>\n                <td>").concat(t.remark?t.remark:"\t","</td>\n                <td>").concat(t.shot_order_info&&t.shot_order_info.shot_statu?Object(s["g"])(t.shot_order_info.shot_status):"\t","</td>\n                <td>").concat(t.goods_info.goods_id?t.goods_info.goods_id:"\t","</td>\n                <td>").concat(t.goods_info.goods_count?t.goods_info.goods_count:"\t","</td>\n                <td>").concat(e.$filters.imageRender([t.image])+"\t","</td>\n                <td>").concat(t.goods_info.goods_category_id?t.goods_info.goods_category_id:"\t","</td>\n                <td>").concat(t.goods_info.goods_spec?t.goods_info.goods_spec:"\t","</td>\n                <td>").concat(t.shot_order_info.shot_order_sn?t.shot_order_info.shot_order_sn:"\t","</td>\n                <td>").concat(t.shot_order_info.shotted_at?t.shot_order_info.shotted_at:"\t","</td>\n                <td>").concat(t.shot_order_info.shot_tracking_number?t.shot_order_info.shot_tracking_number:"\t","</td>\n                 <td>").concat(t.shot_order_info.buy_account?t.shot_order_info.buy_account:"\t","</td>\n              <td>").concat(t.after_created_at?t.after_created_at:"\t","</td>\n               <td>").concat(t.return_tracking_number?t.return_tracking_number:"\t","</td>\n               <td>").concat(t.return_address?t.return_address:"\t","</td>\n               <td>").concat(t.return_pickup_address?t.return_pickup_address:"\t","</td>\n                </tr>")})),Object(c["i"])("虾皮售后数据",a)}else this.$message.warning("没有可导出的数据！")},generateUUID:function(){var t=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(t+=performance.now());var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}));return e},handleSelectionChange:function(t){this.multipleSelection=t},indexMethod:function(t){return t=t+1+(this.page-1)*this.pageSize,t},setShotStatusFun:function(){this.multipleSelection.length?this.shotVisible=!0:this.$message.warning("请勾选需要操作的数据")},setShotStatus:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.length){n.next=2;break}return n.abrupt("return",e.$message.warning("请选择数据"));case 2:if(""!==e.shotstatus){n.next=4;break}return n.abrupt("return",e.$message.warning("请选择变更状态"));case 4:return e.isLoading=!0,a=[],o={sysOrderIds:"",status:e.shotstatus},t.forEach((function(t){a.push(t.sys_order_id)})),o.sysOrderIds=a.toString()||"",n.prev=9,n.next=12,e.$api.updateShotStatus(o);case 12:r=n.sent,i=r.data,200===i.code?(e.$message.success("操作成功"),t.forEach((function(t){var n=e.tableList.findIndex((function(e){return e.id==t.id}));n>-1&&(e.tableList[n].shot_order_info.shot_status=e.shotstatus)}))):e.$message.error("操作失败"),e.shotVisible=!1,e.isLoading=!1,n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](9),e.shotVisible=!1,e.isLoading=!1;case 23:case"end":return n.stop()}}),n,null,[[9,19]])})))()},setColorLabelFun:function(){this.multipleSelection.length?this.colorVisible=!0:this.$message.warning("请勾选需要操作的数据")},changeMallList:function(t){this.searchMallList=t},getCategoryInfo:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n.categoryInfo[e]){a.next=4;break}return a.abrupt("return",n.categoryInfo[e]);case 4:return n.categoryInfo[e]="",a.next=7,n.$commodityService.getCategoryTbInfo(t,e.toString(),"0","");case 7:if(o=a.sent,r=o&&JSON.parse(o),!(r&&200===r.code&&r.data.categories&&r.data.categories.length)){a.next=15;break}return i=r.data.categories[0].category_cn_name,n.categoryInfo[e]=i,a.abrupt("return",i);case 15:return a.abrupt("return","");case 16:case"end":return a.stop()}}),a)})))()},search:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={},o=[],e.page=t||e.page,e.searchMallList.forEach((function(t){o.push(t.id)})),e.query.createdTime=e.cloumn_date1&&e.cloumn_date1.length>0?e.cloumn_date1.join("/").toString():"",e.query.afterApplyTime=e.cloumn_date2&&e.cloumn_date2.length>0?e.cloumn_date2.join("/").toString():"",a=JSON.parse(JSON.stringify(e.query)),a.sysMallIds=o.toString(),a[e.selType]=e.inputDes,a.page=e.page,a.pageSize=e.pageSize,e.loading=!0,e.tableList=[],n.prev=13,n.next=16,e.$api.aftermarket(a);case 16:r=n.sent,e.loading=!1,200===r.status?(i=r.data.data.data||[],e.tableList=i,e.total=r.data.data.total,e.$nextTick((function(){e.getCate()}))):e.$message.error("数据请求失败"),n.next=24;break;case 21:n.prev=21,n.t0=n["catch"](13),e.loading=!1;case 24:case"end":return n.stop()}}),n,null,[[13,21]])})))()},getCate:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.tableList.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.isChecked=!1,e.next=3,t.getCategoryInfo(n.country,n.goods_info.goods_category_id);case 3:n.categoryName=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},changeOrderStatus:s["d"],changeShotStatus:s["g"],handleSizeChange:function(t){this.page=1,this.pageSize=t,this.search()},handleCurrentChange:function(t){this.page=t,this.search()},copy:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var n=document.createRange();n.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(n),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(a){}e.parentElement.removeChild(e)}}},h=p,m=(n("ec42"),n("2877")),f=Object(m["a"])(h,a,o,!1,null,null,null);e["default"]=f.exports},"4c28":function(t,e,n){},8992:function(t,e,n){"use strict";n("4c28")},b34e:function(t,e,n){},e578:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var a=n("1da1");n("96cf"),n("a9e3");function o(t,e){return r.apply(this,arguments)}function r(){return r=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[{id:Number(n.goods_info.goods_id),unlisted:!0}],o={shop_id:n.mall_info.platform_mall_id},t.next=4,e.$shopeemanService.handleGoodsDelist(n.country,o,a);case 4:r=t.sent,200===r.code?e.$message.success("商品下架成功！"):e.$message.error("".concat(r.data));case 6:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}function i(t,e){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={product_id_list:[Number(n.goods_info.goods_id)],shop_id:n.mall_info.platform_mall_id},t.next=3,e.$shopeemanService.handleGoodsDelete(n.country,a);case 3:o=t.sent,200===o.code?e.$message.success("商品删除成功！"):e.$message.error("".concat(o.data));case 5:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}},ec42:function(t,e,n){"use strict";n("b34e")},feb6:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{staticClass:"storeChooseUL"},[t.isMall?n("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):n("li",{style:t.isReset&&"margin-bottom: 5px"},[n("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),n("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?n("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),n("li",{style:t.isReset&&"margin-bottom: 5px"},[n("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),n("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupIdList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})})),1)],1),n("li",{style:t.isReset&&"margin-bottom: 5px"},[n("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),n("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:""},on:{"visible-change":function(e){return t.filterMall("")}},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[n("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteShowList,(function(e,a){return t.showMall(e,a)?n("el-option",{key:a,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}}):t._e()}))],2)],1),t.isReset?n("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[n("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},o=[],r=n("1da1"),i=n("b85c"),s=n("2909"),l=(n("96cf"),n("d81d"),n("fb6a"),n("caad"),n("2532"),n("d3b7"),n("25f0"),n("99af"),n("6062"),n("3ca3"),n("ddb0"),n("4de4"),n("159b"),n("c740"),n("7db0"),n("7646")),c=n("2b0e");c["default"].directive("loadmore",{bind:function(t,e){var n=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");n.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t,e){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var n=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var a=e.indexOf("")>-1,o=t.indexOf("")>-1;a!==o?this.groupId=o?Object(s["a"])(this.groupIdList.map((function(t){return t.id}))):[]:o?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){n.isAllowSet2=!0,n.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var n=this;if(this.isAllowSet1){this.isAllowSet1=!1;var a=this.isShowName,o=e.includes(""),r=t.includes("");if(o!==r||e.toString()===t.toString()&&this.isShowNameAll)if(r&&(!a||a&&!this.isShowNameAll)){var l=a&&Object(s["a"])(this.siteShowList.map((function(t){return t.platform_mall_id})))||[""].concat(Object(s["a"])(this.siteList.map((function(t){return t.platform_mall_id})))),c=new Set([].concat(Object(s["a"])(l),Object(s["a"])(e)));this.site=Object(s["a"])(c),this.isShowNameAll=!0,a&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(a){var d=a&&Object(s["a"])(this.siteShowList.map((function(t){return t.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,h=d.length>this.site.length&&d||this.site;u=new Set(this.site);var m,f=Object(i["a"])(h);try{for(f.s();!(m=f.n()).done;){var g=m.value;p.includes(g)&&u.delete(g)}}catch(_){f.e(_)}finally{f.f()}u.delete("")}this.site=Object(s["a"])(u)}else r?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1;setTimeout((function(){n.changeMallList(),n.filterMall(a),n.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.site=[],a=e.countryVal,o=[],!(e.jsonMallData.length>0)){n.next=7;break}o=e.jsonMallData,n.next=12;break;case 7:return n.next=9,e.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:r=n.sent,o=JSON.parse(r)||[],e.jsonMallData=JSON.parse(r)||[];case 12:if(!(o.length>0)){n.next=17;break}1===t&&(e.siteList=""===a?o:o.filter((function(t){return t.country===a}))),2===t&&(0===e.groupId.length?e.siteList=[]:(e.siteList=[],e.groupId.forEach((function(t){o.forEach((function(n){a?t===n.group_id&&a===n.country&&e.siteList.push(n):t===n.group_id&&e.siteList.push(n)}))})))),n.next=22;break;case 17:return i={country:"",mallGroupIds:""},n.next=20,e.mallListAPIInstance.ddMallGoodsGetMallList(i);case 20:s=n.sent,200===s.code?(e.$appConfig.temporaryCacheInfo("save","mallAllData",s.data),l=s.data||[],e.siteList=l,e.jsonMallData=l,e.siteList=""===a?l:l.filter((function(t){return t.country===a}))):e.$message.error("获取分组、店铺列表失败");case 22:0===e.groupIdList.length&&(e.groupIdList=[{group_name:"全部",id:""}],e.groupId=[""],e.siteList.forEach((function(t){var n=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&n<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=[""]}),10);case 24:case"end":return n.stop()}}),n)})))()},changeMallList:function(){var t=this,e=[],n="";this.site.forEach((function(a){if(a){var o=t.siteList.find((function(t){return t.platform_mall_id===a}));e.push(o),n+=a+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(n=e.length!==this.siteList.length&&n||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:n,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))},filterMall:function(t){var e=this,n=t&&this.isShowName!==t?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){e.isShowName=t||"";var n=e.siteList;t&&(n=e.siteList.filter((function(e){var n=e.mall_alias_name||e.platform_mall_name;return n.includes(t)}))),e.mallShowIndex=0,e.siteShowList=n}),n)},showMall:function(t,e){var n=t.mall_alias_name||t.platform_mall_name,a=this.site[0]===t.platform_mall_id;return a||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||n.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteShowList.length>this.showMallNumber){var n=0;t?(n=this.mallShowIndex+10,n=n<this.siteShowList.length-this.showMallNumber&&n||this.siteShowList.length-this.showMallNumber):(n=this.mallShowIndex-10,n=n>0&&n||0),n!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30),this.mallShowIndex=n}}}},d=u,p=(n("8992"),n("2877")),h=Object(p["a"])(d,a,o,!1,null,null,null);e["a"]=h.exports}}]);