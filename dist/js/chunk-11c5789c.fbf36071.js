(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-11c5789c"],{"1e45":function(e,t,r){"use strict";r.r(t);var a=r("1da1"),n=(r("96cf"),r("d81d"),r("ac1f"),r("5319"),r("d3b7"),r("25f0"),r("b64b"),r("99af"),r("4d90"),r("0e0b"),{data:function(){return{saveLoading:!1,props:{lazy:!0,that:this,lazyLoad:function(e,t){var r=this,n=e.level;setTimeout(Object(a.a)(regeneratorRuntime.mark((function a(){var i,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=[],0===n)return a.next=4,r.that.$BaseUtilService.getPddAddressModel("0");a.next=8;break;case 4:o=a.sent,i=o.map((function(e){return e.label=e.RegionName,e.leaf=3<=e.RegionType,e.value=e.RegionId,e})),a.next=12;break;case 8:return a.next=10,r.that.$BaseUtilService.getPddAddressModel(e.value);case 10:o=a.sent,i=o.map((function(e){return e.label=e.RegionName,e.leaf=3<=e.RegionType,e.value=e.RegionId,e}));case 12:t(i||[]);case 13:case"end":return a.stop()}}),a)}))),1e3)}},form:{packageCode:"",selectTime:[(new Date).getTime()-6048e5,new Date]},markMyOrderDialogFormVisible:!1,markMyOrderDialogForm:{id:"",orderSn:""},applyDialogFormVisible:!1,applyForm:{lists:[{gpcId:0,packageCode:""}],returnContact:"",returnPhoneNumber:"",returnAddress:"",returnRemarks:""},applyRegion:[],tableData:[],buttonStatus:{getList:!1},selectCateFinally:""}},mounted:function(){this.getExceptionNoOrderIndex()},methods:{targetCate:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:0<e.length&&(t.selectCateFinally="",a=t.$refs.refTbCate.getCheckedNodes()[0],n={},a.pathLabels.map((function(e){n[e]||(n[e]="1")})),t.applyForm.returnAddress=Object.keys(n).toString().replace(/,/g,""));case 1:case"end":return r.stop()}}),r)})))()},getExceptionNoOrderIndex:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r,a,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form.selectTime){t.next=3;break}return e.$message.error("请先选择时间"),t.abrupt("return");case 3:if(e.buttonStatus.getList)return t.abrupt("return");t.next=5;break;case 5:return e.buttonStatus.getList=!0,r=e.formatSearch(e.form.selectTime[0]),a=e.formatSearch(e.form.selectTime[1]),n=e.form.packageCode,i={},r&&a&&(i.packageTime="".concat(r,"/").concat(a)),n&&(i.packageCode=n),t.next=14,e.$api.getExceptionNoOrderIndex(i);case 14:200===(i=t.sent).data.code?e.tableData=i.data.data.data:e.$message.error(i.data.message),e.buttonStatus.getList=!1;case 17:case"end":return t.stop()}}),t)})))()},markMyOrderHandle:function(e){this.markMyOrderDialogForm={id:"",orderSn:""},this.markMyOrderDialogForm.id=e.id,this.markMyOrderDialogFormVisible=!0},markMyOrderDialogHandle:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.markPackageToMy(e.markMyOrderDialogForm);case 2:200===(r=t.sent).data.code?(e.markMyOrderDialogFormVisible=!1,e.$message({message:"标记成功",type:"success"}),e.getExceptionNoOrderIndex()):e.$message.error(r.data.message);case 4:case"end":return t.stop()}}),t)})))()},applyDialogHandle:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.applyForm.returnContact){t.next=3;break}return e.$message.error("收件人不能为空"),t.abrupt("return");case 3:if(e.applyForm.returnPhoneNumber){t.next=5;break}return t.abrupt("return",e.$message.error("联系电话不能为空"));case 5:if(e.applyRegion&&e.applyRegion.length){t.next=7;break}return t.abrupt("return",e.$message.error("退件地区不能为空"));case 7:if(e.applyForm.returnAddress){t.next=9;break}return t.abrupt("return",e.$message.error("详细地址不能为空"));case 9:if(e.applyForm.returnRemarks){t.next=11;break}return t.abrupt("return",e.$message.error("退件备注不能为空"));case 11:return e.saveLoading=!0,t.next=14,e.$api.applicationForreJection(e.applyForm);case 14:200===(r=t.sent).data.code?(e.applyDialogFormVisible=!1,e.$message({message:"申请退件成功",type:"success"})):(r=(r=r.data.data[0]).substring(r.indexOf(":")+1),e.$message.error(r)),e.saveLoading=!1;case 17:case"end":return t.stop()}}),t)})))()},applyReturnPartsHandle:function(e){this.applyForm.lists=[],this.applyForm.lists.push({gpcId:e.id,packageCode:e.package_code}),this.applyForm.returnPhoneNumber="",this.applyForm.returnContact="",this.applyForm.returnRemarks="",this.applyForm.returnAddress="",this.applyRegion=[],this.applyDialogFormVisible=!0},formatSearch:function(e){var t=new Date(e),r=t.getFullYear(),a=(t.getMonth()+1+"").padStart(2,0),n=(t.getDate()+"").padStart(2,0),i=(t.getHours()+"").padStart(2,0);e=(t.getMinutes()+"").padStart(2,0),t=(t.getSeconds()+"").padStart(2,0);return"".concat(r,"-").concat(a,"-").concat(n," ").concat(i,":").concat(e,":").concat(t)}}});r("29f2"),r=r("2877"),n=Object(r.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"CatchNoticeSignForPackage"},[r("div",{staticClass:"search"},[r("div",{staticClass:"rowOne"},[r("div",{staticClass:"signingTime"},[e._v("签收时间："),r("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.form.selectTime,callback:function(t){e.$set(e.form,"selectTime",t)},expression:"form.selectTime"}})],1),r("div",{staticClass:"logisticsNumber"},[e._v(" 采购物流单号： "),r("el-input",{attrs:{size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.packageCode,callback:function(t){e.$set(e.form,"packageCode",t)},expression:"form.packageCode"}})],1),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getExceptionNoOrderIndex}},[e._v("搜索")])],1),r("div",{staticClass:"rowTwo"},[e._v("说       明：包裹已签收，但是匹配不到订单，仓库无法发货，需及时匹配订单，此界面只显示近7天的数据包裹异常数据")]),r("div",{staticClass:"rowThree"},[e._v("操作指引：请在此界面手动标记订单号或者在【订单列表】右键【同步此订单】获取订单信息")])]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.buttonStatus.getList,expression:"buttonStatus.getList"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#f5f7fa"},data:e.tableData,height:"calc(100vh - 135px)"}},[r("el-table-column",{attrs:{type:"index",label:"序列号",width:"80",align:"center"}}),r("el-table-column",{attrs:{label:"仓库",prop:"warehouse_name","min-width":"100",align:"center"}}),r("el-table-column",{attrs:{prop:"package_time",label:"签收时间","min-width":"140",align:"center"}}),r("el-table-column",{attrs:{label:"包裹图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.row.package_image,"preview-src-list":[e.row.package_image]}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])]}}])}),r("el-table-column",{attrs:{prop:"package_code",label:"采购物流单号","min-width":"140",align:"center"}}),r("el-table-column",{attrs:{label:"操作","min-width":"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.markMyOrderHandle(t.row)}}},[e._v("标记为我的订单")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.applyReturnPartsHandle(t.row)}}},[e._v("申请退件")])]}}])})],1),r("el-dialog",{attrs:{title:"标记为我的订单",visible:e.markMyOrderDialogFormVisible,width:"300px"},on:{"update:visible":function(t){e.markMyOrderDialogFormVisible=t}}},[r("span",{staticStyle:{color:"red","margin-left":"17px"}},[e._v("温馨提示：请填写子订单号")]),r("el-form",{attrs:{model:e.markMyOrderDialogForm,"label-position":"right","label-width":"80px"}},[r("el-form-item",{attrs:{label:"订单编号:"}},[r("el-input",{staticStyle:{width:"165px"},attrs:{autocomplete:"off",size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.markMyOrderDialogForm.orderSn,callback:function(t){e.$set(e.markMyOrderDialogForm,"orderSn",t)},expression:"markMyOrderDialogForm.orderSn"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.markMyOrderDialogHandle}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"填写退件信息",visible:e.applyDialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.applyDialogFormVisible=t}}},[r("el-form",{attrs:{model:e.applyForm,"label-position":"right","label-width":"80px"}},[r("el-form-item",{attrs:{label:"包裹号:"}},[r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.applyForm.lists[0].packageCode))])]),r("el-form-item",{attrs:{label:"收件人:"}},[r("el-input",{staticStyle:{width:"178px"},attrs:{size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnContact,callback:function(t){e.$set(e.applyForm,"returnContact",t)},expression:"applyForm.returnContact"}})],1),r("el-form-item",{attrs:{label:"联系电话:"}},[r("el-input",{staticStyle:{width:"178px"},attrs:{size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnPhoneNumber,callback:function(t){e.$set(e.applyForm,"returnPhoneNumber",t)},expression:"applyForm.returnPhoneNumber"}})],1),r("el-form-item",{attrs:{label:"退件地区:"}},[r("el-cascader",{ref:"refTbCate",attrs:{props:e.props,clearable:"",size:"mini"},on:{change:e.targetCate},model:{value:e.applyRegion,callback:function(t){e.applyRegion=t},expression:"applyRegion"}})],1),r("el-form-item",{attrs:{label:"详细地址:"}},[r("el-input",{attrs:{type:"textarea",resize:"none",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnAddress,callback:function(t){e.$set(e.applyForm,"returnAddress",t)},expression:"applyForm.returnAddress"}})],1),r("el-form-item",{attrs:{label:"退件备注:"}},[r("el-input",{attrs:{type:"textarea",resize:"none",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnRemarks,callback:function(t){e.$set(e.applyForm,"returnRemarks",t)},expression:"applyForm.returnRemarks"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{loading:e.saveLoading,type:"primary",size:"mini"},on:{click:e.applyDialogHandle}},[e._v("保存")])],1)],1)],1)}),[],!1,null,"9ceb4fec",null);t.default=n.exports},"29f2":function(e,t,r){"use strict";r("9280")},9280:function(e,t,r){}}]);