(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55d27ee4"],{"05e3":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{class:["category-content",{"category-column":!0===e.isColumn}]},[a("li",{class:[{"column-item":!0===e.isColumn}]},[a("span",{style:{width:e.spanWidth}},[e._v("站点：")]),a("el-select",{attrs:{size:"mini",filterable:"",disabled:e.isSelect},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",{class:[{"column-item":!0===e.isColumn}]},[a("span",{style:{width:e.spanWidth}},[e._v("一级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(t){return e.getCategory(t,1)}},model:{value:e.category1,callback:function(t){e.category1=t},expression:"category1"}},[e.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.categoryList1,(function(e,t){return a("el-option",{key:t,attrs:{label:e.category_name+"("+e.category_cn_name+")",value:e.category_id}})}))],2)],1),3===e.level||2===e.level?a("li",{class:[{"column-item":!0===e.isColumn}]},[a("span",{style:{width:e.spanWidth}},[e._v("二级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(t){return e.getCategory(t,2)}},model:{value:e.category2,callback:function(t){e.category2=t},expression:"category2"}},[e.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.categoryList2,(function(e,t){return a("el-option",{key:t,attrs:{label:e.category_name+"("+e.category_cn_name+")",value:e.category_id}})}))],2)],1):e._e(),3===e.level?a("li",{class:[{"column-item":!0===e.isColumn}]},[a("span",{style:{width:e.spanWidth}},[e._v("三级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(t){return e.getCategory(t,3)}},model:{value:e.category3,callback:function(t){e.category3=t},expression:"category3"}},[e.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.categoryList3,(function(e,t){return a("el-option",{key:t,attrs:{label:e.category_name+"("+e.category_cn_name+")",value:e.category_id}})}))],2)],1):e._e()])])},n=[],o=a("1da1"),i=(a("96cf"),a("a9e3"),{name:"CategoryChoose",props:{isSelect:{type:Boolean,default:!1},spanWidth:{type:String,default:""},isAll:{type:Boolean,default:!1},isCategoryAll:{type:Boolean,default:!0},level:{type:Number,default:3},isColumn:{type:Boolean,default:!1}},data:function(){return{countryVal:null,countries:this.$filters.countries_option,countries_id:{TH:"4",MY:"5",TW:"3",SG:"1",PH:"7",VN:"6",ID:"2",BR:"8",MX:"9",CO:"10",CL:"11",PL:"12"},category1:"",categoryList1:[],category2:"",categoryList2:[],category3:"",categoryList3:[],categoryList:[]}},watch:{countryVal:{handler:function(e,t){this.category1="",this.category2="",this.category3="",this.categoryList1=[],this.categoryList2=[],this.categoryList3=[],this.getCategory(e,0)},deep:!0},category1:function(e,t){this.category2="",this.category3="",this.categoryList2=[],this.categoryList3=[],this.sendParent()},category2:function(e,t){this.category3="",this.categoryList3=[],this.sendParent()}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{chageSite:function(e){this.countryVal=e},getCategory:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a.countryVal){r.next=3;break}return a.sendParent(),r.abrupt("return");case 3:if(a.level!==t){r.next=6;break}return a.sendParent(),r.abrupt("return");case 6:if(0===t||e){r.next=11;break}return a["category".concat(t+1)]="",a["categoryList".concat(t+1)]=[],a.sendParent(),r.abrupt("return");case 11:return n=[a.countryVal,0!==t?e&&""!==e?e:"":"0","1","tbCategory"],r.next=14,a.$commodityService.getCategory(n);case 14:if(o=r.sent,o){r.next=17;break}return r.abrupt("return",a.$message.warning("获取失败"));case 17:if(i=JSON.parse(o),200!==i.code){r.next=23;break}c=i.data,c.categories&&(a["categoryList".concat(t+1)]=c.categories||[]),r.next=24;break;case 23:return r.abrupt("return",a.$message.warning("获取失败"));case 24:a.sendParent();case 25:case"end":return r.stop()}}),r)})))()},sendParent:function(){if(this.categoryList=[],this.category1){var e=[this.category1];this.categoryList=e}if(this.category1&&this.category2){var t=[this.category1,this.category2];this.categoryList=t}if(this.category1&&this.category2&&this.category3){var a=[this.category1,this.category2,this.category3];this.categoryList=a}var r={country:this.countryVal,categoryFirst:this.category1,categorySecond:this.category2,categoryThird:this.category3,categoryList:this.categoryList,platformId:this.countries_id[this.countryVal]};this.$emit("setCategory",r)}}}),c=i,s=(a("c79a"),a("2877")),l=Object(s["a"])(c,r,n,!1,null,"65cef3da",null);t["a"]=l.exports},"2a5e2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-black"},[a("div",{staticClass:"tool-bar"},[a("div",{staticClass:"tool-row"},[a("category-choose",{attrs:{"is-all":!0,level:2},on:{setCategory:e.setCategory}}),a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("类目来源：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.categorySource,callback:function(t){e.categorySource=t},expression:"categorySource"}},e._l(e.categorySourceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"tool-item mar-right",staticStyle:{"margin-left":"0px"}},[a("span",{staticStyle:{"white-space":"nowrap"}},[e._v("关键词：")]),a("el-input",{attrs:{placeholder:"按关键词搜索查询",size:"mini",clearable:""},model:{value:e.categoryKeyWord,callback:function(t){e.categoryKeyWord=t},expression:"categoryKeyWord"}})],1)],1),a("div",{staticClass:"tool-row"},[a("el-button",{staticClass:"tool-item ",attrs:{type:"primary",size:"mini"},on:{click:e.searchTableList}},[e._v("查 询")]),a("el-button",{staticClass:"tool-item ",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addBlackVisible=!0,e.addkey++}}},[e._v("添 加")]),a("el-button",{staticClass:"tool-item",attrs:{type:"primary",size:"mini"},on:{click:e.batchDelete}},[e._v("批量删除")])],1)]),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{data:e.tableData,"tooltip-effect":"dark","max-height":"680"},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{width:"80px",label:"站点",prop:"country",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("chineseSite")(t.row.country)))]}}])}),a("el-table-column",{attrs:{"min-width":"60px",label:"项目来源",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(0===t.row.uid?"公有":"私有"))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"一级类目","show-overflow-tooltip":"",prop:"warehouse_name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.parent_category_list&&t.row.parent_category_list.length&&t.row.parent_category_list[0]?t.row.parent_category_list[0].category_name+"("+t.row.parent_category_list[0].category_cn_name+")":""))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"二级类目","show-overflow-tooltip":"",prop:"warehouse_name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.parent_category_list&&t.row.parent_category_list.length&&t.row.parent_category_list[1]?t.row.parent_category_list[1].category_name+"("+t.row.parent_category_list[1].category_cn_name+")":""))])]}}])}),a("el-table-column",{attrs:{"min-width":"120px",label:"末级类目","show-overflow-tooltip":"",prop:"warehouse_name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.parent_category_list&&t.row.parent_category_list.length&&t.row.parent_category_list[2]?t.row.parent_category_list[2].category_name+"("+t.row.parent_category_list[2].category_cn_name+")":""))])]}}])}),a("el-table-column",{attrs:{"min-width":"60px",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$dayjs(t.row.created_at).format("YYYY-MM-DD")))]}}])}),a("el-table-column",{attrs:{"min-width":"60px",label:"操作",prop:"warehouse_name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[0!==r.uid?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.delInfo(r.id)}}},[e._v("删除")]):e._e()],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[100,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("el-dialog",{attrs:{title:"添加黑名单",visible:e.addBlackVisible,width:"500px"},on:{"update:visible":function(t){e.addBlackVisible=t}}},[a("div",{staticClass:"addBlack-dialog"},[a("category-choose",{key:e.addkey,attrs:{level:3,"is-category-all":!1,"is-column":!0},on:{setCategory:e.setAddCategory}}),a("div",{staticClass:"addBlack-item bottom-item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addCategoryBlack}},[e._v("确 定")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addBlackVisible=!1}}},[e._v("取 消")])],1)],1)])],1)},n=[],o=a("1da1"),i=(a("7db0"),a("96cf"),a("05e3")),c={components:{CategoryChoose:i["a"]},data:function(){return{addkey:"0",countryVal:"",countries:this.$filters.countries_option,categorySource:"0",categorySourceList:[{value:"0",label:"全部"},{value:"-1",label:"公有"},{value:"1",label:"私有"}],categoryKeyWord:"",multipleSelection:[],pageSize:100,currentPage:1,total:0,addBlackVisible:!1,tableLoading:!1,selectCategory:{country:"",categoryFirst:"",categorySecond:"",categoryThird:"",categoryList:[]},tableData:[],addSelectCategory:{country:"",categoryFirst:"",categorySecond:"",categoryThird:"",categoryList:[]}}},mounted:function(){this.searchTableList()},methods:{setAddCategory:function(e){this.addSelectCategory=e},setCategory:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectCategory=e;case 1:case"end":return a.stop()}}),a)})))()},searchTableList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={type:e.categorySource,country:e.selectCategory.country,page:e.currentPage,perpage:e.pageSize,parentCategoryTree:e.selectCategory.categoryList},""===a.country&&delete a.country,e.tableLoading=!0,t.next=5,e.$commodityService.getBlackCategory(a);case 5:if(r=t.sent,r){t.next=8;break}return t.abrupt("return",e.$message.warning("添加失败"));case 8:e.tableData=[],n=JSON.parse(r),n&&200===n.code?(e.total=n.data.total,e.tableData=n.data.data):e.$message.warning(n.msg),e.tableLoading=!1;case 12:case"end":return t.stop()}}),t)})))()},addCategoryBlack:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[e.addSelectCategory.categoryList[e.addSelectCategory.categoryList.length-1],e.addSelectCategory.country,e.addSelectCategory.categoryList],t.next=3,e.$commodityService.addBlackCategory(a);case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return",e.$message.warning("添加失败"));case 6:if(n=JSON.parse(r),!n||200!==n.code){t.next=14;break}return e.$message.success("添加成功"),e.addBlackVisible=!1,t.next=12,e.searchTableList();case 12:t.next=15;break;case 14:e.$message.error(n.msg);case 15:case"end":return t.stop()}}),t)})))()},delInfo:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e,a.next=3,t.$commodityService.deleteBlackCategory(r);case 3:if(n=a.sent,n){a.next=6;break}return a.abrupt("return",t.$message.warning("删除失败"));case 6:o=JSON.parse(n),o&&200===o.code?t.$message.success("删除成功"):t.$message.error(o.msg),t.searchTableList();case 9:case"end":return a.stop()}}),a)})))()},batchDelete:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=2;break}return t.abrupt("return",e.$message.warning("请勾选要删除的数据！"));case 2:a=0;case 3:if(!(a<e.multipleSelection.length)){t.next=19;break}if(0!==e.multipleSelection[a].uid){t.next=7;break}return e.$message.warning("公有数据不可删除！"),t.abrupt("continue",16);case 7:return r=e.multipleSelection[a].id,t.next=10,e.$commodityService.deleteBlackCategory(r);case 10:if(n=t.sent,n){t.next=14;break}return t.abrupt("return",e.$message.warning("删除失败"));case 14:o=JSON.parse(n),o&&200===o.code?e.$message.success("删除成功"):e.$message.error(o.msg);case 16:a++,t.next=3;break;case 19:e.searchTableList();case 20:case"end":return t.stop()}}),t)})))()},changeTypeName:function(e,t){var a="",r=t.find((function(t){return t.value==e}));return a=r?r.label:"",a},selectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.currentPage=e,this.searchTableList()},handleSizeChange:function(e){this.pageSize=e,this.searchTableList()}}},s=c,l=(a("795d"),a("2877")),u=Object(l["a"])(s,r,n,!1,null,"69239e5c",null);t["default"]=u.exports},"36be":function(e,t,a){},"795d":function(e,t,a){"use strict";a("36be")},c79a:function(e,t,a){"use strict";a("eb7d")},eb7d:function(e,t,a){}}]);