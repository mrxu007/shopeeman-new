(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-75d5f0ca"],{"25cd":function(e,t,a){},"5dd5":function(e,t,a){"use strict";a.r(t);var n=a("1da1"),i=(a("159b"),a("99af"),a("96cf"),a("d4ec")),l=a("bee2"),r=function(){function e(t){Object(i.a)(this,e),this._this=t}var t;return Object(l.a)(e,[{key:"getOutOfStockList",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.created_time?"".concat(this._this.$dayjs(t.created_time[0]).format("YYYY-MM-DD 00:00:00"),"/").concat(this._this.$dayjs(t.created_time[1]).format("YYYY-MM-DD 23:59:59")):"",a={wid:t.wid,oversea_order_sn:t.oversea_order_sn,logistic_no:t.logistic_no,created_time:a,status:t.status},e.next=5,this._this.getOutOfStockList(a);case 5:e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"getOutOfStockList-catch：".concat(e.t0)});case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return t.apply(this,arguments)})}]),e}(),o=a("0e0b"),s={data:function(){return{detailsVisible:!1,isShowLoading:!1,BroadDeliveryOrder:new r(this),total:0,pageSize:30,page:1,tableData:[],multipleSelection:[],form:{wid:17,oversea_order_sn:"",logistic_no:"",created_time:"",status:""}}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.form.created_time=[(new Date).getTime()-3888e6,new Date],e.getOutOfStockList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getOutOfStockList:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,e.form.page=e.page,e.form.pageSize=e.pageSize,t.next=5,e.BroadDeliveryOrder.getOutOfStockList(e.form);case 5:t.sent,e.isShowLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},getDetails:function(){},exportTableData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n,i,l,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isShowLoading=!0,a=[],n=e.total%30==0?e.total/30:Math.floor(e.total/30)+1,i=0;case 4:if(i<n)return e.form.page=i,e.form.pageSize=e.pageSize,t.next=9,e.StrockUpHome.getHomeWarehouse(e.form);t.next=14;break;case 9:200===(l=t.sent).code?l.data.data.forEach((function(e){e.home_stocking_forecast_sub.forEach((function(t){var n={};n.package_code=e.package_code,n.purchase_order_sn=e.purchase_order_sn,n.wid=e.wid,n.created_at=e.created_at,n.purchase_num=t.purchase_num,n.sign_num=t.sign_num,n.remark=e.remark,n.status=t.status,n.sku_id=t.sku_id,n.goods_name=t.goods_name,n.sku_spec=t.sku_spec,n.sku_image=t.sku_image,n.goods_url=t.goods_url,a.push(n)}))})):e.$refs.Logs.writeLog("导出数据错误",l.data);case 11:i++,t.next=4;break;case 14:if(null!=a&&a.length){t.next=18;break}return e.isShowLoading=!1,e.$message("暂无数据导出"),t.abrupt("return");case 18:r="<tr>\n          <td>预报物流单号</td>\n          <td>采购单号</td>\n          <td>中转仓</td>\n          <td>预报时间</td>\n          <td>商品预购买数量</td>\n          <td>商品签收数量</td>\n          <td>备注</td>\n          <td>商品状态</td>\n          <td>商品编号(SKU)</td>\n          <td>商品名称</td>\n          <td>商品规格</td>\n          <td>商品图片</td>\n          <td>商品链接</td>\n        </td>",a.forEach((function(t){r+="<tr>\n        <td>".concat(t.package_code||"\t","</td>\n        <td>").concat(t.purchase_order_sn||"\t","</td>\n        <td>").concat(t.wid||"\t","</td>\n        <td>").concat(t.created_at||"\t","</td>\n        <td>").concat(t.purchase_num||"\t","</td>\n        <td>").concat(t.sign_num||"\t","</td>\n        <td>").concat(t.remark||"\t","</td>\n        <td>").concat(t.status?e.skuStatusObj[t.status]:"\t","</td>\n        <td>").concat(t.sku_id||"\t","</td>\n        <td>").concat(t.goods_name||"\t","</td>\n        <td>").concat(t.sku_spec||"\t","</td>\n        <td>").concat(t.sku_image||"\t","</td>\n        <td>").concat(t.goods_url||"\t","</td>\n        </tr>")})),e.isShowLoading=!1,Object(o.i)("国内仓预报单数据",r);case 22:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getHomeWarehouse()},handleCurrentChange:function(e){this.page=e,this.getHomeWarehouse()},handleSelectionChange:function(e){this.multipleSelection=e}}};a("6537"),a=a("2877"),s=Object(a.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("仓库名称：")]),a("el-select",{attrs:{size:"mini",filterable:""}},e._l(4,(function(e,t){return a("el-option",{key:t})})),1)],1),a("li",[a("span",[e._v("订单出库状态：")]),a("el-select",{attrs:{size:"mini",filterable:""}},e._l(4,(function(e,t){return a("el-option",{key:t})})),1)],1),a("li",[a("span",[e._v("出库单创建时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.created_time,callback:function(t){e.$set(e.form,"created_time",t)},expression:"form.created_time"}})],1)]),a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("订单编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"}})],1),a("li",[a("span",[e._v("平台物流单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.getOutOfStockList()}}},[e._v("搜 索")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.isDeleteLoading},on:{click:function(t){return e.deleteHomeForecast(e.multipleSelection,2)}}},[e._v("批量取消订单")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportTableData}},[e._v("导出数据")])],1)])]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],ref:"plTable",attrs:{height:"calc(100vh - 250px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50",fixed:""}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{prop:"country",label:"站点","min-width":"120",align:"center",fixed:""}}),a("el-table-column",{attrs:{prop:"oversea_order_sn",label:"订单编号","min-width":"150",align:"center"}}),a("el-table-column",{attrs:{prop:"logistic_no",label:"平台物流单号",align:"center","min-width":"150"}}),a("el-table-column",{attrs:{prop:"wid",label:"所属仓库",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{prop:"created_at",label:"出库单创建时间",align:"center","min-width":"140"}}),a("el-table-column",{attrs:{prop:"deliver_time",label:"订单出库时间",align:"center","min-width":"140"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{prop:"goods_num",label:"出库商品总数",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{prop:"remark",label:"仓库备注",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"出库商品总价(RMB)",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{label:"出库商品详情",align:"center","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("取消订单")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.detailsVisible=!0,e.getDetails(n)}}},[e._v("补件")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"95"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.deleteHomeForecast(n,1)}}},[e._v("删 除")])]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"操作状态",align:"center","min-width":"140"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}})],1),a("el-dialog",{staticClass:"details-dialog",attrs:{title:"预报商品详情",visible:e.detailsVisible,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.detailsVisible=t}}},[a("el-table",{attrs:{height:"420",data:e.detailsData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"预报物流单号",prop:"package_code",fixed:""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品状态"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.status?e.skuStatusObj[t.status]:"")+" ")]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品编号(SKU)",prop:"sku_id"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"签收时间",prop:"sign_time"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品名称",prop:"goods_name"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品购买数量",prop:"purchase_num"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品签收数量",prop:"sign_num"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品规格",prop:"sku_spec","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[t.sku_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.sku_image,width:"300px",height:"300px"}})]),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.sku_image}})],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.goods_url?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(n.goods_url)}}},[e._v("查看商品链接")]):e._e()]}}])})],1)],1),a("el-dialog",{staticClass:"foreign-dialog",attrs:{title:"预报中转仓备货商品",visible:e.foreignVisible,width:"1200px","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.foreignClose},on:{"update:visible":function(t){e.foreignVisible=t}}},[a("div",{staticStyle:{display:"flex"}},[a("div",[a("ul",[a("li",[a("span",[e._v("中转仓库：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.foreignWid,callback:function(t){e.foreignWid=t},expression:"foreignWid"}},e._l(e.foreignWidList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name+"("+e.detail_address+")",value:e.id}})})),1)],1)]),a("ul",[a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isforeignClose},on:{click:e.itselfGoodsImport}},[e._v("自有商品导入")]),a("el-upload",{ref:"importRef",staticStyle:{margin:"0 10px"},attrs:{disabled:e.isforeignClose,accept:".xls, .xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.importTemplate,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{attrs:{disabled:e.isforeignClose,data:e.importTemplateData,size:"mini",type:"primary"}},[e._v(" 批量Excel导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadTemplate}},[e._v("下载预报模板")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isforeignClose},on:{click:e.exportTickData}},[e._v("导出勾选数据")])],1)])])]),a("span",{staticStyle:{color:"red"}},[e._v(" 提示：1：应仓库要求，预报单中需包含商品的体积(长宽高)，需下载最新版的预报模板     2：导入商品会导入到对应的中转仓库，请选择好再导入 ")]),a("el-table",{attrs:{height:"420",data:e.foreignData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}},on:{"selection-change":e.foreignSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50",fixed:""}}),a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"预报物流单号",prop:"packageCode",fixed:""}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"采购单号",prop:"purchaseOrderSn"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品编号(SKU)"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.skuList[0].sku_id)+" ")]}}])}),a("el-table-column",{attrs:{width:"130",align:"center",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.skuList[0].goods_name)+" ")]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品数量"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.skuList[0].purchase_num)+" ")]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品单价(RMB)"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.skuList[0].sku_price)+" ")]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品规格","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.skuList[0].sku_spec)+" ")]}}])}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[t.skuList[0].sku_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.skuList[0].sku_image,width:"300px",height:"300px"}})]),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.skuList[0].sku_image}})],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.skuList[0].goods_url?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(n.skuList[0].goods_url)}}},[e._v("查看商品链接")]):e._e()]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"备注",prop:"remark","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"操作状态",prop:"status",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[a("span",{style:t.color&&"color:"+t.color},[e._v(e._s(t.status))])]}}])})],1)],1)],1)}),[],!1,null,"19dc8ee3",null);t.default=s.exports},6537:function(e,t,a){"use strict";a("25cd")}}]);