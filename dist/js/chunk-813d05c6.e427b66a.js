(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-813d05c6"],{"0ae9":function(t,e,a){"use strict";a("0bbd")},"0bbd":function(t,e,a){},"4cf2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contaniner"},[a("header",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"关键词采集",name:"first"}},[a("div",{staticClass:"keyword-container"},[a("div",{staticClass:"keyword-banner-bar"},t._l(t.keyworBar,(function(e){return a("div",{key:e.value,staticClass:"barChilren",class:{active:t.currentKeywordPlatform===e.value},on:{click:function(a){return t.selectPlatform(e)}}},[t._v(t._s(e.label))])})),0),a("div",{staticClass:"keyword-banner-content"},[a("div",{staticClass:"con-sub-1"},[a("div",{staticClass:"item"},[a("p",[t._v("开始页码:")]),a("el-input",{attrs:{size:"mini"},model:{value:t.commonAttr.StartPage,callback:function(e){t.$set(t.commonAttr,"StartPage",e)},expression:"commonAttr.StartPage"}}),a("p",[t._v("总页码:")]),a("el-input",{attrs:{size:"mini"},model:{value:t.commonAttr.EndPage,callback:function(e){t.$set(t.commonAttr,"EndPage",e)},expression:"commonAttr.EndPage"}})],1),a("div",{staticClass:"item"},[a("p",[t._v("销售区间:")]),a("el-input",{attrs:{size:"mini"},model:{value:t.commonAttr.StartSales,callback:function(e){t.$set(t.commonAttr,"StartSales",e)},expression:"commonAttr.StartSales"}}),a("p",[t._v("-")]),a("el-input",{attrs:{size:"mini"},model:{value:t.commonAttr.EndSales,callback:function(e){t.$set(t.commonAttr,"EndSales",e)},expression:"commonAttr.EndSales"}})],1),a("div",{staticClass:"item"},[a("p",[t._v("价格区间:")]),a("el-input",{attrs:{size:"mini"},model:{value:t.commonAttr.StartPrice,callback:function(e){t.$set(t.commonAttr,"StartPrice",e)},expression:"commonAttr.StartPrice"}}),a("p",[t._v("-")]),a("el-input",{attrs:{size:"mini"},model:{value:t.commonAttr.EndPrice,callback:function(e){t.$set(t.commonAttr,"EndPrice",e)},expression:"commonAttr.EndPrice"}})],1)]),a("div",{staticClass:"con-sub-2"},[a("div",{staticClass:"item"},[a("p",[t._v("关键词(一行一个)")]),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),a("div",{staticClass:"item"},[a("p",[t._v("过滤关键词(一行一个)")]),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.commonAttr.keyFilter,callback:function(e){t.$set(t.commonAttr,"keyFilter",e)},expression:"commonAttr.keyFilter"}})],1)]),a("div",{staticClass:"con-sub-3"},[a("div",{staticClass:"item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.StartCollection}},[t._v("开始采集")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("取消采集")])],1),a("div",{staticClass:"item"},[a("p",[t._v("起:")]),a("el-input",{attrs:{size:"mini",placeholder:""}}),a("p",[t._v("止:")]),a("el-input",{attrs:{size:"mini",placeholder:""}})],1),a("div",{staticClass:"item"},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("收藏商品")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("编辑上新")])],1),a("div",{staticClass:"item"},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("插件采集")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("清理全部")])],1),a("div",{staticClass:"item"},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("批量删除")])],1)]),a("div",{staticClass:"con-sub-4"},[a("div",{staticClass:"con-sub5-log",domProps:{innerHTML:t._s(t.consoleMsg)}})])])])]),a("el-tab-pane",{attrs:{label:"商品链接采集",name:"second"}}),a("el-tab-pane",{attrs:{label:"整店采集",name:"third"}}),a("el-tab-pane",{attrs:{label:"定时任务补偿",name:"fourth"}})],1)],1),a("article",[a("u-table",{ref:"plTable",attrs:{"max-height":t.Height,"use-virtual":"","data-changes-scroll-top":!1,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-key":"id","big-data-checkbox":!0,border:!1},on:{"selection-change":t.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection"}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("u-table-column",{attrs:{align:"center",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("div",{staticStyle:{"justify-content":"center",display:"flex"}},[a("img",{staticStyle:{width:"56px",height:"56px"},attrs:{src:e.Image}})])]}}])}),a("u-table-column",{attrs:{align:"center",label:"上家ID",prop:"GoodsId"}}),a("u-table-column",{attrs:{align:"center",label:"标题",prop:"Title",width:"500px",fit:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("p",{staticStyle:{height:"56px","white-space":"normal"}},[t._v(t._s(r.Title))])]}}])}),a("u-table-column",{attrs:{align:"center",label:"类目",prop:"CategoryName"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("p",{staticStyle:{height:"56px","white-space":"normal"}},[t._v(t._s(r.CategoryName))])]}}])}),a("u-table-column",{attrs:{align:"center",label:"价格",prop:"Price"}}),a("u-table-column",{attrs:{align:"center",label:"销量",prop:"Sales"}}),a("u-table-column",{attrs:{align:"center",label:"发货地"}}),a("u-table-column",{attrs:{align:"center",label:"来源",prop:"Origin"}}),a("u-table-column",{attrs:{align:"center",label:"操作"}}),a("u-table-column",{attrs:{align:"center",label:"操作结果"}})],1)],1)])},n=[],i=a("2909"),o=a("1da1"),s=(a("96cf"),a("498a"),a("ac1f"),a("1276"),a("5319"),a("99af"),a("4d63"),a("25f0"),a("d3b7"),a("d4ec")),c=a("bee2"),l=a("ade3"),u=(a("d81d"),function(){function t(e){Object(s["a"])(this,t),Object(l["a"])(this,"_this",null),this._this=e,this.platformId=null,this.commonAttr=null,this.keywordAttr=null,this.delayTime=1e3,this.GoodsData=null}return Object(c["a"])(t,[{key:"_initKeyWord",value:function(t,e){this.platformId=t,this.commonAttr=e}},{key:"keywordSearch",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GoodsData=null,this.GoodsData=[],a=this.commonAttr.StartPage-0,r=this.commonAttr.EndPage-0,n={},n["key"]=e,t.prev=6;case 7:if(!a){t.next=39;break}t.t0=this.platformId,t.next=1===t.t0||1.2===t.t0?11:2===t.t0?13:4===t.t0?14:5===t.t0?15:7===t.t0?16:8===t.t0?17:9===t.t0?18:10===t.t0?19:11===t.t0?20:12===t.t0?21:13===t.t0?22:15===t.t0?23:24;break;case 11:return n["page"]=a,t.abrupt("break",24);case 13:return t.abrupt("break",24);case 14:return t.abrupt("break",24);case 15:return t.abrupt("break",24);case 16:return t.abrupt("break",24);case 17:return t.abrupt("break",24);case 18:return t.abrupt("break",24);case 19:return t.abrupt("break",24);case 20:return t.abrupt("break",24);case 21:return t.abrupt("break",24);case 22:return t.abrupt("break",24);case 23:return t.abrupt("break",24);case 24:return t.next=26,this._this.$collectService.querySpuByKeyworld(this.platformId,n);case 26:if(l=t.sent,l=JSON.parse(l),200!==l.Code&&this.writeLog("采集第".concat(a,"页第一部分失败：").concat(l.Code,"-").concat(l.Msg),!1),u=null===(o=l)||void 0===o||null===(s=o.ListItem)||void 0===s?void 0:s.length,this.writeLog("采集第".concat(a,"页第一部分，采集到约").concat(u,"条"),!0),u){t.next=33;break}return t.abrupt("break",39);case 33:if((c=this.GoodsData).push.apply(c,Object(i["a"])(l.ListItem)),!(a>=r)){t.next=36;break}return t.abrupt("break",39);case 36:a++,t.next=7;break;case 39:t.next=44;break;case 41:t.prev=41,t.t1=t["catch"](6),this.writeLog("采集第".concat(a,"页第一部分，捕获错误").concat(t.t1),!1);case 44:return this.GoodsData=this.GoodsData.map((function(t,e){return t.id=e+1,t.information="",t})),t.abrupt("return",{code:200,data:this.GoodsData});case 46:case"end":return t.stop()}}),t,this,[[6,41]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"keywordSearchTwo",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GoodsData=null,this.GoodsData=[],a=this.commonAttr.StartPage-0,r=this.commonAttr.EndPage-0,n={},n["key"]=e,a=this.commonAttr.StartPage-0,t.prev=7;case 8:if(!a){t.next=25;break}return n["page"]=a,t.next=12,this._this.$collectService.querySpuByKeyworld(1.1,n);case 12:if(l=t.sent,l=JSON.parse(l),200!==l.Code&&this.writeLog("采集第".concat(a,"页第二部分失败：").concat(l.Code,"-").concat(l.Msg),!1),u=null===(o=l)||void 0===o||null===(s=o.ListItem)||void 0===s?void 0:s.length,this.writeLog("采集第".concat(a,"页第二部分，采集到约").concat(u,"条"),!0),u){t.next=19;break}return t.abrupt("break",25);case 19:if((c=this.GoodsData).push.apply(c,Object(i["a"])(l.ListItem)),!(a>=r)){t.next=22;break}return t.abrupt("break",25);case 22:a++,t.next=8;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](7),this.writeLog("采集第".concat(a,"页第二部分，捕获错误").concat(t.t0),!1);case 30:return this.GoodsData=this.GoodsData.map((function(t,e){return t.id=e+1,t.information="",t})),t.abrupt("return",{code:200,data:this.GoodsData});case 32:case"end":return t.stop()}}),t,this,[[7,27]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"writeLog",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this._this.consoleMsg&&t){var a=e?"green":"red",r=this.dateFormat(new Date(Date.now()),"hh:mm:ss");this._this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}}},{key:"dateFormat",value:function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e}},{key:"delay",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var a=setTimeout((function(){clearTimeout(a),t(!0)}),e)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()),d=u,m={1:"拼多多",1.2:"拼多多优惠采集",2:"淘宝",4:"京东",5:"自有",7:"货源甲",8:"1688",9:"Lazada",10:"京喜",11:"虾皮",12:"速卖通",13:"天猫淘宝海外平台",15:"货老板云仓"};function p(t){var e=[];return Array.isArray(t)?(t.map((function(t){m[t]&&e.push({label:m[t],value:t})})),e):e}var b={props:{baseConfig:{type:Object,required:!1,default:function(){return{keywordConfig:[1,1.2,2,8,9,10,11,12]}}}},data:function(){return{Height:650,activeName:"first",CollectKeyWordApInstance:new d(this),multipleSelection:[],goodsList:[],buttonStatus:{keyword:!1},currentKeywordPlatform:1,commonAttr:{StartPage:1,EndPage:2,StartSales:0,EndSales:999999999,StartPrice:0,EndPrice:999999999,keyFilter:""},key:"",consoleMsg:"",keywordAttr:{}}},computed:{keyworBar:function(){var t=p(this.baseConfig.keywordConfig);return t}},created:function(){},mounted:function(){},methods:{handleClick:function(t,e){},handleSelectionChange:function(t){this.multipleSelection=t},selectPlatform:function(t){this.currentKeywordPlatform=t.value},StartCollection:function(){switch(this.activeName){case"first":this["keywordSearch"]();break;case"second":this["linksSearch"]();break;case"third":this["entireMallSearch"]();break;default:this.$message.error("采集操作非法！！！！");break}},handleKeyFactory:function(){try{var t=this.key.trim();return t?(t=this.key.replace(/\s/g,";").split(";"),{code:200,data:t}):{code:-3,data:"参数不能为空"}}catch(e){return{code:-2,data:"关键词格式不规范：".concat(e)}}},keywordSearch:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.handleKeyFactory(),200===a.code){e.next=3;break}return e.abrupt("return",-2===a.code?t.$message.error(""):void 0);case 3:r=a.data,n=a.data.length,o=t.currentKeywordPlatform,t.buttonStatus.keyword=!0,t.consoleMsg="",t.goodsList=[],t.$refs.plTable.reloadData(t.goodsList),t.CollectKeyWordApInstance._initKeyWord(o,t.commonAttr),t.writeLog("开始采集搜索........",!0),t.writeLog("开始采集".concat(m[o],"的商品......."),!0),s=0;case 14:if(!(s<n)){e.next=26;break}return l=r[s],t.writeLog("采集关键字：".concat(l),!0),e.next=19,t.CollectKeyWordApInstance.keywordSearch(l);case 19:if(u=e.sent,200===u.code){e.next=22;break}return e.abrupt("continue",23);case 22:(c=t.goodsList).push.apply(c,Object(i["a"])(u.data));case 23:s++,e.next=14;break;case 26:t.writeLog("".concat(m[o],"：共采集：").concat(t.goodsList.length,"条"),!0),t.writeLog("".concat(m[o],"的商品采集完毕........"),!0),r=null,t.buttonStatus.keyword=!1;case 30:case"end":return e.stop()}}),e)})))()},linksSearch:function(){},entireMallSearch:function(){},writeLog:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this.consoleMsg&&t){var a=e?"green":"red",r=this.dateFormat(new Date(Date.now()),"hh:mm:ss");this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}},dateFormat:function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e},delay:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=setTimeout((function(){clearTimeout(a),e(!0)}),t)})));case 1:case"end":return e.stop()}}),e)})))()}}},h=b,g=(a("0ae9"),a("2877")),f=Object(g["a"])(h,r,n,!1,null,"f200e452",null);e["default"]=f.exports}}]);