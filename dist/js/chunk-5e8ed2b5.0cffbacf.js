(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e8ed2b5"],{"31af":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("b85c"),a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("ade3"),s=(n("96cf"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("99af"),n("7db0"),n("4de4"),n("ac1f"),n("466d"),n("4d63"),n("25f0"),n("bda5")),u=n("6ac8"),l=n("bb97"),m=n("a91f"),g=function(){function e(t){Object(o["a"])(this,e),Object(c["a"])(this,"$appConfig",new m["a"]),Object(c["a"])(this,"$baseUtilService",new u["a"]),Object(c["a"])(this,"$LogisticBridgeService",new l["a"]),Object(c["a"])(this,"$api",s["a"]),Object(c["a"])(this,"userInfo",this.$appConfig.getUserInfo()),Object(c["a"])(this,"logCallback",void 0),Object(c["a"])(this,"buyerAccountContainer",null),Object(c["a"])(this,"ordersContainer",null),Object(c["a"])(this,"allSetting",void 0),Object(c["a"])(this,"_that",null),Object(c["a"])(this,"writeLog",void 0),this.writeLog=t}return Object(i["a"])(e,[{key:"start",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,a){var o,i,c,s,u,l,m,g,p,f,h=this,_=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=_.length>3&&void 0!==_[3]?_[3]:[],this.writeLog=a,this._that=t,e.next=5,this.getGlobalSetting();case 5:if(i=[],!o.length){e.next=10;break}i=o,e.next=13;break;case 10:return e.next=12,this.getOrdersFromServer();case 12:i=e.sent;case 13:if(i=this.filterOrder(i),i.length){e.next=17;break}return this.writeLog("目前没有需要获取物流单号的订单",!1),e.abrupt("return");case 17:this.writeLog("获取到【".concat(i.length,"】条需要同步物流的订单"),!0),c=new Map,s=function(e){var t=i[e],r=t.shot_order_info.buy_account_info?t.shot_order_info.buy_account_info.name:"",a=t.shot_order_info.buy_account_info?t.shot_order_info.buy_account_info.type:"",o=t.shot_order_sn||t.order_sn;if(!r)return h.writeLog("【".concat(e+1,"/").concat(i.length,"】订单【").concat(o,"】对应的买手号为空，请检查！"),!1),"continue";if(10001==a||1e4==a)return h.writeLog("【".concat(e+1,"/").concat(i.length,"】订单【").concat(o,"】对应的买手号【").concat(r,"】无需同步采购物流！"),!0),"continue";var s=n.find((function(e){return e.name===r}));if(!s)return h.writeLog("【".concat(e+1,"/").concat(i.length,"】订单【").concat(o,"】对应的买手号【").concat(r,"】没有找到，请登录对应买手号."),!1),"continue";if(c.has(s)){var u=c.get(s);u.push(t)}else c.set(s,[t])},u=0;case 21:if(!(u<i.length)){e.next=28;break}if(l=s(u),"continue"!==l){e.next=25;break}return e.abrupt("continue",25);case 25:u++,e.next=21;break;case 28:if(0===c.size){e.next=49;break}m=Object(r["a"])(c.keys()),e.prev=30,m.s();case 32:if((g=m.n()).done){e.next=41;break}return p=g.value,f=c.get(p),this.buyerAccountContainer=p,this.ordersContainer=f,e.next=39,this.syncLogistic();case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e["catch"](30),m.e(e.t0);case 46:return e.prev=46,m.f(),e.finish(46);case 49:case"end":return e.stop()}}),e,this,[[30,43,46,49]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getOrdersFromServer",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.getOrdersFromServerCycle();case 3:return n=e.sent,200===n.code?t=n.data.orderList:this.writeLog("获取需要同步物流的订单失败原因:".concat(n.code,": ").concat(n.data),!1),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getOrdersFromServerCycle",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.getOriginalTrackingNumberEmpty();case 3:if(t=e.sent,200!==t.data.code){e.next=7;break}return n={total:t.data.data.length,orderList:t.data.data},e.abrupt("return",{code:200,data:n});case 7:return e.abrupt("return",{code:t.data.code,data:t.data.message});case 10:if(e.prev=10,e.t0=e["catch"](0),!e.t0.response){e.next=14;break}return e.abrupt("return",{code:e.t0.response.status,data:e.t0.response.data.message});case 14:return e.abrupt("return",{code:-2,data:"getOrdersFromServerCycle-catch:".concat(e.t0)});case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"filterOrder",value:function(e){return e.filter((function(e){return!e.logistics||!e.logistics.tracking_number&&e.shot_order_info&&e.shot_order_info.shot_order_sn&&e.buy_account_info}))}},{key:"syncLogistic",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.buyerAccountContainer||!this.ordersContainer){e.next=23;break}e.t0=this.buyerAccountContainer.type,e.next=1===e.t0?4:2===e.t0?7:8===e.t0?10:9===e.t0?13:10===e.t0?16:11===e.t0?19:22;break;case 4:return e.next=6,this.syncLogisticAggregation("拼多多");case 6:return e.abrupt("break",23);case 7:return e.next=9,this.syncLogisticAggregation("淘宝");case 9:return e.abrupt("break",23);case 10:return e.next=12,this.syncLogisticAggregation("1688");case 12:return e.abrupt("break",23);case 13:return e.next=15,this.syncLogisticAggregation("lazada");case 15:return e.abrupt("break",23);case 16:return e.next=18,this.syncLogisticAggregation("京喜");case 18:return e.abrupt("break",23);case 19:return e.next=21,this.syncLogisticAggregation("shopee");case 21:return e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeType",value:function(e){switch(e){case 1:return 1;case 2:return 0;case 8:return 5;case 10:return 3;case 9:return 7;case 11:return 8;default:return e}}},{key:"changeAccountParams",value:function(e){var t={UserNameCache:e.cache_path,Password:"",shotOrderPlatform:this.changeType(e.type),LoginedCookies:e.login_info,UserName:e.name,Cookiestr:JSON.stringify(e.login_info),AccountType:e.type,Ua:e.ua,Country:e.site||""};return t}},{key:"syncLogisticAggregation",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,s,u,l,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=this.ordersContainer,r=n.length,a=this.changeAccountParams(this.buyerAccountContainer),o=0;case 4:if(!(o<r)){e.next=42;break}if(i=n[o],c=i.shot_order_info.shot_order_sn||"",c){e.next=10;break}return this.writeLog("(".concat(t,")订单【").concat(i.order_sn,"】获取上家物流失败,订单无采购单号"),!1),e.abrupt("continue",39);case 10:return e.prev=10,e.next=13,this.$baseUtilService.getOriginLogistics(a.shotOrderPlatform,c,a);case 13:if(s=e.sent,200===s.Code){e.next=17;break}return this.writeLog("(".concat(t,")订单【").concat(c,"】获取上家物流失败, ").concat(s.Msg,"(买手号: ").concat(a.UserName,")"),!1),e.abrupt("continue",39);case 17:if(s.TrackingNumber){e.next=20;break}return this.writeLog("(".concat(t,")订单【").concat(c,"】未发货，(买手号: ").concat(a.UserName,")"),!1,"#ff9900"),e.abrupt("continue",39);case 20:return u=this.changetbOrderName(s.TrackingName),l={sysOrderId:i.id,trackingNumber:s.TrackingNumber,trackingNumberCompany:s.TrackingName},e.next=24,this.saveOrderLogistics(l);case 24:if(m=e.sent,200===m.code){e.next=28;break}return this.writeLog("(".concat(t,")订单【").concat(c,"】上报物流失败原因: ").concat(m.code,": ").concat(m.data),!1),e.abrupt("continue",39);case 28:this.writeLog("(".concat(t,")订单【").concat(c,"】同步物流成功"),!0),i.logistics||(i.logistics={}),i.logistics.tracking_number=s.TrackingNumber,i.logistics.logistics_company=s.TrackingName,i.logistics.logistics_company_code=u,e.next=39;break;case 35:return e.prev=35,e.t0=e["catch"](10),this.writeLog("订单【".concat(c,"获取上家物流失败原因(").concat(t,"): ").concat(JSON.stringify(e.t0)),!1),e.abrupt("continue",39);case 39:o++,e.next=4;break;case 42:this.ordersContainer=null,this.buyerAccountContainer=null;case 44:case"end":return e.stop()}}),e,this,[[10,35]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGlobalSetting",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$appConfig.getUserConfig();case 3:t=e.sent,n=JSON.parse(t),this.allSetting=n,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.allSetting=null;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveOrderLogistics",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.uploadTrackingNumber(t);case 3:if(n=e.sent,200!==n.data.code){e.next=6;break}return e.abrupt("return",{code:200,data:"物流信息上报成功"});case 6:return e.abrupt("return",{code:n.data.code,data:n.data.message});case 9:if(e.prev=9,e.t0=e["catch"](0),!e.t0.response){e.next=13;break}return e.abrupt("return",{code:e.t0.response.status,data:e.t0.response.data.message});case 13:return e.abrupt("return",{code:-2,data:"sync-service-saveOrderLogistics-catch:".concat(JSON.stringify(e.t0))});case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delay",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=setTimeout((function(){clearTimeout(n),e(!0)}),t)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changetbOrderName",value:function(e){var t=JSON.parse(JSON.stringify(e));switch(t){case(t.match(RegExp(/圆通速递/))||{}).input:t="YTO";break;case(t.match(RegExp(/圆通快递/))||{}).input:t="YTO";break;case(t.match(RegExp(/韵达快递/))||{}).input:t="YUNDA";break;case(t.match(RegExp(/天天快递/))||{}).input:t="TTKDEX";break;case(t.match(RegExp(/顺丰速运/))||{}).input:t="SF";break;case(t.match(RegExp(/顺丰快递/))||{}).input:t="SF";break;case(t.match(RegExp(/百世快递/))||{}).input:t="HTKY";break;case(t.match(RegExp(/申通快递/))||{}).input:t="STO";break;case(t.match(RegExp(/中通快递/))||{}).input:t="ZTO";break;case(t.match(RegExp(/优速快递/))||{}).input:t="UC";break;case(t.match(RegExp(/EMS/))||{}).input:t="EMS";break;case(t.match(RegExp(/国通快递/))||{}).input:t="GTO";break;case(t.match(RegExp(/其它/))||{}).input:t="OTHER";break;case(t.match(RegExp(/极兔速递/))||{}).input:t="OTHER";break;case(t.match(RegExp(/邮政快递包裹/))||{}).input:t="POSTB";break;case(t.match(RegExp(/EMS经济快递/))||{}).input:t="EYB";break;default:t="";break}return t}}]),e}()},"53ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},"651f":function(e,t,n){},bb97:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("d4ec"),a=n("bee2"),o=function(){function e(){Object(r["a"])(this,e),this.nativeService=window["LogisticBridgeService"]}return Object(a["a"])(e,[{key:"getLogisticByOrderIdAsync",value:function(e,t){return this.nativeService.getLogisticByOrderIdAsync(e,t)}}]),e}()},c2f6:function(e,t,n){"use strict";n("651f")},d1dd:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("53ca"),a=n("b85c"),o=n("2909"),i=n("1da1"),c=n("d4ec"),s=n("bee2"),u=n("ade3"),l=(n("96cf"),n("a9e3"),n("ac1f"),n("1276"),n("a434"),n("159b"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("b680"),n("d81d"),n("99af"),n("25f0"),n("c740"),n("f68b")),m=n("0e0b"),g=n("2b0e"),p=null,f=function(){function e(){Object(c["a"])(this,e),Object(u["a"])(this,"mallTest",""),Object(u["a"])(this,"MallAPIInstance",new l["a"](new g["default"])),Object(u["a"])(this,"mallSearchList",[]),Object(u["a"])(this,"storeLogList",{})}return Object(s["a"])(e,[{key:"autoAddFenceActive",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=["MY","TW","VN","ID","PH","TH","SG","BR","MX","CO","CL","PL"],n=0,r=t;case 2:if(!(n<r.length)){e.next=14;break}return a=r[n],o={},o["country"]=a,o["log_message"]=[],e.next=9,window.BaseUtilBridgeService.getAttentionUserTask(a);case 9:i=e.sent,i.length&&(c=(new Date).getTime(),s=Number(i[0].exec_time),this.runTesk(c-s,i));case 11:n++,e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"runTesk",value:function(e,t){var n=this;this.storeLogList["".concat(t[0].country)]={},this.storeLogList["".concat(t[0].country)].log_message=[],e=e>0?0:0-e,e?this.storeLogList["".concat(t[0].country)].log_message.push({option:"【".concat(t[0].country,"】该任务还未到执行时间"),activeTime:this.formatTime((new Date).getTime())}):this.storeLogList["".concat(t[0].country)].log_message.push({option:"【".concat(t[0].country,"】任务即将执行...."),activeTime:this.formatTime((new Date).getTime())}),setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.searchMall(t[0]);case 2:return e.next=4,n.startCancer(t[0]);case 4:return r={country:t[0].country,mall_ids:t[0].mall_ids,mall_names:t[0].mall_names,product_max:t[0].product_max,last_login_day:t[0].last_login_day,open_hour:t[0].open_hour,open_minute:t[0].open_minute,key_word:t[0].key_word,follow_number:t[0].follow_number,follow_interval:t[0].follow_interval,is_not_follow_min_order_evaluation:t[0].is_not_follow_min_order_evaluation,min_order_evaluation:t[0].min_order_evaluation,is_not_follow_followed_day:t[0].is_not_follow_followed_day,followed_day:t[0].followed_day,followed_type:t[0].followed_type,cancel_follow_number:t[0].cancel_follow_number,cancel_follow_sort_type:t[0].cancel_follow_sort_type,exec_time:(new Date).getTime()},e.next=7,window.BaseUtilBridgeService.saveAttentionUserTask(r);case 7:return e.sent,e.next=10,window.BaseUtilBridgeService.getAttentionUserTask(t[0].country);case 10:return a=e.sent,n.storeLogList["".concat(t[0].country)].task_id=a[0].id,n.storeLogList["".concat(t[0].country)].country=a[0].country,n.storeLogList["".concat(t[0].country)].created_at=n.formatTime((new Date).getTime()),n.storeLogList["".concat(t[0].country)].log_message=JSON.stringify(n.storeLogList["".concat(t[0].country)].log_message),e.next=17,window.BaseUtilBridgeService.saveAttentionUserLog(n.storeLogList["".concat(t[0].country)]);case 17:e.sent;case 18:case"end":return e.stop()}}),e)}))),e)}},{key:"add0",value:function(e){return e<10?"0"+e:e}},{key:"formatTime",value:function(t){var n=new e,r=new Date(t),a=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),c=r.getHours(),s=r.getMinutes(),u=r.getSeconds();return a+"-"+n.add0(o)+"-"+n.add0(i)+" "+n.add0(c)+":"+n.add0(s)+":"+n.add0(u)}},{key:"searchMall",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s,u,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=10*t.mall_ids.split(",").length,r=[],this.storeLogList["".concat(t.country)].log_message.push({option:"正在查询【".concat(t.key_word,"】相关店铺...."),activeTime:this.formatTime((new Date).getTime())}),a=0;case 4:if(!(a<n)){e.next=32;break}return i={},i["country"]=t.country,i["mallId"]=Number(t.mall_ids.split(",")[0]),i["newest"]=60*a,i["keyword"]=t.key_word,i["min_order_evaluation"]=t.min_order_evaluation,e.next=13,this.searchMallInstance(i);case 13:if(c=e.sent,c.length){e.next=17;break}return this.storeLogList["".concat(t.country)].log_message.push({option:"暂无数据",activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return");case 17:return e.next=19,this.filterList(c,t);case 19:if(s=e.sent,!s.length){e.next=27;break}if((u=r).push.apply(u,Object(o["a"])(s)),!(r.length>=n)){e.next=25;break}return r=r.splice(0,n),e.abrupt("break",32);case 25:e.next=29;break;case 27:return this.storeLogList["".concat(t.country)].log_message.push({option:"此关键词暂无更多数据！",activeTime:this.formatTime((new Date).getTime())}),e.abrupt("break",32);case 29:a++,e.next=4;break;case 32:this.storeLogList["".concat(t.country)].log_message.push({option:"店铺搜索获取结束",activeTime:this.formatTime((new Date).getTime())}),this.mallSearchList=[],r.forEach((function(e){e.item_basic.totalRate=e.item_basic.item_rating.rating_count.reduce((function(e,t,n,r){return e+t})),l.mallSearchList.push(e.item_basic)}));case 35:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchMallInstance",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["country"]=t.country,n["mallId"]=t.mallId,n["by"]="relevancy",n["keyword"]=t.keyword,n["limit"]=60,n["newest"]=t.newest,n["order"]="desc",n["page_type"]="search",n["rating_filter"]=t.min_order_evaluation,e.prev=10,e.next=13,this.MallAPIInstance.addCancerMall(n);case 13:if(r=e.sent,200!==r.status){e.next=18;break}return e.abrupt("return",JSON.parse(r.data).items);case 18:return this.storeLogList["".concat(t.country)].log_message.push({option:"店铺搜索请求失败,230-line:".concat(r.status),activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e["catch"](10),this.storeLogList["".concat(t.country)].log_message.push({option:"店铺搜索请求失败,234-line:".concat(e.t0),activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,this,[[10,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],a=new Map,t.forEach((function(e){a.has(e.item_basic.itemid)||a.has(e.item_basic.shopid)||a.set(e.itemid,e)})),r=Object(o["a"])(a.values()),i=Number(n.product_max),c=r.filter((function(e){var t=e.item_basic.item_rating.rating_count.reduce((function(e,t,n,r){return e+t}));if(Number(e.item_basic.liked_count)>=100&&Number(e.item_basic.liked_count)<=1e4&&Number(e.item_basic.item_rating.rating_star.toFixed(2))>=4.5&&Number(e.item_basic.item_rating.rating_star.toFixed(2))<=5&&t>=50&&t<=5e3&&e.item_basic.stock>=i)return e})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"startCancer",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.mallSearchList.length<=0)){e.next=3;break}return this.storeLogList["".concat(t.country)].log_message.push({option:"当前关键词【".concat(t.key_word,"】暂无数据"),activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return");case 3:return n=t.mall_ids.split(","),r=t.mall_names.split(","),a=this.mallSearchList.map((function(e){return e.shopid})),o=n.map((function(e,n){var o={};return o.platform_mall_id=e,o.mall_alias_name=r[n],o.country=t.country,o.mallIDlist=a,o.Tesk_follow_number=t.follow_number,o.followed_type=t.followed_type,o.follow_interval=t.follow_interval,o.last_login_day=t.last_login_day,o.min_order_evaluation=t.min_order_evaluation,o})),p=this,this.storeLogList["".concat(t.country)].log_message.push({option:"开始处理关注店铺数据......",activeTime:this.formatTime((new Date).getTime())}),e.next=11,Object(m["c"])(o,this.getFllowerInfo);case 11:this.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.country,"】数据处理结束"),activeTime:this.formatTime((new Date).getTime())});case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowerInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,c,s,u,l,g,f,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{count:1},e.prev=1,o=t.mallIDlist,t.following=0,t.fence=0,t.newFollow=0,t.cancerFollow=0,t.state="-",e.next=10,p.isLoginFun(t);case 10:if(i=e.sent,i){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,p.getHomeMallData(t);case 15:if(c=e.sent,c){e.next=19;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺暂无数据"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return");case 19:s=t.newFollow,u=Object(a["a"])(o),e.prev=21,g=regeneratorRuntime.mark((function e(){var n,r,o,i,c,u,g,f,h,_,d,b,v,w,y,k,x,L,T,S,O,R,A,D,N,I,j,U,B,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=l.value,!p.isStop){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(r={},r["country"]=t.country,r["mallId"]=t.platform_mall_id,r["shopid"]=n,"0"!==t.followed_type){e.next=123;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】正在获取").concat(n,"店铺粉丝信息"),activeTime:p.formatTime((new Date).getTime())}),o=!0,r["offset"]=0,e.next=13,p.GetShopLikes(r);case 13:i=e.sent,p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取第").concat(r.offset/20+1,"页粉丝"),activeTime:p.formatTime((new Date).getTime())}),c=Object(a["a"])(i),e.prev=16,c.s();case 18:if((u=c.n()).done){e.next=56;break}if(g=u.value,!p.isStop){e.next=22;break}return e.abrupt("return",{v:void 0});case 22:return e.next=24,p.filterShopDatas(i,t.country,t.platform_mall_id);case 24:if(f=e.sent,f){e.next=27;break}return e.abrupt("continue",54);case 27:return e.next=29,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),g.ShopId);case 29:if(h=e.sent,!h.attention_shop_id){e.next=32;break}return e.abrupt("continue",54);case 32:return e.next=34,p.runAttention(g,t,n);case 34:if(_=e.sent,!_){e.next=42;break}return s++,e.next=39,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:g.ShopId});case 39:e.sent,e.next=45;break;case 42:return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(g.UserName,"失败"),activeTime:p.formatTime((new Date).getTime())}),o=!1,e.abrupt("continue",54);case 45:if(!Number(t.Tesk_follow_number)){e.next=50;break}if(!(s>=Number(t.Tesk_follow_number))){e.next=48;break}return e.abrupt("return",{v:void 0});case 48:e.next=54;break;case 50:if(!(t.following+s>=3e3)){e.next=54;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增关注").concat(s,"个"),activeTime:p.formatTime((new Date).getTime())}),p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 54:e.next=18;break;case 56:e.next=61;break;case 58:e.prev=58,e.t0=e["catch"](16),c.e(e.t0);case 61:return e.prev=61,c.f(),e.finish(61);case 64:p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增关注").concat(s,"个"),activeTime:p.formatTime((new Date).getTime())});case 65:if(!o){e.next=119;break}if(!p.isStop){e.next=68;break}return e.abrupt("return",{v:void 0});case 68:return r["offset"]+=20,e.next=71,p.GetShopLikes(r);case 71:i=e.sent,p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取第").concat(r.offset/20+1,"页粉丝数据"),activeTime:p.formatTime((new Date).getTime())}),d=0;case 74:if(!(d<i.length)){e.next=113;break}if(!p.isStop){e.next=77;break}return e.abrupt("return",{v:void 0});case 77:return b=i[d],e.next=80,p.filterShopDatas(b,t.country,t.platform_mall_id,t.last_login_day);case 80:if(v=e.sent,v){e.next=83;break}return e.abrupt("continue",110);case 83:return e.next=85,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),b.ShopId);case 85:if(w=e.sent,!w.attention_shop_id){e.next=88;break}return e.abrupt("continue",110);case 88:return e.next=90,p.runAttention(b,t,n);case 90:if(y=e.sent,!y){e.next=98;break}return s++,e.next=95,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:b.ShopId});case 95:e.sent,e.next=100;break;case 98:return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(b.UserName,"失败"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("continue",110);case 100:if(!Number(t.Tesk_follow_number)){e.next=106;break}if(!(s>=Number(t.Tesk_follow_number))){e.next=104;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(s,"个粉丝"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 104:e.next=110;break;case 106:if(!(t.following+s>=3e3)){e.next=110;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(s,"个"),activeTime:p.formatTime((new Date).getTime())}),p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 110:d++,e.next=74;break;case 113:return i.length<20&&(p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(n,"】查找结束"),activeTime:p.formatTime((new Date).getTime())}),o=!1),p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(s,"个"),activeTime:p.formatTime((new Date).getTime())}),e.next=117,Object(m["y"])(1e3*Number(t.follow_interval));case 117:e.next=65;break;case 119:p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(s,"个"),activeTime:p.formatTime((new Date).getTime())}),p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】操作结束"),activeTime:that.formatTime((new Date).getTime())}),e.next=226;break;case 123:return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】正在获取评价用户信息"),activeTime:p.formatTime((new Date).getTime())}),k=!0,x=[],L=p.mallSearchList.findIndex((function(e){return e.shopid===Number(n)})),T=p.mallSearchList[L].itemid,S=0,p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取").concat(n,"第【").concat(S/52+1,"】页评价用户"),activeTime:p.formatTime((new Date).getTime())}),e.next=132,p.GetShopComment(T,n,t,S);case 132:if(x=e.sent,x.length){e.next=136;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"".concat(n,"暂无用户评价"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return","continue");case 136:O=0;case 137:if(!(O<x.length)){e.next=173;break}return R=x[O],A={},A["ShopId"]=R.author_shopid,A["UserName"]=R.author_username,e.next=144,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),A.ShopId);case 144:if(D=e.sent,!D.attention_shop_id){e.next=147;break}return e.abrupt("continue",170);case 147:return e.next=149,p.runAttention(A,t,R.shopid);case 149:if(N=e.sent,!N){e.next=157;break}return s++,e.next=154,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:A.ShopId});case 154:e.sent,e.next=160;break;case 157:return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(A.UserName,"失败"),activeTime:p.formatTime((new Date).getTime())}),k=!1,e.abrupt("continue",170);case 160:if(!Number(t.Tesk_follow_number)){e.next=166;break}if(!(s>=Number(t.Tesk_follow_number))){e.next=164;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注成功"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 164:e.next=170;break;case 166:if(!(t.following+s>=3e3)){e.next=170;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(s,"个"),activeTime:p.formatTime((new Date).getTime())}),p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 170:O++,e.next=137;break;case 173:p.$set(t,"newFollow",s);case 174:if(!k){e.next=224;break}if(!p.isStop){e.next=177;break}return e.abrupt("return",{v:void 0});case 177:return S+=52,p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取").concat(n,"第【").concat(S/52+1,"】页评价用户"),activeTime:p.formatTime((new Date).getTime())}),e.next=181,p.GetShopComment(T,n,t,S);case 181:x=e.sent,I=0;case 183:if(!(I<x.length)){e.next=219;break}if(!p.isStop){e.next=186;break}return e.abrupt("return",{v:void 0});case 186:return j=x[I],U={},U["ShopId"]=j.shopid,U["UserName"]=j.author_username,e.next=192,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),U.ShopId);case 192:if(B=e.sent,!B.attention_shop_id){e.next=195;break}return e.abrupt("continue",216);case 195:return e.next=197,p.runAttention(U,t,n);case 197:if(C=e.sent,!C){e.next=205;break}return s++,e.next=202,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:U.ShopId});case 202:e.sent,e.next=207;break;case 205:return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(U.UserName,"失败"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("continue",216);case 207:if(!Number(t.Tesk_follow_number)){e.next=213;break}if(!(s>=Number(t.Tesk_follow_number))){e.next=211;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注成功"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 211:e.next=216;break;case 213:if(!(t.following+s>=3e3)){e.next=216;break}return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 216:I++,e.next=183;break;case 219:return x.length<52&&(p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】查找结束"),activeTime:p.formatTime((new Date).getTime())}),k=!1),e.next=222,Object(m["y"])(1e3*Number(t.follow_interval));case 222:e.next=174;break;case 224:p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】成功关注").concat(s,"个粉丝"),activeTime:p.formatTime((new Date).getTime())}),p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】操作结束"),activeTime:p.formatTime((new Date).getTime())});case 226:case"end":return e.stop()}}),e,null,[[16,58,61,64]])})),u.s();case 24:if((l=u.n()).done){e.next=33;break}return e.delegateYield(g(),"t0",26);case 26:if(f=e.t0,"continue"!==f){e.next=29;break}return e.abrupt("continue",31);case 29:if("object"!==Object(r["a"])(f)){e.next=31;break}return e.abrupt("return",f.v);case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](21),u.e(e.t1);case 38:return e.prev=38,u.f(),e.finish(38);case 41:p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注结束"),activeTime:p.formatTime((new Date).getTime())}),e.next=47;break;case 44:e.prev=44,e.t2=e["catch"](1),p.storeLogList["".concat(t.country)].log_message.push({option:"用户信息获取失败-line373，".concat(e.t2),activeTime:p.formatTime((new Date).getTime())});case 47:return e.prev=47,--n.count,e.finish(47);case 50:case"end":return e.stop()}}),e,null,[[1,44,47,50],[21,35,38,41]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isLoginFun",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.MallAPIInstance.isLogin(t);case 2:if(n=e.sent,200!==n.code||!n.data){e.next=7;break}return e.abrupt("return",!0);case 7:return p.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺未登录"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeMallData",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["country"]=t.country,n["mallId"]=t.platform_mall_id,e.next=5,p.MallAPIInstance.UserProfile(n);case 5:if(r=e.sent,200!==r.code){e.next=19;break}return a=r.data.username,n["username"]=a,e.next=11,p.MallAPIInstance.getHomeMallinfo(n);case 11:if(o=e.sent,200!==o.code){e.next=16;break}return e.abrupt("return",o.data);case 16:return e.abrupt("return","");case 17:e.next=20;break;case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeFollowingList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.platform_mall_id,r["offset"]=0,r["mallName"]=t.mall_alias_name||t.platform_mall_name,e.next=7,this.getHomeFllowering(r);case 7:if(a=e.sent,o=a,o.length){e.next=11;break}return e.abrupt("return",[]);case 11:if(!(a.length>=20)){e.next=21;break}if(!this.isStop){e.next=14;break}return e.abrupt("break",21);case 14:return r["offset"]+=20,e.next=17,this.getHomeFllowering(r);case 17:a=e.sent,o=o.concat(a),e.next=11;break;case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"GetShopLikes",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["country"]=t.country,n["mallId"]=t.mallId,n["shopid"]=t.shopid,n["offset"]=t.offset,n["limit"]=20,n["offset_of_offset"]=0,n["timeStamp"]=(new Date).getTime(),e.next=10,p.MallAPIInstance.getFllower(n);case 10:if(r=e.sent,200!==r.code){e.next=15;break}return e.abrupt("return",r.data);case 15:return p.storeLogList["".concat(t.country)].log_message.push({option:"粉丝获取失败",activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterShopDatas",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.getActiveUser({country:n,mallId:r,userName:t.UserName});case 2:if(o=e.sent,i=new Date((new Date).toLocaleDateString()).getTime(),c=i-i*(Number(a)-1),!(o>c)){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"getActiveUser",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["country"]=t.country,n["mallId"]=t.mallId,n["username"]=t.userName,e.next=6,p.MallAPIInstance.getActiveTimeFollower(n);case 6:if(r=e.sent,200!==r.code){e.next=11;break}return e.abrupt("return",1e3*Number(r.data.last_active_time));case 11:return p.$refs.Logs.writeLog("店铺活跃状态获取失败:".concat(r.message),!1),e.abrupt("return","");case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"runAttention",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a["country"]=n.country,a["mallId"]=n.platform_mall_id,a["userShopid"]=t.ShopId,a["followMallID"]=r,e.next=7,p.MallAPIInstance.buyerFollow(a);case 7:if(o=e.sent,200===o.code){e.next=12;break}p.storeLogList["".concat(n.country)].log_message.push({option:"【".concat(n.mall_alias_name||n.platform_mall_name,"】关注").concat(t.UserName,"失败,").concat(o.message),activeTime:p.formatTime((new Date).getTime())}),e.next=18;break;case 12:if(!o.data){e.next=17;break}return p.storeLogList["".concat(n.country)].log_message.push({option:"【".concat(n.mall_alias_name||n.platform_mall_name,"】关注").concat(t.UserName,"成功"),activeTime:p.formatTime((new Date).getTime())}),e.abrupt("return",!0);case 17:p.storeLogList["".concat(n.country)].log_message.push({option:"【".concat(n.mall_alias_name||n.platform_mall_name,"】关注").concat(t.UserName,"失败,").concat(o.message),activeTime:p.formatTime((new Date).getTime())});case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"GetShopComment",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={},o["mallId"]=r.platform_mall_id,o["country"]=r.country,o["itemid"]=t,o["offset"]=a,o["shopid"]=n,e.next=8,p.MallAPIInstance.getShoppComment(o);case 8:if(i=e.sent,200!==i.code){e.next=15;break}return c=i.data.ratings||[],s=c.filter((function(e){if(e.rating_star>=Number(r.min_order_evaluation))return e})),e.abrupt("return",s);case 15:return p.storeLogList["".concat(r.country)].log_message.push({option:"商品评价获取失败".concat(i.message),activeTime:that.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()}]),e}()},df50:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"auto-order"},[n("Logs",{ref:"Logs",staticClass:"logBox",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}})],1)},a=[],o=n("1da1"),i=(n("a9e3"),n("99af"),n("96cf"),n("bcd0")),c=n("de70"),s=n("0098"),u=n("31af"),l=n("d1dd"),m={data:function(){return{AutoAddFenceInstance:new l["a"](this),showConsole:!1,mallList:[],statusListFirst:i["E"],statusListSecond:i["A"],statusListThird:i["B"],buyerAccountList:[],logisiticeTime:2,isAutoLogisitice:"1",isApplyShopeeLogistics:"2"}},mounted:function(){var e=this;this.getAllMall(),this.$refs.Logs.writeLog("定时任务分别在五分钟、八分钟之后开启",!0),window["BaseUtilBridgeService"].checkAutoScriptLog("定时任务分别在五分钟、八分钟之后开启");try{this.syncLogis(),this.syncShopeeFace(),setTimeout((function(){e.syncOrders(e.statusListFirst,"auto-first",60),setInterval((function(){e.syncOrders(e.statusListFirst,"auto-first",60)}),144e5)}),3e5),setTimeout((function(){e.syncOrders(e.statusListSecond,"auto-second",60),setInterval((function(){e.syncOrders(e.statusListSecond,"auto-second",60)}),18e5)}),48e4),setTimeout((function(){e.syncOrders(e.statusListThird,"auto-third",60),setInterval((function(){e.syncOrders(e.statusListThird,"auto-third",60)}),36e5)}),48e4),this.checkTimeAutoFollow(),this.goodsTop()}catch(t){this.$refs.Logs.writeLog("error".concat(t),!1)}},methods:{syncShopeeFace:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window["ConfigBridgeService"].getUserConfig();case 3:n=t.sent,n=n&&JSON.parse(n)||{},e.isApplyShopeeLogistics=n&&n.is_apply_shopee_logistics||"2","1"===e.isApplyShopeeLogistics&&(setTimeout((function(){e.syncFaceData(),setInterval((function(){e.syncFaceData()}),72e5)}),48e4),setTimeout((function(){e.syncFaceStore(),setInterval((function(){e.syncFaceStore()}),36e5)}),18e4),setTimeout((function(){e.syncFaceNoFace(),setInterval((function(){e.syncFaceNoFace()}),72e5)}),3e5)),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$refs.Logs.writeLog("面单,".concat(t.t0),!1);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},syncLogis:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window["ConfigBridgeService"].getUserConfig();case 2:if(n=t.sent,n=n&&JSON.parse(n)||{},e.isAutoLogisitice=n&&n.is_auto_ori_logistics||"1",e.logisiticeTime=n&&n.ori_logistics_interval_time||4,"2"!==e.isAutoLogisitice){t.next=10;break}return t.next=9,e.getAccountList();case 9:setTimeout((function(){e.logisticeSync(),setInterval((function(){e.logisticeSync()}),60*Number(e.logisiticeTime)*60*1e3)}),36e4);case 10:case"end":return t.stop()}}),t)})))()},syncOrders:function(e,t,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var o,i,s,u,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:window["BaseUtilBridgeService"].checkAutoScriptLog("开始自动同步订单"),r.$refs.Logs.writeLog("【".concat(t,"】开始同步"),!0),o=0;case 3:if(!(o<r.mallList.length)){a.next=17;break}i=r.mallList[o],s=0;case 6:if(!(s<e.length)){a.next=14;break}return u=e[s],l=new c["a"](i,u,r,r.$refs.Logs.writeLog),a.next=11,l.start("".concat(o+1,"/").concat(r.mallList.length),t,n);case 11:s++,a.next=6;break;case 14:o++,a.next=3;break;case 17:case"end":return a.stop()}}),a)})))()},getAllMall:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$appConfig.getGlobalCacheInfo("allMallInfo","key");case 2:if(n=t.sent,r=n&&JSON.parse(n),r)for(a in r)e.mallList.push(r[a]);case 5:case"end":return t.stop()}}),t)})))()},syncFaceData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.Logs.writeLog("开始同步面单---------------------------",!0),window["BaseUtilBridgeService"].checkAutoScriptLog("开始同步面单、平台物流"),n=new s["a"](e,e.$refs.Logs.writeLog),n.autoStart();case 4:case"end":return t.stop()}}),t)})))()},getAccountList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getBuyerList();case 2:n=t.sent,r=n.data,200===r.code&&(e.buyerAccountList=r.data);case 5:case"end":return t.stop()}}),t)})))()},logisticeSync:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window["BaseUtilBridgeService"].checkAutoScriptLog("开始自动同步采购物流"),e.$refs.Logs.writeLog("开始自动同步采购物流---------------------------",!0),n=new u["a"],t.next=5,n.start(e,e.buyerAccountList,e.$refs.Logs.writeLog);case 5:case"end":return t.stop()}}),t)})))()},checkTimeAutoFollow:function(){var e=this;setTimeout((function(){e.AutoAddFenceInstance.autoAddFenceActive()}),6e5)},topGoods:function(){},syncFaceStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.Logs.writeLog("开始同步仓库中没有面单",!0),window["BaseUtilBridgeService"].checkAutoScriptLog("开始同步仓库中没有面单"),n=new s["a"](e,e.$refs.Logs.writeLog),n.autoStartStore();case 4:case"end":return t.stop()}}),t)})))()},syncFaceNoFace:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window["BaseUtilBridgeService"].checkAutoScriptLog("开始同步订单中没有面单"),n=new s["a"](e,e.$refs.Logs.writeLog),n.autoStartNoLogi();case 3:case"end":return t.stop()}}),t)})))()}}},g=m,p=(n("c2f6"),n("2877")),f=Object(p["a"])(g,r,a,!1,null,"a6528aaa",null);t["default"]=f.exports}}]);