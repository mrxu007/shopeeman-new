(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ff25703"],{"4c28":function(e,t,a){},8992:function(e,t,a){"use strict";a("4c28")},c4c7:function(e,t,a){"use strict";a("f818")},ef52:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"delivery-manager"},[a("div",{staticClass:"selectBox"},[a("div",{staticClass:"left-box mar-right"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("基础操作")]),a("div",{staticClass:"base-item base-left"},[a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:e.syncSurfaceBefore}},[e._v("批量同步面单信息")]),a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.batnchDownLoad(e.multipleSelection,"down")}}},[e._v("批量下载平台面单")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},model:{value:e.isDownloadOriginFace711,callback:function(t){e.isDownloadOriginFace711=t},expression:"isDownloadOriginFace711"}},[e._v("台湾站711原始面单")])],1),a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.batnchDownLoad(e.multipleSelection,"view")}}},[e._v("批量预览打印平台面单")]),a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:e.getExportData}},[e._v("导出数据")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},model:{value:e.isDownloadOriginFaceQJ,callback:function(t){e.isDownloadOriginFaceQJ=t},expression:"isDownloadOriginFaceQJ"}},[e._v("台湾站全家原始面单")])],1),a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:e.beforeVirtual}},[e._v("批量打印台湾虚拟面单")]),a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:e.downLoadPickList}},[e._v("批量下载拣货单")])],1),a("el-row",{staticClass:"row-style"},[a("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(t){e.downloadSetVisible=!0}}},[e._v("批量下载自定义拣货单")])],1)],1)])]),a("div",{staticClass:"right-box"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("列表筛选操作")]),a("div",{staticClass:"base-item"},[a("el-row",{staticClass:"row-style"},[a("storeChoose",{attrs:{"is-all":!0,"span-width":"90px","select-width":"180px",source:"orderCenter"},on:{changeMallList:e.changeMallList}})],1),a("el-row",{staticClass:"row-style"},[a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("订单编号：")]),a("el-input",{staticClass:"inputBox",attrs:{size:"mini",clearable:""},model:{value:e.selectForm.orderSn,callback:function(t){e.$set(e.selectForm,"orderSn",t)},expression:"selectForm.orderSn"}})],1),a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("采购物流单号：")]),a("el-input",{staticClass:"inputBox",attrs:{size:"mini",clearable:""},model:{value:e.selectForm.originalTrackingNumber,callback:function(t){e.$set(e.selectForm,"originalTrackingNumber",t)},expression:"selectForm.originalTrackingNumber"}})],1),a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("截止时间：")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.changeTime(t,"shipByDate")}},model:{value:e.shipByDate,callback:function(t){e.shipByDate=t},expression:"shipByDate"}})],1)]),a("el-row",{staticClass:"row-style"},[a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("发货状态：")]),a("el-select",{staticClass:"inputBox",attrs:{placeholder:"",size:"mini"},model:{value:e.selectForm.orderStatus,callback:function(t){e.$set(e.selectForm,"orderStatus",t)},expression:"selectForm.orderStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.orderStatusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("面单下载状态：")]),a("el-select",{staticClass:"inputBox",attrs:{placeholder:"",size:"mini"},model:{value:e.selectForm.isPrint,callback:function(t){e.$set(e.selectForm,"isPrint",t)},expression:"selectForm.isPrint"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已下载",value:"1"}}),a("el-option",{attrs:{label:"未下载",value:"2"}})],1)],1),a("div",{staticClass:"tool-item"},[a("span",[e._v("创建时间：")]),a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.changeTime(t,"createTime")}},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)]),a("el-row",{staticClass:"row-style"},[a("div",{staticClass:"tool-item mar-right"},[a("span",[e._v("物流单号：")]),a("el-select",{staticClass:"inputBox",attrs:{placeholder:"",size:"mini"},model:{value:e.selectForm.hasTrackingNo,callback:function(t){e.$set(e.selectForm,"hasTrackingNo",t)},expression:"selectForm.hasTrackingNo"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"已申请",value:"1"}}),a("el-option",{attrs:{label:"未申请",value:"2"}})],1)],1),a("el-button",{staticClass:"mar-right",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getOrderList(1)}}},[e._v("搜索")]),a("el-button",{staticClass:"mar-right",attrs:{size:"mini",type:"primary"},on:{click:function(t){e.goodsSearchVisible=!0}}},[e._v("订单号批量查询")]),a("el-button",{staticClass:"mar-right",attrs:{size:"mini",type:"primary"},on:{click:e.openBefore}},[e._v("批量添加本地备注")]),a("el-checkbox",{staticClass:"mar-right",model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}},[e._v("隐藏日志")]),a("p",{staticClass:"tableActive"},[e._v("同步和打印台湾站的面单信息（除711外），请走代理")])],1)],1)])])]),a("div",{staticClass:"content"},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{"use-virtual":"",border:!1,data:e.tableData,"tooltip-effect":"dark",height:"630px"},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s((e.currentPage-1)*e.pageSize+t.$index+1))]}}])}),a("u-table-column",{attrs:{prop:"order_sn",label:"订单编号","min-width":"170px",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(a){return e.copyItem(t.row.order_sn)}}}),a("span",{staticClass:"tableActive",on:{click:function(a){return e.viewDetails("orderDetail",t.row.order_id,t.row.mall_info.platform_mall_id)}}},[e._v(e._s(t.row.order_sn))])]}}])}),a("u-table-column",{attrs:{label:"操作",prop:"","min-width":"150px",fixed:"left",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{staticStyle:{width:"100px","margin-left":"10px"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{size:"mini",plain:"",type:"primary"}},[e._v(" 更多操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(a){return e.syncFaceDataSingle(t.row)}}},[e._v("同步面单信息")])]),a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(a){return e.batnchDownLoad([t.row],"view")}}},[e._v("面单预览")])]),a("el-dropdown-item",[0!=t.row.hasLogistics?a("div",{staticClass:"dropdownItem",on:{click:function(a){return e.batnchDownLoad([t.row],"down")}}},[e._v("下载面单")]):e._e()])],1)],1)]}}])}),a("u-table-column",{attrs:{"min-width":"80px",label:"站点",prop:"country",align:"center",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.mall_info?[e._v(e._s(e._f("chineseSite")(t.row.mall_info.country)))]:void 0}}],null,!0)}),a("u-table-column",{attrs:{label:"店铺名称",prop:"mall_info.platform_mall_name","min-width":"120px",align:"center","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{align:"center",label:"商品数量","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.goods_count))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"123456",label:"商品详情","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openGoodsDetail(t.row)}}},[e._v("商品详情")])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"created_time",label:"订单创建时间","min-width":"140"}}),a("u-table-column",{attrs:{align:"center",prop:"ship_by_date",label:"截止发货时间","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ship_by_date))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"ship_by_date",label:"是否已申请物流单号","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{style:{color:""==t.row.tracking_no?"red":"#32CD32"}},[e._v(e._s(""==t.row.tracking_no?"未申请":"已申请"))])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"ship_by_date",label:"是否同步面单信息","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{style:{color:0==t.row.hasLogistics?"red":"#32CD32"}},[e._v(e._s(0==t.row.hasLogistics?"否":"是"))])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"order_status",label:"发货状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{style:{color:e.changeOrderStatus(t.row.order_status,"color")}},[e._v(e._s(e.changeOrderStatus(t.row.order_status)))])]}}])}),a("u-table-column",{attrs:{align:"center",prop:"logistics_name",label:"虾皮物流","min-width":"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.logistics_name))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"tracking_no",label:"虾皮物流单号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.tracking_no))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"remark",label:"本地备注","min-width":"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:!(t.row.id===e.activeRemarkID),expression:"!(scope.row.id === activeRemarkID ? true : false)"}],staticStyle:{cursor:"pointer"},on:{click:function(a){return e.editRemark(t.row.id)}}},[a("el-input",{attrs:{disabled:"",size:"mini"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})],1),t.row.id===e.activeRemarkID?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){return e.changeRemark(t.row.id)}},model:{value:e.orderRemark,callback:function(t){e.orderRemark=t},expression:"orderRemark"}}):e._e()]}}])}),a("u-table-column",{attrs:{align:"center",prop:"note",label:"shopee备注","min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.note))]}}])}),a("u-table-column",{attrs:{align:"center",prop:"note",label:"是否已下载面单","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"==t.row.is_print?"已下载":"未下载"))]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,50,100,200],"page-size":e.pageSize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}}),a("el-dialog",{attrs:{title:"商品详情",visible:e.goodsListVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.goodsListVisible=t},close:e.closeDialog}},[a("el-table",{ref:"goodsTable",attrs:{data:e.goodsList,"tooltip-effect":"dark",height:"400px"}},[a("el-table-column",{attrs:{align:"center",prop:"goods_name",label:"商品名称","min-width":"180","show-overflow-tooltip":"",fixed:""}}),a("el-table-column",{attrs:{align:"center",prop:"order_sn",label:"订单编号","min-width":"120"}}),a("el-table-column",{attrs:{align:"center",label:"商品图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"56px",height:"56px"},attrs:{src:e._f("imageRender")([t.row.goods_img])}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"goods_id",label:"商品ID","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openUrl(e.clickRow,t.row.goods_id,"product")}}},[e._v(e._s(t.row.goods_id))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"goods_count",label:"商品数量","min-width":"120"}}),a("el-table-column",{attrs:{align:"center",prop:"outer_goods_id",label:"parentSKU","min-width":"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"variation_name",label:"商品规格","min-width":"120",fixed:"right"}})],1)],1),a("el-dialog",{attrs:{title:"订单号批量查询",visible:e.goodsSearchVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.goodsSearchVisible=t},close:e.closeDialog}},[a("p",[e._v("请输入订单号，一行一个，最多五十个")]),a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.goodsOrderSnStr,callback:function(t){e.goodsOrderSnStr=t},expression:"goodsOrderSnStr"}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getOrderList(1,e.goodsOrderSnStr)}}},[e._v("批量查询")])],1)],1),a("el-dialog",{attrs:{title:"批量添加本地备注",visible:e.localRamarkVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(t){e.localRamarkVisible=t}}},[a("div",{staticClass:"remark-style"},[a("span",[e._v("本地备注")]),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.localRamark,callback:function(t){e.localRamark=t},expression:"localRamark"}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchSetRemark}},[e._v("批量添加")])],1)]),a("el-dialog",{attrs:{title:"自定义拣货单",visible:e.downloadSetVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(t){e.downloadSetVisible=t}}},[a("div",{staticClass:"downloadSetContent"},[a("el-checkbox-group",{staticClass:"downloadSetDetail",model:{value:e.downloadSetList,callback:function(t){e.downloadSetList=t},expression:"downloadSetList"}},[a("el-row",[a("h3",[e._v(" 请选择导出选项：")])]),a("el-row",[a("el-checkbox",{attrs:{label:"country"}},[e._v("站点")]),a("el-checkbox",{staticClass:"mall",attrs:{label:"platform_mall_name"}},[e._v("店铺名称")]),a("el-checkbox",{attrs:{label:"goods_name"}},[e._v("商品名称")])],1),a("el-row",[a("el-checkbox",{attrs:{label:"order_sn"}},[e._v("订单编号")]),a("el-checkbox",{attrs:{label:"outer_goods_id"}},[e._v("parentSKU")]),a("el-checkbox",{attrs:{label:"goods_count"}},[e._v("商品数量")])],1),a("el-row",[a("el-checkbox",{attrs:{label:"variation_name"}},[e._v("商品规格")]),a("el-checkbox",{attrs:{label:"goodsLink"}},[e._v("商品链接")]),a("el-checkbox",{attrs:{label:"goods_img"}},[e._v("商品图片")])],1),a("el-row",[a("el-checkbox",{attrs:{label:"order_status"}},[e._v("发货状态")]),a("el-checkbox",{attrs:{label:"ship_by_date"}},[e._v("截止发货时间")]),a("el-checkbox",{attrs:{label:"created_time"}},[e._v("订单创建时间")])],1),a("el-row",[a("el-checkbox",{attrs:{label:"logistics_name"}},[e._v("虾皮物流")]),a("el-checkbox",{attrs:{label:"tracking_no"}},[e._v("虾皮物流单号")])],1),a("el-row",[a("el-checkbox",{attrs:{label:"is_apply_tracking_no"}},[e._v("是否已申请物流单号")]),a("el-checkbox",{attrs:{label:"hasLogistics"}},[e._v("是否同步面单信息")])],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadSetSave}},[e._v("生成")])],1)])],1)},i=[],r=a("1da1"),o=(a("96cf"),a("4de4"),a("b0c0"),a("ac1f"),a("5319"),a("159b"),a("a15b"),a("c740"),a("d3b7"),a("25f0"),a("b64b"),a("7db0"),a("caad"),a("2532"),a("a9e3"),a("99af"),a("a434"),a("d81d"),a("1276"),a("bcd0")),s=a("feb6"),l=a("0e0b"),c=(a("8237"),a("0098")),d={components:{storeChoose:s["a"]},data:function(){return{downloadSetVisible:!1,downloadSetList:[],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},selectMallList:[],createTime:[],shipByDate:[],selectForm:{orderStatus:2,orderSn:"",isPrint:"",hasTrackingNo:"2",originalTrackingNumber:""},orderStatusList:o["q"],trackStatus:["","已申请","未申请"],logisticsStatusList:["未下载","已下载","未下载"],total:0,pageSize:20,currentPage:1,multipleSelection:[],tableLoading:!1,tableData:[],showConsole:!0,goodsList:[],goodsListVisible:!1,goodsSearchVisible:!1,goodsOrderSnStr:"",localRamarkVisible:!1,localRamark:"",activeRemarkID:"",orderRemark:"",isDownloadOriginFace711:!1,isDownloadOriginFaceQJ:!1}},mounted:function(){var e=this;this.createTime=Object(l["f"])(15),setTimeout((function(){e.getOrderList()}),2e3)},methods:{beforeVirtual:function(){var e=this,t=this.multipleSelection.filter((function(e){return"TW"==e.country}));if(!t.length)return this.$message.warning("请选择台湾站订单数据");this.$confirm("是否需要生成商品信息","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){e.downLoadVirtualTW(t,!0)})).catch((function(){e.downLoadVirtualTW(t,!1)}))},downLoadVirtualTW:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(n.prev=0,i=[],r=0;r<e.length;r++)o=e[r],s={PDFUrl:"",OrderNo:o.order_sn,MainOrderNo:o.main_order_sn,PlatformLogisticsId:o.tracking_no,PlatformLogisticsName:"",CreateTime:o.created_at,BuyerName:o.name,BuyerPhone:o.phone,BuyerAddress:o.address,BuyerNote:"",BarInfo:{BarCode:o.order_sn,BarCodeWidth:200,BarCodeHeight:50},SkuList:[o.goodsInfo[0].variation_sku.replace("=|=",""),o.goodsInfo[0].goods_count],IsNeedCut:!(30007!=o.logistics_id&&30008!=o.logistics_id),IsUseA4Size:!1,PdfWidth:320,PdfHeight:425,LocationY:-420,PrintStatus:"0",MallId:o.mall_info.platform_mall_id,MallName:o.mall_info.mall_alias_name||o.mall_info.platform_mall_name},i.push(s);return n.next=5,window["BaseUtilBridgeService"].getVirtualFace(i,t);case 5:a.showConsole=!1,a.$refs.Logs.writeLog("虚拟面单下载完成,请前往软件所在文件夹查看",!0),n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateOrderPrintStatus:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=[],e.forEach((function(e){n.push(e.MainOrderNo)})),i={mainOrderSns:n.join(","),isPrint:"1"},a.next=5,t.$api.updateOrderPrintStatus(i);case 5:r=a.sent,200===r.data.code&&n.forEach((function(e){var a=t.tableData.findIndex((function(t){return t.main_order_sn===e}));a>-1&&t.$set(t.tableData[a],"is_print","1")}));case 7:case"end":return a.stop()}}),a)})))()},changeTime:function(e,t,a){var n=Object(l["n"])(new Date(e[0]).getTime(),new Date(e[1]).getTime());if(n>93)return a?this[t][a]=Object(l["f"])(30):this[t]=Object(l["f"])(30),this.$message.warning("只支持查询或导出93天内的数据,请重新选择时间！")},downTWface:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.multipleSelection.filter((function(e){return"TW"==e.country})),a.length){t.next=4;break}return t.abrupt("return",e.$message.warning("请选择台湾站订单数据"));case 4:return n=[],a.forEach((function(e){n.push(e.main_order_sn)})),i=n.toString(),r={mainOrderSns:i},t.next=10,e.$api.getLogisticsInformationBatch(r);case 10:o=t.sent,s=[],s=200===o.data.code&&o.data.data.length?o.data.data:a,e.downFace(s,a,"TW",!1,!1,!1,!0),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.tableLoading=!1;case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()})),batnchDownLoad:function(e,t){var a=this;if(!e.length)return this.$message.warning("请选择要操作的数据！");"down"==t?this.$confirm("pdf文件后缀是否小写?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){a.batchPrintOrderSurface(e,!0,!0,!1,!1)})).catch((function(){a.batchPrintOrderSurface(e,!1,!0,!1,!1)})):"view"==t&&this.$confirm("是否需要打印虚拟面单?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){a.batchPrintOrderSurface(e,!1,!1,!0,!0)})).catch((function(){a.batchPrintOrderSurface(e,!1,!1,!0,!1)}))},batchPrintOrderSurface:function(e,t,a,n,i){var o=this;return Object(r["a"])(regeneratorRuntime.mark((function r(){var s,l,c,d,u,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s="",l={},c="",e.forEach((function(e,t){l[e.country]=e.country,s=e.country,c=0===t?e.main_order_sn:c+","+e.main_order_sn})),!(Object.keys(l).length>1)){r.next=6;break}return r.abrupt("return",o.$message.warning("由于每个站点面单不一致，请分站点批量预览和打印！"));case 6:return d={mainOrderSns:c},u=[],r.prev=8,r.next=11,o.$api.getLogisticsInformationBatch(d);case 11:if(m=r.sent,200!==m.data.code){r.next=16;break}u=m.data.data,r.next=17;break;case 16:return r.abrupt("return",o.$message.warning("面单获取失败！"));case 17:if(u.length){r.next=19;break}return r.abrupt("return",o.$message.warning("暂无面单信息"));case 19:o.downFace(u,e,s,t,a,n,i),r.next=25;break;case 22:r.prev=22,r.t0=r["catch"](8),o.tableLoading=!1;case 25:case"end":return r.stop()}}),r,null,[[8,22]])})))()},downFace:function(e,t,a,n,i,o,s){var l=this;return Object(r["a"])(regeneratorRuntime.mark((function r(){var c,d,u,m,p,f,h,g,_,b,w,v,S,k,y,x,L,O,C,I,D;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:l.showConsole=!1,l.$refs.Logs.consoleMsg="",r.prev=2,c=[],d=function(n){var i=e[n];if(!i.url&&"TW"!==a)return l.$refs.Logs.writeLog("订单".concat(i.order_sn,"未获取到面单信息"),!1),"continue";var r=t.find((function(e){return e.order_sn==i.order_sn})),o={PDFUrl:i.url||"",OrderNo:r.order_sn,MainOrderNo:r.main_order_sn,PlatformLogisticsId:r.tracking_no,PlatformLogisticsName:"",CreateTime:r.created_at,BuyerName:r.name,BuyerPhone:r.phone,BuyerAddress:i.data&&i.data.full_address?i.data.full_address:r.address,BuyerNote:"",BarInfo:{BarCode:r.order_sn,BarCodeWidth:200,BarCodeHeight:50},SkuList:[r.goodsInfo[0].variation_sku.replace("=|=",""),r.goodsInfo[0].goods_count],IsNeedCut:!(30007!=r.logistics_id&&30008!=r.logistics_id),IsUseA4Size:!1,PdfWidth:320,PdfHeight:425,LocationY:-420,PrintStatus:"0",MallId:r.mall_info.platform_mall_id,MallName:r.mall_info.platform_mall_name};c.push(o)},u=0;case 6:if(!(u<e.length)){r.next=13;break}if(m=d(u),"continue"!==m){r.next=10;break}return r.abrupt("continue",10);case 10:u++,r.next=6;break;case 13:return p={IsDownload:i,PdfExtendName:n?".pdf":".PDF",PdfExtendNameIsLower:n,IsPrintVirtualFaceSheet:s,Site:a,IsShowWindow:o,PdfInfoList:c,VirtualPdfPath:{},ConvertFaceInfoList:[]},r.next=16,window["BaseUtilBridgeService"].getOrderPdfInfo(p);case 16:if(f=r.sent,h=JSON.parse(f),200==h.code){r.next=22;break}for(_ in g="",h.failList)g=g+","+_+","+h.failList[_],g=g.substring(1);return r.abrupt("return",l.$refs.Logs.writeLog("预览失败,".concat(g),!1));case 22:if(b=JSON.parse(JSON.stringify(c)),b.forEach((function(e){var t=h.data.find((function(t){return t&&t.OrderSn==e.OrderNo}));t&&(e.PDFUrl=t.PDFFilePath)})),w=null,v={},!s){r.next=33;break}return r.next=29,window["BaseUtilBridgeService"].getVirtualFace(b,!0);case 29:if(w=r.sent,v=w&&JSON.parse(w),v&&"200"==v.code){r.next=33;break}return r.abrupt("return",l.$message.warning("获取虚拟面单失败"));case 33:S=[],k=function(n){var i=e[n];if(!i.url&&"TW"!==a)return l.$refs.Logs.writeLog("订单".concat(i.order_sn,"未获取到面单信息"),!1),"continue";var r=t.find((function(e){return e.order_sn==i.order_sn})),o=h.data&&h.data.find((function(e){return e&&e.OrderSn==r.order_sn}))||null,c={HtmlFilePath:o?o.PDFFilePath:i.url&&i.url.includes(".html")?i.url:"",PDFFilePath:o?o.PDFFilePath:i.url&&i.url.includes(".PDF")||i.url&&i.url.includes(".pdf")?i.url:"",LogisticsId:r.logistics_id.toString(),OrderSn:r.order_sn,MallId:Number(r.mall_info.platform_mall_id),VirtualFilePath:s?v.data[r.order_sn]:""};S.push(c)},y=0;case 36:if(!(y<e.length)){r.next=43;break}if(x=k(y),"continue"!==x){r.next=40;break}return r.abrupt("continue",40);case 40:y++,r.next=36;break;case 43:return r.next=45,window["BaseUtilBridgeService"].htmlToPdf(S,!1,l.isDownloadOriginFace711,l.isDownloadOriginFaceQJ);case 45:if(L=r.sent,O=L&&JSON.parse(L),200==O.code){r.next=51;break}for(I in C="",O.failList)C=C+","+I+","+O.failList[I],C=C.substring(1);return r.abrupt("return",l.$refs.Logs.writeLog("打印面单失败,".concat(C),!1));case 51:return D={IsDownload:i,PdfExtendName:n?".pdf":".PDF",PdfExtendNameIsLower:n,IsPrintVirtualFaceSheet:s,Site:a,IsShowWindow:o,PdfInfoList:b,VirtualPdfPath:s?v.data:{},ConvertFaceInfoList:O.data,isGetSourceTW:l.isDownloadOriginFace711||l.isDownloadOriginFaceQJ},l.tableLoading=!0,r.next=55,window["BaseUtilBridgeService"].downloadPdf(D);case 55:return l.tableLoading=!1,i&&l.$refs.Logs.writeLog("面单下载完成,请前往桌面查看",!0),r.next=59,l.updateOrderPrintStatus(c);case 59:s&&l.$refs.Logs.writeLog("虚拟面单下载完成,请前往软件所在文件夹查看",!0),r.next=66;break;case 62:r.prev=62,r.t0=r["catch"](2),l.tableLoading=!1,r.t0.includes("进程")?l.$refs.Logs.writeLog("打印面单失败，文件被占用请重启软件",!1):l.$refs.Logs.writeLog("打印面单失败，".concat(r.t0),!1);case 66:case"end":return r.stop()}}),r,null,[[2,62]])})))()},syncFaceDataSingle:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.syncSurface([e],!0);case 1:case"end":return a.stop()}}),a)})))()},syncSurfaceBefore:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=2;break}return t.abrupt("return",e.$message.warning("请先选择数据！"));case 2:if(a=e.multipleSelection.filter((function(e){return"1"!==e.hasLogistics||""==e.tracking_no})),a.length){t.next=5;break}return t.abrupt("return",e.$message.warning("当前没有需要同步面单的订单！"));case 5:n=a.filter((function(e){return"TW"==e.country})),n.length?e.$confirm("是否同时批量同步台湾站点的面单（同步台湾站的面单将会缩短发货时效，请谨慎选择）!","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){e.syncSurface(a,!0)})).catch((function(){var t=a.filter((function(e){return"TW"!==e.country}));e.syncSurface(t,!1)})):e.syncSurface(a,!1);case 7:case"end":return t.stop()}}),t)})))()},syncSurface:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.showConsole=!1,e.length){n.next=4;break}return a.$refs.Logs.writeLog("没有要同步的订单！",!0),n.abrupt("return");case 4:a.$refs.Logs.writeLog("同步面单信息开始，请耐心等待！",!0),i=new c["a"](a,a.$refs.Logs.writeLog),i.handleStart(e,t);case 7:case"end":return n.stop()}}),n)})))()},downLoadPickList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=2;break}return t.abrupt("return",e.$message.warning("请先选择数据！"));case 2:e.showConsole=!1,e.$refs.Logs.writeLog("下载拣货单开始，请耐心等待！",!0),a=new c["a"](e,e.$refs.Logs.writeLog),a.getPickListData(e.multipleSelection);case 6:case"end":return t.stop()}}),t)})))()},downloadSetSave:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s,l,c,d,u,m,p,f,h,g,_,b,w,v,S,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.downloadSetList.length||e.$message.warning("请选择需要导出的选项"),a=[],!e.multipleSelection.length){t.next=6;break}a=[e.multipleSelection],t.next=36;break;case 6:return n="",e.selectMallList.forEach((function(e,t){n=0===t?e.id:n+","+e.id})),i=JSON.parse(JSON.stringify(e.selectForm)),i["page"]=1,i["pageSize"]=200,i["sysMallId"]=n,i["createTime"]=e.createTime.length?e.createTime[0]+" 00:00:00/"+e.createTime[1]+" 23:59:59":"",e.tableLoading=!0,t.next=16,e.$api.getDeliveryList(i);case 16:s=t.sent,l=s.data,c=[],d=l&&200===l.code&&l.data.data&&l.data.data||[];case 20:if(!d||!d.length){t.next=31;break}return d.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.joinLink(a,a.goodsInfo[0].goods_id);case 2:a.goodsLink=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c=c.concat(d),i.page++,t.next=26,e.$api.getDeliveryList(i);case 26:u=t.sent,m=u.data,d=m&&200===m.code&&m.data.data&&m.data.data||[],t.next=20;break;case 31:if(e.tableLoading=!1,c.length){t.next=34;break}return t.abrupt("return",e.$message.warning("没有可导出的数据！"));case 34:if(p=JSON.parse(JSON.stringify(c)),p.length>7e3){f=0;while(p.length)a[f]=p.splice(0,7e3),f++}else a[0]=p;case 36:for(h=[],1,g=0;g<a.length;g++)for(_=a[g],b=function(t){for(var a=_[t],n=function(t){var n=a.goodsInfo[t],i={};e.downloadSetList.map((function(t){"country"===t?i[t]=a.mall_info&&a.mall_info.country?e.$filters.chineseSite(a.mall_info.country):"":"platform_mall_name"===t?i[t]=a.mall_info&&a.mall_info.platform_mall_name?a.mall_info.platform_mall_name:"":"goods_name"===t?i[t]=n.goods_name?n.goods_name:"":"outer_goods_id"===t?i[t]=n.outer_goods_id?n.outer_goods_id:"":"order_sn"===t?i[t]=n.order_sn?n.order_sn:"":"goods_count"===t?i[t]=n.goods_count?n.goods_count:"":"variation_name"===t?i[t]=n?n.variation_name:"":"goodsLink"===t?i[t]=a.goodsLink?a.goodsLink:"":"goods_img"===t?i[t]=n?e.$filters.imageRender([n.goods_img]):"":"created_time"===t?i[t]=a.created_time?a.created_time:"":"ship_by_date"===t?i[t]=a.ship_by_date?a.ship_by_date:"":"is_apply_tracking_no"===t?i[t]=a.is_apply_tracking_no?e.trackStatus[a.is_apply_tracking_no]:"":"hasLogistics"===t?i[t]=0==a.hasLogistics?"否":"是":"order_status"===t?i[t]=a.order_status?Object(o["d"])(a.order_status):"":"logistics_name"===t?i[t]=a.logistics_name?a.logistics_name:"":"tracking_no"===t&&(i[t]=a.tracking_no?a.tracking_no:"")})),h.push(i)},i=0;i<a.goodsInfo.length;i++)n(i)},w=0;w<_.length;w++)b(w);v=e.downloadSetList.map((function(e){var t={};return t.propName=e,"country"===e?(t.label="站点",t.width=60):"platform_mall_name"===e?(t.label="店铺名称",t.width=120):"goods_name"===e?(t.label="商品名称",t.width=350):"outer_goods_id"===e?(t.label="parentSKU",t.width=120):"order_sn"===e?(t.label="订单编号",t.width=150):"goods_count"===e?(t.label="商品数量",t.width=100):"variation_name"===e?(t.label="商品规格",t.width=150):"goodsLink"===e?(t.label="商品链接",t.width=180):"goods_img"===e?(t.label="商品图片",t.width=80):"created_time"===e?(t.label="订单创建时间",t.width=180):"ship_by_date"===e?(t.label="截止发货时间",t.width=180):"is_apply_tracking_no"===e?(t.label="是否已申请物流单号",t.width=60):"hasLogistics"===e?(t.label="是否同步面单信息",t.width=60):"order_status"===e?(t.label="发货状态",t.width=60):"logistics_name"===e&&(t.label="虾皮物流",t.width=180),t})),S=escape(JSON.stringify(v)),k=escape(JSON.stringify(h)),e.$BaseUtilService.openUrl("http://".concat(window.location.host,"/customSetDownload?goodsProps=").concat(JSON.stringify(S),"&&goodsList=").concat(JSON.stringify(k)));case 43:case"end":return t.stop()}}),t)})))()},getExportData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o,s,l,c,d,u,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.multipleSelection.length){t.next=4;break}e.tableToExcel([e.multipleSelection]),t.next=36;break;case 4:return a="",e.selectMallList.forEach((function(e,t){a=0===t?e.id:a+","+e.id})),n=JSON.parse(JSON.stringify(e.selectForm)),n["page"]=1,n["pageSize"]=200,n["sysMallId"]=a,n["createTime"]=e.createTime.length?e.createTime[0]+" 00:00:00/"+e.createTime[1]+" 23:59:59":"",e.tableLoading=!0,t.next=14,e.$api.getDeliveryList(n);case 14:i=t.sent,o=i.data,s=[],l=o&&200===o.code&&o.data.data&&o.data.data||[];case 18:if(!l||!l.length){t.next=29;break}return l.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.joinLink(a,a.goodsInfo[0].goods_id);case 2:a.goodsLink=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),s=s.concat(l),n.page++,t.next=24,e.$api.getDeliveryList(n);case 24:c=t.sent,d=c.data,l=d&&200===d.code&&d.data.data&&d.data.data||[],t.next=18;break;case 29:if(e.tableLoading=!1,s.length){t.next=32;break}return t.abrupt("return",e.$message.warning("没有可导出的数据！"));case 32:if(u=[],m=JSON.parse(JSON.stringify(s)),m.length>7e3){p=0;while(m.length)u[p]=m.splice(0,7e3),p++}else u[0]=m;e.tableToExcel(u);case 36:case"end":return t.stop()}}),t)})))()},tableToExcel:function(e){for(var t=1,a="<tr>\n            <td>编号</td>\n            <td>站点</td>\n            <td>店铺名称</td>\n            <td>商品名称</td>\n            <td>parentSKU</td>\n            <td>订单编号</td>\n            <td>商品数量</td>\n            <td>商品规格</td>\n            <td>商品链接</td>\n            <td>商品图片</td>\n            <td>订单创建时间</td>\n            <td>截止发货时间</td>\n            <td>是否已申请物流单号</td>\n            <td>是否同步面单信息</td>\n            <td>发货状态</td>\n            <td>虾皮物流</td>\n            <td>虾皮物流单号</td>\n            </tr>",n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)for(var s=i[r],c=0;c<s.goodsInfo.length;c++){var d=s.goodsInfo[c];a+="<tr><td>".concat(t++,"</td>\n                <td>").concat(s.mall_info&&s.mall_info.country?this.$filters.chineseSite(s.mall_info.country):"\t","</td>\n                <td>").concat(s.mall_info&&s.mall_info.platform_mall_name?s.mall_info.platform_mall_name:"\t","</td>\n                <td>").concat(d.goods_name?d.goods_name:"\t","</td>\n                <td>").concat(d.outer_goods_id?d.outer_goods_id:"\t","</td>\n                <td style=\"mso-number-format:'@';\">").concat(d.order_sn?d.order_sn:"\t","</td>\n                <td>").concat(d.goods_count?d.goods_count:"\t","</td>\n                <td>").concat(d?d.variation_name:"\t","</td>\n                <td>").concat(s.goodsLink?s.goodsLink:"\t","</td>\n                <td>").concat(d?this.$filters.imageRender([d.goods_img]):"\t","</td>\n                <td>").concat(s.created_time?s.created_time:"\t","</td>\n                <td>").concat(s.ship_by_date?s.ship_by_date:"\t","</td>\n                <td>").concat(s.is_apply_tracking_no?this.trackStatus[s.is_apply_tracking_no]:"\t","</td>\n                <td>").concat(0==s.hasLogistics?"否":"是\t","</td>\n                <td>").concat(s.order_status?Object(o["d"])(s.order_status):"\t","</td>\n                <td>").concat(s.logistics_name?s.logistics_name:"\t","</td>\n                <td>").concat(s.tracking_no?s.tracking_no:"\t","</td>\n                </tr>")}Object(l["j"])("发货管理订单数据",a)},changeRemark:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.setLocalRemark({id:e,remark:t.orderRemark});case 2:if(n=a.sent,200!=n.data.code){a.next=9;break}return i=t.tableData.findIndex((function(t){return t.id===e})),t.$message.success("设置备注成功"),t.tableData[i].remark=t.orderRemark,t.activeRemarkID="",a.abrupt("return");case 9:t.$message.error("设置备注失败"),t.activeRemarkID="";case 11:case"end":return a.stop()}}),a)})))()},editRemark:function(e){this.activeRemarkID=e;var t=this.tableData.findIndex((function(t){return t.id===e}));this.orderRemark=this.tableData[t].remark},openBefore:function(){if(!this.multipleSelection.length)return this.$message.warning("请先选择需要备注的商品！");this.localRamarkVisible=!0},batchSetRemark:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=2;break}return t.abrupt("return",e.$message.warning("请先选择需要标记的商品！"));case 2:e.showConsole=!1,e.multipleSelection.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:a.id,remark:e.localRamark},t.next=3,e.$api.setLocalRemark(n);case 3:i=t.sent,200===i.data.code?(e.$refs.multipleTable.toggleRowSelection(a,!1),e.$refs.Logs.writeLog("订单编号【".concat(a.order_sn,"】备注成功"),!0)):e.$refs.Logs.writeLog("订单编号【".concat(a.order_sn,"】备注失败-").concat(i.data.message),!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.closeDialog(),e.getOrderList();case 6:case"end":return t.stop()}}),t)})))()},handleKey:function(e){return e.split("\n").map((function(e){return e.replace(/(^\s*)|(\s*$)/g,"")})).filter((function(e){return""!=e}))},openGoodsDetail:function(e){this.clickRow=e,this.goodsList=e.goodsInfo,this.goodsListVisible=!0},closeDialog:function(){this.clickRow={},this.goodsList=[],this.goodsSearchVisible=!1,this.goodsOrderSnStr="",this.localRamark="",this.localRamarkVisible=!1},getOrderList:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i="",a.selectMallList.forEach((function(e,t){i=0===t?e.id:i+","+e.id})),r=JSON.parse(JSON.stringify(a.selectForm)),a.currentPage=e||a.currentPage,r["page"]=a.currentPage,r["pageSize"]=a.pageSize,r["sysMallIds"]=i,r["createTime"]=a.createTime&&a.createTime.length?a.createTime[0]+" 00:00:00/"+a.createTime[1]+" 23:59:59":"",r["shipByDate"]=a.shipByDate&&a.shipByDate.length?a.shipByDate[0]+" 00:00:00/"+a.shipByDate[1]+" 23:59:59":"",t&&(o=a.handleKey(t),o=o.splice(0,50),r.orderSn=o.join(",")),a.tableLoading=!0,n.next=14,a.$api.getDeliveryList(r);case 14:s=n.sent,200===s.data.code?(a.tableData=s.data.data.data,a.total=s.data.data.total):a.$message.error("获取列表失败，".concat(s.data?s.data.message:"")),a.tableLoading=!1,a.closeDialog(),n.next=23;break;case 20:n.prev=20,n.t0=n["catch"](0),a.tableLoading=!1;case 23:case"end":return n.stop()}}),n,null,[[0,20]])})))()},joinLink:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i="",!e.mall_info||!e.mall_info.platform_mall_id){n.next=7;break}return r={platform_mall_id:e.mall_info?e.mall_info.platform_mall_id:""},n.next=5,a.$shopeemanService.getWebUrl(e.country,r);case 5:o=n.sent,i=o+"/product/"+e.mall_info.platform_mall_id+"/"+t;case 7:return n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))()},openUrl:function(e,t,a){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var r,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e,"product"!==a){i.next=7;break}return o={platform_mall_id:e.mall_info.platform_mall_id},i.next=5,n.$shopeemanService.getWebUrl(e.country,o);case 5:s=i.sent,r=s+"/product/"+e.mall_info.platform_mall_id+"/"+t;case 7:n.$BaseUtilService.openUrl(r);case 8:case"end":return i.stop()}}),i)})))()},viewDetails:function(e,t,a){var n={type:e,shopId:a,id:t};this.$BaseUtilService.getOrderDetailInfo(a,JSON.stringify(n))},changeMallList:function(e){this.selectMallList=e.mallList},handleCurrentChange:function(e){this.currentPage=e,this.getOrderList()},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getOrderList()},handleSelectionChange:function(e){this.multipleSelection=e},copyItem:function(e){var t=document.createElement("div");t.id="tempTarget",t.style.opacity="0",t.innerText=e,document.body.appendChild(t);try{var a=document.createRange();a.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(n){}t.parentElement.removeChild(t)},changeOrderStatus:o["d"]}},u=d,m=(a("c4c7"),a("2877")),p=Object(m["a"])(u,n,i,!1,null,"982a64bc",null);t["default"]=p.exports},f818:function(e,t,a){},feb6:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"storeChooseUL"},[e.isMall?a("li",[e._v(e._s(e._f("chineseSite")(e.countryVal)))]):a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:e.isBanPerform},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{disabled:e.isBanPerform,multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groupIdList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})})),1)],1),a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{disabled:e.isBanPerform,placeholder:"",multiple:!e.isAShop,"collapse-tags":"","filter-method":e.filterMall,size:"mini",filterable:"",clearable:""},on:{"visible-change":function(t){return e.filterMall("")}},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[e.isAShop?e._e():a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.siteShowList,(function(t,n){return e.showMall(t,n)?a("el-option",{key:n,attrs:{label:t.mall_alias_name||t.platform_mall_name,value:t.platform_mall_id}}):e._e()}))],2)],1),e.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:e.reset}},[e._v("　刷　　新　")])],1):e._e()])])},i=[],r=a("1da1"),o=a("b85c"),s=a("2909"),l=(a("96cf"),a("d81d"),a("fb6a"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("99af"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("c740"),a("7db0"),a("7646")),c=a("2b0e");c["default"].directive("loadmore",{bind:function(e,t){var a=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?t.value(!0,this):this.scrollTop<30&&t.value(!1,this)}))}});var d={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(e){this.siteShowList=e},countryVal:{handler:function(e,t){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(e,t){var a=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var n=t.indexOf("")>-1,i=e.indexOf("")>-1;n!==i?this.groupId=i?Object(s["a"])(this.groupIdList.map((function(e){return e.id}))):[]:i?this.groupId=e.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(e,t){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var n=this.isShowName;if(!this.isAShop){var i=t.includes(""),r=e.includes("");if(i!==r||t.toString()===e.toString()&&this.isShowNameAll)if(r&&(!n||n&&!this.isShowNameAll)){var l=n&&Object(s["a"])(this.siteShowList.map((function(e){return e.platform_mall_id})))||[""].concat(Object(s["a"])(this.siteList.map((function(e){return e.platform_mall_id})))),c=new Set([].concat(Object(s["a"])(l),Object(s["a"])(t)));this.site=Object(s["a"])(c),this.isShowNameAll=!0,n&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var d=[];if(n){var u=n&&Object(s["a"])(this.siteShowList.map((function(e){return e.platform_mall_id}))),m=u.length>this.site.length&&this.site||u,p=u.length>this.site.length&&u||this.site;d=new Set(this.site);var f,h=Object(o["a"])(p);try{for(h.s();!(f=h.n()).done;){var g=f.value;m.includes(g)&&d.delete(g)}}catch(_){h.e(_)}finally{h.f()}d.delete("")}this.site=Object(s["a"])(d)}else r?this.site=e.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1}setTimeout((function(){a.changeMallList(),a.filterMall(n),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.site=[],n=t.countryVal,i=[],!(t.jsonMallData.length>0)){a.next=7;break}i=t.jsonMallData,a.next=12;break;case 7:return a.next=9,t.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:r=a.sent,i=JSON.parse(r)||[],t.jsonMallData=JSON.parse(r)||[];case 12:if(!(i.length>0)){a.next=17;break}1===e&&(t.siteList=""===n?i:i.filter((function(e){return e.country===n}))),2===e&&(0===t.groupId.length?t.siteList=[]:(t.siteList=[],t.groupId.forEach((function(e){i.forEach((function(a){n?e===a.group_id&&n===a.country&&t.siteList.push(a):e===a.group_id&&t.siteList.push(a)}))})))),a.next=22;break;case 17:return o={country:"",mallGroupIds:""},a.next=20,t.mallListAPIInstance.ddMallGoodsGetMallList(o);case 20:l=a.sent,200===l.code?(t.$appConfig.temporaryCacheInfo("save","mallAllData",l.data),c=l.data||[],t.siteList=c,t.jsonMallData=c,t.siteList=""===n?c:c.filter((function(e){return e.country===n}))):t.$message.error("获取分组、店铺列表失败");case 22:d=[],0===t.groupIdList.length&&(t.groupIdList=[{group_name:"全部",id:""}],t.siteList.forEach((function(e){var t=d.findIndex((function(t){return t&&t.id===e.group_id}));e.group_name&&t<0&&d.push({group_name:e.group_name,id:e.group_id})})),d.zzSort("id"),t.groupIdList=[].concat(Object(s["a"])(t.groupIdList),d),t.groupId=[""].concat(Object(s["a"])(d.map((function(e){return e.id}))))),setTimeout((function(){t.isAllowSet2=!0,t.isAllowSet1=!0,t.site=!t.isAShop&&[""]||""}),10);case 25:case"end":return a.stop()}}),a)})))()},changeMallList:function(){var e=this,t=[],a="";if(this.isAShop){var n=this.siteList.find((function(t){return t.platform_mall_id===e.site}));a=this.site,t.push(n)}else this.site.forEach((function(n){if(n){var i=e.siteList.find((function(e){return e.platform_mall_id===n}));t.push(i),a+=n+","}}));!this.countryVal&&this.groupId.indexOf("")>-1&&(a=t.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:t,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(t["country"]=this.countryVal,this.$emit("changeMallList",t))},filterMall:function(e){var t=this,a=e&&this.isShowName!==e?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){t.isShowName!==e&&(t.mallShowIndex=0),t.isShowName=e||"";var a=t.siteList;e&&(a=t.siteList.filter((function(t){var a=t.mall_alias_name||t.platform_mall_name;return a.includes(e)}))),t.siteShowList=a}),a)},showMall:function(e,t){var a=e.mall_alias_name||e.platform_mall_name,n=this.site[0]===e.platform_mall_id;return n||this.mallShowIndex<=t&&t<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(e,t){if(this.siteShowList.length>this.showMallNumber){var a=0;e?(a=this.mallShowIndex+10,a=a<this.siteShowList.length-this.showMallNumber&&a||this.siteShowList.length-this.showMallNumber):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(t.scrollTop=e?t.scrollTop-100:30),this.mallShowIndex=a}}}},u=d,m=(a("8992"),a("2877")),p=Object(m["a"])(u,n,i,!1,null,null,null);t["a"]=p.exports}}]);