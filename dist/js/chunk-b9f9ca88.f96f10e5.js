(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9f9ca88"],{"3a98":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"detai"},[n("div",{staticClass:"condition"},[n("div",{staticClass:"left-box mar-right"},[n("div",{staticClass:"base-box"},[n("span",{staticClass:"base-title"},[t._v("基础操作")]),n("div",{staticClass:"base-item"},[n("div",{staticClass:"row"},[n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.setShotStatusFun}},[t._v("采购状态变更")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.syncAfterOrder("")}}},[t._v("售后同步")]),n("el-checkbox",{staticClass:"mar-left",model:{value:t.mall_compare,callback:function(e){t.mall_compare=e},expression:"mall_compare"}},[t._v("全店同步")])],1),n("div",{staticClass:"row"},[n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.respondCancelRequest("reject","拒绝")}}},[t._v("批量拒绝买家取消订单")]),n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.respondCancelRequest("accept","接受")}}},[t._v("批量接受买家取消订单")])],1),n("div",{staticClass:"row"},[n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:function(e){t.colorVisible=!0}}},[t._v("批量标记颜色标识")]),n("el-button",{staticClass:"btnWidth",attrs:{size:"mini",type:"primary"},on:{click:t.getExportData}},[t._v("导出数据")])],1)])])]),n("div",{staticClass:"right-box"},[n("div",{staticClass:"base-box"},[n("span",{staticClass:"base-title"},[t._v("基础操作")]),n("div",{staticClass:"base-item"},[n("div",{staticClass:"row"},[n("storeChoose",{attrs:{"is-all":!0,"show-mall":!0},on:{changeMallList:t.changeMallList}}),n("div",{staticClass:"row_item"},[n("label",[t._v("创建时间：")]),n("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:function(e){return t.changeTime(e,"cloumn_date1")}},model:{value:t.cloumn_date1,callback:function(e){t.cloumn_date1=e},expression:"cloumn_date1"}})],1)],1),n("div",{staticClass:"row"},[n("div",{staticClass:"row_item"},[n("label",[t._v("售后状态：")]),n("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",multiple:"","collapse-tags":"",filterable:""},on:{change:function(e){return t.changeSelect(e,"refundStatus",t.afterSaleList)}},model:{value:t.query.refundStatus,callback:function(e){t.$set(t.query,"refundStatus",e)},expression:"query.refundStatus"}},[n("el-option",{attrs:{label:"全部",value:""},nativeOn:{click:function(e){return t.selectAll("refundStatus",t.afterSaleList)}}}),t._l(t.afterSaleList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),n("div",{staticClass:"row_item"},[n("label",[t._v("采购状态：")]),n("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",multiple:"","collapse-tags":"",filterable:""},on:{change:function(e){return t.changeSelect(e,"shotOrderStatus",t.shotstatusList)}},model:{value:t.query.shotOrderStatus,callback:function(e){t.$set(t.query,"shotOrderStatus",e)},expression:"query.shotOrderStatus"}},[n("el-option",{attrs:{label:"全部",value:""},nativeOn:{click:function(e){return t.selectAll("shotOrderStatus",t.shotstatusList)}}}),t._l(t.shotstatusList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),n("div",{staticClass:"row_item"},[n("label",[t._v("颜色标识：")]),n("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:t.query.colorLabelId,callback:function(e){t.$set(t.query,"colorLabelId",e)},expression:"query.colorLabelId"}},[n("el-option",{attrs:{label:"全部",value:0}}),n("el-option",{attrs:{label:"未标识",value:-1}}),n("el-option",{attrs:{label:"已标识",value:-2}}),t._l(t.selectColorList,(function(t){return n("el-option",{key:t.id,style:{color:t.color},attrs:{label:t.name,value:t.id}})}))],2)],1),n("div",{staticClass:"row_item"},[n("label",[t._v("申请时间：")]),n("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:function(e){return t.changeTime(e,"cloumn_date2")}},model:{value:t.cloumn_date2,callback:function(e){t.cloumn_date2=e},expression:"cloumn_date2"}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"row_item"},[n("el-select",{staticStyle:{width:"120px","margin-right":"3px"},attrs:{size:"mini"},on:{change:function(e){t.inputDes=""}},model:{value:t.selType,callback:function(e){t.selType=e},expression:"selType"}},[n("el-option",{attrs:{label:"订单编号",value:"orderSn"}}),n("el-option",{attrs:{label:"采购物流单号",value:"trackingNumber"}}),n("el-option",{attrs:{label:"采购单号",value:"shotOrderSn"}})],1),n("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",clearable:""},model:{value:t.inputDes,callback:function(e){t.inputDes=e},expression:"inputDes"}})],1),n("div",{staticClass:"row_item"},[n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.search(1)}}},[t._v("搜索")])],1)]),n("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"row_item"},[n("el-checkbox",{model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}},[t._v("隐藏日志")])],1)])])])])]),n("div",{staticClass:"table-form"},[n("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{border:!1,"use-virtual":"",height:"640px",data:t.tableList,"tooltip-effect":"dark","row-style":{height:"60px !important"},"cell-style":{padding:"0px"}},on:{"selection-change":t.handleSelectionChange}},[n("u-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),n("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.page-1)*t.pageSize+e.$index+1))]}}])}),n("u-table-column",{attrs:{label:"订单编号",prop:"order_sn","min-width":"180px",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("span",[n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(o.order_sn)}}}),n("span",{staticClass:"tableActive",on:{click:function(e){return t.viewDetails("orderDetail",o.order_id,o.mall_info.platform_mall_id)}}},[t._v(t._s(o.order_sn))])])]}}])}),n("u-table-column",{attrs:{label:"操作",prop:"","min-width":"150px",fixed:"left",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;e.$index;return[n("el-dropdown",{staticStyle:{width:"100px","margin-left":"10px"}},[n("el-button",{staticStyle:{width:"100px"},attrs:{size:"mini",plain:"",type:"primary"}},[t._v(" 更多操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.goodsDelete(o)}}},[t._v("删除商品")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.goodsDelist(o)}}},[t._v("下架商品")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){t.shotVisible=!0,t.multipleSelection=[o]}}},[t._v("修改采购状态")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.syncAfterOrder(o)}}},[t._v("同步此店铺售后订单")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.setColorSingle(o)}}},[t._v("订单颜色标识")])]),n("el-dropdown-item",[n("div",{staticClass:"dropdownItem",on:{click:function(e){return t.SyncOrderSingle(o)}}},[t._v("同步此订单")])])],1)],1)]}}])}),n("u-table-column",{attrs:{label:"站点",prop:"country","min-width":"60px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("span",[t._v(t._s(t._f("chineseSite")(o.mall_info.country)))])]}}])}),n("u-table-column",{attrs:{label:"店铺名称",prop:"mall_info.platform_mall_name",width:"120px",align:"center","show-overflow-tooltip":""}}),n("u-table-column",{attrs:{align:"center",prop:"color_id",label:"颜色标识",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",{style:{background:t.changeColorLabel(e.row.color_id),height:"20px"}}),n("span",[t._v(t._s(t.changeColorLabel(e.row.color_id,"name")))])]}}])}),n("u-table-column",{attrs:{label:"退款金额",prop:"refund_amount","min-width":"100px",align:"center"}}),n("u-table-column",{attrs:{align:"center",prop:"shot_order_info.shot_amount",label:"采购价",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.shot_order_info.shot_amount)+t._s(t._f("siteCoin")(e.row.country)))]}}])}),n("u-table-column",{attrs:{align:"center",prop:"shot_amount_rmb",label:"采购价(RMB)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.shot_order_info.shot_amount_rmb)+"元")]}}])}),n("u-table-column",{attrs:{label:"售后状态",prop:"status","min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("p",{style:{color:t.changeOrderStatus(o.status,"color")}},[t._v(t._s(t.changeOrderStatus(o.status)))])]}}])}),n("u-table-column",{attrs:{label:"申请时间",prop:"update_time","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"采购状态",prop:"shot_order_info.shot_status","min-width":"90px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("span",{style:{color:t.changeShotStatus(o.shot_order_info.shot_status,"color")}},[t._v(t._s(t.changeShotStatus(o.shot_order_info.shot_status)))])]}}])}),n("u-table-column",{attrs:{label:"售后原因",prop:"after_reason","min-width":"150px",align:"center","show-overflow-tooltip":""}}),n("u-table-column",{attrs:{align:"center",prop:"remark",label:"本地备注",width:"150","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{directives:[{name:"show",rawName:"v-show",value:!(e.row.id===t.activeRemarkID),expression:"!(scope.row.id === activeRemarkID)"}],staticStyle:{cursor:"pointer"},on:{click:function(n){return t.editRemark(e.row.id)}}},[n("el-input",{attrs:{disabled:"",size:"mini"},model:{value:e.row.remark,callback:function(n){t.$set(e.row,"remark",n)},expression:"scope.row.remark"}})],1),e.row.id===t.activeRemarkID?n("el-input",{attrs:{size:"mini"},on:{blur:function(n){return t.changeRemark(e.row)}},model:{value:t.orderRemark,callback:function(e){t.orderRemark=e},expression:"orderRemark"}}):t._e()]}}])}),n("u-table-column",{attrs:{label:"商品ID",prop:"goods_info.goods_id","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("span",[n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(o.goods_info.goods_id)}}}),n("span",{staticClass:"tableActive",on:{click:function(e){return t.openUrl(o,"product")}}},[t._v(t._s(o.goods_info.goods_id))])])]}}])}),n("u-table-column",{attrs:{label:"商品数量",prop:"goods_info.goods_count","min-width":"150px",align:"center"}}),n("u-table-column",{attrs:{label:"商品图片",prop:"goods_info.goods_img","min-width":"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[n("el-tooltip",{staticStyle:{width:"32px",height:"32px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t._f("imageRender")([o.goods_info.goods_img])}})],1),n("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:t._f("imageRender")([o.goods_info.goods_img,!0])}})],1)]}}])}),n("u-table-column",{attrs:{align:"center",label:"商品类目",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.goods_info?t.getCategoryName(e.row.goods_info.goods_category_id,e.row.country):"未匹配到类目")+" ")])]}}])}),n("u-table-column",{attrs:{label:"商品规格",prop:"goods_info.variation_name","min-width":"100px",align:"center"}}),n("u-table-column",{attrs:{label:"采购商品ID",prop:"goods_info.ori_goods_id","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.goods_info.ori_goods_id?n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(o.goods_info.ori_goods_id)}}}):t._e(),o.goods_info.ori_goods_id?n("span",[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.openUrl(o.goods_info.ori_url)}}},[t._v(" "+t._s(o.goods_info.ori_goods_id)+" ")])],1):t._e()]}}])}),n("u-table-column",{attrs:{label:"采购订单号",width:"150","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.shot_order_info.shot_order_sn?n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(n){return t.copy(e.row.shot_order_info.shot_order_sn)}}}):t._e(),n("span",{staticClass:"tableActive",on:{click:function(n){return t.clickBuyOrder(e.row)}}},[t._v(t._s(e.row.shot_order_info.shot_order_sn))])]}}])}),n("u-table-column",{attrs:{label:"采购时间",prop:"shot_order_info.shotted_at","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"采购物流单号",prop:"shot_order_info.shot_tracking_number","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[o.shot_order_info.shot_tracking_number?n("i",{staticClass:"el-icon-document-copy copyStyle",on:{click:function(e){return t.copy(o.shot_order_info.shot_tracking_number)}}}):t._e(),o.shot_order_info.shot_tracking_number?n("span",{staticClass:"tableActive"},[t._v(t._s(o.shot_order_info.shot_tracking_number)+" ")]):t._e()]}}])}),n("u-table-column",{attrs:{align:"center",prop:"buy_account_info",label:"采购账号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.shot_order_info.buy_account_info?e.row.shot_order_info.buy_account_info.name:""))]}}])}),n("u-table-column",{attrs:{label:"订单创建时间",prop:"after_created_at","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"订单截止发货时间",prop:"","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"退货物流号",prop:"return_tracking_number","min-width":"180px",align:"center"}}),n("u-table-column",{attrs:{label:"退件发货地址",prop:"return_delivery_time","min-width":"200px",align:"center"}}),n("u-table-column",{attrs:{label:"退货地址",prop:"return_address","min-width":"200px",align:"center"}}),n("u-table-column",{attrs:{label:"退货邮寄地址",prop:"return_pickup_address","min-width":"200px",align:"center"}})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[20,50,100,200],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),n("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}}),t.colorVisible?n("el-dialog",{attrs:{title:"选择颜色标识",visible:t.colorVisible,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.colorVisible=e}}},[n("div",{staticClass:"color-style"},[n("el-table",{ref:"colorTable",staticStyle:{width:"100%"},attrs:{data:t.colorList,"tooltip-effect":"dark",height:"500"}},[n("el-table-column",{attrs:{label:"标识选择",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-radio",{attrs:{label:e.$index},nativeOn:{change:function(n){return t.getCurrentRow(e.row)}},model:{value:t.colorRadio,callback:function(e){t.colorRadio=e},expression:"colorRadio"}})]}}],null,!1,3784151285)}),n("el-table-column",{attrs:{prop:"name",label:"颜色"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"colorBox",style:{background:t.row.color}})]}}],null,!1,482107263)}),n("el-table-column",{attrs:{prop:"name",label:"标识名称"}})],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.setColor(t.multipleSelection)}}},[t._v("设置颜色")])],1)]):t._e(),n("el-dialog",{staticClass:"dialog-color",attrs:{title:"采购状态变更",width:"300px","close-on-click-modal":!1,visible:t.shotVisible},on:{"update:visible":function(e){t.shotVisible=e}}},[n("div",{staticClass:"color-dialog"},[n("div",{staticClass:"form-item"},[n("span",{staticClass:"search-title"},[t._v("状态：")]),n("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"mini",clearable:""},model:{value:t.shotstatus,callback:function(e){t.shotstatus=e},expression:"shotstatus"}},t._l(t.shotstatusList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.setShotStatus(t.multipleSelection)}}},[t._v("保存")])],1)])])],1)},r=[],a=n("1da1"),i=n("ade3"),s=(n("96cf"),n("ac1f"),n("841c"),n("7db0"),n("b0c0"),n("99af"),n("caad"),n("2532"),n("4de4"),n("d81d"),n("159b"),n("c740"),n("d3b7"),n("25f0"),n("a15b"),n("5319"),n("bcd0")),l=n("feb6"),c=n("0e0b"),u=n("de70"),d=n("e578"),p={components:{storeChoose:l["a"]},data:function(){var t;return t={pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},orderRemark:"",activeRemarkID:0,shotVisible:!1,shotstatus:"",shotstatusList:s["v"],afterSaleList:[{label:"取消中",value:5},{label:"已取消",value:6},{label:"退货退款中",value:7},{label:"退款成功",value:9},{label:"退款失败",value:10}],rowData:"",multipleSelection:[],colorVisible:!1,mall_compare:!0,showConsole:!1,selType:"orderSn",inputDes:"",cloumn_date1:[],cloumn_date2:[],query:{sysMallIds:"",refundStatus:[""],color:"",shotOrderStatus:[""],afterApplyTime:"",createdTime:"",colorLabelId:0},page:1,pageSize:20,total:0,tableList:[],loading:!1,buyerAccountList:[],searchMallList:[],statusAfterList:s["z"]},Object(i["a"])(t,"showConsole",!0),Object(i["a"])(t,"colorRow",{}),Object(i["a"])(t,"colorList",[]),Object(i["a"])(t,"colorVisible",!1),Object(i["a"])(t,"colorRadio",""),Object(i["a"])(t,"selectColorList",[]),Object(i["a"])(t,"categoryInfo",{}),t},computed:{getCategoryName:function(){return function(t,e){return this.categoryInfo[t]||(this.categoryInfo[t]="正在获取类目...",this.getCategoryInfo(t,e)),this.categoryInfo[t]||""}}},mounted:function(){var t=this;this.loading=!0,this.getBuyerList(),this.getColorList(),this.cloumn_date1=Object(c["g"])(15),setTimeout((function(){t.search()}),2e3)},methods:{clickBuyOrder:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t,"row",e.buyerAccountList),t.shot_order_info.buy_account_info){n.next=3;break}return n.abrupt("return",e.$message.warning("订单无买手号信息"));case 3:if(o=e.buyerAccountList.find((function(e){return e.name===t.shot_order_info.buy_account_info.name&&e.type==t.shot_order_info.buy_account_info.type})),r="",o){n.next=7;break}return n.abrupt("return",e.$message.warning("请登录相应买手号！".concat(t.shot_order_info.buy_account_info.name||"订单无买手号信息")));case 7:n.t0=o.type,n.next=1===n.t0?10:2===n.t0||3===n.t0?14:8===n.t0?18:9===n.t0?22:11===n.t0?26:32;break;case 10:return r=e.changeAccountParams(o),n.next=13,e.$buyerAccountService.pddOrderCenter(r,t.shot_order_info.shot_order_sn);case 13:return n.abrupt("break",33);case 14:return r=e.changeAccountParams(o),n.next=17,e.$buyerAccountService.taobaoOrderCenter(r,t.shot_order_info.shot_order_sn);case 17:return n.abrupt("break",33);case 18:return r=e.changeAccountParams(o),n.next=21,e.$buyerAccountService.AlibabaOrderCenter(r,t.shot_order_info.shot_order_sn);case 21:return n.abrupt("break",33);case 22:return r=e.changeAccountParams(o),n.next=25,e.$buyerAccountService.lazadaOrderCenter(t.country,r,t.shot_order_info.shot_order_sn);case 25:return n.abrupt("break",33);case 26:return a="",a=t.shot_order_info.buy_account_info.orderType?"/user/purchase/order/".concat(t.shot_order_info.buy_account_info.orderId,"?type=").concat(t.shot_order_info.buy_account_info.orderType):"/user/purchase/order/".concat(t.shot_order_info.buy_account_info.orderId,"/?shopid=").concat(t.shot_order_info.shop_id),r=e.changeAccountParams(o),n.next=31,e.$buyerAccountService.shopeeOrderCenter(t.country,r,a);case 31:return n.abrupt("break",33);case 32:return n.abrupt("break",33);case 33:case"end":return n.stop()}}),n)})))()},changeSelect:function(t,e,n){(t.includes("")||t.length!==n.length)&&t.includes("")&&t.length-1<n.length&&(this.query[e]=this.query[e].filter((function(t){return""!==t})))},selectAll:function(t,e){var n=this;this.query[t].length<e.length?(this.query[t]=[],e.map((function(e){n.query[t].push(e.value||e.ShipId)}))):this.query[t]=[]},SyncOrderSingle:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showConsole=!1,e.$refs.Logs.consoleMsg="",e.$refs.Logs.writeLog("【".concat(t.order_id,"】开始同步，请耐心等待!"),!0),o=new u["a"],n.next=6,o.startSingel(t,e.$refs.Logs.writeLog);case 6:case"end":return n.stop()}}),n)})))()},changeTime:function(t,e,n){var o=Object(c["o"])(new Date(t[0]).getTime(),new Date(t[1]).getTime());if(o>93)return n?this[e][n]=Object(c["g"])(30):this[e]=Object(c["g"])(30),this.$message.warning("只支持查询或导出93天内的数据,请重新选择时间！");console.log(o,t,"time-time")},respondCancelRequest:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var r,a,i,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n.multipleSelection.length){o.next=2;break}return o.abrupt("return",n.$message.warning("请选择要操作的数据"));case 2:n.showConsole=!1,r=0;case 4:if(!(r<n.multipleSelection.length)){o.next=14;break}return a=n.multipleSelection[r],i={action:t,order_id:a.order_id,mallId:a.mall_info.platform_mall_id},o.next=9,n.$shopeemanService.respondCancelRequest(a.country,i);case 9:s=o.sent,200===s.code?n.$refs.Logs.writeLog("订单【".concat(a.order_sn,"】").concat(e,"买家取消订单操作成功"),!0):403===s.code?n.$refs.Logs.writeLog("订单【".concat(a.order_sn,"】").concat(e,"买家取消订单操作失败，店铺未登录"),!1):s.data.indexOf("order not ready to cancel")>-1?n.$refs.Logs.writeLog("订单【".concat(a.order_sn,"】").concat(e,"该订单状态无法执行此操作，可能已回复，请知悉！"),!0):n.$refs.Logs.writeLog("订单【".concat(a.order_sn,"】").concat(e,"买家取消订单操作失败，").concat(s.data),!1);case 11:r++,o.next=4;break;case 14:case"end":return o.stop()}}),o)})))()},goodsDelete:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$confirm("是否删除该商品?","商品删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["a"])(e,t)})).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},goodsDelist:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$confirm("是否下架该商品?","商品下架",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(d["b"])(e,t)})).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},changeColorLabel:function(t,e){var n=this.colorList.find((function(e){return e.id==t}));return"name"===e?n&&0!==n.id?n.name:"":n?n.color:""},setColorSingle:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.clickRow=t,e.multipleSelection=[t],e.colorVisible=!0;case 3:case"end":return n.stop()}}),n)})))()},setColor:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o="",t.forEach((function(t,e){o=0===e?t.id:o+","+t.id})),r={sysOrderIds:o,id:e.colorRow.id},n.next=5,e.$api.setColorLabel(r);case 5:a=n.sent,200===a.data.code?(t.forEach((function(t){var n=e.tableList.findIndex((function(e){return e.id==t.id}));n>-1&&(e.tableList[n].color_id=e.colorRow.id)})),e.colorVisible=!1,e.colorRow={},e.$message.success("设置成功")):e.$message.error("设置失败-".concat(a.data.message));case 7:case"end":return n.stop()}}),n)})))()},getColorList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.colorLabelList();case 2:n=e.sent,200===n.data.code&&(t.selectColorList=JSON.parse(JSON.stringify(n.data.data)),t.colorList=n.data.data,o={id:0,name:"取消标识",color:""},t.colorList.unshift(o));case 4:case"end":return e.stop()}}),e)})))()},getCurrentRow:function(t){this.colorRow=t},syncAfterOrder:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,r,a,i,l,c,d,p,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=[],e.showConsole=!1,e.$refs.Logs.consoleMsg="",console.log(t),!t){n.next=8;break}o=[t.mall_info],n.next=17;break;case 8:if(!e.mall_compare){n.next=16;break}return n.next=11,e.$appConfig.getGlobalCacheInfo("allMallInfo","key");case 11:if(r=n.sent,a=r&&JSON.parse(r),a)for(i in a)o.push(a[i]);n.next=17;break;case 16:o=e.searchMallList;case 17:if(0!=o.length){n.next=20;break}return e.$refs.Logs.writeLog("店铺数据为空，同步操作已取消!",!1),n.abrupt("return");case 20:console.log(o),e.$refs.Logs.writeLog("开始同步售后订单，请耐心等待!",!0),l=0;case 23:if(!(l<o.length)){n.next=38;break}c=o[l],d=0;case 26:if(!(d<s["z"].length)){n.next=35;break}return p=s["z"][d],console.log(c,"mall"),h=new u["a"](c,p,e,e.$refs.Logs.writeLog),n.next=32,h.start("".concat(l+1,"/").concat(o.length),"manual",60);case 32:d++,n.next=26;break;case 35:l++,n.next=23;break;case 38:e.$refs.Logs.writeLog("售后订单同步已完成！！！",!0);case 39:case"end":return n.stop()}}),n)})))()},editRemark:function(t){this.activeRemarkID=t,console.log(this.tableList);var e=this.tableList.findIndex((function(e){return e.id===t}));this.orderRemark=this.tableList[e].remark},changeRemark:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.setLocalRemark({id:t.id,remark:e.orderRemark});case 2:if(o=n.sent,console.log("----",o),200!==o.data.code){n.next=9;break}return e.$message.success("设置备注成功"),e.$set(t,"remark",e.orderRemark),e.activeRemarkID="",n.abrupt("return");case 9:e.$message.error("设置备注失败"),e.activeRemarkID="";case 11:case"end":return n.stop()}}),n)})))()},viewDetails:function(t,e,n){var o={type:t,shopId:n,id:e};this.$BaseUtilService.getOrderDetailInfo(n,JSON.stringify(o))},openUrl:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var r,a,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(r=t,"product"!==e){o.next=8;break}return a={platform_mall_id:t.mall_info.platform_mall_id},o.next=5,n.$shopeemanService.getWebUrl(t.country,a);case 5:i=o.sent,console.log(i,"webUrl",t.country),r=i+"/product/"+t.mall_info.platform_mall_id+"/"+t.goods_info.goods_id;case 8:n.$BaseUtilService.openUrl(r);case 9:case"end":return o.stop()}}),o)})))()},open:function(t,e,n,o){if("orderID"===o){var r={type:t,shopId:n,id:e};this.$BaseUtilService.getOrderDetailInfo(n,JSON.stringify(r))}"goodsID"===o&&window.BaseUtilBridgeService.openUrl("https://id.xiapibuy.com/product/"+n+"/"+e),"orderGoodsID"===o&&window.BaseUtilBridgeService.openUrl("http://mobile.yangkeduo.com/goods.html?goods_id="+e)},getBuyerList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getBuyerList();case 2:n=e.sent,200===n.data.code&&(t.buyerAccountList=n.data.data),console.log("getBuyerList",t.buyerAccountList);case 5:case"end":return e.stop()}}),e)})))()},getorderDetail:function(t){if(console.log("row",t),t.shot_order_info.buy_account_info){var e=null;this.buyerAccountList.forEach((function(n){n.name===t.shot_order_info.buy_account_info.name&&n.type===t.shot_order_info.buy_account_info.name&&(e=n)}));var n=this.changeAccountParams(e);this.changeType(n),this.changeAccountParams(n)}else this.$message.warning("云端没有此账户信息，请让拍单人员上传或登录")},changeType:function(t){switch(t){case 1:return 1;case 2:return 0;case 8:return 5;case 10:return 3;case 9:return 7;case 11:return 8;default:return t}},changeAccountParams:function(t){var e={UserNameCache:t.cache_path,Password:"",shotOrderPlatform:this.changeType(t.type),LoginedCookies:t.login_info,UserName:t.name,Cookiestr:JSON.stringify(t.login_info),AccountType:t.type,Ua:t.ua,Country:t.site||""};return e},getExportData:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,i,s,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="",t.searchMallList.forEach((function(t,e){n=0===e?t.id:n+","+t.id})),t.query.createdTime=t.cloumn_date1&&t.cloumn_date1.length>0?t.cloumn_date1.join("/").toString():"",t.query.afterApplyTime=t.cloumn_date2&&t.cloumn_date2.length>0?t.cloumn_date2.join("/").toString():"",o=t.query,o.sysMallIds=n,o[t.selType]=t.inputDes,o["shotOrderStatus"]=t.query.shotOrderStatus.join(","),o["refundStatus"]=t.query.refundStatus.join(","),o.page=1,o.pageSize=200,t.loading=!0,e.next=14,t.$api.aftermarket(o);case 14:r=e.sent,a=r.data,i=[],s=a&&200===a.code&&a.data.data&&a.data.data||[];case 18:if(!s||!s.length){e.next=28;break}return i=i.concat(s),o.page++,e.next=23,t.$api.aftermarket(o);case 23:l=e.sent,c=l.data,s=c&&200===c.code&&c.data.data&&c.data.data||[],e.next=18;break;case 28:t.loading=!1,t.tableToExcel(i);case 30:case"end":return e.stop()}}),e)})))()},tableToExcel:function(t){var e=this;if(t.length){var n=1,o="<tr>\n            <td>编号</td>\n            <td>站点</td>\n            <td>店铺名称</td>\n            <td>颜色标识</td>\n            <td>订单编号</td>\n            <td>退款金额</td>\n            <td>采购价</td>\n            <td>采购价(RMB)</td>\n            <td>售后状态</td>\n            <td>申请时间</td>\n            <td>售后原因</td>\n            <td>本地备注</td>\n            <td>采购状态</td>\n            <td>商品ID</td>\n            <td>商品数量</td>\n            <td>商品图片</td>\n            <td>商品类目</td>\n            <td>商品规格</td>\n            <td>采购商品ID</td>\n            <td>采购订单号</td>\n            <td>采购时间</td>\n            <td>采购物流单号</td>\n            <td>采购账号</td>\n            <td>订单创建时间</td>\n            <td>退货物流号</td>\n            <td>退货地址</td>\n            <td>退货邮寄地址</td>\n            </tr>",r=t;r.forEach((function(t){var r,a;o+="<tr><td>".concat(n++,"</td>\n                <td>").concat(t.mall_info&&t.mall_info.country?e.$filters.chineseSite(t.mall_info.country):"\t","</td>\n                <td>").concat(t.mall_info&&t.mall_info.platform_mall_name?t.mall_info.platform_mall_name:"\t","</td>\n                <td>").concat(t.color_id?e.changeColorLabel(t.color_id,"name"):"-\t","</td>\n                <td style=\"mso-number-format:'@';\">").concat(t.order_sn?t.order_sn:"\t","</td>\n                <td>").concat(t.refund_amount?t.refund_amount:"\t","</td>\n                <td>").concat(((null===(r=t.shot_order_info)||void 0===r?void 0:r.shot_amount)||"")+e.$filters.siteCoin(t.country)+"\t","</td>\n                <td>").concat(((null===(a=t.shot_order_info)||void 0===a?void 0:a.shot_amount_rmb)||"")+"\t","</td>\n                <td>").concat(t.status?Object(s["d"])(t.status):"\t","</td>\n                <td>").concat(t.update_time?t.update_time:"\t","</td>\n                <td>").concat(t.after_reason?t.after_reason:"\t","</td>\n                <td>").concat(t.remark?t.remark:"\t","</td>\n                <td>").concat(t.shot_order_info&&t.shot_order_info.shot_statu?Object(s["g"])(t.shot_order_info.shot_status):"\t","</td>\n                <td>").concat(t.goods_info.goods_id?t.goods_info.goods_id:"\t","</td>\n                <td>").concat(t.goods_info.goods_count?t.goods_info.goods_count:"\t","</td>\n                <td>").concat(e.$filters.imageRender([t.image])+"\t","</td>\n                <td>").concat(t.goods_info.goods_category_id?e.getCategoryName(t.goods_info.goods_category_id,t.country):"\t","</td>\n                <td>").concat(t.goods_info.goods_spec?t.goods_info.goods_spec:"\t","</td>\n                <td>").concat(t.shot_order_info.shot_order_sn?t.shot_order_info.shot_order_sn:"\t","</td>\n                <td>").concat(t.shot_order_info.shotted_at?t.shot_order_info.shotted_at:"\t","</td>\n                <td>").concat(t.shot_order_info.shot_tracking_number?t.shot_order_info.shot_tracking_number:"\t","</td>\n                 <td>").concat(t.shot_order_info.buy_account?t.shot_order_info.buy_account:"\t","</td>\n              <td>").concat(t.after_created_at?t.after_created_at:"\t","</td>\n               <td>").concat(t.return_tracking_number?t.return_tracking_number:"\t","</td>\n               <td>").concat(t.return_address?t.return_address:"\t","</td>\n               <td>").concat(t.return_pickup_address?t.return_pickup_address:"\t","</td>\n                </tr>")})),Object(c["k"])("虾皮售后数据",o)}else this.$message.warning("没有可导出的数据！")},generateUUID:function(){var t=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(t+=performance.now());var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}));return e},handleSelectionChange:function(t){this.multipleSelection=t,console.log("multipleSelection",this.multipleSelection)},indexMethod:function(t){return t=t+1+(this.page-1)*this.pageSize,t},setShotStatusFun:function(){this.multipleSelection.length?this.shotVisible=!0:this.$message.warning("请勾选需要操作的数据")},setShotStatus:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.length){n.next=2;break}return n.abrupt("return",e.$message.warning("请选择数据"));case 2:if(""!==e.shotstatus){n.next=4;break}return n.abrupt("return",e.$message.warning("请选择变更状态"));case 4:return e.isLoading=!0,o=[],r={sysOrderIds:"",status:e.shotstatus},t.forEach((function(t){o.push(t.sys_order_id)})),r.sysOrderIds=o.toString()||"",n.prev=9,n.next=12,e.$api.updateShotStatus(r);case 12:a=n.sent,i=a.data,200===i.code?(e.$message.success("操作成功"),t.forEach((function(t){var n=e.tableList.findIndex((function(e){return e.id==t.id}));n>-1&&(e.tableList[n].shot_order_info.shot_status=e.shotstatus)}))):e.$message.error("操作失败"),e.shotVisible=!1,e.isLoading=!1,n.next=24;break;case 19:n.prev=19,n.t0=n["catch"](9),e.shotVisible=!1,console.log(n.t0),e.isLoading=!1;case 24:case"end":return n.stop()}}),n,null,[[9,19]])})))()},setColorLabelFun:function(){this.multipleSelection.length?this.colorVisible=!0:this.$message.warning("请勾选需要操作的数据")},changeMallList:function(t){this.searchMallList=t},getCategoryInfo:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var r,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n.$commodityService.getCategoryTbInfo(e,t.toString(),"0","");case 2:r=o.sent,a=r&&JSON.parse(r),a&&200===a.code&&a.data.categories&&a.data.categories.length?n.categoryInfo[t]=a.data.categories[0].category_cn_name||"":n.categoryInfo[t]="类目获取失败";case 5:case"end":return o.stop()}}),o)})))()},search:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={},r=[],e.page=t||e.page,e.searchMallList.forEach((function(t){r.push(t.id)})),e.query.createdTime=e.cloumn_date1&&e.cloumn_date1.length>0?e.cloumn_date1.join("/").toString():"",e.query.afterApplyTime=e.cloumn_date2&&e.cloumn_date2.length>0?e.cloumn_date2.join("/").toString():"",console.log(e.query,"query"),o=JSON.parse(JSON.stringify(e.query)),o.sysMallIds=r.toString(),o[e.selType]=e.inputDes,o["refundStatus"]=e.query.refundStatus.join(","),o["shotOrderStatus"]=e.query.shotOrderStatus.join(","),o.page=e.page,o.pageSize=e.pageSize,e.loading=!0,e.tableList=[],n.prev=16,n.next=19,e.$api.aftermarket(o);case 19:a=n.sent,e.loading=!1,200===a.status?(i=a.data.data.data||[],e.tableList=i,e.total=a.data.data.total):e.$message.error("数据请求失败"),n.next=28;break;case 24:n.prev=24,n.t0=n["catch"](16),console.log("初始化",n.t0),e.loading=!1;case 28:console.log(e.tableList);case 29:case"end":return n.stop()}}),n,null,[[16,24]])})))()},getCate:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.tableList.forEach(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},changeOrderStatus:s["d"],changeShotStatus:s["g"],handleSizeChange:function(t){this.page=1,this.pageSize=t,this.search()},handleCurrentChange:function(t){this.page=t,this.search()},copy:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var n=document.createRange();n.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(n),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(o){}e.parentElement.removeChild(e)}}},h=p,f=(n("ec42"),n("2877")),m=Object(f["a"])(h,o,r,!1,null,null,null);e["default"]=m.exports},"4c28":function(t,e,n){},8992:function(t,e,n){"use strict";n("4c28")},b34e:function(t,e,n){},e578:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var o=n("1da1");n("96cf"),n("a9e3");function r(t,e){return a.apply(this,arguments)}function a(){return a=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=[{id:Number(n.goods_info.goods_id),unlisted:!0}],r={shop_id:n.mall_info.platform_mall_id},t.next=4,e.$shopeemanService.handleGoodsDelist(n.country,r,o);case 4:a=t.sent,200===a.code?e.$message.success("商品下架成功！"):e.$message.error("".concat(a.data)),console.log(a,"res");case 7:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}function i(t,e){return s.apply(this,arguments)}function s(){return s=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={product_id_list:[Number(n.goods_info.goods_id)],shop_id:n.mall_info.platform_mall_id},t.next=3,e.$shopeemanService.handleGoodsDelete(n.country,o);case 3:r=t.sent,200===r.code?e.$message.success("商品删除成功！"):e.$message.error("".concat(r.data));case 5:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}},ec42:function(t,e,n){"use strict";n("b34e")},feb6:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{staticClass:"storeChooseUL"},[t.isMall?n("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):n("li",{style:t.isReset&&"margin-bottom: 5px"},[n("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),n("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:t.isBanPerform},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?n("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),n("li",{style:t.isReset&&"margin-bottom: 5px"},[n("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),n("el-select",{staticClass:"selectBox",style:{width:t.inputWidth},attrs:{disabled:t.isBanPerform,multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[n("el-option",{attrs:{label:"全部",value:""},nativeOn:{click:function(e){return t.changeGroupSelect(t.groupId,!0)}}}),t._l(t.groupIdList,(function(e,o){return n("el-option",{key:o,attrs:{label:e.group_name,value:e.id},nativeOn:{click:function(e){return t.changeGroupSelect(t.groupId)}}})}))],2)],1),n("li",{directives:[{name:"show",rawName:"v-show",value:t.showGrade<2,expression:"showGrade < 2"}],style:t.isReset&&"margin-bottom: 5px"},[n("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),n("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",style:{width:t.inputWidth},attrs:{disabled:t.isBanPerform,placeholder:"",multiple:!t.isAShop,"collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:"",clearable:""},on:{"visible-change":function(e){return t.filterMall("")}},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[t.isAShop?t._e():n("el-option",{attrs:{label:"全部",value:""},nativeOn:{click:function(e){return t.changeSiteSelect(t.site,!0)}}}),t._l(t.siteShowList,(function(e,o){return t.showMall(e,o)?n("el-option",{key:o,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id},nativeOn:{click:function(e){return t.changeSiteSelect(t.site)}}}):t._e()}))],2)],1),t.isReset?n("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[n("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:t.reset}},[t._v(" 　刷　　新　 ")])],1):t._e()])])},r=[],a=n("1da1"),i=n("b85c"),s=n("2909"),l=(n("96cf"),n("a9e3"),n("caad"),n("2532"),n("99af"),n("d81d"),n("fb6a"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("4de4"),n("25f0"),n("7db0"),n("7646")),c=n("2b0e");c["default"].directive("loadmore",{bind:function(t,e){var n=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");n.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},inputWidth:{type:String,default:"180px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}},showGrade:{type:Number,default:function(){return 0}}},data:function(){return{countryVal:null,groupId:[],groupIdList:[],allSiteList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,filterMallTime:null}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t){this.isShowName="",this.groupId=[],this.groupIdList=[],this.getMallGoodsGetMallList(1)},deep:!0}},mounted:function(){this.countryVal=!this.isAll&&this.parentCountry||""},methods:{reset:function(){this.groupId=[],this.groupIdList=[],this.getMallGoodsGetMallList(1)},changeGroupSelect:function(t,e){console.log("changeGroupSelect"),e?t.includes("")?this.groupId=[""].concat(Object(s["a"])(this.groupIdList.map((function(t){return t.id})))):this.groupId=[]:t.includes("")||t.length!==this.groupIdList.length?t.includes("")&&t.length===this.groupIdList.length&&(this.groupId=t.slice(1)):this.groupId.unshift(""),this.getMallGoodsGetMallList(2)},changeSiteSelect:function(t,e){console.log("changeSiteSelect");var n=this.isShowName;if(!this.isAShop)if(e)if(t.includes("")){var o=n&&Object(s["a"])(this.siteShowList.map((function(t){return t.platform_mall_id})))||[""].concat(Object(s["a"])(this.siteList.map((function(t){return t.platform_mall_id})))),r=new Set([].concat(Object(s["a"])(o),Object(s["a"])(t)));this.site=Object(s["a"])(r),this.isShowNameAll=!0,n&&this.siteList.length===this.site.length&&this.site.unshift("")}else{var a=[];if(n){var l=n&&Object(s["a"])(this.siteShowList.map((function(t){return t.platform_mall_id}))),c=l.length>this.site.length&&this.site||l,u=l.length>this.site.length&&l||this.site;a=new Set(this.site);var d,p=Object(i["a"])(u);try{for(p.s();!(d=p.n()).done;){var h=d.value;c.includes(h)&&a.delete(h)}}catch(f){p.e(f)}finally{p.f()}a.delete("")}this.site=Object(s["a"])(a)}else!t.includes("")&&this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):t.includes("")&&(this.site=t.slice(1));this.changeMallList(),this.filterMall(n)},getMallGoodsGetMallList:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o,r,a,i,l,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("getMallGoodsGetMallList - val",t),1!==t){n.next=10;break}return o=e.countryVal,n.next=5,e.mallListAPIInstance.ddMallGoodsGetMallList();case 5:r=n.sent,200===r.code?(a=r.data||[],e.allSiteList=a,e.siteList=""===o?a:a.filter((function(t){return t.country===o}))):e.$message.error("获取分组、店铺列表失败"),0===e.groupIdList.length&&(i=new Set(e.siteList.map((function(t){if(t.group_id)return JSON.stringify({group_name:t.group_name,id:t.group_id})}))),i.delete(void 0),l=Object(s["a"])(i),c=l.map((function(t){return JSON.parse(t)})),c.zzSort("id"),e.groupIdList=Object(s["a"])(c),e.groupId=[""].concat(Object(s["a"])(c.map((function(t){return t.id}))))),n.next=11;break;case 10:""===e.groupId[0]?e.siteList=e.allSiteList:e.siteList=e.allSiteList.filter((function(t){if(e.groupId.includes(t.group_id))return t}));case 11:e.changeSiteSelect([""],!0);case 12:case"end":return n.stop()}}),n)})))()},changeMallList:function(){var t=this;console.log("changeMallList");var e=(new Date).getTime(),n=[],o="",r=this.site;if(this.isAShop){var a=this.siteList.find((function(e){return e.platform_mall_id===t.site}));o=this.site,n.push(a)}else r.length&&""===r[0]&&(r=r.slice(1)),o=r.toString(),n=this.siteList.filter((function(t){return r.includes(t.platform_mall_id)})),console.log(new Date-e);!this.countryVal&&this.groupId.indexOf("")>-1&&(o=n.length!==this.siteList.length&&o||""),this.source?this.$emit("changeMallList",{mallList:n,groupIdList:this.groupId,source:this.source,searchAll:o,country:this.countryVal.toLocaleUpperCase()}):(n["country"]=this.countryVal,this.$emit("changeMallList",n))},filterMall:function(t,e){var n=this,o=t&&this.isShowName!==t?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){n.isShowName!==t&&(n.mallShowIndex=0),n.isShowName=t||"";var e=[];e=t?n.siteList.filter((function(e){var n=e.mall_alias_name||e.platform_mall_name;return n.includes(t)})):n.siteList,n.siteShowList=e}),o)},showMall:function(t,e){console.log("showMall");var n=t.mall_alias_name||t.platform_mall_name,o=this.site[0]===t.platform_mall_id;return o||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||n.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteList.length>this.showMallNumber){var n=0;if(t){var o=this.siteList.length-this.showMallNumber;n=this.mallShowIndex+10,n=n<o&&n||o}else n=this.mallShowIndex-10,n=n>0&&n||0;n!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30,this.mallShowIndex=n)}}}},d=u,p=(n("8992"),n("2877")),h=Object(p["a"])(d,o,r,!1,null,null,null);e["a"]=h.exports}}]);