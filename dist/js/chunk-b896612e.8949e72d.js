(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b896612e"],{c2d0:function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-row",{staticClass:"contaniner"},[t("el-row",{staticClass:"header"},[t("ul",{staticStyle:{"margin-bottom":"10px"}},[t("li",[t("span",[a._v("站点：")]),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:a.site,callback:function(e){a.site=e},expression:"site"}},a._l(a.siteList,(function(a,e){return t("el-option",{key:e,attrs:{value:a.value,label:a.label}})})),1)],1),t("li",[t("span",[a._v("店铺分组：")]),t("el-select",{attrs:{placeholder:"请选择分组",multiple:"","collapse-tags":"",clearable:"",size:"medium",filterable:""},model:{value:a.group,callback:function(e){a.group=e},expression:"group"}},[a.selectall?t("el-option",{attrs:{label:"全部",value:0}}):a._e(),a.selectall?a._e():t("el-option",{attrs:{label:"全部",value:-2}}),a._l(a.gruopList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})}))],2)],1),t("li",[t("span",[a._v("店铺：")]),t("el-select",{attrs:{placeholder:"请选择店铺",multiple:"","collapse-tags":"",clearable:"",size:"medium",filterable:""},model:{value:a.mall,callback:function(e){a.mall=e},expression:"mall"}},[a.selectall1?t("el-option",{attrs:{label:"全部",value:0}}):a._e(),a.selectall1?a._e():t("el-option",{attrs:{label:"全部",value:-2}}),a._l(a.mallList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})}))],2)],1),t("li",[t("span",[a._v("统计时间：")]),t("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:a.Statisticaltime,callback:function(e){a.Statisticaltime=e},expression:"Statisticaltime"}},a._l(a.returnStatisticaltime,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})})),1)],1),t("li",[t("span",[a._v("订单类型：")]),t("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:a.Status,callback:function(e){a.Status=e},expression:"Status"}},a._l(a.returnStatusList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})})),1)],1),t("li",[t("el-button",{attrs:{type:"primary",disabled:a.Loading1,size:"mini"},on:{click:a.getallinfo}},[a._v("搜索")])],1)]),t("br"),t("div",{staticStyle:{border:"1px solid black",width:"100%"}},[t("span",{staticStyle:{"margin-left":"20px"}},[a._v("客服数据")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.Loading3,expression:"Loading3"}],ref:"plTable",staticStyle:{"margin-top":"10px"},attrs:{"header-align":"center",height:"calc(100vh - 140px)",data:a.tableData1,"header-cell-style":{backgroundColor:"#f5f7fa"}}},[t("el-table-column",{attrs:{align:"center",label:"店铺名称",width:"280",prop:"mallname",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"buyers",label:"买家总数",width:"280",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.row;return[t("div",{domProps:{innerHTML:a._s(r.buyers)}})]}}])}),t("el-table-column",{attrs:{align:"center",prop:"new_buyers",label:"新买家数量",width:"280",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.row;return[t("div",{domProps:{innerHTML:a._s(r.new_buyers)}})]}}])}),t("el-table-column",{attrs:{prop:"existing_buyers",label:"现有买家",width:"280",align:"center",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.row;return[t("div",{domProps:{innerHTML:a._s(r.existing_buyers)}})]}}])}),t("el-table-column",{attrs:{prop:"potential_buyers",label:"潜在买家",width:"280",align:"center",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.row;return[t("div",{domProps:{innerHTML:a._s(r.potential_buyers)}})]}}])}),t("el-table-column",{attrs:{prop:"repeat_purchase_rate",label:"重复购买率",width:"280",align:"center",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.row;return[t("div",{domProps:{innerHTML:a._s(r.repeat_purchase_rate)}})]}}])})],1)],1)])],1)},l=[],s=t("1da1"),n=(t("96cf"),t("99af"),t("159b"),t("a434"),t("b680"),{data:function(){return{Loading1:!1,Loading3:!1,selectall:!0,selectall1:!0,allgroupid:[],allmallid:[],tableData1:[],errmall:[],Status:"palced",total:0,Statisticaltime:"real_time",site:"TH",siteList:this.$filters.countries_option,group:0,gruopList:[],mall:[],mallList:[],start_time:1634659200,end_time:1634695200,returnStatisticaltime:[{value:"real_time",label:"实时"},{value:"yesterday",label:"昨日"},{value:"past7days",label:"近7天"},{value:"past30days",label:"近30天"}],returnStatusList:[{value:"palced",label:"下单"},{value:"confirmed",label:"确认订单"},{value:"paid",label:"付费订单"}]}},watch:{group:function(a,e){this.mall=[];for(var t=0;t<a.length;t++)if(0===a[t])this.group=this.allgroupid,this.mall=[].concat(this.allmallid),this.selectall=!1;else if(-2===a[t])this.group=[],this.mall=[],this.selectall=!0;else for(var r=0;r<this.mallList.length;r++)a[t]===this.mallList[r].group_id&&this.mall.push(this.mallList[r].value)},mall:function(a,e){for(var t=0;t<a.length;t++)0===a[t]&&(this.mall=this.allmallid,this.selectall1=!1),-2===a[t]&&(this.mall=[],this.selectall1=!0)},Statisticaltime:function(a,e){"real_time"===a?(this.start_time=1634659200,this.end_time=1634695200):"yesterday"===a||"past7days"===a?(this.start_time=1634054400,this.end_time=1634659200):"past30days"===a&&(this.start_time=1632067200,this.end_time=1634659200)},site:function(a,e){this.mall=[],this.group=[],this.getInfo()}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,l,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={country:a.site,mallGroupIds:a.group},e.next=3,a.$api.ddMallGoodsGetMallList(t);case 3:if(r=e.sent,a.mallList=[],a.gruopList=[],a.allgroupid=[],a.allmallid=[],200===r.data.code){for(r.data.data.forEach((function(e){e.group_id&&a.gruopList.push({label:e.group_name,value:e.group_id}),e.id&&a.mallList.push({label:e.mall_alias_name?e.mall_alias_name:e.platform_mall_name,value:e.platform_mall_id,group_id:e.group_id})})),l=0;l<a.gruopList.length-1;l++)for(s=l+1;s<a.gruopList.length;s++)a.gruopList[l].value===a.gruopList[s].value&&a.gruopList.splice(s,1);for(n=0;n<a.gruopList.length;n++)a.allgroupid.push(a.gruopList[n].value);for(i=0;i<a.mallList.length;i++)a.allmallid.push(a.mallList[i].value)}else a.$message.warning("店铺列表获取失败！");case 9:case"end":return e.stop()}}),e)})))()},getallinfo:function(){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,l,s,n,i,c,o,u,d,p,_,b,h,g,m,y,f,v,x,w,L,S,M,k,F,T,z,H;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.Loading1=!0,a.Loading3=!0,a.tableData1=[],a.errmall=[],t=0;case 5:if(!(t<a.mall.length)){e.next=18;break}for(r={start_time:a.start_time,end_time:a.end_time,period:a.Statisticaltime,orderType:a.Status,mallId:a.mall[t],fetag:"fetag",limit:5},l=void 0,s=0;s<a.mallList.length;s++)a.mallList[s].value===a.mall[t]&&(l=a.mallList[s].label);return e.next=11,a.$shopeemanService.getCustomers(a.site,r,{headers:{"Content-Type":"application/json; charset=utf-8"}});case 11:if(n=e.sent,n=JSON.parse(n),n.data=JSON.parse(n.data),200===n.status){if("real_time"===a.Statisticaltime)for(i in n.data)"buyers"===i&&(c="",n.data["buyers_change"]>0?c="↑":n.data["buyers_change"]<0&&(c="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data["buyers_change"]).toFixed(2),"% ").concat(c,"</pre>")),"new_buyers"===i&&(o="",n.data["new_buyers_rate"]>0?o="↑":n.data["new_buyers_rate"]<0&&(o="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data["new_buyers_rate"]).toFixed(2),"% ").concat(o,"</pre>")),"existing_buyers"===i&&(u="",n.data["existing_buyers_rate"]>0?u="↑":n.data["existing_buyers_rate"]<0&&(u="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data["existing_buyers_rate"]).toFixed(2),"% ").concat(u,"</pre>")),"potential_buyers"===i&&(d="",n.data["potential_buyers_change"]>0?d="↑":n.data["potential_buyers_change"]<0&&(d="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data["potential_buyers_change"]).toFixed(2),"% ").concat(d,"</pre>")),"repeat_purchase_rate"===i&&(p="",n.data["repeat_purchase_rate_change"]>0?p="↑":n.data["repeat_purchase_rate_change"]<0&&(p="↓"),n.data[i]="<pre>".concat((100*n.data[i]).toFixed(2),"%\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data["repeat_purchase_rate_change"]).toFixed(2),"% ").concat(p,"</pre>"));if("yesterday"===a.Statisticaltime)for(_ in n.data)"buyers"===_&&(b="",n.data["buyers_change"]>0?b="↑":n.data["buyers_change"]<0&&(b="↓"),n.data[_]="<pre>".concat(n.data[_],"\nvs 前一天 ").concat(Math.abs(100*n.data["buyers_change"]).toFixed(2),"% ").concat(b,"</pre>")),"new_buyers"===_&&(h="",n.data["new_buyers_rate"]>0?h="↑":n.data["new_buyers_rate"]<0&&(h="↓"),n.data[_]="<pre>".concat(n.data[_],"\nvs 前一天 ").concat(Math.abs(100*n.data["new_buyers_rate"]).toFixed(2),"% ").concat(h,"</pre>")),"existing_buyers"===_&&(g="",n.data["existing_buyers_rate"]>0?g="↑":n.data["existing_buyers_rate"]<0&&(g="↓"),n.data[_]="<pre>".concat(n.data[_],"\nvs 前一天 ").concat(Math.abs(100*n.data["existing_buyers_rate"]).toFixed(2),"% ").concat(g,"</pre>")),"potential_buyers"===_&&(m="",n.data["potential_buyers_change"]>0?m="↑":n.data["potential_buyers_change"]<0&&(m="↓"),n.data[_]="<pre>".concat(n.data[_],"\nvs 前一天 ").concat(Math.abs(100*n.data["potential_buyers_change"]).toFixed(2),"% ").concat(m,"</pre>")),"repeat_purchase_rate"===_&&(y="",n.data["repeat_purchase_rate_change"]>0?y="↑":n.data["repeat_purchase_rate_change"]<0&&(y="↓"),n.data[_]="<pre>".concat((100*n.data[_]).toFixed(2),"%\nvs 前一天 ").concat(Math.abs(100*n.data["repeat_purchase_rate_change"]).toFixed(2),"% ").concat(y,"</pre>"));if("past7days"===a.Statisticaltime)for(f in n.data)"buyers"===f&&(v="",n.data["buyers_change"]>0?v="↑":n.data["buyers_change"]<0&&(v="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前7天 ").concat(Math.abs(100*n.data["buyers_change"]).toFixed(2),"% ").concat(v,"</pre>")),"new_buyers"===f&&(x="",n.data["new_buyers_rate"]>0?x="↑":n.data["new_buyers_rate"]<0&&(x="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前7天 ").concat(Math.abs(100*n.data["new_buyers_rate"]).toFixed(2),"% ").concat(x,"</pre>")),"existing_buyers"===f&&(w="",n.data["existing_buyers_rate"]>0?w="↑":n.data["existing_buyers_rate"]<0&&(w="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前7天 ").concat(Math.abs(100*n.data["existing_buyers_rate"]).toFixed(2),"% ").concat(w,"</pre>")),"potential_buyers"===f&&(L="",n.data["potential_buyers_change"]>0?L="↑":n.data["potential_buyers_change"]<0&&(L="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前7天 ").concat(Math.abs(100*n.data["potential_buyers_change"]).toFixed(2),"% ").concat(L,"</pre>")),"repeat_purchase_rate"===f&&(S="",n.data["repeat_purchase_rate_change"]>0?S="↑":n.data["repeat_purchase_rate_change"]<0&&(S="↓"),n.data[f]="<pre>".concat((100*n.data[f]).toFixed(2),"%\nvs 前7天 ").concat(Math.abs(100*n.data["repeat_purchase_rate_change"]).toFixed(2),"% ").concat(S,"</pre>"));if("past30days"===a.Statisticaltime)for(M in n.data)"buyers"===M&&(k="",n.data["buyers_change"]>0?k="↑":n.data["buyers_change"]<0&&(k="↓"),n.data[M]="<pre>".concat(n.data[M],"\nvs 前30天 ").concat(Math.abs(100*n.data["buyers_change"]).toFixed(2),"% ").concat(k,"</pre>")),"new_buyers"===M&&(F="",n.data["new_buyers_rate"]>0?F="↑":n.data["new_buyers_rate"]<0&&(F="↓"),n.data[M]="<pre>".concat(n.data[M],"\nvs 前30天 ").concat(Math.abs(100*n.data["new_buyers_rate"]).toFixed(2),"% ").concat(F,"</pre>")),"existing_buyers"===M&&(T="",n.data["existing_buyers_rate"]>0?T="↑":n.data["existing_buyers_rate"]<0&&(T="↓"),n.data[M]="<pre>".concat(n.data[M],"\nvs 前30天 ").concat(Math.abs(100*n.data["existing_buyers_rate"]).toFixed(2),"% ").concat(T,"<pre>")),"potential_buyers"===M&&(z="",n.data["potential_buyers_change"]>0?z="↑":n.data["potential_buyers_change"]<0&&(z="↓"),n.data[M]="<pre>".concat(n.data[M],"\nvs 前30天 ").concat(Math.abs(100*n.data["potential_buyers_change"]).toFixed(2),"% ").concat(z,"</pre>")),"repeat_purchase_rate"===M&&(H="",n.data["repeat_purchase_rate_change"]>0?H="↑":n.data["repeat_purchase_rate_change"]<0&&(H="↓"),n.data[M]="<pre>".concat((100*n.data[M]).toFixed(2),"%\nvs 前30天 ").concat(Math.abs(100*n.data["repeat_purchase_rate_change"]).toFixed(2),"% ").concat(H,"</pre>"));n.data["mallname"]=l,a.tableData1.push(n.data)}else 2===n.data.errcode&&a.errmall.push(l);case 15:t++,e.next=5;break;case 18:a.errmall.length>0&&a.$message.error("店铺【".concat(a.errmall,"】未登录")),a.Loading1=!1,a.Loading3=!1;case 21:case"end":return e.stop()}}),e)})))()}}}),i=n,c=(t("d71a"),t("2877")),o=Object(c["a"])(i,r,l,!1,null,"7c0b863a",null);e["default"]=o.exports},c908:function(a,e,t){},d71a:function(a,e,t){"use strict";t("c908")}}]);