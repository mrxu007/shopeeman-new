(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-73c871ad"],{"194c":function(t,a,e){},"288c":function(t,a,e){"use strict";e("c237")},"4dc0":function(t,a,e){"use strict";var n=e("1da1"),r=(e("96cf"),{props:{getData:{type:Function,default:null}},data:function(){return{shopGruopData:[]}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getBindMallCount();case 2:case"end":return a.stop()}}),a)})))()},methods:{tableRowClassName:function(t){if(t.row,0===t.rowIndex)return"default-current-row"},rowClick:function(t){this.$emit("getGroupId",t.id),0!==t.id&&(document.querySelector(".default-current-row").style.color="#60627d",document.querySelector(".default-current-row").style.backgroundColor="#fff"),this.getData()},getBindMallCount:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.getBindMallCount();case 2:e=a.sent,200===(e=e.data).code?(t.shopGruopData=e.data,t.shopGruopData.unshift({id:0,group_name:"全部分组"}),t.shopGruopData.push({id:-1,group_name:"无分组"})):t.$message.error("店铺分组数据错误".concat(e.message));case 5:case"end":return a.stop()}}),a)})))()}}});e("288c"),e=e("2877"),r=Object(e.a)(r,(function(){var t=this,a=t.$createElement;a=t._self._c||a;return a("div",{staticClass:"container"},[a("el-table",{ref:"shopGroupTable",attrs:{"highlight-current-row":"",width:"100",height:"815","data-changes-scroll-top":!1,"row-height":40,border:!1,data:t.shopGruopData,"row-class-name":t.tableRowClassName},on:{"row-click":t.rowClick}},[a("el-table-column",{attrs:{align:"center",prop:"group_name",label:"店铺分组"}})],1)],1)}),[],!1,null,"f50a6a0e",null);a.a=r.exports},"8d12":function(t,a,e){"use strict";e("194c")},c237:function(t,a,e){},c75b:function(t,a,e){"use strict";e.r(a);var n=e("1da1"),r=(e("159b"),e("99af"),e("96cf"),e("4dc0")),s=e("0e0b"),o=e("d4ec"),l=e("bee2"),u=(e("b680"),e("ac1f"),e("5319"),e("6c27")),c=e("8237"),i=e.n(c),d=function(){function t(a){Object(o.a)(this,t),this._this=a}var a,e,r,c,d,p,m,_,h;return Object(l.a)(t,[{key:"getProductStatisticalData",value:(h=Object(n.a)(regeneratorRuntime.mark((function t(a,e){var n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=a.platform_mall_id,n=a.country,s={mallId:s,version:"3.1.0"},t.next=5,this._this.$shopeemanService.getChinese(n,e,s);case 5:if(r=t.sent,200===(r=JSON.parse(r)).status)return(s=r&&r.data&&JSON.parse(r.data)&&JSON.parse(r.data).data)&&(a.all_product_num=s.product_count_for_limit+s.unlisted_count+s.banned_count,a.active_product_num=s.product_count_for_limit,a.unlisted_product_num=s.unlisted_count,a.banned_product_num=s.banned_count,a.mall_quota=s.count_for_limit,a.soldout_product_num=s.sold_out_count),t.abrupt("return",{code:200,data:s||{}});t.next=11;break;case 11:return t.abrupt("return",{code:r.status,data:r.data});case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t,a){return h.apply(this,arguments)})},{key:"getShopProfile",value:(_=Object(n.a)(regeneratorRuntime.mark((function t(a,e){var n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=a.platform_mall_id,n=a.country,s={mallId:s,version:"3.1.0"},t.next=5,this._this.$shopeemanService.getChinese(n,e,s);case 5:if(r=t.sent,200===(r=JSON.parse(r)).status)return(s=r&&r.data&&JSON.parse(r.data)&&JSON.parse(r.data).data)&&(a.chat_response_rate=s.shop.display_response_rate+"%",a.rating_star=parseFloat(a.rating_star).toFixed(2),a.fans_number=s.shop.follower_count,a.followers_number=s.user.following_count,a.display_response_rate=s.shop.display_response_rate+"%"),t.abrupt("return",{code:200,data:s||{}});t.next=11;break;case 11:return t.abrupt("return",{code:r.status,data:r.data});case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t,a){return _.apply(this,arguments)})},{key:"getShopMetricsvalue",value:(m=Object(n.a)(regeneratorRuntime.mark((function t(a,e){var n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=a.platform_mall_id,n=a.country,s={mallId:s,version:"3.1.0"},t.next=5,this._this.$shopeemanService.getChinese(n,e,s);case 5:if(r=t.sent,200===(r=JSON.parse(r)).status)return(s=r&&r.data&&JSON.parse(r.data)&&JSON.parse(r.data).data)&&(a.order_non_fulfillment_rate=100*s.non_fulfillment_rate+"%"),t.abrupt("return",{code:200,data:s||{}});t.next=11;break;case 11:return t.abrupt("return",{code:r.status,data:r.data});case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t,a){return m.apply(this,arguments)})},{key:"getKeyMetrics",value:(p=Object(n.a)(regeneratorRuntime.mark((function t(a,e,n,r){var s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.platform_mall_id,o=a.country,t.next=4,this._this.$shopeemanService.getChinese(o,e,n);case 4:if(s=t.sent,200===(s=JSON.parse(s)).status)return(o=s&&s.data&&JSON.parse(s.data)&&JSON.parse(s.data).result)&&("today"===r?(a.today_view_product_count=o.shop_pv.value,a.today_view_person_count=o.shop_uv.value):"yesterday"===r?(a.yesterday_view_product_count=o.shop_pv.value,a.yesterday_view_person_count=o.shop_uv.value):"past7days"===r?(a.week_view_product_count=o.shop_pv.value,a.week_view_person_count=o.shop_uv.value):"past30days"===r&&(a.month_view_product_count=o.shop_pv.value,a.month_view_person_count=o.shop_uv.value)),t.abrupt("return",{code:200,data:o||{}});t.next=10;break;case 10:return t.abrupt("return",{code:s.status,data:s.data});case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 16:case"end":return t.stop()}}),t,this,[[0,13]])}))),function(t,a,e,n){return p.apply(this,arguments)})},{key:"getChatDashboard",value:(d=Object(n.a)(regeneratorRuntime.mark((function t(a,e,n,r){var o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.platform_mall_id,l=a.country,t.next=4,this._this.$shopeemanService.getChinese(l,e,n);case 4:if(o=t.sent,200===(o=JSON.parse(o)).status)return(l=o&&o.data&&JSON.parse(o.data)&&JSON.parse(o.data).result)&&("real_time"!==r&&"yesterday"!==r&&"past7days"!==r&&"past30days"!==r||(a.mall_datas||(a.mall_datas={}),a.mall_datas.ChatShopUvData=l.shop_uv.value,a.mall_datas.ChatsEnquiredData=l.chats_enquired.value,a.mall_datas.ChatVisitorsEnquiredData=l.visitors_enquired.value,a.mall_datas.ChatRespondedChatsData=l.responded_chats.value,a.mall_datas.ChatNonRespondedChatsData=l.non_responded_chats.value,a.mall_datas.ChatResponseTimeData=Object(s.j)(l.response_time.value).replace(/-/g,""),a.mall_datas.ChatBuyersData=l.buyers.value,a.mall_datas.ChatOrdersData=l.orders.value,a.mall_datas.ChatUnitsData=l.units.value,a.mall_datas.ChatSalesData=l.sales.value)),t.abrupt("return",{code:200,data:l||{}});t.next=10;break;case 10:return t.abrupt("return",{code:o.status,data:o.data});case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 16:case"end":return t.stop()}}),t,this,[[0,13]])}))),function(t,a,e,n){return d.apply(this,arguments)})},{key:"getBankAccounts",value:(c=Object(n.a)(regeneratorRuntime.mark((function t(a,e){var n,r,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.platform_mall_id,r=a.country,t.next=4,this._this.$appConfig.getGlobalCacheInfo("mallInfo",n);case 4:return s=t.sent,s=JSON.parse(s),s={mallId:n,password_hash:Object(u.sha256)(i()(s.mall_account_info.password)),page_size:30,page_number:1},t.next=9,this._this.$shopeemanService.postChinese(r,e,s,{headers:{"Content-Type":"application/json",charset:"UTF-8"}});case 9:if(o=t.sent,200===(o=JSON.parse(o)).status)return t.abrupt("return",{code:200,data:{}});t.next=13;break;case 13:return t.abrupt("return",{code:o.status,data:o.data});case 16:return t.prev=16,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 19:case"end":return t.stop()}}),t,this,[[0,16]])}))),function(t,a){return c.apply(this,arguments)})},{key:"getIncomeMeta",value:(r=Object(n.a)(regeneratorRuntime.mark((function t(a,e){var n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=a.platform_mall_id,n=a.country,s={mallId:s},t.next=5,this._this.$shopeemanService.getChinese(n,e,s);case 5:if(r=t.sent,200===(r=JSON.parse(r)).status)return(s=r&&r.data&&JSON.parse(r.data)&&JSON.parse(r.data).data)&&(a.frozen_amount=s.frozen,a.lastweek_amount=s.last_week_income,a.lastmonth_amount=s.last_month_income,a.available_amount=s.available),t.abrupt("return",{code:200,data:s||{}});t.next=11;break;case 11:return t.abrupt("return",{code:r.status,data:r.data});case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t,a){return r.apply(this,arguments)})},{key:"getFrozenAmountOrders",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(a,e){var n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=a.platform_mall_id,n=a.country,s={mallId:s,tran_type:2,page_number:1,page_size:10},t.next=5,this._this.$shopeemanService.getChinese(n,e,s);case 5:if(r=t.sent,200===(r=JSON.parse(r)).status)return(s=r&&r.data&&JSON.parse(r.data))&&(a.frozen_amount_orders=s.data.page_info.total),t.abrupt("return",{code:200,data:s||{}});t.next=11;break;case 11:return t.abrupt("return",{code:r.status,data:r.data});case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 17:case"end":return t.stop()}}),t,this,[[0,14]])}))),function(t,a){return e.apply(this,arguments)})},{key:"uploadMallData",value:(a=Object(n.a)(regeneratorRuntime.mark((function t(a){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={allProduct:a.all_product_num,bannedProduct:a.banned_product_num,soldoutProduct:a.soldout_product_num,unlistedProduct:a.unlisted_product_num,activeProduct:a.active_product_num,fansNumber:a.fans_number,followersNumber:a.followers_number,displayResponseRate:a.display_response_rate,ratingStar:a.rating_star,nonFulfillmentRate:a.order_non_fulfillment_rate,todayViewProductCount:a.today_view_product_count,yesterdayViewProductCount:a.yesterday_view_product_count,weekViewProductCount:a.week_view_product_count,monthViewProductCount:a.month_view_product_count,todayViewPersonCount:a.today_view_person_count,yesterdayViewPersonCount:a.yesterday_view_person_count,weekViewPersonCount:a.week_view_person_count,monthViewPersonCount:a.month_view_person_count,mallQuota:a.mall_quota,lastweekAmount:a.lastweek_amount,lastmonthAmount:a.lastmonth_amount,availableAmount:a.available_amount,frozenAmount:a.frozen_amount,frozenAmountOrders:a.frozen_amount_orders,mallDatas:{ChatShopUvData:a.mall_datas.ChatShopUvData,ChatsEnquiredData:a.mall_datas.ChatsEnquiredData,ChatVisitorsEnquiredData:a.mall_datas.ChatVisitorsEnquiredData,ChatRespondedChatsData:a.mall_datas.ChatRespondedChatsData,ChatNonRespondedChatsData:a.mall_datas.ChatNonRespondedChatsData,ChatResponseTimeData:a.mall_datas.ChatResponseTimeData,ChatBuyersData:a.mall_datas.ChatBuyersData,ChatOrdersData:a.mall_datas.ChatOrdersData,ChatUnitsData:a.mall_datas.ChatUnitsData,ChatSalesData:a.mall_datas.ChatSalesData},sysMallId:a.id},t.next=4,this._this.$api.mallStatisticsSave(e);case 4:if(200===(n=t.sent).status)return t.abrupt("return",{code:200,data:n.data.date||""});t.next=7;break;case 7:return t.abrupt("return",{code:n.status,data:n.data});case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",{code:-2,data:"theQuarterPoint-catch: ".concat(t.t0)});case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(t){return a.apply(this,arguments)})}]),t}();r={components:{mallGroup:r.a},data:function(){return{mallDataApiInstance:new d(this),page:1,total:0,pageSize:200,height:630,rowHeight:50,isLoading:!1,percentage:0,isShowProgress:!1,tableData:[],availableAmount:0,monthAmount:0,weekAmount:0,frozenAmount:0,frozenAmountOrders:0,multipleSelection:[],countries:this.$filters.countries_option,form:{groupId:0,agoNoneOrderDays:"0",site:0,shopSelect:"0",shopSelectVal:""},shopSelectList:[{value:"0",label:"店铺名称"},{value:"1",label:"店铺ID"},{value:"2",label:"店铺别名"}],serviceDataTime:"real_time",serviceDataTimeList:[{value:"yesterday",label:"昨天"},{value:"real_time",label:"今天"},{value:"past7days",label:"7天"},{value:"past30days",label:"30天"}],buttonStatus:{asyncData:!1}}},mounted:function(){this.getMallStatistics()},methods:{syncMallData:function(t){var a=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",a.$message("暂无同步数据"));case 2:if(a.buttonStatus.asyncData)return a.$message.error("操作过快, 数据正在同步中"),e.abrupt("return");e.next=5;break;case 5:return a.buttonStatus.asyncData=!0,a.isShowProgress=!0,a.percentage=0,e.next=10,Object(s.d)(t,a.syncMall,3);case 10:e.sent,a.percentage=100,a.buttonStatus.asyncData=!1;case 13:case"end":return e.stop()}}),e)})))()},syncMall:function(t){var a=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var r,s,o,l,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=1<a.length&&void 0!==a[1]?a[1]:{count:1},n.prev=1,e.$set(t,"status","开始同步..."),n.next=5,e.mallDataApiInstance.getProductStatisticalData(t,"/api/v3/product/get_product_statistical_data/");case 5:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.abrupt("return");n.next=10;break;case 10:return n.next=12,e.mallDataApiInstance.getShopProfile(t,"/api/marketing/v4/shop/profile/");case 12:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=18,e.mallDataApiInstance.uploadMallData(t);n.next=19;break;case 18:return n.abrupt("return");case 19:return n.next=21,e.mallDataApiInstance.getShopMetricsvalue(t,"/api/marketing/v4/shop/metrics_value/");case 21:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=27,e.mallDataApiInstance.uploadMallData(t);n.next=28;break;case 27:return n.abrupt("return");case 28:return s=new Date((new Date).toLocaleDateString()).getTime(),o=new Date((new Date).toLocaleDateString()).getTime()+864e5-1,l={mallId:t.platform_mall_id,start_time:Math.round(s/1e3),end_time:Math.round(o/1e3),period:"real_time",fetag:"fetag"},n.next=33,e.mallDataApiInstance.getKeyMetrics(t,"/api/mydata/v3/dashboard/key-metrics/",l,"today");case 33:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=39,e.mallDataApiInstance.uploadMallData(t);n.next=40;break;case 39:return n.abrupt("return");case 40:return l={mallId:t.platform_mall_id,start_time:Math.round((s-86400)/1e3),end_time:Math.round((o-86400)/1e3),period:"yesterday",fetag:"fetag"},n.next=43,e.mallDataApiInstance.getKeyMetrics(t,"/api/mydata/v3/dashboard/key-metrics/",l,"yesterday");case 43:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=49,e.mallDataApiInstance.uploadMallData(t);n.next=50;break;case 49:return n.abrupt("return");case 50:return c={mallId:t.platform_mall_id,start_time:Math.round(o/1e3),end_time:Math.round((o-604800)/1e3),period:"past7days",fetag:"fetag"},n.next=53,e.mallDataApiInstance.getKeyMetrics(t,"/api/mydata/v3/dashboard/key-metrics/",c,"past7days");case 53:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=59,e.mallDataApiInstance.uploadMallData(t);n.next=60;break;case 59:return n.abrupt("return");case 60:return u={mallId:t.platform_mall_id,start_time:Math.round(o/1e3),end_time:Math.round((o-2592e3)/1e3),period:"past30days",fetag:"fetag"},n.next=63,e.mallDataApiInstance.getKeyMetrics(t,"/api/mydata/v3/dashboard/key-metrics/",u,"past30days");case 63:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=69,e.mallDataApiInstance.uploadMallData(t);n.next=70;break;case 69:return n.abrupt("return");case 70:return c=e.getTimeStamp(e.serviceDataTime),u=c.startTime,c=c.endTime,c={mallId:t.platform_mall_id,start_time:u,end_time:c,period:e.serviceDataTime},n.next=74,e.mallDataApiInstance.getChatDashboard(t,"/api/mydata/v2/chat/dashboard/funnel/",c,e.serviceDataTime);case 74:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=80,e.mallDataApiInstance.uploadMallData(t);n.next=81;break;case 80:return n.abrupt("return");case 81:return n.next=83,e.mallDataApiInstance.getBankAccounts(t,"/api/v3/finance/get_bank_accounts/");case 83:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=89,e.mallDataApiInstance.uploadMallData(t);n.next=90;break;case 89:return n.abrupt("return");case 90:return n.next=92,e.mallDataApiInstance.getIncomeMeta(t,"/api/v3/finance/get_income_meta/");case 92:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=98,e.mallDataApiInstance.uploadMallData(t);n.next=99;break;case 98:return n.abrupt("return");case 99:return n.next=101,e.mallDataApiInstance.getFrozenAmountOrders(t,"/api/v3/finance/income_transaction_histories/");case 101:if(403===n.sent.code)return e.$set(t,"status","店铺未登录"),e.$set(t,"color","red"),n.next=107,e.mallDataApiInstance.uploadMallData(t);n.next=108;break;case 107:return n.abrupt("return");case 108:return e.$set(t,"status","同步完成"),e.$set(t,"color","green"),n.next=112,e.mallDataApiInstance.uploadMallData(t);case 112:200===n.sent.code?(e.$set(t,"status","同步成功-上报成功"),e.$set(t,"color","green")):(e.$set(t,"status","同步成功-上报失败"),e.$set(t,"color","red")),n.next=120;break;case 116:n.prev=116,n.t0=n.catch(1),e.$set(t,"status","同步失败"),e.$set(t,"color","red");case 120:return n.prev=120,--r.count,n.finish(120);case 123:case"end":return n.stop()}}),n,null,[[1,116,120,123]])})))()},getMallStatistics:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var e,n,r,s,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.isLoading=!0,t.availableAmount=0,t.monthAmount=0,t.weekAmount=0,t.frozenAmount=0,t.frozenAmountOrders=0,e=t.form.shopSelectVal,e={country:t.form.site,groupId:t.form.groupId,mallName:"0"===t.form.shopSelect?e:"",mallId:"1"===t.form.shopSelect?e:"",mallAliasName:"2"===t.form.shopSelect?e:"",page:t.page,pageSize:t.pageSize},a.next=10,t.$api.getMallStatistics(e);case 10:if(n=a.sent,200!==(n=n.data).code){a.next=43;break}if(o=n.data,t.total=o.total,t.tableData=o.data,!t.tableData){a.next=39;break}r=0;case 18:if(r<t.tableData.length)return s=t.tableData[r],a.next=22,t.$appConfig.getGlobalCacheInfo("mallInfo",s.platform_mall_id);a.next=39;break;case 22:o=a.sent,o=JSON.parse(o),s.mall_datas=JSON.parse(s.mall_datas),s.available_amount=s.available_amount?parseInt(s.available_amount):0,s.lastmonth_amount=s.lastmonth_amount?parseInt(s.lastmonth_amount):0,s.lastweek_amount=s.lastweek_amount?parseInt(s.lastweek_amount):0,s.frozen_amount=s.frozen_amount?parseInt(s.frozen_amount):0,s.frozen_amount_orders=s.frozen_amount_orders||0,t.availableAmount+=s.available_amount,t.monthAmount+=s.lastmonth_amount,t.weekAmount+=s.lastweek_amount,t.frozenAmount+=s.frozen_amount,t.frozenAmountOrders+=s.frozen_amount_orders,s.group_name=o.GroupName;case 36:r++,a.next=18;break;case 39:t.isLoading=!1,t.$refs.plTable.reloadData(t.tableData),a.next=45;break;case 43:t.$message.error("".concat(n.message)),t.isLoading=!1;case 45:case"end":return a.stop()}}),a)})))()},handlerSelectTableOperating:function(t){this.multipleSelection.length?this[t](this.multipleSelection):this[t](this.tableData)},getTimeStamp:function(t){var a=new Date((new Date).toLocaleDateString()).getTime(),e=new Date((new Date).toLocaleDateString()).getTime()+864e5-1;switch(t){case"yesterday":return{startTime:Math.round((a-86400)/1e3),endTime:Math.round((e-86400)/1e3)};case"real_time":return{startTime:Math.round(a/1e3),endTime:Math.round(e/1e3)};case"past7days":return{startTime:Math.round(e/1e3),endTime:Math.round((e-604800)/1e3)};case"past30days":return{startTime:Math.round(e/1e3),endTime:Math.round((e-2592e3)/1e3)}}},exportSearch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var e,n,r,o,l,u,c,i,d,p,m,_;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.isLoading=!0,e=[],n=t.total%t.pageSize==0?t.total/t.pageSize:Math.floor(t.total/t.pageSize)+1,r=t.form.shopSelectVal,o=1;case 5:if(o<=n)return l={country:t.form.site,groupId:t.form.groupId,mallName:"0"===t.form.shopSelect?r:"",mallId:"1"===t.form.shopSelect?r:"",mallAliasName:"2"===t.form.shopSelect?r:"",page:o,pageSize:t.pageSize},a.prev=7,a.next=10,t.$api.getMallStatistics(l);a.next=41;break;case 10:if(p=a.sent,200!==(u=p.data).code){a.next=31;break}if(!(c=u.data.data)){a.next=28;break}i=0;case 16:if(i<c.length)return d=c[i],a.next=20,t.$appConfig.getGlobalCacheInfo("mallInfo",d.platform_mall_id);a.next=28;break;case 20:p=a.sent,p=JSON.parse(p),d.country=t.$filters.chineseSite(d.country),d.mall_datas=JSON.parse(d.mall_datas),d.group_name=p.GroupName;case 25:i++,a.next=16;break;case 28:c.forEach((function(t){e.push(t)})),a.next=33;break;case 31:t.$message.error("".concat(u.message)),t.isLoading=!1;case 33:a.next=38;break;case 35:a.prev=35,a.t0=a.catch(7),t.isLoading=!1;case 38:o++,a.next=5;break;case 41:if(null!=(m=e)&&m.length){a.next=46;break}return t.isLoading=!1,t.$message("暂无导出数据"),a.abrupt("return");case 46:_="<tr>\n          <td>站点</td>\n          <td>店铺ID</td>\n          <td>店铺名称</td>\n          <td>店铺分组</td>\n          <td>最近创建订单时间</td>\n          <td>昨日订单数</td>\n          <td>近7天订单数</td>\n          <td>历史订单总数</td>\n          <td>店铺额度</td>\n          <td>全部产品数</td>\n          <td>上架产品数</td>\n          <td>售空产品数</td>\n          <td>禁卖产品数</td>\n          <td>未上架产品数</td>\n          <td>聊聊回复率</td>\n          <td>卖场评价</td>\n          <td>订单未完成率</td>\n          <td>关注量</td>\n          <td>粉丝量</td>\n          <td>商品浏览量</td>\n          <td>昨日商品浏览量</td>\n          <td>近7天商品浏览量</td>\n          <td>近30天商品浏览量</td>\n          <td>访客数</td>\n          <td>昨日访客数</td>\n          <td>近7日访客数</td>\n          <td>近30日访客数</td>\n          <td>客服不重复访客数</td>\n          <td>客服询问数</td>\n          <td>客服访客询问数</td>\n          <td>客服已回应数</td>\n          <td>客服无回应数</td>\n          <td>客服咨询买家数</td>\n          <td>客服咨询订单数</td>\n          <td>客服咨询件数</td>\n          <td>客服咨询销售额</td>\n          <td>客服平均回应时间</td>\n          <td>待拨款订单数</td>\n          <td>待拨款金额</td>\n          <td>本周已拨款</td>\n          <td>本月已拨款</td>\n          <td>全部已拨款</td>\n        </tr>",m.forEach((function(a){_+="<tr>\n        <td>".concat(a.country?t.$filters.chineseSite(a.country):"\t","</td>\n        <td>").concat(a.platform_mall_id||"\t","</td>\n        <td>").concat(a.mall_alias_name||a.platform_mall_name+"\t","</td>\n        <td>").concat(a.group_name||"\t","</td>\n        <td>").concat(a.recent_order_create_time||"\t","</td>\n        <td>").concat(a.yesterday_order_num||"\t","</td>\n        <td>").concat(a.week_order_num||"\t","</td>\n        <td>").concat(a.history_order_num||"\t","</td>\n        <td>").concat(a.mall_quota||"\t","</td>\n        <td>").concat(a.all_product_num||"\t","</td>\n        <td>").concat(a.active_product_num||"\t","</td>\n        <td>").concat(a.soldout_product_num||"\t","</td>\n        <td>").concat(a.banned_product_num||"\t","</td>\n        <td>").concat(a.unlisted_product_num||"\t","</td>\n        <td>").concat(a.chat_response_rate||"\t","</td>\n        <td>").concat(a.rating_star||"\t","</td>\n        <td>").concat(a.order_non_fulfillment_rate||"\t","</td>\n        <td>").concat(a.followers_number||"\t","</td>\n        <td>").concat(a.fans_number||"\t","</td>\n        <td>").concat(a.today_view_product_count||"\t","</td>\n        <td>").concat(a.yesterday_view_product_count||"\t","</td>\n        <td>").concat(a.week_view_product_count||"\t","</td>\n        <td>").concat(a.month_view_product_count||"\t","</td>\n        <td>").concat(a.today_view_person_count||"\t","</td>\n        <td>").concat(a.yesterday_view_person_count||"\t","</td>\n        <td>").concat(a.week_view_person_count||"\t","</td>\n        <td>").concat(a.month_view_person_count||"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatShopUvData?a.mall_datas.ChatShopUvData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatsEnquiredData?a.mall_datas.ChatsEnquiredData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatVisitorsEnquiredData?a.mall_datas.ChatVisitorsEnquiredData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatRespondedChatsData?a.mall_datas.ChatRespondedChatsData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatNonRespondedChatsData?a.mall_datas.ChatNonRespondedChatsData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatBuyersData?a.mall_datas.ChatBuyersData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatOrdersData?a.mall_datas.ChatOrdersData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatUnitsData?a.mall_datas.ChatUnitsData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatSalesData?a.mall_datas.ChatSalesData:"\t","</td>\n        <td>").concat(a.mall_datas&&a.mall_datas.ChatResponseTimeData?a.mall_datas.ChatResponseTimeData:"\t","</td>\n        <td>").concat(a.frozen_amount_orders||"\t","</td>\n        <td>").concat(a.frozen_amount||"\t","</td>\n        <td>").concat(a.lastweek_amount||"\t","</td>\n        <td>").concat(a.lastmonth_amount||"\t","</td>\n        <td>").concat(a.available_amount||"\t","</td>\n        </tr>")})),Object(s.i)("店铺数据",_),t.isLoading=!1;case 50:case"end":return a.stop()}}),a,null,[[7,35]])})))()},getGroupId:function(t){this.form.groupId=t},handleSizeChange:function(t){this.pageSize=t,this.getMallStatistics()},handleCurrentChange:function(t){this.page=t,this.getMallStatistics()},handleSelectionChange:function(t){this.multipleSelection=t}}},e("8d12"),e=e("2877"),r=Object(e.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-row",{staticClass:"contaniner"},[e("el-col",{attrs:{span:3}},[e("mallGroup",{attrs:{"get-data":t.getMallStatistics},on:{getGroupId:t.getGroupId}})],1),e("el-col",{staticClass:"right",attrs:{span:21}},[e("el-row",{staticClass:"header"},[e("el-col",{staticClass:"header-top",attrs:{span:24}},[e("ul",[e("li",[e("span",[t._v("站点：")]),e("el-select",{staticClass:"unnormal",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.form.site,callback:function(a){t.$set(t.form,"site",a)},expression:"form.site"}},[e("el-option",{attrs:{label:"全部",value:0}}),t._l(t.countries,(function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})}))],2)],1),e("li",[e("el-select",{staticClass:"unnormal",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.form.shopSelect,callback:function(a){t.$set(t.form,"shopSelect",a)},expression:"form.shopSelect"}},t._l(t.shopSelectList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})})),1),e("el-input",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:t.form.shopSelectVal,callback:function(a){t.$set(t.form,"shopSelectVal",a)},expression:"form.shopSelectVal"}})],1),e("li",[e("span",[t._v("客服数据统计时间(仅用于同步数据)：")]),e("el-select",{staticClass:"unnormal3",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.serviceDataTime,callback:function(a){t.serviceDataTime=a},expression:"serviceDataTime"}},t._l(t.serviceDataTimeList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})})),1)],1),e("li",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.page=1,t.getMallStatistics()}}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.exportSearch()}}},[t._v("导出数据")]),e("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.asyncData},on:{click:function(a){return t.handlerSelectTableOperating("syncMallData")}}},[t._v("同步店铺数据")])],1),e("li",[e("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.isShowProgress,expression:"isShowProgress"}],staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:t.percentage,status:"success"}})],1)])])],1),e("el-row",{staticClass:"header-two"},[e("el-col",{staticClass:"header-two-top",attrs:{span:24}},[e("span",[t._v("当前条件下，待拨款总订单数： "),e("p",[t._v(t._s(t.frozenAmountOrders))])]),e("span",[t._v("待拨款总金额： "),e("p",[t._v(t._s(parseFloat(t.frozenAmount).toFixed(2)))])]),e("span",[t._v("本周已拨款总金额： "),e("p",[t._v(t._s(parseFloat(t.weekAmount).toFixed(2)))])]),e("span",[t._v("本月已拨款总金额： "),e("p",[t._v(t._s(parseFloat(t.monthAmount).toFixed(2)))])]),e("span",[t._v("全部已拨款总金额： "),e("p",[t._v(t._s(parseFloat(t.availableAmount).toFixed(2)))])])])],1),e("el-row",{staticClass:"article"},[e("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"plTable",attrs:{"use-virtual":"",height:t.height,"row-height":t.rowHeight,"data-changes-scroll-top":!1,border:!1,"header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":t.handleSelectionChange}},[e("u-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),e("u-table-column",{attrs:{align:"center",type:"index",label:"序列号",width:"80"}}),e("u-table-column",{attrs:{align:"center",prop:"country",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(t._f("chineseSite")(a.country))+" ")]}}])}),e("u-table-column",{attrs:{align:"center",prop:"platform_mall_id",label:"店铺ID","min-width":"120"}}),e("u-table-column",{attrs:{align:"center",label:"店铺名称","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_alias_name||a.platform_mall_name)+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"店铺分组","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s("All"===a.group_name?"":a.group_name)+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"操作状态","min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[e("span",{style:a.color&&"color:"+a.color},[t._v(t._s(a.status))])]}}])}),e("u-table-column",{attrs:{align:"center",prop:"recent_order_create_time",label:"最近订单创建时间","min-width":"150"}}),e("u-table-column",{attrs:{align:"center",prop:"yesterday_order_num",label:"昨日订单数","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"week_order_num",label:"近7天订单数","min-width":"100"}}),e("u-table-column",{attrs:{align:"center",prop:"history_order_num",label:"历史订单数","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"mall_quota",label:"店铺额度"}}),e("u-table-column",{attrs:{align:"center",prop:"all_product_num",label:"全部产品数","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"active_product_num",label:"上架产品数","min-width":"100"}}),e("u-table-column",{attrs:{align:"center",prop:"soldout_product_num",label:"售空产品数","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"banned_product_num",label:"禁卖产品数","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"unlisted_product_num",label:"未上架产品数","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",prop:"chat_response_rate",label:"聊聊回复率","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"rating_star",label:"卖场评价"}}),e("u-table-column",{attrs:{align:"center",prop:"order_non_fulfillment_rate",label:"订单未完成率","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",prop:"followers_number",label:"关注量"}}),e("u-table-column",{attrs:{align:"center",prop:"fans_number",label:"粉丝量"}}),e("u-table-column",{attrs:{align:"center",prop:"today_view_product_count",label:"商品浏览量","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"yesterday_view_product_count",label:"昨日商品浏览量","min-width":"120"}}),e("u-table-column",{attrs:{align:"center",prop:"week_view_product_count",label:"近7天商品浏览量","min-width":"130"}}),e("u-table-column",{attrs:{align:"center",prop:"month_view_product_count",label:"近30天商品浏览量","min-width":"140"}}),e("u-table-column",{attrs:{align:"center",prop:"today_view_person_count",label:"访客数"}}),e("u-table-column",{attrs:{align:"center",prop:"yesterday_view_person_count",label:"昨日访客数","min-width":"90"}}),e("u-table-column",{attrs:{align:"center",prop:"week_view_person_count",label:"近7日访客数","min-width":"100"}}),e("u-table-column",{attrs:{align:"center",prop:"month_view_person_count",label:"近30日访客数","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",label:"客服不重复访客数","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatShopUvData?a.mall_datas.ChatShopUvData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服询问数","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatsEnquiredData?a.mall_datas.ChatsEnquiredData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服访客询问数","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatVisitorsEnquiredData?a.mall_datas.ChatVisitorsEnquiredData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服已回应数","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatRespondedChatsData?a.mall_datas.ChatRespondedChatsData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服无回应数","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatNonRespondedChatsData?a.mall_datas.ChatNonRespondedChatsData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服咨询买家数","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatBuyersData?a.mall_datas.ChatBuyersData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服咨询订单数","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatOrdersData?a.mall_datas.ChatOrdersData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服咨询件数","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatUnitsData?a.mall_datas.ChatUnitsData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服咨询销售额","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatSalesData?a.mall_datas.ChatSalesData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",label:"客服平均回应时间","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(a){return a=a.row,[t._v(" "+t._s(a.mall_datas&&a.mall_datas.ChatResponseTimeData?a.mall_datas.ChatResponseTimeData:"-")+" ")]}}])}),e("u-table-column",{attrs:{align:"center",prop:"frozen_amount_orders",label:"待拨款订单数","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",prop:"frozen_amount",label:"待拨款金额","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",prop:"lastweek_amount",label:"本周已拨款","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",prop:"lastmonth_amount",label:"本月已拨款","min-width":"110"}}),e("u-table-column",{attrs:{align:"center",prop:"available_amount",label:"全部已拨款","min-width":"100"}})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[200,700,1e3,2e3],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)}),[],!1,null,"bb5e0aa6",null);a.default=r.exports}}]);