(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3d4a933c"],{3522:function(e,t,a){"use strict";a("d579")},bf2f:function(e,t,a){"use strict";a.r(t);var n=a("1da1"),r=(a("159b"),a("96cf"),a("d4ec")),i=a("bee2"),s=function(){function e(t){Object(r.a)(this,e),this._this=t}var t,a,s,c,o;return Object(i.a)(e,[{key:"refreshAccessToken",value:(o=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.userId,a={userId:a},e.next=5,this._this.$shopeemanService.postChineseLaiZan("http://api.laizand.com/api/open/refreshAccessToken",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 5:return a=e.sent,a=JSON.parse(a),a=JSON.parse(a.data),e.abrupt("return",{code:a.code,data:a.data,message:a.message});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"refreshAccessToken-catch: ".concat(e.t0)});case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return o.apply(this,arguments)})},{key:"getTbGlobalUser",value:(c=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.uid,n=t.uuid,r=t.account,i=t.accountAliasName,i={uid:a,uuid:n,account:r,accountAliasName:i,app_key:"KYsyQGFviz2i0uQF"},e.next=5,this._this.$shopeemanService.getChineseLaiZan("http://api.laizand.com/api/open/getTbGlobalUser?",i,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":" gzip, deflate","User-Agent":"RestSharp/106.3.1.0"}});case 5:return i=e.sent,i=JSON.parse(i),i=JSON.parse(i.data),e.abrupt("return",{code:i.code,data:i.data,message:i.message});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"getGloableUser-catch: ".concat(e.t0)});case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return c.apply(this,arguments)})},{key:"updateAliasName",value:(s=Object(n.a)(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.id,n=t.uuid,r=t.accountAliasName,r={id:a,uuid:n,accountAliasName:r,app_key:"KYsyQGFviz2i0uQF"},e.next=5,this._this.$shopeemanService.postChineseLaiZan("http://api.laizand.com/api/open/updateAliasName",r,{headers:{"Content-Type":"application/json"}});case 5:return r=e.sent,r=JSON.parse(r),r=JSON.parse(r.data),e.abrupt("return",{code:r.code,data:r.data,message:r.message});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"updateAliasName-catch: ".concat(e.t0)});case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return s.apply(this,arguments)})},{key:"deleteAccount",value:(a=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.id,a={id:a,app_key:"KYsyQGFviz2i0uQF"},e.next=5,this._this.$shopeemanService.postChineseLaiZan("http://api.laizand.com/api/open/deleteAccount",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 5:return a=e.sent,a=JSON.parse(a),a=JSON.parse(a.data),e.abrupt("return",{code:a.code,data:a.data,message:a.message});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"deleteAccount-catch: ".concat(e.t0)});case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return a.apply(this,arguments)})},{key:"getTbGlobalAuthUrl",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.accountAliasName,a={accountAliasName:a,app_key:"KYsyQGFviz2i0uQF"},e.next=5,this._this.$shopeemanService.postChineseLaiZan("http://api.laizand.com/api/open/getTbGlobalAuthUrl",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate","User-Agent":"RestSharp/106.3.1.0","Content-Type":"application/x-www-form-urlencoded"}});case 5:return a=e.sent,a=JSON.parse(a),a=JSON.parse(a.data),e.abrupt("return",{code:a.code,data:a.data,message:a.message});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"getTbGlobalAuthUrl-catch: ".concat(e.t0)});case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return t.apply(this,arguments)})}]),e}(),c={data:function(){return{rowData:"",loading:!1,dialogVisible_token:!1,tokenName:"",currentName:"",newName:"",dialogVisible_updata:!1,tableList:[],query:{account_alies:"",account:""},TBApiInstance:new s(this),user_uid:"",user_uuid:"0",downPDF:"https://shopeeman.oss-cn-shenzhen.aliyuncs.com/files/shopeemanFiles/appFiles/20211111/20211111153709618cc825a8c5b.pdf"}},created:function(){this.getUser()},methods:{getToken:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.tokenName){t.next=3;break}return e.$message.warning("填写信息不能为空"),t.abrupt("return");case 3:return n={accountAliasName:e.tokenName},t.next=6,e.TBApiInstance.getTbGlobalAuthUrl(n);case 6:200===(a=t.sent).code?(n=a.data.url,window.location.href=n):e.$message.error(a.data);case 8:case"end":return t.stop()}}),t)})))()},delAccount:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={id:e.id},t.loading=!0,a.next=4,t.TBApiInstance.deleteAccount(n);case 4:n=a.sent,t.loading=!1,200===n.code?t.$message.success("删除成功"):t.$message.error(n.data),t.getTableList();case 8:case"end":return a.stop()}}),a)})))()},updataName:function(e){this.rowData=e,this.currentName=e.account_alias_name,this.dialogVisible_updata=!0},updataNameFun:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.newName){t.next=3;break}return e.$message.warning("填写信息不能为空"),t.abrupt("return");case 3:return a={id:e.rowData.id,uuid:e.user_uuid,accountAliasName:e.newName},e.loading=!0,t.next=7,e.TBApiInstance.updateAliasName(a);case 7:200===(a=t.sent).code?e.$message.success("修改成功"):e.$message.error(a.data),e.dialogVisible_updata=!1,e.getTableList(),e.newName="";case 12:case"end":return t.stop()}}),t)})))()},clearVisible:function(){this.newName="",this.tokenName=""},getUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$appConfig.getUserInfo();case 2:a=t.sent,e.user_uid=a.muid,e.getTableList();case 5:case"end":return t.stop()}}),t)})))()},refeshSatua:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.tableList.forEach((function(t){t={userId:t.user_id},e.loading=!0,e.TBApiInstance.refreshAccessToken(t).then((function(t){e.loading=!1}))})),e.getTableList();case 2:case"end":return t.stop()}}),t)})))()},getTableList:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={uid:e.user_uid,uuid:e.user_uuid,account:e.query.account,accountAliasName:e.query.account_alies},e.loading=!0,t.next=4,e.TBApiInstance.getTbGlobalUser(a);case 4:a=t.sent,e.loading=!1,200===a.code?e.tableList=a.data.data:e.$message.error(a.data);case 7:case"end":return t.stop()}}),t)})))()}}};a("3522"),a=a("2877"),c=Object(a.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"detail"},[a("div",{staticClass:"condition"},[a("div",{staticClass:"condition_item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible_token=!0}}},[e._v("新增授权")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refeshSatua}},[e._v("刷新状态")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[a("a",{staticStyle:{color:"white"},attrs:{href:e.downPDF}},[e._v("下载教程")])]),a("el-link",{staticClass:"linkdec",attrs:{type:"primary",href:"https://distributor.taobao.global/apps/seller/login"}},[e._v("注册淘宝天猫海外平台账号")])],1),a("div",{staticClass:"condition_item"},[a("div",{staticClass:"conditon_item_dec"},[a("span",[e._v("账号别名：")]),a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"mini"},model:{value:e.query.account_alies,callback:function(t){e.$set(e.query,"account_alies",t)},expression:"query.account_alies"}})],1),a("div",{staticClass:"conditon_item_dec"},[a("span",[e._v("账号：")]),a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"mini"},model:{value:e.query.account,callback:function(t){e.$set(e.query,"account",t)},expression:"query.account"}})],1),a("el-button",{staticClass:"conditon_item_dec",attrs:{type:"primary",size:"mini"},on:{click:e.getTableList}},[e._v("搜索")])],1)]),a("div",{staticClass:"tabledes"},[a("el-table",{attrs:{height:"calc(100vh - 106px)","header-cell-style":{background:"#f7fafa"},data:e.tableList}},[a("el-table-column",{attrs:{label:"账号",prop:"account","min-width":"200px"}}),a("el-table-column",{attrs:{label:"账号别名",prop:"account_alias_name","min-width":"200px"}}),a("el-table-column",{attrs:{label:"授权状态",prop:"status","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[a("span",[e._v(e._s(1===Number(t.status)?"正常":"授权过期"))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_at","min-width":"200px"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updated_at","min-width":"200px"}}),a("el-table-column",{attrs:{label:"操作",prop:"","min-width":"250px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updataName(n)}}},[e._v("修改账号别名")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.delAccount(n)}}},[e._v("删除账号")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"修改账号别名",visible:e.dialogVisible_updata,width:"30%"},on:{"update:visible":function(t){e.dialogVisible_updata=t},closed:e.clearVisible}},[a("div",[a("div",{staticStyle:{display:"flex","align-items":"baseline"}},[a("span",[e._v("当前账号别名：")]),a("h3",{staticStyle:{color:"red"}},[e._v(e._s(e.currentName))])]),a("div",{staticStyle:{display:"flex","align-items":"baseline"}},[a("span",[e._v("新的账号别名：")]),a("el-input",{staticStyle:{width:"250px","margin-top":"10px"},attrs:{type:"text",size:"mini",clearable:""},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1),a("el-button",{staticStyle:{width:"100px","margin-top":"10px","margin-left":"115px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updataNameFun()}}},[e._v("确定")])],1)]),a("el-dialog",{attrs:{title:"天猫淘宝海外平台授权",visible:e.dialogVisible_token,width:"30%"},on:{"update:visible":function(t){e.dialogVisible_token=t},closed:e.clearVisible}},[a("div",{staticStyle:{display:"flex","justify-content":"center","flex-wrap":"wrap"}},[a("div",{staticStyle:{display:"flex","align-items":"baseline"}},[a("span",[e._v("账号别名：")]),a("el-input",{staticStyle:{width:"250px"},attrs:{type:"text",size:"mini",clearable:""},model:{value:e.tokenName,callback:function(t){e.tokenName=t},expression:"tokenName"}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:e.getToken}},[e._v("确定")])],1)])])],1)}),[],!1,null,"64fcade3",null);t.default=c.exports},d579:function(e,t,a){}}]);