(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89af1990"],{"122f":function(e,t,a){},6701:function(e,t,a){"use strict";a("122f")},e5e9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("仓库名称：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.wherehouseName,callback:function(t){e.$set(e.form,"wherehouseName",t)},expression:"form.wherehouseName"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._l(e.wherehouseNameList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name,value:e.id}})}))],2)],1),a("li",{staticClass:"status"},[a("span",[e._v("订单出库状态：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.returnStatus,callback:function(t){e.$set(e.form,"returnStatus",t)},expression:"form.returnStatus"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._l(e.returnStatusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("出库单创建时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.returnCreateTime,callback:function(t){e.$set(e.form,"returnCreateTime",t)},expression:"form.returnCreateTime"}})],1)]),a("ul",[a("li",[a("span",[e._v("订单编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s/g,'')"},model:{value:e.form.returnOrderNumber,callback:function(t){e.$set(e.form,"returnOrderNumber",t)},expression:"form.returnOrderNumber"}})],1),a("li",[a("span",[e._v("平台物流单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s/g,'')"},model:{value:e.form.returnLogisticsDocNum,callback:function(t){e.$set(e.form,"returnLogisticsDocNum",t)},expression:"form.returnLogisticsDocNum"}})],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:e.Loading1,size:"mini"},on:{click:e.getoverseaslupplementlist}},[e._v("搜索")])],1)])]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.Loading3,expression:"Loading3"}],ref:"plTable",attrs:{"header-align":"center",height:"calc(100vh - 200px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{align:"center",prop:"warehouse_name",label:"所属仓库","min-width":"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",prop:"oversea_order_sn",label:"订单编号","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"reissue_order_sn",label:"补件订单编号","min-width":"140",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"logistic_no",label:"补件物流单号","min-width":"160",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"logistic_name",label:"补件物流名称","min-width":"120",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"created_at",label:"补件单创建时间","min-width":"140",align:"center"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"补件单更新时间","min-width":"140",align:"center"}}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.status?e.statusObj[a.status]:"")+" ")]}}])}),a("el-table-column",{attrs:{label:"补件商品详情","min-width":"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.detailsVisible=!0,e.getDetails(r)}}},[e._v("查看商品详情")])]}}])}),a("el-table-column",{attrs:{prop:"goods_num",label:"补件商品总数",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1===r.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.del(r)}}},[e._v("取消补件")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"退件商品详情",visible:e.detailsVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"800px"},on:{"update:visible":function(t){e.detailsVisible=t}}},[a("el-table",{attrs:{data:e.detailsData,height:"450","header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{"min-width":"150",align:"center",label:"订单编号","show-overflow-tooltip":"",fixed:""}},[[e._v(" "+e._s(e.overseaOrderSn)+" ")]],2),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.status?e.statusObj[a.status]:"")+" ")]}}])}),a("el-table-column",{attrs:{"min-width":"150",align:"center",label:"系统商品编号(SysSKU)",prop:"sys_sku_id"}}),a("el-table-column",{attrs:{"min-width":"120",align:"center",label:"商品编号(SKU)",prop:"sku_id"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",label:"商品名称",prop:"goods_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",label:"数量",prop:"sku_num"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",label:"商品规格","show-overflow-tooltip":"",prop:"sku_name"}})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[50,100,200]},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],l=a("1da1"),s=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("99af"),a("4de4"),a("a9e3"),a("d81d"),a("96cf"),{data:function(){return{Loading1:!1,detailsData:[],Loading3:!1,detailsVisible:!1,currentPage:1,tableData:[],overseaOrderSn:"",total:0,pageSize:50,page:1,form:{wherehouseName:0,returnStatus:0,returnCreateTime:[(new Date).getTime()-1296e6,new Date],returnOrderNumber:"",returnLogisticsDocNum:""},returnStatusList:[{value:1,label:"已下单"},{value:2,label:"已确认"},{value:3,label:"已出库"},{value:4,label:"已取消"}],wherehouseNameList:[],statusObj:{1:"已下单",2:"已确认",3:"已出库",4:"已取消"}}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOverseasWarehouse();case 2:return t.next=4,e.getoverseaslupplementlist();case 4:case"end":return t.stop()}}),t)})))()},methods:{getOverseasWarehouse:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Map,t.prev=1,t.next=4,e.$appConfig.getGlobalCacheInfo("allWh","");case 4:r=t.sent,n=e.isJsonString(r),null!==n&&void 0!==n&&n.length?(n.forEach((function(t){e.wherehouseNameList=e.wherehouseNameList.concat(t.child)})),e.wherehouseNameList=e.wherehouseNameList.filter((function(e){return!a.has(e.id)&&a.set(e.id,1)}))):e.$message.error("仓库列表为空"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$message.error("获取仓库列表异常： ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},isJsonString:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}},getDetails:function(e){this.overseaOrderSn=e.oversea_order_sn,this.detailsData=e.sku_list},del:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("此操作将取消该补件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.cancelsupplement({id:e.id});case 2:r=a.sent,n=r.data,"success"===n.message?t.$message.success("取消成功"):t.$message.error("取消失败".concat(n.message)),t.getoverseaslupplementlist();case 6:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},getoverseaslupplementlist:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.Loading1=!0,e.Loading3=!0,a=e.form.returnCreateTime?"".concat(e.$dayjs(e.form.returnCreateTime[0]).format("YYYY-MM-DD HH:mm:ss"),"/").concat(e.$dayjs(e.form.returnCreateTime[1]).format("YYYY-MM-DD HH:mm:ss")):"",r={wid:e.form.wherehouseName,status:Number(e.form.returnStatus),createdTime:a,logisticNo:e.form.returnLogisticsDocNum,overseaOrderSn:e.form.returnOrderNumber,page:e.page,pageSize:e.pageSize},t.prev=4,t.next=7,e.$api.getlupplementlist(r);case 7:n=t.sent,l=n.data,200===l.code?(e.tableData=l.data.data,e.tableData.map((function(e){var t=0;e.sku_list.map((function(e){t+=e.sku_num?Number(e.sku_num):0})),e.goods_num=t})),e.total=l.data.total):e.$message.error("数据获取失败".concat(l.message)),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](4);case 14:e.Loading1=!1,e.Loading3=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getoverseaslupplementlist()},handleCurrentChange:function(e){this.page=e,this.getoverseaslupplementlist()},handleSelectionChange:function(e){this.multipleSelection=e}}}),i=s,o=(a("6701"),a("2877")),u=Object(o["a"])(i,r,n,!1,null,"02e17a90",null);t["default"]=u.exports}}]);