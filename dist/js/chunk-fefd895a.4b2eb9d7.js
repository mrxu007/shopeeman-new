(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fefd895a"],{"3e66":function(e,t,a){"use strict";a("6dc6")},"4a18":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d044"),a("c4e3"),a("8798"),a("ceff"),a("f5aa"),a("2f9e");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}},"65e5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"store-address"},[a("div",{staticClass:"tab-box"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"国内仓设置",name:"landStore"}},[a("div",{staticClass:"btn-tool"},[a("el-button",{staticClass:"mar-right",attrs:{type:"primary",size:"mini"},on:{click:e.homeAddress}},[e._v("添加国内自有仓库地址")]),e.isHomeApplyAddress?a("el-button",{staticClass:"mar-right",attrs:{type:"primary",size:"mini"},on:{click:e.sysApplyAddress}},[e._v("申请系统仓库地址")]):e._e(),a("div",{staticClass:"warning-text activeColor"},[a("p",[e._v("温馨提示：1、绑定自有仓库时，订单信息将不会推送至对应站点的系统仓库，如使用软件合作物流，请申请绑定系统仓库！")]),a("p",[e._v("温馨提示：2、拍单平台为京喜时，收件人姓名只能由中文和字母组成，且在拍单时，软件不会自动增加买家姓名的拍单标识！")])])],1)]),a("el-tab-pane",{attrs:{label:"海外仓设置",name:"abroadStore"}},[a("div",{staticClass:"btn-tool"},[a("el-button",{staticClass:"mar-right",attrs:{type:"primary",size:"mini"},on:{click:e.oversearAddress}},[e._v("添加国外自有仓库地址")]),e.isOverseasApplyAddress?a("el-button",{staticClass:"mar-right",attrs:{type:"primary",size:"mini"},on:{click:e.sysApplyAddress}},[e._v("申请国外系统仓库地址")]):e._e(),a("div",{staticClass:"warning-text activeColor"},[a("p",[e._v("温馨提示：1、绑定自有仓库时，订单信息将不会推送至对应站点的系统仓库，如使用软件合作物流，请申请绑定系统仓库！")]),a("p",[e._v("温馨提示：2、拍单平台为lazada时，收件人姓名不能带有特殊字符，如下划线，加号等，且菲律宾站点不能带有#字符！")]),a("p",[e._v("温馨提示：3、收件人姓名请使用当地语言或拼音，尽量不使用中文！")])])],1)])],1),a("div",{staticClass:"content"},[a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],ref:"multipleTable",attrs:{data:e.tableData,"use-virtual":"",height:"640","tooltip-effect":"dark","header-cell-style":{backgroundColor:"#f5f7fa"}}},[a("u-table-column",{attrs:{type:"index",label:"序号","min-width":"50px",align:"center",fixed:""}}),a("u-table-column",{attrs:{"min-width":"140px",label:"仓库",fixed:"",prop:"warehouse_name"}}),a("u-table-column",{attrs:{"min-width":"300px",label:"地址",prop:"full_address","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(i.full_address))])]}}])}),a("u-table-column",{attrs:{"min-width":"120px",label:"收件人",prop:"receiving_name"}}),a("u-table-column",{attrs:{prop:"type",label:"仓库类型","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeObj[t.row.type])+" ")]}}])}),a("u-table-column",{attrs:{"min-width":"100px",label:"联系电话",prop:"receiving_tel","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{"min-width":"130px",label:"自有手机号",prop:"own_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.isUser?a("div",[i.isPhone?a("el-input",{directives:[{name:"fo",rawName:"v-fo"}],attrs:{size:"mini"},on:{blur:function(t){return e.updateOwnPhone(i)}},model:{value:i.own_phone,callback:function(t){e.$set(i,"own_phone",t)},expression:"row.own_phone"}}):a("span",{on:{click:function(t){return e.isShowPhone(i)}}},[a("el-input",{attrs:{disabled:!i.isPhone,size:"mini"},model:{value:i.own_phone,callback:function(t){e.$set(i,"own_phone",t)},expression:"row.own_phone"}})],1)],1):e._e()]}}])}),a("u-table-column",{attrs:{"min-width":"80px",label:"邮编",prop:"post_code"}}),a("u-table-column",{attrs:{"min-width":"140px",label:"是否开启自有手机号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-switch",{attrs:{disabled:1===i.isUser||""===i.own_phone,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.updateOwnPhone(i)}},model:{value:i.is_use_own_phone,callback:function(t){e.$set(i,"is_use_own_phone",t)},expression:"row.is_use_own_phone"}})]}}])}),a("u-table-column",{attrs:{"min-width":"100px",label:"绑定店铺数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.mallInfo.length)+" ")]}}])}),a("u-table-column",{attrs:{"min-width":"90px",label:"对应站点",prop:"country","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["landStore"===e.activeName?a("span",[e._v(" "+e._s(e._f("chineseSite")(t.row.sites||t.row.country))+" ")]):a("span",[e._v(" "+e._s(e._f("chineseSite")(t.row.country))+" ")])]}}])}),a("u-table-column",{attrs:{"min-width":"120px",label:"绑定的店铺","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.bindMallName(t.row.mallInfo))+" ")]}}])}),a("u-table-column",{attrs:{label:"操作","min-width":"360px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateBindMall(i)}}},[e._v("修改绑定店铺")]),1===i.isUser?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateItself(i,e.flag4?1:2)}}},[e._v("修改自有仓库地址")]):e._e(),1===i.isUser?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteOwnStore(i)}}},[e._v("删除仓库")]):e._e()]}}])})],1)],1)],1),e.itselfAddressVisible?a("el-dialog",{staticClass:"select-dialog",attrs:{title:"选择地址",visible:e.itselfAddressVisible,width:"310px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.itselfAddressVisible=t},close:e.handleClose1}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库类型："}},[a("span",[e._v(e._s(e.flag4?"国内中转仓":"海外中转仓"))])]),e.flag4?a("el-form-item",{attrs:{label:"仓库站点："}},[a("el-select",{attrs:{disabled:!e.flag3,placeholder:"",size:"mini",filterable:""},on:{change:e.handlerChange3},model:{value:e.itselfCountry,callback:function(t){e.itselfCountry=t},expression:"itselfCountry"}},e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):a("el-form-item",{attrs:{label:"仓库站点："}},[a("el-select",{attrs:{disabled:!e.flag3,placeholder:"",size:"mini",filterable:""},on:{change:e.handlerChange3},model:{value:e.itselfCountry,callback:function(t){e.itselfCountry=t},expression:"itselfCountry"}},e._l(e.countriesAbroad,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"仓库名称："}},[a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.itselfWarehouseName,callback:function(t){e.itselfWarehouseName=t},expression:"itselfWarehouseName"}})],1),e.flag4?a("div",[a("address-model",{ref:"addressModel",attrs:{country:e.itselfCountry},on:{sendData:e.sendData}})],1):a("div",[e.isSG?a("div",[a("el-form-item",{attrs:{label:"邮政编码："}},[a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.itselfPostCode,callback:function(t){e.itselfPostCode=t},expression:"itselfPostCode"}})],1)],1):a("div",[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"收货省："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(t){e.flag5=!1,e.handlerChange1()}},model:{value:e.itselfProvinceId,callback:function(t){e.itselfProvinceId=t},expression:"itselfProvinceId"}},e._l(e.provinceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.Province,value:e.ProvinceId}})})),1)],1),a("el-form-item",{attrs:{label:"收货市："}},[a("el-select",{attrs:{disabled:!e.itselfProvinceId,placeholder:"请选择",size:"mini"},on:{change:function(t){e.flag5=!1,e.handlerChange2()}},model:{value:e.itselfCityId,callback:function(t){e.itselfCityId=t},expression:"itselfCityId"}},e._l(e.cityList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.City,value:e.CityId}})})),1)],1),a("el-form-item",{attrs:{label:"收货区："}},[a("el-select",{attrs:{disabled:!e.itselfCityId,placeholder:"请选择",size:"mini"},on:{change:function(t){e.flag5=!1}},model:{value:e.itselfDistrictId,callback:function(t){e.itselfDistrictId=t},expression:"itselfDistrictId"}},e._l(e.distinctList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.District,value:e.DistrictId}})})),1)],1)],1)],1)]),a("el-form-item",{attrs:{label:"详细地址："}},[a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.itselfDetailAddress,callback:function(t){e.itselfDetailAddress=t},expression:"itselfDetailAddress"}})],1),a("el-form-item",{attrs:{label:"收件人："}},[a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.itselfReceivingName,callback:function(t){e.itselfReceivingName=t},expression:"itselfReceivingName"}})],1),a("el-form-item",{attrs:{label:"电话号码："}},[a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.itselfReceivingTel,callback:function(t){e.itselfReceivingTel=t},expression:"itselfReceivingTel"}})],1),a("el-form-item",{attrs:{label:"归属仓库："}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.itselfWarehouseId,callback:function(t){e.itselfWarehouseId=t},expression:"itselfWarehouseId"}},[a("el-option",{attrs:{label:"不绑定",value:0}}),e._l(e.warehouseList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name,value:e.id}})}))],2)],1)],1),a("div",{staticClass:"footer"},[a("span",[e._v(" 温馨提示：若新增的自有仓库和系统仓库地址相同, 请绑定对应的归属仓库,若未绑定归属仓库,仓库无 法精准匹配,会有无法出库的风险 ")]),e.flag4?e._e():a("span",[e._v(" 1：收件人尽量不要有特殊字符,如#,+,_,@等"),a("br"),e._v(" 2：海外菲律宾仓的买家姓名至少包含2个英文单词, 如：(China Boy)"),a("br"),e._v(" 3：海外新加坡仓地址必须带楼层单元号并以#隔开且 置于最后,如(1 SoonLeeStreet,Industrial Cres,#01-02) ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.itselfUpdate(e.flag3?1:2)}}},[e._v("确 定")])],1)],1):e._e(),a("el-dialog",{staticClass:"sys-store-dialog",attrs:{"close-on-click-modal":!1,title:e.flag1?"申请系统仓库地址":"修改仓库地址信息",width:"1000px",visible:e.sysAdderssVisible},on:{"update:visible":function(t){e.sysAdderssVisible=t},close:e.handleClose2}},[a("div",{staticClass:"dialog-left"},[!e.flag4&&e.flag1?a("div",{staticClass:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"}},[a("a",{staticStyle:{color:"#fff"},attrs:{href:e.downloadExcelUrl,download:"海外仓地址设置指南"}},[e._v("下载海外仓地址设置指南")])]),a("p",[e._v("使用海外仓服务前，请先下载使用指南查看")])],1):e._e(),a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库类型:"}},[a("span",[e._v(e._s(e.flag1||e.flag2?"系统仓库":"自有仓库"))])]),a("el-form-item",{attrs:{label:"仓库名称:"}},[e.flag1?a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.sysWarehouseChange},model:{value:e.sysWarehouseId,callback:function(t){e.sysWarehouseId=t},expression:"sysWarehouseId"}},e._l(e.warehouseData,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.warehouse_name}})})),1):e._e(),e.flag1?e._e():a("el-input",{attrs:{disabled:e.flag2,size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.warehouseName,callback:function(t){e.warehouseName=t},expression:"warehouseName"}})],1),a("el-form-item",{staticClass:"addressFull",attrs:{label:"地址全称:"}},[a("el-input",{attrs:{disabled:!0,size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:4},clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.warehouseAddress,callback:function(t){e.warehouseAddress=t},expression:"warehouseAddress"}})],1),a("el-form-item",{attrs:{label:"收件人："}},[a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.receivingName,callback:function(t){e.receivingName=t},expression:"receivingName"}})],1),a("el-form-item",{attrs:{label:"联系电话："}},[a("el-input",{attrs:{disabled:e.flag1||e.flag2,clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.wareHouseTel,callback:function(t){e.wareHouseTel=t},expression:"wareHouseTel"}})],1)],1),a("div",{staticClass:"footer"},[e.flag1?a("el-button",{attrs:{loading:e.butLoading,type:"primary",size:"mini"},on:{click:e.addXzyStore}},[e._v("新增仓库")]):a("el-button",{attrs:{loading:e.butLoading,type:"primary",size:"mini"},on:{click:e.updateWarehouse}},[e._v("修改仓库")])],1)],1),a("div",{staticClass:"dialog-right"},[a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("store-choose-mall",{key:e.changeIndex,attrs:{"is-all":!0,"show-mall":!1},on:{changeMallList:e.changeMallList}}),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"店铺",size:"mini","prefix-icon":"el-icon-search"},on:{input:e.searchInputMall},model:{value:e.searchMall,callback:function(t){e.searchMall=t},expression:"searchMall"}}),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"mini"},on:{click:e.getBindMall}},[e._v("查 询")])],1),e.mallTableShow?a("u-table",{directives:[{name:"loading",rawName:"v-loading",value:e.warehouseLoading,expression:"warehouseLoading"}],ref:"bindMallDataRef",attrs:{height:"420",data:e.bindMallData,stripe:"","use-virtual":"","row-key":e.getRowKey,"header-cell-style":{backgroundColor:"#f5f7fa",height:"38px",padding:0},"row-height":40,"cell-style":{padding:"0",height:"40px"},"row-style":{padding:"0",height:"40px"}},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{type:"selection",align:"center","min-width":"45","reserve-selection":!0}}),a("u-table-column",{attrs:{prop:"country",align:"center",label:"站点","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}],null,!1,519778554)}),a("u-table-column",{attrs:{align:"center",label:"店铺名称","min-width":"120",sortable:"",filters:[{text:"",value:""}],"filtered-value":[""],"filter-method":e.getBuyersTableShow},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.mallAliasName?a.mallAliasName:a.platformMallName)+" ")]}}],null,!1,1563180238)}),a("u-table-column",{attrs:{align:"center",label:"绑定国内仓","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.address.warehouse_name)+" ")]}}],null,!1,125390682)}),a("u-table-column",{attrs:{align:"center",label:"绑定海外仓","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.overseas_address.warehouse_name)+" ")]}}],null,!1,1946422991)})],1):e._e()],1)]),e.shopeeAddressVisible?a("el-dialog",{staticClass:"shopee-dialog",attrs:{title:"Shopee地址设置",visible:e.shopeeAddressVisible,width:"310px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.shopeeAddressVisible=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"仓库站点："}},[a("span",[e._v(e._s(e._f("chineseSite")(e.itselfCountry)))])]),a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"收货省："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(t){return e.handlerChange4()}},model:{value:e.sProvince,callback:function(t){e.sProvince=t},expression:"sProvince"}},e._l(e.sProvinceList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.translated_name==e.division_name?e.division_name:e.division_name+"/"+e.translated_name}})})),1)],1),a("el-form-item",{attrs:{label:"收货市："}},[a("el-select",{attrs:{disabled:!e.sProvince,placeholder:"请选择",size:"mini"},on:{change:function(t){return e.handlerChange5()}},model:{value:e.sCity,callback:function(t){e.sCity=t},expression:"sCity"}},e._l(e.sCityList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.translated_name==e.division_name?e.division_name:e.division_name+"/"+e.translated_name}})})),1)],1),"MY"===e.itselfCountry?a("el-form-item",{attrs:{label:"邮编："}},[a("el-input",{staticStyle:{width:"178px"},attrs:{size:"mini"},model:{value:e.sPDistinctInput,callback:function(t){e.sPDistinctInput=t},expression:"sPDistinctInput"}})],1):a("el-form-item",{attrs:{label:"收货区："}},[a("el-select",{attrs:{disabled:!e.sCity,placeholder:"请选择",size:"mini"},on:{change:function(t){return e.handlerChange6()}},model:{value:e.sPDistinct,callback:function(t){e.sPDistinct=t},expression:"sPDistinct"}},e._l(e.sDistinctList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.translated_name==e.division_name?e.division_name:e.division_name+"/"+e.translated_name}})})),1)],1),"PH"===e.itselfCountry?a("el-form-item",{attrs:{label:"收货街道："}},[a("el-select",{attrs:{disabled:!e.sCity,placeholder:"请选择",size:"mini"},model:{value:e.sStreet,callback:function(t){e.sStreet=t},expression:"sStreet"}},e._l(e.sStreetList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.division_name}})})),1)],1):e._e(),"PH"===e.itselfCountry?a("el-form-item",{attrs:{label:"邮编："}},[a("el-input",{staticStyle:{width:"178px"},attrs:{size:"mini"},model:{value:e.sPDistinctInput,callback:function(t){e.sPDistinctInput=t},expression:"sPDistinctInput"}})],1):e._e()],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addAbroadAddress}},[e._v("确 定")])],1)],1)],1):e._e()],1)},s=[],r=a("1938"),n=a("4a18"),l=a("66b1"),o=a("291b"),c=(a("e186"),a("876e"),a("8798"),a("a71d"),a("18a6"),a("88a8"),a("2c28"),a("77de"),a("dd92"),a("f5aa"),a("2f9e"),a("ebfb"),a("29b0"),a("8b24"),a("186e"),a("36ca"),a("66d3")),d=a("62ba"),u=a("4042"),f=function(){function e(t){Object(d["a"])(this,e),this._this=t}return Object(u["a"])(e,[{key:"updateData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.updateData(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"修改数据异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addXzyStore",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.addXzyStore(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"新增系统仓库异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBindMall",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.getBindMall(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200,data:a.data.data});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"绑定店铺、申请仓库的店铺列表异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteOwnStore",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.deleteOwnStore(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"删除仓库异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateOwnPhone",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.updateOwnPhone(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"配置手机号码异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"adduserStore",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.adduserStore(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"添加国内自有仓库异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserWarehouse",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.getUserWarehouse();case 3:if(t=e.sent,200!==t.data.code){e.next=6;break}return e.abrupt("return",{code:200,data:t.data.data});case 6:return e.abrupt("return",{code:t.data.code,data:"".concat(t.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取用户仓库地址异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"xzyIndex",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={warehouseType:t},e.prev=1,e.next=4,this._this.$api.xzyIndex(a);case 4:if(i=e.sent,200!==i.data.code){e.next=7;break}return e.abrupt("return",{code:200,data:i.data.data});case 7:return e.abrupt("return",{code:i.data.code,data:"".concat(i.data.message)});case 10:return e.prev=10,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"获取系统仓库异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"xzyAllIndex",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.xzyAllIndex();case 3:if(t=e.sent,200!==t.data.code){e.next=6;break}return e.abrupt("return",{code:200,data:t.data.data});case 6:return e.abrupt("return",{code:t.data.code,data:"".concat(t.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取所属仓库异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),p=a("7558"),h={components:{AddressModel:c["a"],StoreChooseMall:p["a"]},data:function(){return{downloadExcelUrl:"https://shopeeman.oss-cn-shenzhen.aliyuncs.com/files/shopeemanFiles/appFiles/20211224/2021122418063161c59ba7e66a0.xlsx",isShowLoading:!1,butLoading:!1,itselfAddressVisible:!1,sysAdderssVisible:!1,shopeeAddressVisible:!1,isHomeApplyAddress:!1,isOverseasApplyAddress:!1,flag1:!0,flag2:!0,flag3:!0,flag4:!0,flag5:!1,countries:this.$filters.countries_option_sub,countriesAbroad:this.$filters.countries_option_sub_abroad,AddressSet:new f(this),activeName:"landStore",changeIndex:0,tableData:[],tableDataAll:[],multipleSelection:[],mallList:[],typeObj:["国内中转仓","存储转运仓","海外存储仓","海外中转仓"],warehouseLoading:!1,warehouseData:[],bindMallData:[],sysWarehouseId:"",warehouseAddress:"",warehouseName:"",wareHouseTel:"",receivingName:"",itemData:{},itselfWarehouseName:"",itselfCountry:"TH",itselfProvinceId:"",itselfProvinceText:"",itselfCityId:"",itselfCityText:"",itselfDistrictId:"",itselfDistinctText:"",itselfDetailAddress:"",itselfFullAddress:"",itselfReceivingName:"",itselfReceivingTel:"",itselfWarehouseId:0,itselfShopeeMapId:"17312",warehouseList:[],itselfItemId:null,itselfPostCode:"",provinceList:[],cityList:[],distinctList:[],addressData:[],mallId:[],isSG:!1,sProvince:"",sCity:"",sPDistinct:"",sPDistinctInput:"",sProvinceList:[],sCityList:[],sDistinctList:[],sStreet:"",sStreetList:"",abroadAddressParams:{},itselfUpdateType:"",searchMall:"",searchMallSetTime:null,mallTableShow:!0}},watch:{activeName:function(e){this.flag4="landStore"===e,this.flag4?this.tableData=this.tableDataAll.filter((function(e){return 0===e.type})):this.tableData=this.tableDataAll.filter((function(e){return 2===e.type||3===e.type})),this.xzyIndex([this.flag4?0:3])}},mounted:function(){this.getUserWarehouse(),this.xzyIndex([0,3]),this.xzyAllIndex()},methods:{address:function(e){e.split(" ")},updateItself:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.itselfWarehouseId=0,a.itselfItemId=e.id,a.flag3=!1,a.flag5=!0,a.itselfAddressVisible=!0,a.itselfWarehouseName=e.warehouse_name,a.itselfDetailAddress=e.detail_address,a.itselfReceivingName=e.receiving_name,a.itselfReceivingTel=e.receiving_tel,a.itselfCountry=e.country,e.mallInfo.forEach((function(e){a.mallId.push(e.id)})),1!==t){i.next=15;break}a.$nextTick((function(){a.$refs.addressModel.update(e.province_id,e.city_id,e.distinct_id)})),i.next=35;break;case 15:if("SG"!==a.itselfCountry){i.next=19;break}return a.isSG=!0,a.itselfPostCode=e.post_code,i.abrupt("return");case 19:return i.prev=19,a.itselfProvinceId="R"+e.province_id,i.next=23,a.getLazadaDetailAddress("","provinceList","ProvinceId");case 23:return a.itselfCityId="R"+e.city_id,i.next=26,a.getLazadaDetailAddress(a.itselfProvinceId,"cityList","CityId");case 26:return a.itselfDistrictId="R"+e.distinct_id,i.next=29,a.getLazadaDetailAddress(a.itselfCityId,"distinctList","DistrictId");case 29:i.next=35;break;case 31:i.prev=31,i.t0=i["catch"](19),a.itselfProvinceId="",a.itselfCityId="";case 35:case"end":return i.stop()}}),i,null,[[19,31]])})))()},updateItselfData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e["id"]=t.itselfItemId,e["warehouseId"]=t.itselfWarehouseId,e["mallId"]=t.mallId.toString(),t.isSG&&(e["address"]["post_code"]=t.itselfPostCode),"PH"===t.itselfCountry&&(e["address"]["post_code"]=t.sPDistinctInput),a.next=7,t.updateData(e);case 7:t.itselfAddressVisible=!1;case 8:case"end":return a.stop()}}),a)})))()},updateBindMall:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.itemData=e,t.flag1=!1,t.flag2=0===e.isUser,t.sysAdderssVisible=!0,t.warehouseName=e.warehouse_name,t.warehouseAddress=e.full_address,t.receivingName=e.receiving_name,t.wareHouseTel=e.receiving_tel,a.next=10,t.getBindMall();case 10:t.$nextTick((function(){t.bindMallData.forEach((function(a){e.mallInfo.forEach((function(e){e.id===a.sysMallId&&t.$refs.bindMallDataRef.toggleRowSelection([{row:a,selected:!0}])}))}))}));case 11:case"end":return a.stop()}}),a)})))()},updateWarehouse:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.warehouseName){t.next=2;break}return t.abrupt("return",e.$message("仓库名不能为空"));case 2:if(e.receivingName){t.next=4;break}return t.abrupt("return",e.$message("收件人不能为空"));case 4:if(e.wareHouseTel){t.next=6;break}return t.abrupt("return",e.$message("电话号码不能为空"));case 6:if(!e.flag2){t.next=30;break}if("landStore"!==e.activeName||!e.itemData.countrys){t.next=28;break}a=Object(l["a"])(e.multipleSelection),t.prev=9,s=function(){var t=i.value;if(e.itemData.countrys.findIndex((function(e){return t.country===e}))<0){var a=[];return e.itemData.countrys.forEach((function(t){a.push(e.$filters.chineseSite(t))})),e.$message("当前仓库只能绑定".concat(a,"的店铺，请重新选择")),{v:void 0}}},a.s();case 12:if((i=a.n()).done){t.next=18;break}if(r=s(),"object"!==Object(n["a"])(r)){t.next=16;break}return t.abrupt("return",r.v);case 16:t.next=12;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](9),a.e(t.t0);case 23:return t.prev=23,a.f(),t.finish(23);case 26:t.next=30;break;case 28:if(e.multipleSelection.every((function(t){return t.country===e.itemData.country}))){t.next=30;break}return t.abrupt("return",e.$message("当前仓库只能绑定".concat(e.$filters.chineseSite(e.itemData.country),"的店铺，请重新选择")));case 30:return o={mallId:[],address:{}},o["id"]=e.itemData.id,o["warehouseName"]=e.warehouseName,o["address"]["city_id"]=e.itemData.city_id,o["address"]["city_text"]=e.itemData.city_text,o["address"]["detail_address"]=e.itemData.detail_address,o["address"]["distinct_id"]=e.itemData.distinct_id,o["address"]["distinct_text"]=e.itemData.distinct_text,o["address"]["full_address"]=e.itemData.full_address,o["address"]["province_id"]=e.itemData.province_id,o["address"]["province_text"]=e.itemData.province_text,o["address"]["receiving_name"]=e.receivingName,o["address"]["receiving_tel"]=e.wareHouseTel,o["shopeeMapId"]=e.itemData.shopee_map_id,e.multipleSelection.forEach((function(e){o["mallId"].push(e.sysMallId)})),e.butLoading=!0,t.next=48,e.updateData(o);case 48:return t.next=50,e.getBindMall();case 50:e.butLoading=!1,e.sysAdderssVisible=!1;case 52:case"end":return t.stop()}}),t,null,[[9,20,23,26]])})))()},updateData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.AddressSet.updateData(e);case 2:if(i=a.sent,200!==i.code){a.next=11;break}return a.next=6,t.$appConfig.updateWarehouseInfo();case 6:t.$message.success("修改成功"),t.itselfUpdateType="",t.itselfAddressVisible&&t.getUserWarehouse(),a.next=12;break;case 11:t.$message.error(i.data);case 12:case"end":return a.stop()}}),a)})))()},addXzyStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,s,r,o,c,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],i=[],e.receivingName){t.next=4;break}return t.abrupt("return",e.$message("收件人不能为空"));case 4:if(a=e.warehouseData.filter((function(t){return t.id===e.sysWarehouseId})),"landStore"!==e.activeName){t.next=26;break}s=Object(l["a"])(e.multipleSelection),t.prev=7,o=function(){var t=r.value;if(a[0].countrys.findIndex((function(e){return t.country===e}))<0){var i=[];return a[0].countrys.forEach((function(t){i.push(e.$filters.chineseSite(t))})),e.$message("当前仓库只能绑定".concat(e.$filters.chineseSite(i),"的店铺，请重新选择")),{v:void 0}}},s.s();case 10:if((r=s.n()).done){t.next=16;break}if(c=o(),"object"!==Object(n["a"])(c)){t.next=14;break}return t.abrupt("return",c.v);case 14:t.next=10;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](7),s.e(t.t0);case 21:return t.prev=21,s.f(),t.finish(21);case 24:t.next=28;break;case 26:if(e.multipleSelection.every((function(e){return e.country===a[0].country}))){t.next=28;break}return t.abrupt("return",e.$message("当前仓库只能绑定".concat(e.$filters.chineseSite(a[0].country),"的店铺，请重新选择")));case 28:return e.multipleSelection.forEach((function(e){i.push(e.sysMallId)})),d={id:e.sysWarehouseId,receivingName:e.receivingName,mallId:i.toString()},e.butLoading=!0,t.next=33,e.AddressSet.addXzyStore(d);case 33:if(u=t.sent,200!==u.code){t.next=41;break}return t.next=37,e.$appConfig.updateWarehouseInfo();case 37:e.$message.success("新增系统仓库成功"),e.getBindMall(),t.next=42;break;case 41:e.$message.error(u.data);case 42:e.butLoading=!1,e.sysAdderssVisible=!1;case 44:case"end":return t.stop()}}),t,null,[[7,18,21,24]])})))()},sysWarehouseChange:function(){var e=this,t={};this.warehouseData.forEach((function(a){a.id===e.sysWarehouseId&&(t=a)})),this.warehouseAddress=t.full_address,this.wareHouseTel=t.receiving_tel},sysApplyAddress:function(){this.flag1=!0,this.sysAdderssVisible=!0,this.getBindMall()},getBindMall:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warehouseLoading=!0,a=new Set,e.mallList.forEach((function(e){a.add(e.group_id)})),i={id:e.sysWarehouseId,country:e.mallList.country||"",groupIds:Object(r["a"])(a).toString()},t.next=6,e.AddressSet.getBindMall(i);case 6:s=t.sent,200===s.code?e.bindMallData=s.data:e.$message.error(s.data),e.warehouseLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},isShowPhone:function(e){this.$set(e,"isPhone",!0)},deleteOwnStore:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={id:e.id},a.next=3,t.AddressSet.deleteOwnStore(i);case 3:if(s=a.sent,200!==s.code){a.next=11;break}return a.next=7,t.$appConfig.updateWarehouseInfo();case 7:t.$message.success("删除成功"),t.getUserWarehouse(),a.next=12;break;case 11:t.$message.error(s.data);case 12:case"end":return a.stop()}}),a)})))()},updateOwnPhone:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$set(e,"isPhone",!1),i={id:e.id,isUseOwnPhone:e.is_use_own_phone?1:0,ownPhone:e.own_phone},a.next=4,t.AddressSet.updateOwnPhone(i);case 4:s=a.sent,200===s.code?t.$message.success("更新成功"):t.$message.error(s.data);case 6:case"end":return a.stop()}}),a)})))()},itselfUpdate:function(e){var t=this;this.itselfUpdateType=e;var a={};if(!this.itselfWarehouseName)return this.$message("仓库名称不能为空");if(!this.itselfDetailAddress)return this.$message("详细地址不能为空");if(!this.itselfReceivingName)return this.$message("收件人不能为空");if(!this.itselfReceivingTel)return this.$message("请输入电话号码");if(this.isSG){if(-1===this.itselfDetailAddress.indexOf("#"))return this.$message("新加坡站点详细地址缺少#字符，请以#字符隔出楼层单元号");if(!this.itselfPostCode)return this.$message("新加坡的邮政编码不能为空")}this.$confirm("请确认当前仓库是否和系统仓库地址相同，若相同，请务必绑定对应的归属仓库，避免因未能准确匹配仓库造成的无法出库的风险?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(0===t.itselfWarehouseId){i.next=15;break}if(t.warehouseList.forEach((function(e){t.itselfWarehouseId===e.id&&(a=e)})),t.isSG){i.next=6;break}if(t.itselfProvinceText===a.province_text&&t.itselfCityText===a.city_text&&t.itselfDistinctText===a.distinct_text&&-1!==t.itselfDetailAddress.indexOf(a.detail_address)){i.next=6;break}return t.$message("自有出库地址与归属出库地址省份信息不匹配"),i.abrupt("return");case 6:if(t.itselfDetailAddress!==a.detail_address){i.next=8;break}return i.abrupt("return",t.$message("自有仓库地址不能和系统仓库地址完全相同"));case 8:if(t.flag4){i.next=15;break}if(t.itselfCountry===a.country){i.next=12;break}return t.$message("自有出库站点与归属出库地址站点信息不匹配"),i.abrupt("return");case 12:if(-1!==t.itselfDetailAddress.indexOf(a.detail_address)){i.next=15;break}return t.$message("新加坡自有出库地址与归属出库地址详细信息不匹配"),i.abrupt("return");case 15:if(s={address:{}},!t.flag4){i.next=20;break}t.itselfFullAddress=t.itselfProvinceText+" "+t.itselfCityText+" "+t.itselfDistinctText+" "+t.itselfDetailAddress,i.next=41;break;case 20:if(!t.isSG){i.next=27;break}t.itselfProvinceId="1",t.itselfCityId="1",t.itselfDistrictId="1",t.itselfFullAddress=t.itselfDetailAddress,i.next=41;break;case 27:return t.provinceList.forEach((function(e){e.ProvinceId===t.itselfProvinceId&&(t.addressData["province_text"]=e.Province)})),t.cityList.forEach((function(e){e.CityId===t.itselfCityId&&(t.addressData["city_text"]=e.City)})),t.distinctList.forEach((function(e){e.DistrictId===t.itselfDistrictId&&(t.addressData["distinct_text"]=e.District,t.addressData["post_code"]=e.DistrictId)})),t.itselfFullAddress=t.itselfDetailAddress+" "+(t.addressData.province_text.split("/")[1]?t.addressData.province_text.split("/")[1].trim():t.addressData.province_text)+" "+(t.addressData.city_text.split("/")[1]?t.addressData.city_text.split("/")[1].trim():t.addressData.city_text)+" "+(t.addressData.distinct_text.split("/")[1]?t.addressData.distinct_text.split("/")[1].trim():t.addressData.distinct_text),t.flagAbroad||(t.shopeeAddressVisible=!0),i.prev=32,i.next=35,t.getShopeeAddress("0","sProvinceList","sProvince");case 35:return i.next=37,t.handlerChange4();case 37:i.next=41;break;case 39:i.prev=39,i.t0=i["catch"](32);case 41:if(s["warehouseName"]=t.itselfWarehouseName,s["address"]["province_id"]="TW"==t.itselfCountry&&"tw"==t.itselfProvinceId?1:t.itselfProvinceId.replace("R",""),s["address"]["province_text"]=t.itselfProvinceText||t.addressData.province_text,s["address"]["city_id"]="TW"==t.itselfCountry&&"tw"==t.itselfProvinceId?1:t.itselfCityId.replace("R",""),s["address"]["city_text"]=t.itselfCityText||t.addressData.city_text,s["address"]["distinct_id"]="TW"==t.itselfCountry&&"tw"==t.itselfProvinceId?1:t.itselfDistrictId.replace("R",""),s["address"]["distinct_text"]=t.itselfDistinctText||t.addressData.distinct_text,s["address"]["detail_address"]=t.itselfDetailAddress,s["address"]["full_address"]=t.itselfFullAddress,s["address"]["receiving_name"]=t.itselfReceivingName,s["address"]["receiving_tel"]=t.itselfReceivingTel,s["address"]["type"]=t.flag4?0:3,t.flag4||t.isSG){i.next=56;break}return t.abroadAddressParams=s,i.abrupt("return");case 56:if(!t.flag4&&!t.isSG){i.next=64;break}i.t1=e,i.next=1===i.t1?60:2===i.t1?62:64;break;case 60:return t.adduserStore(s),i.abrupt("break",64);case 62:return t.updateItselfData(s),i.abrupt("break",64);case 64:case"end":return i.stop()}}),i,null,[[32,39]])}))))},adduserStore:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e["id"]=0,e["address"]["country"]=t.itselfCountry,e["address"]["warehouseId"]=t.itselfWarehouseId,t.isSG?e["address"]["post_code"]=t.itselfPostCode:"MY"==t.itselfCountry||"PH"==t.itselfCountry?e["address"]["post_code"]=t.sPDistinctInput:e["address"]["post_code"]=t.flag4?0:t.addressData["post_code"],"TW"==t.itselfCountry&&(e["address"]["shopee_map_id"]=t.itselfCityId),a.next=7,t.AddressSet.adduserStore(e);case 7:if(i=a.sent,200!==i.code){a.next=17;break}return a.next=11,t.$appConfig.updateWarehouseInfo();case 11:t.$message.success("添加自有仓库成功"),t.getUserWarehouse(),t.itselfAddressVisible=!1,t.itselfUpdateType="",a.next=18;break;case 17:t.$message.error(i.data);case 18:case"end":return a.stop()}}),a)})))()},homeAddress:function(){var e=this;this.handleClose1(),this.itselfAddressVisible=!0,this.flag3=!0,this.$nextTick((function(){e.$refs.addressModel.init()}))},oversearAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.itselfAddressVisible=!0,e.flag3=!0,e.flag5=!1,e.handleClose1(),t.next=6,e.handlerChange3();case 6:case"end":return t.stop()}}),t)})))()},getLazadaDetailAddress:function(e,t,a){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,i.$BaseUtilService.getLazadaDetailAddress(e,i.itselfCountry);case 2:r=s.sent,i[t]=r,i["itself"+a]=i.flag5?i["itself"+a]:i[t][0][a];case 5:case"end":return s.stop()}}),s)})))()},xzyAllIndex:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.AddressSet.xzyAllIndex();case 2:a=t.sent,200===a.code?e.warehouseList=a.data:e.$message.error(a.data);case 4:case"end":return t.stop()}}),t)})))()},bindMallName:function(e){var t=[];return e.forEach((function(e){var a=e.mall_alias_name?e.mall_alias_name:e.platform_mall_name;t.push(a)})),t.toString()},xzyIndex:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,r,n,l,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e||[0,3],s=0;case 2:if(!(s<i.length)){a.next=11;break}return r=i[s],a.next=6,t.AddressSet.xzyIndex(r);case 6:n=a.sent,200===n.code?(l=n,0===r?t.isHomeApplyAddress=(null===(o=l.data)||void 0===o?void 0:o.length)>0:t.isOverseasApplyAddress=(null===(c=l.data)||void 0===c?void 0:c.length)>0,l.data.length&&(0===r&&t.flag4||0!==r&&!t.flag4)&&(t.warehouseData=l.data||"",t.sysWarehouseId=l.data[0].id,t.warehouseAddress=l.data[0].full_address,t.wareHouseTel=l.data[0].receiving_tel)):t.$message.error(n.data);case 8:s++,a.next=2;break;case 11:case"end":return a.stop()}}),a)})))()},getUserWarehouse:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,t.next=3,e.AddressSet.getUserWarehouse();case 3:a=t.sent,200===a.code?(e.tableDataAll=a.data,e.tableDataAll.map((function(t){t.countrys?t.sites=e.$filters.chineseSite(t.countrys):t.sites="",t.is_use_own_phone="1"===t.is_use_own_phone})),e.flag4?e.tableData=e.tableDataAll.filter((function(e){return 0===e.type})):e.tableData=e.tableDataAll.filter((function(e){return 2===e.type||3===e.type}))):e.$message.error(a.data),e.isShowLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},addAbroadAddress:function(){if(!this.sPDistinct&&!this.sCity&&!this.sStreet)return this.$message.warning("请先进行shopee地址设置");var e="MY"===this.itselfCountry?this.sCity:"PH"===this.itselfCountry?this.sStreet:this.sPDistinct;switch(this.abroadAddressParams["address"]["shopee_map_id"]=e,this.shopeeAddressVisible=!1,this.itselfUpdateType){case 1:this.adduserStore(this.abroadAddressParams);break;case 2:this.updateItselfData(this.abroadAddressParams);break}},getShopeeAddress:function(e,t,a){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var r,n,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=i.$filters.sitePlatform(i.itselfCountry),s.next=3,i.$commodityService.getShopeeAddress(r,"1",e);case 3:n=s.sent,l=i.isJsonString(n),i[t]=l,i[a]=i[t][0]?i[t][0].id:"";case 7:case"end":return s.stop()}}),s)})))()},handlerChange4:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getShopeeAddress(e.sProvince,"sCityList","sCity");case 2:return t.next=4,e.handlerChange5();case 4:case"end":return t.stop()}}),t)})))()},handlerChange5:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getShopeeAddress(e.sCity,"sDistinctList","sPDistinct");case 2:return t.next=4,e.handlerChange6();case 4:case"end":return t.stop()}}),t)})))()},handlerChange6:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("PH"!==e.itselfCountry){t.next=3;break}return t.next=3,e.getShopeeAddress(e.sPDistinct,"sStreetList","sStreet");case 3:case"end":return t.stop()}}),t)})))()},isJsonString:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}},changeMallList:function(e){this.mallList=e},handleClose1:function(){this.itselfWarehouseName="",this.itselfCountry="TH",this.itselfProvinceId="",this.itselfProvinceText="",this.itselfCityId="",this.itselfCityText="",this.itselfDistrictId="",this.itselfDistinctText="",this.itselfDetailAddress="",this.itselfFullAddress="",this.itselfReceivingName="",this.itselfReceivingTel="",this.itselfWarehouseId=0,this.itselfShopeeMapId="",this.isSG=!1,this.itselfPostCode=""},handleClose2:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.flag4?[0]:[3],t.next=3,e.xzyIndex(a);case 3:return t.next=5,e.getUserWarehouse();case 5:e.receivingName="",e.changeIndex++,e.$refs.bindMallDataRef.clearSelection();case 8:case"end":return t.stop()}}),t)})))()},handlerChange1:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getLazadaDetailAddress(e.itselfProvinceId,"cityList","CityId");case 2:return t.next=4,e.handlerChange2();case 4:case"end":return t.stop()}}),t)})))()},handlerChange2:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getLazadaDetailAddress(e.itselfCityId,"distinctList","DistrictId");case 2:case"end":return t.stop()}}),t)})))()},handlerChange3:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.flag4){t.next=22;break}if("SG"!==e.itselfCountry){t.next=6;break}return e.isSG=!0,t.abrupt("return");case 6:e.isSG=!1;case 7:return t.prev=7,t.next=10,e.getLazadaDetailAddress("","provinceList","ProvinceId");case 10:return t.next=12,e.handlerChange1();case 12:t.next=22;break;case 14:return t.prev=14,t.t0=t["catch"](7),e.$message("没有该站点的信息，已为您重新选择"),e.itselfCountry="TH",t.next=20,e.getLazadaDetailAddress("","provinceList","ProvinceId");case 20:return t.next=22,e.handlerChange1();case 22:case"end":return t.stop()}}),t,null,[[7,14]])})))()},sendData:function(e){this.itselfProvinceId=e.province_id,this.itselfProvinceText=e.province_text,this.itselfCityId=e.city_id,this.itselfCityText=e.city_text,this.itselfDistrictId=e.distinct_id,this.itselfDistinctText=e.distinct_text},handleSelectionChange:function(e){this.multipleSelection=e},getRowKey:function(e){return e.sysMallId},searchInputMall:function(){var e=this;this.searchMallSetTime&&clearTimeout(this.searchMallSetTime),this.searchMallSetTime=null,this.searchMallSetTime=setTimeout((function(){e.$refs.bindMallDataRef.clearFilter(),e.mallTableShow=!1,e.$nextTick((function(){e.mallTableShow=!0}))}),500)},getBuyersTableShow:function(e,t,a){var i,s,r=!0;this.searchMall&&(r=(null===(i=t.mallAliasName)||void 0===i?void 0:i.includes(this.searchMall))||(null===(s=t.platformMallName)||void 0===s?void 0:s.includes(this.searchMall)));return r}}},m=h,v=(a("d22c"),a("cba8")),g=Object(v["a"])(m,i,s,!1,null,"888f7d44",null);t["default"]=g.exports},"66d3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"收货省："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(t){e.flag=!1}},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.provinceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.RegionName||e.division_name,value:e.RegionId||e.id}})})),1)],1),a("el-form-item",{attrs:{label:"收货市："}},[a("el-select",{attrs:{disabled:!e.province,placeholder:"请选择",size:"mini"},on:{change:function(t){e.flag=!1}},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.cityList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.RegionName||e.division_name,value:e.RegionId||e.id}})})),1)],1),a("el-form-item",{attrs:{label:"收货区："}},[a("el-select",{attrs:{disabled:!e.city,placeholder:"请选择",size:"mini"},on:{change:function(t){e.flag=!1}},model:{value:e.distinct,callback:function(t){e.distinct=t},expression:"distinct"}},e._l(e.distinctList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.RegionName||e.division_name,value:e.RegionId||e.id}})})),1)],1)],1)],1)},s=[],r=a("291b"),n=(a("e186"),a("8798"),a("88a8"),a("2c28"),a("d5a2"),{name:"AddressModel",props:{isInit:{type:Boolean,default:!1},country:{type:String,default:""}},data:function(){return{provinceList:[],cityList:[],distinctList:[],province:"",city:"",distinct:"",provinceName:"",cityName:"",distinctName:"",addressData:{},flag:!1}},watch:{country:{handler:function(e,t){this.getPddAddressModel("0","provinceList","province")}},province:{handler:function(e,t){var a=this;this.getPddAddressModel(this.province,"cityList","city"),this.provinceList.forEach((function(e){e.RegionId!==a.province&&e.id!==a.province||(a.addressData["province_id"]=e.RegionId||e.id.toString(),a.addressData["province_text"]=e.RegionName||e.division_name)})),this.sendData()},deep:!0},city:{handler:function(e,t){var a=this;this.getPddAddressModel(this.city,"distinctList","distinct"),this.cityList.forEach((function(e){e.RegionId!==a.city&&e.id!==a.city||(a.addressData["city_id"]=e.RegionId||e.id.toString(),a.addressData["city_text"]=e.RegionName||e.division_name)})),this.sendData()},deep:!0},distinct:{handler:function(e,t){var a=this;this.distinctList.forEach((function(e){e.RegionId!==a.distinct&&e.id!==a.distinct||(a.addressData["distinct_id"]=e.RegionId||e.id.toString(),a.addressData["distinct_text"]=e.RegionName||e.division_name)})),this.sendData()},deep:!0}},mounted:function(){this.isInit&&this.init()},methods:{update:function(e,t,a){var i=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i.flag=!0,s.next=3,i.getPddAddressModel("0","provinceList","province");case 3:return i.province=e.toString(),s.next=6,i.getPddAddressModel(i.province,"cityList","city");case 6:return i.city=t.toString(),s.next=9,i.getPddAddressModel(i.city,"distinctList","distinctList");case 9:i.distinct=a.toString(),i.sendData();case 11:case"end":return s.stop()}}),s)})))()},init:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.flag=!1,t.next=3,e.getPddAddressModel("0","provinceList","province");case 3:e.sendData();case 4:case"end":return t.stop()}}),t)})))()},getPddAddressModel:function(e,t,a){var i=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var r,n,l,o,c,d;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=e,"TW"!==i.country){s.next=22;break}return s.next=4,i.$BaseUtilService.getPddAddressModel(e);case 4:if(n=s.sent,l=[],"tw"===e&&(r="0"),"0"!==e){s.next=12;break}o={RegionName:"台湾",RegionId:"tw"},l=[o],s.next=18;break;case 12:return c=i.$filters.sitePlatform("TW"),s.next=15,i.$commodityService.getShopeeAddress(c,"1",r);case 15:l=s.sent,l=l&&JSON.parse(l)||[],l.forEach((function(e){e["RegionId"]=e.id}));case 18:i[t]=n.concat(l),i[a]=i.flag?i[a]:i[t][0]?i[t][0].RegionId:"",s.next=27;break;case 22:return s.next=24,i.$BaseUtilService.getPddAddressModel(e);case 24:d=s.sent,i[t]=d,i[a]=i.flag?i[a]:i[t][0].RegionId;case 27:case"end":return s.stop()}}),s)})))()},sendData:function(){this.$emit("sendData",this.addressData)}}}),l=n,o=(a("b484"),a("cba8")),c=Object(o["a"])(l,i,s,!1,null,"1fab177e",null);t["a"]=c.exports},"6dc6":function(e,t,a){},"73a9":function(e,t,a){},7558:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"storeChooseUL"},[a("li",[a("span",{style:{width:e.spanWidth}},[e._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},on:{change:e.getsite},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",{style:{width:e.spanWidth}},[e._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.groupIdList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})}))],2)],1),e.showMall?a("li",[a("span",{style:{width:e.spanWidth}},[e._v("店铺名称：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.siteList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}})}))],2)],1):e._e()])])},s=[],r=a("291b"),n=(a("e186"),a("8798"),a("88a8"),a("7a95"),a("2c28"),a("77de"),a("876e"),a("7646")),l={name:"Storechoosemall",props:{showMall:{type:Boolean,default:!1},spanWidth:{type:String,default:"80px"},isAll:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],countries:this.$filters.countries_option,mallListAPIInstance:new n["a"](this)}},watch:{countryVal:{handler:function(e,t){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(e,t){var a=this;if(this.isAllowSet2){this.isAllowSet2=!1;var i=t.indexOf("")>-1,s=e.indexOf("")>-1;i!==s?s?(this.groupId=[""],this.groupIdList.forEach((function(e){a.groupId.push(e.id)}))):this.groupId=[]:s?this.groupId=e.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(e,t){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var i=t.indexOf("")>-1,s=e.indexOf("")>-1;i!==s?s?(this.site=[""],this.siteList.forEach((function(e){a.site.push(e.platform_mall_id)}))):this.site=[]:s?this.site=e.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length&&this.site.unshift(""),setTimeout((function(){a.changeMallList(),a.isAllowSet1=!0}))}},deep:!0}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{getsite:function(e){var t=e;this.$emit("getSite",t)},changeSelect:function(e){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},ddMallGoodsGetMallList:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.site=[],a=t.countryVal,i=t.groupId.indexOf("")>-1&&t.groupId.slice(1).toString()||t.groupId.toString(),s={country:a,mallGroupIds:i},e.next=6,t.mallListAPIInstance.ddMallGoodsGetMallList(s);case 6:r=e.sent,200===r.code?(t.siteList=r.data,0===t.groupIdList.length&&(t.groupId=[""],t.siteList.forEach((function(e){var a=t.groupIdList.findIndex((function(t){return t.id===e.group_id}));e.group_name&&a<0&&(t.groupIdList.push({group_name:e.group_name,id:e.group_id}),t.groupId.push(e.group_id))}))),setTimeout((function(){t.isAllowSet2=!0,t.isAllowSet1=!0,t.site=[""]}),10)):t.$message.error("获取分组、店铺列表失败");case 8:case"end":return e.stop()}}),e)})))()},changeMallList:function(){var e=this,t=[];this.site.forEach((function(a){if(a){var i=e.siteList.filter((function(e){return e.platform_mall_id===a}));t.push(i[0])}})),this.source?(t["country"]=this.countryVal,this.$emit("changeMallList",{mallList:t,source:this.source})):(t["country"]=this.countryVal,this.$emit("changeMallList",t))}}},o=l,c=(a("3e66"),a("cba8")),d=Object(c["a"])(o,i,s,!1,null,null,null);t["a"]=d.exports},"7b1b":function(e,t,a){},b484:function(e,t,a){"use strict";a("73a9")},d22c:function(e,t,a){"use strict";a("7b1b")}}]);