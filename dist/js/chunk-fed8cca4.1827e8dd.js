(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fed8cca4"],{"34e1":function(t,e,a){},"4cf2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-row"},[a("header",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"关键词采集",name:"keyPage"}},[a("div",{staticClass:"keyword-container"},[a("div",{staticClass:"keyword-banner-bar"},t._l(t.keyworBar,(function(e){return a("div",{key:e.value,staticClass:"barChilren",class:{active:t.currentKeywordPlatform===e.value},on:{click:function(a){return t.switchPlatform(e)}}},[t._v(t._s(e.label))])})),0),a("div",{staticClass:"keyword-banner-content"},[a("ul",{staticClass:"item con-sub-1"},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowPdd,expression:"isShowPdd"}]},[a("el-radio",{attrs:{label:1},model:{value:t.commonAttr.pddRadio,callback:function(e){t.$set(t.commonAttr,"pddRadio",e)},expression:"commonAttr.pddRadio"}},[t._v("云端采集(无需账号)")])],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowPage,expression:"isShowPage"}]},[a("p",[t._v("开始页码：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.StartPage,callback:function(e){t.$set(t.commonAttr,"StartPage",e)},expression:"commonAttr.StartPage"}}),a("p",[t._v("总页码：")]),a("el-input",{staticStyle:{width:"85px"},attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.EndPage,callback:function(e){t.$set(t.commonAttr,"EndPage",e)},expression:"commonAttr.EndPage"}}),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.isShowPageSize20||t.isShowPageSize50,expression:"isShowPageSize20 || isShowPageSize50"}],attrs:{placement:"top"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPageSize20,expression:"isShowPageSize20"}],staticClass:"tip",attrs:{slot:"content"},slot:"content"},[t._v("20条/页")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPageSize50,expression:"isShowPageSize50"}],staticClass:"tip",attrs:{slot:"content"},slot:"content"},[t._v("50条/页,最多50页")]),a("div",{staticClass:"size-icon"},[a("i",{staticClass:"el-icon-question"})])])],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowTaobao,expression:"isShowTaobao"}]},[a("p",[t._v("排序方式：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},model:{value:t.commonAttr.shopeeSortTypeVal,callback:function(e){t.$set(t.commonAttr,"shopeeSortTypeVal",e)},expression:"commonAttr.shopeeSortTypeVal"}},t._l(t.commonAttr.shopeeSortType,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowTaobao,expression:"isShowTaobao"}]},[a("p",[t._v("单词最大：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},model:{value:t.commonAttr.wordLimit,callback:function(e){t.$set(t.commonAttr,"wordLimit",e)},expression:"commonAttr.wordLimit"}})],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowSales,expression:"isShowSales"}]},[a("p",[t._v("销量区间：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.StartSales,callback:function(e){t.$set(t.commonAttr,"StartSales",e)},expression:"commonAttr.StartSales"}}),a("span",{staticClass:"slot"},[t._v("-")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.EndSales,callback:function(e){t.$set(t.commonAttr,"EndSales",e)},expression:"commonAttr.EndSales"}})],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowPrice,expression:"isShowPrice"}]},[a("p",[t._v("价格区间：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.StartPrice,callback:function(e){t.$set(t.commonAttr,"StartPrice",e)},expression:"commonAttr.StartPrice"}}),a("span",{staticClass:"slot"},[t._v("-")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.EndPrice,callback:function(e){t.$set(t.commonAttr,"EndPrice",e)},expression:"commonAttr.EndPrice"}})],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowShopeeSite,expression:"isShowShopeeSite"}],staticClass:"li-shopee"},[a("p",[t._v("站点：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},on:{change:t.getShopeeGoodsPlace},model:{value:t.commonAttr.shopeeSiteCode,callback:function(e){t.$set(t.commonAttr,"shopeeSiteCode",e)},expression:"commonAttr.shopeeSiteCode"}},t._l(t.commonAttr.shopeeSite,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1),a("p",{staticClass:"li-shopee-spec"},[t._v("排序方式：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},model:{value:t.commonAttr.shopeeSortTypeVal,callback:function(e){t.$set(t.commonAttr,"shopeeSortTypeVal",e)},expression:"commonAttr.shopeeSortTypeVal"}},t._l(t.commonAttr.shopeeSortType,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowShopeeSite,expression:"isShowShopeeSite"}],staticClass:"li-shopee"},[a("p",[t._v("出货地点：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini",multiple:"","collapse-tags":""},on:{change:t.selectShopeePlaceValEvent},model:{value:t.commonAttr.shopeePlaceVal,callback:function(e){t.$set(t.commonAttr,"shopeePlaceVal",e)},expression:"commonAttr.shopeePlaceVal"}},[a("el-checkbox",{attrs:{label:"全部"},on:{change:t.selectShopeeAllEvent},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}}),t._l(t.commonAttr.shopeePlaceOrigin,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2),a("el-checkbox",{staticClass:"li-shopee-spec",attrs:{disabled:t.buttonStatus.start,label:"全部"},model:{value:t.commonAttr.isShopeeOffice,callback:function(e){t.$set(t.commonAttr,"isShopeeOffice",e)},expression:"commonAttr.isShopeeOffice"}},[t._v("过滤虾皮官方店铺商品")])],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowLazadaSite,expression:"isShowLazadaSite"}]},[a("p",[t._v("站点：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},on:{change:t.getLazadaGoodsPlace},model:{value:t.commonAttr.lazadaSiteCode,callback:function(e){t.$set(t.commonAttr,"lazadaSiteCode",e)},expression:"commonAttr.lazadaSiteCode"}},t._l(t.commonAttr.lazadaSite,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowLazadaSite,expression:"isShowLazadaSite"}]},t._l(t.commonAttr.lazadaPlaceOrigin,(function(e,r,i){return a("div",{key:i},[a("p",{staticStyle:{"min-width":"128px"}},[t._v(t._s(r))]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini",multiple:"","collapse-tags":""},on:{change:function(e){return t.selectLazadaPlaceValEvent(r,i)}},model:{value:t.commonAttr["lazadaPlaceVal"+i],callback:function(e){t.$set(t.commonAttr,"lazadaPlaceVal"+i,e)},expression:"commonAttr[`lazadaPlaceVal${index}`]"}},[a("el-checkbox",{attrs:{label:"全部"},on:{change:function(e){return t.selectLazadaAllEvent(r,i)}},model:{value:t.isSelectAll2[i],callback:function(e){t.$set(t.isSelectAll2,i,e)},expression:"isSelectAll2[index]"}}),t._l(e,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1)})),0),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowSort,expression:"isShowSort"}]},[a("p",[t._v("排序方式：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},model:{value:t.commonAttr.alibabaSortTypeVal,callback:function(e){t.$set(t.commonAttr,"alibabaSortTypeVal",e)},expression:"commonAttr.alibabaSortTypeVal"}},t._l(t.commonAttr.alibabaSortType,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowCreateAt,expression:"isShowCreateAt"}]},[a("p",[t._v("创建时间：")]),a("el-date-picker",{attrs:{disabled:t.buttonStatus.start,type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.commonAttr.pickerOptions,size:"mini"},model:{value:t.commonAttr.value2,callback:function(e){t.$set(t.commonAttr,"value2",e)},expression:"commonAttr.value2"}})],1)]),a("div",{staticClass:"item con-sub-3"},[a("div",{staticClass:"size-icon",style:t.isShowKeyTip?"margin-top: 3px;":"margin-top: 5px;"},[t._v("关键词(一行一个) "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.isShowKeyTip,expression:"isShowKeyTip"}],attrs:{placement:"top"}},[a("div",{staticClass:"tip",attrs:{slot:"content"},slot:"content"},[t._v("采集请使用对应的站点语言搜索")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),a("div",{staticClass:"item con-sub-3"},[a("p",{staticClass:"text"},[t._v("过滤关键词(一行一个)")]),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.commonAttr.keyFilter,callback:function(e){t.$set(t.commonAttr,"keyFilter",e)},expression:"commonAttr.keyFilter"}})],1),a("ul",{staticClass:"item con-sub-2"},[a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.StartCollection}},[t._v("开始采集")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.flag=!0}}},[t._v("取消采集")])],1),a("li",{staticClass:"li-item-2"},[a("p",[t._v("起：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("p",[t._v("止：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.saveGoodsInfo}},[t._v("收藏商品")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.editorUp}},[t._v("编辑上新")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.plugVisible=!0}}},[t._v("插件采集")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.deleteAll}},[t._v("清理全部")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:function(e){return t.batchTableDelete(t.goodsList,t.multipleSelection)}}},[t._v("批量删除")])],1)]),a("div",{staticClass:"item"},[a("p",{staticClass:"text"},[t._v("执行日志")]),a("div",{staticClass:"con-sub-5"},[a("div",{staticClass:"con-sub-5-log",domProps:{innerHTML:t._s(t.consoleMsg)}})])])])])]),a("el-tab-pane",{attrs:{label:"商品链接采集",name:"linkPage"}},[a("div",{staticClass:"link-container"},[a("div",{staticClass:"item linkcon-sub-1"},[a("p",{staticClass:"text"},[t._v("商品链接: 一行一个")]),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.linkKey,callback:function(e){t.linkKey=e},expression:"linkKey"}})],1),a("ul",{staticClass:"item linkcon-sub-2"},[a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.StartCollection}},[t._v("开始采集")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.flag=!0}}},[t._v("取消采集")])],1),a("li",{staticClass:"li-item-2"},[a("p",[t._v("起：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("p",[t._v("止：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.saveGoodsInfo}},[t._v("收藏商品")]),a("el-button",{attrs:{disabled:t.buttonStatus.start,type:"primary",size:"mini"},on:{click:t.editorUp}},[t._v("编辑上新")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.plugVisible=!0}}},[t._v("插件采集")]),a("el-button",{attrs:{type:"primary",disabled:t.buttonStatus.start,size:"mini"},on:{click:t.deleteAll}},[t._v("清理全部")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.downloadTemplate}},[t._v(" 下载模板 ")]),a("el-upload",{ref:"importRef",staticStyle:{"margin-left":"10px"},attrs:{disabled:t.buttonStatus.start,accept:".xls,.xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t.importTemplate,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{staticStyle:{width:"96px"},attrs:{disabled:t.buttonStatus.start,size:"mini",type:"primary"}},[t._v("链接导入")])],1)],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:function(e){return t.batchTableDelete(t.goodsList,t.multipleSelection)}}},[t._v("批量删除")])],1)]),a("div",{staticClass:"item"},[a("p",{staticClass:"text"},[t._v("执行日志")]),a("div",{staticClass:"linkcon-sub-4"},[a("div",{staticClass:"linkcon-sub-4-log",domProps:{innerHTML:t._s(t.consoleMsg)}})])])])]),a("el-tab-pane",{attrs:{label:"整店采集",name:"entriresShopPage"}},[a("div",{staticClass:"entires-container"},[a("ul",{staticClass:"item con-sub-1"},[a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowSales,expression:"isShowSales"}]},[a("p",[t._v("销量区间：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.StartSales,callback:function(e){t.$set(t.commonAttr,"StartSales",e)},expression:"commonAttr.StartSales"}}),a("span",{staticClass:"slot"},[t._v("-")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.EndSales,callback:function(e){t.$set(t.commonAttr,"EndSales",e)},expression:"commonAttr.EndSales"}})],1),a("li",{directives:[{name:"show",rawName:"v-show",value:t.isShowPrice,expression:"isShowPrice"}]},[a("p",[t._v("价格区间：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.StartPrice,callback:function(e){t.$set(t.commonAttr,"StartPrice",e)},expression:"commonAttr.StartPrice"}}),a("span",{staticClass:"slot"},[t._v("-")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.EndPrice,callback:function(e){t.$set(t.commonAttr,"EndPrice",e)},expression:"commonAttr.EndPrice"}})],1)]),a("div",{staticClass:"item con-sub-3"},[a("div",{staticClass:"size-icon",staticStyle:{"margin-top":"3px"}},[t._v("店铺链接(一行一个) "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v("目前仅支持淘宝/Shopee/Lazada/1688/拼多多整店采集"),a("br"),a("br"),t._v("1688店铺链接：进入1688店铺->点击首页->复制链接"),a("br"),a("br"),t._v("店铺链接：进入shopee店铺->点击所有商品(AllProduct)")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.mallLinkKey,callback:function(e){t.mallLinkKey=e},expression:"mallLinkKey"}})],1),a("div",{staticClass:"item con-sub-3"},[a("p",{staticClass:"text"},[t._v("过滤违规词：一行一个")]),a("el-input",{attrs:{size:"mini",type:"textarea",rows:8,resize:"none"},model:{value:t.commonAttr.keyFilter,callback:function(e){t.$set(t.commonAttr,"keyFilter",e)},expression:"commonAttr.keyFilter"}})],1),a("ul",{staticClass:"item con-sub-2"},[a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.StartCollection}},[t._v("开始采集")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.flag=!0}}},[t._v("取消采集")])],1),a("li",{staticClass:"li-item-2"},[a("p",[t._v("起：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("p",[t._v("止：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.saveGoodsInfo}},[t._v("收藏商品")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.editorUp}},[t._v("编辑上新")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.plugVisible=!0}}},[t._v("插件采集")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.deleteAll}},[t._v("清理全部")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:function(e){return t.batchTableDelete(t.goodsList,t.multipleSelection)}}},[t._v("批量删除")])],1)]),a("div",{staticClass:"item"},[a("p",{staticClass:"text"},[t._v("执行日志")]),a("div",{staticClass:"con-sub-5"},[a("div",{staticClass:"con-sub-5-log",domProps:{innerHTML:t._s(t.consoleMsg)}})])])])]),a("el-tab-pane",{attrs:{label:"图搜同款",name:"picToPicPage"}},[a("div",{staticClass:"picture-container"},[a("ul",{staticClass:"item con-sub-1"},[a("li",[a("p",[t._v("价格：")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.StartPrice,callback:function(e){t.$set(t.commonAttr,"StartPrice",e)},expression:"commonAttr.StartPrice"}}),a("span",{staticClass:"slot"},[t._v("-")]),a("el-input",{attrs:{disabled:t.buttonStatus.start,size:"mini"},model:{value:t.commonAttr.EndPrice,callback:function(e){t.$set(t.commonAttr,"EndPrice",e)},expression:"commonAttr.EndPrice"}})],1),a("li",[a("p",[t._v("平台：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini"},model:{value:t.commonAttr.pictureSearchPlatformId,callback:function(e){t.$set(t.commonAttr,"pictureSearchPlatformId",e)},expression:"commonAttr.pictureSearchPlatformId"}},t._l(t.pictureSearchOrigin,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1),a("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:t.buttonStatus.start,action:"#","show-file-list":!1,"on-error":t.imgSaveToUrl}},[a("el-button",{staticStyle:{"margin-left":"25px"},attrs:{disabled:t.buttonStatus.start,type:"primary",size:"mini"}},[t._v("选择图片")])],1)],1)]),a("div",{staticClass:"item con-sub-3"},[t.base64Str?a("img",{staticClass:"avatar",staticStyle:{width:"200px",height:"156px"},attrs:{src:t.base64Str}}):t._e()]),a("ul",{staticClass:"item con-sub-2"},[a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.StartCollection}},[t._v("开始采集")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.flag=!0}}},[t._v("取消采集")])],1),a("li",{staticClass:"li-item-2"},[a("p",[t._v("起：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("p",[t._v("止：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.saveGoodsInfo}},[t._v("收藏商品")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.editorUp}},[t._v("编辑上新")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.plugVisible=!0}}},[t._v("插件采集")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.deleteAll}},[t._v("清理全部")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:function(e){return t.batchTableDelete(t.goodsList,t.multipleSelection)}}},[t._v("批量删除")])],1)]),a("div",{staticClass:"item"},[a("p",{staticClass:"text"},[t._v("执行日志")]),a("div",{staticClass:"con-sub-5"},[a("div",{staticClass:"con-sub-5-log",domProps:{innerHTML:t._s(t.consoleMsg)}})])])])]),a("el-tab-pane",{attrs:{label:"天猫淘宝海外平台采集",name:"taobaoAbroadPage"}},[a("div",{staticClass:"TMTB-container"},[a("ul",{staticClass:"item con-sub-1"},[a("li",[a("p",[t._v("选择账号：")]),a("el-select",{attrs:{disabled:t.buttonStatus.start,placeholder:"",size:"mini",multiple:"","collapse-tags":""},on:{change:t.selectTaobaoAccountEventEvent},model:{value:t.TaobaoAbroadAccountId,callback:function(e){t.TaobaoAbroadAccountId=e},expression:"TaobaoAbroadAccountId"}},[a("el-checkbox",{attrs:{label:"全部"},on:{change:t.selectTaobaoAccountEventAllEvent},model:{value:t.isSelectAllTaobaoAccount,callback:function(e){t.isSelectAllTaobaoAccount=e},expression:"isSelectAllTaobaoAccount"}}),t._l(t.TaobaoAbroadAccount,(function(t,e){return a("el-option",{key:e,attrs:{label:t.account_alias_name,value:t.id}})}))],2)],1),a("li",[a("p",[t._v("起始时间：")]),a("el-date-picker",{attrs:{disabled:t.buttonStatus.start,type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp",size:"mini"},model:{value:t.taobaoTimeAt,callback:function(e){t.taobaoTimeAt=e},expression:"taobaoTimeAt"}})],1),a("li",[a("a",{attrs:{href:"#"},on:{click:function(e){return t.$BaseUtilService.openUrl("https:distributor.taobao.global/")}}},[t._v("淘宝天猫海外商品铺货")])])]),a("ul",{staticClass:"item con-sub-2"},[a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.StartCollection}},[t._v("开始采集")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.flag=!0}}},[t._v("取消采集")])],1),a("li",{staticClass:"li-item-2"},[a("p",[t._v("起：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("p",[t._v("止：")]),a("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.saveGoodsInfo}},[t._v("收藏商品")]),a("el-button",{attrs:{type:"primary",disabled:t.buttonStatus.start,size:"mini"},on:{click:t.editorUp}},[t._v("编辑上新")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.plugVisible=!0}}},[t._v("插件采集")]),a("el-button",{attrs:{type:"primary",disabled:t.buttonStatus.start,size:"mini"},on:{click:t.deleteAll}},[t._v("清理全部")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.buttonStatus.start},on:{click:function(e){return t.batchTableDelete(t.goodsList,t.multipleSelection)}}},[t._v("批量删除")])],1)]),a("div",{staticClass:"item"},[a("p",{staticClass:"text"},[t._v("执行日志")]),a("div",{staticClass:"con-sub-5"},[a("div",{staticClass:"con-sub-5-log",domProps:{innerHTML:t._s(t.consoleMsg)}})])])])]),a("el-tab-pane",{attrs:{label:"采集设置",name:"sixth"}},[a("div",{staticClass:"collection-settings"},[a("ul",{staticClass:"item left"},[a("li",{staticClass:"text"},[t._v("采集设置")]),a("li",[a("el-checkbox",{attrs:{disabled:"",label:"启动买手号采集"}}),a("p",{staticClass:"tip"},[t._v("（开启买手号，可提高收藏收藏率）")])],1),a("li",[a("el-checkbox",{attrs:{label:"过滤多余的SKU"},model:{value:t.IsDefaultFilterSkuCount,callback:function(e){t.IsDefaultFilterSkuCount=e},expression:"IsDefaultFilterSkuCount"}}),a("p",{staticClass:"tip"},[t._v("（勾选多余的SKU，删除所有sku图）")])],1),a("li",[a("el-checkbox",{attrs:{label:"规格图重复时，删除所有sku图"},model:{value:t.IsDeleteRepeatSkuImg,callback:function(e){t.IsDeleteRepeatSkuImg=e},expression:"IsDeleteRepeatSkuImg"}})],1),a("li",[a("el-checkbox",{attrs:{label:"启动lazada发货天数过滤商品"},model:{value:t.IsFilterLazadaDeliveryDay,callback:function(e){t.IsFilterLazadaDeliveryDay=e},expression:"IsFilterLazadaDeliveryDay"}}),a("p",{staticClass:"tip2"},[t._v("lazada发货天数：")]),a("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:t.MinLazadaDeliveryDay,callback:function(e){t.MinLazadaDeliveryDay=e},expression:"MinLazadaDeliveryDay"}}),a("span",[t._v("--")]),a("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:t.MaxLazadaDeliveryDay,callback:function(e){t.MaxLazadaDeliveryDay=e},expression:"MaxLazadaDeliveryDay"}})],1),a("li",[a("el-checkbox",{attrs:{label:"启动虾皮发货天数过滤商品"},model:{value:t.IsFilterShopeeDeliveryDay,callback:function(e){t.IsFilterShopeeDeliveryDay=e},expression:"IsFilterShopeeDeliveryDay"}}),a("p",{staticClass:"tip2"},[t._v("虾皮发货天数：")]),a("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:t.MinShoppeDeliveryDay,callback:function(e){t.MinShoppeDeliveryDay=e},expression:"MinShoppeDeliveryDay"}}),a("span",[t._v("--")]),a("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:t.MaxShoppeDeliveryDay,callback:function(e){t.MaxShoppeDeliveryDay=e},expression:"MaxShoppeDeliveryDay"}})],1),a("li",[a("p",{staticClass:"tip"},[t._v("收藏时过滤掉不在此发货天数区间的商品")])]),a("li",[a("el-checkbox",{attrs:{label:"采集描述为空的数据"},model:{value:t.IsCollectDescriptionIsNull,callback:function(e){t.IsCollectDescriptionIsNull=e},expression:"IsCollectDescriptionIsNull "}})],1),a("li",[a("p",[t._v("收藏时过滤商品发货地址（仅Shopee可用）：")]),a("el-select",{attrs:{placeholder:"",size:"mini"},model:{value:t.GoodsDeliveryAddress,callback:function(e){t.GoodsDeliveryAddress=e},expression:"GoodsDeliveryAddress"}},t._l(t.GoodsDeliveryAddressList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1)]),a("ul",{staticClass:"item right"},[a("li",{staticClass:"text"},[t._v("翻译设置")]),a("li",[a("p",[t._v("翻译缓存时间：")]),a("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.commonAttr.cacheTime,callback:function(e){t.$set(t.commonAttr,"cacheTime",e)},expression:"commonAttr.cacheTime"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.clearTranslate}},[t._v("清 理")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.clearCache}},[t._v("清理缓存数据")])],1)])])])],1)],1),a("article",{directives:[{name:"show",rawName:"v-show",value:"sixth"!==t.activeName,expression:"activeName !== 'sixth'"}]},[a("div",{staticStyle:{color:"red","padding-bottom":"10px"}},[t._v("温馨提示：拼多多产品加载不出来，收藏或者组装数据慢，请切换本地IP")]),a("u-table",{ref:"plTable",attrs:{height:t.Height,"use-virtual":"","data-changes-scroll-top":!1,"header-cell-style":{backgroundColor:"#f5f7fa"},"big-data-checkbox":!0,border:!1},on:{"selection-change":t.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection"}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("u-table-column",{attrs:{align:"center",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.Image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.Image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.Image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1):t._e()]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"上家ID",prop:"GoodsId"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.GoodsId?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(r.GoodsId)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e(),a("span",[t._v(" "+t._s(r.GoodsId)+" ")])]}}])}),a("u-table-column",{attrs:{align:"center",label:"标题",prop:"Title",width:"500px",fit:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(r.Title))])]}}])}),a("u-table-column",{attrs:{align:"center",label:"类目",prop:"CategoryName"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(r.CategoryName))])]}}])}),a("u-table-column",{attrs:{align:"center",label:"价格",prop:"Price",sortable:""}}),a("u-table-column",{attrs:{align:"center",label:"销量",prop:"Sales",sortable:""}}),a("u-table-column",{attrs:{align:"center",label:"发货地",prop:"Location"}}),a("u-table-column",{attrs:{align:"center",label:"来源",prop:"Origin"}}),a("u-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.tableDelete(e.row,e.$index)}}},[t._v(" 删除 ")])]}}])}),a("u-table-column",{attrs:{align:"center",label:"操作结果",prop:"StatusName","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{style:r.color&&"color:"+r.color},[t._v(t._s(r.StatusName))])]}}])})],1)],1),t.plugVisible?a("el-dialog",{staticClass:"plug-dialog",attrs:{title:"插件采集",visible:t.plugVisible,width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.plugVisible=e}}},[a("p",[t._v("1：请先下载插件程序安装至浏览器，方可使用此功能"),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$BaseUtilService.openUrl("https://shopeeman.oss-cn-shenzhen.aliyuncs.com/files/shopeemanFiles/appFiles/20220106/2022010616473761d6aca9e310d.docx")}}},[t._v("下载教程")])],1),a("p",[t._v("2：由于推送地址端口号随时生成，重启软件后，请务必重新复制推送地址 "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$BaseUtilService.openUrl("https://shopeeppxia.oss-cn-shenzhen.aliyuncs.com/desktop/plugin/CollectPligin.zip")}}},[t._v("下载插件")])],1),a("el-form",{attrs:{"label-position":"right","label-width":"190px"}},[a("el-form-item",{attrs:{label:"拼多多关键词采集推送地址："}},[a("div",{staticClass:"item"},[a("span",[t._v(t._s(t.port)+"/api/pddGoodsKeyword")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.copy(t.port+"/api/pddGoodsKeyword")}}},[t._v("复 制")])],1)]),a("el-form-item",{attrs:{label:"拼多多详情采集推送地址："}},[a("div",{staticClass:"item"},[a("span",[t._v(t._s(t.port)+"/api/pddGoodsDetail")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.copy(t.port+"/api/pddGoodsDetail")}}},[t._v("复 制")])],1)]),a("el-form-item",{attrs:{label:"淘宝/天猫关键词采集推送地址："}},[a("div",{staticClass:"item"},[a("span",[t._v(t._s(t.port)+"/api/tbGoodsKeyword")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.copy(t.port+"/api/tbGoodsKeyword")}}},[t._v("复 制")])],1)]),a("el-form-item",{attrs:{label:"淘宝详情采集推送地址："}},[a("div",{staticClass:"item"},[a("span",[t._v(t._s(t.port)+"/api/tbGoodsDetail")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.copy(t.port+"/api/tbGoodsDetail")}}},[t._v("复 制")])],1)])],1)],1):t._e(),a("el-dialog",{attrs:{width:"1313px","close-on-click-modal":!1,top:"0.5vh",visible:t.isEditorVisible,modal:!1},on:{"update:visible":function(e){t.isEditorVisible=e}}},[a("template",{slot:"title"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticStyle:{"margin-right":"25px"}},[t._v("上新编辑")]),a("el-button",{attrs:{size:"mini",type:t.isNoFoldShow?"primary":""},nativeOn:{click:function(e){return e.stopPropagation(),t.setIsNoFoldShow.apply(null,arguments)}}},[t._v(" "+t._s(t.isNoFoldShow?"折叠":"展开")+" ")])],1)]),t.isEditorVisible?a("editor-on-new-goods",{ref:"editor_on_new_goods",attrs:{"mall-table":t.editorSelection}}):t._e()],2)],1)},i=[],o=a("2909"),n=a("1da1"),s=(a("96cf"),a("caad"),a("5b81"),a("b64b"),a("d81d"),a("159b"),a("99af"),a("3ca3"),a("ddb0"),a("7db0"),a("a434"),a("a9e3"),a("4e82"),a("c740"),a("b0c0"),a("d4ec")),l=a("bee2"),c=a("ade3"),u=(a("ac1f"),a("1276"),a("a15b"),a("5319"),a("498a"),a("4d63"),a("25f0"),a("fb6a"),a("0e0b")),d=function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"_this",null),this._this=e,this.platformId=null,this.commonAttr=null,this.keywordAttr=null,this.delayTime=1e3,this.GoodsData=null,this.errorCatchText=null}return Object(l["a"])(t,[{key:"_initKeyWord",value:function(t,e){this.platformId=t,this.commonAttr=e}},{key:"keywordSearch",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r,i,n,s,l,c,u,d,p,h,m,b,v,g,f,S,y,k=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GoodsData=null,this.GoodsData=[],a=this.commonAttr.StartPage-0,r=this.commonAttr.EndPage-0,i=this.commonAttr.StartPrice-0,n=this.commonAttr.EndPrice-0,s=this.commonAttr.shopeeSortTypeVal,l=s.split(",")[0],c=s.split(",")[1],u=this.commonAttr.shopeeSiteCode,d=this.commonAttr.shopeePlaceVal,p=this.commonAttr.lazadaSiteCode,h=this.commonAttr.lazadaPlaceVal0.concat(this.commonAttr.lazadaPlaceVal1),m=this.commonAttr.alibabaSortTypeVal,b={},b["Key"]=e,v=[],g=[];case 18:if(!a){t.next=85;break}if(!this._this.flag){t.next=21;break}return t.abrupt("break",85);case 21:t.t0=this.platformId,t.next=1===t.t0||1.2===t.t0?24:2===t.t0||3===t.t0?26:8===t.t0?30:9===t.t0?33:10===t.t0?39:11===t.t0?41:12===t.t0?49:13===t.t0?51:52;break;case 24:return b["Page"]=a,t.abrupt("break",52);case 26:return b["Page"]=a,b["StartPrice"]=i,b["EndPrice"]=n,t.abrupt("break",52);case 30:return b["Page"]=a,b["SortType"]=m,t.abrupt("break",52);case 33:return b["Page"]=a,b["Site"]=p.toLowerCase(),b["StartPrice"]=i,b["EndPrice"]=n,b["Location"]=h.join(","),t.abrupt("break",52);case 39:return b["Page"]=a,t.abrupt("break",52);case 41:return b["Page"]=a,b["By"]=l,b["Order"]=c,b["StartPrice"]=i,b["EndPrice"]=n,b["Site"]=u.toLowerCase(),b["Location"]=d.join(","),t.abrupt("break",52);case 49:return b["Page"]=a,t.abrupt("break",52);case 51:return t.abrupt("break",52);case 52:return f=null,t.prev=53,t.next=56,this._this.$collectService.querySpuByKeyworld(this.platformId,b);case 56:f=t.sent,t.next=63;break;case 59:t.prev=59,t.t1=t["catch"](53),this.errorCatchText=t.t1,f=this.handleError();case 63:if(f=JSON.parse(f),200===f.Code){t.next=70;break}if(this.writeLog("采集".concat(e,"关键词第").concat(a,"页第一部分失败：").concat(f.Code," ").concat(f.Msg),!1),2!==this.platformId){t.next=68;break}return t.abrupt("break",85);case 68:t.next=80;break;case 70:if(2!==this.platformId){t.next=78;break}if(!(v.length>=Number(this.commonAttr.wordLimit))){t.next=73;break}return t.abrupt("break",85);case 73:this.writeLog("采集".concat(e,"关键词第").concat(a,"页数据，采集到约").concat(f.ListItem.length,"条"),!0),g=this._this.filterData(f.ListItem),v=v.concat(g).splice(0,Number(this.commonAttr.wordLimit)),t.next=80;break;case 78:this.writeLog("采集".concat(e,"关键词第").concat(a,"页第一部分，采集到约").concat(f.ListItem.length,"条"),!0),(S=this.GoodsData).push.apply(S,Object(o["a"])(f.ListItem));case 80:if(!(2!==this.platformId&&a>=r)){t.next=82;break}return t.abrupt("break",85);case 82:a++,t.next=18;break;case 85:if(2!==this.platformId){t.next=90;break}return v=v.map((function(t,e){return t.id=e+1,t.information="",t})),t.abrupt("return",{code:200,data:v});case 90:return this.GoodsData=this.GoodsData.map((function(t,e){return t.id=e+1,t.information="",9===k.platformId&&(t.Site=b.Site),t})),y=this._this.filterData(this.GoodsData),t.abrupt("return",{code:200,data:y});case 93:case"end":return t.stop()}}),t,this,[[53,59]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"keywordSearchTwo",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r,i,n,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GoodsData=null,this.GoodsData=[],a=this.commonAttr.StartPage-0,r=this.commonAttr.EndPage-0,i={},i["key"]=e;case 6:if(!a){t.next=28;break}if(!this._this.flag){t.next=9;break}return t.abrupt("break",28);case 9:return i["page"]=a,n=null,t.prev=11,t.next=14,this._this.$collectService.querySpuByKeyworld(1.1,i);case 14:n=t.sent,t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](11),this.errorCatchText=t.t0,n=this.handleError();case 21:if(n=JSON.parse(n),200!==n.Code?this.writeLog("采集".concat(e,"关键词第").concat(a,"页第二部分失败：").concat(n.Code," ").concat(n.Msg),!1):(this.writeLog("采集".concat(e,"关键词第").concat(a,"页第二部分，采集到约").concat(n.ListItem.length,"条"),!0),(s=this.GoodsData).push.apply(s,Object(o["a"])(n.ListItem))),!(a>=r)){t.next=25;break}return t.abrupt("break",28);case 25:a++,t.next=6;break;case 28:return this.GoodsData=this.GoodsData.map((function(t,e){return t.id=e+1,t.information="",t})),l=this._this.filterData(this.GoodsData),t.abrupt("return",{code:200,data:l});case 31:case"end":return t.stop()}}),t,this,[[11,17]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleError",value:function(){var t=JSON.stringify(this.errorCatchText).replace(/\s/g,"");return t.indexOf("数据列表为空")>-1?t="数据列表为空":t.indexOf("返回数据不能为空")>-1&&(t="返回数据不能为空"),this.errorCatchText=null,JSON.stringify({Code:-2,Msg:"捕获错误".concat(t)})}},{key:"handleKeyFactory",value:function(t){try{var e=t.trim();return e?(e=e.replace(/\s/g,";").split(";"),{code:200,data:e}):{code:-3,data:"关键词不能为空"}}catch(a){return{code:-2,data:"关键词格式不规范：".concat(a)}}}},{key:"filterLinkKeyWord",value:function(t,e){for(var a=t,r=!1,i=[],o=0;o<e.length;o++){var n=e[o],s=RegExp(n.replace(/^[^\w^\s^\u4e00-\u9fa5]/i,""));if(r=s.test(a),r){i.push(n);break}}return i.join(",")}},{key:"handleKeyFilter",value:function(t){return Array.isArray(t)||(t=t.split("\n")),t.length>1e3&&(t=t.slice(0,1e3),this.notify("标题过滤设置","请输入小于1000组以内的关键词","warning")),t}},{key:"writeLog",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this._this.consoleMsg&&t){var a=e?"green":"red",r=Object(u["f"])(new Date(Date.now()),"hh:mm:ss");this._this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}}}]),t}(),p=d,h=(a("d3b7"),function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"_this",null),this._this=e,this.goods=null}return Object(l["a"])(t,[{key:"getGoodsDeail",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r,i,o,n,s,l,c,u,d,p,h=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=!(h.length>1&&void 0!==h[1])||h[1],t.prev=1,this.goods=e,r=this.goods,i=r.platformId,o=r.GoodsId,n=r.ShopId,s=r.Site,l=r.Platform,c=r.AccessToken,u={},u["GoodsId"]=o,t.t0=i||l,t.next=1===t.t0||1.2===t.t0?9:2===t.t0||3===t.t0?10:8===t.t0?11:9===t.t0?12:10===t.t0?14:11===t.t0?15:12===t.t0?18:13===t.t0?19:21;break;case 9:return t.abrupt("break",21);case 10:return t.abrupt("break",21);case 11:return t.abrupt("break",21);case 12:return u["Site"]=s,t.abrupt("break",21);case 14:return t.abrupt("break",21);case 15:return u["ShopId"]=n,u["Site"]=s,t.abrupt("break",21);case 18:return t.abrupt("break",21);case 19:return u["AccessToken"]=c,t.abrupt("break",21);case 21:return t.next=23,this._this.$collectService.queryDetailById(Number(i||l),u,a);case 23:if(d=t.sent,p=this.isJsonString(d),200!==(null===p||void 0===p?void 0:p.Code)){t.next=27;break}return t.abrupt("return",{code:200,data:p});case 27:return t.abrupt("return",{code:-2,data:d});case 30:return t.prev=30,t.t1=t["catch"](1),t.abrupt("return",{code:-2,data:"getGoodsDeail-catch: ".concat(t.t1)});case 33:case"end":return t.stop()}}),t,this,[[1,30]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleError",value:function(){var t=JSON.stringify(this.errorCatchText).replace(/\s/g,"");return t.indexOf("数据列表为空")>-1?t="数据列表为空":t.indexOf("返回数据不能为空")>-1&&(t="返回数据不能为空"),this.errorCatchText=null,JSON.stringify({Code:-2,Msg:"捕获错误".concat(t)})}},{key:"handleLinkKeyFactory",value:function(t,e){var a=this;try{var r=[],i=[];if(1===e){var o=t.trim();if(!o)return{code:-3,data:"关键词不能为空"};var n=o.trim().replace(/\s/g,";").split(";");n.map((function(t,e){i[e]={},i[e]["Url"]=t}))}else i=t;return i.map((function(t){var e=Object(u["n"])(t.Url.toString());200!==e.code&&a.writeLog("".concat(e.data),!1);var i=e.data;i.GoodsId&&r.push({platformId:i["platformId"],GoodsId:i["GoodsId"],Site:i["Site"],ShopId:i["ShopId"],Url:t.Url,Weight:t.Weight,Length:t.Length,Width:t.Width,Height:t.Height})})),{code:200,data:r}}catch(s){return{code:-2,data:"关键词格式不规范：".concat(s)}}}},{key:"writeLog",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this._this.consoleMsg&&t){var a=e?"green":"red",r=Object(u["f"])(new Date(Date.now()),"hh:mm:ss");this._this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}}},{key:"isJsonString",value:function(t){if("string"!==typeof t)return!1;try{return JSON.parse(t),JSON.parse(t)}catch(e){return!1}}}]),t}()),m=h,b=a("53ca"),v=function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"_this",null),this._this=e,this.GoodsData=null}return Object(l["a"])(t,[{key:"checkMallLink",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$collectService.getMallByLink(e);case 3:if(a=t.sent,void 0===a.Platform){t.next=6;break}return t.abrupt("return",{code:200,data:a});case 6:return t.abrupt("return",{code:-2,data:"未获取到正确的平台ID"});case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"checkMallLink-catch: ".concat(t.t0)});case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mallSearch",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.GoodsData=null,this.GoodsData=[],t.next=4,this.checkMallLink(e);case 4:if(a=t.sent,200===a.code){t.next=7;break}return t.abrupt("return",{code:a.code,data:a.data});case 7:r=null,t.t0=a.data.Platform,t.next=1===t.t0||1.2===t.t0?11:2===t.t0||3===t.t0?15:8===t.t0?19:9===t.t0?23:10===t.t0?27:11===t.t0?31:12===t.t0?35:39;break;case 11:return t.next=13,this.searchMallGoodsAsync(a.data,"searchPddMallGoodsAsync");case 13:return r=t.sent,t.abrupt("break",39);case 15:return t.next=17,this.searchMallGoodsAsync(a.data,"searchTbMallGoodsAsync");case 17:return r=t.sent,t.abrupt("break",39);case 19:return t.next=21,this.searchMallGoodsAsync(a.data,"searchAliBaBaMallGoodsAsync");case 21:return r=t.sent,t.abrupt("break",39);case 23:return t.next=25,this.searchMallGoodsAsync(a.data,"searchLazadaMallGoodsAsync");case 25:return r=t.sent,t.abrupt("break",39);case 27:return t.next=29,this.searchMallGoodsAsync(a.data,"searchJxMallGoodsAsync");case 29:return r=t.sent,t.abrupt("break",39);case 31:return t.next=33,this.searchMallGoodsAsync(a.data,"searchShopeeMallGoodsAsync");case 33:return r=t.sent,t.abrupt("break",39);case 35:return t.next=37,this.searchMallGoodsAsync(a.data,"searchExpressMallGoodsAsync");case 37:return r=t.sent,t.abrupt("break",39);case 39:if(200!==r.code){t.next=42;break}return i=this._this.filterData(this.GoodsData),t.abrupt("return",{code:200,data:i});case 42:return t.abrupt("return",{code:-2,data:r.data});case 43:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchMallGoodsAsync",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$collectService[a](e);case 3:if(r=t.sent,r=this.isJsonString(r),"object"!==Object(b["a"])(r)||200!==r.Result.Code){t.next=8;break}return(i=this.GoodsData).push.apply(i,Object(o["a"])(r.Result.ListItem)),t.abrupt("return",{code:200,data:""});case 8:return t.abrupt("return",{code:-2,data:"string"===typeof r?r:r.Result.Msg});case 11:return t.prev=11,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"SearchPddMallGoodsAsync-catch: ".concat(t.t0)});case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"handleError",value:function(){var t=JSON.stringify(this.errorCatchText).replace(/\s/g,"");return t.indexOf("数据列表为空")>-1?t="数据列表为空":t.indexOf("返回数据不能为空")>-1&&(t="返回数据不能为空"),this.errorCatchText=null,JSON.stringify({Code:-2,Msg:"捕获错误".concat(t)})}},{key:"handleEntireKeyFactory",value:function(t){try{var e=t.trim();return e?(e=e.replace(/\s/g,";").split(";"),{code:200,data:e}):{code:-3,data:"整店链接不能为空"}}catch(a){return{code:-2,data:"整店链接不规范：".concat(a)}}}},{key:"writeLog",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this._this.consoleMsg&&t){var a=e?"green":"red",r=Object(u["f"])(new Date(Date.now()),"hh:mm:ss");this._this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}}},{key:"isJsonString",value:function(t){if("string"!==typeof t)return t;try{return JSON.parse(t),JSON.parse(t)}catch(e){return t}}}]),t}(),g=v,f=function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"_this",null),this._this=e,this.errorCatchText=null,this.GoodsData=null}return Object(l["a"])(t,[{key:"picSearch",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$collectService.imgSearch(e,a);case 3:if(r=t.sent,r=this.isJsonString(r),"object"!==Object(b["a"])(r)||0!==r.Code){t.next=8;break}return i=this._this.filterData(r.ListItem),t.abrupt("return",{code:200,data:i});case 8:return t.abrupt("return",{code:-2,data:"string"===typeof r?r:r.Msg});case 11:return t.prev=11,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"picSearch-catch: ".concat(t.t0)});case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getTaobaoAbroadAccount",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this._this.$userInfo.muid,Object(u["z"])((function(){return e}),5e3),a={uid:e,uuid:"0",account:"",accountAliasName:""},t.next=6,this._this.$shopeemanService.getChineseLaiZan("http://api.laizand.com/api/open/getTbGlobalUser?",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":" gzip, deflate","User-Agent":"RestSharp/106.3.1.0"}});case 6:if(r=t.sent,r=JSON.parse(JSON.parse(r).data),200!==r.code){t.next=10;break}return t.abrupt("return",{code:200,data:r.data.data});case 10:return t.abrupt("return",{code:r.code,data:r.message});case 13:return t.prev=13,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"getTaobaoAbroadAccount-catch: ".concat(t.t0)});case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"queryTmCrossBorder",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r,i,n,s,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.GoodsData=null,this.GoodsData=[],r=1,i={Page:r,pageSize:100,SortType:"DESC",StartModifiedTime:a[0],EndModifiedTime:a[1],SortField:"modified",Status:"NORMAL"};case 4:if(!r){t.next=34;break}if(!this._this.flag){t.next=7;break}return t.abrupt("break",34);case 7:return i["Page"]=r,s=null,t.prev=9,t.next=12,this._this.$collectService.queryTmCrossBorder(e.access_token,i);case 12:s=t.sent,s=JSON.parse(s),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](9),this.errorCatchText=t.t0,s=this.handleError();case 20:if(0===(null===(n=s.data)||void 0===n?void 0:n.item_id)){t.next=25;break}return this.writeLog("采集第".concat(r,"页失败，数据为空"),!1),t.abrupt("break",34);case 25:if(c=s.data.product_list,0!==c.length){t.next=28;break}return t.abrupt("break",34);case 28:this.writeLog("采集第".concat(r,"页，采集到约").concat(c.length,"条"),!0),c=c.map((function(t){return t.Image=t.images[0],t.GoodsId=t.item_id,t.Title=t.title,t.CategoryName=t.category_name,t.Price=t.price,t.Sales=0,t.Origin="天猫淘宝海外平台",t.Url="https://distributor.taobao.global/apps/product/detail?mpId=".concat(t.item_id),t.platformId=13,t.AccessToken=e.access_token,t})),(l=this.GoodsData).push.apply(l,Object(o["a"])(c));case 31:r++,t.next=4;break;case 34:return t.abrupt("return",{code:200,data:this.GoodsData});case 35:case"end":return t.stop()}}),t,this,[[9,16]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"handleError",value:function(){var t=JSON.stringify(this.errorCatchText).replace(/\s/g,"");return t.indexOf("数据列表为空")>-1?t="数据列表为空":t.indexOf("返回数据不能为空")>-1&&(t="返回数据不能为空"),this.errorCatchText=null,JSON.stringify({Code:-2,Msg:"捕获错误".concat(t)})}},{key:"writeLog",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this._this.consoleMsg&&t){var a=e?"green":"red",r=Object(u["f"])(new Date(Date.now()),"hh:mm:ss");this._this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}}},{key:"isJsonString",value:function(t){if("string"!==typeof t)return t;try{return JSON.parse(t),JSON.parse(t)}catch(e){return t}}}]),t}(),S=f,y=a("b85c"),k=(a("2532"),a("466d"),a("6062"),a("4de4"),function(){function t(e){Object(s["a"])(this,t),Object(c["a"])(this,"_this",null),this._this=e}return Object(l["a"])(t,[{key:"setGoodsData",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r,i,o,n,s,l,c,u,d,p,h,m,b,v,g,f,S,y,k,w,x,A,_,C,P;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=JSON.parse(JSON.stringify(a)),o="",1===e.Platform&&null!==(r=i.CollectGoodsData)&&void 0!==r&&r.GoodsProperty&&Object.keys(i.CollectGoodsData.GoodsProperty).length>0)for(n=Object.keys(i.CollectGoodsData.GoodsProperty),s=0,l=n;s<l.length;s++)c=l[s],o+="".concat(c,"：").concat(i.CollectGoodsData.GoodsProperty[c].join("\r\n"),"\r\n");if(11!==e.Platform||0===this._this.GoodsDeliveryAddress){t.next=7;break}if(u=this._this.shopeeGoodsDeliveryAddressDic[e.Site.toUpperCase()]?this._this.shopeeGoodsDeliveryAddressDic[e.Site.toUpperCase()]:"",!(2===this._this.GoodsDeliveryAddress&&i.CollectGoodsData.Location===u||1===this._this.GoodsDeliveryAddress&&i.CollectGoodsData.Location!==u)){t.next=7;break}return t.abrupt("return",{code:-2,data:"商品发货地不符合条件"});case 7:if(e.Description=i.CollectGoodsData.GoodsDesc?i.CollectGoodsData.GoodsDesc+o:o,i.CollectGoodsData.GoodsDesc=e.Description,e.OriginCategoryId=Number(i.CollectGoodsData.CategoryId),this._this.IsCollectDescriptionIsNull||e.Description){t.next=12;break}return t.abrupt("return",{code:-2,data:"商品描述不能为空"});case 12:if(this._this.StatusName(e,"组装产品信息",!0),t.prev=13,m=i.CollectGoodsData.TotalQuantity,!(Object.keys(i.CollectGoodsSkus).length>0)){t.next=23;break}for(b=[],v=Object.keys(i.CollectGoodsSkus),g=0,f=v;g<f.length;g++)S=f[g],b.push(i.CollectGoodsSkus[S].quantity);if(!(b.length<=0)){t.next=21;break}return t.abrupt("return",{code:-2,data:"收藏失败：此商品库存为0"});case 21:t.next=25;break;case 23:if(!(Number(m)<=0)){t.next=25;break}return t.abrupt("return",{code:-2,data:"收藏失败：此商品库存为0"});case 25:return this._this.IsDefaultFilterSkuCount&&(i=this.DealGoodsSkuCount(e,i)),9===e.Platform&&(i.CollectGoodsData.GoodsExtraInfo["site"]=e.Site.toUpperCase()),13===e.platformId&&(i.CollectGoodsData.GoodsExtraInfo["UserId"]=e.ShopId.toString()),t.next=30,this.FilterSpecialSymbol(i,e);case 30:if("未匹配到类目"!==e.CategoryName||0===e.OriginCategoryId){t.next=35;break}return t.next=33,this._this.$collectService.getGoodsCat(e.OriginCategoryId,e.Platform,e.Site);case 33:y=t.sent,e.CategoryName=y.split("|")[0]||"";case 35:if(k={},null!==e&&void 0!==e&&e.isLink&&(k["Weight"]=e.Weight,k["Length"]=e.Length,k["Width"]=e.Width,k["Height"]=e.Height),w=this.BuildGoodsData(i,k,e),200===w.code){t.next=40;break}return t.abrupt("return",{code:w.code,data:w.data});case 40:return x=w.data,"0"===x["price"].toString()&&null!==(d=i.CollectGoodsData.OriData)&&void 0!==d&&null!==(p=d.data)&&void 0!==p&&null!==(h=p.data)&&void 0!==h&&h.mockData?(A=i.CollectGoodsData.OriData["data"]["data"]["mockData"],_=A||0,e.Price=_,x["price"]=e.Price):e.Price=Number(x["price"]),x["image"]=e.Image,this._this.StatusName(e,"开始收藏",!0),t.next=46,this._this.$commodityService.uploadCollectGoods(x);case 46:if(C=t.sent,P=this.isJsonString(C),200!==P.code){t.next=53;break}return x["id"]=P.data.id,t.abrupt("return",{code:200,data:x});case 53:return t.abrupt("return",{code:-2,data:"收藏失败"});case 54:t.next=59;break;case 56:return t.prev=56,t.t0=t["catch"](13),t.abrupt("return",{code:-2,data:"收藏异常".concat(t.t0)});case 59:case"end":return t.stop()}}),t,this,[[13,56]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"FilterSpecialSymbol",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(9!==a.Platform&&11!==a.Platform&&12!==a.Platform||(e.CollectGoodsData.Title=this.FilterEmojoStr(e.CollectGoodsData.Title),e.CollectGoodsData.ShortTitle=this.FilterEmojoStr(e.CollectGoodsData.ShortTitle),e.CollectGoodsData.GoodsDesc=this.FilterEmojoStr(e.CollectGoodsData.GoodsDesc)),"未匹配到类目"!==a.CategoryName||0===a.OriginCategoryId){t.next=6;break}return t.next=4,this._this.$collectService.getGoodsCat(a.OriginCategoryId,a.Platform,a.Site);case 4:r=t.sent,a.CategoryName=r.split("|")[0]||"";case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"FilterEmojoStr",value:function(t){for(var e=/[\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,a="",r=0;r<t.length;r++){var i=t.charAt(r);this._this.$filters.special_characters.includes(i)||(a+=i)}return a=a.replaceAll(e,""),a}},{key:"BuildGoodsData",value:function(t,e,a){try{var r,i=t.CollectGoodsData,n=t.CollectGoodsSkus;if(9===i.Platform&&this._this.IsFilterLazadaDeliveryDay){var s=Object.keys(n);if(!(s.length>0))return{code:-2,data:"此商品部分sku发货天数为空"};var l,c=!1,u=Object(y["a"])(s);try{for(u.s();!(l=u.n()).done;){var d=l.value,p=n[d],h=p.duringTime.split("-"),m=[],b=0,v=0;if(h.length>0){for(var g=0;g<h.length;g++){var f=h[g];m.push(Number.apply(void 0,Object(o["a"])(f.match(/\d+/g))))}1===m.length?v=b=m[0]:2===m.length&&(b=m[0],v=m[1]),(b<Number(this._this.MinLazadaDeliveryDay)||v>Number(this._this.MaxLazadaDeliveryDay)||b>Number(this._this.MaxLazadaDeliveryDay))&&(c=!0)}}}catch(D){u.e(D)}finally{u.f()}if(c)return{code:-2,data:"此商品发货天数不符合【采集设置】中设置的发货天数范围"}}if(11===i.Platform&&this._this.IsFilterShopeeDeliveryDay){var S=Number(i.EstimatedDays)||0;if(S<Number(this._this.MinShoppeDeliveryDay)||S>Number(this._this.MaxShoppeDeliveryDay))return{code:-2,data:"此商品发货天数不符合【采集设置】中设置的发货天数范围"}}var k={};k["source"]=i.Platform,k["goods_id"]=i.GoodsId,k["category_id"]=i.CategoryId,k["category_name"]=t.ListItem[0].CategoryName,k["language"]=9===i.Platform||11===i.Platform||2===i.Platform?"en":"zh-Hans",k["title"]=12===i.Platform?this.GetAliExpressTitle(i.Title):i.Title,k["short_title"]=i.ShortTitle,k["description"]=i.GoodsDesc;var w=Object.keys(e);w.length>0&&(i.Weight=Number(e["Weight"]),i.Length=Number(e["Length"]),i.Width=Number(e["Width"]),i.Height=Number(e["Height"])),k["weight"]=i.Weight,k["long"]=i.Length,k["width"]=i.Width,k["height"]=i.Height,k["spec1"]="Variation",k["spec2"]="Size",k["sales"]=i.Sales,k["stock"]=i.TotalQuantity,k["descImages"]=i.DetailGallery;var x={},A=this.BuildSkuDatas(a,t,i.GoodsType,i.VaCount,i.Platform);if(200!==A.code)return{code:A.code,data:A.data};if(x=A.data,11===i.Platform){var _="";if("tw"===i.Site.toLowerCase()?(_="zh-Hant",k["spec1"]="規格",k["spec2"]="尺寸"):_="en",k["language"]=_,0===Object.keys(n).length){var C={skuList:[]};C["minPrice"]=i.Price,C["options"]=[],C["skuStrList"]=[]}}else 12===i.Platform&&(k["language"]="en");if(0===(null===(r=i.Images)||void 0===r?void 0:r.length))return{code:-2,data:"图片为空"};var P=x["minPrice"]||0;return k["skus"]=x["skuList"],P<=0&&(x["minPrice"]=t.ListItem[0].Price),k["price"]=x["minPrice"],k["images"]=this.BuildImages(i.Images),k["skuStrList"]=x["skuStrList"],k["goodsExtraInfo"]=i.GoodsExtraInfo,{code:200,data:k}}catch(L){return{code:-2,data:"BuildGoodsData-error".concat(L)}}}},{key:"BuildImages",value:function(t){for(var e=[],a=[],r=0;r<t.length;r++){var i=t[r];e.includes(i)||i.indexOf("www.youtube.com/watch")>-1||(a.includes(i.toString())||(a.push(i.toString()),e.push(i.toString())))}return e}},{key:"BuildSkuDatas",value:function(t,e,a){try{var r=e.CollectGoodsSkus,i=[];for(var n in r)r[n].image&&i.push(r[n].image);var s=Object(o["a"])(new Set(i)),l=this.GetVaAndSizeList(t,e,e.CollectGoodsData.GoodsType),c=[];if(l.length>0&&(c=l[0]),s.length!==c.length&&this.IsDeleteRepeatSkuImg)for(var u in r)r[u].image="";var d=this.CheckSkuIsSingle(r);if("1"===d["isSkuSingle"].toString())return{code:200,data:d};var p={};try{p=this.CheckSkuInvalidImages(r,a)}catch(N){return{code:-2,data:"组装sku图片失败，或图片不符合规格"}}var h=p["imageBool"];r=p["skuList"],r=this.CkeckSkuNumV2(r);var m=[],b=[],v=[],g={},f=[],S=[],y=0,k=0;for(var w in r){var x=r[w];k=x.price,0===y&&(y=x.price);for(var A=[],_={sku_spec1:"",sku_spec2:""},C=1,P=0;P<x.originProps.length;P++){var D=x.originProps[P],L=D.name;if(A.push(L),0===P){if(S.includes(L)){C=0;break}if(b.length>=100&&!b.includes(L)){C=0;break}var T=JSON.stringify(g).match(RegExp(/(?<=:").*?(?=")/g))||[];if(!Object.keys(g).includes(L)&&T.includes(x.image)){C=0,S.push(L);break}b.includes(L)||b.push(L),_["sku_spec1"]=L,!Object.keys(g).includes(L)&&x.image&&(g[L]=x.image),Object.keys(g).includes(L)&&h?g[L].indexOf("http:")<=-1&&g[L].indexOf("https:")<=-1?_["sku_image"]="http:"+g[L]:_["sku_image"]=g[L]:_["sku_image"]=""}if(1===P){if(v.length>=100&&!v.includes(L)){C=0;break}v.includes(L)||v.push(L),_["sku_spec2"]=L}}if(0!==C){k<y&&(y=k);var I=x.quantity;I=I>5e3?5e3:I;var O=_["sku_spec1"].toString();_["sku_spec2"]&&(O=O+"+"+_["sku_spec2"]),f.push(O),_["sku_sn"]=x.sku,_["sku_price"]=x.price,_["sku_stock"]=I,m.push(_)}}var z=[];b.length>0&&z.push(b),v.length>0&&z.push(v);var G={};return G["skuList"]=m,G["minPrice"]=y,G["options"]=z,G["skuStrList"]=f,{code:200,data:G}}catch(N){return{code:-2,data:"BuildSkuDatas-error".concat(N)}}}},{key:"CheckSkuInvalidImages",value:function(t){var e={},a={},r=[],i=[];for(var o in t){var n=t[o];if(!(n.originProps.length<=0)){var s=n.originProps[0],l=s.name;i.includes(l)||(i.push(l),n.image?a[l]=n.image:r.push(l))}}if(r.length>Object.keys(a).length){for(var c in t)t[c].image="";return e["imageBool"]=!1,e["skuList"]=t,e}for(var u=[],d=[],p=[],h=[],m=Object.keys(t),b=0,v=m;b<v.length;b++){var g=v[b],f=t[g];if(!(f.originProps.length<=0)){var S=f.originProps,y=S[0],k=y.name;if(!p.includes(k)){p.push(k);try{var w=d.includes(f.image);if(h.push(f.image),w){u.push(g);continue}d.push(f.image)}catch(A){u.push(k);continue}}}}for(var x=0;x<u.length;x++)delete t[u[x]];return e["imageBool"]=!0,e["skuList"]=t,e}},{key:"CkeckSkuNumV2",value:function(t){var e=[],a=[];for(var r in t){for(var i=t[r],o="",n=0;n<i.originProps.length;n++){var s=i.originProps[n],l=s.name;0===n&&(o=l),1===n&&(o=o+"-"+l)}a.includes(o)?e.push(i.sku):a.push(o)}if(e.length>0)for(var c=0;c<e.length;c++)delete t[e[c]];return t}},{key:"getBase64",value:function(t){return new Promise((function(e,a){var r=new Image,i="";r.src=t+"?v="+Math.random(),r.setAttribute("crossOrigin","Anonymous"),r.onload=function(){var t=document.createElement("canvas"),a=r.width,o=r.height;t.width=a,t.height=o,t.getContext("2d").drawImage(r,0,0,a,o),i=t.toDataURL("image/jpeg"),e(i||null)}}))}},{key:"GetSmallImageUrl",value:function(t,e){switch(e){case 1:return t+"?imageView2/2/w/20/q/20/format/webp";case 2:case 8:return t.indexOf("460x460xz.jpg")>-1?(t=t.replace("460x460xz.jpg","20x20.jpg"),t):t+"_20x20.jpg";case 11:return t+"_tn";case 13:return t+"_50x50.jpg";case 9:return t+"_20x20q20.jpg_.webp"}return t}},{key:"CheckSkuIsSingle",value:function(t){var e={},a=1e5,r=0,i=Object.keys(t).length;if(1===i)for(var o in t){var n=t[o].originProps;0===n.length&&(r=1,a=t[o].price)}else 0===i&&(a=0,r=1);return e["isSkuSingle"]=r,e["skuList"]={},e["minPrice"]=a,e["options"]=[],e["skuStrList"]=[],e}},{key:"DealGoodsSkuCount",value:function(t,e){var a=0;while(1){a++;try{if(1===e.CollectGoodsData.GoodsType){var r=Object.keys(e.CollectGoodsSkus);if(r.length>50){var i,o=this.getRandomArrayElements(r,50),n={},s=Object(y["a"])(o);try{for(s.s();!(i=s.n()).done;){var l=i.value;n[l]=e.CollectGoodsSkus[l]}}catch(yt){s.e(yt)}finally{s.f()}e.CollectGoodsSkus=n}}if(2===e.CollectGoodsData.GoodsType){var c={},u=this.GetVaAndSizeList(t,e,e.CollectGoodsData.GoodsType),d=u[0],p=u[1],h=Object.keys(e.CollectGoodsSkus).length,m=d.length*p.length;if(m>50||d.length>50||p.length>50||m!==h){var b=50;d.length>50&&(d=this.getRandomArrayElements(d,50)),p.length>50&&(p=this.getRandomArrayElements(p,50)),Object.keys(e.CollectGoodsSkus).length>50&&(b=50/p.length),b>50&&(b=50),d.length>b&&(d=this.getRandomArrayElements(d,parseInt(b)));for(var v=Object.keys(e.CollectGoodsSkus),g=0,f=v;g<f.length;g++){var S=f[g],k=e.CollectGoodsSkus[S],w=k.originProps[0]&&k.originProps[0].name||"",x=k.originProps[1]&&k.originProps[1].name||"";if(d.includes(w)&&p.includes(x))c[S]=k;else{var A=0,_=this.GetVaRelativeSku(e.CollectGoodsSkus,w,x,A++);if(_)for(var C=Object.keys(_),P=0,D=C;P<D.length;P++){var L=D[P];c[L]=_[L]}}}e.CollectGoodsSkus=c}}if(e.CollectGoodsData.GoodsType>2){var T={},I=this.GetVaAndSizeList(t,e,e.CollectGoodsData.GoodsType);for(var O in I)I[O].length>50&&(I[O]=this.getRandomArrayElements(I[O],50));var z={},G=[],N=I[2];if(4===Object.keys(I).length)for(var j=0;j<I[3].length;j++)for(var E=I[3][j],R=0;R<I[2].length;R++){var $=N[R],M=$+"+"+E;G.push(M)}else G=I[2];for(var K=0;K<G.length;K++){var V=G[K];if(Object.keys(z).length>=50)break;for(var F=0;F<I[1].length;F++){var J=I[1][F],U=J+"+"+V,B=[];if(B.push(J),B.push(V),z[U]=B,Object.keys(z).length>=50)break}}if(I[0].length*Object.keys(z).length>50){var W=50;W=parseInt(50/Object.keys(z).length),W>50&&(W=50),W<I[0].length&&(I[0]=this.getRandomArrayElements(I[0],I[0].length-W))}for(var H=!1,q=0;q<I[0].length;q++)for(var Y=I[0][q],Q=Object.keys(z),Z=0,X=Q;Z<X.length;Z++){for(var tt=X[Z],et=z[tt],at=et.join("+"),rt=Y+"+"+at,it=[],ot=Object.keys(e.CollectGoodsSkus),nt=0,st=ot;nt<st.length;nt++){var lt=st[nt],ct=e.CollectGoodsSkus[lt],ut=JSON.stringify(ct.originProps).match(RegExp(/(?<="name":").*?(?=")/g)),dt=ut.join("+");if(rt===dt){it=ut;var pt=JSON.stringify(ct.originProps).match(RegExp(/(?<="sku_name":").*?(?=")/g));if(pt.toString().indexOf("颜色")>-1||pt.toString().indexOf("款式")>-1){H=!0;var ht=[];ht.push(ct.originProps[0]);var mt={parent_id:0,vid:""};if(mt["name"]=at,ht.push(mt),H){ct.originProps=ht,T[lt]=ct;break}}}}if(it.length<1){var bt=this.GetVaRelativeSku(e.CollectGoodsSkus,Y,tt,Object.keys(T).length);if(bt)for(var vt=Object.keys(bt),gt=0,ft=vt;gt<ft.length;gt++){var St=ft[gt];T[St]=bt[St]}}}e.CollectGoodsSkus=T}if(Object.keys(e.CollectGoodsSkus).length<=50||a>50)break}catch(kt){break}}return e}},{key:"GetVaRelativeSku",value:function(t,e,a,r){var i=JSON.parse(JSON.stringify(t)),o={};try{for(var n=0,s=Object.keys(i);n<s.length;n++){var l=s[n],c=i[l],u=c.originProps[0]&&c.originProps[0].name||"";u===e&&Object.keys(o).length<1&&(o[l]=i[l])}var d={parent_id:0,vid:""};d["name"]=a;var p=Object.keys(o)[0];if(p){o[p].originProps[1]=d;var h=[],m=o[p].originProps[0],b={parent_id:0,vid:""};b["name"]=a,h[0]=m,h[1]=b,o[p].originProps=h;var v=p+r.toString();o[p].sku=v,o[p].quantity=0;var g={};return g[Number(v)]=o[p],g}}catch(f){}}},{key:"GetVaAndSizeList",value:function(t,e,a){for(var r={},i=!1,o=0;o<a;o++)r[o]=[];for(var n in e.CollectGoodsSkus)for(var s=e.CollectGoodsSkus[n],l=0;l<s.originProps.length;l++){var c=s.originProps[l].name;if(l>=r.length){if(9===s.platform&&l>1)continue;i=!0}c&&!r[l].includes(c)&&r[l].push(c)}if(!i)return r}},{key:"GetAliExpressTitle",value:function(t){var e=t.split("|");return e.length>3?(e.shift(),e.pop(),e.pop(),e.join("|")):3===e.length?e[0]:t}},{key:"getRandomArrayElements",value:function(t,e){var a,r,i=t.slice(0),o=t.length,n=o-e;while(o-- >n)r=Math.floor((o+1)*Math.random()),a=i[r],i[r]=i[o],i[o]=a;return i.slice(n)}},{key:"isJsonString",value:function(t){if("string"!==typeof t)return t;try{return JSON.parse(t),JSON.parse(t)}catch(e){return t}}},{key:"handleKey",value:function(t){return t.split("\n").map((function(t){return t.replace(/(^\s*)|(\s*$)/g,"")})).filter((function(t){return""!==t}))}},{key:"filterLinkKeyWord",value:function(t,e){for(var a=t,r=!1,i=[],o=0;o<e.length;o++){var n=e[o],s=RegExp(n.replace(/^[^\w^\s^\u4e00-\u9fa5]/i,""));if(r=s.test(a),r){i.push(n);break}}return i.join(",")}},{key:"handleKeyFilter",value:function(t){return Array.isArray(t)||(t=t.split("\n")),t.length>1e3&&(t=t.slice(0,1e3),this.notify("标题过滤设置","请输入小于1000组以内的关键词","warning")),t}}]),t}()),w=a("da05"),x=a("5287"),A=a("1146"),_=a.n(A),C={components:{editorOnNewGoods:w["a"]},props:{baseConfig:{type:Object,required:!1,default:function(){return{keywordConfig:[1,2,11,8,1.2,10,12,9]}}}},data:function(){return{Height:650,activeName:"keyPage",collectName:"",CollectPublicApInstance:new k(this),CollectKeyWordApInstance:new p(this),collectLinkApInstance:new m(this),collectEntireApInstance:new g(this),collectOtherApInstance:new S(this),multipleSelection:[],goodsList:[],buttonStatus:{start:!1},currentKeywordPlatform:1,commonAttr:{pddRadio:1,StartPage:1,EndPage:2,StartSales:0,EndSales:999999999,StartPrice:0,EndPrice:999999999,keyFilter:"",wordLimit:10,shopeeSortType:[{label:"价格从低到高",value:"price,asc"},{label:"价格从高到低",value:"price,desc"},{label:"销量从低到高",value:"sales,asc"},{label:"销量从高到低",value:"sales,desc"}],isShopeeOffice:!1,shopeeSortTypeVal:"price,asc",shopeeSite:[],shopeeSiteCode:"TW",shopeePlaceOrigin:"",shopeePlaceVal:[],lazadaSite:[],lazadaSiteCode:"MY",lazadaPlaceOrigin:{},lazadaPlaceVal0:[],lazadaPlaceVal1:[],pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=new Date,a=new Date;t.$emit("pick",[a,e])}},{text:"昨天",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()-864e5),a.setTime(a.getTime()-864e5),t.$emit("pick",[a,e])}},{text:"一周前",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()-6048e5),a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}}]},value2:"",cacheTime:[],alibabaSortType:[{label:"综合排序",value:"pop"},{label:"价格从低到高",value:"price_fale"},{label:"价格从高到低",value:"price_true"},{label:"销量从低到高",value:"booked_false"},{label:"销量从高到低",value:"booked_true"}],alibabaSortTypeVal:"pop",pictureSearchPlatformId:"2"},flag:!1,start:1,end:5e3,key:"",linkKey:"",linkKeyArr:"",importLinkData:"",mallLinkKey:"",isSelectAll:!1,isSelectAll2:[!1,!1],consoleMsg:"",pictureSearchOrigin:[],base64Str:"",TaobaoAbroadAccount:[],TaobaoAbroadAccountId:[],taobaoTimeAt:[],isSelectAllTaobaoAccount:!1,shopeeGoodsDeliveryAddressDic:{MY:"Mainland China",TW:"中國大陸",VN:"Nước ngoài",ID:"Luar Negeri",PH:"Mainland China",TH:"ต่างประเทศ",SG:"Mainland China",BR:"China Continental"},successNum:0,failNum:0,GoodsDeliveryAddress:0,GoodsDeliveryAddressList:[{value:0,label:"不过滤"},{value:1,label:"本土"},{value:2,label:"跨境"}],IsCollectDescriptionIsNull:!1,IsDefaultFilterSkuCount:!0,IsFilterLazadaDeliveryDay:!1,MinLazadaDeliveryDay:0,MaxLazadaDeliveryDay:20,IsFilterShopeeDeliveryDay:!1,MinShoppeDeliveryDay:0,MaxShoppeDeliveryDay:20,IsDeleteRepeatSkuImg:!1,plugVisible:!1,port:"",isEditorVisible:!1,isNoFoldShow:!0,editorSelection:[]}},computed:{keyworBar:function(){return Object(x["b"])(this.baseConfig.keywordConfig)},isShowPdd:function(){var t=[1];return t.includes(this.currentKeywordPlatform)},isShowPage:function(){var t=[1,11,8,1.2,10,12,9];return t.includes(this.currentKeywordPlatform)},isShowPageSize20:function(){var t=[1,8,1.2];return t.includes(this.currentKeywordPlatform)},isShowPageSize50:function(){var t=[11];return t.includes(this.currentKeywordPlatform)},isShowSales:function(){var t=[1,2,11,8,1.2,10,12];return t.includes(this.currentKeywordPlatform)},isShowPrice:function(){var t=[1,2,11,8,1.2,10,12,9];return t.includes(this.currentKeywordPlatform)},isShowTaobao:function(){var t=[2];return t.includes(this.currentKeywordPlatform)},isShowShopeeSite:function(){var t=[11];return t.includes(this.currentKeywordPlatform)},isShowLazadaSite:function(){var t=[9];return t.includes(this.currentKeywordPlatform)},isShowKeyTip:function(){var t=[11,9];return t.includes(this.currentKeywordPlatform)},isShowSort:function(){var t=[8];return t.includes(this.currentKeywordPlatform)},isShowCreateAt:function(){var t=[11];return t.includes(this.currentKeywordPlatform)}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commonAttr.shopeeSite=x["g"],t.commonAttr.lazadaSite=x["d"],t.pictureSearchOrigin=x["e"],a=new Date-0,t.taobaoTimeAt=[a-432e6,a],t.commonAttr.cacheTime=[a-864e5,a+864e5],t.getShopeeGoodsPlace(),t.getLazadaGoodsPlace(),e.next=10,t.getTaobaoAbroadAccount();case 10:return document.querySelectorAll(".barChilren")[4].style.width="102px",e.next=13,t.$BaseUtilService.getPluginPorts();case 13:t.port=e.sent,t.linkKey=localStorage.getItem("linkKey")?localStorage.getItem("linkKey").replaceAll(",","\n"):"",window.addEventListener("storage",(function(e){t.linkKey=localStorage.getItem("linkKey")?localStorage.getItem("linkKey").replaceAll(",","\n"):""}));case 16:case"end":return e.stop()}}),e)})))()},methods:{clearTranslate:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!((null===(a=t.cacheTime)||void 0===a?void 0:a.length)>0)){e.next=3;break}return e.abrupt("return",t.$message.error("请选择时间"));case 3:return r=t.$dayjs(t.commonAttr.cacheTime[0]).format("YYYY-MM-DD 00:00:00"),i=t.$dayjs(t.commonAttr.cacheTime[1]).format("YYYY-MM-DD 00:00:00"),e.next=7,t.$BaseUtilService.clearGoodsTranslateInfo(r,i);case 7:if(o=e.sent,0===Object.keys(JSON.parse(o)).length){e.next=10;break}return e.abrupt("return",t.$message.success("清理翻译数据失败"));case 10:t.$message.success("清理翻译数据成功"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),t.$message.success("清理翻译数据失败");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},clearCache:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$BaseUtilService.clealAllCache();case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return",t.$message.error("清理缓存数据失败"));case 6:t.$message.success("清理缓存数据成功"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$message.error("清理缓存数据失败");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},editorUp:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.multipleSelection.length){e.next=2;break}return e.abrupt("return",t.$message.error("请选择需要编辑的数据"));case 2:t.editorSelection=[],t.isEditorVisible=!0,t.saveGoodsInfo();case 5:case"end":return e.stop()}}),e)})))()},setIsNoFoldShow:function(){this.isNoFoldShow=!this.isNoFoldShow,this.$refs.editor_on_new_goods.setIsNoFoldShow()},selectShopeePlaceValEvent:function(){this.commonAttr.shopeePlaceOrigin.length===this.commonAttr.shopeePlaceVal.length?this.isSelectAll=!0:this.isSelectAll=!1},selectShopeeAllEvent:function(){var t=this;this.isSelectAll?this.commonAttr.shopeePlaceOrigin.map((function(e){t.commonAttr.shopeePlaceVal.push(e.value)})):this.commonAttr.shopeePlaceVal=[]},selectLazadaPlaceValEvent:function(t,e){this.commonAttr.lazadaPlaceOrigin[t].length===this.commonAttr["lazadaPlaceVal".concat(e)].length?this.isSelectAll2[e]=!0:this.isSelectAll2[e]=!1},selectLazadaAllEvent:function(t,e){var a=this;this.isSelectAll2[e]?this.commonAttr.lazadaPlaceOrigin[t].map((function(t){a.commonAttr["lazadaPlaceVal".concat(e)].push(t.value)})):this.commonAttr["lazadaPlaceVal".concat(e)]=[]},selectTaobaoAccountEventEvent:function(){this.TaobaoAbroadAccount.length===this.TaobaoAbroadAccountId.length?this.isSelectAllTaobaoAccount=!0:this.isSelectAllTaobaoAccount=!1},selectTaobaoAccountEventAllEvent:function(){var t=this;this.isSelectAllTaobaoAccount?this.TaobaoAbroadAccount.map((function(e){t.TaobaoAbroadAccountId.push(e.id)})):this.TaobaoAbroadAccountId=[]},getShopeeGoodsPlace:function(){this.isSelectAll=!1,this.commonAttr.shopeePlaceVal=[],this.commonAttr.shopeePlaceOrigin=Object(x["c"])(this.commonAttr.shopeeSiteCode)},getLazadaGoodsPlace:function(){this.isSelectAll2[0]=!1,this.isSelectAll2[1]=!1,this.commonAttr.lazadaPlaceVal0=[],this.commonAttr.lazadaPlaceVal1=[],this.commonAttr.lazadaPlaceOrigin=Object(x["a"])(this.commonAttr.lazadaSiteCode)},handleClick:function(t,e){},handleSelectionChange:function(t){this.multipleSelection=t},switchPlatform:function(t){this.currentKeywordPlatform=t.value},StartCollection:function(){switch(this.flag=!1,this.activeName){case"keyPage":this["keywordSearch"]();break;case"linkPage":this["linksSearch"](1);break;case"entriresShopPage":this["entriresShopSearch"]();break;case"picToPicPage":this["picToPicSearch"]();break;case"taobaoAbroadPage":this["taobaoAbroadSearch"]();break;default:this.$message.error("采集操作非法！！！！");break}},keywordSearch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,i,n,s,l,c,u,d,p,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.CollectKeyWordApInstance.handleKeyFactory(t.key),200===a.code){e.next=3;break}return e.abrupt("return",t.$message.error(a.data));case 3:r=a.data,i=a.data.length,n=t.currentKeywordPlatform,t.buttonStatus.start=!0,t.consoleMsg="",t.goodsList=[],t.commonAttr.wordLimit=""===t.commonAttr.wordLimit?10:t.commonAttr.wordLimit,t.$refs.plTable.reloadData(t.goodsList),t.CollectKeyWordApInstance._initKeyWord(n,t.commonAttr),t.writeLog("开始采集搜索........",!0),t.writeLog("开始采集".concat(x["f"][n],"商品......."),!0),t.collectName="".concat(x["f"][n],"关键词采集数据"),s=0;case 16:if(!(s<i)){e.next=31;break}if(!t.flag){e.next=21;break}return t.buttonStatus.start=!1,t.writeLog("取消".concat(x["f"][n],"商品采集"),!0),e.abrupt("break",31);case 21:return c=r[s],e.next=24,t.CollectKeyWordApInstance.keywordSearch(c);case 24:if(u=e.sent,200===u.code){e.next=27;break}return e.abrupt("continue",28);case 27:(l=t.goodsList).push.apply(l,Object(o["a"])(u.data));case 28:s++,e.next=16;break;case 31:if(1!==n){e.next=48;break}d=0;case 33:if(!(d<i)){e.next=48;break}if(!t.flag){e.next=38;break}return t.buttonStatus.start=!1,t.writeLog("取消".concat(x["f"][n],"商品采集"),!0),e.abrupt("break",48);case 38:return h=r[d],e.next=41,t.CollectKeyWordApInstance.keywordSearchTwo(h);case 41:if(m=e.sent,200===m.code){e.next=44;break}return e.abrupt("continue",45);case 44:(p=t.goodsList).push.apply(p,Object(o["a"])(m.data));case 45:d++,e.next=33;break;case 48:t.goodsList.forEach((function(e){t.$refs.plTable.toggleRowSelection([{row:e}])})),t.writeLog("".concat(x["f"][n],"：共采集：").concat(t.goodsList.length,"条"),!0),t.writeLog("".concat(x["f"][n],"商品采集完毕........"),!0),r=null,t.buttonStatus.start=!1;case 53:case"end":return e.stop()}}),e)})))()},linksSearch:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r="",e.consoleMsg="",r=1===t?e.collectLinkApInstance.handleLinkKeyFactory(e.linkKey,t):e.collectLinkApInstance.handleLinkKeyFactory(e.linkKeyArr,t),200===r.code){a.next=5;break}return a.abrupt("return",e.$message.error(r.data));case 5:if(e.goodsList=[],e.$refs.plTable.reloadData(e.goodsList),i=r.data,!(i.length>0)){a.next=20;break}return e.buttonStatus.start=!0,e.writeLog("开始商品链接采集搜索........",!0),e.collectName="商品链接采集数据",i.forEach((function(e){e.type=t})),a.next=15,Object(u["c"])(i,e.linkCollect);case 15:e.flag&&e.writeLog("取消链接采集",!0),e.goodsList.forEach((function(t){e.$refs.plTable.toggleRowSelection([{row:t}])})),e.writeLog("商品链接：共采集：".concat(e.goodsList.length,"条"),!0),e.writeLog("商品链接采集完毕........",!0),e.buttonStatus.start=!1;case 20:case"end":return a.stop()}}),a)})))()},linkCollect:function(t){var e=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=e.length>1&&void 0!==e[1]?e[1]:{count:1},r.prev=1,!a.flag){r.next=5;break}return Object(u["y"])(),r.abrupt("return");case 5:return r.next=7,a.collectLinkApInstance.getGoodsDeail(t);case 7:o=r.sent,200!==o.code?a.writeLog("商品ID: ".concat(t.GoodsId," 采集失败: ").concat(o.data),!1):(n={},s=o.data.ListItem[0],n.Image=s.Image,n.GoodsId=s.GoodsId,n.Title=s.Title,n.CategoryName=s.CategoryName,n.Price=s.Price,n.Sales=s.Sales,n.Origin=s.Origin,n.isDetail=!0,n.Platform=t.platformId,n.Url=t.Url,n.Site=t.Site||null,n.ShopId=t.ShopId||null,2===t.type&&(n.isLink=!0,n.Weight=t.Weight||0,n.Length=t.Length||0,n.Width=t.Width||0,n.Height=t.Height||0),a.writeLog("商品ID: ".concat(t.GoodsId,"采集成功")),a.goodsList.push(n)),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),a.writeLog("商品ID: ".concat(t.GoodsId," 异常"),!1);case 14:return r.prev=14,--i.count,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))()},entriresShopSearch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.collectEntireApInstance.handleEntireKeyFactory(t.mallLinkKey),200===a.code){e.next=3;break}return e.abrupt("return",t.$message.error(a.data));case 3:return t.buttonStatus.start=!0,t.consoleMsg="",t.goodsList=[],t.$refs.plTable.reloadData(t.goodsList),t.writeLog("开始整店链接采集搜索........",!0),t.collectName="整店采集数据",r=a.data,e.next=12,Object(u["c"])(r,t.entriresCollection);case 12:t.flag&&t.writeLog("取消整店采集",!0),t.goodsList.forEach((function(e){t.$refs.plTable.toggleRowSelection([{row:e}])})),t.writeLog("整店链接：共采集：".concat(t.goodsList.length,"条"),!0),t.writeLog("整店链接采集完毕........",!0),t.buttonStatus.start=!1;case 17:case"end":return e.stop()}}),e)})))()},entriresCollection:function(t){var e=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=e.length>1&&void 0!==e[1]?e[1]:{count:1},r.prev=1,!a.flag){r.next=5;break}return Object(u["y"])(),r.abrupt("return");case 5:return r.next=7,a.collectEntireApInstance.mallSearch(t);case 7:n=r.sent,200!==n.code?a.writeLog("店铺链接: ".concat(t," 采集失败: ").concat(n.data),!1):(a.writeLog("店铺链接: ".concat(t," 采集成功")),(s=a.goodsList).push.apply(s,Object(o["a"])(n.data))),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),a.writeLog("店铺链接: ".concat(t," 采集异常"));case 14:return r.prev=14,--i.count,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))()},picToPicSearch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.base64Str){e.next=2;break}return e.abrupt("return",t.$message.error("请上传图片"));case 2:return t.buttonStatus.start=!0,t.consoleMsg="",t.goodsList=[],t.$refs.plTable.reloadData(t.goodsList),a="8"===t.commonAttr.pictureSearchPlatformId?"1688":"淘宝",t.writeLog("开始 ".concat(a," 图搜采集搜索........"),!0),t.collectName="图搜采集数据",r={ImageBase64:t.base64Str},"8"===t.commonAttr.pictureSearchPlatformId&&(r["Page"]=1),e.next=13,t.collectOtherApInstance.picSearch(t.commonAttr.pictureSearchPlatformId,r);case 13:i=e.sent,200!==i.code?t.writeLog("图搜采集: 采集失败: ".concat(i.data),!1):(t.writeLog("图搜采集: 采集成功",!0),(n=t.goodsList).push.apply(n,Object(o["a"])(i.data))),t.goodsList.forEach((function(e){t.$refs.plTable.toggleRowSelection([{row:e}])})),t.writeLog("图搜：共采集：".concat(t.goodsList.length,"条"),!0),t.writeLog("".concat(a," 图搜采集完毕........"),!0),t.buttonStatus.start=!1;case 19:case"end":return e.stop()}}),e)})))()},getTaobaoAbroadAccount:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.collectOtherApInstance.getTaobaoAbroadAccount();case 2:if(a=e.sent,200===a.code){e.next=5;break}return e.abrupt("return",t.$message.error("获取淘宝天猫海外账号失败：".concat(a.code," ").concat(a.data)));case 5:t.TaobaoAbroadAccount=a.data;case 6:case"end":return e.stop()}}),e)})))()},taobaoAbroadSearch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.TaobaoAbroadAccountId.length){e.next=2;break}return e.abrupt("return",t.$message.error("请选择账号"));case 2:t.buttonStatus.start=!0,t.consoleMsg="",t.goodsList=[],t.$refs.plTable.reloadData(t.goodsList),t.writeLog("开始 淘宝天猫海外 采集搜索........",!0),t.collectName="淘宝天猫海外采集数据",a=regeneratorRuntime.mark((function e(a){var r,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.flag){e.next=3;break}return t.writeLog("取消淘宝天猫海外采集",!0),e.abrupt("return","break");case 3:return r=t.TaobaoAbroadAccountId[a],i=t.TaobaoAbroadAccount.find((function(t){return t.id===r})),e.next=7,t.collectOtherApInstance.queryTmCrossBorder(i,t.taobaoTimeAt);case 7:n=e.sent,200!==n.code?t.writeLog("淘宝天猫海外: 采集失败: ".concat(n.data),!1):(s=t.goodsList).push.apply(s,Object(o["a"])(n.data));case 9:case"end":return e.stop()}}),e)})),r=0;case 10:if(!(r<t.TaobaoAbroadAccountId.length)){e.next=18;break}return e.delegateYield(a(r),"t0",12);case 12:if(i=e.t0,"break"!==i){e.next=15;break}return e.abrupt("break",18);case 15:r++,e.next=10;break;case 18:t.goodsList.forEach((function(e){t.$refs.plTable.toggleRowSelection([{row:e}])})),t.writeLog("淘宝天猫海外：共采集：".concat(t.goodsList.length,"条"),!0),t.writeLog("淘宝天猫海外采集完毕........",!0),t.buttonStatus.start=!1;case 22:case"end":return e.stop()}}),e)})))()},saveGoodsInfo:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.multipleSelection.length){e.next=3;break}return t.$message.error("请选择商品"),e.abrupt("return");case 3:return t.buttonStatus.start=!0,t.consoleMsg="",t.successNum=0,t.failNum=0,t.writeLog("开始收藏商品........",!0),t.multipleSelection=t.isEditorVisible?t.multipleSelection.splice(Number(t.start)-1,Number(t.end)-Number(t.start)+1):t.multipleSelection,e.next=11,Object(u["c"])(t.multipleSelection,t.saveGoods);case 11:t.writeLog("共收藏成功：".concat(t.successNum,"个商品, 收藏失败：").concat(t.failNum,"个商品"),!0),t.writeLog("收藏商品完毕........",!0),t.buttonStatus.start=!1;case 14:case"end":return e.stop()}}),e)})))()},saveGoods:function(t){var e=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},r.prev=1,a.StatusName(t,"正在获取商品详情",!0),r.next=5,a.collectLinkApInstance.getGoodsDeail(t);case 5:if(o=r.sent,200===o.code){r.next=12;break}return a.StatusName(t,"获取商品详情失败：".concat(o.data),!1),a.failNum++,r.abrupt("return");case 12:return r.next=14,a.CollectPublicApInstance.setGoodsData(t,o.data);case 14:n=r.sent,200===n.code?(a.StatusName(t,"收藏成功",!0),a.successNum++,a.$nextTick((function(){a.$refs.plTable.toggleRowSelection([{row:t,selected:!1}])})),a.isEditorVisible&&a.editorSelection.push(n.data)):(a.StatusName(t,"".concat(n.data),!1),a.failNum++);case 16:r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](1),a.StatusName(t,"".concat(r.t0),!1),a.failNum++;case 22:return r.prev=22,--i.count,r.finish(22);case 25:case"end":return r.stop()}}),r,null,[[1,18,22,25]])})))()},writeLog:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this.consoleMsg&&t){var a=e?"green":"red",r=Object(u["f"])(new Date(Date.now()),"hh:mm:ss");this.consoleMsg+='<p style="color:'.concat(a,'; margin-top: 5px;">').concat(r,":").concat(t,"</p>")}},imgSaveToUrl:function(t,e){this.base64Str=null;var a=new FileReader;a.readAsDataURL(e.raw);var r=this;a.onload=function(){r.base64Str=a.result}},StatusName:function(t,e,a){this.$set(t,"StatusName",e),this.$set(t,"color",a?"green":"red")},filterData:function(t){for(var e=[],a=0;a<t.length;a++){var r,i=t[a];if(i.Sales=Number(i.Sales),i.Price=Number(i.Price),!(this.isShowSales&&i.Sales<Number(this.commonAttr.StartSales))&&!(this.isShowSales&&i.Sales>Number(this.commonAttr.EndSales))&&!(this.isShowPrice&&i.Price<Number(this.commonAttr.StartPrice))&&!(this.isShowPrice&&i.Price>Number(this.commonAttr.EndPrice))){if(this.commonAttr.keyFilter){var o=this.CollectPublicApInstance.handleKey(this.commonAttr.keyFilter),n=this.CollectPublicApInstance.filterLinkKeyWord(i.Title,o);if(i.keyWord=n,""!==i.keyWord)continue}if(this.isShowCreateAt&&(null===(r=this.commonAttr.value2)||void 0===r?void 0:r.length)>0){var s=this.commonAttr.value2[0].getTime(),l=this.commonAttr.value2[1].getTime(),c=1e3*i.CreateTime;if(c<s||c>l)continue}this.isShowShopeeSite&&!0===i.IsOfficialShop||e.push(i)}}if(this.isShowTaobao||this.isShowShopeeSite)switch(this.commonAttr.shopeeSortTypeVal){case"price,asc":e.sort((function(t,e){return t.Price-e.Price}));break;case"price,desc":e.sort((function(t,e){return e.Price-t.Price}));break;case"sales,asc":e.sort((function(t,e){return t.Sales-e.Sales}));break;case"sales,desc":e.sort((function(t,e){return e.Sales-t.Sales}));break}if(this.isShowSort)switch(this.commonAttr.alibabaSortTypeVal){case"pop":break;case"price_fale":e.sort((function(t,e){return t.Price-e.Price}));break;case"price_true":e.sort((function(t,e){return e.Price-t.Price}));break;case"booked_false":e.sort((function(t,e){return t.Sales-e.Sales}));break;case"booked_true":e.sort((function(t,e){return e.Sales-t.Sales}));break}return e},copy:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var a=document.createRange();a.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(r){}e.parentElement.removeChild(e)},tableDelete:function(t,e){this.$refs.plTable.toggleRowSelection([{row:t,selected:!1}]),this.goodsList.splice(e,1)},batchTableDelete:function(t,e){var a=this;if(!e.length)return this.$message.error("请选择要删除的选项");e.map((function(t){return t.__ob__.dep.id})).forEach((function(e){t.splice(t.findIndex((function(t){return t.__ob__.dep.id===e})),1)})),e.forEach((function(t){a.$refs.plTable.toggleRowSelection([{row:t,selected:!1}])}))},deleteAll:function(){var t=this;this.$confirm("确定清理全部吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.goodsList=[],t.$refs.plTable.reloadData(t.goodsList)}))},exportTableData:function(){var t;if(null===(t=this.goodsList)||void 0===t||!t.length)return this.$message("暂无数据导出");var e="<tr>\n          <td>商品ID</td>\n          <td>商品来源</td>\n          <td>商品链接</td>\n          <td>商品标题</td>\n          <td>图片链接</td>\n          <td>类目</td>\n          <td>价格</td>\n          <td>销量</td>\n          <td>发货地</td>\n        </td>";this.goodsList.forEach((function(t){e+="<tr>\n        <td style=\"mso-number-format:'@';\">".concat(t.GoodsId?t.GoodsId:"\t","</td>\n        <td>").concat(t.Origin?t.Origin:"\t","</td>\n        <td>").concat(t.Url?t.Url:"\t","</td>\n        <td>").concat(t.Title?t.Title:"\t","</td>\n        <td>").concat(t.Image?t.Image:"\t","</td>\n        <td>").concat(t.CategoryName?t.CategoryName:"\t","</td>\n        <td>").concat(t.Price?t.Price:"\t","</td>\n        <td>").concat(t.Sales?t.Sales:"\t","</td>\n        <td>").concat(t.Location?t.Location:"\t","</td>\n        </tr>")})),Object(u["i"])(this.collectName,e)},linkImport:function(){var t=this.importLinkData.length;if(this.linkKeyArr=[],t<=0)this.writeLog("表格数据为空",!1);else{this.writeLog("开始读取表格...",!0);for(var e=0;e<t;e++){var a=this.importLinkData[e],r={};r["Url"]=a["商品链接"],r["Weight"]=a["重量(kg)"],r["Length"]=a["长(cm)"],r["Width"]=a["宽(cm)"],r["Height"]=a["高(cm)"],r["Url"]&&this.linkKeyArr.push(r)}this.linksSearch(2)}},downloadTemplate:function(){var t='<tr>\n      <td style="width: 600px">商品链接</td>\n      <td style="width: 100px">重量(kg)</td>\n      <td style="width: 100px">长(cm)</td>\n      <td style="width: 100px">宽(cm)</td>\n      <td style="width: 100px">高(cm)</td>\n      </tr>';Object(u["i"])("商品链接采集模板",t)},importTemplate:function(t){var e=this,a={0:t.raw};if(/\.(xls|xlsx)$/.test(a[0].name.toLowerCase())){var r=new FileReader;r.onload=function(t){var a=t.target.result,r=_.a.read(a,{type:"binary"}),i=r.SheetNames[0],o=_.a.utils.sheet_to_json(r.Sheets[i]);e.importLinkData=o,e.linkImport(),o=null,e.$refs.importRef.value=""},r.readAsBinaryString(a[0])}else this.writeLog("格式错误,请上传xls、xlsx格式的文件",!1)}}},P=C,D=(a("a698"),a("2877")),L=Object(D["a"])(P,r,i,!1,null,"6d2ab1b6",null);e["default"]=L.exports},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},a698:function(t,e,a){"use strict";a("34e1")}}]);