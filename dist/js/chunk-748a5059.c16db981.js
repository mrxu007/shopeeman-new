(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-748a5059"],{4705:function(e,t,i){"use strict";i("ba09")},"492d":function(e,t,i){},"4c28":function(e,t,i){},"53ca":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},5551:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var a=i("1da1"),s=i("d4ec"),n=i("bee2"),o=(i("d3b7"),i("25f0"),i("96cf"),function(){function e(t){Object(s["a"])(this,e),this._this=t}return Object(n["a"])(e,[{key:"getDiscountNominate",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.item,e.prev=1,a={},a["limit"]=100,a["offset"]=i.offset,a["mallId"]=i.platform_mall_id,a["discount_id"]=i.discount_id,e.next=9,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/nominate/?",a);case 9:if(s=e.sent,n=this.isJsonString(this.isJsonString(s).data),!n||0!==n.code){e.next=15;break}return e.abrupt("return",{code:200,data:n.data});case 15:if(2!==n.code&&2!==n.errcode){e.next=19;break}return e.abrupt("return",{code:201,data:"店铺未登录"});case 19:return e.abrupt("return",{code:-2,data:"查询折扣活动详情失败"});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"查询折扣活动详情异常： ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getByDiscountids",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,n,o,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.mItem,a=t.promotionid,s=t.limit,n=t.discountType,e.prev=1,o={},o["discount_id_list"]=a,o["discount_type"]=n,o["limit"]=s,o["offset"]=i.offset,o["mallId"]=i.platform_mall_id,e.next=10,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/get_by_discountids/?",o);case 10:if(r=e.sent,l=this.isJsonString(this.isJsonString(r).data),!l||0!==l.code){e.next=16;break}return e.abrupt("return",{code:200,data:l.data});case 16:if(2!==l.code&&2!==l.errcode){e.next=20;break}return e.abrupt("return",{code:201,data:"店铺未登录"});case 20:return e.abrupt("return",{code:-2,data:"获取列表数据失败"});case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"获取列表数据异常： ".concat(e.t0)});case 26:case"end":return e.stop()}}),e,this,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDiscountStandardSearch",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,n,o,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.mItem,a=t.keyword,s=t.searchType,n=t.discountType,e.prev=1,o={},o["keyword"]=a,o["search_type"]=s,"all"!==n&&(o["promotion_status"]=n),o["mallId"]=i.platform_mall_id,e.next=9,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/standard_search/?",o);case 9:if(r=e.sent,l=this.isJsonString(this.isJsonString(r).data),!l||0!==l.code){e.next=15;break}return e.abrupt("return",{code:200,data:l.data});case 15:if(2!==l.code&&2!==l.errcode){e.next=19;break}return e.abrupt("return",{code:201,data:"店铺未登录"});case 19:return e.abrupt("return",{code:-2,data:"获取失败"});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"获取promotionid数据异常： ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDiscountList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.mItem,a=t.limit,s=t.discountType,e.prev=1,n={},n["limit"]=a,n["offset"]=i.offset,n["discount_type"]=s,n["mallId"]=i.platform_mall_id,e.next=9,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/list/?",n);case 9:if(o=e.sent,r=this.isJsonString(this.isJsonString(o).data),console.log("111",r),!r||0!==r.code){e.next=16;break}return e.abrupt("return",{code:200,data:r.data});case 16:if(2!==r.code&&2!==r.errcode){e.next=20;break}return e.abrupt("return",{code:201,data:"店铺未登录"});case 20:return e.abrupt("return",{code:-2,data:"获取失败"});case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"获取折扣列表数据异常： ".concat(e.t0)});case 26:case"end":return e.stop()}}),e,this,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isJsonString",value:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}}},{key:"stopActive",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i){var a,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={},a["discount_id"]=t.discount_id.toString(),a["action"]=i,a["mallId"]=t.platform_mall_id,e.next=7,this._this.$shopeemanService.mixChinese(t.country,"/api/marketing/v3/discount/?",a,{Headers:{"Content-Type":" application/json"}},"delete");case 7:if(s=e.sent,n=s&&JSON.parse(s),console.log(n),!n||200!==n.status){e.next=19;break}if(o=JSON.parse(n.data),!o||0!==o.code){e.next=16;break}return e.abrupt("return",{code:200,data:o.data||[]});case 16:return e.abrupt("return",{code:50001,data:o.message||n.statusText||""});case 17:e.next=22;break;case 19:if(403!==n.status){e.next=21;break}return e.abrupt("return",{code:n.status,data:"操作失败，店铺未登录！"});case 21:return e.abrupt("return",{code:n.status,data:"操作失败".concat(n.statusText)});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"操作异常： ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"createActive",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$shopeemanService.postChinese(t,"/api/marketing/v3/discount/?",i,{Headers:{"Content-Type":" application/json"}});case 3:if(a=e.sent,s=a&&JSON.parse(a),console.log(s),!s||200!==s.status){e.next=15;break}if(n=JSON.parse(s.data),!n||0!==n.code){e.next=12;break}return e.abrupt("return",{code:200,data:n.data||[]});case 12:return e.abrupt("return",{code:50001,data:n.message||s.statusText||""});case 13:e.next=18;break;case 15:if(403!==s.status){e.next=17;break}return e.abrupt("return",{code:s.status,data:"操作失败，店铺未登录！"});case 17:return e.abrupt("return",{code:s.status,data:"操作失败".concat(s.statusText)});case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"操作异常： ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"putActive",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$shopeemanService.mixChinese(t,"/api/marketing/v3/discount/?",i,{Headers:{"Content-Type":" application/json"}},"put");case 3:if(a=e.sent,s=a&&JSON.parse(a),console.log(s),!s||200!==s.status){e.next=15;break}if(n=JSON.parse(s.data),!n||0!==n.code){e.next=12;break}return e.abrupt("return",{code:200,data:n.data||[]});case 12:return e.abrupt("return",{code:50001,data:n.message||s.statusText||""});case 13:e.next=18;break;case 15:if(403!==s.status){e.next=17;break}return e.abrupt("return",{code:s.status,data:"操作失败，店铺未登录！"});case 17:return e.abrupt("return",{code:s.status,data:"操作失败".concat(s.statusText)});case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"操作异常： ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"putModelActive",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$shopeemanService.mixChinese(t,"/api/marketing/v3/discount/nominate/",i,{Headers:{"Content-Type":" application/json"}},"put");case 3:if(a=e.sent,s=a&&JSON.parse(a),console.log(s),!s||200!==s.status){e.next=15;break}if(n=JSON.parse(s.data),!n||0!==n.code){e.next=12;break}return e.abrupt("return",{code:200,data:n.data||[]});case 12:return e.abrupt("return",{code:50001,data:n.message||s.statusText||""});case 13:e.next=18;break;case 15:if(403!==s.status){e.next=17;break}return e.abrupt("return",{code:s.status,data:"操作失败，店铺未登录！"});case 17:return e.abrupt("return",{code:s.status,data:"操作失败".concat(s.statusText)});case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"操作异常： ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t,i){return e.apply(this,arguments)}return t}()}]),e}())},"78cd":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"contaniner"},[i("el-row",{staticClass:"header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isNoFoldShow,expression:"isNoFoldShow"}],staticClass:"nowrapBox"},[i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[e._v("店铺设置")]),i("storeChoose",{staticStyle:{"margin-bottom":"5px"},attrs:{spanWidth:"60px",source:"true","is-reset":!0,"is-ban-perform":e.isBanPerform},on:{changeMallList:e.changeMallList}}),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",[e._v("物流设置：")]),i("div",[i("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.logistics,callback:function(t){e.logistics=t},expression:"logistics"}},e._l(e.logisticsList,(function(t){return i("el-checkbox",{key:t.ShipId,attrs:{label:t.ShipId,disabled:e.isBanPerform}},[e._v(e._s(t.ShipName)+" ")])})),1),e.customLogistics[0]?i("div",[i("p",{staticStyle:{color:"var(--themeColor)"}},[e._v("确保此物流方式已在商家后台开启 "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请填写相应站点币种价格，此价格不可转换",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question"})])],1)],1),e._l(e.customLogistics,(function(t){return i("div",{key:t.ShipId,staticStyle:{"margin-bottom":"5px"}},[i("span",[e._v(e._s(t.ShipName))]),i("el-input",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{size:"mini"},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"item.price"}})],1)}))],2):e._e()],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("水印设置：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.storeConfig.watermarkChecked,callback:function(t){e.$set(e.storeConfig,"watermarkChecked",t)},expression:"storeConfig.watermarkChecked"}},[e._v("批量添加水印 ")]),i("el-button",{staticStyle:{"margin-left":"15px"},attrs:{disabled:e.isBanPerform,size:"mini",type:"primary"},on:{click:function(t){return e.setWatermark(1)}}},[e._v("水印配置 ")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("SKU价格：")]),i("div",[i("el-radio",{attrs:{label:0,disabled:e.isBanPerform},model:{value:e.storeConfig.priceRadio,callback:function(t){e.$set(e.storeConfig,"priceRadio",t)},expression:"storeConfig.priceRadio"}},[e._v("保留全部")]),i("el-radio",{attrs:{label:1,disabled:e.isBanPerform},model:{value:e.storeConfig.priceRadio,callback:function(t){e.$set(e.storeConfig,"priceRadio",t)},expression:"storeConfig.priceRadio"}},[e._v("删除最低价")]),i("el-radio",{attrs:{label:2,disabled:e.isBanPerform},model:{value:e.storeConfig.priceRadio,callback:function(t){e.$set(e.storeConfig,"priceRadio",t)},expression:"storeConfig.priceRadio"}},[e._v("删除最高价")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("商品设置：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.storeConfig.activityChecked,callback:function(t){e.$set(e.storeConfig,"activityChecked",t)},expression:"storeConfig.activityChecked"}},[e._v("添加到折扣活动或商品分类 ")]),i("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:function(t){return e.setSellActive()}}},[e._v("行销活动配置 ")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.storeConfig.chineseChecked,callback:function(t){e.$set(e.storeConfig,"chineseChecked",t)},expression:"storeConfig.chineseChecked"}},[i("el-checkbox",{staticStyle:{margin:"0"},attrs:{label:"允许上新中文",disabled:e.isBanPerform}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"勾选后，将不再检测商品信息中是否含有中文",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1),i("el-checkbox",{staticStyle:{"margin-left":"15px"},attrs:{label:"允许上新简体数据",disabled:e.isBanPerform||e.storeConfig.chineseChecked.length<1}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"勾选后，将不再检测商品语种是否为简体",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("图片上传线程数量： "),i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},on:{change:function(t){return e.changeStockUpNumber(e.storeConfig.pictureThread,4)}},model:{value:e.storeConfig.pictureThread,callback:function(t){e.$set(e.storeConfig,"pictureThread",t)},expression:"storeConfig.pictureThread"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"0<线程数量<6，建议数量为3",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"15px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.storeConfig.wordsHeavy,callback:function(t){e.$set(e.storeConfig,"wordsHeavy",t)},expression:"storeConfig.wordsHeavy"}},[e._v("标题内单词去重")])],1)]),"MY"===e.country||"ID"===e.country?i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("危险物品：")]),i("el-radio",{attrs:{label:0,disabled:e.isBanPerform},model:{value:e.storeConfig.dangerousRadio,callback:function(t){e.$set(e.storeConfig,"dangerousRadio",t)},expression:"storeConfig.dangerousRadio"}},[e._v("不是")]),i("el-radio",{attrs:{label:1,disabled:e.isBanPerform},model:{value:e.storeConfig.dangerousRadio,callback:function(t){e.$set(e.storeConfig,"dangerousRadio",t)},expression:"storeConfig.dangerousRadio"}},[e._v("包含电池/磁铁/易燃材料")])],1):e._e(),i("div",{staticClass:"basisInstall-box"},[i("el-button",{attrs:{size:"mini",disabled:e.isBanPerform,type:"primary"},on:{click:e.enterGoodsTag}},[e._v("标记商品标签")]),i("el-button",{attrs:{size:"mini",disabled:e.isBanPerform},on:{click:function(t){return e.enterCategory({})}}},[e._v("同步类目属性")]),i("el-button",{attrs:{size:"mini",disabled:e.isBanPerform,type:"primary"},on:{click:e.publishGoodsConfigSave}},[e._v("保存配置 ")])],1)],1),i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[e._v("基础设置")]),i("div",{staticClass:"basisInstall-box"},[i("el-radio",{attrs:{disabled:e.isBanPerform,label:1},model:{value:e.valuationRadio,callback:function(t){e.valuationRadio=t},expression:"valuationRadio"}},[e._v("计价方式一")]),i("el-radio",{attrs:{disabled:e.isBanPerform,label:2},model:{value:e.valuationRadio,callback:function(t){e.valuationRadio=t},expression:"valuationRadio"}},[e._v("计价方式二")]),i("el-radio",{attrs:{disabled:e.isBanPerform,label:3},model:{value:e.valuationRadio,callback:function(t){e.valuationRadio=t},expression:"valuationRadio"}},[e._v("计价方式三")])],1),1===e.valuationRadio?i("div",[i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("基础加价：")]),i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:e.basicConfig.formula.percentage,callback:function(t){e.$set(e.basicConfig.formula,"percentage",t)},expression:"basicConfig.formula.percentage"}}),e._v(" %　+　基础价 "),i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:e.basicConfig.formula.basis,callback:function(t){e.$set(e.basicConfig.formula,"basis",t)},expression:"basicConfig.formula.basis"}}),e._v(" 　+　藏价 "),i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.basicConfig.formula.hidden,callback:function(t){e.$set(e.basicConfig.formula,"hidden",t)},expression:"basicConfig.formula.hidden"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"加价方式：原价+原价*百分百+基础价+藏价",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("商品折扣：")]),i("div",[i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:e.basicConfig.discount,callback:function(t){e.$set(e.basicConfig,"discount",t)},expression:"basicConfig.discount"}}),e._v(" % "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"例：25（加价完成后价格） / 0.5（商品折扣为50%）",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"10px"}},[e._v("计价方式：")]),i("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.isBanPerform,label:0},model:{value:e.basicConfig.valuationMethodsRadio,callback:function(t){e.$set(e.basicConfig,"valuationMethodsRadio",t)},expression:"basicConfig.valuationMethodsRadio"}},[e._v("以折扣价为准 ")]),i("el-radio",{attrs:{disabled:e.isBanPerform,label:1},model:{value:e.basicConfig.valuationMethodsRadio,callback:function(t){e.$set(e.basicConfig,"valuationMethodsRadio",t)},expression:"basicConfig.valuationMethodsRadio"}},[e._v("以零售价为准 ")])],1)]):e._e(),2===e.valuationRadio?i("div",[i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("计价方式：")]),i("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{disabled:e.isBanPerform,label:0},model:{value:e.basicConfig.valuationMethodsRadio,callback:function(t){e.$set(e.basicConfig,"valuationMethodsRadio",t)},expression:"basicConfig.valuationMethodsRadio"}},[e._v("以折扣价为准 ")]),i("el-radio",{attrs:{disabled:e.isBanPerform,label:1},model:{value:e.basicConfig.valuationMethodsRadio,callback:function(t){e.$set(e.basicConfig,"valuationMethodsRadio",t)},expression:"basicConfig.valuationMethodsRadio"}},[e._v("以零售价为准 ")]),i("el-button",{attrs:{disabled:e.isBanPerform,size:"mini",type:"primary"},on:{click:e.valuationInit}},[e._v("计价配置")])],1)]):e._e(),3===e.valuationRadio?i("div",[i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("商品价格：")]),i("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.basicConfig.fixedPrice,callback:function(t){e.$set(e.basicConfig,"fixedPrice",t)},expression:"basicConfig.fixedPrice"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个热搜词之间以逗号隔开，不进行翻译",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)]):e._e(),i("div",{staticClass:"basisInstall-box"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",[e._v("添加热搜词：")]),i("el-radio",{staticStyle:{"margin-right":"15px","line-height":"28px"},attrs:{disabled:e.isBanPerform,label:0},model:{value:e.basicConfig.headlineRadio,callback:function(t){e.$set(e.basicConfig,"headlineRadio",t)},expression:"basicConfig.headlineRadio"}},[e._v(" 标题前加 ")]),i("el-radio",{staticStyle:{"margin-right":"20px","line-height":"28px"},attrs:{disabled:e.isBanPerform,label:1},model:{value:e.basicConfig.headlineRadio,callback:function(t){e.$set(e.basicConfig,"headlineRadio",t)},expression:"basicConfig.headlineRadio"}},[e._v(" 标题后加 ")]),i("div",[e._v("热搜词随机个数 "),i("el-input",{staticStyle:{width:"60px","margin-left":"5px"},attrs:{size:"mini"},model:{value:e.basicConfig.hotSearch,callback:function(t){e.$set(e.basicConfig,"hotSearch",t)},expression:"basicConfig.hotSearch"}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个热搜词之间以逗号隔开，不进行翻译",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{width:"95%","margin-top":"5px"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,resize:"none",placeholder:"请输入热搜词,以逗号隔开"},model:{value:e.basicConfig.hotList,callback:function(t){e.$set(e.basicConfig,"hotList",t)},expression:"basicConfig.hotList"}})],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("禁运设置：")]),i("div",[i("el-checkbox",{attrs:{disabled:e.isBanPerform,size:"mini"},model:{value:e.basicConfig.embargoChecked1,callback:function(t){e.$set(e.basicConfig,"embargoChecked1",t)},expression:"basicConfig.embargoChecked1"}},[e._v("启动禁运类目拦截 ")]),i("el-checkbox",{attrs:{disabled:e.isBanPerform,size:"mini"},model:{value:e.basicConfig.embargoChecked2,callback:function(t){e.$set(e.basicConfig,"embargoChecked2",t)},expression:"basicConfig.embargoChecked2"}},[e._v("启动禁运词拦截 ")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("商品重量：")]),i("div",[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.basicConfig.minHeavy,callback:function(t){e.$set(e.basicConfig,"minHeavy",t)},expression:"basicConfig.minHeavy"}}),e._v(" - "),i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:e.basicConfig.maxHeavy,callback:function(t){e.$set(e.basicConfig,"maxHeavy",t)},expression:"basicConfig.maxHeavy"}}),e._v(" kg "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"商品重量默认随机0.1 - 1kg",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"15px"}},[e._v("类目映射：")]),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.basicConfig.categoryMapping,callback:function(t){e.$set(e.basicConfig,"categoryMapping",t)},expression:"basicConfig.categoryMapping"}},e._l(e.categoryMappingList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("Shopee商品类目：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.basicConfig.sourceCategoryChecked,callback:function(t){e.$set(e.basicConfig,"sourceCategoryChecked",t)},expression:"basicConfig.sourceCategoryChecked"}},[e._v(" 使用Shopee采集商品源类目 ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Shopee商品只有类目能使用商品源类目，属性只能选择默认！",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("预购：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.basicConfig.stockUpChecked,callback:function(t){e.$set(e.basicConfig,"stockUpChecked",t)},expression:"basicConfig.stockUpChecked"}},[e._v("是否较长时间备货 ")]),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini",min:7,max:30},on:{change:function(t){return e.changeStockUpNumber(e.basicConfig.stockUpNumber,1)}},model:{value:e.basicConfig.stockUpNumber,callback:function(t){e.$set(e.basicConfig,"stockUpNumber",t)},expression:"basicConfig.stockUpNumber"}}),e._v(" 天 "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"如果备货最短"+e.preorderMinDays+"天，最长"+e.preorderMaxDays+"天",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),"TW"===e.country?i("div",[e._v("最小购物数：")]):e._e(),"TW"===e.country?i("div",[i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},model:{value:e.basicConfig.min_purchase_limit,callback:function(t){e.$set(e.basicConfig,"min_purchase_limit",t)},expression:"basicConfig.min_purchase_limit"}})],1):e._e()]),i("div",{staticClass:"basisInstall-box"},[i("div",[e._v("上新线程：")]),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},on:{change:function(t){return e.changeStockUpNumber(e.basicConfig.onNewThread,2)}},model:{value:e.basicConfig.onNewThread,callback:function(t){e.$set(e.basicConfig,"onNewThread",t)},expression:"basicConfig.onNewThread"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请根据电脑配置合理设置上新线程数，最大为5",min:1,max:5,placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1),i("div",{staticStyle:{"margin-left":"25px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.basicConfig.numberCeilingChecked,callback:function(t){e.$set(e.basicConfig,"numberCeilingChecked",t)},expression:"basicConfig.numberCeilingChecked"}},[e._v("单店店铺上货数量上限 ")]),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},model:{value:e.basicConfig.numberCeiling,callback:function(t){e.$set(e.basicConfig,"numberCeiling",t)},expression:"basicConfig.numberCeiling"}})],1)],1),i("div",{staticClass:"basisInstall-box"},[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.basicConfig.usedChecked,callback:function(t){e.$set(e.basicConfig,"usedChecked",t)},expression:"basicConfig.usedChecked"}},[e._v("是否二手商品")]),i("div",{staticStyle:{"margin-left":"15px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.basicConfig.deleteCollectChecked,callback:function(t){e.$set(e.basicConfig,"deleteCollectChecked",t)},expression:"basicConfig.deleteCollectChecked"}},[e._v("上新后删除收藏商品 ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除商品库中的原商品（不适用于一商品多店铺模式）",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"15px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.basicConfig.autoCompleteChecked,callback:function(t){e.$set(e.basicConfig,"autoCompleteChecked",t)},expression:"basicConfig.autoCompleteChecked"}},[e._v("自动补齐9张轮播主图 ")])],1)],1)]),i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[e._v("防关联设置")]),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("商品标题：")]),i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.specialCharChecked,callback:function(t){e.$set(e.associatedConfig,"specialCharChecked",t)},expression:"associatedConfig.specialCharChecked"}},[e._v("随机加入特殊字符 ")]),i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.realNameChecked,callback:function(t){e.$set(e.associatedConfig,"realNameChecked",t)},expression:"associatedConfig.realNameChecked"}},[e._v("开头加上店铺真实名 ")])],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("上新时间间隔：")]),i("el-input",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{size:"mini"},model:{value:e.associatedConfig.onNewInterval,callback:function(t){e.$set(e.associatedConfig,"onNewInterval",t)},expression:"associatedConfig.onNewInterval"}}),e._v(" S "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认印尼站点上新时间间隔为50S，其他站点为40S",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("重复上新维度：")]),i("el-radio",{attrs:{label:1,disabled:e.isBanPerform},model:{value:e.associatedConfig.dimensionRadio,callback:function(t){e.$set(e.associatedConfig,"dimensionRadio",t)},expression:"associatedConfig.dimensionRadio"}},[e._v("站点")]),i("el-radio",{attrs:{label:0,disabled:e.isBanPerform},model:{value:e.associatedConfig.dimensionRadio,callback:function(t){e.$set(e.associatedConfig,"dimensionRadio",t)},expression:"associatedConfig.dimensionRadio"}},[e._v("店铺")]),i("el-radio",{staticStyle:{"margin-right":"0"},attrs:{label:2,disabled:e.isBanPerform},on:{change:e.accountPermissions},model:{value:e.associatedConfig.dimensionRadio,callback:function(t){e.$set(e.associatedConfig,"dimensionRadio",t)},expression:"associatedConfig.dimensionRadio"}},[e._v("一商品多店铺 ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"同一商品上新到不同店铺中，为避免重复铺货，请配合热搜词使用",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),2===e.associatedConfig.dimensionRadio?i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("商品价格幅度：")]),e._v(" 一商品多店铺上新价格幅度± "),i("el-input",{staticStyle:{width:"80px",margin:"0 5px"},attrs:{size:"mini",oninput:"value=value.replace(/[^0-9]+/g,'')"},on:{change:function(t){return e.changeStockUpNumber(e.associatedConfig.priceRange,3)}},model:{value:e.associatedConfig.priceRange,callback:function(t){e.$set(e.associatedConfig,"priceRange",t)},expression:"associatedConfig.priceRange"}}),e._v(" % "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"避免同一商品在多个店铺中价格相同，最大幅度10%，不设置请填入0",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1):e._e(),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"keepRight"},[e._v("图片设置：")]),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center",flex:"1"}},[i("div",{staticStyle:{width:"100%"}},[2===e.associatedConfig.dimensionRadio?i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.pictureSetting.mainRandomChecked,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"mainRandomChecked",t)},expression:"associatedConfig.pictureSetting.mainRandomChecked"}},[e._v("随机主图 ")]):e._e(),i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.pictureSetting.firstChecked,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"firstChecked",t)},expression:"associatedConfig.pictureSetting.firstChecked"}},[e._v("删除首图 ")]),i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.pictureSetting.cutChecked,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"cutChecked",t)},expression:"associatedConfig.pictureSetting.cutChecked"}},[e._v(" 图片删减 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.pictureSetting.randomChecked,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"randomChecked",t)},expression:"associatedConfig.pictureSetting.randomChecked"}},[e._v("图片顺序随机 ")]),i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.pictureSetting.whiteChecked,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"whiteChecked",t)},expression:"associatedConfig.pictureSetting.whiteChecked"}},[e._v("首图白底 ")])],1),i("div",{staticStyle:{width:"100%"}},[e._v(" 将第 "),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},model:{value:e.associatedConfig.pictureSetting.index,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"index",t)},expression:"associatedConfig.pictureSetting.index"}}),e._v(" 张设为封面 ")],1),i("el-checkbox",{attrs:{size:"mini"},model:{value:e.associatedConfig.pictureSetting.compressionChecked,callback:function(t){e.$set(e.associatedConfig.pictureSetting,"compressionChecked",t)},expression:"associatedConfig.pictureSetting.compressionChecked"}},[e._v("自动压缩图片")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"商品图片超过1MB时，将压缩图片",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("图片缺失上传：")]),i("el-checkbox",{attrs:{size:"mini",disabled:e.isBanPerform},model:{value:e.associatedConfig.missingUploadChecked,callback:function(t){e.$set(e.associatedConfig,"missingUploadChecked",t)},expression:"associatedConfig.missingUploadChecked"}},[e._v(" 是否允许图片缺失上传 ")])],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("关键词过滤：")]),i("div",[i("el-select",{staticStyle:{width:"180px"},attrs:{multiple:"","collapse-tags":"",size:"mini"},model:{value:e.associatedConfig.keyFilter,callback:function(t){e.$set(e.associatedConfig,"keyFilter",t)},expression:"associatedConfig.keyFilter"}},[i("el-option",{attrs:{label:"全部",value:0},nativeOn:{click:function(t){return e.keyFilterChange(1,!0)}}}),e._l(e.keyFilterList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value},nativeOn:{click:function(t){return e.keyFilterChange(1)}}})}))],2),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个关键词之间以逗号隔开，不进行翻译",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"separation"},[i("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:3,resize:"none",placeholder:"请输入关键词,以逗号隔开"},model:{value:e.associatedConfig.keyList,callback:function(t){e.$set(e.associatedConfig,"keyList",t)},expression:"associatedConfig.keyList"}})],1)])]),i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[e._v("数据统计")]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[e._v("商品总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.statistics.count))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[e._v("成功总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.statistics.success))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[e._v("失败总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.statistics.failure))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[e._v("重复总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.statistics.repeat))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[e._v("过滤总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.statistics.filter))])])])]),i("div",{staticClass:"nowrapBox"},[i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:e.startRelease}},[e._v("开始发布")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform,disabled:""}},[e._v("导入数据")]),i("el-button",{attrs:{size:"mini"},on:{click:e.cancelRelease}},[e._v("取消发布")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:function(t){return e.deleteGoodsList(!0)}}},[e._v("清理全部")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:e.setTimeShow}},[e._v("设置定时任务")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:function(t){return e.enterCategory(2,1)}}},[e._v("批量映射虾皮类目 ")]),i("el-button",{attrs:{size:"mini",type:e.isNoFoldShow?"primary":""},on:{click:function(t){e.isNoFoldShow=!e.isNoFoldShow}}},[e._v(" "+e._s(e.isNoFoldShow?"折叠":"展开")+" ")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform}},[e._v("清理类目缓存")]),i("div",{staticStyle:{"margin-left":"10px"}},[e._v("源商品类目： "),i("el-select",{staticClass:"source-category",attrs:{multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:e.sourceCategory,callback:function(t){e.sourceCategory=t},expression:"sourceCategory"}},[i("el-option",{attrs:{label:"全部",value:0},nativeOn:{click:function(t){return e.keyFilterChange(2,!0)}}}),e._l(e.sourceCategoryList,(function(t,a){return i("el-option",{key:a,attrs:{label:t,value:t},nativeOn:{click:function(t){return e.keyFilterChange(2)}}})}))],2)],1),i("div",{staticStyle:{"margin-left":"10px"}},[e._v("发布结果过滤： "),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.resultsFilter,callback:function(t){e.resultsFilter=t},expression:"resultsFilter"}},e._l(e.resultsFilterList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:function(t){return e.queryGoodsTable()}}},[e._v("查询 ")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:function(t){return e.deleteGoodsList()}}},[e._v("删除")]),i("div",{staticStyle:{"margin-left":"10px",display:"flex","align-items":"center"}},[i("span",[e._v("上新进度：")]),i("el-progress",{staticStyle:{width:"180px"},attrs:{"text-inside":!0,"stroke-width":18,percentage:e.mewOnProgress}})],1)],1)]),e.isRefreshTable?i("u-table",{ref:"goodsTable",attrs:{data:e.goodsTable,"row-key":"id","use-virtual":"","data-changes-scroll-top":!1,"header-cell-style":{backgroundColor:"#f5f7fa"},border:!1,"big-data-checkbox":!0,height:e.isNoFoldShow&&(2===e.associatedConfig.dimensionRadio?340:341)||745},on:{"selection-change":e.handleSelectionChange}},[i("u-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),i("u-table-column",{attrs:{align:"center",label:"序列号",type:"index",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,3056706777)}),i("u-table-column",{attrs:{align:"center",label:"商品主图",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-tooltip",{staticStyle:{width:"56px",height:"56px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:a.image}})],1),i("el-image",{staticStyle:{width:"56px",height:"56px"},attrs:{src:e._f("changeImgSizeFilter")({url:a.image,source:a.source})}})],1)]}}],null,!1,3963843861)}),i("u-table-column",{attrs:{align:"left",label:"上家商品Id",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticStyle:{display:"flex"}},[i("el-button",{staticClass:"copyIcon",attrs:{type:"text"},on:{click:function(t){return e.copy(a.goods_id)}}},[i("i",{staticClass:"el-icon-document-copy"})]),i("span",{staticClass:"goToGoods",on:{click:function(t){return t.stopPropagation(),e.goToGoods(a)}}},[e._v(e._s(a.goods_id))])],1)]}}],null,!1,3341428813)}),i("u-table-column",{attrs:{align:"left",label:"shopee-Id",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticStyle:{display:"flex"}},[a.product_id?i("el-button",{staticClass:"copyIcon",attrs:{type:"text"},on:{click:function(t){return e.copy(a.product_id)}}},[i("i",{staticClass:"el-icon-document-copy"})]):e._e(),i("span",{staticClass:"goToGoods",on:{click:function(t){return t.stopPropagation(),e.goToGoods(a,1)}}},[e._v(e._s(a.product_id||""))])],1)]}}],null,!1,945743986)}),i("u-table-column",{attrs:{align:"left",label:"标题","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticClass:"goodsTableLine"},[e._v(" "+e._s(a.title)+" ")])]}}],null,!1,2250548629)}),i("u-table-column",{attrs:{align:"left",label:"店铺",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(e._s(i.mallName||"")+" ")]}}],null,!1,2445695647)}),i("u-table-column",{attrs:{align:"left",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticClass:"goodsTableLine",style:"color:"+a.color},[e._v(" "+e._s(a.statusName)+" ")])]}}],null,!1,3621848083)}),i("u-table-column",{attrs:{align:"left",label:"源平台类目",prop:"category_name",width:"114","show-overflow-tooltip":""}}),i("u-table-column",{attrs:{align:"left",label:"shopee类目","show-overflow-tooltip":"",prop:"categoryName",width:"114"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.enterCategory(0,t.row)}}},[e._v(" "+e._s(t.row.categoryName||e.getGoodsClassName(t.row.category_id)||"请选择类目")+" ")])]}}],null,!1,1014937537)}),2===e.associatedConfig.dimensionRadio?i("u-table-column",{attrs:{align:"left",label:"上新状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.viewDetails(a.id)}}},[e._v(" 上新详情 ")])]}}],null,!1,867131494)}):e._e(),i("u-table-column",{attrs:{align:"left",label:"价格",prop:"price",width:"80"}}),i("u-table-column",{attrs:{align:"left",label:"上新价格(RMB)",prop:"CalAfterPriceRMB",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(e.getValuationPrice(i.price,i))+" ")]}}],null,!1,314500989)}),i("u-table-column",{attrs:{align:"left",label:"上新价格("+e.$filters.siteCoin(e.country)+")",prop:"CalAfterPrice",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(Math.ceil(e.getValuationPrice(i.price,i)/e.rateList[e.country]))+" ")]}}],null,!1,2903771936)}),i("u-table-column",{attrs:{align:"left",label:"销量",prop:"sales",width:"80"}}),i("u-table-column",{attrs:{align:"left",label:"标签",prop:"sys_label_name",width:"80","show-overflow-tooltip":""}}),i("u-table-column",{attrs:{align:"left",label:"来源",prop:"sourceName",width:"80"}}),i("u-table-column",{attrs:{align:"center",label:"操作",prop:"sourceName",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:function(t){return e.updateGoodsEdit(a,1)}}},[e._v("编辑 ")])]}}],null,!1,401433717)})],1):e._e(),i("div",{staticClass:"on_new_dialog"},[i("el-dialog",{attrs:{title:"水印配置",width:"500px","close-on-click-modal":!1,top:"10vh",visible:e.watermarkVisible},on:{"update:visible":function(t){e.watermarkVisible=t}}},[i("div",{staticClass:"watermark_dialog"},[i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("水印类型：")]),i("div",[i("el-radio",{attrs:{label:1},model:{value:e.watermarkConfig.type,callback:function(t){e.$set(e.watermarkConfig,"type",t)},expression:"watermarkConfig.type"}},[e._v("文字水印")]),i("el-radio",{attrs:{label:2},model:{value:e.watermarkConfig.type,callback:function(t){e.$set(e.watermarkConfig,"type",t)},expression:"watermarkConfig.type"}},[e._v("图片水印")]),i("el-radio",{attrs:{label:3},model:{value:e.watermarkConfig.type,callback:function(t){e.$set(e.watermarkConfig,"type",t)},expression:"watermarkConfig.type"}},[e._v("商品背景图")])],1)]),i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("图片类型配置：")]),i("div",[i("el-radio",{attrs:{label:0},model:{value:e.watermarkConfig.addType,callback:function(t){e.$set(e.watermarkConfig,"addType",t)},expression:"watermarkConfig.addType"}},[e._v("首图")]),i("el-radio",{attrs:{label:1},model:{value:e.watermarkConfig.addType,callback:function(t){e.$set(e.watermarkConfig,"addType",t)},expression:"watermarkConfig.addType"}},[e._v("全部")])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.watermarkConfig.type,expression:"watermarkConfig.type === 1"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("水印文字：")]),i("div",[i("el-radio",{staticStyle:{margin:"0"},attrs:{label:1},model:{value:e.watermarkConfig.textType,callback:function(t){e.$set(e.watermarkConfig,"textType",t)},expression:"watermarkConfig.textType"}},[e._v("店铺别名")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"选择店铺别名时，若无别名则使用店铺真实名",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px","margin-right":"15px"}})])],1),i("el-radio",{staticStyle:{margin:"0 15px 0 0"},attrs:{label:2},model:{value:e.watermarkConfig.textType,callback:function(t){e.$set(e.watermarkConfig,"textType",t)},expression:"watermarkConfig.textType"}},[e._v("店铺真实名")]),i("el-radio",{staticStyle:{margin:"0"},attrs:{label:3},model:{value:e.watermarkConfig.textType,callback:function(t){e.$set(e.watermarkConfig,"textType",t)},expression:"watermarkConfig.textType"}},[e._v("店铺设置的水印文字")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"选择店铺设置的水印文字时，未设置则默认使用店铺名称",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px","margin-right":"15px"}})])],1)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:1!==e.watermarkConfig.type,expression:"watermarkConfig.type !== 1"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("示例图选择：")]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{"margin-right":"25px",display:"flex","flex-flow":"row","justify-content":"center","align-items":"center"}},[i("div",{staticStyle:{"text-align":"justify","text-align-last":"justify",display:"inline-block",width:"20px"}},[e._v("商品图")]),i("div",{staticClass:"watermarkConfig_img",on:{click:e.watermarkPreview1}},[e.watermarkConfig.goodsImg?i("el-image",{staticClass:"avatar",attrs:{src:e.watermarkConfig.goodsImg}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),i("div",{staticStyle:{display:"flex","flex-flow":"row","justify-content":"center","align-items":"center"}},[i("div",{staticStyle:{"text-align":"justify","text-align-last":"justify",width:"20px"}},[e._v("水印图")]),i("div",{staticClass:"watermarkConfig_img",on:{click:e.watermarkPreview2}},[e.watermarkConfig.watermarkImg?i("el-image",{staticClass:"avatar",attrs:{src:e.watermarkConfig.watermarkImg}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),e.uploadImgAdd?i("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{action:"#","list-type":"picture-card",drag:!0,"show-file-list":!1,limit:1,"auto-upload":!1,"on-change":e.watermarkPreview}},[i("el-button",{ref:"uploadImg",attrs:{size:"mini",type:"primary"}},[e._v("选择图片")])],1):e._e()],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.watermarkConfig.type,expression:"watermarkConfig.type === 2"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("图片透明度：")]),i("el-slider",{staticStyle:{width:"65%"},attrs:{"show-input":"","input-size":"mini",min:0,max:1,step:.1},model:{value:e.watermarkConfig.clarity,callback:function(t){e.$set(e.watermarkConfig,"clarity",t)},expression:"watermarkConfig.clarity"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:3!==e.watermarkConfig.type,expression:"watermarkConfig.type !== 3"}],staticClass:"on_new_dialog_box"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",{staticClass:"keepRight"},[e._v("水印位置：")]),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:e.watermarkConfig.locate,callback:function(t){e.$set(e.watermarkConfig,"locate",t)},expression:"watermarkConfig.locate"}},e._l(e.locateList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.watermarkConfig.type,expression:"watermarkConfig.type === 1"}],staticStyle:{display:"flex","align-items":"center","margin-left":"15px"}},[i("div",{staticClass:"keepRight"},[e._v("水印文字大小：")]),i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:e.watermarkConfig.textSize,callback:function(t){e.$set(e.watermarkConfig,"textSize",t)},expression:"watermarkConfig.textSize"}}),i("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:e.watermarkConfig.textColor,callback:function(t){e.$set(e.watermarkConfig,"textColor",t)},expression:"watermarkConfig.textColor"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"水印文字大小最小为12，水印文字颜色默认为灰白色（#D5D4DA）",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px","margin-right":"15px"}})])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.watermarkConfig.type,expression:"watermarkConfig.type === 2"}],staticStyle:{display:"flex","align-items":"center"}},[i("div",{staticClass:"keepRight"},[e._v("图片大小：")]),i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini"},model:{value:e.watermarkConfig.imgSize,callback:function(t){e.$set(e.watermarkConfig,"imgSize",t)},expression:"watermarkConfig.imgSize"}},e._l(e.imgSizeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"justify-content":"center","margin-top":"5px"}},[i("div",{staticClass:"watermark_palette"},[i("div",{staticClass:"goods_image"},[i("img",{attrs:{src:e.watermarkConfig.goodsImg||"",alt:""}})]),i("div",{staticClass:"watermark_image",class:e.watermarkConfig.type<3&&e.locateClass||"watermark_image_background"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===e.watermarkConfig.type,expression:"watermarkConfig.type === 1"}],style:"font-size:"+e.watermarkConfig.textSize+"px!important;color:"+e.watermarkConfig.textColor},[e._v(" "+e._s(e.watermarkConfig.text)+" ")]),i("img",{directives:[{name:"show",rawName:"v-show",value:1!==e.watermarkConfig.type,expression:"watermarkConfig.type !== 1"}],style:2===e.watermarkConfig.type&&"opacity: "+e.watermarkConfig.clarity||"",attrs:{src:e.watermarkConfig.watermarkImg||"",alt:""}})])])]),i("div",{staticStyle:{display:"flex","justify-content":"space-evenly"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.setWatermark()}}},[e._v("提交")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.watermarkVisible=!1}}},[e._v("退出")])],1)])]),i("el-dialog",{attrs:{title:"行销活动设置",width:"700px","close-on-click-modal":!1,top:"10vh",visible:e.sellActiveVisible},on:{"update:visible":function(t){e.sellActiveVisible=t}}},[i("div",{staticClass:"sell_active_dialog"},[i("div",{staticClass:"on_new_dialog_box"},[e._v(" 添加活动商品，请配置折扣活动信息或商店分类信息 ")]),i("div",{staticClass:"on_new_dialog_box"},[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.downloadTemplate}},[e._v("下载模板")]),i("el-upload",{ref:"importRef",attrs:{accept:".xls, .xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.importTemplateEvent,"show-file-list":!1,"auto-upload":!1}},[i("el-button",{attrs:{data:e.importTemplateData,size:"mini",type:"primary"}},[e._v(" 导入模板 ")])],1)],1),i("div",{staticClass:"on_new_dialog_box"},[i("u-table",{attrs:{data:e.sellActiveTable,"tooltip-effect":"dark",height:"450"}},[i("u-table-column",{attrs:{label:"店铺名称",align:"left","show-overflow-tooltip":!0,"min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(i.country)+"-"+e._s(i.mall_alias_name||i.platform_mall_name)+" ")]}}])}),i("u-table-column",{attrs:{label:"活动折扣配置",align:"left",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-checkbox",{attrs:{size:"mini"},model:{value:t.row.isExisting,callback:function(i){e.$set(t.row,"isExisting",i)},expression:"scope.row.isExisting"}},[e._v("使用已有活动ID")]),i("el-input",{staticStyle:{width:"120px",margin:"0 5px"},attrs:{size:"mini"},model:{value:t.row.discountId,callback:function(i){e.$set(t.row,"discountId",i)},expression:"scope.row.discountId"}}),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.setSellActive(t.row)}}},[e._v(e._s(t.row.isExisting?"配置折扣":"创建活动")+" ")])],1)]}}])}),i("u-table-column",{attrs:{align:"left",width:"142px"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" 商品分类ID "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分类ID请至【商品管理】 - 【商店分类】中查看",placement:"top-end"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)]}},{key:"default",fn:function(t){return[i("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.row.goodsId,callback:function(i){e.$set(t.row,"goodsId",i)},expression:"scope.row.goodsId"}})]}}])})],1)],1),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"justify-content":"space-evenly"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.updateSellActive(1)}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sellActiveVisible=!1}}},[e._v("取消")])],1)])]),i("el-dialog",{attrs:{title:e.sellActiveCurrent.isExisting?"配置折扣":"创建活动",width:"350px",top:"25vh",visible:e.setSellActiveVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.setSellActiveVisible=t}}},[i("div",{staticClass:"sell_active_dialog"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.sellActiveCurrent.isExisting,expression:"!sellActiveCurrent.isExisting"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("活动名称：")]),i("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:e.sellActiveCurrent.name,callback:function(t){e.$set(e.sellActiveCurrent,"name",t)},expression:"sellActiveCurrent.name"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.sellActiveCurrent.isExisting,expression:"!sellActiveCurrent.isExisting"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("活动开始时间：")]),i("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"datetime",size:"mini",placeholder:"选择开始时间"},model:{value:e.sellActiveCurrent.startTime,callback:function(t){e.$set(e.sellActiveCurrent,"startTime",t)},expression:"sellActiveCurrent.startTime"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.sellActiveCurrent.isExisting,expression:"!sellActiveCurrent.isExisting"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("活动结束时间：")]),i("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"datetime",size:"mini",placeholder:"选择结束时间"},model:{value:e.sellActiveCurrent.endTime,callback:function(t){e.$set(e.sellActiveCurrent,"endTime",t)},expression:"sellActiveCurrent.endTime"}})],1),i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("活动折扣：")]),i("el-input",{staticStyle:{width:"180px","margin-right":"5px"},attrs:{size:"mini"},model:{value:e.sellActiveCurrent.discount,callback:function(t){e.$set(e.sellActiveCurrent,"discount",t)},expression:"sellActiveCurrent.discount"}}),e._v(" % "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折扣价格 = 商品原价 * 折扣%，如原价1000的商品，输入80折扣的折扣价格为800",placement:"top-end"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[e._v("限购数量：")]),i("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:e.sellActiveCurrent.number,callback:function(t){e.$set(e.sellActiveCurrent,"number",t)},expression:"sellActiveCurrent.number"}})],1),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"justify-content":"space-evenly"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.updateSellActive()}}},[e._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.setSellActiveVisible=!1}}},[e._v("取消")])],1)])]),i("el-dialog",{attrs:{title:"商品标签",width:"300px",top:"25vh","close-on-click-modal":!1,visible:e.goodsTagVisible},on:{"update:visible":function(t){e.goodsTagVisible=t}}},[e.goodsTagVisible?i("goodsLabel",{attrs:{"goods-table-select":e.goodsTableSelect},on:{goodsTagChange:e.goodsTagChange}}):e._e()],1),i("el-dialog",{attrs:{title:"类目映射",width:"700px",top:"25vh","close-on-click-modal":!1,visible:e.categoryVisible},on:{"update:visible":function(t){e.categoryVisible=t}}},[e.categoryVisible?i("categoryMapping",{attrs:{country:e.country,"goods-current":e.goodsCurrent,"mall-list":e.mallList},on:{categoryChange:e.categoryChange}}):e._e()],1),i("el-dialog",{attrs:{title:"计价助手",width:"900px",top:"15vh","close-on-click-modal":!1,visible:e.valuationVisible},on:{"update:visible":function(t){e.valuationVisible=t}}},[i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[e._v("配置区"),i("span",{staticStyle:{color:"red"}},[e._v("(必填)")])]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",[e._v("标签：")]),i("el-select",{attrs:{value:"",size:"mini"},model:{value:e.valuationLabel,callback:function(t){e.valuationLabel=t},expression:"valuationLabel"}},e._l(e.valuationLabelList,(function(e,t){return i("el-option",{key:t,attrs:{value:e.id,label:e.label}})})),1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可设置常用的标签，保存区域运费比例数据",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("运送方式：")]),i("el-select",{attrs:{value:"",size:"mini"},model:{value:e.valuationConfig.shippingMethod,callback:function(t){e.$set(e.valuationConfig,"shippingMethod",t)},expression:"valuationConfig.shippingMethod"}},e._l(e.shippingMethodList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"小件计重商品一般选择空运方式；大件商品视您实际情况选择陆运或海运方式",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("货物类型：")]),i("el-select",{attrs:{value:"",size:"mini"},model:{value:e.valuationConfig.goodsType,callback:function(t){e.$set(e.valuationConfig,"goodsType",t)},expression:"valuationConfig.goodsType"}},e._l(e.goodsTypeList,(function(e,t){return i("el-option",{key:t,attrs:{value:"",label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("交易手续费(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.transactionCommission,callback:function(t){e.$set(e.valuationConfig,"transactionCommission",t)},expression:"valuationConfig.transactionCommission"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("仓库服务费(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.warehouseServiceCharge,callback:function(t){e.$set(e.valuationConfig,"warehouseServiceCharge",t)},expression:"valuationConfig.warehouseServiceCharge"}})],1)]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap",margin:"10px 0"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("折扣率(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.discount,callback:function(t){e.$set(e.valuationConfig,"discount",t)},expression:"valuationConfig.discount"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折扣率：折扣需在行销活动中自行设置商品折扣",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("毛利率(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.grossProfitMargin,callback:function(t){e.$set(e.valuationConfig,"grossProfitMargin",t)},expression:"valuationConfig.grossProfitMargin"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("提现手续费(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.withdrawalCharge,callback:function(t){e.$set(e.valuationConfig,"withdrawalCharge",t)},expression:"valuationConfig.withdrawalCharge"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("清关费：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.customsClearanceFee,callback:function(t){e.$set(e.valuationConfig,"customsClearanceFee",t)},expression:"valuationConfig.customsClearanceFee"}})],1)]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item",staticStyle:{"padding-right":"18px"}},[i("div",{staticClass:"item-name"},[e._v("其他杂费：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.valuationConfig.other,callback:function(t){e.$set(e.valuationConfig,"other",t)},expression:"valuationConfig.other"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("泡重计算比：")]),i("el-input",{attrs:{size:"mini"},on:{input:function(t){return e.$set(e.calculateReference,"bubbleHeavyNum",e.valuationConfig.bubbleHeavy)}},model:{value:e.valuationConfig.bubbleHeavy,callback:function(t){e.$set(e.valuationConfig,"bubbleHeavy",t)},expression:"valuationConfig.bubbleHeavy"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"泡重计算比：泡重计算公式为：长*宽*高/泡重计算比，请填写相应货代的计算比",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(t){e.freightVisible=!0}}},[e._v("运费设置")])],1),i("div",{staticClass:"basisInstall-box-item"},[i("span",{staticStyle:{display:"inline-block",width:"100px"}})])])]),i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[e._v("计算参考")]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap","margin-bottom":"10px"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("长(CM)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.calculateReference.long,callback:function(t){e.$set(e.calculateReference,"long",t)},expression:"calculateReference.long"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("宽(CM)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.calculateReference.width,callback:function(t){e.$set(e.calculateReference,"width",t)},expression:"calculateReference.width"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("高(CM)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.calculateReference.height,callback:function(t){e.$set(e.calculateReference,"height",t)},expression:"calculateReference.height"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"})]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("成本(RMB)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.calculateReference.costing,callback:function(t){e.$set(e.calculateReference,"costing",t)},expression:"calculateReference.costing"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("重量(g)：")]),i("el-input",{attrs:{size:"mini"},model:{value:e.calculateReference.weight,callback:function(t){e.$set(e.calculateReference,"weight",t)},expression:"calculateReference.weight"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("泡重(g)：")]),i("el-input",{staticStyle:{"pointer-events":"none"},attrs:{size:"mini"},model:{value:e.calculateReference.bubbleHeavy,callback:function(t){e.$set(e.calculateReference,"bubbleHeavy",t)},expression:"calculateReference.bubbleHeavy"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"})])]),i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("el-button",{staticStyle:{margin:"0 25px"},attrs:{size:"mini",type:"primary"},on:{click:e.saveCalculate}},[e._v("确认")]),i("el-button",{staticStyle:{margin:"0 25px"},attrs:{size:"mini",type:"primary"},on:{click:e.saveCalculateLabel}},[e._v("保存标签")]),i("el-button",{staticStyle:{margin:"0 25px"},attrs:{size:"mini",type:"primary"},on:{click:e.referenceCalculate}},[e._v("计算价格")])],1),i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[e._v("计算参考")]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("上新价("+e._s(e.RMBShow?"RMB":e.$filters.siteCoin(e.country))+")：")]),i("div",{staticClass:"item-input"},[e._v(" "+e._s(e.RMBShow&&e.calculateResults.results||Math.ceil(e.calculateResults.results/e.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"标价=折后价/折扣率",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("折后价("+e._s(e.RMBShow?"RMB":e.$filters.siteCoin(e.country))+")：")]),i("div",{staticClass:"item-input"},[e._v(" "+e._s(e.RMBShow&&e.calculateResults.discount||Math.ceil(e.calculateResults.discount/e.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折后价=成本+运费+手续费+佣金+仓库服务费+利润+交店费/清关费+其它杂费",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"}),i("div",{staticClass:"basisInstall-box-item"})]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap",margin:"10px 0"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("运费("+e._s(e.RMBShow?"RMB":e.$filters.siteCoin(e.country))+")：")]),i("div",{staticClass:"item-input"},[e._v(" "+e._s(e.RMBShow&&e.calculateResults.freight||Math.ceil(e.calculateResults.freight/e.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"运费=计费重*计费单价+仓库服务费+交店费/清关费",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("利润("+e._s(e.RMBShow?"RMB":e.$filters.siteCoin(e.country))+")：")]),i("div",{staticClass:"item-input"},[e._v(" "+e._s(e.RMBShow&&e.calculateResults.profits||Math.ceil(e.calculateResults.profits/e.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"利润=折后价*毛利率",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"}),i("div",{staticClass:"basisInstall-box-item"})]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[e._v("当前汇率：")]),i("el-input",{staticStyle:{"pointer-events":"none"},attrs:{disabled:"",size:"mini"},model:{value:e.rateList[this.country],callback:function(t){e.$set(e.rateList,this.country,t)},expression:"rateList[this.country]"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.RMBShow=!e.RMBShow}}},[e._v("币种转换")])],1),i("div",{staticClass:"basisInstall-box-item"}),i("div",{staticClass:"basisInstall-box-item"})])])]),i("el-dialog",{attrs:{title:"运费详情",width:"540px",top:"14vh","close-on-click-modal":!1,visible:e.freightVisible},on:{"update:visible":function(t){e.freightVisible=t}}},[i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap",padding:"0 10px"}},[i("div",{staticClass:"basisInstall-box-item"},[e._v(" 运输方式 ")]),i("div",{staticClass:"basisInstall-box-item"},[e._v(" 重量(g) ")]),i("div",{staticClass:"basisInstall-box-item"},[e._v(" 价格(RMB) ")])]),e._l(e.shippingMethodList,(function(t,a){return i("div",{key:a},e._l(e.goodsTypeList,(function(a,s){return i("div",{key:s,staticClass:"basisInstall-box",staticStyle:{padding:"10px",margin:"0",color:"#000"},style:"background:"+(1===s?"#F6ECCB":2===s&&"#FE4148")},[i("div",{staticClass:"basisInstall-box-item"},[e._v(" "+e._s(t.label+"-"+a.label)+" ")]),i("div",{staticClass:"basisInstall-box-item"},[e._v(" 每100g ")]),i("div",{staticClass:"basisInstall-box-item"},[i("el-input",{attrs:{size:"mini"},model:{value:e.freightList[t.value+"-"+a.value],callback:function(i){e.$set(e.freightList,t.value+"-"+a.value,i)},expression:"freightList[sItem.value + '-' +gItem.value]"}})],1)])})),0)}))],2)]),i("el-dialog",{attrs:{title:"上新状态详情",width:"1000px",top:"10vh","close-on-click-modal":!1,visible:e.detailsVisible},on:{"update:visible":function(t){e.detailsVisible=t}}},[i("div",{staticStyle:{width:"100%"}},[i("u-table",{attrs:{data:e.newOnDetailsList,"use-virtual":"","data-changes-scroll-top":!1,border:!1,height:"500","header-cell-style":{backgroundColor:"#f5f7fa"},"big-data-checkbox":!0}},[i("u-table-column",{attrs:{align:"left",label:"序列号",type:"index",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"上家商品Id",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",{staticClass:"goToGoods",on:{click:function(t){return t.stopPropagation(),e.goToGoods(a)}}},[e._v(e._s(a.goods_id))]),i("el-button",{staticClass:"copyIcon",attrs:{type:"text"},on:{click:function(t){return e.copy(a.goods_id)}}},[i("i",{staticClass:"el-icon-document-copy"})])]}}])}),i("u-table-column",{attrs:{align:"left",label:"shopee-Id",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",{staticClass:"goToGoods",on:{click:function(t){return t.stopPropagation(),e.goToGoods(a,1)}}},[e._v(e._s(a.product_id||""))]),a.product_id?i("el-button",{staticClass:"copyIcon",attrs:{type:"text"},on:{click:function(t){return e.copy(a.product_id)}}},[i("i",{staticClass:"el-icon-document-copy"})]):e._e()]}}])}),i("u-table-column",{attrs:{align:"left",label:"店铺分组","show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(e._s(i.group_name||"")+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"店铺名称","show-overflow-tooltip":"",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(e._s(i.mallName||"")+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"上新后标题","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticClass:"goodsTableLine"},[e._v(" "+e._s(a.name)+" ")])]}}])}),i("u-table-column",{attrs:{align:"left",label:"上新状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("div",{staticClass:"goodsTableLine"},[e._v(" "+e._s(a.state||"")+" ")])]}}])}),i("u-table-column",{attrs:{align:"left",label:"上新后价格",prop:"CalAfterPrice",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" "+e._s(i.price||"")+e._s(i.price&&e.$filters.siteCoin(i.country)||"")+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"来源",prop:"sourceName",width:"80"}})],1)],1)]),i("el-dialog",{attrs:{title:"定时刊登配置",width:"540px",top:"14vh","close-on-click-modal":!1,visible:e.setTimeVisible},on:{"update:visible":function(t){e.setTimeVisible=t}}},[i("div",[i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[e._v("定时刊登设置")]),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("上新时间间隔：")]),i("el-input",{staticStyle:{width:"80px",margin:"0 5px"},attrs:{size:"mini"},model:{value:e.setTimeConfig.onNewInterval,callback:function(t){e.$set(e.setTimeConfig,"onNewInterval",t)},expression:"setTimeConfig.onNewInterval"}}),e._v(" S "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认印尼站点上新时间间隔为50S，其他站点为40S",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("上新加速：")]),i("el-input",{staticStyle:{width:"80px",margin:"0 5px"},attrs:{size:"mini"},on:{change:function(t){return e.changeStockUpNumber(e.setTimeConfig.onNewThread,2)}},model:{value:e.setTimeConfig.onNewThread,callback:function(t){e.$set(e.setTimeConfig,"onNewThread",t)},expression:"setTimeConfig.onNewThread"}}),e._v(" 条线程 "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请根据电脑配置合理设置上新线程数，最大为5",min:1,max:5,placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("时间选择：")]),i("el-date-picker",{staticStyle:{width:"180px",margin:"0 5px"},attrs:{type:"datetime",size:"mini",placeholder:"选择日期时间"},model:{value:e.setTimeConfig.time,callback:function(t){e.$set(e.setTimeConfig,"time",t)},expression:"setTimeConfig.time"}})],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[e._v("任务名称：")]),i("el-input",{staticStyle:{width:"240px",margin:"0 5px"},attrs:{size:"mini"},model:{value:e.setTimeConfig.name,callback:function(t){e.$set(e.setTimeConfig,"name",t)},expression:"setTimeConfig.name"}})],1)]),i("div",{staticStyle:{display:"flex","justify-content":"space-around",margin:"30px 0"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveSetTime()}}},[e._v("保存此定时任务配置")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveSetTime(!0)}}},[e._v("保存并启动定时任务")])],1)])]),i("el-dialog",{attrs:{title:"商品编辑",width:"1000px",top:"2vh","close-on-click-modal":!1,"close-on-press-escape":!1,modal:!1,visible:e.goodsEditorVisible},on:{"update:visible":function(t){e.goodsEditorVisible=t}}},[e.goodsEditorVisible?i("goods-edit-details",{attrs:{"goods-editor":e.goodsEditor},on:{goodsEditorCancel:e.goodsEditorCancel}}):e._e()],1)],1)],1)},s=[],n=i("5530"),o=i("53ca"),r=i("2909"),l=i("b85c"),c=i("1da1"),u=(i("96cf"),i("159b"),i("4de4"),i("b680"),i("7db0"),i("5b81"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("99af"),i("c740"),i("caad"),i("2532"),i("a9e3"),i("fb6a"),i("38cf"),i("498a"),i("a15b"),i("25f0"),i("a4d3"),i("e01a"),i("ac1f"),i("1276"),i("b0c0"),i("a434"),i("d81d"),i("841c"),i("feb6")),d=i("eb09"),p=i("2b22"),m=i("0e0b"),g=i("81a6"),f=i("7646"),h=i("e1e4"),b=i("5551"),v=i("c9c2"),C=i("1146"),y=i.n(C),x=i("4586"),k={data:function(){return{goodsEditorVisible:!1,goodsEditor:null,mallListAPIInstance:new f["a"](this),goodsTable:[],goodsTableSelect:[],goodsCurrent:"",mallList:[],country:"",sourceCategoryList:[],sourceCategory:[0],resultsFilterList:[{label:"全部",value:0},{label:"待发布",value:1},{label:"发布成功",value:2},{label:"发布失败",value:3},{label:"重新刊登",value:4},{label:"已过滤数据",value:5}],resultsFilter:0,mewOnProgress:0,isNoFoldShow:!0,categoryVisible:!1,attributesList:[],attributesCurrent:[],goodsTagVisible:!1,goodsTagAction:"",goodsTagCurrent:"",sellActiveVisible:!1,setSellActiveVisible:!1,sellActiveTable:[],sellActiveSetting:[],sellActiveCurrent:{},watermarkVisible:!1,watermarkConfig:{type:1,addType:1,textType:1,textSize:"30",textColor:"#D5D4DA",locate:1,clarity:.3,imgSize:1,goodsImg:"",watermarkImg:"",text:"水印"},watermarkSetting:{},locateList:[{label:"左上角",value:1},{label:"左下角",value:2},{label:"右上角",value:3},{label:"右下角",value:4},{label:"中间",value:5}],imgSizeList:[{label:"按比例缩放",value:1},{label:"与商品图宽一致",value:2},{label:"与商品图高一致",value:3}],locateClass:"watermark_image_left watermark_image_top",logistics:[],logisticsList:[],customLogistics:[],storeConfig:{watermarkChecked:!0,priceRadio:0,activityChecked:!1,chineseChecked:[],pictureThread:"3",dangerousRadio:0,wordsHeavy:!1},valuationRadio:1,basicConfig:{formula:{percentage:"50",basis:"5",hidden:"5"},discount:"100",valuationMethodsRadio:0,fixedPrice:"150",headlineRadio:0,hotSearch:"1",hotList:"",embargoChecked1:!0,embargoChecked2:!0,minHeavy:"0.1",maxHeavy:"1",categoryMapping:1,sourceCategoryChecked:!1,stockUpChecked:!0,stockUpNumber:"15",onNewThread:"5",numberCeilingChecked:!1,numberCeiling:"1000",usedChecked:!1,deleteCollectChecked:!1,autoCompleteChecked:!1,min_purchase_limit:1},valuationVisible:!1,valuationLabel:"",valuationConfig:{shippingMethod:"sea",goodsType:"general",transactionCommission:"2",warehouseServiceCharge:"3",discount:"",grossProfitMargin:"20",withdrawalCharge:"3",customsClearanceFee:"4.5",other:"",bubbleHeavy:""},valuationSetting:{},valuationLabelList:[],shippingMethodList:[{label:"海运",value:"sea"},{label:"陆运",value:"land"},{label:"空运",value:"air"}],goodsTypeList:[{label:"普货",value:"general"},{label:"敏感货",value:"sensitive"},{label:"特货",value:"special"}],calculateReference:{long:"",width:"",height:"",weight:"10",costing:"",bubbleHeavy:"",bubbleHeavyNum:""},calculateResults:{results:"",discount:"",freight:"",profits:""},freightVisible:!1,freightList:{"sea-general":"1.8","sea-sensitive":"1.8","sea-special":"1.8","land-general":"1.8","land-sensitive":"1.8","land-special":"1.8","air-general":"1.8","air-sensitive":"1.8","air-special":"1.8"},exchangeRate:"",categoryMappingList:[{label:"个人类目映射",value:1},{label:"共有类目映射",value:2}],associatedConfig:{specialCharChecked:!0,realNameChecked:!1,onNewInterval:"40",dimensionRadio:1,pictureSetting:{mainRandomChecked:!0,firstChecked:!0,cutChecked:!0,randomChecked:!0,whiteChecked:!1,index:"1",compressionChecked:!0},missingUploadChecked:!1,keyFilter:[0,1,2,3],keyList:"",priceRange:"2"},keyFilterList:[{label:"标题",value:1},{label:"描述",value:2},{label:"SKU",value:3}],statistics:{count:0,success:0,failure:0,repeat:0,filter:0},sourceObj:null,source:null,labelList:[],isBanPerform:!1,RMBShow:!0,rateList:{},titleInterval:{TH:{min:20,max:120},VN:{min:10,max:120},MY:{min:20,max:120},SG:{min:10,max:120},TW:{min:5,max:60},PH:{min:20,max:100},ID:{min:5,max:100},BR:{min:1,max:120}},descriptionInterval:{TH:{min:25,max:3e3},VN:{min:100,max:3e3},MY:{min:20,max:3e3},SG:{min:20,max:3e3},TW:{min:5,max:3e3},PH:{min:100,max:3e3},ID:{min:20,max:3e3},BR:{min:1,max:3e3}},uploadImgAdd:!1,watermarkPreviewType:1,GoodsManagerAPIInstance:new h["a"](this),GoodsDiscount:new b["a"](this),preorderMinDays:"",preorderMaxDays:"",detailsVisible:!1,newOnDetails:{},newOnDetailsList:[],setTimeVisible:!1,setTimeConfig:{onNewInterval:"40",onNewThread:"5",name:"",time:new Date((new Date).getTime()+864e5)},isRefreshTable:!0,isCancelRelease:!0,importTemplateData:null,goodsClassName:{}}},computed:{getGoodsClassName:function(){return function(e){return this.goodsClassName[e]||""}}},components:{goodsEditDetails:v["a"],storeChoose:u["a"],categoryMapping:d["a"],goodsLabel:p["a"]},watch:{country:function(e){switch(this.associatedConfig.onNewInterval="ID"!==e?"40":"50",this.sellActiveSetting=[],e){case"BR":this.preorderMaxDays=10,this.preorderMinDays=5,this.basicConfig.stockUpNumber=7;break;case"TW":this.preorderMaxDays=20,this.preorderMinDays=5,this.basicConfig.stockUpNumber=10;break;case"VN":this.preorderMaxDays=15,this.preorderMinDays=7,this.basicConfig.stockUpNumber=10;break;default:this.preorderMaxDays=30,this.preorderMinDays=7,this.basicConfig.stockUpNumber=15;break}this.changeLogistics(),this.publishGoodsConfigGet()},valuationRadio:function(e){if(2===e){var t=this.valuationSetting;t&&t.bubbleHeavy>=0||this.$alert("计价信息为空，请填写点击确认后再选择此计价方式上新！","提示",{confirmButtonText:"确定",callback:function(){}})}},watermarkConfig:{handler:function(e){if(e.type<3){var t=e.locate%2?"watermark_image_top ":"watermark_image_bottom ";t+=e.locate>2?"watermark_image_right ":"watermark_image_left ",t=e.locate<5&&t||"watermark_image_center ",2===e.type&&(t+=1===e.imgSize?"watermark_image_reduce ":"watermark_image_fixed ",2===e.imgSize||e.imgSize,t+=(1===e.imgSize?"watermark_image_reduce ":2===e.imgSize&&"watermark_image_width ")||"watermark_image_height "),this.locateClass=t}},deep:!0},logistics:function(e){var t=this;this.customLogistics=[],e.forEach((function(e){var i=t.logisticsList.filter((function(t){return t.ShipId===e}))[0];i&&i.IsCustomShipFee&&t.customLogistics.push(i)}))},goodsTagAction:function(e){this.goodsTagCurrent=e},goodsTable:{handler:function(e){},deep:!0},calculateReference:{handler:function(e){var t=e.long||0,i=e.width||0,a=e.height||0,s=e.bubbleHeavyNum||0,n=t*i*a;s&&n&&(n=1*(n/s*1e3).toFixed(2)),this.calculateReference.bubbleHeavy=n},deep:!0},valuationLabel:function(e){try{var t=this.valuationLabelList.find((function(t){return t.id===e})),i=t&&t.config,a=i&&i[0]||"";if(a)this.valuationSetting=JSON.parse(a),this.valuationConfig=JSON.parse(a),this.freightList=i[1]&&JSON.parse(i[1])||this.freightList;else{var s={shippingMethod:i.TransportType||"sea",goodsType:i.GoodsType||"general",transactionCommission:i.Brokerage||"2",warehouseServiceCharge:i.WarehouseFee||"3",discount:i.DiscountRate||"",grossProfitMargin:i.GrossMargin||"20",withdrawalCharge:i.HandlingFee||"3",customsClearanceFee:i.ShopFeeOrClearanceFee||"4.5",other:i.OriginPrice||"",bubbleHeavy:i.BulkRate||""};if(this.valuationSetting=s,this.valuationConfig=s,i.FeeDetailList)for(var n in i.FeeDetailList){var o=i.FeeDetailList[n],r=o.TransportType;r.replaceAll("海运","sea"),r.replaceAll("陆运","land"),r.replaceAll("空运","air"),r.replaceAll("普货","general"),r.replaceAll("敏感货","sensitive"),r.replaceAll("特货","special"),this.freightList[r]=o.ShipFee}}}catch(l){}}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$IpcMain.on("gotoUpload",function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("gotoUpload-e",i),t.next=3,e.getUploadGoodsId();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=4,e.$appConfig.temporaryCacheInfo("get","firstOnNewKey","");case 4:if(i=t.sent,1==i){t.next=11;break}return console.log("gotoUpload-firstOnNewKey",i),t.next=9,e.$appConfig.temporaryCacheInfo("save","firstOnNewKey",!0);case 9:return t.next=11,e.getUploadGoodsId();case 11:t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:return t.prev=15,e.rateList=e.$userInfo.ExchangeRates||{},t.next=19,e.$api.valuationConfigGetAll();case 19:return a=t.sent,e.valuationLabelList=a&&a.data.data||[],t.next=23,e.publishGoodsConfigGet();case 23:return t.finish(15);case 24:case"end":return t.stop()}}),t,null,[[0,13,15,24]])})))()},methods:{getUploadGoodsId:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,a,s,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$BaseUtilService.getUploadGoodsId();case 2:if(i=t.sent,a=i&&JSON.parse(i)||[],!a.length){t.next=16;break}console.log("goodsListJSON",a),s=Object(l["a"])(a);try{for(o=function(){var t=n.value,i=e.goodsTable.findIndex((function(e){return e.id===t.id}));i>=0&&e.$set(e.goodsTable,i,t)||e.goodsTable.push(t)},s.s();!(n=s.n()).done;)o()}catch(u){s.e(u)}finally{s.f()}return e.statistics.count=e.goodsTable.length,c=new Set,e.goodsTable.forEach((function(e){c.add(e.category_name)})),e.sourceCategoryList=Object(r["a"])(c),e.sourceCategory=[0].concat(Object(r["a"])(c)),localStorage.setItem("goodsTableJson",JSON.stringify(e.goodsTable)),t.next=16,e.$BaseUtilService.gotoUploadTab("updateId","");case 16:case"end":return t.stop()}}),t)})))()},startRelease:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.goodsTableSelect.length<1)){t.next=3;break}return e.$message.error("请选择商品后再操作"),t.abrupt("return");case 3:if(!(e.logistics.length<1)){t.next=6;break}return e.$message.error("配置物流信息后再操作"),t.abrupt("return");case 6:if(!(e.mallList.length<1)){t.next=9;break}return e.$message.error("请选择店铺后再操作"),t.abrupt("return");case 9:if(!(e.customLogistics.length>0)){t.next=28;break}i=Object(l["a"])(e.customLogistics),t.prev=11,i.s();case 13:if((a=i.n()).done){t.next=20;break}if(s=a.value,1*s.price){t.next=18;break}return e.$message.error("运费价格有误，请确认"),t.abrupt("return");case 18:t.next=13;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](11),i.e(t.t0);case 25:return t.prev=25,i.f(),t.finish(25);case 28:if(!e.storeConfig.watermarkChecked||!e.watermarkSetting||e.watermarkSetting.type){t.next=31;break}return e.$message.error("配置水印后再操作"),t.abrupt("return");case 31:return e.storeConfig.activityChecked&&(n=e.sellActiveSetting.find((function(t){if(console.log(e.sellActiveSetting,t),!t.goodsId&&(!t.discountId||!t.discount||!t.number))return t})),n&&e.$alert("部分折扣活动未配置折扣信息","提示",{confirmButtonText:"确定",type:"warning"}).then((function(){}))),e.isBanPerform=!0,e.isCancelRelease=!1,e.mewOnProgress=0,e.newOnDetails={},e.statistics=Object.assign(e.statistics,{success:0,failure:0,repeat:0,filter:0}),t.next=39,Object(m["d"])(e.mallList,e.prepareWork,e.basicConfig.onNewThread);case 39:e.mewOnProgress=100,e.isBanPerform=!1;case 41:case"end":return t.stop()}}),t,null,[[11,22,25,28]])})))()},cancelRelease:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCancelRelease=!0,Object(m["B"])();case 2:case"end":return t.stop()}}),t)})))()},prepareWork:function(e){var t=arguments,i=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,n,c,u,d,p,f,h,b,v,C,y,k,_,w,S,I,T,R,N,L,O,A,$,M,z,j,P;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>1&&void 0!==t[1]?t[1]:{count:1},n="",c=e.platform_mall_id,u=e.mall_alias_name||e.platform_mall_name,d=100,p=100/i.mallList.length,a.prev=6,f=[],h=[],a.next=11,i.mallListAPIInstance.getUserInfo(e);case 11:if(b=a.sent,v=200===b.code,!v){a.next=25;break}return C={},C["mallId"]=c,a.next=18,i.$shopeemanService.getChinese(e.country,"/api/v3/logistics/get_channel_list/?",C);case 18:y=a.sent,k=JSON.parse(y),_=JSON.parse(k.data),w=_.data&&_.data.list||[],console.log("channelListRes",w,i.logistics,i.customLogistics),S=Object(l["a"])(w);try{for(T=function(){var e=I.value;if(e.enabled!==i.logistics.includes(e.channel_id+"")||e.is_mask_channel){var t={enabled:i.logistics.includes(e.channel_id+""),channelid:e.channel_id,sizeid:0,size:0,price:"0.00",cover_shipping_fee:!1,parent_channel_id:0},a=i.customLogistics.find((function(t){return t.shopId===e.channel_id+""}));a&&(t["price"]=a.price+""),h.push(t)}},S.s();!(I=S.n()).done;)T()}catch(D){S.e(D)}finally{S.f()}case 25:if(i.associatedConfig.dimensionRadio<2){R=i.mallList.length,N=i.mallList.findIndex((function(t){return t.id===e.id})),L=i.goodsTableSelect.length,f=N<L&&[i.goodsTableSelect[N]]||[];while(N<L)N+=R,N<L&&(f=[].concat(Object(r["a"])(f),[i.goodsTableSelect[N]]))}else O=Math.floor(100*Math.random())%2,f=i.goodsTableSelect,A=Number(i.associatedConfig.priceRange)||0,A>=0||(i.associatedConfig.priceRange=2,A=2),A=Number((Math.random()*A).toFixed(2)),d=Number(O?(d+A).toFixed(2):(d-A).toFixed(2));if(d=Number(d/100),console.log("goodsList -1",f),!(f.length>0)){a.next=52;break}$=Object(l["a"])(f),a.prev=30,z=regeneratorRuntime.mark((function t(){var a,s,o,l,b,C,y,k,_,w,S,I,T,R,N,L,O,A,$,z,j,P,D,B,F,J,V,G,E,U,H,q,W,Y,K,Z,Q,X,ee,te,ie,ae,se,ne,oe,re,le,ce,ue,de,pe,me,ge,fe,he,be,ve,Ce,ye,xe,ke,_e,we,Se,Ie,Te,Re,Ne,Le,Oe,Ae,$e,Me,ze,je,Pe,De,Be,Fe,Je,Ve,Ge,Ee,Ue,He,qe,We,Ye,Ke,Ze,Qe,Xe,et,tt,it,at,st,nt,ot,rt,lt;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=M.value,!i.isCancelRelease){t.next=3;break}return t.abrupt("return",{v:void 0});case 3:if(t.prev=3,console.log(a,e),i.updateAttributeName(a,"正在准备发布","",e),i.updateOnNewDetails(a.id,c,{goods_id:a.goods_id,mallName:u,group_name:e.group_name,sourceName:a.sourceName,country:e.country}),v){t.next=12;break}return i.updateAttributeName(a,"发布失败：".concat(u,"店铺未登录"),"",e),i.updateAttributeName(a,3,"resultsFilter"),++i.statistics.failure,t.abrupt("return","continue");case 12:return b={attributes:[],stock:a.stock,model_list:[],weight:a.weight+"",dimension:{width:a.width>1&&a.width||1,height:a.height>1&&a.width||1,length:a.long>1&&a.long||1},condition:i.basicConfig.usedChecked?4:1,dangerous_goods:0,min_purchase_limit:"TW"===i.country&&parseInt(i.basicConfig.min_purchase_limit)||1,input_normal_price:null,input_promotion_price:null,id:0,images:[],tier_variation:[],category_recommend:[],price_before_discount:"",wholesale_list:[],installment_tenures:{},pre_order:i.basicConfig.stockUpChecked,days_to_ship:Math.floor(i.basicConfig.stockUpNumber)||15,logistics_channels:h.slice(0,4),unlisted:i.basicConfig.usedChecked,add_on_deal:[]},C=a.originCategoryId||a.category_id,y=a.platform||a.source,i.updateAttributeName(a,"正在抓取产品","",e),t.next=18,i.$commodityService.getSpuDetailByIdV2(a.id);case 18:if(k=t.sent,_=JSON.parse(k),w=_.data,200===Number(_.code)){t.next=25;break}return n=_.msg||"",i.updateAttributeName(a,n||"发布失败，数据或请求异常","",e),t.abrupt("return",{v:void 0});case 25:return console.log("neededTranslateInfoData -2",w),S=JSON.parse(JSON.stringify(b)),i.updateAttributeName(a,"正在匹配类目","",e),t.next=30,i.$commodityService.getCategoryRelation(C,i.country,y);case 30:if(I=t.sent,console.log("getCategoryRelation - data",I),T=JSON.parse(I),R=(null===T||void 0===T||null===(s=T.data)||void 0===s||null===(o=s.category)||void 0===o?void 0:o.platform_category_id)||"",console.log("categoryId",R),!R){t.next=52;break}return t.next=38,i.getCategoryPath(R);case 38:if(t.t0=t.sent,t.t0){t.next=41;break}t.t0=[];case 41:S["category_path"]=t.t0,N=T.data&&T.data.attributes||[],L=T.data.category,O="".concat(L.platform_category_name,"(").concat(L.platform_category_cn_name,")"),A=i.goodsTable.findIndex((function(e){return e.id===a.id})),i.$set(i.goodsTable[A],"categoryName",O),i.goodsClassName[C]=O,N.forEach((function(e){e.attribute_id?S["attributes"].push({attribute_id:e.attribute_id,attribute_value_id:Math.floor(e.value_id)}):S["brand_id"]=Math.floor(e.value_id)||0})),S["brand_id"]=S["brand_id"]||0,t.next=56;break;case 52:return i.updateAttributeName(a,"发布失败：无类目映射，请选择类目","",e),i.updateAttributeName(a,3,"resultsFilter"),++i.statistics.failure,t.abrupt("return","continue");case 56:return $=1,i.associatedConfig.dimensionRadio<2&&($=i.associatedConfig.dimensionRadio+1),z={sysMallId:e.id+"",platformType:a.source,itemSku:a.goods_id+"",title:a.title,country:i.country,dimension:$+""},t.next=61,i.$commodityService.checkListingRepeat(z);case 61:if(j=t.sent,P=JSON.parse(j),200!==P.code){t.next=71;break}if(D=P.data,B=D.status,!(B>0)){t.next=71;break}return i.updateAttributeName(a,4,"resultsFilter"),i.updateAttributeName(a,"检查到商品已经刊登","",e),++i.statistics.repeat,t.abrupt("return","continue");case 71:return i.updateAttributeName(a,"开始组装商品数据","",e),0!==Number(S["weight"])&&S["weight"]||(S["weight"]=Object(m["u"])(i.basicConfig.minHeavy,i.basicConfig.maxHeavy,2)+"",w["weight"]=S["weight"]),F=a.extra_info&&JSON.parse(a.extra_info),J=F&&F.tmall_cross_border_user_id||"",t.next=77,i.$BaseUtilService.buildGoodCode(y,a.goods_id,i.country,c,J);case 77:if(S["parent_sku"]=t.sent,V=new g["a"],S["ds_cat_rcmd_id"]=V.newGUID()+"|c|EN",S["ds_attr_rcmd_id"]=V.newGUID()+"|a|EN",G=w.tier_variation,G[G.spec1].length&&(E=[],G[G.spec1].forEach((function(e){var t=e.substring(0,20).trim();while(E.includes(t))if(20===t.length){var i=Object(r["a"])(t);i[19]=Object(m["t"])(),t=i.join("")}else t+=Object(m["t"])();E.push(t)})),S["tier_variation"].push({name:G.spec1,options:E,images:G.images})),G[G.spec2].length&&(U=[],G[G.spec2].forEach((function(e){var t=e.substring(0,20).trim();while(U.includes(t))if(20===t.length){var i=Object(r["a"])(t);i[19]=Object(m["t"])(),t=i.toString()}else t+=Object(m["t"])();U.push(t)})),S["tier_variation"].push({name:G.spec2,options:U,images:[]})),console.log("tier_variation",S["tier_variation"]),H=i.getValuationPrice(w.price,w),S["price"]=Math.ceil(H/i.rateList[i.country]*d)+"",S["description"]=w.description||"",q=i.basicConfig.hotList||"",q=q.replaceAll("，",","),q=q.split(",")||[],W="",Y=a.title,i.basicConfig.hotSearch>0&&q[0]){for(K=q.length,Z=0;Z<i.basicConfig.hotSearch;Z++)Q=Math.floor(Math.random()*K),W+=q[Q]+" ";Y=i.basicConfig.headlineRadio?Y+" "+W:W+""+Y}return i.associatedConfig.specialCharChecked&&(X=i.$filters.special_characters,ee=X[Math.floor(Math.random()*X.length)],Y=ee+" "+Y),i.associatedConfig.realNameChecked&&(Y=e.platform_mall_name+" "+Y),S["name"]=Y,i.updateAttributeName(a,"正在检测商品数据","",e),t.next=100,i.fieldFilter(S,a);case 100:if(te=t.sent,console.log("isFieldFilter",te),te){t.next=107;break}return i.updateAttributeName(a,3,"resultsFilter"),i.updateOnNewDetails(a.id,c,{state:"检查到商品已经刊登"}),++i.statistics.failure,t.abrupt("return","continue");case 107:if(i.storeConfig.wordsHeavy&&(ie=new Set(Object(r["a"])(S["name"].split(" "))),S["name"]=Object(r["a"])(ie).join(" ").trim()),ae=w.images,se=!1,i.associatedConfig.pictureSetting.firstChecked&&ae.splice(0,1),i.associatedConfig.pictureSetting.cutChecked){ne=Math.floor(ae.length/3),oe=Math.ceil(Math.random()*ne)||0;while(oe--)re=Math.floor(Math.random()*ae.length),ae.splice(re,1)}if(2===i.associatedConfig.dimensionRadio?i.associatedConfig.pictureSetting.mainRandomChecked&&(le=Math.floor(Math.random()*ae.length),ce=ae.splice(le,1),ae=[].concat(Object(r["a"])(ce),Object(r["a"])(ae))):(ue=ae.splice(i.associatedConfig.pictureSetting.index-1,1),ae=[].concat(Object(r["a"])(ue),Object(r["a"])(ae))),!i.associatedConfig.pictureSetting.whiteChecked){t.next=119;break}return de=ae[0],t.next=117,i.$MattingService.getDrawbotMattingByUrl(de,(new Date).getTime()+".png");case 117:pe=t.sent,200===pe.Code&&(me=pe.Data,ge=me.Data&&me.Data.ImageURL,ae[0]=ge||de);case 119:if(!i.storeConfig.watermarkChecked){t.next=138;break}if(0!==i.watermarkConfig.addType){t.next=127;break}return t.next=123,i.additionalWatermarking(ae[0],e);case 123:se=t.sent,ae[0]=se||ae[0],t.next=138;break;case 127:fe=0;case 128:if(!(fe<ae.length)){t.next=138;break}return t.next=131,i.additionalWatermarking(ae[fe],e);case 131:if(se=t.sent,ae[fe]=se||ae[fe],se){t.next=135;break}return t.abrupt("return",{v:void 0});case 135:fe++,t.next=128;break;case 138:if(console.log(ae),S["images"]=ae,w.sizeImages&&w.sizeImages[0]&&(S["size_chart"]=w.sizeImages[0].img||""),he=JSON.stringify(w.itemmodels),S["model_list"]=JSON.parse(he).map((function(e){var t=i.getValuationPrice(e.price,w);return t=Math.ceil(t/i.rateList[i.country]*d)+"",e={id:0,name:"",is_default:!1,item_price:"",input_normal_price:null,input_promotion_price:null,tier_index:e.tier_index,sku:e.sku,stock:e.stock,price:t},e})),console.log("model_list",S["model_list"]),!S["model_list"].length){t.next=152;break}if(be=S["tier_variation"][0]&&S["tier_variation"][0].options||[],ve=S["tier_variation"][1]&&S["tier_variation"][1].options||[],Ce=be.length&&be.length||1,ye=ve.length&&ve.length||1,S["model_list"].length===Ce*ye){t.next=152;break}return i.updateAttributeName(a,"发布失败：商品规格与商品SKU数量不符","",e),t.abrupt("return","continue");case 152:if(i.storeConfig.priceRadio>0&&(xe=S["model_list"].map((function(e){return Number(e.price)})),xe=Object(r["a"])(new Set(Object(r["a"])(xe))),xe.length>1)){for(ke=xe[0],_e=xe[0],we=0;we<xe.length;we++)ke=ke>xe[we]&&xe[we]||ke,_e=_e<xe[we]&&xe[we]||_e;if(2*ke<_e){if(Se=1===Number(i.storeConfig.priceRadio)&&ke||_e,Ie=new Set,Te=new Set,Re=[],S["model_list"].forEach((function(e){Number(e.price)!==Se&&(e.tier_index[0]&&Ie.add(e.tier_index[0]),e.tier_index[1]&&Te.add(e.tier_index[1]),Re.push(e))})),Ie=Object(r["a"])(Ie),Te=Object(r["a"])(Te),Re=Re.map((function(e){if(Ie.length&&e.tier_index.length){var t=Ie.findIndex((function(t){return t===e.tier_index[0]}));e.tier_index[0]=t}if(Te.length&&e.tier_index.length>1){var i=Te.findIndex((function(t){return t===e.tier_index[1]}));e.tier_index[1]=i}return e})),Ie.length){for(Ne=S["tier_variation"][0],Le=[],Oe=[],Ae=0;Ae<Ie.length;Ae++)Ne.options.length&&Ne.options[Ie[Ae]]&&Le.push(Ne.options[Ie[Ae]]),Ne.images.length&&Ne.images[Ie[Ae]]&&Oe.push(Ne.images[Ie[Ae]]);S["tier_variation"][0].options=Le,S["tier_variation"][0].images=Oe}if(Te.length){for($e=S["tier_variation"][1],Me=[],ze=[],je=0;je<Ie.length;je++)$e.options.length&&$e.options[Ie[je]]&&Me.push($e.options[Ie[je]]),$e.images.length&&$e.images[Ie[je]]&&ze.push($e.images[Ie[je]]);S["tier_variation"][1].options=Me,S["tier_variation"][1].images=ze}}}return i.updateAttributeName(a,"正在上传轮播图","",e),console.log("正在上传轮播图",S["images"]),t.next=157,Object(m["w"])(e,S["images"],i,i.storeConfig.pictureThread);case 157:if(Pe=t.sent,S["images"]=S.images.map((function(e){return e=Pe[e]||"",e})),!S["images"].includes("")){t.next=168;break}if(i.associatedConfig.missingUploadChecked){t.next=165;break}return i.updateAttributeName(a,"发布失败：轮播图上传缺失","",e),i.updateAttributeName(a,3,"resultsFilter"),++i.statistics.failure,t.abrupt("return","continue");case 165:De=[],S["images"].forEach((function(e){e&&De.push(e)})),S["images"]=De;case 168:return i.updateAttributeName(a,"正在上传规格图","",e),console.log("正在上传规格图",w.spec_image),t.next=172,Object(m["w"])(e,w.spec_image,i,i.storeConfig.pictureThread);case 172:for(Ve in Be=t.sent,Fe=JSON.stringify(S["tier_variation"]),Je=[],Be)Fe=Fe.replaceAll('"'+Ve+'"','"'+Be[Ve]+'"'),Je.push(Be[Ve]);if(S["tier_variation"]=JSON.parse(Fe),null!==(l=S["tier_variation"][0])&&void 0!==l&&l.images&&null!==(Ge=S["tier_variation"][0])&&void 0!==Ge&&Ge.images.includes("")&&(S["tier_variation"][0]={name:S["tier_variation"][0].name,options:S["tier_variation"][0].options}),!S["size_chart"]){t.next=184;break}return i.updateAttributeName(a,"正在上传尺寸图","",e),t.next=182,Object(m["w"])(e,[S["size_chart"]],i,i.storeConfig.pictureThread);case 182:Ee=t.sent,S["size_chart"]=Ee[S["size_chart"]]||"";case 184:return i.basicConfig.autoCompleteChecked&&S["images"].length<9&&(Ue=[].concat(Object(r["a"])(S["images"]),Je),S["images"]=Ue.slice(0,9)),console.log("goodsParam",S),i.updateAttributeName(a,"正在创建商品信息","",e),t.next=189,Object(m["A"])(1e3*i.associatedConfig.onNewInterval);case 189:return t.next=191,i.$shopeemanService.createProduct(i.country,{mallId:c},[S]);case 191:if(He=t.sent,console.log("createProduct",He),200!==He.code){t.next=241;break}return We=null===He||void 0===He||null===(qe=He.data)||void 0===qe?void 0:qe.product_id,++i.statistics.success,i.updateAttributeName(a,"发布成功","",e),i.updateOnNewDetails(a.id,c,{name:S["name"],product_id:We,price:S["price"]}),Ye={sysMallId:e.id+"",platformType:a.source+"",itemSku:a.goods_id+"",title:a.title,listingId:We+"",country:i.country,mallId:c,categoryId:R+"",skuDatas:""},t.next=201,i.$commodityService.SaveListingRecord(Ye);case 201:if(Ke=t.sent,i.basicConfig.deleteCollectChecked&&i.associatedConfig.dimensionRadio<2&&i.$commodityService.deleteCollectGoodsInfo([a.id]),console.log("saveListingRecordParmaRes",Ke),i.updateAttributeName(a,We,"product_id"),i.updateAttributeName(a,c,"mallId"),i.updateAttributeName(a,i.country,"country"),console.log("sellActiveSetting",i.sellActiveSetting,c),!i.storeConfig.activityChecked){t.next=239;break}if(Ze=i.sellActiveSetting.find((function(e){return e.platform_mall_id===c})),!Ze){t.next=239;break}if(null===Ze||void 0===Ze||!Ze.goodsId){t.next=218;break}return Qe={country:i.country,mallId:c,collection_id:Number(Ze.goodsId),product_id_list:[We]},t.next=215,i.GoodsManagerAPIInstance.addCollectionGoods(Qe);case 215:Xe=t.sent,console.log("addCollectionGoods - data",Xe),0===Xe.ecode?i.$message.success("添加成功"):i.$message.warning("添加失败".concat(Xe.message));case 218:if(!(null!==Ze&&void 0!==Ze&&Ze.discountId&&null!==Ze&&void 0!==Ze&&Ze.number&&null!==Ze&&void 0!==Ze&&Ze.discount)){t.next=239;break}return et={},et["product_id"]=We,et["version"]="3.2.0",et["shop_id"]=c,t.next=225,i.$shopeemanService.searchProductDetail(a.country,et);case 225:if(tt=t.sent,console.log("searchProductDetail - data",tt),200!==tt.code){t.next=238;break}return it=[],tt.data.model_list.forEach((function(e){var t={discount:Math.floor(100-Ze.discount),itemid:We,model_name:e.name,modelid:e.id,price_before_discount:Number(e.price),promotion_price:(e.price*Ze.discount/100).toFixed(2),promotionid:Ze.discountId,selected:!0,shopid:Number(c),status:1,total_item_limit:0,user_item_limit:Ze.number};it.push(t)})),at={discount_id:Ze.discountId,discount_model_list:it,mallId:c},t.next=233,i.GoodsDiscount.putModelActive(a.country,at);case 233:st=t.sent,200===(null===st||void 0===st?void 0:st.code)?i.updateAttributeName(a,"发布成功：行销活动添加成功","",e):(nt="发布成功：行销活动添加失败"+Object(x["errorMsg"])(st.messages||st.data),i.updateAttributeName(a,nt,"",e)),console.log("putModelActive - data",st),t.next=239;break;case 238:i.updateAttributeName(a,"发布成功：行销活动商品详情获取失败","",e);case 239:t.next=245;break;case 241:i.updateAttributeName(a,3,"resultsFilter"),++i.statistics.failure,ot=i.$filters.errorMsg(He.data),i.updateAttributeName(a,ot,"",e);case 245:t.next=251;break;case 247:t.prev=247,t.t1=t["catch"](3),console.log(t.t1),i.updateAttributeName(a,"","",e);case 251:return t.prev=251,rt=p/f.length,lt=(i.mewOnProgress+rt).toFixed(2),lt=lt<100&&lt||100,i.mewOnProgress=1*lt,t.finish(251);case 257:case"end":return t.stop()}}),t,null,[[3,247,251,257]])})),$.s();case 33:if((M=$.n()).done){a.next=42;break}return a.delegateYield(z(),"t0",35);case 35:if(j=a.t0,"continue"!==j){a.next=38;break}return a.abrupt("continue",40);case 38:if("object"!==Object(o["a"])(j)){a.next=40;break}return a.abrupt("return",j.v);case 40:a.next=33;break;case 42:a.next=47;break;case 44:a.prev=44,a.t1=a["catch"](30),$.e(a.t1);case 47:return a.prev=47,$.f(),a.finish(47);case 50:a.next=55;break;case 52:P=(i.mewOnProgress+p).toFixed(2),P=P<100&&P||100,i.mewOnProgress=1*P;case 55:a.next=59;break;case 57:a.prev=57,a.t2=a["catch"](6);case 59:return a.prev=59,--s.count,a.finish(59);case 62:case"end":return a.stop()}}),a,null,[[6,57,59,62],[30,44,47,50]])})))()},fieldFilter:function(e,t){var i=this;return new Promise(function(){var a=Object(c["a"])(regeneratorRuntime.mark((function a(s){var n,o,r,l,c,u,d,p,m,g,f,h,b,v,C;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n=JSON.stringify(e["tier_variation"]),o=i.associatedConfig.keyFilter,r=i.titleInterval[i.country],l=i.descriptionInterval[i.country],e["name"]=e["name"].slice(0,r.max),e["name"].length<r.min&&(i.updateAttributeName(t,"商品标题长度过短"),s(!1)),e["description"]=e["description"].slice(0,l.max),e["description"].length<l.min&&(i.updateAttributeName(t,"商品描述长度过短"),s(!1)),c=i.associatedConfig.keyList,u=c.split(","),u.length>0&&u.forEach((function(t){if(t&&((o.includes(0)||o.includes(1))&&(e["name"]=e["name"].replaceAll(t,"")),(o.includes(0)||o.includes(2))&&(e["description"]=e["description"].replaceAll(t,"")),o.includes(0)||o.includes(3))){for(var i=JSON.parse(n),a=function(e){var t=i[e].options.map((function(t){return t.replaceAll(e,"")}));i[e].options=t},s=0;s<i.length;s++)a(s);e["tier_variation"]=i,n=JSON.stringify(e["tier_variation"])}})),d={page:"1",perpage:"100",word:"",country:i.country,source:"0",type:"1"},a.next=15,i.$commodityService.getBannedWordList(d);case 15:return p=a.sent,m=JSON.parse(p),g=m.data&&m.data.data||[],g.forEach((function(a){if(a.word){var o=e["name"].includes(a.word),r=e["description"].includes(a.word),l=n.search('"options":".*('+a.word+').*",');if(o||r||l){var c=[];o&&c.push("标题"),r&&c.push("描述"),l&&c.push("SKU"),c=c.join("、"),i.updateAttributeName(t,"发布失败：此商品".concat(c,"含有禁运词")),i.updateAttributeName(t,5,"resultsFilter"),++i.statistics.filter,s(!1)}}})),f={type:"0",country:i.country,page:"1",perpage:"100",parentCategoryTree:[]},a.next=22,i.$commodityService.getBlackCategory(f);case 22:h=a.sent,b=JSON.parse(h),v=b.data&&b.data.data||[],console.log("category_path",e,v),C=e["category_path"].join("-"),v.forEach((function(e){e&&e.parent_category_tree===C&&(i.updateAttributeName(t,5,"resultsFilter"),i.updateAttributeName(t,"发布失败：该类目是禁运类目"),++i.statistics.filter,s(!1))})),s(!0),a.next=37;break;case 31:a.prev=31,a.t0=a["catch"](0),i.updateAttributeName(t,5,"resultsFilter"),i.updateAttributeName(t,"发布失败：网络异常请稍后再试"),++i.statistics.filter,s(!1);case 37:case"end":return a.stop()}}),a,null,[[0,31]])})));return function(e){return a.apply(this,arguments)}}())},additionalWatermarking:function(e,t){var i=this,a=this;return new Promise(function(){var s=Object(c["a"])(regeneratorRuntime.mark((function s(n){var o,r,l,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,i.$BaseUtilService.imageToBase64String(e);case 2:o=s.sent,r="data:image/png;base64,"+o,l=i.watermarkSetting,console.log("additionalWatermarking",l),u=new Image,u.setAttribute("crossOrigin","anonymous"),u.src=r,u.onload=Object(c["a"])(regeneratorRuntime.mark((function e(){var i,s,o,r,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=document.createElement("canvas"),i.width=u.width,i.height=u.height,s=i.getContext("2d"),s.drawImage(u,0,0,u.width,u.height),o=0,r=0,1===l.type?(d="",1===a.watermarkConfig.textType?d=t.mall_alias_name||t.platform_mall_name:(2===a.watermarkConfig.textType||3===a.watermarkConfig.textType)&&(d=t.platform_mall_name),s.font="".concat(a.watermarkConfig.textSize,'px "微软雅黑"'),s.fillStyle=a.watermarkConfig.textColor,s.textBaseline="top",1===l.locate?(s.textAlign="left",o=5,r=5):2===l.locate?(s.textAlign="left",o=5,r=Math.floor(u.height)-5):3===l.locate?(s.textAlign="right",o=Math.floor(u.width)-5,r=5):4===l.locate?(s.textAlign="right",o=Math.floor(u.width)-5,r=Math.floor(u.height)-5):5===l.locate&&(s.textBaseline="center",s.textAlign="center",o=Math.floor(u.width/2),r=Math.floor(u.height/2)),s.fillText(d,o,r),p=i.toDataURL("image/png"),n(p)):l.watermarkImg&&(m=new Image,m.src=l.watermarkImg,m.onload=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a,c,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:2===l.type?(1===l.imgSize?(m.width=Math.floor(u.width/5),m.height=Math.floor(u.height/5)):2===l.imgSize?(t=m.width/u.width,m.width=u.width,a=Math.floor(m.height/t),m.height=a<u.height&&a||u.height):3===l.imgSize&&(c=m.height/u.height,m.height=u.height,d=Math.floor(m.width/c),m.width=d<u.width&&d||u.width),1===l.locate?(o=5,r=5):2===l.locate?(o=5,r=Math.floor(u.height-m.height)-5):3===l.locate?(o=Math.floor(u.width-m.width)-5,r=5):4===l.locate?(o=Math.floor(u.width-m.width)-5,r=Math.floor(u.height-m.height)-5):5===l.locate&&(o=Math.floor((u.width-m.width)/2),r=Math.floor((u.height-m.height)/2)),u.width<=m.width&&(o=0),u.height<=m.height&&(r=0),m.style.opacity=l.clarity,s.globalAlpha=l.clarity):(m.width=m.width<u.width&&m.width||u.width,m.height=m.height<u.height&&m.height||u.height,s.globalAlpha=1),s.beginPath(),s.drawImage(m,o,r,m.width,m.height),s.closePath(),s.save(),p=i.toDataURL("image/png"),n(p);case 7:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})));case 10:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}())},getValuationPrice:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e*=1,1===this.valuationRadio){var a=(e*this.basicConfig.formula.percentage/100).toFixed(2),s=1*a+1*this.basicConfig.formula.hidden+1*this.basicConfig.formula.basis;return s=(e+s*this.basicConfig.discount/100).toFixed(2),this.basicConfig.valuationMethodsRadio&&(s=Math.ceil(s)),s}if(2===this.valuationRadio){if(i=i||this.valuationSetting,i&&i.bubbleHeavy>=0){var n=t.long||t.length,o=t.width,r=t.height,l=1*(n*o*r/i.bubbleHeavy*1e3).toFixed(2),c=t.weight>l&&t.weight||l;c=Math.ceil(c/100);var u=1*this.freightList[i.shippingMethod+"-"+i.goodsType],d=1*i.warehouseServiceCharge,p=1*i.customsClearanceFee,m=1*(c*u+d+p).toFixed(2),g=i.other&&1*i.other||0,f=i.transactionCommission||0,h=i.withdrawalCharge||0,b=i.grossProfitMargin||0,v=((100-1*f)/100).toFixed(2),C=((100+1*h)/100).toFixed(2),y=((100-1*b)/100).toFixed(2),x=e+m+g,k=1*(x/v/y*C).toFixed(2),_=1*(k*(1-y)).toFixed(2);this.valuationVisible&&(this.calculateResults.profits=this.country.includes("MY")&&_||Math.ceil(_),this.calculateResults.discount=this.country.includes("MY")&&k||Math.ceil(k),this.calculateResults.freight=this.country.includes("MY")&&m||Math.ceil(m));var w=(i.discount/100).toFixed(2),S=1*(k/w).toFixed(2);return S=this.country.includes("MY")&&S||Math.ceil(S),this.basicConfig.valuationMethodsRadio&&(S=Math.ceil(S)),S}return 0}if(3===this.valuationRadio)return this.basicConfig.fixedPrice},saveCalculate:function(){var e=this.valuationConfig,t="";e.discount?e.bubbleHeavy||(t="泡重计算比不能为空"):t="折扣率不能为空",t?this.$message.error(t):(this.valuationSetting=JSON.parse(JSON.stringify(e))||"",this.valuationVisible=!1)},saveCalculateLabel:function(){var e=this;this.$prompt("请输入标签名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(i){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=i.value,s={country:e.country,label:a,config:[JSON.stringify(e.valuationConfig),JSON.stringify(e.freightList)]},t.next=4,e.$api.valuationConfigSave(s);case 4:e.$message({type:"success",message:"保存标签成功"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.$message({type:"info",message:"取消保存标签"})}))},updateAttributeName:function(e,t,i,a){i=i||"statusName";var s=this.goodsTable.findIndex((function(t){return t.id===e.id}));if(s>=0){var n;if("statusName"===i&&!t)t=((null===(n=this.goodsTable[s])||void 0===n?void 0:n.statusName)||"出现未知错误导致")+"失败在发布过程中遇到了未知的问题，请联系客服";if(this.$set(this.goodsTable[s],i,t),"statusName"===i&&a){var o=a.platform_mall_id,r=a.mall_alias_name||a.platform_mall_name;this.$set(this.goodsTable[s],"mallName",r);var l=(t.includes("失败")?"red":t.includes("成功")&&"green")||"";this.$set(this.goodsTable[s],"color",l),this.updateOnNewDetails(e.id,o,{state:t})}}},getCategoryPath:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.$commodityService.getCategoryTbInfo(t.country,e,"0");case 3:if(a=i.sent,s=JSON.parse(a),n=s.data,o=(null===n||void 0===n?void 0:n.categories[0].parent_id)||0,i.t1=o,!i.t1){i.next=17;break}return i.t2=[],i.t3=r["a"],i.next=13,t.getCategoryPath(o);case 13:i.t4=i.sent,i.t5=(0,i.t3)(i.t4),i.t6=[e],i.t1=i.t2.concat.call(i.t2,i.t5,i.t6);case 17:if(i.t0=i.t1,i.t0){i.next=20;break}i.t0=[e];case 20:return i.abrupt("return",i.t0);case 23:return i.prev=23,i.t7=i["catch"](0),i.abrupt("return",[e]);case 26:case"end":return i.stop()}}),i,null,[[0,23]])})))()},changeStockUpNumber:function(e,t){1===t?(e=e<this.preorderMinDays&&this.preorderMinDays||e,e=e>this.preorderMaxDays&&this.preorderMaxDays||e,this.basicConfig.stockUpNumber=e):2===t?(e=e<1?1:e,e=e>5?5:e,this.basicConfig.onNewThread=e):3===t?(e=e,e=e>10?10:e,this.associatedConfig.priceRange=e):4===t&&(e=e<1?1:e,e=e>5?5:e,this.storeConfig.pictureThread=e)},valuationInit:function(){this.valuationConfig=Object.assign(this.valuationConfig,this.valuationSetting),this.calculateReference={long:"",width:"",height:"",weight:"10",costing:"",bubbleHeavy:""},this.calculateResults={results:"",discount:"",freight:"",profits:""},this.valuationVisible=!0},referenceCalculate:function(){var e=this.valuationConfig,t=this.calculateReference,i="";e.discount?e.bubbleHeavy||(i="泡重计算比不能为空"):i="折扣率不能为空",i?this.$message.error(i):this.calculateResults.results=this.getValuationPrice(t.costing,t,e)},goToGoods:function(e,t){if(t)try{var i=this.$filters.countryShopeebuyCom(e.country);this.$BaseUtilService.openUrl("".concat(i,"/product/").concat(e.mallId,"/").concat(e.product_id))}catch(o){this.$message.error("打开失败")}else{var a=e.extra_info&&JSON.parse(e.extra_info)||{},s=Object.assign({productId:e.goods_id},a),n=Object(m["q"])(e.source,s);this.$BaseUtilService.openUrl(n.url)}},enterCategory:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=e.length>0&&void 0!==e[0]?e[0]:0,s=e.length>1&&void 0!==e[1]?e[1]:null,console.log(t.mallList),!(1===a&&t.mallList.length<1)){i.next=6;break}return t.$message.error("请选择一个店铺"),i.abrupt("return",!1);case 6:if(!(2===a&&t.goodsTableSelect.length<1)){i.next=9;break}return t.$message.error("请选择一个商品信息"),i.abrupt("return",!1);case 9:t.goodsCurrent=s,t.categoryVisible=!0;case 11:case"end":return i.stop()}}),i)})))()},categoryChange:function(e){var t=this;if(console.log("categoryChange",e,this.goodsCurrent),e){var i=e.categoryList,a=i[i.length-1],s=a&&"".concat(a.category_name,"(").concat(a.category_cn_name,")")||"";if(this.goodsCurrent&&this.goodsCurrent.id){var n=this.goodsTable.findIndex((function(e){return e.id===t.goodsCurrent.id}));console.log("index",n,s);var o=Object.assign(this.goodsTable[n],{categoryName:s});this.$set(this.goodsTable,n,o),this.goodsClassName[this.goodsTable[n].category_id]=s}else{var r=[];e.attributesList.forEach((function(e){var t=e.new_options_obj.find((function(t){return t.value_id===e.options}));r.push({attributeId:e.attribute_id,attributeName:e.attribute_name,valueId:t.value_id,value:t.value})})),this.goodsTableSelect.forEach(function(){var i=Object(c["a"])(regeneratorRuntime.mark((function i(a){var n,o,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n={relationCategoryId:a.category_id,country:e.country,platformId:a.source,platformCategoryId:e.categoryList[e.categoryList.length-1].category_id,categoryAttributes:r},i.next=3,t.$commodityService.saveCategoryRelation(n);case 3:o=t.goodsTable.findIndex((function(e){return e.id===a.id})),l=Object.assign(t.goodsTable[o],{categoryName:s}),t.$set(t.goodsTable,o,l),t.goodsClassName[t.goodsTable[o].category_id]=s;case 7:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}}this.categoryVisible=!1},enterGoodsTag:function(){this.goodsTableSelect.length<1?this.$message.error("请至少选择一个商品"):this.goodsTagVisible=!0},goodsTagChange:function(e){var t=this;e&&(this.goodsTableSelect.forEach((function(i){var a=e.category&&e.category.label_name;t.updateAttributeName(i,a,"sys_label_name")})),this.$message.success("商品标签修改成功")),this.goodsTagVisible=!1},updateSellActive:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o,r,l,c,u,d,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=6;break}a=t.sellActiveTable.find((function(e){if(!e.goodsId&&(!e.discountId||!e.discount||!e.number))return e})),console.log(a),a?t.$confirm("部分折扣活动未配置折扣信息，是否放弃并继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){t.sellActiveTable.forEach((function(e){var i=t.sellActiveSetting.findIndex((function(t){return t.platform_mall_id===e.platform_mall_id}));console.log(e,i),e.discount&&e.number||e.goodsId?i>-1?t.sellActiveSetting[i]=e:t.sellActiveSetting.push(e):i>-1&&t.sellActiveSetting.splice(i,1)})),console.log("sellActiveSetting",t.sellActiveSetting),t.sellActiveVisible=!1})).catch((function(){})):(t.sellActiveTable.forEach((function(e){var i=t.sellActiveSetting.findIndex((function(t){return t.platform_mall_id===e.platform_mall_id}));e.discount&&e.number||e.goodsId?i>-1?t.sellActiveSetting[i]=e:t.sellActiveSetting.push(e):i>-1&&t.sellActiveSetting.splice(i,1)})),console.log(t.sellActiveSetting),t.sellActiveVisible=!1),i.next=30;break;case 6:if(s=parseInt(t.sellActiveCurrent.discount),n=parseInt(t.sellActiveCurrent.number),!(s<0||s>100||n<1)){i.next=11;break}return t.$message.error("折扣比例或限购数量输入数值有误"),i.abrupt("return");case 11:if(o=t.sellActiveTable.findIndex((function(e){return e.platform_mall_id===t.sellActiveCurrent.platform_mall_id})),!t.sellActiveCurrent.isExisting){i.next=17;break}t.sellActiveTable[o].discount=s,t.sellActiveTable[o].number=n,i.next=29;break;case 17:if(r=Math.floor(new Date(t.sellActiveCurrent.startTime).getTime()/1e3),l=Math.floor(new Date(t.sellActiveCurrent.endTime).getTime()/1e3),!(l-r<3600)){i.next=22;break}return t.$message.error("活动时间不能小于1小时"),i.abrupt("return");case 22:return c={mallId:t.sellActiveCurrent.platform_mall_id,fe_status:"upcoming",highlight:"",title:t.sellActiveCurrent.name,start_time:r,end_time:l,status:1},u={headers:{"Content-Type":"application/json;charset=UTF-8"}},i.next=26,t.$shopeemanService.discount(t.country,c,u);case 26:d=i.sent,p=JSON.parse(d),p.status>=200&&p.status<300?(m=JSON.parse(p.data),0===m.code&&(t.sellActiveTable[o].discountId=m.data.discount_id,t.sellActiveTable[o].discount=s,t.sellActiveTable[o].number=n)):403===p.status?t.$message.error("店铺【".concat(t.sellActiveCurrent.mall_alias_name||t.sellActiveCurrent.platform_mall_name,"】的未登录")):t.$message.error("店铺【".concat(t.sellActiveCurrent.mall_alias_name||t.sellActiveCurrent.platform_mall_name,"】的添加活动折扣失败"));case 29:t.setSellActiveVisible=!1;case 30:case"end":return i.stop()}}),i)})))()},setSellActive:function(e){var t=this;e?(this.sellActiveCurrent=Object.assign(JSON.parse(JSON.stringify(e)),{name:"",startTime:"",endTime:""}),this.setSellActiveVisible=!0):(this.sellActiveTable=[],this.mallList.forEach((function(e){var i=t.sellActiveSetting.filter((function(t){return t.platform_mall_id===e.platform_mall_id}))[0];i=i||Object.assign(JSON.parse(JSON.stringify(e)),{isExisting:!0,discountId:"",goodsId:"",discount:"",number:""}),t.sellActiveTable.push(i)})),this.sellActiveVisible=!0)},setWatermark:function(e){e?(this.watermarkConfig=Object.assign(this.watermarkConfig,JSON.parse(JSON.stringify(this.watermarkSetting))),this.watermarkVisible=!0):(this.watermarkSetting=JSON.parse(JSON.stringify(this.watermarkConfig)),this.watermarkVisible=!1)},watermarkPreview1:function(){var e=this;this.uploadImgAdd=!0,this.watermarkPreviewType=1,setTimeout((function(){e.$refs["uploadImg"].$el.click()}),100)},watermarkPreview2:function(){var e=this;this.uploadImgAdd=!0,this.watermarkPreviewType=2,setTimeout((function(){e.$refs["uploadImg"].$el.click()}),100)},watermarkPreview:function(e){var t=this,i=e.raw,a=new FileReader;a.readAsDataURL(i),a.onload=function(){1===t.watermarkPreviewType?t.watermarkConfig.goodsImg=a.result:t.watermarkConfig.watermarkImg=a.result},this.uploadImgAdd=!1},changeLogistics:function(){var e=this,t=this.$shopeeManConfig.getLogisticsList();t=t[this.country]||[],this.logisticsList=[],this.logistics=[],t.forEach((function(t){e.logisticsList.push(t),t.IsSelected&&e.logistics.push(t.ShipId)}))},changeMallList:function(e){console.log(e),this.mallList=e.mallList||[],this.country=e.country},handleSelectionChange:function(e){this.goodsTableSelect=e||[]},deleteGoodsList:function(e){var t=this;if(e)this.goodsTable=[],localStorage.setItem("goodsTableJson",""),this.sourceCategoryList=[],this.sourceCategory=[0];else if(this.goodsTableSelect.length>0){for(var i=localStorage.getItem("goodsTableJson"),a=i&&JSON.parse(i)||[],s=function(e){var i=t.goodsTableSelect[e],s=t.goodsTable.findIndex((function(e){return e.id===i.id})),n=a.findIndex((function(e){return e.id===i.id}));t.goodsTable.splice(s,1),a.splice(n,1)},n=0;n<this.goodsTableSelect.length;n++)s(n);var o=new Set;a.forEach((function(e){o.add(e.category_name)})),this.sourceCategoryList=Object(r["a"])(o),this.sourceCategory=[0].concat(Object(r["a"])(o)),localStorage.setItem("goodsTableJson",JSON.stringify(a))}else this.$message.error("请选择一个商品")},copy:function(e){Object(m["f"])(e)},keyFilterChange:function(e,t){1===e?t?this.associatedConfig.keyFilter.includes(0)?this.associatedConfig.keyFilter=[0].concat(Object(r["a"])(this.keyFilterList.map((function(e){return e.value})))):this.associatedConfig.keyFilter=[]:this.associatedConfig.keyFilter.includes(0)?this.associatedConfig.keyFilter.splice(0,1):this.associatedConfig.keyFilter.length===this.keyFilterList.length&&(this.associatedConfig.keyFilter=[0].concat(Object(r["a"])(this.keyFilterList.map((function(e){return e.value}))))):2===e&&(t?this.sourceCategory.includes(0)?this.sourceCategory=[0].concat(Object(r["a"])(this.sourceCategoryList)):this.sourceCategory=[]:this.sourceCategory.includes(0)?this.sourceCategory.splice(0,1):this.sourceCategory.length===this.sourceCategoryList.length&&(this.sourceCategory=[0].concat(Object(r["a"])(this.sourceCategoryList))))},publishGoodsConfigSave:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,a,s,n,o,r,l,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.storeConfig.watermarkChecked||!e.watermarkSetting||e.watermarkSetting.type){t.next=3;break}return e.$message.error("配置水印后再操作"),t.abrupt("return");case 3:return i=JSON.stringify(e.storeConfig),a=JSON.stringify(e.basicConfig),s=JSON.stringify(e.associatedConfig),n=JSON.stringify(e.freightList),o=JSON.stringify(e.valuationSetting),r=JSON.stringify(e.watermarkSetting),l={config:{storeConfig:i,basicConfig:a,associatedConfig:s,freightList:n,valuationSetting:o,watermarkSetting:r},country:e.country},t.next=12,e.$api.publishGoodsConfigSave(l);case 12:c=t.sent,u=c.data,200===u.code?e.$message.success("保存配置成功"):e.$message.error("保存配置失败");case 15:case"end":return t.stop()}}),t)})))()},publishGoodsConfigGet:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,a,s,n,o,r,l,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.publishGoodsConfigGet({country:e.country});case 2:i=t.sent,a=i.data,200===a.code&&a.data&&(s=a.data.config,s&&(n=s.basicConfig&&JSON.parse(s.basicConfig),o=s.storeConfig&&JSON.parse(s.storeConfig),r=s.associatedConfig&&JSON.parse(s.associatedConfig),l=s.freightList&&JSON.parse(s.freightList),c=s.valuationSetting&&JSON.parse(s.valuationSetting),u=s.watermarkSetting&&JSON.parse(s.watermarkSetting),e.basicConfig=n||e.basicConfig,e.storeConfig=o||e.storeConfig,e.associatedConfig=r||e.associatedConfig,e.freightList=l||e.freightList,e.valuationSetting=c||e.valuationSetting,e.watermarkSetting=u||e.watermarkSetting));case 5:case"end":return t.stop()}}),t)})))()},queryGoodsTable:function(){var e=this,t=this.goodsTable;if(0===this.resultsFilter){var i=localStorage.getItem("goodsTableJson");if(t=i&&JSON.parse(i)||[],this.sourceCategory.includes(0)){var a=new Set;t.forEach((function(e){a.add(e.category_name)})),this.sourceCategoryList=Object(r["a"])(a),this.sourceCategory=[0].concat(Object(r["a"])(a))}}else if(1===this.resultsFilter){var s=localStorage.getItem("goodsTableJson"),n=s&&JSON.parse(s)||[];t.forEach((function(e){var t=n.findIndex((function(t){return t.id===e.id}));t>=0&&(n[t]=e)})),t=[],n.forEach((function(e){e.resultsFilter||t.push(e)}))}else{var o=t;t=[],o.forEach((function(i){i.resultsFilter===e.resultsFilter&&t.push(i)}))}if(console.log("goodsTable",t),this.sourceCategory.includes(0))this.goodsTable=t;else{var l=[];t.forEach((function(t){e.sourceCategory.includes(t.category_name)&&l.push(t)})),this.goodsTable=l}},updateOnNewDetails:function(e,t,i){this.newOnDetails[e]||(this.newOnDetails[e]={}),this.newOnDetails[e][t]?this.newOnDetails[e][t]=Object.assign(this.newOnDetails[e][t],i):this.newOnDetails[e][t]=i},viewDetails:function(e){console.log("viewDetails",e),this.newOnDetailsList=[];var t=this.newOnDetails[e];if(t)for(var i in t)this.newOnDetailsList.push(Object(n["a"])(Object(n["a"])({},t[i]),{},{mallId:i}));this.detailsVisible=!0},setTimeShow:function(){if(this.goodsTableSelect.length<1)this.$message.error("请选择商品后再操作");else if(this.logistics.length<1)this.$message.error("配置物流信息后再操作");else if(this.mallList.length<1)this.$message.error("请选择店铺后再操作");else{if(this.customLogistics.length>0){var e,t=Object(l["a"])(this.customLogistics);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(!(1*i.price))return void this.$message.error("运费价格有误，请确认")}}catch(a){t.e(a)}finally{t.f()}}this.storeConfig.watermarkChecked&&this.watermarkSetting&&!this.watermarkSetting.type?this.$message.error("配置水印后再操作"):(this.setTimeConfig={onNewInterval:"ID"!==this.country?"40":"50",onNewThread:"5",name:"",time:new Date((new Date).getTime()+864e5)},this.setTimeVisible=!0)}},saveSetTime:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o,l,c,u,d,p,g,f,h,b,v,C,y,x,k,_,w,S,I,T,R,N;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.setTimeConfig.name){i.next=3;break}return t.$message.error("任务名称不能为空"),i.abrupt("return");case 3:if(!(t.setTimeConfig.onNewThread>5||t.setTimeConfig.onNewThread<1)){i.next=6;break}return t.$message.error("任务线程需大于等于1小于等于5"),i.abrupt("return");case 6:return a=JSON.stringify({mallList:t.mallList,config:t.setTimeConfig}),s=t.country,n=Object(m["h"])(t.setTimeConfig.time,"yyyy-MM-dd hh:mm:ss"),o=t.setTimeConfig.name,l=t.mallList.map((function(e){return e.platform_mall_id})).toString(),c=t.mallList.map((function(e){return e.mall_alias_name||e.platform_mall_name})).toString(),u=e?3:4,d=t.goodsTableSelect.length,p=0,g=0,f=Math.floor((new Date).getTime()/1e3),h={ext_info:a,country:s,exec_time:n,mall_Ids:l,mall_names:c,status:u,task_name:o,success_count:p,fail_count:g,goods_count:d,created_at:f},console.log("saveCronPublishTask - parma",h),i.next=21,t.$collectService.saveCronPublishTask(h);case 21:if(b=i.sent,console.log("setConfig",b),200!==Number(b.code)){i.next=48;break}return t.$message.success("配置定时刊登成功"),v=new Date((new Date).getTime()-864e5),C=new Date((new Date).getTime()+864e5),y=Math.floor(v.getTime()/1e3),x=Math.floor(C.getTime()/1e3),i.next=31,t.$collectService.getCronPublishTask(s,u+"",o,y,x);case 31:if(k=i.sent,console.log("getCronPublishTask",k),_=k&&k[k.length-1]||null,!_){i.next=48;break}return w=_.id,S={country:t.country,rateList:t.rateList,logistics:t.logistics,customLogistics:t.customLogistics,storeConfig:t.storeConfig,watermarkSetting:t.watermarkSetting,sellActiveTable:t.sellActiveTable,sellActiveSetting:t.sellActiveSetting,valuationRadio:t.valuationRadio,basicConfig:t.basicConfig,valuationSetting:t.valuationSetting,freightList:t.freightList,titleInterval:t.titleInterval,descriptionInterval:t.descriptionInterval,mewOnProgress:t.mewOnProgress,calculateResults:t.calculateResults,associatedConfig:t.associatedConfig},I={task_id:w,publish_config:JSON.stringify(S)},i.next=40,t.$collectService.saveCronPublishConfig(I);case 40:return T=i.sent,R=JSON.parse(JSON.stringify(t.goodsTableSelect)),R=Object(r["a"])(R.map((function(e){return{task_id:w,ori_goods_id:e.goods_id,pri_goods_id:"",ori_category_id:e.category_id,ori_category_name:e.category_name,shopee_category_id:"",shopee_category_name:"",mall_id:"",mall_name:"",shopee_goods_id:"",status:1,message:"",goods_info:JSON.stringify(e)}}))),console.log("goodsList",R),i.next=46,t.$collectService.saveCronPublishGoods(R);case 46:N=i.sent,console.log(T,N);case 48:t.setTimeVisible=!1;case 49:case"end":return i.stop()}}),i)})))()},goodsEditorCancel:function(e){if(e){var t=this.goodsTable.findIndex((function(t){return t.id===e.sysGoodsId})),i=Object.assign(this.goodsTable[t],e);this.$set(this.goodsTable,t,i)}this.goodsEditorVisible=(null===e||void 0===e?void 0:e.isSustain)||!1},updateGoodsEdit:function(e,t){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t&&(i.goodsEditor=e,i.goodsEditorVisible=!0);case 1:case"end":return a.stop()}}),a)})))()},downloadTemplate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=[],a="上新行销活动配置模板",s=["店铺名称","店铺ID","折扣活动ID","折扣折数","折扣活动限购数量","商店分类ID"],e.mallList.map((function(e){var t=[],a=e.country,s=e.mall_alias_name||e.platform_mall_name;t.push(a+"-"+s),t.push(e.platform_mall_id),i.push(t)})),t.next=6,Object(m["x"])(s,i,a);case 6:case"end":return t.stop()}}),t)})))()},importTemplateEvent:function(e){var t=this,i={0:e.raw};if(/\.(xls|xlsx)$/.test(i[0].name.toLowerCase()))if(i.length<=0)this.writeLog("表格为空",!1);else{var a=new FileReader;a.onload=function(e){var i=e.target.result,a=y.a.read(i,{type:"binary"}),s=a.SheetNames[0],n=y.a.utils.sheet_to_json(a.Sheets[s]);t.importTemplateData=n||[],n=null,t.importDataAssembly(),t.$refs.importRef.value=""},a.readAsBinaryString(i[0])}else this.writeLog("上传格式不对,请上传xls、xls格式的文件",!1)},importDataAssembly:function(){var e=this;console.log(this.sellActiveTable,this.importTemplateData);var t=this.importTemplateData.length;t?this.importTemplateData.forEach((function(t){var i=t["店铺名称"]||"",a=t["店铺ID"]||"";if(i||a){var s=t["折扣活动ID"],n=t["折扣折数"],o=t["折扣活动限购数量"],r=t["商店分类ID"],l=i.split("-"),c=l.splice(0,1).toString();i=l.join("-");var u=e.sellActiveTable.findIndex((function(e){return a===e.platform_mall_id||e.country===c&&(e.mall_alias_name===i||e.platform_mall_name===i)}));if(u>=0){var d=e.sellActiveTable[u];e.$set(e.sellActiveTable,u,Object.assign(d,{discountId:s||d.discountId,discount:n||d.discount,number:o||d.number,goodsId:r||d.goodsId}))}}})):this.$message.error("列表数据为空")},accountPermissions:function(){var e=this;return Object(m["c"])(4,(function(){e.associatedConfig.dimensionRadio=1,e.$message.error("个人版不支持一商品多店铺，请购买或升级进阶、企业、终生版！")}))}}},_=k,w=(i("91d9"),i("4705"),i("2877")),S=Object(w["a"])(_,a,s,!1,null,"48dbc2bc",null);t["default"]=S.exports},"81a6":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("d3b7"),i("25f0"),i("a9e3"),i("fb6a");function a(){this.date=new Date,"function"!==typeof this.newGUID&&(a.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),i=this.hexadecimal(this.getGUIDTime(),16),a=0;a<9;a++)e+=Math.floor(16*Math.random()).toString(16);e+=t,e+=i;while(e.length<32)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},a.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},a.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},a.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},a.prototype.hexadecimal=function(e,t,i){return void 0!=i?parseInt(e.toString(),i).toString(t):parseInt(e.toString()).toString(t)},a.prototype.formatGUID=function(e){var t=e.slice(0,8)+"-",i=e.slice(8,12)+"-",a=e.slice(12,16)+"-",s=e.slice(16,20)+"-",n=e.slice(20);return t+i+a+s+n})}},8992:function(e,t,i){"use strict";i("4c28")},"91d9":function(e,t,i){"use strict";i("492d")},ba09:function(e,t,i){},feb6:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ul",{staticClass:"storeChooseUL"},[e.isMall?i("li",[e._v(e._s(e._f("chineseSite")(e.countryVal)))]):i("li",{style:e.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:e.spanWidth}},[e._v("所属站点：")]),i("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:e.isBanPerform},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?i("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),i("li",{style:e.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:e.spanWidth}},[e._v("店铺分组：")]),i("el-select",{staticClass:"selectBox",attrs:{disabled:e.isBanPerform,multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groupIdList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})})),1)],1),i("li",{style:e.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:e.spanWidth}},[e._v("店铺名称：")]),i("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{disabled:e.isBanPerform,placeholder:"",multiple:!e.isAShop,"collapse-tags":"","filter-method":e.filterMall,size:"mini",filterable:"",clearable:""},on:{"visible-change":function(t){return e.filterMall("")}},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[e.isAShop?e._e():i("el-option",{attrs:{label:"全部",value:""}}),e._l(e.siteShowList,(function(t,a){return e.showMall(t,a)?i("el-option",{key:a,attrs:{label:t.mall_alias_name||t.platform_mall_name,value:t.platform_mall_id}}):e._e()}))],2)],1),e.isReset?i("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[i("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:e.reset}},[e._v("　刷　　新　")])],1):e._e()])])},s=[],n=i("1da1"),o=i("b85c"),r=i("2909"),l=(i("96cf"),i("d81d"),i("fb6a"),i("caad"),i("2532"),i("d3b7"),i("25f0"),i("99af"),i("6062"),i("3ca3"),i("ddb0"),i("4de4"),i("159b"),i("c740"),i("7db0"),i("7646")),c=i("2b0e");c["default"].directive("loadmore",{bind:function(e,t){var i=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");i.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?t.value(!0,this):this.scrollTop<30&&t.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(e){this.siteShowList=e},countryVal:{handler:function(e,t){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(e,t){var i=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var a=t.indexOf("")>-1,s=e.indexOf("")>-1;a!==s?this.groupId=s?Object(r["a"])(this.groupIdList.map((function(e){return e.id}))):[]:s?this.groupId=e.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){i.isAllowSet2=!0,i.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(e,t){var i=this;if(this.isAllowSet1){this.isAllowSet1=!1;var a=this.isShowName;if(!this.isAShop){var s=t.includes(""),n=e.includes("");if(s!==n||t.toString()===e.toString()&&this.isShowNameAll)if(n&&(!a||a&&!this.isShowNameAll)){var l=a&&Object(r["a"])(this.siteShowList.map((function(e){return e.platform_mall_id})))||[""].concat(Object(r["a"])(this.siteList.map((function(e){return e.platform_mall_id})))),c=new Set([].concat(Object(r["a"])(l),Object(r["a"])(t)));this.site=Object(r["a"])(c),this.isShowNameAll=!0,a&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(a){var d=a&&Object(r["a"])(this.siteShowList.map((function(e){return e.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,m=d.length>this.site.length&&d||this.site;u=new Set(this.site);var g,f=Object(o["a"])(m);try{for(f.s();!(g=f.n()).done;){var h=g.value;p.includes(h)&&u.delete(h)}}catch(b){f.e(b)}finally{f.f()}u.delete("")}this.site=Object(r["a"])(u)}else n?this.site=e.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1}setTimeout((function(){i.changeMallList(),i.filterMall(a),i.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o,l,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.site=[],a=t.countryVal,s=[],!(t.jsonMallData.length>0)){i.next=7;break}s=t.jsonMallData,i.next=12;break;case 7:return i.next=9,t.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:n=i.sent,s=JSON.parse(n)||[],t.jsonMallData=JSON.parse(n)||[];case 12:if(!(s.length>0)){i.next=17;break}1===e&&(t.siteList=""===a?s:s.filter((function(e){return e.country===a}))),2===e&&(0===t.groupId.length?t.siteList=[]:(t.siteList=[],t.groupId.forEach((function(e){s.forEach((function(i){a?e===i.group_id&&a===i.country&&t.siteList.push(i):e===i.group_id&&t.siteList.push(i)}))})))),i.next=22;break;case 17:return o={country:"",mallGroupIds:""},i.next=20,t.mallListAPIInstance.ddMallGoodsGetMallList(o);case 20:l=i.sent,200===l.code?(t.$appConfig.temporaryCacheInfo("save","mallAllData",l.data),c=l.data||[],t.siteList=c,t.jsonMallData=c,t.siteList=""===a?c:c.filter((function(e){return e.country===a}))):t.$message.error("获取分组、店铺列表失败");case 22:u=[],0===t.groupIdList.length&&(t.groupIdList=[{group_name:"全部",id:""}],t.siteList.forEach((function(e){var t=u.findIndex((function(t){return t&&t.id===e.group_id}));e.group_name&&t<0&&u.push({group_name:e.group_name,id:e.group_id})})),u.zzSort("id"),t.groupIdList=[].concat(Object(r["a"])(t.groupIdList),u),t.groupId=[""].concat(Object(r["a"])(u.map((function(e){return e.id}))))),setTimeout((function(){t.isAllowSet2=!0,t.isAllowSet1=!0,t.site=!t.isAShop&&[""]||""}),10);case 25:case"end":return i.stop()}}),i)})))()},changeMallList:function(){var e=this,t=[],i="";if(this.isAShop){var a=this.siteList.find((function(t){return t.platform_mall_id===e.site}));i=this.site,t.push(a)}else this.site.forEach((function(a){if(a){var s=e.siteList.find((function(e){return e.platform_mall_id===a}));t.push(s),i+=a+","}}));!this.countryVal&&this.groupId.indexOf("")>-1&&(i=t.length!==this.siteList.length&&i||""),this.source?this.$emit("changeMallList",{mallList:t,source:this.source,searchAll:i,country:this.countryVal.toLocaleUpperCase()}):(t["country"]=this.countryVal,this.$emit("changeMallList",t))},filterMall:function(e){var t=this,i=e&&this.isShowName!==e?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){t.isShowName!==e&&(t.mallShowIndex=0),t.isShowName=e||"";var i=t.siteList;e&&(i=t.siteList.filter((function(t){var i=t.mall_alias_name||t.platform_mall_name;return i.includes(e)}))),t.siteShowList=i}),i)},showMall:function(e,t){var i=e.mall_alias_name||e.platform_mall_name,a=this.site[0]===e.platform_mall_id;return a||this.mallShowIndex<=t&&t<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||i.includes(this.isShowName))},loadmoreMall:function(e,t){if(this.siteShowList.length>this.showMallNumber){var i=0;e?(i=this.mallShowIndex+10,i=i<this.siteShowList.length-this.showMallNumber&&i||this.siteShowList.length-this.showMallNumber):(i=this.mallShowIndex-10,i=i>0&&i||0),i!==this.mallShowIndex&&(t.scrollTop=e?t.scrollTop-100:30),this.mallShowIndex=i}}}},d=u,p=(i("8992"),i("2877")),m=Object(p["a"])(d,a,s,!1,null,null,null);t["a"]=m.exports}}]);