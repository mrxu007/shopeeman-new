(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60dbe8c4"],{"05e3":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{class:["category-content",{"category-column":!0===t.isColumn}]},[a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("站点：")]),a("el-select",{attrs:{size:"mini",filterable:"",disabled:t.isSelect},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("一级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,1)}},model:{value:t.category1,callback:function(e){t.category1=e},expression:"category1"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList1,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1),3===t.level||2===t.level?a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("二级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,2)}},model:{value:t.category2,callback:function(e){t.category2=e},expression:"category2"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList2,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1):t._e(),3===t.level?a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("三级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,3)}},model:{value:t.category3,callback:function(e){t.category3=e},expression:"category3"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList3,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1):t._e()])])},r=[],i=a("1da1"),l=(a("96cf"),a("a9e3"),{name:"CategoryChoose",props:{isSelect:{type:Boolean,default:!1},spanWidth:{type:String,default:""},isAll:{type:Boolean,default:!1},isCategoryAll:{type:Boolean,default:!0},level:{type:Number,default:3},isColumn:{type:Boolean,default:!1}},data:function(){return{countryVal:null,countries:this.$filters.countries_option,countries_id:{TH:"4",MY:"5",TW:"3",SG:"1",PH:"7",VN:"6",ID:"2",BR:"8",MX:"9",CO:"10",CL:"11",PL:"12"},category1:"",categoryList1:[],category2:"",categoryList2:[],category3:"",categoryList3:[],categoryList:[]}},watch:{countryVal:{handler:function(t,e){this.category1="",this.category2="",this.category3="",this.categoryList1=[],this.categoryList2=[],this.categoryList3=[],this.getCategory(t,0)},deep:!0},category1:function(t,e){this.category2="",this.category3="",this.categoryList2=[],this.categoryList3=[],this.sendParent()},category2:function(t,e){this.category3="",this.categoryList3=[],this.sendParent()}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{chageSite:function(t){this.countryVal=t},getCategory:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var r,i,l,n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a.countryVal){o.next=3;break}return a.sendParent(),o.abrupt("return");case 3:if(a.level!==e){o.next=6;break}return a.sendParent(),o.abrupt("return");case 6:if(0===e||t){o.next=11;break}return a["category".concat(e+1)]="",a["categoryList".concat(e+1)]=[],a.sendParent(),o.abrupt("return");case 11:return r=[a.countryVal,0!==e?t&&""!==t?t:"":"0","1","tbCategory"],o.next=14,a.$commodityService.getCategory(r);case 14:if(i=o.sent,i){o.next=17;break}return o.abrupt("return",a.$message.warning("获取失败"));case 17:if(l=JSON.parse(i),200!==l.code){o.next=23;break}n=l.data,n.categories&&(a["categoryList".concat(e+1)]=n.categories||[]),o.next=24;break;case 23:return o.abrupt("return",a.$message.warning("获取失败"));case 24:a.sendParent();case 25:case"end":return o.stop()}}),o)})))()},sendParent:function(){if(this.categoryList=[],this.category1){var t=[this.category1];this.categoryList=t}if(this.category1&&this.category2){var e=[this.category1,this.category2];this.categoryList=e}if(this.category1&&this.category2&&this.category3){var a=[this.category1,this.category2,this.category3];this.categoryList=a}var o={country:this.countryVal,categoryFirst:this.category1,categorySecond:this.category2,categoryThird:this.category3,categoryList:this.categoryList,platformId:this.countries_id[this.countryVal]};this.$emit("setCategory",o)}}}),n=l,s=(a("5bef"),a("2877")),c=Object(s["a"])(n,o,r,!1,null,"56c5a0e3",null);e["a"]=c.exports},"5bef":function(t,e,a){"use strict";a("829a")},"829a":function(t,e,a){},"8f31":function(t,e,a){"use strict";a("d8f5")},"9d31":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contaniner"},[a("div",{staticClass:"operation"},[a("div",{staticClass:"o-item"},[a("category-choose",{attrs:{"is-all":!1,level:3},on:{setCategory:t.setCategory}})],1),a("div",{staticClass:"o-item"},[a("span",[t._v("排序：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}},t._l(t.sortList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"o-item",staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getAvgPrice}},[t._v("搜索")])],1)]),a("div",{staticClass:"table-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isloading,expression:"isloading"}],attrs:{data:t.tableData,border:!1,height:"calc(100vh - 135px)","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号","min-width":"50",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"platform_id",align:"center","show-overflow-tooltip":"",label:"站点","min-width":"80",fixed:""}}),a("el-table-column",{attrs:{prop:"date",align:"center","show-overflow-tooltip":"",label:"日期","min-width":"90"}}),a("el-table-column",{attrs:{prop:"category1",align:"center","show-overflow-tooltip":"",label:"一级类目","min-width":"150"}}),a("el-table-column",{attrs:{prop:"category2",align:"center","show-overflow-tooltip":"",label:"二级类目","min-width":"150"}}),a("el-table-column",{attrs:{prop:"category3",align:"center","show-overflow-tooltip":"",label:"三级类目","min-width":"150"}}),a("el-table-column",{attrs:{prop:"goods_price_avg",align:"center","show-overflow-tooltip":"",label:"商品平均价","min-width":"90"}}),a("el-table-column",{attrs:{prop:"goods_count_rise_day",align:"center","show-overflow-tooltip":"",label:"商品日增长数","min-width":"110"}}),a("el-table-column",{attrs:{prop:"sales_rate_day",align:"center","show-overflow-tooltip":"",label:"动销率(日)","min-width":"90"}}),a("el-table-column",{attrs:{prop:"goods_count",align:"center","show-overflow-tooltip":"",label:"商品总数(日)","min-width":"110"}}),a("el-table-column",{attrs:{prop:"has_sales_goods_count_day",align:"center","show-overflow-tooltip":"",label:"有销量的商品数(日)","min-width":"150",fixed:"right"}})],1)],1)])},r=[],i=a("1da1"),l=(a("4e82"),a("d81d"),a("ac1f"),a("1276"),a("96cf"),a("05e3")),n={components:{CategoryChoose:l["a"]},data:function(){return{isloading:!1,form:{site:"4",sort:"date",cat_id_1:"",cat_id_2:"",cat_id_3:""},sortList:[{value:"date",label:"日期"},{value:"goods_price_avg",label:"商品平均价"},{value:"goods_count_rise_day",label:"商品日增长数"},{value:"sales_rate_day",label:"动销率(日)"},{value:"goods_count",label:"商品总数(日)"},{value:"has_sales_goods_count_day",label:"有销量的商品数(日)"}],siteObj:{SG:"1",ID:"2",TW:"3",TH:"4",VN:"6",MY:"5",PH:"7",BR:"8",MX:"9"},platformId:{1:"新加坡",2:"印尼",3:"台湾",4:"泰国",5:"马来",6:"越南",7:"菲律宾",8:"巴西",9:"墨西哥",10:"哥伦比亚",11:"智利",12:"波兰"},tableData:[]}},mounted:function(){this.getAvgPrice()},methods:{setCategory:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.form.site=e.siteObj[t.country],e.form.cat_id_1=t.categoryFirst,e.form.cat_id_2=t.categorySecond,e.form.cat_id_3=t.categoryThird;case 4:case"end":return a.stop()}}),a)})))()},getAvgPrice:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isloading=!0,a={platform_id:t.form.site,order_by:t.form.sort,cat_id_1:t.form.cat_id_1,cat_id_2:t.form.cat_id_2,cat_id_3:t.form.cat_id_3},e.prev=2,e.next=5,t.$commodityService.getAvgPrice(a);case 5:o=e.sent,r=JSON.parse(o),"success"===r.msg?(t.tableData=r.data,t.tableData.map((function(e){e.platform_id=t.platformId[e.platform_id];var a=e.display_path.split(">"),o=e.display_path_cn.split(">");e.category1=a[0]?a[0]+"("+o[0]+")":"",e.category2=a[1]?a[1]+"("+o[1]+")":"",e.category3=a[2]?a[2]+"("+o[2]+")":""})),t.isloading=!1):(t.$message.error("获取数据失败:".concat(r.status_code)),t.isloading=!1),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),t.tableData=[],t.isloading=!1;case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))()}}},s=n,c=(a("8f31"),a("2877")),u=Object(c["a"])(s,o,r,!1,null,null,null);e["default"]=u.exports},d8f5:function(t,e,a){}}]);