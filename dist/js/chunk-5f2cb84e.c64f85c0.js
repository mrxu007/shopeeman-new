(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f2cb84e"],{3116:function(t,e,a){"use strict";a("5a84")},"4c28":function(t,e,a){},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}},"5a84":function(t,e,a){},"73da":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("storeChoose",{on:{changeMallList:t.changeMallList}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.isFold=!t.isFold}}},[t._v(t._s(t.isFold?"折叠":"展开"))])],1),t.isFold?a("ul",{staticStyle:{"margin-bottom":"5px"}},[a("li",{staticClass:"data"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("商品数据相关")]),a("div",{staticClass:"base-item"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("li",{staticClass:"data-input"},[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"销售量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.soldMin,callback:function(e){t.soldMin=e},expression:"soldMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.soldMax,callback:function(e){t.soldMax=e},expression:"soldMax"}})],1),a("el-form-item",{attrs:{label:"访客量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.viewMin,callback:function(e){t.viewMin=e},expression:"viewMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.viewMax,callback:function(e){t.viewMax=e},expression:"viewMax"}})],1),a("el-form-item",{attrs:{label:"粉丝量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.likeMin,callback:function(e){t.likeMin=e},expression:"likeMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.likeMax,callback:function(e){t.likeMax=e},expression:"likeMax"}})],1),a("el-form-item",{attrs:{label:"价格："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.priceMin,callback:function(e){t.priceMin=e},expression:"priceMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.priceMax,callback:function(e){t.priceMax=e},expression:"priceMax"}})],1),a("el-form-item",{attrs:{label:"商品数量："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.goodsMin,callback:function(e){t.goodsMin=e},expression:"goodsMin"}}),t._v("- "),a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.goodsMax,callback:function(e){t.goodsMax=e},expression:"goodsMax"}})],1)],1)],1),a("li",[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"是否售空："}},[a("el-select",{attrs:{size:"mini",filterable:"",disabled:t.operationBut},model:{value:t.sellStatus,callback:function(e){t.sellStatus=e},expression:"sellStatus"}},[a("el-option",{attrs:{value:0,label:"全部"}}),t._l(t.sellStatusList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),a("el-form-item",{attrs:{label:"商品状态："}},[a("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"goodsStatus")}},model:{value:t.goodsStatus,callback:function(e){t.goodsStatus=e},expression:"goodsStatus"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("goodsStatus",t.goodsStatusList)}}}),t._l(t.goodsStatusList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),a("el-form-item",{attrs:{label:"上家来源："}},[a("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"source")}},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("source",t.sourceList)}}}),t._l(t.sourceList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),a("el-form-item",{attrs:{label:"更新时间："}},[a("el-date-picker",{attrs:{disabled:t.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.modifyTime,callback:function(e){t.modifyTime=e},expression:"modifyTime"}})],1),a("el-form-item",{attrs:{label:"创建时间："}},[a("el-date-picker",{attrs:{disabled:t.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}})],1)],1)],1)]),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("li",[a("el-checkbox",{staticStyle:{"margin-right":"3px"},attrs:{disabled:t.operationBut},model:{value:t.productNumChecked,callback:function(e){t.productNumChecked=e},expression:"productNumChecked"}},[t._v("单店查询商品数量")]),a("el-input",{staticStyle:{width:"105px"},attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productNum,callback:function(e){t.productNum=e},expression:"productNum"}})],1),a("li",{staticClass:"data-goods"},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:t.operationBut,size:"mini",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-select",{attrs:{slot:"prepend",disabled:t.operationBut},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1)]),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{staticStyle:{"margin-right":"3px"},attrs:{disabled:t.operationBut,type:"primary",size:"mini"},on:{click:function(e){t.editCategory=!1,t.categoryVisible=!0}}},[t._v("选择类目")]),a("el-input",{staticStyle:{width:"455px"},attrs:{disabled:!0,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.categoryName,callback:function(e){t.categoryName=e},expression:"categoryName"}})],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("syncOriginGoodsNum")}}},[t._v("同步上家库存")]),a("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary",size:"mini",disabled:!0}},[t._v("商品搬迁")]),a("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchConfirm")}}},[t._v("批量确认")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!0}},[t._v("商品一键翻新")])],1),a("ul",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=100,t.queryData()}}},[t._v("一键查询100小时以上无流量商品")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=200,t.queryData()}}},[t._v("一键查询200小时以上无流量商品")])],1)])])]),a("li",{staticClass:"operation"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("操作选项")]),a("div",{staticClass:"base-item"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=1,t.queryData()}}},[t._v("查询数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchTitle")}}},[t._v("批量编辑标题")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.operation("batchUpDownProduct"),t.upDown=!1}}},[t._v("批量上架")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=1,t.operation("batchDelete")}}},[t._v("批量删除")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchCategory")}}},[t._v("批量修改类目属性")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:t.exportTableData}},[t._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchDescription")}}},[t._v("批量编辑描述")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.operation("batchUpDownProduct"),t.upDown=!0}}},[t._v("批量下架")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.operationBut},on:{click:function(e){t.stop(),t.flag=!0}}},[t._v("取消操作")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:t.queryBanned}},[t._v("一键查询禁卖商品")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}},[t._v("隐藏日志")])],1),a("ul",[a("li",{staticClass:"operation-input"},[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"商品库存："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productStock,callback:function(e){t.productStock=e},expression:"productStock"}})],1),a("el-form-item",{attrs:{label:"商品价格："}},[a("el-input",{staticClass:"mini-input",attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productPrice1,callback:function(e){t.productPrice1=e},expression:"productPrice1"}}),t._v(" % + "),a("el-input",{staticClass:"mini-input",attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productPrice2,callback:function(e){t.productPrice2=e},expression:"productPrice2"}})],1),a("el-form-item",{attrs:{label:"发货天数："}},[a("el-input",{attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productDay,callback:function(e){t.productDay=e},expression:"productDay"}})],1),a("el-form-item",{attrs:{label:"物流方式："}},[a("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"logistics")}},model:{value:t.logistics,callback:function(e){t.logistics=e},expression:"logistics"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("logistics",t.logisticsList)}}}),t._l(t.logisticsList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.ShipId,label:t.ShipName}})}))],2)],1),a("el-form-item",{attrs:{label:"商品重量："}},[a("el-input",{staticStyle:{width:"102px"},attrs:{disabled:t.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d.]/g,'')"},model:{value:t.productWeight,callback:function(e){t.productWeight=e},expression:"productWeight"}}),a("span",{staticClass:"red-span",staticStyle:{"margin-left":"3px"}},[t._v("kg")])],1),a("div",{staticStyle:{"line-height":"31px"}},[a("el-radio",{attrs:{disabled:t.operationBut,label:1},model:{value:t.freightRadio,callback:function(e){t.freightRadio=e},expression:"freightRadio"}},[t._v("免运")]),a("el-radio",{attrs:{disabled:t.operationBut,label:2},model:{value:t.freightRadio,callback:function(e){t.freightRadio=e},expression:"freightRadio"}},[t._v("运费由买家承担")])],1),a("el-form-item",{attrs:{label:"商品尺寸："}},[a("el-input",{staticClass:"mini-input item",attrs:{disabled:t.operationBut,size:"mini",placeholder:"长",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productLength,callback:function(e){t.productLength=e},expression:"productLength"}}),t._v("* "),a("el-input",{staticClass:"mini-input item",attrs:{disabled:t.operationBut,size:"mini",placeholder:"宽",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productWidth,callback:function(e){t.productWidth=e},expression:"productWidth"}}),t._v("* "),a("el-input",{staticClass:"mini-input item",attrs:{disabled:t.operationBut,size:"mini",placeholder:"高",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productHeight,callback:function(e){t.productHeight=e},expression:"productHeight"}})],1)],1)],1),a("li",{staticClass:"operation-but"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchStock")}}},[t._v("批量更新库存")]),a("span",{staticClass:"red-span"},[t._v("（0，表示库存设置为0）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("batchPrice")}}},[t._v("批量更新价格")]),a("span",{staticClass:"red-span"},[t._v("（加价公式：原价+原价*百分比+数值）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("batchDay")}}},[t._v("批量更新天数")]),a("span",{staticClass:"red-span"},[t._v("（最长30天）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[t.isCustomShipFee?a("el-popover",{attrs:{placement:"right",width:"320",trigger:"click"}},[a("div",[t._l(t.logistics,(function(e,i){return a("div",{key:i},t._l(t.logisticsList,(function(i,r){return a("div",{key:r},[i.ShipId===e&&!0===i.IsCustomShipFee?a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("span",{staticStyle:{"line-height":"24px","margin-right":"10px"}},[t._v(t._s(i.ShipName))]),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:i.CustomShipFee,callback:function(e){t.$set(i,"CustomShipFee",e)},expression:"item2.CustomShipFee"}})],1):t._e()])})),0)})),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchLogistics")}}},[t._v("确 定")])],1)],2),a("el-button",{attrs:{slot:"reference",disabled:t.operationBut,type:"primary",size:"mini"},slot:"reference"},[t._v("批量更新物流方式")])],1):t._e(),t.isCustomShipFee?t._e():a("el-button",{attrs:{slot:"reference",type:"primary",disabled:t.operationBut,size:"mini"},on:{click:function(e){return t.operation("batchLogistics")}},slot:"reference"},[t._v("批量更新物流方式")]),a("span",{staticClass:"red-span"},[t._v("（请先至商家后台开启对应物流方式）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchWeight")}}},[t._v("批量更新重量")]),a("span",{staticClass:"red-span"},[t._v("（必须大于0kg）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchFreight")}}},[t._v("批量更新运费")]),a("span",{staticClass:"red-span"},[t._v("（只能更改当前商品已开启的物流）")])],1),a("ul",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchSize")}}},[t._v("批量修改商品尺寸")])],1)])])])])]),a("li",{staticClass:"progress"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("操作进度相关")]),a("div",{staticClass:"base-item"},[a("ul",[a("el-progress",{staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.percentage),status:"success"}})],1),a("ul",[a("li",[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"查询数量："}},[t._v(" "+t._s(t.queryNum)+" ")]),a("el-form-item",{attrs:{label:"更新数量："}},[t._v(" "+t._s(t.updateNum)+" ")]),a("el-form-item",{attrs:{label:"成功数量："}},[t._v(" "+t._s(t.successNum)+" ")]),a("el-form-item",{attrs:{label:"失败数量："}},[t._v(" "+t._s(t.failNum)+" ")])],1)],1)])])])])]):t._e(),t.isFold?a("ul",[a("span",{staticClass:"red-span"},[t._v("说明：库存公式：设置后的库存 = 原库存 +（填写的库存）；如果填写的库存为零将会把商品的库存置为0； 价格公式：设置后的价格 = 原价 +（原价*填写的百分比）+（填写的价格）")])]):t._e()]),a("el-row",{attrs:{id:"article"}},[a("u-table",{ref:"plTable",attrs:{data:t.tableData,"use-virtual":"",height:t.isFold?450:760,"row-height":68,"data-changes-scroll-top":!1,border:!1,"header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":t.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection",label:"序号",width:"50"}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("chineseSite")(a.country))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"类目",prop:"categoryName","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"店铺名",prop:"mallName","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.images?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t._f("imageRender")([i.country,i.platform_mall_id,i.images])}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t._f("imageRender")([i.country,i.platform_mall_id,i.images])}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])],1):t._e()]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"上家类型",prop:"platformTypeStr"}}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"上家链接"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(i,2)}}},[t._v(" "+t._s(i.productId)+" ")]),i.productId?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(i.productId)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e()]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"itemID"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(i,1)}}},[t._v(" "+t._s(i.id)+" ")]),i.id?a("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(i.id)}}},[a("i",{staticClass:"el-icon-document-copy"})]):t._e()]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"价格",prop:"price",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"库存",prop:"stock",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"标题",prop:"name","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{staticClass:"red-span",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.viewDetails(i)}}},[t._v(t._s(i.name))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.status&&"color:"+t.statusColor[i.status]},[t._v(t._s(t.statusObj[i.status]))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"创建时间",prop:"create_time"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.$dayjs(a.create_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"更新时间",prop:"modify_time"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.$dayjs(a.modify_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"销售量",prop:"sold",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"访客量",prop:"view_count",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"粉丝量",prop:"like_count",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"操作状态","show-overflow-tooltip":"",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("span",{style:i.color&&"color:"+i.color},[t._v(t._s(i.batchStatus))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"更多操作","show-overflow-tooltip":"",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-dropdown",{staticStyle:{width:"80px","margin-left":"10px"},attrs:{trigger:"click",size:"mini"}},[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",plain:"",type:"primary"}},[t._v(" 操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(e){return t.topExtension(i)}}},[t._v("置顶推广")])]),a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(e){return t.editParent(i)}}},[t._v("修改上家")])])],1)],1)]}}])})],1)],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}})],1),t.categoryVisible?a("el-dialog",{staticClass:"category-dialog",attrs:{title:"类目映射",visible:t.categoryVisible,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.categoryVisible=e}}},[t.categoryVisible?a("categoryMapping",{attrs:{country:t.country,"mall-list":t.selectMallList,"goods-current":{}},on:{categoryChange:t.categoryChange}}):t._e()],1):t._e(),a("el-dialog",{staticClass:"title-dialog",attrs:{title:"批量编辑标题",visible:t.titleVisible,width:"600px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.titleVisible=e}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"编辑类型："}},[a("div",[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("新标题直接填入")])]),a("el-radio",{attrs:{label:1},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新标题")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要新增多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:2},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新增关键词/标题前")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要新增多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:3},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新增关键词/标题后")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要删除多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:4},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("删除关键词")])],1)],1)]),a("el-form-item",{attrs:{label:"新标题/关键字："}},[a("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:t.titleVal,callback:function(e){t.titleVal=e},expression:"titleVal"}})],1)],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editProduct("setTitle")}}},[t._v("保 存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.titleVisible=!1}}},[t._v("关 闭")])],1)],1),a("el-dialog",{staticClass:"get-description-dialog",attrs:{title:"获取描述模板",visible:t.getDescriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.getDescriptionVisible=e}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"描述："}},[a("div",[a("el-radio",{attrs:{label:1},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("新增关键词/描述前")]),a("el-radio",{attrs:{label:2},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("新增关键词/描述后")]),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[t._v("需要删除多个关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:3},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("删除关键词")])],1),a("el-radio",{attrs:{label:4},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("模板")]),a("el-radio",{attrs:{label:5},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("模板+SKU")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.selectDescription(0)}}},[t._v("选择模板")])],1)]),1===t.descriptionRadio||2===t.descriptionRadio||3===t.descriptionRadio?a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:t.descriptionVal,callback:function(e){t.descriptionVal=e},expression:"descriptionVal"}})],1):t._e()],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editProduct("setDescription")}}},[t._v("确 认")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.descriptionVisible=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{staticClass:"description-dialog",attrs:{title:"描述模板",visible:t.descriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.descriptionVisible=e}}},[a("div",[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[t._v("标签：")]),a("el-select",{attrs:{size:"mini"},model:{value:t.descriptionConfigId,callback:function(e){t.descriptionConfigId=e},expression:"descriptionConfigId"}},t._l(t.descriptionLabelList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.lable,value:t.id}})})),1)],1),a("li",[a("span",[t._v("新增标签：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.descriptionConfig.tag,callback:function(e){t.$set(t.descriptionConfig,"tag",e)},expression:"descriptionConfig.tag"}})],1)]),a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[t._v("描述：")]),a("el-input",{staticStyle:{width:"430px"},attrs:{type:"textarea",rows:6,resize:"none",placeholder:"",size:"mini"},model:{value:t.descriptionConfig.text,callback:function(e){t.$set(t.descriptionConfig,"text",e)},expression:"descriptionConfig.text"}})],1)]),a("div",{staticClass:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.selectDescription(1)}}},[t._v("保存")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.selectDescription(2)}}},[t._v("删除")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.selectDescription(3)}}},[t._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.selectDescription(4)}}},[t._v("取消")])],1)])]),a("el-dialog",{staticClass:"parent-dialog",attrs:{title:"上家产品修改",visible:t.parentVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.parentVisible=e}}},[a("div",[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("上家产品ID设置")]),a("div",{staticClass:"base-item"},[a("div",[a("span",[t._v("上家类型：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.parentType,callback:function(e){t.parentType=e},expression:"parentType"}},t._l(t.parentTypeList,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),a("div",[a("span",[t._v("   产品ID：")]),a("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini"},model:{value:t.parentId,callback:function(e){t.parentId=e},expression:"parentId"}}),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.parentLoad1},on:{click:function(e){return t.editpParentSku(1)}}},[t._v("修 改")])],1)])]),a("div",[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[t._v("上家产品链接设置")]),a("div",{staticClass:"base-item"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v(" 1688链接模板：https://detail.1688.com/offer/604199841804.html ")]),a("div",[a("span",[t._v("产品链接：")]),a("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini"},model:{value:t.parentUrl,callback:function(e){t.parentUrl=e},expression:"parentUrl"}}),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.parentLoad2},on:{click:function(e){return t.editpParentSku(2)}}},[t._v("修 改")])],1)])])])])])],1)},r=[],n=a("2909"),o=a("53ca"),s=a("1da1"),l=(a("96cf"),a("4de4"),a("a4d3"),a("e01a"),a("498a"),a("ac1f"),a("466d"),a("99af"),a("a9e3"),a("159b"),a("a15b"),a("b0c0"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("5b81"),a("1276"),a("fb6a"),a("d81d"),a("6062"),a("3ca3"),a("ddb0"),a("5319"),a("0b64")),c=a("feb6"),u=a("0e0b"),d=a("eb09"),p={components:{StoreChoose:c["a"],categoryMapping:d["a"]},data:function(){return{index:1,parentVisible:!1,isFold:!0,showConsole:!0,categoryVisible:!1,titleVisible:!1,sourceVisible:!1,getDescriptionVisible:!1,operationBut:!1,flag:!1,flag2:!0,upDown:!0,GoodsList:new l["a"](this),editCategory:!1,categoryList:{},categoryName:"",productNumChecked:!1,productNum:50,freightRadio:2,titleRadio:1,titleVal:"",descriptionRadio:4,descriptionVal:"",descriptionConfig:{description:"",text:"",lable:"",tag:""},descriptionConfigId:"",descriptionConfigText:"",descriptionLabelList:[],descriptionVisible:!1,queryType:"",percentage:0,selectMallList:"",country:"",tableData:[],deleteData:[],deleteId:[],multipleSelection:[],pageSize:48,sellStatus:0,goodsStatus:0,goodsStatusName:"",goodsStatusVal:"",searchType:"id",keyword:"",source:0,queryNum:0,updateNum:0,successNum:0,failNum:0,createTime:[],modifyTime:[],goodsMin:0,goodsMax:99999999,soldMin:0,soldMax:99999999,priceMin:0,priceMax:99999999,viewMin:0,viewMax:99999999,likeMin:0,likeMax:99999999,platformData:{},logistics:0,isCustomShipFee:!1,logisticsFeeList:[],logisticsList:[],productStock:10,productPrice1:-1,productPrice2:0,productWeight:1,productLength:"",productWidth:"",productHeight:"",minDays:0,maxDays:0,productDay:15,preOrderDeliveryDays:2,minLength:0,maxLength:0,isSync:!1,parentType:1,parentId:"",parentUrl:"",goodsValue:"",parentLoad1:!1,parentLoad2:!1,sellStatusList:[{value:1,label:"售空"},{value:2,label:"非售空"}],goodsStatusList:[{value:1,label:"正常"},{value:6,label:"审核中"},{value:3,label:"禁卖下架"},{value:11,label:"已售完"},{value:8,label:"待上架"},{value:4,label:"禁卖shopee官方删除"},{value:100,label:"已压制"}],statusObj:{1:"正常",2:"审核中",6:"审核中",3:"禁卖下架",11:"已售完",8:"待上架",4:"禁卖shopee官方删除",100:"已压制"},statusFilter:{1:"live",8:"unlisted",2:"banned",3:"banned",11:"sold_out",100:"deboosted",4:"deleted"},statusColor:{8:"red"},operationObj:{setTitle:"标题",setDescription:"描述",setStock:"库存",setPrice:"价格",setDay:"发货天数",setWeight:"重量",setSize:"尺寸",setFreight:"运费",setLogistics:"物流方式",setCategory:"类目属性"},parentTypeObj:{1:"拼多多",2:"淘宝",8:"1688",9:"lazada"},searchTypeList:[{value:"name",label:"商品名称"},{value:"sku",label:"主商品货号"},{value:"msku",label:"商品规格货号"},{value:"id",label:"商品编号"},{value:"originId",label:"上家商品ID"}],sourceList:[{value:"拼多多",label:"拼多多"},{value:"淘宝",label:"淘宝"},{value:"天猫",label:"天猫"},{value:"自有产品",label:"自有产品"},{value:"皮皮虾供货平台",label:"皮皮虾供货平台"},{value:"货老板",label:"货老板"},{value:"1688",label:"1688"},{value:"Lazada",label:"Lazada"},{value:"京喜",label:"京喜"},{value:"Shopee",label:"Shopee"},{value:"速卖通",label:"速卖通"},{value:"天猫淘宝海外平台",label:"天猫淘宝海外平台"}],countryArr:["SG","GL","PH","VN","TW","MY","ID","TH","MX","CO","CL","PL","FR","ES"],parentTypeList:[{value:1,label:"拼多多"},{value:2,label:"淘宝天猫"},{value:8,label:"1688"},{value:9,label:"lazada"}]}},watch:{country:function(t){this.getLogistics(),this.getDayLength("")},descriptionConfigId:function(t){var e=this.descriptionLabelList.filter((function(e){return e&&e.id===t}))[0];this.descriptionConfig.text=e&&e.description||"",this.descriptionConfig.description=e&&e.description||"",this.descriptionConfig.lable=e&&e.lable||""}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.createTime=[(new Date).getTime()-1296e7,new Date],e.next=3,t.selectAll("goodsStatus",t.goodsStatusList);case 3:return e.next=5,t.selectAll("source",t.sourceList);case 5:case"end":return e.stop()}}),e)})))()},methods:{syncOriginGoodsNum:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.flag=!1,t.showConsole=!1,t.$refs.Logs.consoleMsg="",t.$refs.Logs.writeLog("开始同步上家库存，请耐心等待！",!0),t.operationBut=!0,t.isSync=!0,a=0;case 7:if(!(a<t.multipleSelection.length)){e.next=16;break}if(!t.flag){e.next=10;break}return e.abrupt("break",16);case 10:return i=t.multipleSelection[a],e.next=13,Object(u["g"])(i.productId,i.platform,i.platform_mall_id,i.id,i.country,"",t.$refs.Logs.writeLog);case 13:a++,e.next=7;break;case 16:t.operationBut=!1,t.$refs.Logs.writeLog("同步完成！",!0);case 18:case"end":return e.stop()}}),e)})))()},editpParentSku:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,l,c,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i="",r="",a.prev=2,1!==t){a.next=11;break}if(e.parentId.trim()){a.next=6;break}return a.abrupt("return",e.$message("产品ID不能为空"));case 6:i=e.parentId,r=e.parentType,e.parentLoad1=!0,a.next=33;break;case 11:if(e.parentUrl.trim()){a.next=13;break}return a.abrupt("return",e.$message("产品链接不能为空"));case 13:if(n=/(yangkeduo.com)|(item.taobao.com)|(detail.1688.com)|(www.lazada)/g,o=e.parentUrl.match(n),o){a.next=17;break}return a.abrupt("return",e.$message("链接:".concat(e.parentUrl," 识别支持平台失败"),!1));case 17:a.t0=o[0],a.next="yangkeduo.com"===a.t0?20:"item.taobao.com"===a.t0?23:"detail.1688.com"===a.t0?26:"www.lazada"===a.t0?29:32;break;case 20:return i=e.parentUrl.match(/goods_id=(\d+)/)[1],r=1,a.abrupt("break",32);case 23:return i=e.parentUrl.match(/id=(\d+)/)[1],r=2,a.abrupt("break",32);case 26:return i=e.parentUrl.match(/(\d+)\.html/)[1],r=8,a.abrupt("break",32);case 29:return i=e.parentUrl.match(/(\d+)\.html/)[1],r=9,a.abrupt("break",32);case 32:e.parentLoad2=!0;case 33:return s="天猫淘宝海外平台"===e.goodsValue.platformTypeStr?e.goodsValue.id:"",a.next=36,e.$BaseUtilService.buildGoodCode(r,i,e.goodsValue.country,e.goodsValue.platform_mall_id,s);case 36:return l=a.sent,c={},a.next=40,e.getProductDetail(e.goodsValue);case 40:if(u=a.sent,200!==u.code){a.next=68;break}return c=u.data,c["parent_sku"]=l,d={mallId:e.goodsValue.platform_mall_id},a.next=47,e.$shopeemanService.handleProductEdit(e.goodsValue.country,d,[c]);case 47:if(p=a.sent,200!==p.code){a.next=65;break}e.batchStatus(e.goodsValue,"修改成功",!0),e.goodsValue.platformTypeStr=e.parentTypeObj[r],e.goodsValue.productId=i,a.t1=r,a.next=1===a.t1?55:2===a.t1?57:8===a.t1?59:9===a.t1?61:63;break;case 55:return e.goodsValue.url="http://mobile.yangkeduo.com/goods.html?goods_id=".concat(i),a.abrupt("break",63);case 57:return e.goodsValue.url="https://item.taobao.com/item.htm?id=".concat(i),a.abrupt("break",63);case 59:return e.goodsValue.url="https://detail.1688.com/offer/".concat(i,".html"),a.abrupt("break",63);case 61:return e.goodsValue.url="".concat(e.$filters.lazadaGoodsUrl(e.goodsValue.country),"/").concat(i,".html"),a.abrupt("break",63);case 63:a.next=66;break;case 65:e.batchStatus(e.goodsValue,"修改失败：".concat(p.data),!1);case 66:a.next=69;break;case 68:e.$message.error("".concat(u.data));case 69:a.next=75;break;case 71:a.prev=71,a.t2=a["catch"](2),e.batchStatus(e.goodsValue,"修改上家异常：".concat(a.t2),!1),e.parentVisible=!1;case 75:e.parentVisible=!1,e.parentLoad1=!1,e.parentLoad2=!1;case 78:case"end":return a.stop()}}),a,null,[[2,71]])})))()},editParent:function(t){this.parentVisible=!0,this.goodsValue=t,this.parentType=1,this.parentId="",this.parentUrl=""},topExtension:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={id:Number(t.id),shop_id:t.platform_mall_id},a.next=3,e.$shopeemanService.handleGoodsTop(t.country,i);case 3:r=a.sent,200===r.code?e.batchStatus(t,"商品置顶成功！",!0):e.batchStatus(t,"".concat(r.data),!1);case 5:case"end":return a.stop()}}),a)})))()},categoryChange:function(t){if(t)if(this.editCategory)this.categoryList=t,this.editProduct("setCategory");else{var e=[];this.categoryList=t,this.categoryList.categoryList.forEach((function(t){e.push("".concat(t.category_name,"(").concat(t.category_cn_name,")"))})),this.categoryName=e.join("->")}else this.categoryName="";this.categoryVisible=!1},batchCategory:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.categoryVisible=!0,t.editCategory=!0;case 2:case"end":return e.stop()}}),e)})))()},batchConfirm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.updateNum=t.multipleSelection.length,e.next=4,Object(u["c"])(t.multipleSelection,t.confirmProduct);case 4:t.operationBut=!1;case 5:case"end":return e.stop()}}),e)})))()},confirmProduct:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.prev=1,4===t.status){i.next=7;break}a.failNum++,a.batchStatus(t,"该商品不属于禁卖shopee官方删除",!1),i.next=11;break;case 7:return i.next=9,a.GoodsList.dismissInvalidProducts(t);case 9:n=i.sent,200===n.code?(a.successNum++,a.batchStatus(t,"确认禁卖成功",!0),a.successNum++):(a.failNum++,a.batchStatus(t,"确认禁卖失败",!1));case 11:i.next=17;break;case 13:i.prev=13,i.t0=i["catch"](1),a.failNum++,a.batchStatus(t,"确认禁卖异常",!1);case 17:return i.prev=17,--r.count,o=100/a.multipleSelection.length,a.percentage+=o,i.finish(17);case 22:case"end":return i.stop()}}),i,null,[[1,13,17,22]])})))()},batchLogistics:function(){var t,e=this;if(null===(t=this.logistics)||void 0===t||!t.length)return this.$message("至少选择一种物流方式");var a=!1;if(this.isCustomShipFee&&(a=this.logistics.some((function(t){return e.logisticsList.some((function(e){return e.ShipId===t&&e.IsCustomShipFee&&""===e.CustomShipFee}))}))),a)return this.$message("请输入运费");this.editProduct("setLogistics")},batchFreight:function(){this.editProduct("setFreight")},batchSize:function(){if(!this.productLength||Number(this.productLength)<=0||!this.productWidth||Number(this.productWidth)<=0||!this.productHeight||Number(this.productHeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setSize")},batchWeight:function(){if(!this.productWeight||Number(this.productWeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setWeight")},batchDay:function(){if(!this.productDay)return this.$message("请填写预售天数");this.editProduct("setDay")},batchPrice:function(){return this.productPrice1?this.productPrice2?void this.editProduct("setPrice"):this.$message("数值不能为空"):this.$message("价格百分比不能为空")},batchStock:function(){if(!this.productStock||Number(this.productStock)<0||Number(this.productStock)>1e7)return this.$message("仓库必须在 0 到 10000000 之间");this.editProduct("setStock")},batchTitle:function(){this.titleVisible=!0,this.titleRadio=1,this.titleVal=""},batchDescription:function(){this.getDescriptionVisible=!0,this.descriptionRadio=4,this.descriptionVal=""},editProduct:function(t){var e=this;if("setTitle"===t){if(1===this.titleRadio&&!this.titleVal)return this.$message("新标题不能为空");if((2===this.titleRadio||3===this.titleRadio||4===this.titleRadio)&&!this.titleVal)return this.$message("关键词不能为空")}if("setDescription"===t){if((1===this.descriptionRadio||2===this.descriptionRadio||3===this.descriptionRadio)&&!this.descriptionVal)return this.$message("关键词不能为空");if((4===this.descriptionRadio||5===this.descriptionRadio)&&!this.descriptionConfig.description)return this.$message("请选择模板")}this.$confirm("确定更新商品吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.initData(),e.titleVisible=!1,e.getDescriptionVisible=!1,e.multipleSelection.forEach((function(e){e.edit=t})),e.updateNum=e.multipleSelection.length,a.next=7,Object(u["c"])(e.multipleSelection,e[t]);case 7:e.operationBut=!1;case 8:case"end":return a.stop()}}),a)}))))},getProductDetail:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={},r={},r["product_id"]=t.id,r["version"]="3.2.0",r["shop_id"]=t.platform_mall_id,a.next=7,e.$shopeemanService.searchProductDetail(t.country,r);case 7:if(n=a.sent,200!==n.code||!n.data){a.next=19;break}if(Number(n.data.id)!==Number(t.id)){a.next=16;break}return i=n.data,a.next=13,e.getProductInfo(i,t);case 13:return a.abrupt("return",{code:200,data:i});case 16:return a.abrupt("return",{code:201,data:"获取到的产品id不一致"});case 17:a.next=20;break;case 19:return a.abrupt("return",{code:0,data:"获取商品详情失败"});case 20:case"end":return a.stop()}}),a)})))()},handleProductEdit:function(t,e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.batchStatus(e,"正在更新".concat(a.operationObj[e.edit],"..."),!0),r={mallId:e.platform_mall_id},i.next=4,a.$shopeemanService.handleProductEdit(e.country,r,[t]);case 4:n=i.sent,200===n.code?(a.successNum++,"setStock"===e.edit&&(o=0,e.model_list.forEach((function(t){o+=Number(a.productStock)})),e.stock=o),"setPrice"===e.edit&&(s=[],e.model_list.forEach((function(t){s.push(Math.ceil(Number(t.price_info.normal_price)+Number(t.price_info.normal_price)*(Number(a.productPrice1)/100)+Number(a.productPrice2)))})),e.price=Math.min.apply(null,s)),"setTitle"===e.edit&&(e.name=t.name),a.batchStatus(e,"更新".concat(a.operationObj[e.edit],"成功"),!0)):(a.failNum++,a.batchStatus(e,"更新".concat(a.operationObj[e.edit],"失败").concat(n.data),!1));case 6:case"end":return i.stop()}}),i)})))()},setCategory:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.prev=1,n={},a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=37;break}n=o.data,s=[],a.categoryList.categoryList.forEach((function(t){s.push(t.category_id)})),l=[],c=0;case 13:if(!(c<a.categoryList.attributesList.length)){i.next=31;break}if(u=a.categoryList.attributesList[c],!a.countryArr.includes(t.country)){i.next=25;break}if(!(u.attribute_id<1)){i.next=19;break}return n["brand_id"]=u.options,i.abrupt("continue",28);case 19:d={},d["attribute_id"]=u.attribute_id,d["attribute_value_id"]=u.options,l.push(d),i.next=28;break;case 25:p={custom_value:{}},p["custom_value "]["raw_value "]=u.selected_attribute_value_name,l.push(p);case 28:c++,i.next=13;break;case 31:return n["attributes"]=l,n["category_path"]=s,i.next=35,a.handleProductEdit(n,t);case 35:i.next=39;break;case 37:a.batchStatus(t,o.data,!1),a.failNum++;case 39:i.next=45;break;case 41:i.prev=41,i.t0=i["catch"](1),a.batchStatus(t,"更新类目异常",!1),a.failNum++;case 45:return i.prev=45,m=100/a.multipleSelection.length,a.percentage+=m,--r.count,i.finish(45);case 50:case"end":return i.stop()}}),i,null,[[1,41,45,50]])})))()},setLogistics:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,s,l,c,u,d,p,m,h;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(s=i.sent,200!==s.code){i.next=25;break}n=s.data,l=[],c=function(e){var i=n.logistics_channels[e];if(a.logistics.includes(i.channelid.toString())&&0===i.parent_channel_id){if(!1===i.enabled){var r=[];a.logistics.forEach((function(t){a.logisticsList.forEach((function(e){t===e.ShipId&&t===i.channelid.toString()&&r.push(e)}))}));var o=(null===r||void 0===r?void 0:r.length)>0?r[0].ShipName:i.channelid.toString();return a.batchStatus(t,"物流方式：".concat(o,"未开启"),!1),{v:void 0}}l.push(i.channelid.toString())}},u=0;case 12:if(!(u<n.logistics_channels.length)){i.next=19;break}if(d=c(u),"object"!==Object(o["a"])(d)){i.next=16;break}return i.abrupt("return",d.v);case 16:u++,i.next=12;break;case 19:for(p=function(t){var e=n.logistics_channels[t],i=[];a.logistics.forEach((function(t){a.logisticsList.forEach((function(a){t===a.ShipId&&t===e.channelid.toString()&&i.push(a)}))})),l.includes(e.channelid.toString())?e.enabled=!0:e.enabled=!1,(null===i||void 0===i?void 0:i.length)>0&&""!==i[0].CustomShipFee&&(e.price=i[0].CustomShipFee)},m=0;m<n.logistics_channels.length;m++)p(m);return i.next=23,a.handleProductEdit(n,t);case 23:i.next=27;break;case 25:a.batchStatus(t,s.data,!1),a.failNum++;case 27:i.next=33;break;case 29:i.prev=29,i.t0=i["catch"](2),a.batchStatus(t,"更新物流方式异常",!1),a.failNum++;case 33:return i.prev=33,h=100/a.multipleSelection.length,a.percentage+=h,--r.count,i.finish(33);case 38:case"end":return i.stop()}}),i,null,[[2,29,33,38]])})))()},setFreight:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=14;break}for(n=o.data,s=0;s<n.logistics_channels.length;s++)l=n.logistics_channels[s],l.enabled&&(l.cover_shipping_fee=1===a.freightRadio);return i.next=12,a.handleProductEdit(n,t);case 12:i.next=16;break;case 14:a.batchStatus(t,o.data,!1),a.failNum++;case 16:i.next=22;break;case 18:i.prev=18,i.t0=i["catch"](2),a.batchStatus(t,"更新运费异常",!1),a.failNum++;case 22:return i.prev=22,c=100/a.multipleSelection.length,a.percentage+=c,--r.count,i.finish(22);case 27:case"end":return i.stop()}}),i,null,[[2,18,22,27]])})))()},setSize:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=16;break}return n=o.data,n["dimension"]["width"]=Number(a.productWidth),n["dimension"]["length"]=Number(a.productLength),n["dimension"]["height"]=Number(a.productHeight),i.next=14,a.handleProductEdit(n,t);case 14:i.next=18;break;case 16:a.batchStatus(t,o.data,!1),a.failNum++;case 18:i.next=24;break;case 20:i.prev=20,i.t0=i["catch"](2),a.batchStatus(t,"更新尺寸异常",!1),a.failNum++;case 24:return i.prev=24,s=100/a.multipleSelection.length,a.percentage+=s,--r.count,i.finish(24);case 29:case"end":return i.stop()}}),i,null,[[2,20,24,29]])})))()},setWeight:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=14;break}return n=o.data,n["weight"]=a.productWeight+"",i.next=12,a.handleProductEdit(n,t);case 12:i.next=16;break;case 14:a.batchStatus(t,o.data,!1),a.failNum++;case 16:i.next=22;break;case 18:i.prev=18,i.t0=i["catch"](2),a.batchStatus(t,"更新重量异常",!1),a.failNum++;case 22:return i.prev=22,s=100/a.multipleSelection.length,a.percentage+=s,--r.count,i.finish(22);case 27:case"end":return i.stop()}}),i,null,[[2,18,22,27]])})))()},setDay:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=20;break}if(n=o.data,a.getDayLength(t),!(Number(a.productDay)>Number(a.maxDays)||Number(a.productDay)<Number(a.minDays))){i.next=14;break}a.batchStatus(t,"出货天数需设置在 "+a.minDays+" 到 "+a.maxDays+" 天",!1),i.next=18;break;case 14:return n["pre_order"]=!0,n["days_to_ship"]=Number(a.productDay),i.next=18,a.handleProductEdit(n,t);case 18:i.next=22;break;case 20:a.batchStatus(t,o.data,!1),a.failNum++;case 22:i.next=28;break;case 24:i.prev=24,i.t0=i["catch"](2),a.batchStatus(t,"更新天数异常",!1),a.failNum++;case 28:return i.prev=28,s=100/a.multipleSelection.length,a.percentage+=s,--r.count,i.finish(28);case 33:case"end":return i.stop()}}),i,null,[[2,24,28,33]])})))()},setPrice:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=15;break}for(n=o.data,"ID"===t.country&&a.checkCountryPriceForID(n,t),s=0;s<n.model_list.length;s++)l=n.model_list[s],l.price=Math.ceil(Number(l.price)+Number(l.price)*(Number(a.productPrice1)/100)+Number(a.productPrice2))+"";return i.next=13,a.handleProductEdit(n,t);case 13:i.next=17;break;case 15:a.batchStatus(t,o.data,!1),a.failNum++;case 17:i.next=23;break;case 19:i.prev=19,i.t0=i["catch"](2),a.batchStatus(t,"更新价格异常",!1),a.failNum++;case 23:return i.prev=23,c=100/a.multipleSelection.length,a.percentage+=c,--r.count,i.finish(23);case 28:case"end":return i.stop()}}),i,null,[[2,19,23,28]])})))()},setStock:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={},i.prev=2,a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=14;break}for(n=o.data,s=0;s<n.model_list.length;s++)l=n.model_list[s],l.stock=Number(a.productStock);return i.next=12,a.handleProductEdit(n,t);case 12:i.next=16;break;case 14:a.batchStatus(t,o.data,!1),a.failNum++;case 16:i.next=22;break;case 18:i.prev=18,i.t0=i["catch"](2),a.batchStatus(t,"更新库存异常",!1),a.failNum++;case 22:return i.prev=22,c=100/a.multipleSelection.length,a.percentage+=c,--r.count,i.finish(22);case 27:case"end":return i.stop()}}),i,null,[[2,18,22,27]])})))()},setDescription:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n="",o={},i.prev=3,a.batchStatus(t,"正在获取商品详情...",!0),i.next=7,a.getProductDetail(t);case 7:if(s=i.sent,200!==s.code){i.next=35;break}o=s.data,a.descriptionVal=a.descriptionVal.replaceAll("；",";"),i.t0=a.descriptionRadio,i.next=1===i.t0?14:2===i.t0?16:3===i.t0?18:4===i.t0?20:5===i.t0?22:25;break;case 14:return o["description"]=a.descriptionVal+o.description,i.abrupt("break",25);case 16:return o["description"]=o.description+a.descriptionVal,i.abrupt("break",25);case 18:if(a.descriptionVal.indexOf(";")>-1)for(l=a.descriptionVal.split(";"),c=0;c<l.length;c++)u=l[c],o["description"]=o.description.replaceAll(u,"");else o["description"]=o.description.replaceAll(a.descriptionVal,"");return i.abrupt("break",25);case 20:return o["description"]=a.descriptionConfig.description,i.abrupt("break",25);case 22:for(d=0;d<o.tier_variation.length;d++)for(p=o.tier_variation[d],m=0;m<p.options.length;m++)h=p.options[m],n+=h+"\n";return o["description"]=a.descriptionConfig.description+"\n"+n,i.abrupt("break",25);case 25:if(a.getDescriptionLength(t),!("description"===t.edit&&0!==a.minLength&&o.description.length<a.minLength)){i.next=30;break}a.batchStatus(t,"描述长度过短：最小长度"+a.minLength,!1),i.next=33;break;case 30:return o["description"]=o["description"].trim().replaceAll(";"," ").slice(0,a.maxLength),i.next=33,a.handleProductEdit(o,t);case 33:i.next=37;break;case 35:a.batchStatus(t,s.data,!1),a.failNum++;case 37:i.next=43;break;case 39:i.prev=39,i.t1=i["catch"](3),a.batchStatus(t,"更新描述异常",!1),a.failNum++;case 43:return i.prev=43,g=100/a.multipleSelection.length,a.percentage+=g,--r.count,i.finish(43);case 48:case"end":return i.stop()}}),i,null,[[3,39,43,48]])})))()},setTitle:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.prev=1,n={},a.batchStatus(t,"正在获取商品详情...",!0),i.next=6,a.getProductDetail(t);case 6:if(o=i.sent,200!==o.code){i.next=32;break}n=o.data,a.titleVal=a.titleVal.replaceAll("；",";"),i.t0=a.titleRadio,i.next=1===i.t0?13:2===i.t0?15:3===i.t0?17:4===i.t0?19:21;break;case 13:return n["name"]=a.titleVal,i.abrupt("break",21);case 15:return n["name"]=a.titleVal+n.name,i.abrupt("break",21);case 17:return n["name"]=n.name+a.titleVal,i.abrupt("break",21);case 19:if(a.titleVal.indexOf(";")>-1)for(s=a.titleVal.split(";"),l=0;l<s.length;l++)c=s[l],n["name"]=n.name.replaceAll(c,"");else n["name"]=n.name.replaceAll(a.titleVal,"");return i.abrupt("break",21);case 21:if(a.getTitleLength(t),!(0!==a.minLength&&n.name.length<a.minLength)){i.next=27;break}a.batchStatus(t,"标题长度过短：最小长度"+a.minLength,!1),a.failNum++,i.next=30;break;case 27:return n["name"]=n["name"].trim().replaceAll(";"," ").slice(0,a.maxLength),i.next=30,a.handleProductEdit(n,t);case 30:i.next=34;break;case 32:a.batchStatus(t,o.data,!1),a.failNum++;case 34:i.next=40;break;case 36:i.prev=36,i.t1=i["catch"](1),a.batchStatus(t,"更新标题异常",!1),a.failNum++;case 40:return i.prev=40,u=100/a.multipleSelection.length,a.percentage+=u,--r.count,i.finish(40);case 45:case"end":return i.stop()}}),i,null,[[1,36,40,45]])})))()},getProductInfo:function(t,e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p,m,h,g,b,f,v,y,_,x;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(i.prev=0,l=!1,c=!1,t.id=Number(t.id),t.name=t.name.toString().trim(),t.brand_id=Number(t.brand_id),t.size_chart=t.size_chart.toString(),t.category_path=JSON.parse(JSON.stringify(t.category_path)),t.add_on_deal=JSON.parse(JSON.stringify(t.add_on_deal)),null===t||void 0===t||!t.attributes){i.next=25;break}u=[],d={},p=0;case 13:if(!(p<t.attributes.length)){i.next=24;break}if(g=t.attributes[p],b=null===g||void 0===g||null===(m=g.custom_value.raw_value)||void 0===m?void 0:m.toString(),b||"0"!==(null===b||void 0===b||null===(h=b.attribute_value_id)||void 0===h?void 0:h.toString())){i.next=18;break}return i.abrupt("continue",21);case 18:f=g.attribute_id.toString(),d=!f||"0"===f||b?{attribute_id:Number(f),custom_value:{raw_value:g.custom_value.raw_value.toString(),unit:null===g||void 0===g||null===(v=g.custom_value)||void 0===v||null===(y=v.unit)||void 0===y?void 0:y.toString()}}:{attribute_id:Number(f),attribute_value_id:Number(g.attribute_value_id)},u.push(d);case 21:p++,i.next=13;break;case 24:t.attributes=u;case 25:return a.countryArr.includes(e.country)&&(t.ds_attr_rcmd_id="".concat(a.guid().toString(),"|a|EN"),t.ds_cat_rcmd_id="".concat(a.guid().toString(),"|c|EN")),t.stock=Number(t.stock),t.parent_sku=t.parent_sku.toString(),t.price=t.price.toString(),l&&Number(t.price_before_discount)>0&&(t.price=t.price_before_discount.toString()),t.price_before_discount=t.price_before_discount.toString(),t.input_normal_price=t.price_info?t.price_info.input_normal_price.toString():"0",t.input_promotion_price=t.price_info?t.price_info.input_promotion_price.toString():"0",t.weight=t.weight.toString(),t.dimension=JSON.parse(JSON.stringify(t.dimension)),t.pre_order=JSON.parse(t.pre_order),t.days_to_ship=Number(t.days_to_ship),t.description=t.description.toString().trim(),t.installment_tenures=JSON.parse(JSON.stringify(t.installment_tenures)),a.getModelList(t.model_list,l),i.prev=40,_={},_["product_id"]=t.id,_["mallId"]=e.platform_mall_id,i.next=46,a.$shopeemanService.getLogistics(e.country,_);case 46:if(x=i.sent,200!==x.code){i.next=51;break}return i.next=50,a.getLogisticsInfo(x.data.list,c,e);case 50:t.logistics_channels=i.sent;case 51:i.next=55;break;case 53:i.prev=53,i.t0=i["catch"](40);case 55:t.images=JSON.parse(JSON.stringify(t.images)),(null===(r=t.tier_variation)||void 0===r?void 0:r.length)>0&&(t.tier_variation=JSON.parse(JSON.stringify(t.tier_variation))),"8"===t.status.toString()&&(t.unlisted=!0),1===(null===(n=t.model_list)||void 0===n?void 0:n.length)&&1===(null===(o=t.tier_variation)||void 0===o?void 0:o.length)&&(t.tier_variation[0].options[0]||(t.tier_variation[0].options[0]=t.tier_variation[0].name?t.tier_variation[0].name:t.model_list[0].name),t.tier_variation[0].name||(t.tier_variation[0].name=t.model_list[0].name)),null!==t&&void 0!==t&&null!==(s=t.min_purchase_limit_info)&&void 0!==s&&s.min_purchase_limit&&(t.min_purchase_limit_info.min_purchase_limit=Number(t.min_purchase_limit_info.min_purchase_limit)?Number(t.min_purchase_limit_info.min_purchase_limit):1,t.min_purchase_limit=t.min_purchase_limit_info.min_purchase_limit<1?1:t.min_purchase_limit_info.min_purchase_limit),a.checkCountryPriceForID(t,e),i.next=65;break;case 63:i.prev=63,i.t1=i["catch"](0);case 65:case"end":return i.stop()}}),i,null,[[0,63],[40,53]])})))()},checkCountryPriceForID:function(t,e){if("ID"===e.country){var a;if("0"!==t.input_normal_price)e.in_promotion&&(t.price=t.input_normal_price),t.price=t.input_normal_price;else for(var i=0;i<t.model_list.length;i++){var r=t.model_list[i];if(t.price===e.price.toString()){if(e.in_promotion){t.price=r.input_promotion_price;break}t.price=r.input_normal_price;break}}if((null===(a=t.model_list)||void 0===a?void 0:a.length)>0)for(var n=0;n<t.model_list.length;n++){var o=t.model_list[n];e.in_promotion?e.price=e.input_normal_price:o.price=o.input_normal_price}}},getLogisticsInfo:function(t,e,a){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,o,s,l,c,u,d,p,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=[],s=[],!((null===(n=t)||void 0===n?void 0:n.length)>0)){r.next=10;break}return u={platform_mall_id:a.platform_mall_id},r.next=6,i.$shopeemanService.getChinese(a.country,"/api/v3/logistics/get_channel_list/?",u);case 6:d=r.sent,d=JSON.parse(JSON.parse(d).data),null!==(l=d)&&void 0!==l&&null!==(c=l.data)&&void 0!==c&&c.list&&(s=d.data.list),t=i.filterLogistics(t,s,e);case 10:for(p=0;p<t.length;p++)m=t[p],h={},h.channelid=Number(m.channel_id),h.price=m.price?m.price.toString():"0.00",h.enabled=JSON.parse(m.enabled),h.cover_shipping_fee=JSON.parse(m.cover_shipping_fee),h.sizeid=Number(m.size_id),h.size=Number(m.size),h.parent_channel_id=Number(m.parent_channel_id),o.push(h);return r.abrupt("return",o);case 12:case"end":return r.stop()}}),r)})))()},filterLogistics:function(t,e,a){for(var i=[],r=0;r<e.length;r++){var n=e[r],o=n.channel_id.toString(),s="parent_channel_id"in n?n.parent_channel_id.toString():"0";if("0"===s&&(JSON.parse(n.is_mask_channel)||JSON.parse(n.enabled))){for(var l=!1,c=0;c<t.length;c++){var u=t[c];if(u.channel_id.toString()===o){a||(u.enabled=n.enabled.toString()),null!==u&&void 0!==u&&u.default_price||(u.default_price="0.00"),i.push(u),l=!0;break}}l||(n.price=n.price?n.price.toString:"0.00",n.cover_shipping_fee=!("0"===n.cover_shipping_fee.toString()||"false"===n.cover_shipping_fee.toString()),n.size_id=0,n.size=0,i.push(n))}}return i},getModelList:function(t,e){try{if((null===t||void 0===t?void 0:t.length)>0)for(var a=0;a<t.length;a++){var i=t[a];i.id=Number(i.id),i.name=!i.name&&i.sku?i.sku:i.name.toString(),i.sku=i.sku.toString(),i.stock=Number(i.stock),i.price=i.price.toString(),e&&Number(i.price_before_discount)>0&&(i.price=i.price_before_discount.toString()),i.tier_index=JSON.parse(JSON.stringify(i.tier_index)),i.input_normal_price=i.price_info.input_normal_price.toString(),i.input_promotion_price=i.price_info.input_promotion_price.toString(),i.is_default=!!JSON.parse(i.is_default)&&JSON.parse(i.is_default)}}catch(r){}},deleteActicity:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,l,c,u,d,p,m,h,g,b,f,v,y;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.prev=0,i=0;case 2:if(!(i<t.campaignTypeList.Name.length)){a.next=72;break}if(r=t.campaignTypeList.Name[i],n="",1!==r){a.next=18;break}return o="",a.next=9,e.GoodsList.getMallDiscountsIdByKeyword(t);case 9:return s=a.sent,o=s.data.hits[0].promotionid,a.next=13,e.GoodsList.deleteDiscountCampainDetail(t,o);case 13:if(l=a.sent,200===l.code){a.next=16;break}return a.abrupt("return",{batchStatus:"删除折扣活动失败：".concat(l.data),color:!1,code:l.code});case 16:a.next=69;break;case 18:if(3!==r){a.next=30;break}return a.next=21,e.GoodsList.getBundleDeal(t,n);case 21:return c=a.sent,n=c.data.hits[0].bundle_deal_id,a.next=25,e.GoodsList.deleteBundleGoods(t,n);case 25:if(u=a.sent,200===u.code){a.next=28;break}return a.abrupt("return",{batchStatus:"删除套装活动失败：".concat(u.data),color:!1,code:u.code});case 28:a.next=69;break;case 30:if(4!==r){a.next=68;break}return a.next=33,e.GoodsList.getAddOnDealStandardSearch(t);case 33:if(d=a.sent,n=d.data.add_on_deal_list[0].add_on_deal_id,!t.campaignTypeList.IsSelected){a.next=50;break}return a.next=38,e.GoodsList.getAdd0nDealAggrMainItemList(t,n);case 38:return p=a.sent,m=p.data.main_item_list.filter((function(e){return e.item_id===t.id})),h="",1===m[0].status&&(h=0),2===m[0].status&&(h=1),a.next=45,e.GoodsList.deleteAddOnDealMainItemList(t,h,n);case 45:if(g=a.sent,200===g.code){a.next=48;break}return a.abrupt("return",{batchStatus:"删除主商品加购活动失败：".concat(g.data),color:!1,code:g.code});case 48:a.next=66;break;case 50:return a.next=52,e.GoodsList.getAdd0nDealAggrSubItemList(t,n);case 52:if(b=a.sent,f=b.data.sub_item_list.filter((function(e){return e.item_id===t.id})),f.map((function(t){delete t.input_sub_item_price,delete t.price,delete t.sub_item_price,t.status=0})),!((null===f||void 0===f?void 0:f.length)>0)){a.next=66;break}v=0;case 57:if(!(v<f.length)){a.next=66;break}return a.next=60,e.GoodsList.deleteAddOnDealSubItemList(t,n,f);case 60:if(y=a.sent,200===y.code){a.next=63;break}return a.abrupt("return",{batchStatus:"删除子商品加购活动失败：".concat(y.data),color:!1,code:y.code});case 63:v++,a.next=57;break;case 66:a.next=69;break;case 68:return a.abrupt("continue",69);case 69:i++,a.next=2;break;case 72:return a.abrupt("return",{batchStatus:"删除活动成功",color:!0,code:200});case 75:return a.prev=75,a.t0=a["catch"](0),a.abrupt("return",{batchStatus:"删除活动异常",color:!1,code:-2});case 78:case"end":return a.stop()}}),a,null,[[0,75]])})))()},batchUpDownProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.updateNum=t.multipleSelection.length,e.next=4,Object(u["c"])(t.multipleSelection,t.upDownProduct);case 4:t.operationBut=!1;case 5:case"end":return e.stop()}}),e)})))()},upDownProduct:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.prev=1,!a.upDown){i.next=10;break}if(!((null===(n=t.campaignTypeList.Name)||void 0===n?void 0:n.length)>0)){i.next=10;break}return i.next=6,a.deleteActicity(t,t.campaignTypeList);case 6:o=i.sent,s=o.batchStatus,l=o.color,a.batchStatus(t,s,l);case 10:return c=[{id:Number(t.id),unlisted:a.upDown}],u={mallId:t.platform_mall_id},i.next=14,a.$shopeemanService.handleGoodsDelist(t.country,u,c);case 14:d=i.sent,200===d.code?(a.successNum++,a.batchStatus(t,"".concat(a.upDown?"下架成功":"上架成功"),!0)):(a.failNum++,a.batchStatus(t,d.data,!1)),i.next=22;break;case 18:i.prev=18,i.t0=i["catch"](1),a.failNum++,a.batchStatus(t,"".concat(a.upDown?"下架异常":"上架异常"),!1);case 22:return i.prev=22,p=100/a.multipleSelection.length,a.percentage+=p,--r.count,i.finish(22);case 27:case"end":return i.stop()}}),i,null,[[1,18,22,27]])})))()},batchDelete:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:(null===(a=t.tableData)||void 0===a?void 0:a.length)>0&&(100===t.queryType||200===t.queryType)?t.deleteData=t.tableData:t.deleteData=t.multipleSelection,t.$confirm("确定删除【".concat(t.deleteData.length,"】个商品吗"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.updateNum=t.deleteData.length,e.next=4,Object(u["c"])(t.deleteData,t.deleteProduct);case 4:return e.next=6,t.deleteCollectGoodsInfo();case 6:t.operationBut=!1;case 7:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.prev=1,a.batchStatus(t,"正在删除商品...",!0),!((null===(n=t.campaignTypeList.Name)||void 0===n?void 0:n.length)>0)){i.next=12;break}return i.next=6,a.deleteActicity(t,t.campaignTypeList);case 6:if(o=i.sent,s=o.batchStatus,l=o.color,c=o.code,200===c){i.next=12;break}return i.abrupt("return",a.batchStatus(t,s,l));case 12:return u={product_id_list:[Number(t.id)],mallId:t.platform_mall_id},i.next=15,a.$shopeemanService.handleGoodsDelete(t.country,u);case 15:d=i.sent,200===d.code?(a.successNum++,a.batchStatus(t,"删除成功",!0),a.deleteId.push(t.id)):(a.failNum++,a.batchStatus(t,"删除失败",!1)),i.next=23;break;case 19:i.prev=19,i.t0=i["catch"](1),a.failNum++,a.batchStatus(t,"删除异常",!1);case 23:return i.prev=23,p=100/a.deleteData.length,a.percentage+=p,--r.count,i.finish(23);case 28:case"end":return i.stop()}}),i,null,[[1,19,23,28]])})))()},deleteCollectGoodsInfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.Logs.writeLog("正在删除云商品库数据...",!0),e.next=3,t.GoodsList.deleteCollectGoodsInfo(t.deleteId);case 3:a=e.sent,200===a.code?t.$refs.Logs.writeLog("删除云商品库数据成功",!0):t.$refs.Logs.writeLog("删除云商品库数据失败：".concat(a.data),!1);case 5:case"end":return e.stop()}}),e)})))()},getGoodsActInfo:function(t){try{var e,a,i,r,o=null,s={},l=[];if(null!==t&&void 0!==t&&null!==(e=t.ongoing_upcoming_campaigns)&&void 0!==e&&e.upcoming_campaigns)if(o=t.ongoing_upcoming_campaigns.upcoming_campaigns,(null===(i=o)||void 0===i?void 0:i.length)>0)for(var c=0;c<o.length;c++){var u=o[c];l.push(u.campaign_type)}if(null!==t&&void 0!==t&&null!==(a=t.ongoing_upcoming_campaigns)&&void 0!==a&&a.ongoing_campaigns)if(o=t.ongoing_upcoming_campaigns.ongoing_campaigns,(null===(r=o)||void 0===r?void 0:r.length)>0)for(var d=0;d<o.length;d++){var p=o[d];l.push(p.campaign_type)}return s.Name=Object(n["a"])(new Set(l)),s.IsSelected=t.add_on_deal,s}catch(m){}},getDayLength:function(t){var e=t?t.country:this.country;switch(e){case"TH":case"MY":case"SG":this.minDays=7,this.maxDays=30,this.productDay=t?this.productDay:15,this.preOrderDeliveryDays=2;break;case"TW":this.minDays=5,this.maxDays=20,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=3;break;case"PH":this.minDays=7,this.maxDays=30,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=2;break;case"ID":this.minDays=7,this.maxDays=15,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=2;break;case"VN":this.minDays=7,this.maxDays=15,this.productDay=t?this.productDay:7,this.preOrderDeliveryDays=2;break;case"BR":this.minDays=5,this.maxDays=10,this.productDay=t?this.productDay:7,this.preOrderDeliveryDays=3;break}},getDescriptionLength:function(t){switch(t.country){case"TH":this.maxLength=3e3,this.minLength=25;break;case"VN":this.maxLength=3e3,this.minLength=100;break;case"MY":case"SG":case"ID":this.maxLength=3e3,this.minLength=20;break;case"PH":this.maxLength=3e3,this.minLength=5;break;case"TW":case"BR":this.maxLength=3e3,this.minLength=1;break}},getTitleLength:function(t){switch(t.country){case"TH":case"MY":this.maxLength=120,this.minLength=20;break;case"VN":case"SG":this.maxLength=120,this.minLength=10;break;case"TW":this.maxLength=60,this.minLength=5;break;case"PH":this.maxLength=100,this.minLength=20;break;case"ID":this.maxLength=100,this.minLength=5;break;case"BR":this.maxLength=120,this.minLength=1;break}},operation:function(t){var e;if(null===(e=this.multipleSelection)||void 0===e||!e.length)return this.$message("没有可操作的商品，请选择");this[t]()},selectDescription:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,l,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t){a.next=10;break}return a.next=3,e.$commodityService.descriptionTemplateList();case 3:i=a.sent,r=JSON.parse(i),e.descriptionLabelList=r.data||[],e.descriptionConfigId?(n=e.descriptionLabelList.filter((function(t){return t&&t.id===e.descriptionConfigId}))[0],e.descriptionConfig.text=n&&n.description||e.descriptionConfig.text,e.descriptionConfig.description=n&&n.description||e.descriptionConfig.description,e.descriptionConfig.lable=n&&n.lable||""):e.descriptionConfigId=e.descriptionLabelList[0]&&e.descriptionLabelList[0].id||"",e.descriptionVisible=!0,a.next=31;break;case 10:if(1!==t){a.next=21;break}return o=e.descriptionConfig.tag||e.descriptionConfig.lable,a.next=14,e.$commodityService.uploadDescriptionTemplate(o,e.descriptionConfig.text);case 14:s=a.sent,l=JSON.parse(s),e.descriptionConfig.tag="",e.descriptionConfigId=parseInt(l.data),e.descriptionConfig.description=e.descriptionConfig.text,a.next=30;break;case 21:if(2!==t){a.next=29;break}return a.next=24,e.$commodityService.deleteDescriptionTemplate(e.descriptionConfigId);case 24:c=a.sent,u=JSON.parse(c),200===u.code?(e.descriptionConfigId="",e.$message.success("删除成功")):e.$message.error("删除失败"),a.next=30;break;case 29:3===t?e.descriptionConfig.description=e.descriptionConfig.text:4===t&&(e.descriptionConfig.text=e.descriptionConfig.description);case 30:e.descriptionVisible=!1;case 31:case"end":return a.stop()}}),a)})))()},viewDetails:function(t){var e={type:"itemDetail",shopId:t.platform_mall_id,id:t.id};this.$BaseUtilService.getOrderDetailInfo(t.platform_mall_id,JSON.stringify(e))},getLogistics:function(){var t=this,e=this.$shopeeManConfig.getLogisticsList();e=e[this.country],this.logisticsList=[],this.logistics=[],e.forEach((function(e){e.CustomShipFee="",t.logisticsList.push(e),e.IsSelected&&t.logistics.push(e.ShipId)})),this.setIsCustomShipFee()},queryData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectMallList.length){e.next=2;break}return e.abrupt("return",t.$message("请选择店铺"));case 2:if(null!==(a=t.goodsStatus)&&void 0!==a&&a.length){e.next=4;break}return e.abrupt("return",t.$message("请选择商品状态"));case 4:if(null!==(i=t.source)&&void 0!==i&&i.length){e.next=6;break}return e.abrupt("return",t.$message("请选择上家来源"));case 6:if(!(t.soldMin<0||t.soldMax>99999999)){e.next=8;break}return e.abrupt("return",t.$message("销售量请输入0-99999999之间的数字"));case 8:if(!(t.viewMin<0||t.viewMax>99999999)){e.next=10;break}return e.abrupt("return",t.$message("访客量请输入0-99999999之间的数字"));case 10:if(!(t.likeMin<0||t.likeMax>99999999)){e.next=12;break}return e.abrupt("return",t.$message("粉丝量请输入0-99999999之间的数字"));case 12:if(!(t.priceMin<0||t.priceMax>99999999)){e.next=14;break}return e.abrupt("return",t.$message("价格请输入0-99999999之间的数字"));case 14:if(!(t.goodsMin<0||t.goodsMax>99999999)){e.next=16;break}return e.abrupt("return",t.$message("商品数量请输入0-99999999之间的数字"));case 16:t.initData(),t.flag=!1,t.flag2=!0,t.queryNum=0,t.tableData=[],t.$refs.Logs.consoleMsg="",t.showConsole=!1,1===t.queryType?t.$refs.Logs.writeLog("开始查询...",!0):100===t.queryType?t.$refs.Logs.writeLog("开始查询100小时内无流量商品",!0):200===t.queryType&&t.$refs.Logs.writeLog("开始查询200小时内无流量商品",!0),t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[]})),t.index=1,r=0;case 27:if(!(r<t.goodsStatus.length)){e.next=46;break}if(!t.flag){e.next=30;break}return e.abrupt("break",46);case 30:if(n=t.goodsStatus[r],t.goodsStatusVal=n,0!==n&&100!==t.queryType&&200!==t.queryType){e.next=39;break}return t.goodsStatusName="",e.next=36,Object(u["c"])(t.selectMallList,t.getTableData);case 36:return e.abrupt("break",46);case 39:return t.goodsStatusName=t.statusFilter[n],t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[]})),e.next=43,Object(u["c"])(t.selectMallList,t.getTableData);case 43:r++,e.next=27;break;case 46:t.operationBut=!1,t.showConsole=!0,t.$refs.Logs.writeLog("查询完成",!0),100!==t.queryType&&200!==t.queryType||(null===(o=t.tableData)||void 0===o?void 0:o.length)>0&&t.batchDelete();case 50:case"end":return e.stop()}}),e)})))()},getTableData:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p,m,h,g,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},a.flag&&a.stop(),n="",o="",i.prev=4,s={},s["mItem"]=t,s["pageSize"]=a.pageSize,s["listType"]=a.goodsStatusName?a.goodsStatusName:"all",o=t.mall_alias_name||t.platform_mall_name,!("originId"!==a.searchType&&a.keyword||a.goodsMax<99999999||a.goodsMin>0||a.soldMin>0||a.soldMax<99999999||a.categoryName)){i.next=21;break}return a.keyword&&100!==a.queryType&&200!==a.queryType&&(s["searchType"]=a.searchType,s["keyword"]=a.keyword.trim()),a.categoryName&&100!==a.queryType&&200!==a.queryType&&(s["categoryId"]=a.categoryList.categoryList[a.categoryList.categoryList.length-1].category_id),s["goodsMin"]=a.goodsMin,s["goodsMax"]=a.goodsMax,100!==a.queryType&&200!==a.queryType&&(s["soldMin"]=a.soldMin,s["soldMax"]=a.soldMax),i.next=18,a.GoodsList.searchProductList(s);case 18:n=i.sent,i.next=24;break;case 21:return i.next=23,a.GoodsList.getMpskuList(s);case 23:n=i.sent;case 24:if(200!==n.code){i.next=33;break}if(null===(l=n.data.list)||void 0===l||!l.length){i.next=31;break}return a.$refs.Logs.writeLog("查询店铺【".concat(o,"】第【").concat(t.pageNumber,"】页数据：").concat(n.data.list.length),!0),i.next=29,a.setTableData(n.data.list,t,o);case 29:c=a.filterData(n.data.list),a.productNumChecked?t.mylist=c:(a.tableData=a.tableData.concat(c),a.queryNum=a.tableData.length);case 31:i.next=34;break;case 33:a.$refs.Logs.writeLog("店铺【".concat(o,"】").concat(n.data),!1);case 34:i.next=39;break;case 36:i.prev=36,i.t0=i["catch"](4),a.$refs.Logs.writeLog("店铺【".concat(o,"】获取数据异常"),!1);case 39:if(i.prev=39,m=a.tableData.filter((function(t){return t.mallName===o})),a.productNumChecked&&m.length<Number(a.productNum)&&(h=Number(a.productNum)-m.length,a.tableData=a.tableData.concat(t.mylist.slice(0,h)),g=a.tableData.filter((function(t){return t.mallName===o})),g.length>=Number(a.productNum)&&(a.flag2=!1)),!((null===(u=n)||void 0===u||null===(d=u.data)||void 0===d||null===(p=d.list)||void 0===p?void 0:p.length)>=a.pageSize&&a.flag2)){i.next=49;break}if(t.pageNumber++,a.flag){i.next=47;break}return i.next=47,a.getTableData(t,r);case 47:i.next=53;break;case 49:a.queryNum=a.tableData.length,b=8===a.goodsStatus.length?1:a.goodsStatus.length,a.percentage=a.index++/(a.selectMallList.length*b)*100,--r.count;case 53:return i.finish(39);case 54:case"end":return i.stop()}}),i,null,[[4,36,39,54]])})))()},queryBanned:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initData(),t.tableData=[],t.operationBut=!0,t.showConsole=!1,t.$refs.Logs.consoleMsg="",t.flag=!1,t.flag2=!0,t.$refs.Logs.writeLog("开始查询禁卖商品...",!0),t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[]})),e.next=11,Object(u["c"])(t.selectMallList,t.getBannedData);case 11:t.operationBut=!1,t.showConsole=!0,t.$refs.Logs.writeLog("禁卖商品查询结束",!0);case 14:case"end":return e.stop()}}),e)})))()},getBannedData:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,l,c,u,d,p,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},a.flag&&a.stop(),n="",o="",i.prev=4,s={},s["mItem"]=t,s["pageSize"]=a.pageSize,s["listType"]="banned",s["listOrderType"]="list_time_asc",o=t.mall_alias_name||t.platform_mall_name,i.next=13,a.GoodsList.getMpskuList(s);case 13:if(n=i.sent,200!==n.code){i.next=22;break}if(null===(l=n.data.list)||void 0===l||!l.length){i.next=20;break}return a.$refs.Logs.writeLog("查询店铺【".concat(o,"】第【").concat(t.pageNumber,"】页数据：").concat(n.data.list.length),!0),i.next=19,a.setTableData(n.data.list,t,o);case 19:a.productNumChecked?t.mylist=n.data.list:(a.tableData=a.tableData.concat(n.data.list),a.queryNum=a.tableData.length);case 20:i.next=23;break;case 22:a.$refs.Logs.writeLog("店铺【".concat(o,"】").concat(n.data),!1);case 23:i.next=28;break;case 25:i.prev=25,i.t0=i["catch"](4),a.$refs.Logs.writeLog("店铺【".concat(o,"】获取数据异常"),!1);case 28:if(i.prev=28,p=a.tableData.filter((function(t){return t.mallName===o})),a.productNumChecked&&p.length<Number(a.productNum)&&(m=Number(a.productNum)-p.length,a.tableData=a.tableData.concat(t.mylist.slice(0,m)),h=a.tableData.filter((function(t){return t.mallName===o})),h.length>=Number(a.productNum)&&(a.flag2=!1)),!((null===(c=n)||void 0===c||null===(u=c.data)||void 0===u||null===(d=u.list)||void 0===d?void 0:d.length)>=a.pageSize&&a.flag2)){i.next=38;break}if(t.pageNumber++,a.flag){i.next=36;break}return i.next=36,a.getBannedData(t,r);case 36:i.next=42;break;case 38:a.queryNum=a.tableData.length,g=100/a.selectMallList.length,a.percentage+=g,--r.count;case 42:return i.finish(28);case 43:case"end":return i.stop()}}),i,null,[[4,25,28,43]])})))()},setTableData:function(t,e,a){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=regeneratorRuntime.mark((function r(n){var o,s,l,c,u,d,p,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=t[n],s=0,l=0,c=[],u=[],d="",o.country=e.country,o.mallName=a,o.create_time=1e3*o.create_time,o.modify_time=1e3*o.modify_time,o.images=o.images[0],o.platform_mall_id=e.platform_mall_id,o.model_list.forEach((function(t){c.push(Number(t.price_info.normal_price)),s+=Number(t.stock_info.normal_stock),l+=Number(t.sold)})),p=0;case 14:if(!(p<o.category_path.length)){r.next=23;break}return m=o.category_path[p],r.next=18,i.GoodsList.getCategoryName(o.country,m,"0","");case 18:h=r.sent,200===h.code?u.push(h.data.categories?"".concat(h.data.categories[0].category_name,"(").concat(h.data.categories[0].category_cn_name,")"):""):(u="",i.$refs.Logs.writeLog("".concat(h.data),!1));case 20:p++,r.next=14;break;case 23:return o.stock=s,o.sold=l,o.price=Math.min.apply(null,c),o.categoryName=u.join("->"),d=2===o.status?6:1===o.status&&0===o.stock?11:1===o.status&&100===i.goodsStatusVal?100:o.status,o.status=d,r.next=31,i.getPlatformData(o.parent_sku);case 31:o.platformTypeStr=i.platformData["platformTypeStr"],o.productId=i.platformData["productId"],o.url=i.platformData["url"],o.platform=i.platformData["platform"],o.campaignTypeList=i.getGoodsActInfo(o);case 36:case"end":return r.stop()}}),r)})),o=0;case 2:if(!(o<t.length)){r.next=7;break}return r.delegateYield(n(o),"t0",4);case 4:o++,r.next=2;break;case 7:case"end":return r.stop()}}),r)})))()},filterData:function(t){for(var e=[],a=0;a<t.length;a++){var i,r,n,o,s=t[a];"originId"===this.searchType&&this.keyword&&this.keyword!==s.productId||(0===this.source[0]||this.source.includes(s.platformTypeStr))&&(null===(i=this.modifyTime)||void 0===i||!i.length||s.modify_time>=this.modifyTime[0])&&(null===(r=this.modifyTime)||void 0===r||!r.length||s.modify_time<=new Date(this.modifyTime[1]).getTime())&&(null===(n=this.createTime)||void 0===n||!n.length||s.create_time>=this.createTime[0])&&(null===(o=this.createTime)||void 0===o||!o.length||s.create_time<=new Date(this.createTime[1]).getTime())&&(6===this.goodsStatusVal&&6!==s.status||6!==this.goodsStatusVal&&6===s.status||100!==this.queryType&&200!==this.queryType&&1===Number(this.sellStatus)&&Number(s.stock)>0||2===Number(this.sellStatus)&&0===Number(s.stock)||Number(s.price)>=Number(this.priceMin)&&Number(s.price)<=Number(this.priceMax)&&Number(s.view_count)>=Number(this.viewMin)&&Number(s.view_count)<=Number(this.viewMax)&&Number(s.like_count)>=Number(this.likeMin)&&Number(s.like_count)<=Number(this.likeMax)&&(100===this.queryType&&(Number((new Date).getTime())-Number(s.create_time)<36e7||0!==Number(s.view_count)||0!==Number(s.like_count))||200===this.queryType&&(Number((new Date).getTime())-Number(s.create_time)<72e7||0!==Number(s.view_count)||0!==Number(s.like_count))||e.push(s)))}return e},getPlatformData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.decryptShopeeItemSku(t);case 2:i=e.platformData["platform"],r=e.platformData["productId"],5===i&&r.toString().includes("-")&&(e.getSelfGoodsPlatform(t),e.platformData&&e.platformData["platform"]&&(i=e.platformData["platform"])),n=Object(u["n"])(i,e.platformData),o=n.url,s=n.platformTypeStr,e.platformData["url"]=o,e.platformData["platformTypeStr"]=s;case 8:case"end":return a.stop()}}),a)})))()},decryptShopeeItemSku:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,l,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,i=/^[+-]?\d*[.]?\d*$/,!(t.length<30)){a.next=10;break}return a.next=5,e.$userInfo.user_create_time;case 5:r=a.sent,r&&(n=new Date(r).getTime(),o=new Date("2018-12-20 00:00:00").getTime(),n>o&&(e.platformData["platform"]=5,e.platformData["productId"]=t)),t.indexOf("_")>-1?(s=t.split("_"),i.test(s[0])&&i.test(s[1])?(l=Number(s[1]),1===l||2===l||3===l||5===l||6===l||7===l||8===l?(e.platformData["platform"]=l,e.platformData["productId"]=s[0]):(e.platformData["platform"]=5,e.platformData["productId"]=t)):(e.platformData["platform"]=5,e.platformData["productId"]=t)):i.test(t)?(e.platformData["platform"]=1,e.platformData["productId"]=t):(e.platformData["platform"]=5,e.platformData["productId"]=t),a.next=14;break;case 10:return a.next=12,e.$BaseUtilService.decGoodCode(t);case 12:c=a.sent,c.indexOf("-")>-1?(u=c.split("-"),e.getPlatformSimpleStr(u[0],u)):(e.platformData["platform"]=5,e.platformData["productId"]=t);case 14:a.next=18;break;case 16:a.prev=16,a.t0=a["catch"](0);case 18:case"end":return a.stop()}}),a,null,[[0,16]])})))()},getPlatformSimpleStr:function(t,e){try{var a=e[1];"pdd"===t.toLocaleLowerCase()?(this.platformData["platform"]=1,this.platformData["productId"]=a):"tb"===t.toLocaleLowerCase()||"tm"===t.toLocaleLowerCase()?(this.platformData["platform"]=2,this.platformData["productId"]=a):"tb"===t.toLocaleLowerCase()?(this.platformData["platform"]=3,this.platformData["productId"]=a):"own"===t.toLocaleLowerCase()?(this.platformData["platform"]=5,this.platformData["productId"]=a):"ghpt"===t.toLocaleLowerCase()?(this.platformData["platform"]=6,this.platformData["productId"]=a):"alibaba"===t.toLocaleLowerCase()?(this.platformData["platform"]=8,this.platformData["productId"]=a):"hyj"===t.toLocaleLowerCase()||"hlb"===t.toLocaleLowerCase()?(this.platformData["platform"]=7,this.platformData["productId"]=a,this.platformData["site"]=e[2],this.platformData["shopId"]=e[3]):"shopee"===t.toLocaleLowerCase()?(this.platformData["platform"]=11,this.platformData["productId"]=a,this.platformData["site"]=e[2],this.platformData["shopId"]=e[3]):"aliexpress"===t.toLocaleLowerCase()?(this.platformData["platform"]=12,this.platformData["productId"]=a):"lazada"===t.toLocaleLowerCase()?(this.platformData["platform"]=9,this.platformData["productId"]=a,this.platformData["site"]=e[2]):"hyjhw"===t.toLocaleLowerCase()?(this.platformData["platform"]=15,this.platformData["productId"]=a,this.platformData["site"]=e[2]):"jx"===t.toLocaleLowerCase()?(this.platformData["platform"]=10,this.platformData["productId"]=a,this.platformData["site"]=e[2]):"crossbroder"===t.toLocaleLowerCase()&&(this.platformData["platform"]=13,this.platformData["productId"]=a,this.platformData["userId"]=e.Length>2?e[2]:"")}catch(i){}},getSelfGoodsPlatform:function(t){var e="5",a="",i=[];try{t.includes("-")&&(i=t.split("-"),e=i[0]),this.getPlatformSimpleStr(e,i)}catch(r){this.platformData["platform"]=e,this.platformData["productId"]=a}},selectAll:function(t,e){var a=this;this[t].length<e.length?(this[t]=[],this[t].push(0),e.map((function(e){a[t].push("logistics"===t?e.ShipId:e.value)}))):this[t]=[],"logistics"===t&&this.setIsCustomShipFee()},changeSelect:function(t,e){(t.includes(0)||t.length!==this[e].length)&&t.includes(0)&&t.length-1<this[e].length&&(this[e]=this[e].filter((function(t){return 0!==t}))),"logistics"===e&&this.setIsCustomShipFee()},setIsCustomShipFee:function(){var t=this;this.isCustomShipFee=this.logistics.some((function(e){return t.logisticsList.some((function(t){return t.ShipId===e&&t.IsCustomShipFee}))}))},openUrl:function(t,e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1===e)try{r=a.$filters.countryShopeebuyCom(t.country),a.$BaseUtilService.openUrl("".concat(r,"/product/").concat(t.platform_mall_id,"/").concat(t.id))}catch(n){a.$message.error("打开失败")}else 2===e?a.$BaseUtilService.openUrl(t.url):a.$BaseUtilService.openUrl(t);case 1:case"end":return i.stop()}}),i)})))()},changeMallList:function(t){this.selectMallList=t,this.country=t.country},handleSelectionChange:function(t){this.multipleSelection=t},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)}))},handelClose:function(){this.platformData=[],this.sourceGoodsUrl="",this.sourceId=""},batchStatus:function(t,e,a){this.$set(t,"batchStatus",e),this.$set(t,"color",a?"green":"red")},stop:function(){this.isSync||(this.$refs.Logs.writeLog("停止操作",!0),Object(u["u"])())},initData:function(){this.isSync=!1,this.operationBut=!0,this.percentage=0,this.updateNum=0,this.successNum=0,this.failNum=0},exportTableData:function(){var t,e=this;if(null===(t=this.tableData)||void 0===t||!t.length)return this.$message("暂无数据导出");var a="<tr>\n          <td>站点</td>\n          <td>店铺名</td>\n          <td>主图</td>\n          <td>类目</td>\n          <td>上家类型</td>\n          <td>上家链接</td>\n          <td>itemID</td>\n          <td>itemID链接</td>\n          <td>价格</td>\n          <td>库存</td>\n          <td>标题</td>\n          <td>状态</td>\n          <td>创建时间</td>\n          <td>更新时间</td>\n          <td>销售量</td>\n          <td>访客量</td>\n          <td>粉丝量</td>\n        </td>";this.tableData.forEach((function(t){a+="<tr>\n        <td>".concat(t.country?e.$filters.chineseSite(t.country):"\t","</td>\n        <td>").concat(t.mallName?t.mallName:"\t","</td>\n        <td>").concat(t.images?e.$filters.imageRender([t.country,t.platform_mall_id,t.images]):"\t","</td>\n        <td>").concat(t.categoryName?t.categoryName:"\t","</td>\n        <td>").concat(t.platformTypeStr?t.platformTypeStr:"\t","</td>\n        <td>").concat(t.url?t.url:"\t","</td>\n        <td>").concat(t.id?t.id:"\t","</td>\n        <td>").concat(t.id?"".concat(e.$filters.countryShopeebuyCom(t.country),"/product/").concat(t.platform_mall_id,"/").concat(t.id):"\t","</td>\n        <td>").concat(t.price?t.price:"\t","</td>\n        <td>").concat(t.stock?t.stock:"\t","</td>\n        <td>").concat(t.name?t.name:"\t","</td>\n        <td>").concat(t.status?e.statusObj[t.status]:"\t","</td>\n        <td>").concat(t.create_time?e.$dayjs(t.create_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(t.modify_time?e.$dayjs(t.modify_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(t.sold?t.sold:"\t","</td>\n        <td>").concat(t.view_count?t.view_count:"\t","</td>\n        <td>").concat(t.like_count?t.like_count:"\t","</td>\n        </tr>")})),Object(u["i"])("商品列表数据",a)},copy:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var a=document.createRange();a.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(i){}e.parentElement.removeChild(e)}}},m=p,h=(a("3116"),a("2877")),g=Object(h["a"])(m,i,r,!1,null,"a1b9b4f6",null);e["default"]=g.exports},8992:function(t,e,a){"use strict";a("4c28")},9772:function(t,e,a){},b0bd:function(t,e,a){"use strict";a("9772")},eb09:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category-mapp contaniner"},[a("div",{staticClass:"category_dialog"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"keepRight"},[t._v("店铺站点：")]),t.country?a("div",[t._v(t._s(t._f("chineseSite")(t.country)))]):a("div",[a("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.countryOption,callback:function(e){t.countryOption=e},expression:"countryOption"}},t._l(t.countriesOption,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._l(t.categoryList,(function(e,i){return a("div",{key:i,staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight"},[t._v(t._s(i+1)+"级类目：")]),a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",filterable:""},on:{change:function(e){return t.setCategory(t.categoryAction[i],i)}},model:{value:t.categoryAction[i],callback:function(e){t.$set(t.categoryAction,i,e)},expression:"categoryAction[index]"}},[a("el-option",{attrs:{value:"",label:"全部"}}),t._l(e,(function(t){return a("el-option",{key:t.id,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1)}))],2),a("div",{staticClass:"category_box",staticStyle:{"margin-left":"20px"}},[t._m(0),t._l(t.attributesList,(function(e,i){return a("div",{key:i,staticClass:"on_new_dialog_box line_height_28"},[a("div",{staticClass:"width_single_150"},[t._v(t._s(e.attribute_name)+"("+t._s(e.attribute_cn_name)+")")]),a("div",[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",filterable:""},model:{value:e.options,callback:function(a){t.$set(e,"options",a)},expression:"item.options"}},t._l(e.new_options_obj,(function(t){return a("el-option",{key:t.value_id,attrs:{label:t.value,value:t.value_id}})})),1)],1)])}))],2)]),a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-top":"25px","justify-content":"space-evenly"}},[t.mallList[0]?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmCategory(0)}}},[t._v("　刷　新　")]):t._e(),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmCategory()}}},[t._v("　确　定　")]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$emit("categoryChange","")}}},[t._v("　取　消　")])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"width_single_150"},[t._v("属性名称：")]),a("div",[t._v("属性值"),a("span",{staticStyle:{color:"red"}},[t._v("(必填)")])])])}],n=a("1da1"),o=(a("159b"),a("7db0"),a("b0c0"),a("c740"),a("a434"),a("96cf"),{name:"category-mapping",props:{country:{type:String,default:function(){return""}},goodsCurrent:{type:Object,default:function(){return{}}},mallList:{type:Array,default:function(){return[]}}},data:function(){return{countriesOption:this.$filters.countries_option,countryOption:"TH",categoryAction:[],attributesCurrent:[],categoryList:[],attributesList:[]}},watch:{countryOption:function(t){this.enterCategory()}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.enterCategory();case 2:case"end":return e.stop()}}),e)})))()},methods:{confirmCategory:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,l,c,u,d,p,m,h,g,b,f,v,y,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:-1,r=e.country||e.countryOption,!(e.goodsCurrent&&i<0)){a.next=8;break}n=[],e.categoryList.forEach((function(t,a){var i=t.find((function(t){return t.category_id===e.categoryAction[a]}));i&&n.push(i)})),e.$emit("categoryChange",{categoryList:n,attributesList:e.attributesList,country:r||e.countryOption}),a.next=46;break;case 8:return i=i<0?0:i,o=e.mallList[i],s=e.categoryAction[e.categoryAction.length-1],l={mallId:o.platform_mall_id,category_ids:s,brand_status:1,cursor:0,limit:100},a.next=14,e.$shopeemanService.getBrandList(r,l,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 14:if(c=a.sent,u=JSON.parse(c),!(u.status>=200&&u.status<=300)){a.next=45;break}if(d=JSON.parse(u.data),0!==d.code){a.next=42;break}return p=d.data&&d.data.list[0]&&d.data.list[0].brand_list,m=[],p.forEach((function(t){m.push({value:t.name,value_id:t.brand_id})})),h=[{category_id:s,attribute_id:0,is_mandatory:1,attribute_name:"Brand",attribute_cn_name:"品牌",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(m),attribute_label:"",is_key_attribute:1}],a.prev=23,a.next=26,e.$shopeemanService.getAttributeTree(r,l,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 26:g=a.sent,b=JSON.parse(g),f=JSON.parse(b.data),v=f&&f.data&&f.data.list[0]&&f.data.list[0].attribute_tree||[],v.forEach((function(t){var e=[];t.children.forEach((function(t){e.push({value:t.display_name||t.name,value_id:t.value_id})})),h.push({category_id:s,attribute_id:t.attribute_id,is_mandatory:t.mandatory?1:0,attribute_name:t.display_name||t.name,attribute_cn_name:"",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(e),attribute_label:"",is_key_attribute:0})})),a.next=35;break;case 33:a.prev=33,a.t0=a["catch"](23);case 35:return a.prev=35,a.next=38,e.$commodityService.uploadCateGoryAttr(h);case 38:return y=a.sent,_=JSON.parse(y),200===_.code?e.$message.success("同步成功"):e.$message.error("同步失败"),a.finish(35);case 42:e.$emit("categoryChange",""),a.next=46;break;case 45:e.confirmCategory(++i);case 46:case"end":return a.stop()}}),a,null,[[23,33,35,42]])})))()},getAttribute:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.categoryAction[t.categoryAction.length-1]||t.categoryAction[t.categoryAction.length-2]||"0",i=t.country||t.countryOption,e.next=4,t.$commodityService.getAttributeInfo(i,a);case 4:r=e.sent,n=JSON.parse(r),t.attributesList=[],200===n.code&&(o=n.data&&n.data.attributes||[],o.forEach((function(e){var a=t.attributesCurrent.findIndex((function(t){return t.attribute_id===e.attribute_id})),i=t.attributesCurrent[a]&&t.attributesCurrent[a].value_id||0;e.new_options_obj=e.new_options&&JSON.parse(e.new_options)||[],e.options=a>-1&&parseInt(i)||e.new_options_obj[0]&&e.new_options_obj[0].value_id,t.attributesList.push(e)})),t.attributesCurrent=[]);case 8:case"end":return e.stop()}}),e)})))()},setCategory:function(t,e){this.categoryList.splice(e+1,this.categoryList.length-e),this.categoryAction.splice(e+1,this.categoryAction.length-e),this.enterCategory(t+"",++e)},enterCategory:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,l,c,u,d,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"0",r=t.length>1&&void 0!==t[1]?t[1]:0,n=t.length>2&&void 0!==t[2]?t[2]:null,o=e.country||e.countryOption,0!==r){a.next=12;break}if(e.categoryAction=n&&n.categoryIdList||[],!e.goodsCurrent||!e.goodsCurrent.goodsId){a.next=12;break}return a.next=9,e.$commodityService.getCategoryRelation(e.goodsCurrent.originCategoryId,o,e.goodsCurrent.platform+"");case 9:s=a.sent,l=JSON.parse(s),e.attributesCurrent=l.data&&l.data.attributes||[];case 12:if(!i){a.next=21;break}return c=JSON.parse(JSON.stringify(e.categoryList))||[],a.next=16,e.$commodityService.getCategoryTbInfo(o,i);case 16:u=a.sent,d=JSON.parse(u),200===d.code&&(p=d.data,p&&p.categories?(c[r]=p.categories,e.categoryList=c,e.categoryAction[r]=e.categoryAction[r]||c[r][0].category_id,e.enterCategory(e.categoryAction[r]+"",++r)):e.getAttribute()),a.next=22;break;case 21:e.getAttribute(!0);case 22:case"end":return a.stop()}}),a)})))()}}}),s=o,l=(a("b0bd"),a("2877")),c=Object(l["a"])(s,i,r,!1,null,null,null);e["a"]=c.exports},feb6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"storeChooseUL"},[a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.groupIdList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})}))],2)],1),a("li",{style:t.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:""},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[t.isShowName?t._e():a("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteShowList,(function(e,i){return t.showMall(e,i)?a("el-option",{key:i,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}}):t._e()}))],2)],1),t.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},r=[],n=a("1da1"),o=a("2909"),s=(a("96cf"),a("99af"),a("d81d"),a("fb6a"),a("d3b7"),a("25f0"),a("159b"),a("c740"),a("7db0"),a("4de4"),a("caad"),a("2532"),a("7646")),l=a("2b0e");l["default"].directive("loadmore",{bind:function(t,e){var a=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)}))}});var c={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new s["a"](this),isShowName:"",showMallNumber:100,mallShowIndex:0}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t,e){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var a=this;if(this.isAllowSet2){this.isAllowSet2=!1;var i=e.indexOf("")>-1,r=t.indexOf("")>-1;i!==r?this.groupId=r?[""].concat(Object(o["a"])(this.groupIdList.map((function(t){return t.id})))):[]:r?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var i=e.indexOf("")>-1,r=t.indexOf("")>-1;i!==r?this.site=r?[""].concat(Object(o["a"])(this.siteList.map((function(t){return t.platform_mall_id})))):[]:r?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length&&this.site.unshift(""),setTimeout((function(){a.changeMallList(),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.site=[],a=e.countryVal,i=e.groupId.indexOf("")>-1&&e.groupId.slice(1).toString()||e.groupId.toString(),r={country:a,mallGroupIds:i},t.next=6,e.mallListAPIInstance.ddMallGoodsGetMallList(r);case 6:n=t.sent,200===n.code?(e.siteList=n.data,0===e.groupIdList.length&&(e.groupId=[""],e.siteList.forEach((function(t){var a=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&a<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=[""]}),10)):e.$message.error("获取分组、店铺列表失败");case 8:case"end":return t.stop()}}),t)})))()},changeMallList:function(){var t=this,e=[],a="";this.site.forEach((function(i){if(i){var r=t.siteList.find((function(t){return t.platform_mall_id===i}));e.push(r),a+=i+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(a=e.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))},filterMall:function(t){this.isShowName=t||"";var e=this.siteList.filter((function(e){var a=e.mall_alias_name||e.platform_mall_name;return a.includes(t)}));this.showMallNumber=e.length-this.showMallNumber;var a=this.siteList.filter((function(e){var a=e.mall_alias_name||e.platform_mall_name;return!a.includes(t)}));this.siteShowList=[].concat(Object(o["a"])(e),Object(o["a"])(a))},showMall:function(t,e){var a=t.mall_alias_name||t.platform_mall_name,i=this.site[0]===t.platform_mall_id;return i||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteShowList.length>this.showMallNumber){var a=0;t?(a=this.mallShowIndex+10,a=a<this.siteShowList.length&&a||this.mallShowIndex):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30),this.mallShowIndex=a}}}},u=c,d=(a("8992"),a("2877")),p=Object(d["a"])(u,i,r,!1,null,null,null);e["a"]=p.exports}}]);