(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44cd94b6"],{"4c28":function(e,t,r){},"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},"639f":function(e,t,r){"use strict";r("b61e")},7037:function(e,t,r){function a(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=a=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),a(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},"81a6":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d3b7"),r("25f0"),r("a9e3"),r("fb6a");function a(){this.date=new Date,"function"!==typeof this.newGUID&&(a.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),r=this.hexadecimal(this.getGUIDTime(),16),a=0;a<9;a++)e+=Math.floor(16*Math.random()).toString(16);e+=t,e+=r;while(e.length<32)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},a.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},a.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},a.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},a.prototype.hexadecimal=function(e,t,r){return void 0!=r?parseInt(e.toString(),r).toString(t):parseInt(e.toString()).toString(t)},a.prototype.formatGUID=function(e){var t=e.slice(0,8)+"-",r=e.slice(8,12)+"-",a=e.slice(12,16)+"-",n=e.slice(16,20)+"-",o=e.slice(20);return t+r+a+n+o})}},"890e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail"},[r("ul",[r("li",[r("storeChoose",{staticStyle:{"margin-left":"-2px"},on:{changeMallList:e.changeMallList}}),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.clearLog}},[e._v("清除日志")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setQurey}},[e._v("参数设置")]),r("el-button",{on:{click:e.test}},[e._v("aa")]),r("el-checkbox",{staticStyle:{"margin-top":"5px","margin-left":"5px"},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}},[e._v("隐藏日志")])],1),r("span",{staticClass:"Follow"},[e._v("关注用户")]),r("span",{staticClass:"cancerFollow"},[e._v("取关用户")]),r("li",{staticClass:"row2"},[r("el-row",{attrs:{gutter:25}},[r("el-col",{attrs:{span:15}},[r("ul",[r("li",{staticStyle:{"align-items":"center","margin-bottom":"5px"}},[r("label",{staticStyle:{width:"128px"}},[e._v("店铺ID信息：")]),r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.mallIDinfo,callback:function(t){e.mallIDinfo=t},expression:"mallIDinfo"}}),r("div",[r("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addCancerMall}},[e._v("添加关注店铺")]),r("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("清空店铺信息")])],1)],1),r("li",{staticStyle:{"margin-left":"80px"}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.startCancer}},[e._v("开始关注")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.stopSet}},[e._v("取消操作")])],1)])]),r("el-col",{attrs:{span:9}},[r("div",{staticClass:"grid-content bg-purple"}),r("ul",[r("li",[r("el-button",{staticStyle:{width:"105px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.Unfollower(1)}}},[e._v("开始取关")]),r("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("取消操作")])],1),r("li",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.Unfollower(0)}}},[e._v("取关所有用户")]),r("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("取关未关注我的用户")])],1),r("li",{staticStyle:{height:"30px"}})])])],1)],1),r("li",{staticStyle:{color:"red"}},[e._v("温馨提示：关注用户或者取关啊用户后，获取到的关注用户量和粉丝量可能不准确，有缓存（shopee官网缓存），请稍后查看。")]),r("li",[r("el-table",{attrs:{"header-cell-style":{background:"#f7fafa"},data:e.tableList,"row-style":{height:"50px"},height:"calc(100vh - 220px)"}},[r("el-table-column",{attrs:{type:"index",label:"序列号","min-width":"100px",align:"center"}}),r("el-table-column",{attrs:{prop:"",label:"站点","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(e._s(e._f("chineseSite")(r.country)))]}}])}),r("el-table-column",{attrs:{prop:"",label:"店铺名","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(e._s(r.mall_alias_name||r.platform_mall_name))]}}])}),r("el-table-column",{attrs:{prop:"following",label:"关注中","min-width":"150px",align:"center"}}),r("el-table-column",{attrs:{prop:"fence",label:"粉丝","min-width":"150px",align:"center"}}),r("el-table-column",{attrs:{prop:"newFollow",label:"新增关注数量","min-width":"150px",align:"center"}}),r("el-table-column",{attrs:{prop:"cancerFollow",label:"取关数量","min-width":"150px",align:"center"}}),r("el-table-column",{attrs:{prop:"state",label:"操作状态","min-width":"150px",align:"center"}})],1)],1)]),r("el-dialog",{staticClass:"dialog_mall",attrs:{title:"店铺搜索",visible:e.dialog_mallSearch,width:"950px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog_mallSearch=t}}},[r("ul",[r("li",[r("label",[e._v("关键词")]),r("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),r("label",[e._v("评论数")]),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.minComment,callback:function(t){e.minComment=t},expression:"minComment"}}),e._v("- "),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.maxComment,callback:function(t){e.maxComment=t},expression:"maxComment"}}),r("label",[e._v("点赞数")]),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.minLike,callback:function(t){e.minLike=t},expression:"minLike"}}),e._v("- "),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.maxLike,callback:function(t){e.maxLike=t},expression:"maxLike"}})],1),r("li",[r("label",[e._v("评分数")]),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.minScore,callback:function(t){e.minScore=t},expression:"minScore"}}),e._v("- "),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.maxScore,callback:function(t){e.maxScore=t},expression:"maxScore"}}),r("label",{staticStyle:{"margin-left":"50px"}},[e._v("店铺数")]),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.mallNum,callback:function(t){e.mallNum=t},expression:"mallNum"}}),r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"mini"},on:{click:e.searchMall}},[e._v("搜索")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addTargetMall}},[e._v("添加勾选店铺")])],1),r("li",[r("el-table",{attrs:{"header-cell-style":{background:"#f7fafa"},data:e.mallSearchList,"row-style":{height:"50px"},"max-height":"400"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{align:"center",width:"55",type:"selection"}}),r("el-table-column",{attrs:{align:"center",label:"序号",width:"55",type:"index"}}),r("el-table-column",{attrs:{prop:"shopid",label:"店铺ID","min-width":"100px",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"产品标题","min-width":"150px",align:"center","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"",label:"主图","min-width":"100px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tooltip",{staticStyle:{width:"50px",height:"50px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:e._f("imageRender")([a.image])}})],1),r("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e._f("imageRender")([a.image,!0])}})],1)]}}])}),r("el-table-column",{attrs:{prop:"liked_count",label:"点赞数","min-width":"100px",align:"center",fixed:"right"}}),r("el-table-column",{attrs:{prop:"totalRate",label:"评论数","min-width":"100px",align:"center",fixed:"right"}}),r("el-table-column",{attrs:{prop:"rating_star",label:"产品评分","min-width":"100px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(e._s(r.item_rating.rating_star.toFixed(2)))]}}])}),r("el-table-column",{attrs:{prop:"",label:"操作","min-width":"200px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.open(a)}}},[e._v("查看产品")]),r("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("添加店铺")])]}}])})],1)],1)])]),r("el-dialog",{staticClass:"dialog_mall",attrs:{title:"用户设置",visible:e.dialog_userInfo,width:"700px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog_userInfo=t}}},[r("autoFollow",{attrs:{"user-info":e.userInfo,mall:e.selmallList},on:{isSave:e.setSave}})],1),r("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}})],1)},n=[],o=r("53ca"),s=r("2909"),i=r("b85c"),l=r("1da1"),c=r("5530"),u=(r("96cf"),r("159b"),r("99af"),r("3ca3"),r("ddb0"),r("a9e3"),r("d3b7"),r("25f0"),r("4ec9"),r("4de4"),r("b680"),r("a434"),r("ac1f"),r("1276"),r("c740"),r("feb6")),m=r("cf9f"),p=(r("4d63"),r("10d1"),r("80e0"),r("5319"),r("a4d3"),r("e01a"),r("fb6a"),r("b64b"),r("7037")),f=r.n(p);function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function g(){g=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,a,n){var o=new RegExp(e,a);return t.set(o,n||t.get(e)),d(o,r.prototype)}function a(e,r){var a=t.get(r);return Object.keys(a).reduce((function(t,r){return t[r]=e[a[r]],t}),Object.create(null))}return h(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=a(r,this)),r},r.prototype[Symbol.replace]=function(r,n){if("string"===typeof n){var o=t.get(this);return e[Symbol.replace].call(this,r,n.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+o[t]})))}if("function"===typeof n){var s=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!==f()(e[e.length-1])&&(e=[].slice.call(e),e.push(a(e,s))),n.apply(this,e)}))}return e[Symbol.replace].call(this,r,n)},g.apply(this,arguments)}var b=r("d4ec"),w=r("bee2"),x=(r("5b81"),r("81a6"),function(){function e(t){Object(b["a"])(this,e),this._this=t}return Object(w["a"])(e,[{key:"urlencode",value:function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}},{key:"guid",value:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}))}},{key:"addCancerMall",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a=encodeURI(r.keyword),n={},n["mallId"]=r.mallId,n["by"]=r.by,n["keyword"]=r.keyword,n["limit"]=r.limit,n["newest"]=r.newest,n["order"]=r.order,n["page_type"]=r.page_type,n["scenario"]="PAGE_GLOBAL_SEARCH",n["version"]=2,o=this.guid(),e.next=16,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v4/search/search_items?",n,{headers:{"Content-type":"application/json",referer:"/search?keyword=".concat(a,"&trackingId=searchhint-1646186021-961459e5-99cb-11ec-85af-8a3d66826fb4"),Accept:"application/json","If-None-Match-":this.guid(),"x-api-source":"pc","sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","X-CSRFToken":o}});case 16:return s=e.sent,e.abrupt("return",JSON.parse(s));case 20:return e.prev=20,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"店铺搜索异常 ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[1,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllower",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s,i,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.shopid,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,e.next=11,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.shopid,"/followers/?"),a,{headers:{"Content-type":"text/html; charset=utf-8",referer:"/shop/".concat(r.shopid,"/followers/?__classic__=1"),accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 11:n=e.sent,o=JSON.parse(n).data,s=g(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),i={},l=[];do{i=s.exec(o),null!==(c=i)&&void 0!==c&&c.groups&&l.push(i.groups)}while(i=s.exec(o));if(!n){e.next=21;break}return e.abrupt("return",{code:200,data:l});case 21:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"粉丝请求异常 ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[1,24]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyerFollow",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["isAddCsrfToken"]=!0,a["userShopid"]=r.userShopid,a["csrfmiddlewaretoken"]=this.guid().replaceAll("-",""),e.next=9,this._this.$shopeemanService.postChineseBuyer(r.country,"/buyer/follow/shop/".concat(r.userShopid,"/"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":"52","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1",referer:"/shop/".concat(r.followMallID,"/followers/?__classic__=1"),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" */*","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid()}});case 9:if(n=e.sent,o=JSON.parse(n),200!==o.status){e.next=19;break}if(!JSON.parse(o.data).success){e.next=16;break}return e.abrupt("return",{code:200,data:!0});case 16:return e.abrupt("return",{code:200,data:!1});case 17:e.next=20;break;case 19:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"关注请求异常 ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyerUNFollow",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["isAddCsrfToken"]=!0,a["userShopid"]=r.userShopid,a["csrfmiddlewaretoken"]=this.guid().replaceAll("-",""),e.next=9,this._this.$shopeemanService.postChineseBuyer(r.country,"/buyer/unfollow/shop/".concat(r.userShopid,"/"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":"52","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1",referer:"/shop/".concat(r.followMallID,"/followers/?__classic__=1"),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" */*","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid()}});case 9:if(n=e.sent,!n){e.next=14;break}return e.abrupt("return",{code:200,data:!0});case 14:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"关注请求异常 ".concat(e.t0)});case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getActiveTimeFollower",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.mallId,a["username"]=r.username,e.next=8,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v4/shop/get_shop_detail?",a,{headers:{"X-API-SOURCE":"pc","Content-Type":"application/xml"}});case 8:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=14;break}return e.abrupt("return",{code:200,data:o.data});case 14:return e.abrupt("return",{code:201,data:[],message:o.error});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"粉丝活跃时间 ".concat(e.t0)});case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowerHostMall",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s,i,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,e.next=10,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.mallId,"/followers/?"),a,{headers:{"Content-type":"text/html; charset=utf-8",referer:"/shop/".concat(r.mallId,"/followers/?__classic__=1"),accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 10:n=e.sent,o=JSON.parse(n).data,s=g(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),i={},l=[];do{i=s.exec(o),null!==(c=i)&&void 0!==c&&c.groups&&l.push(i.groups)}while(i=s.exec(o));if(!n){e.next=20;break}return e.abrupt("return",{code:200,data:l});case 20:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"粉丝请求异常 ".concat(e.t0)});case 26:case"end":return e.stop()}}),e,this,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getShoppComment",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["filter"]=0,a["flag"]=1,a["itemid"]=r.itemid,a["limit"]=52,a["offset"]=r.offset,a["shopid"]=r.shopid,a["type"]=0,e.next=13,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v2/item/get_ratings?",a,{headers:{accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 13:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=19;break}return e.abrupt("return",{code:200,data:o.data});case 19:return e.abrupt("return",{code:201,data:[],message:o.error});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"获取评论 ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeMallinfo",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t,a={},a["mallId"]=r.mallId,a["username"]=r.username,e.next=7,this._this.$shopeemanService.getChinese(r.country,"/api/v4/shop/get_shop_detail?",a,{headers:{"X-API-SOURCE":"pc","Content-Type":"application/xml",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate"}});case 7:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=13;break}return e.abrupt("return",{code:200,data:o.data});case 13:return e.abrupt("return",{code:201,data:[],message:o.error});case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:[],message:"主要店铺信息 ".concat(e.t0)});case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"UserProfile",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,e.next=6,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v2/user/profile/get/",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml"}});case 6:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),!o.error){e.next=12;break}return e.abrupt("return",{code:201,data:"",message:o.error_msg});case 12:return e.abrupt("return",{code:200,data:o.data});case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"用户信息获取 ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowering",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,s,i,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,a["__classic__"]=1,e.next=11,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.mallId,"/following/?"),a,{headers:{referer:"/shop/".concat(r.mallId,"/following/"),"Accept-Encoding":"gzip, deflate"}});case 11:n=e.sent,o=JSON.parse(n).data,s=g(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),i={},l=[];do{i=s.exec(o),null!==(c=i)&&void 0!==c&&c.groups&&l.push(i.groups)}while(i=s.exec(o));if(!n){e.next=21;break}return e.abrupt("return",{code:200,data:l});case 21:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"host粉丝请求异常 ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[1,24]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isLogin",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.platform_mall_id,e.next=6,this._this.$shopeemanService.getChinese(r.country,"/api/v2/login/?",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml"}});case 6:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),!o.errcode){e.next=12;break}return e.abrupt("return",{code:200,data:!1,message:"店铺未登录"});case 12:return e.abrupt("return",{code:200,data:!0});case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"判断用户是否登录请求异常 ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),_=r("0e0b"),v=(r("7703"),r("b719"),{name:"BusinessAnalyseGoodsDiscount",components:{StoreChoose:u["a"],autoFollow:m["a"]},data:function(){return{MallAPIInstance:new x(this),selmallList:[],isSave:!1,dialog_userInfo:!1,userInfo:"",mallIDinfo:"",showlog:!1,tableList:[],dialog_mallSearch:!1,keyword:"裤子",minComment:"50",maxComment:"5000",minLike:"100",maxLike:"10000",minScore:"4.5",maxScore:"5",mallNum:"1",mallSearchList:[],sel_mallSearchList:[],isStop:!1}},watch:{selmallList:{handler:function(e){var t=this;this.tableList=[],e.length&&e.forEach((function(e){var r=Object(c["a"])({},e);r["following"]=0,r["fence"]=0,r["newFollow"]=0,r["cancerFollow"]=0,r["state"]="-",t.tableList.push(r)}))},deep:!0}},created:function(){this.getUserinfo()},methods:{canCerFollowUnFollowMe:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,s,l,c,u,m,p,f,d,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tableList.length){t.next=3;break}return e.$message.warning("请选择要操作的数据"),t.abrupt("return");case 3:e.$refs.Logs.writeLog("正在执行数据.....",!0),r=Object(i["a"])(e.tableList),t.prev=5,r.s();case 7:if((a=r.n()).done){t.next=64;break}return n=a.value,e.$refs.Logs.writeLog("当前操作店铺：【".concat(n.mall_alias_name||n.platform_mall_name,"】"),!0),t.next=12,e.isLogin(n);case 12:if(o=t.sent,o){t.next=15;break}return t.abrupt("continue",62);case 15:return t.next=17,e.getHomeMallData(n);case 17:if(s=t.sent,s){t.next=21;break}return e.$refs.Logs.writeLog("店铺暂无数据"),t.abrupt("continue",62);case 21:return t.next=23,e.getHomeFollowingList(n,s.follower_count);case 23:return l=t.sent,e.$refs.Logs.writeLog("店铺关注用户【".concat(l.length,"】个"),!0),c={},c["country"]=n.country,c["mallId"]=n.platform_mall_id,c["shopid"]=n.platform_mall_id,t.next=31,e.GetShopLikes(c);case 31:u=t.sent,m=u;case 33:if(20!==u.length){t.next=42;break}return c["offset"]+=20,e.$refs.Logs.writeLog("店铺第【".concat(c.offset/20+1,"】页粉丝获取"),!0),t.next=38,e.GetShopLikes(c);case 38:u=t.sent,m=m.concat(u),t.next=33;break;case 42:e.$refs.Logs.writeLog("店铺粉丝获取结束",!0),p=0,f=Object(i["a"])(l),t.prev=45,h=regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=d.value,a=m.indexOf((function(e){return Number(e.userid)===Number(r.userid)})),!(a<0)){t.next=7;break}return t.next=5,e.runCancerAttention(r,n,n.platform_mall_id);case 5:o=t.sent,o&&p++;case 7:case"end":return t.stop()}}),t)})),f.s();case 48:if((d=f.n()).done){t.next=52;break}return t.delegateYield(h(),"t0",50);case 50:t.next=48;break;case 52:t.next=57;break;case 54:t.prev=54,t.t1=t["catch"](45),f.e(t.t1);case 57:return t.prev=57,f.f(),t.finish(57);case 60:e.$refs.Logs.writeLog("成功取关【".concat(p,"】个用户"),!0),e.$refs.Logs.writeLog("店铺执行结束",!0);case 62:t.next=7;break;case 64:t.next=69;break;case 66:t.prev=66,t.t2=t["catch"](5),r.e(t.t2);case 69:return t.prev=69,r.f(),t.finish(69);case 72:e.$refs.Logs.writeLog("数据执行结束",!0);case 73:case"end":return t.stop()}}),t,null,[[5,66,69,72],[45,54,57,60]])})))()},stopSet:function(){this.isStop=!0,this.$refs.Logs.writeLog("正在取消操作")},isLogin:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.MallAPIInstance.isLogin(e);case 2:if(a=r.sent,200!==a.code||!a.data){r.next=7;break}return r.abrupt("return",!0);case 7:return t.$refs.Logs.writeLog("【".concat(e.mall_alias_name||e.platform_mall_name,"】店铺未登录"),!1),r.abrupt("return",!1);case 9:case"end":return r.stop()}}),r)})))()},Unfollower:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.tableList.length){e.next=3;break}return t.$message.warning("请选择要操作的店铺"),e.abrupt("return");case 3:return t.tableList.forEach((function(e){var t=Object(c["a"])({},e);t["following"]=0,t["fence"]=0,t["newFollow"]=0,t["cancerFollow"]=0,t["state"]="-"})),e.next=6,Object(_["c"])(t.tableList,t.UnfollowerFun);case 6:case"end":return e.stop()}}),e)})))()},UnfollowerFun:function(e){var t=arguments,r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,o,s,l,c,u,m,p,f,d,h,g,b,w,x;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:{count:1},a.prev=1,a.next=4,r.isLogin(e);case 4:if(o=a.sent,o){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,r.getHomeMallData(e);case 9:if(s=a.sent,r.$set(e,"following",s?s.account.following_count:0),r.$set(e,"fence",s?s.follower_count:0),s){a.next=15;break}return r.$refs.Logs.writeLog("【".concat(e.mall_alias_name||e.platform_mall_name,"】店铺暂无粉丝")),a.abrupt("return");case 15:return l=[],c=!0,u={},u["country"]=e.country,u["mallId"]=e.platform_mall_id,u["offset"]=0,m=0,a.next=24,r.getHomeFllowering(u);case 24:return p=a.sent,a.next=27,r.filterShopDatas(p,e.country,e.platform_mall_id);case 27:l=a.sent,f=Object(i["a"])(l),a.prev=29,f.s();case 31:if((d=f.n()).done){a.next=44;break}return h=d.value,a.next=36,r.runCancerAttention(h,e,e.platform_mall_id);case 36:if(g=a.sent,g&&m++,!Number(r.userInfo.auto_attention_set.CancelFollowNumber)){a.next=42;break}if(!(m>=Number(r.userInfo.auto_attention_set.FollowNumber))){a.next=42;break}return c=!1,a.abrupt("break",44);case 42:a.next=31;break;case 44:a.next=49;break;case 46:a.prev=46,a.t0=a["catch"](29),f.e(a.t0);case 49:return a.prev=49,f.f(),a.finish(49);case 52:if(!c){a.next=81;break}return u["offset"]+=20,a.next=56,r.getHomeFllowering(u);case 56:return p=a.sent,a.next=59,r.filterShopDatas(p,e.country,e.platform_mall_id);case 59:l=a.sent,b=0;case 61:if(!(b<l.length)){a.next=79;break}return w=l[b],a.next=65,r.runCancerAttention(w,e,e.platform_mall_id);case 65:if(x=a.sent,x&&m++,!Number(r.userInfo.auto_attention_set.FollowNumber)||1!==type){a.next=73;break}if(!(m>=Number(r.userInfo.auto_attention_set.FollowNumber))){a.next=71;break}return c=!1,a.abrupt("break",79);case 71:a.next=76;break;case 73:if(x&&m!==Number(s.account.following_count)){a.next=76;break}return c=!1,a.abrupt("break",79);case 76:b++,a.next=61;break;case 79:a.next=52;break;case 81:a.next=85;break;case 83:a.prev=83,a.t1=a["catch"](1);case 85:return a.prev=85,--n.count,a.finish(85);case 88:case"end":return a.stop()}}),a,null,[[1,83,85,88],[29,46,49,52]])})))()},getHomeMallData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},a["country"]=e.country,a["mallId"]=e.platform_mall_id,r.next=5,t.MallAPIInstance.UserProfile(a);case 5:if(n=r.sent,200!==n.code){r.next=19;break}return o=n.data.username,a["username"]=o,r.next=11,t.MallAPIInstance.getHomeMallinfo(a);case 11:if(s=r.sent,200!==s.code){r.next=16;break}return r.abrupt("return",s.data);case 16:return r.abrupt("return","");case 17:r.next=20;break;case 19:return r.abrupt("return","");case 20:case"end":return r.stop()}}),r)})))()},getHomeFllowering:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},a["country"]=e.country,a["mallId"]=e.mallId,a["offset"]=e.offset,a["limit"]=20,a["offset_of_offset"]=0,a["timeStamp"]=(new Date).getTime(),r.next=9,t.MallAPIInstance.getFllowering(a);case 9:if(n=r.sent,200!==n.code){r.next=14;break}return r.abrupt("return",n.data);case 14:return t.$refs.Logs.writeLog("获取关注失败，".concat(n.message),!1),r.abrupt("return",[]);case 16:case"end":return r.stop()}}),r)})))()},open:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.tableList[0].country,n={mallId:e.shopid.toString()},r.next=4,t.$shopeemanService.getWebUrlLocal(a,n);case 4:o=r.sent,t.$BaseUtilService.openUrl("".concat(o,"/product/").concat(e.shopid,"/").concat(e.itemid));case 6:case"end":return r.stop()}}),r)})))()},test:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},r["country"]="MY",r["mallId"]="268048262",r["userShopid"]="29058527",r["followMallID"]="239487269",t.next=7,e.MallAPIInstance.buyerFollow(r);case 7:t.sent;case 8:case"end":return t.stop()}}),t)})))()},addCancerMall:function(){this.tableList.length?this.dialog_mallSearch=!0:this.$message.warning("请先设置参数")},searchMallInstance:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},a["country"]=e.country,a["mallId"]=e.mallId,a["by"]="relevancy",a["keyword"]=t.keyword,a["limit"]=60,a["newest"]=e.newest,a["order"]="desc",a["page_type"]="search",a["rating_filter"]=t.userInfo.auto_attention_set.MinOrderEvaluation,r.prev=10,r.next=13,t.MallAPIInstance.addCancerMall(a);case 13:if(n=r.sent,200!==n.status){r.next=18;break}return r.abrupt("return",JSON.parse(n.data).items);case 18:return t.$refs.Logs.writeLog("店铺搜索请求失败,230-line:".concat(n.status),!1),r.abrupt("return",[]);case 20:r.next=26;break;case 22:return r.prev=22,r.t0=r["catch"](10),t.$refs.Logs.writeLog("店铺搜索请求失败,234-line:".concat(r.t0),!1),r.abrupt("return",[]);case 26:case"end":return r.stop()}}),r,null,[[10,22]])})))()},filterList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=[],n=new Map,e.forEach((function(e){n.has(e.item_basic.itemid)||n.has(e.item_basic.shopid)||n.set(e.itemid,e)})),a=Object(s["a"])(n.values()),o=a.filter((function(e){var r=null,a=e.item_basic.item_rating.rating_count.reduce((function(e,t,r,a){return e+t}));if(r=Number(e.item_basic.liked_count)>=Number(t.minLike)&&Number(e.item_basic.liked_count)<=Number(t.maxLike)&&e.item_basic.item_rating.rating_star.toFixed(2)>=Number(t.minScore)&&e.item_basic.item_rating.rating_star.toFixed(2)<=Number(t.maxScore)&&a>=Number(t.minComment)&&a<=Number(t.maxComment)&&e.item_basic.stock>=Number(t.userInfo.auto_attention_set.ProductMax),r)return e})),r.abrupt("return",o);case 6:case"end":return r.stop()}}),r)})))()},searchMall:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o,i,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.keyword){e.next=3;break}return t.$message.warning("请输入关键字"),e.abrupt("return");case 3:if(t.showlog=!1,t.$refs.Logs.writeLog("正在获取店铺信息......",!0),r=Number(t.mallNum),!(r>=0)){e.next=43;break}a=[],n=0;case 9:if(!(n<r)){e.next=40;break}return o={},o["country"]=t.tableList[0].country,o["mallId"]=t.tableList[0].platform_mall_id,o["newest"]=60*n,e.next=16,t.searchMallInstance(o);case 16:if(i=e.sent,i.length){e.next=20;break}return t.$refs.Logs.writeLog("暂无数据",!0),e.abrupt("return");case 20:if(!i.length){e.next=35;break}return e.next=23,t.filterList(i);case 23:if(l=e.sent,!l.length){e.next=31;break}if((c=a).push.apply(c,Object(s["a"])(l)),!(a.length>=r)){e.next=29;break}return a=a.splice(0,r),e.abrupt("break",40);case 29:e.next=33;break;case 31:return t.$refs.Logs.writeLog("此关键词暂未搜索到数据，请更换关键词或重试！"),e.abrupt("break",40);case 33:e.next=37;break;case 35:return t.$refs.Logs.writeLog("数据已被过滤空，请更换关键词或放宽搜索条件后重试！"),e.abrupt("break",40);case 37:n++,e.next=9;break;case 40:t.$refs.Logs.writeLog("店铺搜索获取结束"),t.mallSearchList=[],a.forEach((function(e){e.item_basic.totalRate=e.item_basic.item_rating.rating_count.reduce((function(e,t,r,a){return e+t})),t.mallSearchList.push(e.item_basic)}));case 43:case"end":return e.stop()}}),e)})))()},addTargetMall:function(e){if(this.sel_mallSearchList.length){var t=[];this.sel_mallSearchList.forEach((function(e){t.push(e.shopid)})),this.mallIDinfo=t.toString(),this.dialog_mallSearch=!1}else this.$message.warning("请选择店铺")},startCancer:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.mallIDinfo){t.next=3;break}return e.$message.warning("请先获取关注店铺"),t.abrupt("return");case 3:return e.isStop=!1,e.$refs.Logs.writeLog("数据正在处理......",!0),r=e.mallIDinfo.split(","),t.next=8,Object(_["c"])(r,e.getFllowerInfo);case 8:e.$refs.Logs.writeLog("数据处理结束",!0);case 9:case"end":return t.stop()}}),t)})))()},getFllowerInfo:function(e){var t=arguments,r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,s,l,c,u,m,p,f,d,h,g,b,w,x,v,y,k,S,L,I,F,N,A,M,O,$,R,C,j,D,T,U,B,E;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.length>1&&void 0!==t[1]?t[1]:{count:1},a.prev=1,s=Object(i["a"])(r.tableList),a.prev=3,s.s();case 5:if((l=s.n()).done){a.next=190;break}if(c=l.value,r.$set(c,"following",0),r.$set(c,"fence",0),r.$set(c,"newFollow",0),r.$set(c,"cancerFollow",0),r.$set(c,"state","-"),r.$refs.Logs.writeLog("正在查询【".concat(c.mall_alias_name||c.platform_mall_name,"】店铺信息")),!r.isStop){a.next=15;break}return a.abrupt("return");case 15:return a.next=17,r.isLogin(c);case 17:if(u=a.sent,u){a.next=20;break}return a.abrupt("continue",188);case 20:return a.next=22,r.getHomeMallData(c);case 22:if(m=a.sent,r.$set(c,"following",m?m.account.following_count:0),r.$set(c,"fence",m?m.follower_count:0),m){a.next=29;break}return r.$refs.Logs.writeLog("店铺暂无数据",!0),r.$set(c,"state","店铺暂无数据"),a.abrupt("continue",188);case 29:return r.$refs.Logs.writeLog("正在获取店铺关注信息",!0),a.next=32,r.getHomeFollowingList(c,m.account.following_count);case 32:if(p=a.sent,r.$refs.Logs.writeLog("店铺关注用户数：【".concat(p.length,"】"),!0),f={},f["country"]=c.country,f["mallId"]=c.platform_mall_id,f["shopid"]=e,d=c.mall_alias_name||c.platform_mall_name,"0"!==r.userInfo.auto_attention_set.FollowType){a.next=109;break}return h=[],g=!0,f["offset"]=0,b=0,a.next=46,r.GetShopLikes(f);case 46:return w=a.sent,r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】获取第").concat(f.offset/20+1,"页粉丝数据")),a.next=51,r.filterShopDatas(w,c.country,c.platform_mall_id);case 51:h=a.sent,x=Object(i["a"])(h),a.prev=53,y=regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=v.value,!r.isStop){t.next=3;break}return t.abrupt("return",{v:void 0});case 3:if(n=p.findIndex((function(e){return e.ShopId===a.ShopId})),!(n>=0)){t.next=6;break}return t.abrupt("return","continue");case 6:return t.next=8,r.runAttention(a,c,e);case 8:if(o=t.sent,o?b++:(r.$set(c,"newFollow",b),r.$set(c,"state","关注失败"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】关注").concat(a.UserName,"失败,"),!1)),!Number(r.userInfo.auto_attention_set.FollowNumber)){t.next=16;break}if(!(b>=Number(r.userInfo.auto_attention_set.FollowNumber))){t.next=16;break}return r.$set(c,"newFollow",b),r.$set(c,"state","关注成功"),g=!1,t.abrupt("return","break");case 16:case"end":return t.stop()}}),t)})),x.s();case 56:if((v=x.n()).done){a.next=67;break}return a.delegateYield(y(),"t0",58);case 58:if(k=a.t0,"continue"!==k){a.next=61;break}return a.abrupt("continue",65);case 61:if("break"!==k){a.next=63;break}return a.abrupt("break",67);case 63:if("object"!==Object(o["a"])(k)){a.next=65;break}return a.abrupt("return",k.v);case 65:a.next=56;break;case 67:a.next=72;break;case 69:a.prev=69,a.t1=a["catch"](53),x.e(a.t1);case 72:return a.prev=72,x.f(),a.finish(72);case 75:if(!g){a.next=105;break}if(!r.isStop){a.next=78;break}return a.abrupt("return");case 78:return f["offset"]+=20,a.next=81,r.GetShopLikes(f);case 81:return w=a.sent,r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】获取第").concat(f.offset/20+1,"页粉丝数据")),a.next=85,r.filterShopDatas(w,c.country,c.platform_mall_id);case 85:h=a.sent,S=regeneratorRuntime.mark((function t(a){var n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.isStop){t.next=2;break}return t.abrupt("return",{v:void 0});case 2:if(n=h[a],o=p.findIndex((function(e){return e.ShopId===n.ShopId})),!(o>=0)){t.next=6;break}return t.abrupt("return","continue");case 6:return t.next=8,r.runAttention(n,c,e);case 8:if(s=t.sent,s?b++:(r.$set(c,"newFollow",b),r.$set(c,"state","关注失败"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】关注").concat(n.UserName,"失败,"),!1)),!Number(r.userInfo.auto_attention_set.FollowNumber)){t.next=16;break}if(!(b>=Number(r.userInfo.auto_attention_set.FollowNumber))){t.next=14;break}return g=!1,t.abrupt("return","break");case 14:t.next=22;break;case 16:if(s){t.next=22;break}return r.$set(c,"newFollow",b),r.$set(c,"state","关注成功"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】成功关注").concat(b,"个粉丝")),g=!1,t.abrupt("return","break");case 22:case"end":return t.stop()}}),t)})),L=0;case 88:if(!(L<h.length)){a.next=100;break}return a.delegateYield(S(L),"t2",90);case 90:if(I=a.t2,"continue"!==I){a.next=93;break}return a.abrupt("continue",97);case 93:if("break"!==I){a.next=95;break}return a.abrupt("break",100);case 95:if("object"!==Object(o["a"])(I)){a.next=97;break}return a.abrupt("return",I.v);case 97:L++,a.next=88;break;case 100:return r.$set(c,"newFollow",b),a.next=103,Object(_["y"])(1e3*Number(r.userInfo.auto_attention_set.FollowInterval));case 103:a.next=75;break;case 105:r.$set(c,"state","操作结束"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】成功关注").concat(b,"个粉丝")),a.next=187;break;case 109:return F=!0,N=[],A=r.mallSearchList.findIndex((function(t){return t.shopid===Number(e)})),M=r.mallSearchList[A].itemid,O=0,$=0,a.next=117,r.GetShopComment(M,e,c,$);case 117:N=a.sent,R=0;case 119:if(!(R<N.length)){a.next=144;break}return C=N[R],j={},j["ShopId"]=C.shopid,a.next=125,r.runAttention(j,c,e);case 125:if(D=a.sent,!D){a.next=130;break}O++,a.next=135;break;case 130:return r.$set(c,"newFollow",O),r.$set(c,"state","关注失败"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】关注").concat(j.UserName,"失败,"),!1),F=!1,a.abrupt("break",144);case 135:if(!Number(r.userInfo.auto_attention_set.FollowNumber)){a.next=141;break}if(!(O>=Number(r.userInfo.auto_attention_set.FollowNumber))){a.next=141;break}return r.$set(c,"newFollow",O),r.$set(c,"state","关注成功"),F=!1,a.abrupt("break",144);case 141:R++,a.next=119;break;case 144:if(!F){a.next=187;break}return $+=52,a.next=148,r.GetShopComment(M,e,c,$);case 148:N=a.sent,T=0;case 150:if(!(T<N.length)){a.next=183;break}return U=N[T],B={},B["ShopId"]=U.shopid,a.next=156,r.runAttention(B,c,e);case 156:if(E=a.sent,!E){a.next=161;break}O++,a.next=165;break;case 161:return r.$set(c,"newFollow",O),r.$set(c,"state","关注失败"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】关注").concat(B.UserName,"失败,"),!1),a.abrupt("break",183);case 165:if(!Number(r.userInfo.auto_attention_set.FollowNumber)){a.next=174;break}if(!(O>=Number(r.userInfo.auto_attention_set.FollowNumber))){a.next=172;break}return r.$set(c,"newFollow",O),r.$set(c,"state","关注成功"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】成功关注").concat(O,"个粉丝")),F=!1,a.abrupt("break",183);case 172:a.next=180;break;case 174:if(E){a.next=180;break}return r.$set(c,"newFollow",O),r.$set(c,"state","关注成功"),r.$refs.Logs.writeLog("【".concat(c.mall_alias_name||c.platform_mall_name,"】成功关注").concat(O,"个粉丝")),F=!1,a.abrupt("break",183);case 180:T++,a.next=150;break;case 183:return a.next=185,Object(_["y"])(1e3*Number(r.userInfo.auto_attention_set.FollowInterval));case 185:a.next=144;break;case 187:r.$refs.Logs.writeLog("【".concat(d,"】关注结束"),!0);case 188:a.next=5;break;case 190:a.next=195;break;case 192:a.prev=192,a.t3=a["catch"](3),s.e(a.t3);case 195:return a.prev=195,s.f(),a.finish(195);case 198:a.next=203;break;case 200:a.prev=200,a.t4=a["catch"](1),r.$refs.Logs.writeLog("用户信息获取失败-line373，".concat(a.t4),!1);case 203:return a.prev=203,--n.count,a.finish(203);case 206:case"end":return a.stop()}}),a,null,[[1,200,203,206],[3,192,195,198],[53,69,72,75]])})))()},getHomeFollowingList:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a["country"]=e.country,a["mallId"]=e.platform_mall_id,a["offset"]=0,t.next=6,r.getHomeFllowering(a);case 6:if(n=t.sent,o=n,o.length){t.next=10;break}return t.abrupt("return",[]);case 10:if(!(n.length>=20)){t.next=18;break}return a["offset"]+=20,t.next=14,r.getHomeFllowering(a);case 14:n=t.sent,o=o.concat(n),t.next=10;break;case 18:return t.abrupt("return",o);case 19:case"end":return t.stop()}}),t)})))()},GetShopComment:function(e,t,r,a){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var s,i,l,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s={},s["mallId"]=r.platform_mall_id,s["country"]=r.country,s["itemid"]=e,s["offset"]=a,s["shopid"]=t,o.next=8,n.MallAPIInstance.getShoppComment(s);case 8:if(i=o.sent,200!==i.code){o.next=15;break}return l=i.data.ratings||[],c=l.filter((function(e){if(e.rating_star>=Number(n.userInfo.auto_attention_set.MinOrderEvaluation))return e})),o.abrupt("return",c);case 15:return n.$refs.Logs.writeLog("商品评价获取失败".concat(i.message),!1),o.abrupt("return",[]);case 17:case"end":return o.stop()}}),o)})))()},runAttention:function(e,t,r){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={},o["country"]=t.country,o["mallId"]=t.platform_mall_id,o["userShopid"]=e.ShopId,o["followMallID"]=r,n.next=7,a.MallAPIInstance.buyerFollow(o);case 7:if(s=n.sent,200===s.code){n.next=12;break}a.$refs.Logs.writeLog("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(e.UserName,"失败,").concat(s.message),!1),n.next=17;break;case 12:if(!s.data){n.next=16;break}return n.abrupt("return",!0);case 16:a.$refs.Logs.writeLog("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(e.UserName,"失败,").concat(s.message),!1);case 17:return n.abrupt("return",!1);case 18:case"end":return n.stop()}}),n)})))()},runCancerAttention:function(e,t,r){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={},o["country"]=t.country,o["mallId"]=t.platform_mall_id,o["ShopId"]=e.ShopId,o["followMallID"]=r,n.next=7,a.MallAPIInstance.buyerUNFollow(o);case 7:if(s=n.sent,200===s.code){n.next=12;break}return a.$refs.Logs.writeLog("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(e.ShopId,"失败"),!1),n.abrupt("return",!0);case 12:return a.$refs.Logs.writeLog("【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(e.ShopId,"成功"),!0),n.abrupt("return",!1);case 14:case"end":return n.stop()}}),n)})))()},filterShopDatas:function(e,t,r){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var o,s,l,c,u,m,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=[],s=Object(i["a"])(e),n.prev=2,s.s();case 4:if((l=s.n()).done){n.next=14;break}return c=l.value,n.next=8,a.getActiveUser({country:t,mallId:r,userName:c.UserName});case 8:u=n.sent,m=new Date((new Date).toLocaleDateString()).getTime(),p=m-m*(Number(a.userInfo.auto_attention_set.LastLoginDay)-1),u>p&&o.push(c);case 12:n.next=4;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](2),s.e(n.t0);case 19:return n.prev=19,s.f(),n.finish(19);case 22:return n.abrupt("return",o);case 23:case"end":return n.stop()}}),n,null,[[2,16,19,22]])})))()},getActiveUser:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},a["country"]=e.country,a["mallId"]=e.mallId,a["username"]=e.userName,r.next=6,t.MallAPIInstance.getActiveTimeFollower(a);case 6:if(n=r.sent,200!==n.code){r.next=11;break}return r.abrupt("return",1e3*Number(n.data.last_active_time));case 11:return t.$refs.Logs.writeLog("店铺活跃状态获取失败:".concat(n.message),!1),r.abrupt("return","");case 13:case"end":return r.stop()}}),r)})))()},GetShopLikes:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},a["country"]=e.country,a["mallId"]=e.mallId,a["shopid"]=e.shopid,a["offset"]=e.offset,a["limit"]=20,a["offset_of_offset"]=0,a["timeStamp"]=(new Date).getTime(),r.next=10,t.MallAPIInstance.getFllower(a);case 10:if(n=r.sent,200!==n.code){r.next=15;break}return r.abrupt("return",n.data);case 15:return t.$refs.Logs.writeLog("粉丝获取失败，".concat(n.message),!1),r.abrupt("return",[]);case 17:case"end":return r.stop()}}),r)})))()},getUserinfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showlog=!0,t.next=3,e.$api.userSet();case 3:r=t.sent,200===r.data.code?e.userInfo=r.data.data:e.$message.warning("信息获取失败！".concat(r.data.data.message));case 5:case"end":return t.stop()}}),t)})))()},setSave:function(e){this.dialog_userInfo=!1,this.getUserinfo()},setQurey:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dialog_userInfo=!0;case 1:case"end":return t.stop()}}),t)})))()},clearLog:function(){this.$refs.Logs.consoleMsg=""},changeMallList:function(e){this.selmallList=e},handleSelectionChange:function(e){this.sel_mallSearchList=e}}}),y=v,k=(r("639f"),r("2877")),S=Object(k["a"])(y,a,n,!1,null,"4f3e0f41",null);t["default"]=S.exports},8992:function(e,t,r){"use strict";r("4c28")},"90b9":function(e,t,r){},b61e:function(e,t,r){},ca31:function(e,t,r){"use strict";r("90b9")},cf9f:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail"},[r("ul",[r("span",[e._v("  通用设置  ")]),r("li",[r("div",[r("label",[e._v("店铺商品上限：")]),r("el-input",{staticStyle:{width:"50px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.limitgGoods,callback:function(t){e.limitgGoods=t},expression:"limitgGoods"}}),r("label",{staticStyle:{"margin-left":"180px"}},[e._v("最后活跃时间：")]),r("el-input",{staticStyle:{width:"50px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.lastOnline,callback:function(t){e.lastOnline=t},expression:"lastOnline"}}),e._v("  天内 ")],1)]),r("span",[e._v("  关注设置  ")]),r("li",[r("ul",{staticStyle:{"margin-top":"-10px"}},[r("span",{staticStyle:{"margin-left":"-20px"}},[e._v("  关注对象  ")]),r("li",{staticStyle:{width:"450px","margin-left":"-20px"}},[r("el-radio-group",{model:{value:e.followActor,callback:function(t){e.followActor=t},expression:"followActor"}},[r("el-radio",{attrs:{label:"0"}},[e._v("店铺粉丝")]),r("el-radio",{attrs:{label:"1"}},[e._v("店铺评价用户")])],1)],1)]),r("div",{staticStyle:{"margin-bottom":"10px"}},[r("label",[e._v("关注数量：")]),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.followNum,callback:function(t){e.followNum=t},expression:"followNum"}}),e._v(" （0为无限制） "),r("label",{staticStyle:{"margin-left":"110px"}},[e._v("关注间隔：")]),r("el-input",{staticStyle:{width:"50px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.interTime,callback:function(t){e.interTime=t},expression:"interTime"}}),e._v(" 秒 ")],1),r("div",[r("el-checkbox",{staticStyle:{"margin-bottom":"10px"},model:{value:e.market,callback:function(t){e.market=t},expression:"market"}},[e._v("不关注订单评价小于等于 ")]),r("el-input",{staticStyle:{width:"50px"},attrs:{size:"mini"},on:{blur:function(t){e.market=!0}},model:{value:e.marketNum,callback:function(t){e.marketNum=t},expression:"marketNum"}}),e._v(" 的用户 ")],1),r("div",[r("el-checkbox",{model:{value:e.followDay,callback:function(t){e.followDay=t},expression:"followDay"}},[e._v("不关注 ")]),r("el-input",{staticStyle:{width:"75px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},on:{blur:function(t){e.followDay=!0}},model:{value:e.followDayNum,callback:function(t){e.followDayNum=t},expression:"followDayNum"}}),e._v(" 天内关注过的用户 ")],1)]),r("span",[e._v("  取关设置  ")]),r("li",[r("div",[r("label",[e._v("取关数量：")]),r("el-input",{staticStyle:{width:"80px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,0)",size:"mini"},model:{value:e.cancerFollowNum,callback:function(t){e.cancerFollowNum=t},expression:"cancerFollowNum"}}),e._v(" （0为无限制） ")],1)]),r("span",[e._v("  自动关注  ")]),r("li",{staticClass:"orderSet"},[r("div",[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[r("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 开启任务请前往【爆粉神器】添加执行任务的店铺，随后进行参数设置"),r("br"),e._v(" 注意：1.关键词不能为空"),r("br"),e._v("           2.一个站点只能执行一条任务"),r("br"),e._v("           3.同一个站点的任务保存会替换原来的任务"),r("br")]),r("el-checkbox",{model:{value:e.startAddFence,callback:function(t){e.startAddFence=t},expression:"startAddFence"}},[e._v("开启定时刷粉")])],1),r("label",[e._v("每日启动时间  ")]),r("el-time-select",{staticStyle:{width:"100px"},attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:"选择时间",size:"mini"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),r("label",{staticStyle:{"margin-left":"20px"}},[e._v("关注关键词：")]),r("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:e.followKey,callback:function(t){e.followKey=t},expression:"followKey"}}),r("el-checkbox",{staticStyle:{"margin-left":"8px"},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}},[e._v("隐藏日志")])],1)]),r("el-button",{staticStyle:{flex:"1","margin-left":"200px",width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.save()}}},[e._v("保存")])],1),r("Logs",{ref:"Logs",staticClass:"logBox",attrs:{clear:""},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}})],1)},n=[],o=r("1da1"),s=(r("d3b7"),r("25f0"),r("159b"),r("ac1f"),r("1276"),r("d81d"),r("96cf"),r("0e0b")),i={components:{},props:["userInfo","mall"],data:function(){return{userID:"",uid:"",showlog:!0,limitgGoods:"5",lastOnline:"1",followActor:"0",followNum:"100",interTime:"10",market:!0,marketNum:"4.5",followDay:!0,followDayNum:"30",cancerFollowNum:100,startAddFence:!1,startTime:"10:00",followKey:""}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["A"])((function(){return e.userInfo&&e.userInfo.id}));case 2:return t.next=4,e.getUserinfo();case 4:e.initLog();case 5:case"end":return t.stop()}}),t)})))()},methods:{getUserinfo:function(){if(this.userInfo&&this.userInfo.auto_attention_set){this.userInfo;this.limitgGoods=this.userInfo.auto_attention_set.ProductMax,this.lastOnline=this.userInfo.auto_attention_set.LastLoginDay,this.followActor=this.userInfo.auto_attention_set.FollowType.toString(),this.followNum=this.userInfo.auto_attention_set.FollowNumber,this.interTime=this.userInfo.auto_attention_set.FollowInterval,this.marketNum=this.userInfo.auto_attention_set.MinOrderEvaluation,this.market=this.userInfo.auto_attention_set.IsNotFollowMinOrderEvaluation,this.followDayNum=this.userInfo.auto_attention_set.FollowedDay,this.followDay=this.userInfo.auto_attention_set.IsNotFollowFollowedDay,this.cancerFollowNum=this.userInfo.auto_attention_set.CancelFollowNumber,this.startAddFence=this.userInfo.auto_attention_set.IsOpenTimerBrushFans,this.startTime=this.userInfo.auto_attention_set.OpenHour+":"+this.userInfo.auto_attention_set.OpenMinute,this.followKey=this.userInfo.auto_attention_set.KeyWord}},add0:function(e){return e<10?"0"+e:e},formatTime:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),s=t.getMinutes(),i=t.getSeconds();return r+"-"+this.add0(a)+"-"+this.add0(n)+" "+this.add0(o)+":"+this.add0(s)+":"+this.add0(i)},initLog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.userInfo.auto_attention_set.IsOpenTimerBrushFans){t.next=8;break}return t.next=3,window.BaseUtilBridgeService.getAttentionUserTask(e.mall[0].country);case 3:return r=t.sent,t.next=6,window.BaseUtilBridgeService.getAttentionUserLog(r.taskId);case 6:a=t.sent,a.forEach((function(t){e.$refs.Logs.writeLog("".concat(t),!0)}));case 8:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,s,i,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.startAddFence||e.mall){t.next=3;break}return e.$message.warning("请前往【爆粉神器】设置需要执行的任务的店铺"),t.abrupt("return");case 3:if(!e.startAddFence||e.followKey){t.next=7;break}return e.$message.warning("关键词不能为空"),t.abrupt("return");case 7:if(r=e.startTime.split(":"),!e.startAddFence){t.next=33;break}return a={},a["country"]=e.mall[0].country,a["log_message"]=[],t.next=14,window.BaseUtilBridgeService.getAttentionUserTask(e.mall[0].country);case 14:if(n=t.sent,!n){t.next=22;break}return t.next=19,window.BaseUtilBridgeService.deleteAttentionUserTask(n.id);case 19:t.sent,a["log_message"].push("任务删除"),a["created_at"]=e.formatTime((new Date).getTime());case 22:return o={country:e.mall[0].country,mall_ids:e.mall.map((function(e){return e["platform_mall_id"]})).toString(),mall_names:e.mall.map((function(e){return e["mall_alias_name"]||e["platform_mall_name"]})).toString(),product_max:e.limitgGoods,last_login_day:e.lastOnline,open_hour:r[0],open_minute:r[1],key_word:e.followKey,follow_number:e.followNum,follow_interval:e.interTime,is_not_follow_min_order_evaluation:e.market,min_order_evaluation:e.marketNum,is_not_follow_followed_day:e.followDay,followed_day:e.followDayNum,followed_type:e.followActor,cancel_follow_number:e.cancerFollowNum,cancel_follow_sort_type:0},t.next=26,window.BaseUtilBridgeService.saveAttentionUserTask(JSON.stringify(o));case 26:return s=t.sent,s?(a["task_id"]=s.task_id,a["log_message"].push("任务创建成功"),a["created_at"]=e.formatTime((new Date).getTime())):(a["log_message"].push("任务创建失败"),a["created_at"]=e.formatTime((new Date).getTime())),a["log_message"]=a["log_message"].toString(),t.next=32,window.BaseUtilBridgeService.saveAttentionUserLog(a);case 32:t.sent;case 33:return i={ProductMax:e.limitgGoods,LastLoginDay:e.lastOnline,FollowType:e.followActor,FollowNumber:e.followNum,FollowInterval:e.interTime,MinOrderEvaluation:e.marketNum,IsNotFollowMinOrderEvaluation:e.market,FollowedDay:e.followDayNum,IsNotFollowFollowedDay:e.followDay,CancelFollowNumber:e.cancerFollowNum,IsOpenTimerBrushFans:e.startAddFence,OpenHour:r[0],OpenMinute:r[1],KeyWord:e.followKey,IsNotFollowCrossBorderSeller:!1,CancelFollowSortType:"0"},l={content:{autoAttentionSet:JSON.stringify(i)},type:4},t.prev=35,t.next=38,e.$api.setUserinfo(JSON.stringify(l));case 38:c=t.sent,200===c.data.code?e.$message.success("信息修改成功！"):e.$message.warning("信息修改失败！".concat(c.data.message)),t.next=44;break;case 42:t.prev=42,t.t0=t["catch"](35);case 44:e.$emit("isSave",!0);case 45:case"end":return t.stop()}}),t,null,[[35,42]])})))()}}},l=i,c=(r("ca31"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"7f2d7d46",null);t["a"]=u.exports},feb6:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ul",{staticClass:"storeChooseUL"},[e.isMall?r("li",[e._v(e._s(e._f("chineseSite")(e.countryVal)))]):r("li",{style:e.isReset&&"margin-bottom: 5px"},[r("span",{style:{width:e.spanWidth}},[e._v("所属站点：")]),r("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:e.isBanPerform},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?r("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),r("li",{style:e.isReset&&"margin-bottom: 5px"},[r("span",{style:{width:e.spanWidth}},[e._v("店铺分组：")]),r("el-select",{staticClass:"selectBox",attrs:{disabled:e.isBanPerform,multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groupIdList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})})),1)],1),r("li",{style:e.isReset&&"margin-bottom: 5px"},[r("span",{style:{width:e.spanWidth}},[e._v("店铺名称：")]),r("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{disabled:e.isBanPerform,placeholder:"",multiple:!e.isAShop,"collapse-tags":"","filter-method":e.filterMall,size:"mini",filterable:"",clearable:""},on:{"visible-change":function(t){return e.filterMall("")}},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[e.isAShop?e._e():r("el-option",{attrs:{label:"全部",value:""}}),e._l(e.siteShowList,(function(t,a){return e.showMall(t,a)?r("el-option",{key:a,attrs:{label:t.mall_alias_name||t.platform_mall_name,value:t.platform_mall_id}}):e._e()}))],2)],1),e.isReset?r("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[r("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:e.isBanPerform},on:{click:e.reset}},[e._v("　刷　　新　")])],1):e._e()])])},n=[],o=r("1da1"),s=r("b85c"),i=r("2909"),l=(r("96cf"),r("d81d"),r("fb6a"),r("caad"),r("2532"),r("d3b7"),r("25f0"),r("99af"),r("6062"),r("3ca3"),r("ddb0"),r("4de4"),r("159b"),r("c740"),r("7db0"),r("7646")),c=r("2b0e");c["default"].directive("loadmore",{bind:function(e,t){var r=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");r.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?t.value(!0,this):this.scrollTop<30&&t.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(e){this.siteShowList=e},countryVal:{handler:function(e,t){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(e,t){var r=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var a=t.indexOf("")>-1,n=e.indexOf("")>-1;a!==n?this.groupId=n?Object(i["a"])(this.groupIdList.map((function(e){return e.id}))):[]:n?this.groupId=e.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){r.isAllowSet2=!0,r.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(e,t){var r=this;if(this.isAllowSet1){this.isAllowSet1=!1;var a=this.isShowName;if(!this.isAShop){var n=t.includes(""),o=e.includes("");if(n!==o||t.toString()===e.toString()&&this.isShowNameAll)if(o&&(!a||a&&!this.isShowNameAll)){var l=a&&Object(i["a"])(this.siteShowList.map((function(e){return e.platform_mall_id})))||[""].concat(Object(i["a"])(this.siteList.map((function(e){return e.platform_mall_id})))),c=new Set([].concat(Object(i["a"])(l),Object(i["a"])(t)));this.site=Object(i["a"])(c),this.isShowNameAll=!0,a&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(a){var m=a&&Object(i["a"])(this.siteShowList.map((function(e){return e.platform_mall_id}))),p=m.length>this.site.length&&this.site||m,f=m.length>this.site.length&&m||this.site;u=new Set(this.site);var d,h=Object(s["a"])(f);try{for(h.s();!(d=h.n()).done;){var g=d.value;p.includes(g)&&u.delete(g)}}catch(b){h.e(b)}finally{h.f()}u.delete("")}this.site=Object(i["a"])(u)}else o?this.site=e.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1}setTimeout((function(){r.changeMallList(),r.filterMall(a),r.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o,s,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.site=[],a=t.countryVal,n=[],!(t.jsonMallData.length>0)){r.next=7;break}n=t.jsonMallData,r.next=12;break;case 7:return r.next=9,t.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:o=r.sent,n=JSON.parse(o)||[],t.jsonMallData=JSON.parse(o)||[];case 12:if(!(n.length>0)){r.next=17;break}1===e&&(t.siteList=""===a?n:n.filter((function(e){return e.country===a}))),2===e&&(0===t.groupId.length?t.siteList=[]:(t.siteList=[],t.groupId.forEach((function(e){n.forEach((function(r){a?e===r.group_id&&a===r.country&&t.siteList.push(r):e===r.group_id&&t.siteList.push(r)}))})))),r.next=22;break;case 17:return s={country:"",mallGroupIds:""},r.next=20,t.mallListAPIInstance.ddMallGoodsGetMallList(s);case 20:i=r.sent,200===i.code?(t.$appConfig.temporaryCacheInfo("save","mallAllData",i.data),l=i.data||[],t.siteList=l,t.jsonMallData=l,t.siteList=""===a?l:l.filter((function(e){return e.country===a}))):t.$message.error("获取分组、店铺列表失败");case 22:0===t.groupIdList.length&&(t.groupIdList=[{group_name:"全部",id:""}],t.groupId=[""],t.siteList.forEach((function(e){var r=t.groupIdList.findIndex((function(t){return t.id===e.group_id}));e.group_name&&r<0&&(t.groupIdList.push({group_name:e.group_name,id:e.group_id}),t.groupId.push(e.group_id))}))),setTimeout((function(){t.isAllowSet2=!0,t.isAllowSet1=!0,t.site=!t.isAShop&&[""]||""}),10);case 24:case"end":return r.stop()}}),r)})))()},changeMallList:function(){var e=this,t=[],r="";if(this.isAShop){var a=this.siteList.find((function(t){return t.platform_mall_id===e.site}));r=this.site,t.push(a)}else this.site.forEach((function(a){if(a){var n=e.siteList.find((function(e){return e.platform_mall_id===a}));t.push(n),r+=a+","}}));!this.countryVal&&this.groupId.indexOf("")>-1&&(r=t.length!==this.siteList.length&&r||""),this.source?this.$emit("changeMallList",{mallList:t,source:this.source,searchAll:r,country:this.countryVal.toLocaleUpperCase()}):(t["country"]=this.countryVal,this.$emit("changeMallList",t))},filterMall:function(e){var t=this,r=e&&this.isShowName!==e?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){t.isShowName!==e&&(t.mallShowIndex=0),t.isShowName=e||"";var r=t.siteList;e&&(r=t.siteList.filter((function(t){var r=t.mall_alias_name||t.platform_mall_name;return r.includes(e)}))),t.siteShowList=r}),r)},showMall:function(e,t){var r=e.mall_alias_name||e.platform_mall_name,a=this.site[0]===e.platform_mall_id;return a||this.mallShowIndex<=t&&t<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||r.includes(this.isShowName))},loadmoreMall:function(e,t){if(this.siteShowList.length>this.showMallNumber){var r=0;e?(r=this.mallShowIndex+10,r=r<this.siteShowList.length-this.showMallNumber&&r||this.siteShowList.length-this.showMallNumber):(r=this.mallShowIndex-10,r=r>0&&r||0),r!==this.mallShowIndex&&(t.scrollTop=e?t.scrollTop-100:30),this.mallShowIndex=r}}}},m=u,p=(r("8992"),r("2877")),f=Object(p["a"])(m,a,n,!1,null,null,null);t["a"]=f.exports}}]);