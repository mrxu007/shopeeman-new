(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ce676c2"],{"455d":function(e,t,a){"use strict";a("7bf0")},"5daf":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("div",{staticClass:"row",staticStyle:{display:"flex","margin-top":"25px","background-color":"white",padding:"15px 4px",overflow:"auto"}},[a("div",{staticClass:"row2_left",staticStyle:{border:"1px solid rgb(220, 228, 218)","border-radius":"5px",width:"748px"}},[a("span",{staticStyle:{"margin-top":"-7px",display:"block","margin-left":"14px","background-color":"white","text-align":"center",width:"85px"}},[e._v("基础数据配置")]),a("ul",[a("li",[a("storeChoose",{staticStyle:{"margin-left":"-20px",width:"730px"},attrs:{"show-mall-all":!0},on:{changeMallList:e.changeMallList}})],1),a("li",{staticStyle:{"margin-top":"20px","align-items":"center"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getTopTest}},[e._v("搜索任务")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.delTeskFun}},[e._v("批量删除任务")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.stopdTesk}},[e._v("停止创建任务")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}},[e._v("隐藏日志")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.aaa}},[e._v("aaa")])],1),e._m(0)])]),a("div",{staticClass:"row2_right",staticStyle:{border:"1px solid rgb(220, 228, 218)","border-radius":"5px","margin-left":"20px",width:"507px"}},[a("span",{staticStyle:{"margin-top":"-7px",display:"block","margin-left":"14px","background-color":"white","text-align":"center",width:"85px"}},[e._v("置顶任务操作")]),a("ul",{staticStyle:{width:"505px"}},[a("li",[a("div",[e._v(" 置顶时间设置： "),a("el-radio-group",{model:{value:e.set_time,callback:function(t){e.set_time=t},expression:"set_time"}},[a("el-radio",{attrs:{label:"1"}},[e._v("当前时间")]),a("el-radio",{staticStyle:{"margin-left":"11px"},attrs:{label:"2"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{size:"mini",type:"datetime","value-format":"timestamp","picker-options":e.pickerOptions,placeholder:"选择日期时间"},model:{value:e.cloumn_date,callback:function(t){e.cloumn_date=t},expression:"cloumn_date"}})],1)],1)],1)]),a("li",[a("div",[e._v(" 置顶维度设置： "),a("el-radio-group",{model:{value:e.otherConditon,callback:function(t){e.otherConditon=t},expression:"otherConditon"}},[a("el-radio",{attrs:{label:"1"}},[e._v("自定义商品")]),a("el-radio",{attrs:{label:"2"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.saleType,callback:function(t){e.saleType=t},expression:"saleType"}},[a("el-option",{attrs:{label:"默认排序",value:"2"}}),a("el-option",{attrs:{label:"销量从低往高",value:"3"}}),a("el-option",{attrs:{label:"销量从高往低",value:"4"}}),a("el-option",{attrs:{label:"价格从低往高",value:"5"}}),a("el-option",{attrs:{label:"价格从高往低",value:"6"}})],1)],1)],1),"1"===e.otherConditon?a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("添加商品")]):e._e()],1)]),a("li",{staticStyle:{"align-items":"baseline"}},[a("div",[e._v("循环置顶商品个数： "),a("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,0)"},model:{value:e.loopGoodsNum,callback:function(t){e.loopGoodsNum=t},expression:"loopGoodsNum"}}),a("el-button",{staticStyle:{"margin-left":"32px"},attrs:{size:"mini",type:"primary"},on:{click:e.createTeskFun}},[e._v("创建任务")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.refreshTopGoods}},[e._v("重新获取置顶商品")])],1)])])])]),a("div",{staticClass:"tableDetail",staticStyle:{"margin-top":"8px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableList,height:"calc(100vh - 232px)","header-cell-style":{background:"#f7fafa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),a("el-table-column",{attrs:{type:"index",fixed:"",label:"序号"}}),a("el-table-column",{attrs:{prop:"country",label:"站点",align:"center","min-width":"150px",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e._f("chineseSite")(a.country)))]}}])}),a("el-table-column",{attrs:{prop:"mallName",label:"店铺名称",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"top_type",label:"置顶维度",align:"center","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.top_typeList[r.top_type]))])]}}])}),a("el-table-column",{attrs:{prop:"top_total_count",label:"置顶商品总数",align:"center","min-width":"100px"}}),a("el-table-column",{attrs:{prop:"toped_count",label:"已置顶商品数",align:"center","min-width":"100px"}}),a("el-table-column",{attrs:{prop:"created_at",label:"任务创建时间",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"next_top_time",label:"下次置顶时间",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"top_good_ids",label:"置顶商品",align:"center","min-width":"100px","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"result",label:"操作结果",align:"center","min-width":"100px"}}),a("el-table-column",{attrs:{prop:"",label:"历史记录",align:"center","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.checkRecord(r.id)}}},[e._v("查看置顶记录")])]}}])}),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center","min-width":"100px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.delTesk(r.id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination",staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[15,50,100,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"置顶记录",top:"3vh",visible:e.dialogRecord,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"},on:{"update:visible":function(t){e.dialogRecord=t}}},[a("div",[a("el-table",{attrs:{data:e.recordList,"header-cell-style":{background:"#f7fafa"},height:"calc(100vh - 233px)","row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),a("el-table-column",{attrs:{prop:"created_at",label:"记录时间","min-width":"150",sortable:""}}),a("el-table-column",{attrs:{prop:"top_history_msg",label:"历史信息","min-width":"280"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogRecord=!1}}},[e._v("关 闭")])],1)]),a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showlog,callback:function(t){e.showlog=t},expression:"showlog"}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("span",{staticStyle:{color:"red",display:"block","margin-top":"5px"}},[e._v("提示：每个店铺可置顶商品数量大为5个，置顶时间为4小时")])])}],o=a("2909"),i=a("1da1"),s=(a("159b"),a("a9e3"),a("99af"),a("d3b7"),a("ac1f"),a("1276"),a("c740"),a("25f0"),a("3ca3"),a("ddb0"),a("96cf"),a("0b64")),c=a("feb6"),l=a("0e0b"),p=a("a254"),u=(a("c4e3"),{components:{storeChoose:c["a"]},data:function(){return{dialogRecord:!1,stoptoping:!1,createDel:!1,MarketManagerAPIInstance:new p["a"](this),loading:!1,GoodsList:new s["a"](this),top_typeList:{1:"商品ID",2:"默认排序",3:"销量从低往高",4:"销量从高往低",5:"价格从低往高",6:"价格从高往低"},page:1,pageSize:15,total:0,showlog:!0,pickerOptions:{disabledDate:function(e){return e.getTime()<(new Date).getTime()-864e5}},cloumn_date:"",set_time:"1",otherConditon:"2",saleType:"2",loopGoodsNum:"",tableList:[],selectMalllist:[],shopAccountList:[],selectTable:[],topHistoryMsg:[],recordList:[],currentDate:""}},computed:{},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getInfo();case 2:case"end":return t.stop()}}),t)})))()},methods:{refreshTopGoods:function(){this.selectTable.length||this.$message.warning("请选择需要操作的数据!"),"1"===this.otherConditon&&this.$message.warning("商品ID不能为空！"),this.otherConditon},checkRecord:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dialogRecord=!0,r={topTaskId:e},a.next=4,t.$api.getTopHistory(r);case 4:n=a.sent,200===n.data.code?t.recordList=n.data.data.data:t.$refs.Logs.writeLog("置顶记录获取失败");case 6:case"end":return a.stop()}}),a)})))()},getTopTestTable:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showlog=!1,e.$refs.Logs.writeLog("正在获取列表信息......"),r={country:(null===(a=e.selectMalllist[0])||void 0===a?void 0:a.country)||"TH",pageSize:e.pageSize,page:e.page},t.next=5,e.$api.topTask(r);case 5:n=t.sent,200===n.data.code?(e.page=n.data.data.current_page,e.total=n.data.data.total,o=n.data.data.data,o.forEach((function(t){t.mallName=Object(l["a"])(e.shopAccountList,"label","value",t.sys_mall_id)})),e.tableList=o,e.$refs.Logs.writeLog("获取列表信息完毕")):e.$message.error("列表获取失败--".concat(n.message),!1);case 7:case"end":return t.stop()}}),t)})))()},getTopTest:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showlog=!1,e.$refs.Logs.writeLog("正在获取置顶任务......"),t.next=4,e.$api.topTask();case 4:if(a=t.sent,200!==a.data.code){t.next=15;break}return e.page=a.data.data.current_page,e.total=a.data.data.total,r=a.data.data.data,t.next=11,Object(l["c"])(r,e.checkMall);case 11:return t.next=13,e.getTopTestTable();case 13:t.next=16;break;case 15:e.$message.error("任务获取失败--".concat(a.message),!1);case 16:case"end":return t.stop()}}),t)})))()},checkMall:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,o,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.length>1&&void 0!==t[1]?t[1]:{count:1},r.prev=1,o=Object(l["a"])(a.shopAccountList,"label","value",e.sys_mall_id),o){r.next=7;break}return a.$refs.Logs.writeLog("【".concat(e.sys_mall_id,"】店铺不存在"),!1),a.topHistoryMsg.push({topHistoryMsg:"店铺不存在"}),r.abrupt("return");case 7:if(i=new Date(e.next_top_time).getTime(),s=(new Date).getTime(),!(i>s)){r.next=13;break}return a.$refs.Logs.writeLog("【".concat(o,"】店铺,未到置顶时间"),!0),a.topHistoryMsg.push({topHistoryMsg:"未到置顶时间，下次置顶时间为"+e.next_top_time}),r.abrupt("return");case 13:if(!(Number(e.top_total_count)<=Number(e.toped_count))){r.next=17;break}return a.$refs.Logs.writeLog("【".concat(o,"】店铺,已置顶完所有商品")),a.topHistoryMsg.push({topHistoryMsg:"已置顶完所有商品"}),r.abrupt("return");case 17:if(1===Number(e.top_type)){r.next=22;break}return e.page=1,e.mallName=o,r.next=22,a.getMallTopGoods(e);case 22:r.next=27;break;case 24:r.prev=24,r.t0=r["catch"](1),a.$refs.Logs.writeLog("catch--【".concat(e.sys_mall_id,"】,").concat(r.t0),!1);case 27:return r.prev=27,n.count--,r.finish(27);case 30:case"end":return r.stop()}}),r,null,[[1,24,27,30]])})))()},getMallTopGoods:function(e){var t=this;return new Promise(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(r){var n,i,s,c,p,u,d,m,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n={country:e.country,pageNumber:e.page,platform_mall_id:e.sys_mall_id},i={mItem:n,pageSize:48,listType:"all"},"3"===e.top_type&&(i.listOrderType="sales_asc"),"4"===e.top_type&&(i.listOrderType="sales_dsc"),"5"===e.top_type&&(i.listOrderType="price_asc"),"6"===e.top_type&&(i.listOrderType="price_dsc"),t.$refs.Logs.writeLog("获取店铺【".concat(e.mallName,"】商品数据"),!0),s=Number(e.top_total_count)<=48?1:Math.floor(Number(e.top_total_count)/48)+1,c=[],p=0;case 10:if(!(p<s)){a.next=27;break}return i.mItem.pageNumber=p+1,a.prev=12,t.$refs.Logs.writeLog("获取店铺【".concat(e.mallName,"】商品数量为").concat(48*(p+1),",正在获取第").concat(p+1,"页数据"),!0),a.next=16,t.GoodsList.getMpskuList(i);case 16:u=a.sent,200===u.code?(null!==(d=u.data.list)&&void 0!==d&&d.length||(t.$refs.Logs.writeLog("店铺【".concat(e.mallName,"】暂无商品数据")),r()),c.push.apply(c,Object(o["a"])(u.data.list))):(t.$refs.Logs.writeLog("获取店铺【".concat(e.mallName,"】商品数量为").concat(48*(p+1),",第").concat(p+1,"页数据获取失败,").concat(u.data),!1),r()),a.next=24;break;case 20:a.prev=20,a.t0=a["catch"](12),t.$refs.Logs.writeLog("获取店铺【".concat(e.mallName,"】商品数量为").concat(48*(p+1),",第").concat(p+1,"页数据获取失败,catch---").concat(a.t0),!1),r();case 24:p++,a.next=10;break;case 27:return t.$refs.Logs.writeLog("店铺【".concat(e.mallName,"】商品数据获取结束"),!0),m=[],g=e.top_good_ids.split(","),c.forEach((function(t){t.country=e.country,t.sys_mall_id=e.sys_mall_id,t.topTaskId=e.id,t.mallName=e.mallName,t.top_total_count=e.top_total_count,t.toped_count=e.toped_count;var a=g.findIndex((function(e){return Number(e)===t.id})),r=e.top_total_count-e.toped_count>5?5:e.top_total_count-e.toped_count;m.length<r&&a<0&&m.push(t)})),t.topedLength=m.length,a.next=34,Object(l["c"])(m,t.topAction);case 34:a.sent,r();case 36:case"end":return a.stop()}}),a,null,[[12,20]])})));return function(e){return a.apply(this,arguments)}}())},topAction:function(e){var t=arguments,a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,o,i,s,c,l,p,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:{count:1},r.prev=1,o={country:e.country,mallId:e.sys_mall_id,goodsID:e.id},i={list:[{topTaskId:e.topTaskId.toString(),topGoods:[{goodsId:e.id.toString(),isTop:1}]}]},r.next=6,a.MarketManagerAPIInstance.topGoods(o);case 6:if(s=r.sent,0!==s.ecode){r.next=19;break}return i.list[0].topGoods.isTop=1,a.$refs.Logs.writeLog("店铺【".concat(e.mallName,"】商品【").concat(e.sys_mall_id,"】置顶成功"),!0),a.topHistoryMsg.push({topHistoryMsg:"商品【".concat(e.sys_mall_id,"】置顶成功")}),c=[{id:e.topTaskId.toString(),topTotalCount:e.top_total_count,topedCount:e.toped_count+a.topedLength}],r.next=15,a.$api.topTaskUpdate(c);case 15:l=r.sent,200===l.code?(l.data.success,a.$refs.Logs.writeLog("店铺【".concat(e.mallName,"】商品【").concat(e.sys_mall_id,"】更新成功"),!0)):a.$refs.Logs.writeLog("店铺【".concat(e.mallName,"】商品【").concat(e.sys_mall_id,"】更新失败").concat(l.message),!1),r.next=21;break;case 19:a.$refs.Logs.writeLog("店铺【".concat(e.mallName,"】商品【").concat(e.sys_mall_id,"】置顶失败").concat(s.message),!1),a.topHistoryMsg.push({topHistoryMsg:"商品【".concat(e.sys_mall_id,"】】置顶失败").concat(s.message)});case 21:return r.next=23,a.$api.uploadTopGood(i);case 23:return p=r.sent,200!==p.data.code&&a.$refs.Logs.writeLog("【商品".concat(e.id,"】上报置顶商品失败，").concat(p.data.data.errors),!1),a.$refs.Logs.writeLog("【商品".concat(e.id,"】上报置顶商品成功"),!0),u={list:[{topTaskId:e.topTaskId.toString(),topHistory:a.topHistoryMsg}]},r.next=29,a.$api.uploadTopHistory(u);case 29:d=r.sent,200!==d.data.code?a.$refs.Logs.writeLog("【商品".concat(e.id,"】上报置顶商品历史记录失败，").concat(d.data.message),!1):a.$refs.Logs.writeLog("【商品".concat(e.id,"】上报置顶商品历史记录成功"),!0),r.next=36;break;case 33:r.prev=33,r.t0=r["catch"](1),a.$refs.Logs.writeLog("【商品".concat(e.id,"】置顶失败----catch").concat(r.t0),!1);case 36:return r.prev=36,n.count--,r.finish(36);case 39:case"end":return r.stop()}}),r,null,[[1,33,36,39]])})))()},stopdTesk:function(){Object(l["v"])(),this.stoptoping=!0,this.$refs.autoReplyLogs.writeLog("正在停止创建任务")},handleSelectionChange:function(e){this.selectTable=e},delTeskFun:function(){this.selectTable.length?this.delTesk():this.$message.warning("请选择要操作的数据！")},delTesk:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=[],e?r.push(e):t.selectTable.forEach((function(e){r.push(e.id)})),n={ids:r.toString()},a.prev=3,a.next=6,t.$api.topTaskdel(n);case 6:o=a.sent,200===o.data.code?t.$message.success("删除成功"):(i=o.data.data,i.forEach((function(e){t.$refs.Logs.writeLog("【".concat(e,"】"),!1)}))),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),t.$refs.Logs.writeLog("【".concat(a.t0,"】"),!1);case 13:t.getTopTestTable();case 14:case"end":return a.stop()}}),a,null,[[3,10]])})))()},getInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(l["p"])().then((function(t){e.shopAccountList=t,e.getTopTest()}));case 1:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pageSize=e,this.getTopTestTable()},handleCurrentChange:function(e){this.page=e,this.getTopTestTable()},changeMallList:function(e){this.selectMalllist=e},createTeskFun:function(){this.selectMalllist.length?"2"!==this.set_time||this.cloumn_date?this.loopGoodsNum?this.createTesk():this.$message.warning("请设置任务执行的商品个数"):this.$message.warning("请设置任务执行时间"):this.$message.warning("请选择要执行的任务的店铺")},add0:function(e){return e<10?"0"+e:e},formatTime:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,n=t.getDate(),o=t.getHours(),i=t.getMinutes(),s=t.getSeconds();return a+"-"+this.add0(r)+"-"+this.add0(n)+" "+this.add0(o)+":"+this.add0(i)+":"+this.add0(s)},aaa:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={country:"TH",mallId:"213693788",goodsID:10053264472},t.next=3,e.MarketManagerAPIInstance.topGoods(a);case 3:t.sent;case 5:case"end":return t.stop()}}),t)})))()},createTesk:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!("1"!==e.set_time&&e.cloumn_date<(new Date).getTime())){t.next=3;break}return e.$message.warning("请选择正确的创建任务时间"),t.abrupt("return");case 3:e.createDel=!0,a=regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.selectMalllist.findIndex((function(t){return e.tableList[a].sys_mall_id===Number(t.platform_mall_id)})),!(r>=0)){t.next=4;break}return t.next=4,e.delTesk(e.tableList[a].id);case 4:case"end":return t.stop()}}),t)})),r=0;case 6:if(!(r<e.tableList.length)){t.next=11;break}return t.delegateYield(a(r),"t0",8);case 8:r++,t.next=6;break;case 11:return n=[],e.selectMalllist.forEach((function(t){var a={country:t.country,sysMallId:t.platform_mall_id,topType:"1"===e.otherConditon?e.otherConditon:e.saleType,topTotalCount:e.loopGoodsNum,topedCount:"0",nextTopTime:"1"===e.set_time?e.formatTime((new Date).getTime()+144e5):e.formatTime(e.cloumn_date+144e5),result:""};n.push(a)})),o={list:n},t.prev=14,e.showlog=!1,e.$refs.Logs.writeLog("正在创建任务......,请耐心等待几秒",!0),t.next=19,e.$api.topTaskadd(o);case 19:i=t.sent,200===i.data.code?(i.data.data.top_tasks||"",s=i.data.data.success||"",c=i.data.data.error||"",null!==s&&void 0!==s&&s.length&&c.forEach((function(t){e.$refs.Logs.writeLog("".concat(t),!0)})),e.getTopTest()):e.$refs.Logs.writeLog("任务创建--请求失败:".concat(i.data.message),!1),t.next=26;break;case 23:t.prev=23,t.t1=t["catch"](14),e.$refs.Logs.writeLog("任务创建--请求失败--catch".concat(t.t1),!1);case 26:e.createDel=!1;case 27:case"end":return t.stop()}}),t,null,[[14,23]])})))()}}}),d=u,m=(a("455d"),a("2877")),g=Object(m["a"])(d,r,n,!1,null,"6e6c64dc",null);t["default"]=g.exports},"7bf0":function(e,t,a){},a254:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("1da1"),n=a("d4ec"),o=a("bee2"),i=(a("b0c0"),a("a9e3"),a("96cf"),function(){function e(t){Object(n["a"])(this,e),this._this=t}return Object(o["a"])(e,[{key:"topGoods",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.goodsID,o={mallId:r,id:n},e.next=5,this._this.$shopeemanService.postChinese(a,"/api/v3/product/boost_product/?",o,{headers:{"Content-Type":"application/json",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate"}});case 5:return i=e.sent,s=JSON.parse(JSON.parse(i).data),c=s.code,l=s.message,e.abrupt("return",{ecode:c,message:l});case 12:return e.prev=12,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"getSkuList-catch: ".concat(e.t0)});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Mallvoucher",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.offset,o=t.limit,i=t.promotion_type,s={mallId:r,offset:n,limit:o,promotion_type:i},e.next=5,this._this.$shopeemanService.getChinese(a,"/api/marketing/v3/voucher/list/?",s,{headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate"}});case 5:return c=e.sent,l=JSON.parse(c),p=JSON.parse(l.data),u=p.code,d=p.message,e.abrupt("return",{ecode:u,data:p,message:d});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"getSkuList-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"MallvoucherStop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.voucher_id,o={mallId:r,voucher_id:n},e.next=5,this._this.$shopeemanService.putChinese(a,"/api/marketing/v3/voucher/stop/?",o,{headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate"}});case 5:return i=e.sent,s=JSON.parse(i),c=JSON.parse(s.data),l=c.code,p=c.message,e.abrupt("return",{ecode:l,data:c,message:p});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"getSkuList-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"MallvoucherDel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.voucher_id,o={mallId:r,voucher_id:n},e.next=5,this._this.$shopeemanService.deleteChinese(a,"/api/marketing/v3/voucher/?",o,{headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate",referer:"/portal/marketing/vouchers/".concat(n)}});case 5:return i=e.sent,s=JSON.parse(i),c=JSON.parse(s.data),l=c.code,p=c.message,e.abrupt("return",{ecode:l,data:c,message:p});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"getSkuList-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"MallvoucherCreate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p,u,d,m,g,h,f,v,_,b,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.min_price,o=t.name,i=t.value,s=t.end_time,c=t.start_time,l=t.max_value,p=t.discount,u=t.usage_quantity,d=t.claim_quantity,m=t.rule,g=t.voucher_code,h={mallId:r,min_price:n,name:o,value:i,end_time:s,start_time:c,max_value:l,discount:p,usage_quantity:u,claim_quantity:d,rule:{voucher_landing_page:m.voucher_landing_page,reward_type:m.reward_type,hide:m.hide,backend_created:m.backend_created,items:m.items,coin_cashback_voucher:{coin_percentage_real:m.coin_cashback_voucher.coin_percentage_real,max_coin:m.coin_cashback_voucher.max_coin}},voucher_code:g},e.next=5,this._this.$shopeemanService.postChineseReferer(a,"/api/marketing/v3/voucher/?",h,{headers:{"Content-Type":"application/json",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml",referer:"/portal/marketing/vouchers/new?edit=shop"}});case 5:return f=e.sent,v=JSON.parse(f),_=JSON.parse(v.data),b=_.errcode||_.code,w=_.message,e.abrupt("return",{ecode:b,data:_,message:w});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"MallvoucherCreate-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getShoppUserName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.platform_mall_id,n={mallId:r},e.next=5,this._this.$shopeemanService.getChineseReferer(a,"/api/selleraccount/user_info/?",n,{headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json, text/plain, */*",referer:"/portal/settings/shop/profile"}});case 5:return o=e.sent,i=JSON.parse(o),s=JSON.parse(i.data).data,e.abrupt("return",{data:s});case 11:return e.prev=11,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"getShoppUserName-catch: ".concat(e.t0)});case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FollowPrize",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.offset,o=t.limit,i={mallId:r,offset:n,limit:o},e.next=5,this._this.$shopeemanService.getChineseReferer(a,"/api/marketing/v4/follow_prize/list/?",i,{headers:{"Content-Type":"application/json; charset=utf-8",accept:"application/json, text/plain, */*","accept-encoding":"gzip, deflate, br",referer:"/portal/marketing/follow-prize/list"}});case 5:return s=e.sent,c=JSON.parse(s),l=JSON.parse(c.data),p=l.code,u=l.message,e.abrupt("return",{ecode:p,data:l,message:u});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"FollowPrize-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FollowPrizeDetail",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.campaign_id,o={mallId:r,campaign_id:n},e.next=5,this._this.$shopeemanService.getChineseReferer(a,"/api/marketing/v4/follow_prize/?",o,{headers:{accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate"}});case 5:return i=e.sent,s=JSON.parse(i),c=JSON.parse(s.data),l=c.code,p=c.message,e.abrupt("return",{ecode:l,data:c,message:p});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"FollowPrize-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"followPrizeCreate",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p,u,d,m,g,h,f,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.discount,o=t.end_time,i=t.follow_prize_name,s=t.min_spend,c=t.quota,l=t.reward_type,p=t.start_time,u=t.coin_cash_back,d={mallId:r,shopid:Number(r),follow_prize_name:i,start_time:Number(p),end_time:Number(o),quota:Number(c),min_spend:Number(s),reward_type:Number(l),discount:n,coin_cash_back:u},e.next=5,this._this.$shopeemanService.postChineseReferer(a,"/api/marketing/v4/follow_prize/?",d,{headers:{"Content-Type":"application/json",accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml",referer:"/portal/marketing/follow-prize/create"}});case 5:return m=e.sent,g=JSON.parse(m),h=JSON.parse(g.data),f=h.errcode||h.code,v=h.message,e.abrupt("return",{ecode:f,data:h,message:v});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"followPrizeCreate-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"MallPrizeDel",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,o,i,s,c,l,p,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.country,r=t.mallId,n=t.campaign_id,o=t.action,i={mallId:r,campaign_id:n,action:o},e.next=5,this._this.$shopeemanService.postChineseReferer(a,"/api/marketing/v4/follow_prize/operation/?",i,{headers:{"Content-Type":"application/json",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml",referer:"/portal/marketing/follow-prize?tab=list"}});case 5:return s=e.sent,c=JSON.parse(s),l=JSON.parse(c.data),p=l.code,u=l.message,e.abrupt("return",{ecode:p,data:l,message:u});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"MallPrizeDel-catch: ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}())}}]);