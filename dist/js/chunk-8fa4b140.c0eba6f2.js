(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fa4b140"],{1752:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-row",{staticClass:"contaniner"},[l("el-row",{staticClass:"header"},[l("ul",{staticStyle:{"margin-bottom":"10px"}},[l("li",[l("span",[t._v("站点：")]),l("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},t._l(t.siteList,(function(t,e){return l("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),l("li",[l("span",[t._v("店铺分组：")]),l("el-select",{staticClass:"mall",attrs:{placeholder:"请选择分组",multiple:"","collapse-tags":"",clearable:"",size:"mini",filterable:""},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[t.selectall?l("el-option",{attrs:{label:"全部",value:0}}):t._e(),t.selectall?t._e():l("el-option",{attrs:{label:"全部",value:-2}}),t._l(t.gruopList,(function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),l("li",[l("span",[t._v("店铺：")]),l("el-select",{staticClass:"mall",attrs:{placeholder:"请选择店铺",multiple:"","collapse-tags":"",clearable:"",size:"mini",filterable:""},model:{value:t.mall,callback:function(e){t.mall=e},expression:"mall"}},[t.selectall1?l("el-option",{attrs:{label:"全部",value:0}}):t._e(),t.selectall1?t._e():l("el-option",{attrs:{label:"全部",value:-2}}),t._l(t.mallList,(function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),l("li",[l("el-button",{attrs:{type:"primary",disabled:t.Loading1,size:"mini"},on:{click:t.getallinfo}},[t._v("搜索")])],1)]),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading3,expression:"Loading3"}],ref:"plTable",staticStyle:{"margin-top":"10px"},attrs:{"header-align":"center",height:"calc(100vh - 140px)",data:t.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}}},[l("el-table-column",{attrs:{align:"center",label:"店铺名称",width:"160",prop:"mallname"}}),l("el-table-column",{attrs:{prop:"total_item",label:"商品总数",width:"180",align:"center"}}),l("el-table-column",{attrs:{prop:"abnormal_item",label:"待改善商品数",width:"180",align:"center"}}),l("el-table-column",{attrs:{prop:"normal_item",label:"优质商品数",width:"180",align:"center"}}),l("el-table-column",{attrs:{prop:"titlecount",label:"偏短的商品名称数",width:"180",align:"center"}}),l("el-table-column",{attrs:{prop:"categorycount",label:"错误分类数",width:"200",align:"center"}}),l("el-table-column",{attrs:{prop:"descriptioncount",label:"偏短的描述商品数",width:"200",align:"center"}}),l("el-table-column",{attrs:{prop:"imagecount",label:"图片太少商品数",width:"200",align:"center"}}),l("el-table-column",{attrs:{prop:"shippingcount",label:"缺失包裹详情商品数",width:"200",align:"center"}})],1)],1)],1)},i=[],s=l("1da1"),r=(l("96cf"),l("99af"),l("159b"),l("a434"),l("a4d3"),l("e01a"),{data:function(){return{Loading1:!1,Loading3:!1,selectall:!0,selectall1:!0,eidtVisible:!1,allgroupid:[],allmallid:[],tableData:[],tableData1:[],errmall:[],currency:"฿",total:0,site:"TH",siteList:this.$filters.countries_option,group:0,gruopList:[],mall:[],mallList:[],start_time:Date.parse(this.$dayjs(new Date).format("YYYY-MM-DD 00:00:00"))/1e3,end_time:Math.round(new Date/1e3)}},watch:{group:function(t,e){this.mall=[];for(var l=0;l<t.length;l++)if(0===t[l])this.group=this.allgroupid,this.mall=[].concat(this.allmallid),this.selectall=!1;else if(-2===t[l])this.group=[],this.mall=[],this.selectall=!0;else for(var a=0;a<this.mallList.length;a++)t[l]===this.mallList[a].group_id&&this.mall.push(this.mallList[a].value)},mall:function(t,e){for(var l=0;l<t.length;l++)0===t[l]&&(this.mall=this.allmallid,this.selectall1=!1),-2===t[l]&&(this.mall=[],this.selectall1=!0)},site:function(t,e){this.mall=[],this.group=[],this.getInfo(),"MY"===this.site&&(this.currency="RM"),"TW"===this.site&&(this.currency="$"),"VN"===this.site&&(this.currency="₫"),"ID"===this.site&&(this.currency="Rp"),"PH"===this.site&&(this.currency="₱"),"TH"===this.site&&(this.currency="฿"),"SG"===this.site&&(this.currency="$"),"BR"===this.site&&(this.currency="R$"),"MX"===this.site&&(this.currency="MX$"),"CO"===this.site&&(this.currency="$"),"CL"===this.site&&(this.currency="$"),"PL"===this.site&&(this.currency="zł")}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var l,a,i,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l={country:t.site,mallGroupIds:t.group},e.next=3,t.$api.ddMallGoodsGetMallList(l);case 3:if(a=e.sent,t.mallList=[],t.gruopList=[],t.allgroupid=[],t.allmallid=[],200===a.data.code){for(a.data.data.forEach((function(e){e.group_id&&t.gruopList.push({label:e.group_name,value:e.group_id}),e.id&&t.mallList.push({label:e.mall_alias_name?e.mall_alias_name:e.platform_mall_name,value:e.platform_mall_id,group_id:e.group_id})})),i=0;i<t.gruopList.length-1;i++)for(s=i+1;s<t.gruopList.length;s++)t.gruopList[i].value===t.gruopList[s].value&&t.gruopList.splice(s,1);for(r=0;r<t.gruopList.length;r++)t.allgroupid.push(t.gruopList[r].value);for(n=0;n<t.mallList.length;n++)t.allmallid.push(t.mallList[n].value)}else t.$message.warning("店铺列表获取失败！");case 9:case"end":return e.stop()}}),e)})))()},getallinfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var l,a,i,s,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.mall.length>0)){e.next=26;break}t.Loading1=!0,t.Loading3=!0,t.tableData=[],t.exportdata=[],t.errmall=[],l=0;case 7:if(!(l<t.mall.length)){e.next=21;break}return a={mallId:t.mall[l]},e.next=11,t.$shopeemanService.getsalesassistance(t.site,a,{headers:{"Content-Type":"application/json; charset=utf-8"}});case 11:for(i=e.sent,s=void 0,i&&(s=JSON.parse(i)),s.data=JSON.parse(s.data),r=void 0,n=0;n<t.mallList.length;n++)t.mallList[n].value===t.mall[l]&&(r=t.mallList[n].label);200===s.status?(o={},o["total_item"]=s.data.result.summary.total_item,o["abnormal_item"]=s.data.result.summary.abnormal_item,o["normal_item"]=s.data.result.summary.normal_item,o["titlecount"]=s.data.result.data.title.count,o["categorycount"]=s.data.result.data.category.count,o["descriptioncount"]=s.data.result.data.description.count,o["imagecount"]=s.data.result.data.image.count,o["shippingcount"]=s.data.result.data.shipping.count,o["mallname"]=r,t.tableData.push(o)):403===s.status&&t.errmall.push(r);case 18:l++,e.next=7;break;case 21:t.errmall.length>0&&t.$message.error("店铺【".concat(t.errmall,"】未登录")),t.Loading1=!1,t.Loading3=!1,e.next=27;break;case 26:t.$message.warning("请选择店铺！");case 27:case"end":return e.stop()}}),e)})))()}}}),n=r,o=(l("25ae"),l("2877")),c=Object(o["a"])(n,a,i,!1,null,"8da1b504",null);e["default"]=c.exports},"25ae":function(t,e,l){"use strict";l("2fd1")},"2fd1":function(t,e,l){}}]);