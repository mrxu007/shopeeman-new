(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6df5fe02"],{"18f4":function(e,t,a){"use strict";a("dd77")},c412:function(e,t,a){"use strict";a.r(t);var r=a("2909"),n=a("1da1"),s=(a("96cf"),a("a9e3"),a("4de4"),a("159b"),a("99af"),a("0e0b")),i={data:function(){return{exportData:[],is_zero_filter:0,currentPage:1,newform:[],data1:[],tableData:[],data2:[],total:0,pageSize:50,page:1,Loading1:!1,Loading2:!1,Loading3:!1,filter:!1,changes:!1,changes1:!1,primarynum:"",sharedtype:"",rowx:{goods_name:"",sku_name:"",sku_id:"",sku_price:1,newprice:0},rowy:{goods_name:"",sku_name:"",sku_id:"",stock_num:1,id:"",wid:"",sys_sku_id:""},form:{app_uid:"",skuid:"",returnWheareHouseName:"0",systemskuid:"",sku_name:""},returnWheareHouseNameList:[{value:17,label:"泰国存储仓"},{value:27,label:"星卓越菲律宾存储仓"},{value:28,label:"星卓越马来存储仓"},{value:75,label:"超世代（越南仓海外仓）"},{value:110,label:"锦汐越南海外仓"}]}},mounted:function(){this.getoverseaswarehouse(),this.test()},methods:{onsubmit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.changes=!1,a={sku_id:e.rowx.sku_id,app_uid:"",price:Number(e.rowx.newprice)},t.prev=2,t.next=5,e.$XzyNetMessageService.post("xzy.stock.editPrice",a);case 5:a=t.sent,(a=JSON.parse(a)).data=JSON.parse(a.data),200===a.status?e.$message.success("改价成功"):e.$message.error("改价失败".concat(a.data.message)),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(2);case 13:e.getoverseaswarehouse();case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()},shareStock:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Number(e.primarynum)>Number(e.rowy.stock_num)||Number(e.primarynum)<0)return e.$message.warning("请输入有效库存数"),t.abrupt("return");t.next=3;break;case 3:return a={wid:e.rowy.wid,shared_num:e.primarynum,sys_sku_id:e.rowy.sys_sku_id},t.prev=4,t.next=7,e.$XzyNetMessageService.post("xzy.addSharedInventory",a);case 7:a=t.sent,(a=JSON.parse(a)).data=JSON.parse(a.data),200===a.data.code?e.$message.success("数据共享成功"):e.$message.error("数据共享失败".concat(a.data.message)),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(4);case 15:e.changes1=!1,e.getoverseaswarehouse();case 17:case"end":return t.stop()}}),t,null,[[4,13]])})))()},change:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.changes=!0,t.rowx.goods_name=e.goods_name,t.rowx.sku_name=e.sku_name,t.rowx.sku_id=e.sku_id,t.rowx.sku_price=e.sku_price;case 5:case"end":return a.stop()}}),a)})))()},share:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.changes1=!0,t.rowy.goods_name=e.goods_name,t.rowy.sku_name=e.sku_name,t.rowy.sku_id=e.sku_id,t.rowy.stock_num=e.stock_num,t.rowy.id=e.id,t.rowy.wid=e.wid,t.rowy.sys_sku_id=e.sys_sku_id;case 8:case"end":return a.stop()}}),a)})))()},flt:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!0===e.filter?e.is_zero_filter=1:e.is_zero_filter=0,e.getoverseaswarehouse();case 1:case"end":return t.stop()}}),t)})))()},getoverseaswarehouse:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,r,n,s,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.Loading3=!0,a={page_num:e.pageSize,page:e.page,wid:e.form.returnWheareHouseName,sku_id:e.form.skuid,sku_name:e.form.sku_name,is_zero_filter:e.is_zero_filter,type:"query",app_uid:""},t.prev=2,t.next=5,e.$XzyNetMessageService.post("xzy.stock.index",a);case 5:if(i=t.sent,i=JSON.parse(i),200===(r=JSON.parse(i.data)).code){t.next=12;break}e.$message.error(r.message),t.next=29;break;case 12:n=r.data.data||[],e.total=r.data.total,s=0;case 15:if(s<n.length)return n[s].sku_price=n[s].sku_price/100,t.next=19,e.$appConfig.getGlobalCacheInfo("overseasWh",Number(n[s].wid));t.next=28;break;case 19:if(i=t.sent,!JSON.parse(i).warehouse_name){t.next=24;break}n[s].warehouse_name=JSON.parse(i).warehouse_name,t.next=25;break;case 24:return t.abrupt("continue",25);case 25:s++,t.next=15;break;case 28:e.tableData=n;case 29:t.next=33;break;case 31:t.prev=31,t.t0=t.catch(2);case 33:e.Loading3=!1;case 34:case"end":return t.stop()}}),t,null,[[2,31]])})))()},DerivedData:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function a(){var n,i,l,o,c,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.Loading2=!0,t.exportData.length<t.total)return n={page_num:t.pageSize,page:e,wid:t.form.returnWheareHouseName,sys_sku_id:t.form.systemskuid,sku_id:t.form.skuid,sku_name:t.form.sku_name,is_zero_filter:t.is_zero_filter,type:"query",app_uid:""},a.prev=3,a.next=6,t.$XzyNetMessageService.post("xzy.stock.index",n);a.next=37;break;case 6:if(i=a.sent,i=JSON.parse(i),200!==(i=JSON.parse(i.data)).code)return t.$message.error(i.message),a.abrupt("return");a.next=14;break;case 14:l=i.data.data||[],o=0;case 16:if(o<l.length)return l[o].sku_price=l[o].sku_price/100,a.next=20,t.$appConfig.getGlobalCacheInfo("overseasWh",Number(l[o].wid));a.next=29;break;case 20:if(c=a.sent,!JSON.parse(c).warehouse_name){a.next=25;break}l[o].warehouse_name=JSON.parse(c).warehouse_name,a.next=26;break;case 25:return a.abrupt("continue",26);case 26:o++,a.next=16;break;case 29:(c=t.exportData).push.apply(c,Object(r.a)(l)),t.DerivedData(e+1);case 31:a.next=35;break;case 33:a.prev=33,a.t0=a.catch(3);case 35:a.next=41;break;case 37:t.Loading2=!1,u='<tr>\n        <td style="width: 200px; text-align:left;">序列号</td>\n        <td style="width: 200px; text-align:left;">仓库名称</td>\n        <td style="width: 200px; text-align:left;">系统商品编号</td>\n        <td style="width: 200px; text-align:left;">商品编号（SkuId）</td>\n        <td style="width: 200px; text-align:left;">商品名称</td>\n        <td style="width: 200px; text-align:left;">商品规格</td>\n        <td style="width: 200px; text-align:left;">可用库存</td>\n        <td style="width: 200px; text-align:left;">共享库存</td>\n        <td style="width: 200px; text-align:left;">商品单价（RMB/分）</td>\n        <td style="width: 200px; text-align:left;">商品链接</td>\n        <td style="width: 200px; text-align:left;">货架仓位</td>\n        <td style="width: 200px; text-align:left;">库存更新时间</td>\n      </tr>',t.exportData.forEach((function(e,t){u+='\n        <tr>\n          <td style="text-align:left;">'.concat(t+1,'</td>\n          <td style="text-align:left;">').concat(e.warehouse_name||"",'</td>\n          <td style="text-align:left;">').concat(e.sys_sku_id||"",'</td>\n          <td style="text-align:left;">').concat(e.sku_id||"",'</td>\n          <td style="text-align:left;">').concat(e.goods_name||"",'</td>\n          <td style="text-align:left;">').concat(e.sku_name||"",'</td>\n          <td style="text-align:left;">').concat(e.stock_num,'</td>\n          <td style="text-align:left;">').concat(e.shared_num,'</td>\n          <td style="text-align:left;">').concat(e.sku_price||"",'</td>\n          <td style="text-align:left;">').concat(e.sku_url||"",'</td>\n          <td style="text-align:left;">').concat(e.position||"",'</td>\n          <td style="text-align:left;">').concat(e.updated_at||"","</td>\n        </tr>\n        ")})),Object(s.h)("海外仓库存信息",u);case 41:case"end":return a.stop()}}),a,null,[[3,33]])})))()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getoverseaswarehouse()},handleCurrentChange:function(e){this.page=e,this.getoverseaswarehouse()},handleSelectionChange:function(e){this.multipleSelection=e}}};a("18f4"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("仓库名称：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.returnWheareHouseName,callback:function(t){e.$set(e.form,"returnWheareHouseName",t)},expression:"form.returnWheareHouseName"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._l(e.returnWheareHouseNameList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("系统商品编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.systemskuid,callback:function(t){e.$set(e.form,"systemskuid",t)},expression:"form.systemskuid"}})],1),a("li",[a("span",[e._v("商品编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.skuid,callback:function(t){e.$set(e.form,"skuid",t)},expression:"form.skuid"}})],1),a("li",[a("span",[e._v("商品规格：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.sku_name,callback:function(t){e.$set(e.form,"sku_name",t)},expression:"form.sku_name"}})],1),a("li",[a("el-checkbox",{on:{change:e.flt},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[e._v("过滤0库存")])],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:e.Loading1,size:"mini"},on:{click:e.getoverseaswarehouse}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.Loading2},on:{click:function(t){return e.DerivedData(1)}}},[e._v("导出数据")])],1)])]),a("el-row",{staticStyle:{"margin-top":"10px",padding:"4px"},attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.Loading3,expression:"Loading3"}],ref:"plTable",staticStyle:{"margin-top":"20px"},attrs:{"header-align":"center",height:"calc(100vh - 160px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",label:"序列号",width:"100px",type:"index",fixed:""}}),a("el-table-column",{attrs:{align:"center",prop:"warehouse_name",label:"仓库名称","min-width":"150px",fixed:""}}),a("el-table-column",{attrs:{align:"center",prop:"sys_sku_id",label:"系统商品编号","min-width":"130px"}}),a("el-table-column",{attrs:{prop:"sku_id",label:"商品编号（SkuId）","min-width":"140px",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称","min-width":"150px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"sku_name",label:"商品规格","min-width":"150px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"stock_num",label:"可用库存","min-width":"100px",align:"center"}}),a("el-table-column",{attrs:{prop:"shared_num",label:"共享库存","min-width":"110px",align:"center"}}),a("el-table-column",{attrs:{prop:"sku_price",label:"商品单价（RMB）","min-width":"140px",align:"center"}}),a("el-table-column",{attrs:{prop:"sku_url",label:"商品链接","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.open(r.sku_url)}}},[e._v("查看商品链接")])]}}])}),a("el-table-column",{attrs:{prop:"real_image_url",label:"商品图片","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[t.real_image_url?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t.real_image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.real_image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"position",label:"货架仓位","min-width":"120",align:"center"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"库存更新时间","min-width":"150",align:"center"}}),a("el-table-column",{attrs:{label:"操作","min-width":"200",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.change(r)}}},[e._v("改价")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.share(r)}}},[e._v("共享库存")])]}}])})],1),a("el-dialog",{staticClass:"edit-group-dialog",attrs:{visible:e.changes,width:"330px",title:"修改库存价格","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.changes=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名称："}},[e._v(" "+e._s(e.rowx.goods_name)+" ")]),a("el-form-item",{attrs:{label:"商品规格："}},[e._v(" "+e._s(e.rowx.sku_name)+" ")]),a("el-form-item",{attrs:{label:"skuid："}},[e._v(" "+e._s(e.rowx.sku_id)+" ")]),a("el-form-item",{attrs:{label:"原始价格："}},[a("span",{staticStyle:{"font-weight":"600","font-family":"sans-serif","margin-right":"2px"}},[e._v(e._s(e.rowx.sku_price))]),a("span",{staticStyle:{color:"#969393"}},[e._v("RMB")])]),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"新价格："}},[a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,0)"},model:{value:e.rowx.newprice,callback:function(t){e.$set(e.rowx,"newprice",t)},expression:"rowx.newprice"}}),a("span",{staticStyle:{color:"#969393"}},[e._v("RMB")])],1),a("div",{staticStyle:{color:"red","line-height":"18px","margin-left":"20px",width:"235px"}},[e._v("温馨提示：价格修改后，会将以当前商品出货但未发货的订单的拍单金额同步成新价格")]),a("el-form-item",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:e.changePrice}},[e._v("确 定")])],1)],1)],1),a("el-dialog",{staticClass:"edit-group-dialog",attrs:{visible:e.changes1,width:"330px",title:"修改共享库存"},on:{"update:visible":function(t){e.changes1=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名称："}},[e._v(" "+e._s(e.rowy.goods_name)+" ")]),a("el-form-item",{attrs:{label:"商品规格："}},[e._v(" "+e._s(e.rowy.sku_name)+" ")]),a("el-form-item",{attrs:{label:"skuid："}},[e._v(" "+e._s(e.rowy.sku_id)+" ")]),a("el-form-item",{attrs:{label:"可用库存："}},[e._v(" "+e._s(e.rowy.stock_num)+" ")]),a("el-form-item",{attrs:{label:"共享库存："}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,0)",clearable:""},model:{value:e.primarynum,callback:function(t){e.primarynum=t},expression:"primarynum"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary",size:"mini"},on:{click:e.shareStock}},[e._v("确定")])],1)],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[100,200]},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)}),[],!1,null,"7b8cfdc6",null);t.default=i.exports},dd77:function(e,t,a){}}]);