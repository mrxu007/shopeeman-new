(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a86cbdcc"],{"118c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("div",{staticClass:"header-content"},[a("el-col",{staticClass:"header-lft",attrs:{span:4}},[a("ul",[a("li",[a("span",[t._v("站点：")]),a("el-select",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",filterable:""},on:{change:t.getGroup},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[a("el-option",{attrs:{label:"全部",value:0}}),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",[a("span",[t._v("店铺状态：")]),a("el-select",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.mallStausVal,callback:function(e){t.mallStausVal=e},expression:"mallStausVal"}},[a("el-option",{attrs:{label:"全部",value:0}}),t._l(t.mallStatus,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",[a("span",[t._v("店铺分组：")]),a("el-select",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:0}}),a("el-option",{attrs:{label:"无分组",value:-1}}),t._l(t.groupList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",[a("el-select",{staticClass:"unnormal",attrs:{placeholder:"",size:"mini"},model:{value:t.mallSearchConditionVal,callback:function(e){t.mallSearchConditionVal=e},expression:"mallSearchConditionVal"}},t._l(t.mallSearchCondition,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini"},model:{value:t.mallSearchConditionInputVal,callback:function(e){t.mallSearchConditionInputVal=e},expression:"mallSearchConditionInputVal"}})],1)])]),a("el-col",{staticClass:"header-rht",attrs:{span:20}},[a("el-row",{staticClass:"btn-row"},[a("el-checkbox",[t._v("强制登录")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.buttonStatus.login},on:{click:function(e){return t.alotOfLogined(null)}}},[t._v("一键登录")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.importMall("authorization")}}},[t._v("导入店铺")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportMall}},[t._v("导出店铺")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editWaterMall("update")}}},[t._v("修改账号登录密码")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editWaterMall("edit")}}},[t._v("修改店铺水印文字")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handlerSelectTableOperating("openMallBKSetting")}}},[t._v("设置店铺封面")])],1),a("el-row",{staticClass:"btn-row"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:t.buttonStatus.refresh},on:{click:t.refreshStatus}},[t._v("刷新登录状态")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.buttonStatus.async},on:{click:function(e){return t.handlerSelectTableOperating("asyncMallData")}}},[t._v("同步店铺信息")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:""}},[t._v("更新浏览器识别码")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.openDeleteMallDialog}},[t._v("一键解绑店铺")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.buttonStatus.openVacation,disabled:t.buttonStatus.closeVacation},on:{click:function(e){return t.closeOrOpenMallVacation(!0)}}},[t._v("开启店铺休假模式")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.buttonStatus.closeVacation,disabled:t.buttonStatus.openVacation},on:{click:function(e){return t.closeOrOpenMallVacation(!1)}}},[t._v("关闭店铺休假模式")])],1),a("el-row",{staticClass:"btn-row"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getMallList}},[t._v("查询")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:""}},[t._v("批量修改物流方式")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:""}},[t._v("设置退货地址")]),a("el-checkbox",{model:{value:t.hideConsole,callback:function(e){t.hideConsole=e},expression:"hideConsole"}},[t._v("隐藏日志")]),a("li",{staticStyle:{display:"inline-block"}},[a("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.isShowProgress,expression:"isShowProgress"}],staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":16,percentage:t.percentage,status:"success"}})],1)],1),a("span",{staticClass:"res-text"},[t._v("温馨提示：导入新加披站点店铺时，若账号为手机号时，填写模板时请填写完整(带有国家区号)的手机号，否则登录失败")])],1)],1)]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.buttonStatus.mallList,expression:"buttonStatus.mallList"}],ref:"plTable",attrs:{height:"calc(100vh - 245px)",data:t.mallListTemp,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{align:"center",prop:"group_name",label:"分组"}}),a("el-table-column",{attrs:{align:"center",prop:"",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("chineseSite")(a.country))+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"mall_account_info",label:"店铺真实名称"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.mall_account_info.userRealName||a.platform_mall_name)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"platform_mall_id",label:"店铺ID"}}),a("el-table-column",{attrs:{align:"center",prop:"good_mall_status",label:"是否优质店铺"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s("-1"===a.good_mall_status?"否":"是")+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"platform_mall_name",label:"店铺账号"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.mall_account_info.username)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"watermark",label:"店铺水印文字"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.isCheckedWaterMark?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:4},placeholder:"店铺水印"},on:{blur:function(e){return t.updateWateMark(n)}},model:{value:n.watermark,callback:function(e){t.$set(n,"watermark",e)},expression:"row.watermark"}}):a("span",{on:{click:function(t){n.isCheckedWaterMark=!0}}},[a("el-input",{attrs:{disabled:!n.isCheckedWaterMark,size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:2}},model:{value:n.watermark,callback:function(e){t.$set(n,"watermark",e)},expression:"row.watermark"}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"item_limit",label:"店铺额度"}}),a("el-table-column",{attrs:{align:"center",prop:"mall_alias_name",label:"店铺别名"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.isCheckedWaterMark2?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:4},placeholder:"店铺别名"},on:{blur:function(e){return t.updateMallAliasName(n)}},model:{value:n.mall_alias_name,callback:function(e){t.$set(n,"mall_alias_name",e)},expression:"row.mall_alias_name"}}):a("span",{on:{click:function(t){n.isCheckedWaterMark2=!0}}},[a("el-input",{attrs:{disabled:!n.isCheckedWaterMark2,size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:2}},model:{value:n.mall_alias_name,callback:function(e){t.$set(n,"mall_alias_name",e)},expression:"row.mall_alias_name"}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"web_login_info",label:"登录状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{domProps:{innerHTML:t._s(n.LoginInfo)}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"mall_status",label:"店铺状态"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.mallStatusObj[a.mall_status])+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"授权日期","min-width":"120px"}})],1)],1),a("el-dialog",{staticClass:"water-dialog",attrs:{title:"edit"===t.importType?"修改店铺水印文字":"修改账号登录密码",visible:t.waterDialogVisible,width:"612px","before-close":t.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.waterDialogVisible=e}}},[a("div",{staticClass:"header-opt"},[a("el-upload",{ref:"importRef",attrs:{accept:".xls, .xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t.importTemplateEvent,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{data:t.importTemplateData,size:"mini",type:"primary"}},[t._v(" 批量导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1),a("p",{staticClass:"text-label"},[t._v("导入信息:")]),a("div",{staticClass:"text-log"},[a("div",{staticClass:"text-log-content",domProps:{innerHTML:t._s(t.consoleMsg)}})])]),a("el-dialog",{staticClass:"import-mall-dialog",attrs:{title:"店铺导入",visible:t.importMallDialogVisible,width:"1184px","before-close":t.handleClose2,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.importMallDialogVisible=e}}},[a("el-row",[a("div",{staticClass:"header-dialog"},[a("p",[t._v("提示：1、每个店铺的SPC_EC与SPC_SC_TK数据都不一样，请注意区分")]),a("p",[t._v("2、登录识别码为选填项，可在授权异常时填写后重新进行授权操作，来源方式可前往店铺管理---》更新浏览器识别码---》下载教程中查看")])]),a("div",{staticClass:"opt-dialog"},[a("el-upload",{ref:"importRef",attrs:{accept:".xls, .xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t.importTemplateEvent,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{data:t.importTemplateData,size:"mini",type:"primary"}},[t._v(" 批量导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.isStopDisable,disabled:!t.buttonStatus.login},on:{click:function(e){t.isStop=!0}}},[t._v("取消导入")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.downloadTemplate}},[t._v("下载模板")])],1),a("div",{staticClass:"container-dialog"},[a("div",[a("div",{staticClass:"text-log"},[a("div",{staticClass:"text-log-content",domProps:{innerHTML:t._s(t.consoleMsg)}})]),a("div",{staticClass:"text-btn"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:t.buttonStatus.login},on:{click:t.mallAuthorization}},[t._v("店铺授权")])],1)]),a("el-table",{ref:"plTable2",attrs:{height:"calc(100vh - 430px)",data:t.importMallListData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":t.handleSelectionChange2}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{align:"center",prop:"group_name",label:"分组"}}),a("el-table-column",{attrs:{align:"center",prop:"",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("chineseSite")(a.country))+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"userRealName",label:"店铺真实名称"}}),a("el-table-column",{attrs:{align:"center",prop:"platform_mall_name",label:"店铺账号"}}),a("el-table-column",{attrs:{align:"center",prop:"mall_alias_name",label:"店铺别名"}}),a("el-table-column",{attrs:{align:"center",label:"登录识别码",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",[a("p",[t._v("SPC_EC : "),a("el-input",{attrs:{size:"mini"},model:{value:n.SPC_EC,callback:function(e){t.$set(n,"SPC_EC",e)},expression:"row.SPC_EC"}})],1),a("p",[t._v("SPC_SC_TK : "),a("el-input",{attrs:{size:"mini"},model:{value:n.SPC_SC_TK,callback:function(e){t.$set(n,"SPC_SC_TK",e)},expression:"row.SPC_SC_TK"}})],1)])]}}])})],1)],1)])],1),a("el-dialog",{staticClass:"del-mall-dialog",attrs:{title:"解绑店铺","show-close":!1,visible:t.delMallDialog,width:"410px","before-close":t.handleClose2,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.delMallDialog=e}}},[a("div",{staticClass:"contanier-dialog"},[a("h3",[t._v("温馨提示")]),a("div",{staticClass:"text"},[a("p",[t._v("1、解绑店铺的同时会删除店铺对应的订单信息，采购订单信息，仓库订单信息，无法恢复，请谨慎操作；")]),a("p",[t._v("2、请输入确认信息 【删除店铺，后果自负】")])]),a("ul",[a("li",[a("p",[t._v("当前IP：")]),a("p",{staticClass:"li-first"},[t._v(t._s(t.IPVal))])]),a("li",[a("p",[t._v("确认信息：")]),a("el-input",{attrs:{size:"mini",placeholder:"删除店铺，后果自负"},model:{value:t.comfirmText,callback:function(e){t.comfirmText=e},expression:"comfirmText"}})],1),a("div",{staticClass:"text2"},[t._v(" 删除店铺的同时通知仓库订单作废 "),a("el-radio-group",{model:{value:t.delOrderType,callback:function(e){t.delOrderType=e},expression:"delOrderType"}},[a("el-radio",{attrs:{label:0}},[t._v("否")]),a("el-radio",{attrs:{label:1}},[t._v("是(无法恢复)")])],1)],1)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.cancel2}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.chekedDelMall}},[t._v("确 定")])],1)]),a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.hideConsole,callback:function(e){t.hideConsole=e},expression:"hideConsole"}}),a("el-dialog",{staticClass:"mall-BK-Setting-Dialog",attrs:{title:"店铺封面设置",visible:t.mallBKSettingDialog,width:"500px","before-close":t.handleClose3,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(e){t.mallBKSettingDialog=e}}},[a("ul",[a("li",[a("p",[t._v("图片设置：")]),a("el-radio-group",{on:{change:t.selectImageOrigin},model:{value:t.imageOrigin,callback:function(e){t.imageOrigin=e},expression:"imageOrigin"}},[a("el-radio",{attrs:{label:"1"}},[t._v("使用默认图片")]),a("el-radio",{attrs:{label:"2"}},[t._v("使用本地图片")])],1)],1),a("li",[a("p",[t._v("站点选择：")]),a("el-radio-group",{on:{change:t.selectImageSiteVal},model:{value:t.imageSiteVal,callback:function(e){t.imageSiteVal=e},expression:"imageSiteVal"}},[a("el-radio",{attrs:{label:"3"}},[t._v("繁体版")]),a("el-radio",{attrs:{label:"4"}},[t._v("英文版")])],1)],1),"2"===t.imageOrigin?a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"","on-error":t.imgSaveToUrl2,"before-upload":t.beforeAvatarUpload2}},[t.imageUrl?a("img",{staticClass:"avatar",staticStyle:{width:"460px",height:"450px"},attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):a("img",{staticStyle:{width:"460px",height:"450px"},attrs:{src:t.imageUrl}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.setMall}},[t._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:t.cancel3}},[t._v("取 消")])],1)])],1)},l=[],r=a("1da1"),i=(a("96cf"),a("ac1f"),a("1276"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a9"),a("72f7"),a("159b"),a("498a"),a("5319"),a("d81d"),a("25f0"),a("3ca3"),a("ddb0"),a("99af"),a("4de4"),a("b0c0"),a("4d63"),a("7646")),o=a("0e0b"),s=a("1146"),c=a.n(s),u={data:function(){return{height:300,rowHeight:50,mallListAPIInstance:new i["a"](this),consoleMsg:"",buttonStatus:{mallList:!1,login:!1,delMall:!1,refresh:!1,async:!1,openVacation:!1,closeVacation:!1},forceLogin:!1,mallList:[],mallListTemp:[],importMallListData:[],multipleSelection:[],multipleSelection2:[],countryVal:0,countries:this.$filters.countries_option,mallSearchConditionVal:"mallName",mallSearchCondition:[{label:"店铺名称",value:"mallName"},{label:"店铺ID",value:"mallId"},{label:"店铺别名",value:"mallAliasName"}],mallSearchConditionInputVal:"",mallStausVal:0,mallStatus:[{label:"正常",value:1},{label:"冻结",value:2},{label:"禁止",value:3}],mallStatusObj:{0:"正常",1:"正常",2:"冻结",3:"禁止"},groupId:0,groupList:[],waterDialogVisible:!1,importMallDialogVisible:!1,mallBKSettingDialog:!0,imageOrigin:"1",imageSiteVal:"3",imageUrl:"https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png",delMallDialog:!1,importTemplateData:"",IPVal:"",comfirmText:"",delOrderType:1,isStop:!1,isStopDisable:!1,importType:null,hideConsole:!0,isShowProgress:!0,percentage:0,addPercentage:0}},computed:{},watch:{isStop:{handler:function(t){var e=this;this.isStopDisable=!!t,setTimeout((function(){e.isStop=!1}),1e4)}}},created:function(){this.getMallList(),this.getGroup(),this.getIP()},mounted:function(){this.$IpcMain.on("needCaptcha",(function(t){})),this.$IpcMain.on("needIvs",(function(t){}))},methods:{cancel2:function(){this.delMallDialog=!1,this.reset()},cancel3:function(){this.mallBKSettingDialog=!1,this.reset2()},openDeleteMallDialog:function(){var t=this.multipleSelection.length;t?t>10?this.$message.error("解绑店铺最多为：10个/次, 当前选择店铺数为：".concat(t,"个")):this.delMallDialog=!0:this.$message.error("请选择店铺")},selectImageOrigin:function(){"1"===this.imageOrigin?"3"===this.imageSiteVal?this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png":this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/76528659.png":this.imageUrl=""},selectImageSiteVal:function(){"1"===this.imageOrigin&&("3"===this.imageSiteVal?this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png":this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/76528659.png")},imgSaveToUrl2:function(t,e){var a=this,n=(e.raw.type,new FileReader);n.readAsDataURL(e.raw),n.onload=function(){var t=n.result;a.imageUrl=t}},beforeAvatarUpload2:function(t){var e=new FileReader;e.onload=function(t){var e=t.target.result,a=document.createElement("img");a.src=e,a.onload=function(){}},e.readAsDataURL(t);var a="image/png"===t.type,n="image/jpg"===t.type,l="image/jpeg"===t.type,r=a||n||l;return r||this.$message2.error("上传商品图片只能是 PNG、JPG、JPEG 格式!"),r},convertBase64UrlToBlob:function(t){for(var e=t.dataURL,a=t.type,n=window.atob(e.split(",")[1]),l=new ArrayBuffer(n.length),r=new Uint8Array(l),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return new Blob([l],{type:a})},getBase64Image:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0,t.width,t.height);var n=t.src.substring(t.src.lastIndexOf(".")+1).toLowerCase(),l=e.toDataURL("image/"+n);return{code:200,data:{dataURL:l,type:"image/"+n,ext:n}}},getUrlToBolb:function(){var t=this;return new Promise((function(e,a){var n=new Image;n.crossOrigin="",n.src=t.imageUrl;var l=t;n.onload=function(){var t=l.getBase64Image(n);e({code:200,data:t})},n.onerror=function(t){e({code:-2,data:t})}}))},setMall:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.imageUrl){e.next=2;break}return e.abrupt("return",t.$message.error("请上传背景图"));case 2:if(a={},"1"!==t.imageOrigin){e.next=9;break}return e.next=6,t.getUrlToBolb();case 6:a=e.sent,e.next=10;break;case 9:a=t.getBase64Image(t.imageUrl);case 10:200!==a.code?t.$message.error("设置失败：".concat(a.data)):(n=t.multipleSelection,n.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.mallListAPIInstance.get_image_resource_id(n,a.data);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e)})))()},getIP:function(){var t=this;this.$BaseUtilService.getAddressIP().then((function(e){t.IPVal=e})).catch((function(t){}))},chekedDelMall:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="删除店铺，后果自负"===t.comfirmText.replace(/,/,"，").trim(),a){e.next=4;break}return t.$message.error("请填写正确的确认信息再操作"),e.abrupt("return");case 4:if(t.buttonStatus.delMall=!0,n=t.multipleSelection.map((function(t){return t.id})),t.IPVal){e.next=8;break}return e.abrupt("return",t.$message.error("未获取到IP地址,无法操作"));case 8:return l={sysMallIds:n.toString(),ip:t.IPVal,isPushToXzy:t.delOrderType},e.next=11,t.$api.deleteBindMall(l);case 11:if(r=e.sent,200===r.data.code){e.next=16;break}return t.$message.error("解绑店铺失败:  ".concat(r.data.message)),t.buttonStatus.delMall=!1,e.abrupt("return");case 16:t.$message.success("解绑店铺成功"),t.getMallList(),t.cancel2(),t.buttonStatus.delMall=!1;case 20:case"end":return e.stop()}}),e)})))()},reset:function(){this.comfirmText="",this.delOrderType=1},reset2:function(){this.imageOrigin="1",this.imageSiteVal="3"},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange2:function(t){this.multipleSelection2=t},getGroup:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},t.countryVal&&(a["country"]=t.countryVal),e.next=4,t.mallListAPIInstance.getGroup(a);case 4:if(n=e.sent,200===n.code){e.next=8;break}return t.$message.error("获取店铺分组失败"),e.abrupt("return");case 8:t.groupList=n.data;case 9:case"end":return e.stop()}}),e)})))()},mallAuthorization:function(){return this.importMallListData.length?this.multipleSelection2.length?void this.alotOfLogined(this.multipleSelection2):this.$message.error("请勾选店铺"):this.$message.error("请导入店铺")},editWaterMall:function(t){this.importType=t,this.multipleSelection.length||"edit"!==this.importType?this.waterDialogVisible=!0:this.$message.error("请先勾选店铺")},refreshStatus:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.multipleSelection.length){e.next=2;break}return e.abrupt("return",t.$message.error("请选择店铺"));case 2:a=t.multipleSelection.length,n=t.multipleSelection,t.buttonStatus.refresh=!0,n.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n,l){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.mallListAPIInstance.getUserInfo(n);case 2:r=e.sent,200===r.code?n.LoginInfo='<p style="color: green">登录成功</p>':n.LoginInfo='<p style="color: red">未登录(已掉线)</p>',l===a-1&&(t.buttonStatus.refresh=!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))()},handlerSelectTableOperating:function(t){this.multipleSelection.length?this[t](this.multipleSelection):this[t](this.mallList)},openMallBKSetting:function(){var t=this.multipleSelection.length;if(!t)return this.$message.error("请选择店铺");this.mallBKSettingDialog=!0},asyncMallData:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",e.$message("暂无同步数据"));case 2:return e.buttonStatus.async=!0,e.hideConsole=!1,n=t.length,e.percentage=0,e.addPercentage=100/n,a.next=9,Object(o["c"])(t,e.asyncMallInfo);case 9:a.sent,e.percentage=100,e.hideConsole=!0,e.buttonStatus.async=!1,e.getMallList();case 14:case"end":return a.stop()}}),a)})))()},asyncMallInfo:function(t){var e=arguments,a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var l,r,i,o,s,c,u,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return l=e.length>1&&void 0!==e[1]?e[1]:{count:1},r=t.platform_mall_name,n.prev=2,a.$refs.Logs.writeLog("开始同步店铺【".concat(r,"】信息"),!0),i=a.mallListAPIInstance.getMallInfo(t),o=a.mallListAPIInstance.getMallGoodsAmount(t),n.next=8,Promise.all([i,o]);case 8:if(s=n.sent,200===s[0].code){n.next=12;break}return a.$refs.Logs.writeLog("同步店铺【".concat(r,"】信息失败：").concat(s[0].data),!1),n.abrupt("return");case 12:return c=s[0].data,u={sysMallId:t.id,platformMallName:c.shop_name,mallStatus:c.shop_status,itemLimit:500,userEmail:c.user_email,phone:c.phone,userRealName:c.username},200===s[1].code&&(u["itemLimit"]=s[1].data.count_for_limit),n.next=17,a.mallListAPIInstance.updateMallInfo(u);case 17:if(p=n.sent,200===p.code){n.next=21;break}return a.$refs.Logs.writeLog("同步店铺【".concat(r,"】信息失败：").concat(p.data),!1),n.abrupt("return");case 21:a.$refs.Logs.writeLog("同步店铺【".concat(r,"】信息成功"),!0),n.next=27;break;case 24:n.prev=24,n.t0=n["catch"](2),a.$refs.Logs.writeLog("同步店铺【".concat(r,"】信息失败：").concat(n.t0),!1);case 27:return n.prev=27,--l.count,a.percentage+=a.addPercentage,n.finish(27);case 31:case"end":return n.stop()}}),n,null,[[2,24,27,31]])})))()},closeOrOpenMallVacation:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.multipleSelection.length,l=e.multipleSelection,n){a.next=4;break}return a.abrupt("return",e.$message.error("请选择店铺"));case 4:t?e.buttonStatus.openVacation=!0:e.buttonStatus.closeVacation=!0,e.hideConsole=!1,l.forEach(function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(l,r){var i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=l.platform_mall_name,a.next=3,e.mallListAPIInstance.closeOrOpenMallVacation(l,t);case 3:o=a.sent,200===o.code?e.$refs.Logs.writeLog("店铺【".concat(i,"】休闲模式").concat(t?"开启":"关闭","成功"),!0):e.$refs.Logs.writeLog("店铺【".concat(i,"】休闲模式").concat(t?"开启":"关闭","失败：").concat(o.data),!1),r===n-1&&(e.buttonStatus.openVacation=!1,e.buttonStatus.closeVacation=!1,e.hideConsole=!0);case 6:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}());case 7:case"end":return a.stop()}}),a)})))()},alotOfLogined:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l,r,i,o,s,c,u,p,m,d,g,f,h,b,v,_,w,x,y;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.buttonStatus.login){a.next=2;break}return a.abrupt("return");case 2:if(n=1,l=null,r=null,t?(l=t.length,r=t,n=2):(l=e.multipleSelection.length,r=e.multipleSelection),l){a.next=9;break}return e.$message.error("请先勾选店铺"),a.abrupt("return");case 9:e.buttonStatus.login=!0,i=0,o=0;case 12:if(!(o<l)){a.next=81;break}if(s=r[o],c=s.platform_mall_name,1===n?s.LoginInfo="正在登陆中...":e.writeLog("(".concat(o+1,"/").concat(l,")账号【").concat(c,"】开始授权"),!0),!e.forceLogin||1!==n){a.next=23;break}return a.next=19,e.mallListAPIInstance.getUserInfo(s);case 19:if(u=a.sent,200!==u.code){a.next=23;break}return s.LoginInfo='<p style="color: green">快速登录成功</p>',a.abrupt("continue",78);case 23:return a.next=25,e.$shopeemanService.login(s,n);case 25:if(p=a.sent,200===p.code){a.next=29;break}return 1===n?s.LoginInfo='<p style="color: red">登录失败：'.concat(p.data,"</p>"):e.writeLog("(".concat(o+1,"/").concat(l,")账号【").concat(c,"】授权失败：").concat(p.data),!1),a.abrupt("continue",78);case 29:if(m=p.data.mallId,d=p.data.mallUId,g=null,1!==n){a.next=49;break}return a.next=35,e.$appConfig.getGlobalCacheInfo("mallInfo",m);case 35:return f=a.sent,g=JSON.parse(f),h=p.data.Cookie,g.web_login_info["SPC_EC"]=h.SPC_EC,g.web_login_info["sso"]=h.SPC_EC,g.web_login_info["SPC_SC_TK"]=h.SPC_SC_TK,g.web_login_info["token"]=h.SPC_SC_TK,g.web_login_info["ShopeeUid"]=h.ShopeeUid,g.web_login_info["shopeeuid"]=h.ShopeeUid,g.web_login_info["shopid"]=h.shopid,a.next=47,e.$appConfig.updateInfoMall(m,JSON.stringify(g));case 47:a.next=69;break;case 49:return g=p.data.mallInfo_new,a.next=52,e.$appConfig.updateInfoMall(m,JSON.stringify(g));case 52:return a.next=54,e.mallListAPIInstance.isNormalMall(g);case 54:if(b=a.sent,200===b.code&&b.data){a.next=58;break}return e.writeLog("(".concat(o+1,"/").concat(l,")账号【").concat(c,"】授权失败：该账号属于跨境店铺"),!1),a.abrupt("continue",78);case 58:return v={platformMallId:m,platformMallUid:d,mallAccountInfo:JSON.stringify(s.mall_account_info),mallGroup:s.group_name,itemLimit:500,platformMallName:c,mallAliasName:s.mall_alias_name,mallMainName:s.MallMainName,country:s.country,SPC_EC:s.SPC_EC,SPC_SC_TK:s.SPC_SC_TK,mall_type:1},a.next=61,e.mallListAPIInstance.getMallGoodsAmount(g);case 61:return _=a.sent,200===_.code&&(v["itemLimit"]=_.data.count_for_limit),a.next=65,e.mallListAPIInstance.saveMallAuthInfo(v);case 65:if(w=a.sent,200===w.code){a.next=69;break}return e.writeLog("(".concat(o+1,"/").concat(l,")账号【").concat(c,"】授权失败：").concat(w.data),!1),a.abrupt("continue",78);case 69:return x={mallId:m,webLoginInfo:JSON.stringify(p.data.Cookie)},a.next=72,e.mallListAPIInstance.uploadMallCookie(x);case 72:if(y=a.sent,200===y.code){a.next=76;break}return e.writeLog("(".concat(o+1,"/").concat(l,")账号【").concat(c,"】授权失败：上报店铺信息cookie失败"),!1),a.abrupt("continue",78);case 76:i++,1===n?s.LoginInfo='<p style="color: green">登录成功</p>':e.writeLog("(".concat(o+1,"/").concat(l,")账号【").concat(c,"】授权成功"),!0);case 78:o++,a.next=12;break;case 81:2===n&&i&&e.getMallList(),e.buttonStatus.login=!1;case 83:case"end":return a.stop()}}),a)})))()},importMall:function(t){this.importType=t,this.importMallDialogVisible=!0},exportMall:function(){var t=this,e='<tr>\n        <td style="width: 200px; text-align:left;">分组</td>\n        <td style="width: 200px; text-align:left;">站点</td>\n        <td style="width: 200px; text-align:left;">店铺真实名称</td>\n        <td style="width: 200px; text-align:left;">店铺ID</td>\n        <td style="width: 200px; text-align:left;">店铺账号</td>\n        <td style="width: 200px; text-align:left;">店铺水印文字</td>\n        <td style="width: 200px; text-align:left;">店铺额度</td>\n        <td style="width: 200px; text-align:left;">店铺别名</td>\n        <td style="width: 200px; text-align:left;">店铺状态</td>\n        <td style="width: 200px; text-align:left;">授权日期</td>\n      </tr>';this.mallList.map((function(a){var n,l;e+='\n        <tr>\n          <td style="text-align:left;">'.concat(a.group_name||"",'</td>\n          <td style="text-align:left;">').concat(t.$filters.chineseSite(a.country)||"",'</td>\n          <td style="text-align:left;">').concat((null===a||void 0===a||null===(n=a.mall_account_info)||void 0===n?void 0:n.userRealName)||a.platform_mall_name||"",'</td>\n          <td style="text-align:left;">').concat(a.platform_mall_id,'</td>\n          <td style="text-align:left;">').concat(null===a||void 0===a||null===(l=a.mall_account_info)||void 0===l?void 0:l.username,'</td>\n          <td style="text-align:left;">').concat(a.watermark||"",'</td>\n          <td style="text-align:left;">').concat(a.item_limit||"",'</td>\n          <td style="text-align:left;">').concat(a.mall_alias_name||"",'</td>\n          <td style="text-align:left;">').concat(t.mallStatusObj[a.mall_status],'</td>\n          <td style="text-align:left;">').concat(a.created_at,"</td>\n        </tr>\n        ")})),Object(o["g"])("店铺信息",e)},downloadTemplate:function(){var t=this;if("edit"===this.importType){var e='<tr>\n      <td style="width: 200px; text-align:left;">站点</td>\n      <td style="width: 200px; text-align:left;">店铺名称</td>\n      <td style="width: 200px; text-align:left;">店铺ID<span style="color:red">(必填)</span></td>\n      <td style="width: 200px; text-align:left;">店铺文字水印</td>\n      <td style="width: 200px; text-align:left;">分组</td>\n      </tr>';this.multipleSelection.map((function(a){e+='\n        <tr>\n          <td style="text-align:left;">'.concat(t.$filters.chineseSite(a.country),'</td>\n          <td style="text-align:left;">').concat(a.platform_mall_name,'</td>\n          <td style="text-align:left;">').concat(a.platform_mall_id,'</td>\n          <td style="text-align:left;">').concat(a.watermark||"",'</td>\n          <td style="text-align:left;">').concat(a.group_name||"","</td>\n        </tr>\n        ")})),Object(o["g"])("修改店铺水印文字模板",e)}else if("update"===this.importType){var a='<tr>\n        <td style="width: 200px; text-align:left;">SHOPEE店铺ID<span style="color:red">(必填)</span></td>\n        <td style="width: 200px; text-align:left;">店铺登录账号<span style="color:red">(必填)</span></td>\n        <td style="width: 200px; text-align:left;">密码(必填)</td>\n      </tr>';Object(o["g"])("修改店铺密码模板",a)}else{var n='<tr>\n      <td style="width: 400px">站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)<span style="color:red">(必填)</span></td>\n      <td style="width: 300px">账号<span style="color:red">(必填)(如果为手机号，请不要加国家区号)</span></td>\n      <td style="width: 200px">密码<span style="color:red">(必填)</span></span></td>\n      <td style="width: 200px">店铺真实名称<span style="color:red">(必填)</span></span></td>\n      <td style="width: 200px">分组<span style="color:orange">(选填)</span></td>\n      <td style="width: 200px">店铺主体名称<span style="color:red">(需申IP隔离必填)</span></td>\n      <td style="width: 200px">SPC_F<span style="color:red">(浏览识别码)</span></td>\n      <td style="width: 200px">店铺别名<span style="color:orange">(选填)</span></td>\n      </tr>';Object(o["g"])("SHOPEE店铺批量授权模板",n)}},importEditWateNameOrUpdate:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,l,r,i,o,s,c,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.importTemplateData.length,"edit"!==t.importType){e.next=14;break}return n={lists:[]},t.importTemplateData.forEach((function(e,l){if(e["店铺ID(必填)"]){var r=t.mallListAPIInstance.getMallID(e["店铺ID(必填)"]+"");if(r){var i={sysMallId:r,watermark:e["店铺文字水印"]};n["lists"].push(i)}else t.writeLog("(".concat(l+1,"/").concat(a,") 店铺平台ID填写有误"))}else t.writeLog("(".concat(l+1,"/").concat(a,") 店铺ID(必填)"))})),e.next=6,t.mallListAPIInstance.updateWatermark(n);case 6:if(l=e.sent,200===l.code){e.next=10;break}return t.writeLog("修改失败:".concat(l.data),!1),e.abrupt("return");case 10:t.getMallList(),t.writeLog("修改成功",!0),e.next=51;break;case 14:if("update"!==t.importType){e.next=51;break}r=0,i=0,o=0;case 18:if(!(o<a)){e.next=49;break}if(s={sysMallId:"",password:"",username:""},c=t.importTemplateData[o],c["SHOPEE店铺ID(必填)"]){e.next=24;break}return t.writeLog("(".concat(o+1,"/").concat(a,")店铺ID不能为空")),e.abrupt("continue",46);case 24:if(c["店铺登录账号(必填)"]){e.next=27;break}return t.writeLog("(".concat(o+1,"/").concat(a,")密码不能为空")),e.abrupt("continue",46);case 27:if(c["密码(必填)"]){e.next=30;break}return t.writeLog("(".concat(o+1,"/").concat(a,")店铺账号不能为空")),e.abrupt("continue",46);case 30:if(u=t.mallListAPIInstance.getMallID(c["SHOPEE店铺ID(必填)"]+""),u){e.next=34;break}return t.writeLog("(".concat(o+1,"/").concat(a,") 店铺平台ID填写有误")),e.abrupt("continue",46);case 34:return s["sysMallId"]=u,s["username"]=c["店铺登录账号(必填)"],s["password"]=c["密码(必填)"],e.next=39,t.mallListAPIInstance.updateUserPassword(s);case 39:if(p=e.sent,200===p.code){e.next=44;break}return t.writeLog("(".concat(o+1,"/").concat(a,")修改失败:").concat(p.data),!1),i++,e.abrupt("continue",46);case 44:r++,t.writeLog("(".concat(o+1,"/").concat(a,")修改成功"),!0);case 46:o++,e.next=18;break;case 49:t.writeLog("共导入店铺【".concat(a,"】个,成功【").concat(r,"】个, 失败【").concat(i,"】个"),!0),t.getMallList();case 51:t.importTemplateData=null;case 52:case"end":return e.stop()}}),e)})))()},updateMallAliasName:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isCheckedWaterMark2=!1,n={lists:[{sysMallId:t.id,mallAliasName:t.mall_alias_name}]},a.next=4,e.mallListAPIInstance.updateMallAliasName(n);case 4:if(l=a.sent,200===l.code){a.next=8;break}return e.$message.error("修改失败:".concat(l.data),!1),a.abrupt("return");case 8:e.$message.success("修改成功",!0);case 9:case"end":return a.stop()}}),a)})))()},updateWateMark:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isCheckedWaterMark=!1,n={lists:[{sysMallId:t.id,watermark:t.watermark}]},a.next=4,e.mallListAPIInstance.updateWatermark(n);case 4:if(l=a.sent,200===l.code){a.next=8;break}return e.$message.error("修改失败:".concat(l.data),!1),a.abrupt("return");case 8:e.$message.success("修改成功",!0);case 9:case"end":return a.stop()}}),a)})))()},importMallName:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,l,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.importTemplateData.length,n=[],l=function(e){if(t.isStop)return t.writeLog("取消导入",!1),"break";var l=t.importTemplateData[e];if(!l["站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"])return t.writeLog("(".concat(e+1,"/").concat(a,")未找到站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"),!1),"continue";if(!l["账号(必填)(如果为手机号，请不要加国家区号)"])return t.writeLog("(".concat(e+1,"/").concat(a,")未找到账号(必填)(如果为手机号，请不要加国家区号)"),!1),"continue";if(!l["密码(必填)"])return t.writeLog("(".concat(e+1,"/").concat(a,")未找到密码(必填)"),!1),"continue";if(!l["店铺真实名称(必填)"])return t.writeLog("(".concat(e+1,"/").concat(a,")未找到店铺真实名称(必填)"),!1),"continue";var r=t.countries.filter((function(t){return t.label===l["站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"]}));if(!r.length)return t.writeLog("(".concat(e+1,"/").concat(a,")未找到[").concat(l["站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"],"],站点填写有误"),!1),"continue";var i=l["密码(必填)"],o="".concat(l["账号(必填)(如果为手机号，请不要加国家区号)"]),s=l["店铺别名(选填)"]||"",c=l["分组(选填)"]||"",u=l["店铺主体名称(需申IP隔离必填)"]||"",p=l["店铺真实名称(必填)"],m={id:0,group_name:c,country:r[0].value,platform_mall_name:o,platform_mall_id:"",platform_mall_uid:"",MallMainName:u,mall_account_info:{password:i+"",username:o,userRealName:p,subsiteindex:0},item_limit:500,mall_group_uid:0,mall_group_id:0,watermark:"",created_at:"",mall_alias_name:s,mall_status:1,good_mall_status:"-1",web_login_info:"",mall_remark:"",mall_type:"",userRealName:p,SPC_EC:"",SPC_SC_TK:""};n.push(m)},r=0;case 4:if(!(r<a)){e.next=13;break}if(i=l(r),"break"!==i){e.next=8;break}return e.abrupt("break",13);case 8:if("continue"!==i){e.next=10;break}return e.abrupt("continue",10);case 10:r++,e.next=4;break;case 13:t.importMallListData=n,t.writeLog("导入成功, 共【".concat(t.importMallListData.length,"】条数据"),!0),t.importTemplateData=null;case 16:case"end":return e.stop()}}),e)})))()},importTemplateEvent:function(t){var e=this,a={0:t.raw};if(/\.(xls|xlsx)$/.test(a[0].name.toLowerCase()))if(a.length<=0)this.writeLog("表格为空",!1);else{var n=new FileReader;n.onload=function(a){var n=a.target.result,l=c.a.read(n,{type:"binary"}),r=l.SheetNames[0],i=c.a.utils.sheet_to_json(l.Sheets[r]);e.importTemplateData=i,i=null,e.writeLog("正在读取中...",!0),"edit"===e.importType?e.importEditWateNameOrUpdate():"authorization"===e.importType?e.importMallName():"update"===e.importType?e.importEditWateNameOrUpdate():e.writeLog("【".concat(t.name,"】该模板不符合要求,请下载指定模板"),!1),e.$refs.importRef.value=""},n.readAsBinaryString(a[0])}else this.writeLog("上传格式不对,请上传xls、xls格式的文件",!1)},getMallList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a={},!t.buttonStatus.mallList){e.next=3;break}return e.abrupt("return");case 3:return t.buttonStatus.mallList=!0,t.countryVal&&(a["country"]=t.countryVal),t.mallSearchConditionInputVal&&(a[t.mallSearchConditionVal]=t.mallSearchConditionInputVal),a["groupId"]=t.groupId,t.mallStausVal&&(a["isFilterFrozen"]=t.mallStausVal),e.next=10,t.mallListAPIInstance.getMallList(a);case 10:if(n=e.sent,200===n.code){e.next=14;break}return t.$message.error("获取店铺列表失败: ".concat(n.data)),e.abrupt("return");case 14:t.mallList=n.data,t.mallListTemp=t.mallList,t.buttonStatus.mallList=!1;case 17:case"end":return e.stop()}}),e)})))()},handleClose:function(t){t(),this.consoleMsg=""},handleClose2:function(t){t(),this.importMallListData=[],this.consoleMsg=""},handleClose3:function(t){t(),this.reset2()},writeLog:function(t,e,a){if(t){var n=e?"green":"red";a&&(n=a);var l=this.dateFormat(new Date(Date.now()),"hh:mm:ss");this.consoleMsg='<p style="color:'.concat(n,'">').concat(l,":").concat(t,"</p>")+this.consoleMsg}},dateFormat:function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e}}},p=u,m=(a("4948"),a("2877")),d=Object(m["a"])(p,n,l,!1,null,"174e0c16",null);e["default"]=d.exports},4948:function(t,e,a){"use strict";a("959b")},"959b":function(t,e,a){}}]);