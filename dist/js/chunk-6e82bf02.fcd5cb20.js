(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e82bf02"],{1134:function(e,t,a){"use strict";a("a6fc")},"118c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("div",{staticClass:"header-content"},[a("el-col",{staticClass:"header-lft",attrs:{span:4}},[a("ul",[a("li",[a("span",[e._v("站点：")]),a("el-select",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",filterable:""},on:{change:e.getMallList},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("店铺状态：")]),a("el-select",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.mallStausVal,callback:function(t){e.mallStausVal=t},expression:"mallStausVal"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.mallStatus,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("店铺分组：")]),a("el-select",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini",filterable:""},on:{change:e.getMallList},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"无分组",value:-1}}),e._l(e.groupList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("el-select",{staticClass:"unnormal",attrs:{placeholder:"",size:"mini"},model:{value:e.mallSearchConditionVal,callback:function(t){e.mallSearchConditionVal=t},expression:"mallSearchConditionVal"}},e._l(e.mallSearchCondition,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"unnormal2",attrs:{placeholder:"",size:"mini"},model:{value:e.mallSearchConditionInputVal,callback:function(t){e.mallSearchConditionInputVal=t},expression:"mallSearchConditionInputVal"}})],1)])]),a("el-col",{staticClass:"header-rht",attrs:{span:20}},[a("el-row",{staticClass:"btn-row"},[a("el-checkbox",{model:{value:e.forceLogin,callback:function(t){e.forceLogin=t},expression:"forceLogin"}},[e._v("强制登录")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.login},on:{click:function(t){return e.alotOfLogined(null)}}},[e._v("一键登录")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.importMall("authorization")}}},[e._v("导入店铺")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportMall}},[e._v("导出店铺")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editWaterMall("update")}}},[e._v("修改账号登录密码")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editWaterMall("edit")}}},[e._v("修改店铺水印文字")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.updateBK},on:{click:function(t){return e.handlerSelectTableOperating("openMallBKSetting")}}},[e._v("设置店铺封面")])],1),a("el-row",{staticClass:"btn-row"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.refresh},on:{click:e.refreshStatus}},[e._v("刷新登录状态")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.async},on:{click:function(t){return e.handlerSelectTableOperating("asyncMallData")}}},[e._v("同步店铺信息")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.codeDialogVisible=!0,e.getMallCodeData()}}},[e._v(" 更新浏览器识别码 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openDeleteMallDialog}},[e._v("一键解绑店铺")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.openVacation,disabled:e.buttonStatus.closeVacation},on:{click:function(t){return e.closeOrOpenMallVacation(!0)}}},[e._v("开启店铺休假模式")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.closeVacation,disabled:e.buttonStatus.openVacation},on:{click:function(t){return e.closeOrOpenMallVacation(!1)}}},[e._v("关闭店铺休假模式")])],1),a("el-row",{staticClass:"btn-row"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getMallList}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openUpdateExpressdialog}},[e._v("批量修改物流方式")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.countryVal},on:{click:function(t){e.addressDialog=!0}}},[e._v("批量设置店铺地址")]),a("el-checkbox",{model:{value:e.hideConsole,callback:function(t){e.hideConsole=t},expression:"hideConsole"}},[e._v("隐藏日志")]),a("li",{staticStyle:{display:"inline-block"}},[a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.isShowProgress,expression:"isShowProgress"}],staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":16,percentage:e.percentage,status:"success"}})],1)],1),a("span",{staticClass:"res-text"},[e._v("温馨提示：导入新加披站点店铺时，若账号为手机号时，填写模板时请填写完整(带有国家区号)的手机号，否则登录失败")])],1)],1)]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.buttonStatus.mallList,expression:"buttonStatus.mallList"}],ref:"plTable",attrs:{height:"calc(100vh - 245px)",data:e.mallListTemp,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{align:"center",prop:"group_name",label:"分组"}}),a("el-table-column",{attrs:{align:"center",prop:"",label:"站点"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"mall_account_info",label:"店铺真实名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.mall_account_info.userRealName||a.platform_mall_name)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"platform_mall_id",label:"店铺ID"}}),a("el-table-column",{attrs:{align:"center",prop:"good_mall_status",label:"是否优质店铺"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s("-1"===a.good_mall_status?"否":"是")+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"platform_mall_name",label:"店铺账号"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.mall_account_info.username)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"watermark",label:"店铺水印文字"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.isCheckedWaterMark?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:4},placeholder:"店铺水印"},on:{blur:function(t){return e.updateWateMark(n)}},model:{value:n.watermark,callback:function(t){e.$set(n,"watermark",t)},expression:"row.watermark"}}):a("span",{on:{click:function(e){n.isCheckedWaterMark=!0}}},[a("el-input",{attrs:{disabled:!n.isCheckedWaterMark,size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:2}},model:{value:n.watermark,callback:function(t){e.$set(n,"watermark",t)},expression:"row.watermark"}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"item_limit",label:"店铺额度"}}),a("el-table-column",{attrs:{align:"center",prop:"mall_alias_name",label:"店铺别名"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.isCheckedWaterMark2?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:4},placeholder:"店铺别名"},on:{blur:function(t){return e.updateMallAliasName(n)}},model:{value:n.mall_alias_name,callback:function(t){e.$set(n,"mall_alias_name",t)},expression:"row.mall_alias_name"}}):a("span",{on:{click:function(e){n.isCheckedWaterMark2=!0}}},[a("el-input",{attrs:{disabled:!n.isCheckedWaterMark2,size:"mini",type:"textarea",resize:"none",autosize:{minRows:2,maxRows:2}},model:{value:n.mall_alias_name,callback:function(t){e.$set(n,"mall_alias_name",t)},expression:"row.mall_alias_name"}})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"web_login_info",label:"登录状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{innerHTML:e._s(n.LoginInfo)}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"mall_status",label:"店铺状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.mallStatusObj[a.mall_status])+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"授权日期","min-width":"120px"}})],1)],1),a("el-dialog",{staticClass:"water-dialog",attrs:{title:"edit"===e.importType?"修改店铺水印文字":"修改账号登录密码",visible:e.waterDialogVisible,width:"612px","before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.waterDialogVisible=t}}},[a("div",{staticClass:"header-opt"},[a("el-upload",{ref:"importRef",attrs:{accept:".xls, .xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.importTemplateEvent,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{data:e.importTemplateData,size:"mini",type:"primary"}},[e._v(" 批量导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadTemplate}},[e._v("下载模板")])],1),a("p",{staticClass:"text-label"},[e._v("导入信息:")]),a("div",{staticClass:"text-log"},[a("div",{staticClass:"text-log-content",domProps:{innerHTML:e._s(e.consoleMsg)}})])]),a("el-dialog",{staticClass:"import-mall-dialog",attrs:{title:"店铺导入",visible:e.importMallDialogVisible,width:"1184px","before-close":e.handleClose2,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.importMallDialogVisible=t}}},[a("el-row",[a("div",{staticClass:"header-dialog"},[a("p",[e._v("提示：1、每个店铺的SPC_EC与SPC_SC_TK数据都不一样，请注意区分")]),a("p",[e._v("2、登录识别码为选填项，可在授权异常时填写后重新进行授权操作，来源方式可前往店铺管理---》更新浏览器识别码---》下载教程中查看")])]),a("div",{staticClass:"opt-dialog"},[a("el-upload",{ref:"importRef",attrs:{accept:".xls, .xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.importTemplateEvent,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{data:e.importTemplateData,size:"mini",type:"primary"}},[e._v(" 批量导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.isStopDisable,disabled:!e.buttonStatus.login},on:{click:function(t){e.isStop=!0}}},[e._v("取消导入")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadTemplate}},[e._v("下载模板")])],1),a("div",{staticClass:"container-dialog"},[a("div",[a("div",{staticClass:"text-log"},[a("div",{staticClass:"text-log-content",domProps:{innerHTML:e._s(e.consoleMsg)}})]),a("div",{staticClass:"text-btn"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.login},on:{click:e.mallAuthorization}},[e._v("店铺授权")])],1)]),a("el-table",{ref:"plTable2",attrs:{height:"calc(100vh - 430px)",data:e.importMallListData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange2}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{align:"center",prop:"group_name",label:"分组"}}),a("el-table-column",{attrs:{align:"center",prop:"",label:"站点"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"userRealName",label:"店铺真实名称"}}),a("el-table-column",{attrs:{align:"center",prop:"platform_mall_name",label:"店铺账号"}}),a("el-table-column",{attrs:{align:"center",prop:"mall_alias_name",label:"店铺别名"}}),a("el-table-column",{attrs:{align:"center",label:"登录识别码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[a("p",[e._v("SPC_EC : "),a("el-input",{attrs:{size:"mini"},model:{value:n.SPC_EC,callback:function(t){e.$set(n,"SPC_EC",t)},expression:"row.SPC_EC"}})],1),a("p",[e._v("SPC_SC_TK : "),a("el-input",{attrs:{size:"mini"},model:{value:n.SPC_SC_TK,callback:function(t){e.$set(n,"SPC_SC_TK",t)},expression:"row.SPC_SC_TK"}})],1)])]}}])})],1)],1)])],1),a("el-dialog",{staticClass:"del-mall-dialog",attrs:{title:"解绑店铺","show-close":!1,visible:e.delMallDialog,width:"410px","before-close":e.handleClose2,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.delMallDialog=t}}},[a("div",{staticClass:"contanier-dialog"},[a("h3",[e._v("温馨提示")]),a("div",{staticClass:"text"},[a("p",[e._v("1、解绑店铺的同时会删除店铺对应的订单信息，采购订单信息，仓库订单信息，无法恢复，请谨慎操作；")]),a("p",[e._v("2、请输入确认信息 【删除店铺，后果自负】")])]),a("ul",[a("li",[a("p",[e._v("当前IP：")]),a("p",{staticClass:"li-first"},[e._v(e._s(e.IPVal))])]),a("li",[a("p",[e._v("确认信息：")]),a("el-input",{attrs:{size:"mini",placeholder:"删除店铺，后果自负"},model:{value:e.comfirmText,callback:function(t){e.comfirmText=t},expression:"comfirmText"}})],1),a("div",{staticClass:"text2"},[e._v(" 删除店铺的同时通知仓库订单作废 "),a("el-radio-group",{model:{value:e.delOrderType,callback:function(t){e.delOrderType=t},expression:"delOrderType"}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是(无法恢复)")])],1)],1)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancel2}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.chekedDelMall}},[e._v("确 定")])],1)]),a("el-dialog",{staticClass:"code-mall-dialog",attrs:{title:"批量更新浏览器识别码",visible:e.codeDialogVisible,width:"1010px","before-close":e.handleClose4,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.codeDialogVisible=t}}},[a("span",{staticClass:"tip"},[e._v("温馨提示：1、浏览器识别码，用户防止店铺频繁接收手机验证码，需区分站点       2、每个店铺的SPC_EC与SPC_SC_TK数据都不一样，请注意区分")]),a("ul",[a("li",[a("span",{staticStyle:{width:"54px"}},[e._v("站点：")]),a("el-select",{attrs:{disabled:e.isUpdateCode,placeholder:"",size:"mini",filterable:""},on:{change:e.queryMallCode},model:{value:e.codeCountryVal,callback:function(t){e.codeCountryVal=t},expression:"codeCountryVal"}},e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticStyle:{width:"50px"}},[e._v("店铺ID：")]),a("el-input",{staticStyle:{width:"118px"},attrs:{oninput:"value=value.replace(/\\s+/g,'')",size:"mini",clearable:"",disabled:e.isUpdateCode},model:{value:e.mallCodeIdVal,callback:function(t){e.mallCodeIdVal=t},expression:"mallCodeIdVal"}})],1),a("li",[a("el-button",{attrs:{disabled:e.isUpdateCode,type:"primary",size:"mini"},on:{click:e.queryMallCode}},[e._v("查 询")])],1),a("li",[a("span",{staticStyle:{width:"120px"}},[e._v("游览器识别码：")]),a("el-input",{attrs:{disabled:e.isUpdateCode,oninput:"value=value.replace(/\\s+/g,'')",size:"mini",clearable:""},model:{value:e.browserCodeVal,callback:function(t){e.browserCodeVal=t},expression:"browserCodeVal"}})],1),a("li",[a("el-button",{attrs:{disabled:e.isUpdateCode,type:"primary",size:"mini"},on:{click:e.batchUpdateList}},[e._v("批量更新列表")]),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("下载教程")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{height:"420",data:e.mallCodeData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"站点"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"platform_mall_name",label:"店铺名称"}}),a("el-table-column",{attrs:{width:"100",align:"center",prop:"platform_mall_id",label:"店铺ID"}}),a("el-table-column",{attrs:{width:"90",align:"center",prop:"",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.web_login_info.spcf_update_time)+" ")]}}])}),a("el-table-column",{attrs:{width:"380",align:"center",prop:"",label:"浏览器识别码"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"SPC_F:"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:1},model:{value:n.web_login_info.SPC_F,callback:function(t){e.$set(n.web_login_info,"SPC_F",t)},expression:"row.web_login_info.SPC_F"}})],1),a("el-form-item",{attrs:{label:"SPC_EC:"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:1},model:{value:n.web_login_info.SPC_EC,callback:function(t){e.$set(n.web_login_info,"SPC_EC",t)},expression:"row.web_login_info.SPC_EC"}})],1),a("el-form-item",{attrs:{label:"SPC_SC_TK:"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:1},model:{value:n.web_login_info.SPC_SC_TK,callback:function(t){e.$set(n.web_login_info,"SPC_SC_TK",t)},expression:"row.web_login_info.SPC_SC_TK"}})],1)],1)]}}])}),a("el-table-column",{attrs:{width:"90",align:"center",prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateCodeData(n,1)}}},[e._v("单个更新")])]}}])}),a("el-table-column",{attrs:{width:"80","show-overflow-tooltip":"",align:"center",label:"操作状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{style:n.color&&"color:"+n.color},[e._v(e._s(n.status))])]}}])})],1),a("div",{staticClass:"batch-but"},[a("el-button",{attrs:{loading:e.isUpdateCode,type:"primary",size:"mini"},on:{click:function(t){return e.updateCodeData(e.mallCodeData,2)}}},[e._v("批量上传")])],1)],1),a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.hideConsole,callback:function(t){e.hideConsole=t},expression:"hideConsole"}}),a("el-dialog",{staticClass:"mall-BK-Setting-Dialog",attrs:{title:"店铺封面设置",visible:e.mallBKSettingDialog,width:"500px","before-close":e.handleClose3,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(t){e.mallBKSettingDialog=t}}},[a("ul",[a("li",[a("p",[e._v("图片设置：")]),a("el-radio-group",{on:{change:e.selectImageOrigin},model:{value:e.imageOrigin,callback:function(t){e.imageOrigin=t},expression:"imageOrigin"}},[a("el-radio",{attrs:{label:"1"}},[e._v("使用默认图片")]),a("el-radio",{attrs:{label:"2"}},[e._v("使用本地图片")])],1)],1),a("li",[a("p",[e._v("站点选择：")]),a("el-radio-group",{on:{change:e.selectImageSiteVal},model:{value:e.imageSiteVal,callback:function(t){e.imageSiteVal=t},expression:"imageSiteVal"}},[a("el-radio",{attrs:{label:"3"}},[e._v("繁体版")]),a("el-radio",{attrs:{label:"4"}},[e._v("英文版")])],1)],1),"2"===e.imageOrigin?a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"","on-error":e.imgSaveToUrl2,"before-upload":e.beforeAvatarUpload2}},[e.imageUrl?a("img",{staticClass:"avatar",staticStyle:{width:"460px",height:"450px"},attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):a("img",{staticStyle:{width:"460px",height:"450px"},attrs:{src:e.imageUrl}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.BatchUpdateMallBk}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:e.cancel3}},[e._v("取 消")])],1)]),a("el-dialog",{staticClass:"mall-express-Dialog",attrs:{title:"批量修改物流方式",visible:e.batchExpressDialog,width:"500px","before-close":e.handleClose5,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.batchExpressDialog=t}}},[a("div",{staticClass:"container"},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.LogisticsList,(function(t,n,r){return a("el-collapse-item",{key:r,attrs:{title:n,name:n}},e._l(t,(function(t,n){return a("div",{key:n,staticClass:"father-class"},[a("div",{staticClass:"sub1-class",on:{click:function(a){return e.changeSub(t)}}},[e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"sub2-class"},[a("el-checkbox",{model:{value:t.isChecked,callback:function(a){e.$set(t,"isChecked",a)},expression:"item2.isChecked"}})],1)])})),0)})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.buttonStatus.getExpress2},on:{click:e.BatchUpdateMallExpress}},[e._v("确 定")]),a("el-button",{attrs:{size:"mini"},on:{click:e.cancel4}},[e._v("取 消")])],1)]),a("div",{staticClass:"storeAddress_dialog"},[a("el-dialog",{attrs:{title:"设置店铺地址",visible:e.addressDialog,top:"10vh",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addressDialog=t}}},[a("div",{staticClass:"dialog_box"},[a("div",{staticClass:"dialog_item"},[a("div",{staticClass:"item_name"},[e._v("全名")]),a("div",{staticClass:"item_content"},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressQuery.name,callback:function(t){e.$set(e.addressQuery,"name",t)},expression:"addressQuery.name"}})],1)]),a("div",{staticClass:"dialog_item"},[a("div",{staticClass:"item_name"},[e._v("电话号码")]),a("div",{staticClass:"item_content"},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressQuery.phone,callback:function(t){e.$set(e.addressQuery,"phone",t)},expression:"addressQuery.phone"}})],1)]),a("h2",{staticStyle:{margin:"10px 0"}},[e._v("地址")]),a("div",{staticClass:"dialog_item"},[a("div",{staticClass:"item_name"},[e._v("地区")]),a("div",{staticClass:"item_content"},[a("div",{staticClass:"inputDiv",on:{click:function(t){e.isAddress=!e.isAddress}}},[e._v(e._s(e.addressQuery.city))])]),e.isAddress?a("div",{staticClass:"dialog_mask"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.addressQuery.mask,callback:function(t){e.$set(e.addressQuery,"mask",t)},expression:"addressQuery.mask"}},[a("el-tab-pane",{attrs:{label:"州/省",name:"0"}},[a("div",{staticClass:"mask"},[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block"}}),e._l(e.addressList[0],(function(t){return a("el-button",{key:t.id,staticStyle:{"margin-top":"5px"},attrs:{type:"text",size:"mini"},on:{click:function(a){e.addressLevel=t}}},[e._v(e._s(t.name))])}))],2)]),e.maskNumber>1?a("el-tab-pane",{attrs:{label:"城市",name:"1",disabled:!(e.addressQuery.mask>=1||e.addressQuery.city.split("/").length>1)}},[a("div",{staticClass:"mask"},[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block"}}),e._l(e.addressList[1],(function(t){return e.addressList[1]?a("el-button",{key:t.id,staticStyle:{"margin-top":"5px"},attrs:{type:"text",size:"mini"},on:{click:function(a){e.addressLevel=t}}},[e._v(e._s(t.name))]):e._e()}))],2)]):e._e(),e.maskNumber>2?a("el-tab-pane",{attrs:{label:"区",name:"2",disabled:!(e.addressQuery.mask>=2||e.addressQuery.city.split("/").length>2)}},[a("div",{staticClass:"mask"},[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block"}}),e._l(e.addressList[2],(function(t){return e.addressList[2]?a("el-button",{key:t.id,staticStyle:{"margin-top":"5px"},attrs:{type:"text",size:"mini"},on:{click:function(a){e.addressLevel=t}}},[e._v(e._s(t.name))]):e._e()}))],2)]):e._e(),e.maskNumber>3?a("el-tab-pane",{attrs:{label:"镇",name:"3",disabled:!(e.addressQuery.mask>=3||e.addressQuery.city.split("/").length>3)}},[a("div",{staticClass:"mask"},[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block"}}),e._l(e.addressList[3],(function(t){return e.addressList[3]?a("el-button",{key:t.id,staticStyle:{"margin-top":"5px"},attrs:{type:"text",size:"mini"},on:{click:function(a){e.addressLevel=t}}},[e._v(e._s(t.name))]):e._e()}))],2)]):e._e()],1)],1):e._e()]),a("div",{staticClass:"dialog_item"},[a("div",{staticClass:"item_name"},[e._v("详细地址")]),a("div",{staticClass:"item_content"},[a("el-input",{attrs:{size:"mini",type:"textarea",resize:"none",rows:"3"},model:{value:e.addressQuery.address,callback:function(t){e.$set(e.addressQuery,"address",t)},expression:"addressQuery.address"}})],1)]),a("div",{staticClass:"dialog_item"},[a("div",{staticClass:"item_name"},[e._v("邮编号码")]),a("div",{staticClass:"item_content"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择邮编号码"},model:{value:e.addressQuery.zip_code,callback:function(t){e.$set(e.addressQuery,"zip_code",t)},expression:"addressQuery.zip_code"}},e._l(e.addressQueryNumber,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)]),a("div",{staticClass:"dialog_item"},[a("el-checkbox",{staticStyle:{margin:"5px 0"},attrs:{label:"设为默认地址"},model:{value:e.addressQuery.default,callback:function(t){e.$set(e.addressQuery,"default",t)},expression:"addressQuery.default"}}),a("br"),a("el-checkbox",{staticStyle:{margin:"5px 0"},attrs:{label:"设为取件地址"},model:{value:e.addressQuery.take,callback:function(t){e.$set(e.addressQuery,"take",t)},expression:"addressQuery.take"}}),a("br"),a("el-checkbox",{staticStyle:{margin:"5px 0"},attrs:{label:"设为回邮地址"},model:{value:e.addressQuery.backMail,callback:function(t){e.$set(e.addressQuery,"backMail",t)},expression:"addressQuery.backMail"}})],1),a("div",{staticClass:"dialog_item"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelAddresses}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.confirmAddresses}},[e._v("确定")])],1)])])],1)],1)},r=[],l=a("2909"),s=a("1da1"),i=(a("96cf"),a("b0c0"),a("ac1f"),a("1276"),a("4de4"),a("159b"),a("99af"),a("c19f"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a9"),a("72f7"),a("b64b"),a("d81d"),a("498a"),a("5319"),a("25f0"),a("3ca3"),a("ddb0"),a("4d63"),a("7646")),o=a("0e0b"),c=a("1146"),u=a.n(c),d={data:function(){return{LogisticsList:{},activeNames:[],height:300,rowHeight:50,mallListAPIInstance:new i["a"](this),consoleMsg:"",buttonStatus:{updateBK:!1,mallList:!1,login:!1,delMall:!1,refresh:!1,async:!1,openVacation:!1,closeVacation:!1,getExpress:!1,getExpress2:!1},forceLogin:!1,mallList:[],mallListTemp:[],importMallListData:[],multipleSelection:[],multipleSelection2:[],countryVal:"",countries:this.$filters.countries_option,mallSearchConditionVal:"mallName",mallSearchCondition:[{label:"店铺名称",value:"mallName"},{label:"店铺ID",value:"mallId"},{label:"店铺别名",value:"mallAliasName"}],mallSearchConditionInputVal:"",mallStausVal:"",mallStatus:[{label:"正常",value:1},{label:"冻结",value:2},{label:"禁止",value:3}],mallStatusObj:{0:"正常",1:"正常",2:"冻结",3:"禁止"},groupId:"",groupList:[],waterDialogVisible:!1,importMallDialogVisible:!1,mallBKSettingDialog:!1,batchExpressDialog:!1,imageOrigin:"1",imageSiteVal:"3",imageUrl:"https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png",imageType:"png",imageInfo:null,delMallDialog:!1,codeDialogVisible:!1,importTemplateData:"",IPVal:"",comfirmText:"",delOrderType:1,isStop:!1,isStopDisable:!1,importType:null,hideConsole:!0,isShowProgress:!0,percentage:0,addPercentage:0,isLoading:!1,mallCodeIdVal:"",browserCodeVal:"",mallCodeData:[],mallCodeAllData:[],codeCountryVal:"TH",isUpdateCode:!1,addressDialog:!1,isAddress:!1,addressQueryNumber:[],addressList:[],addressLevel:[],maskNumber:2,addressQuery:{name:"",phone:"",city:"",address:"",zip_code:"",default:!1,take:!1,backMail:!1,mask:"0"}}},computed:{},watch:{isStop:{handler:function(e){var t=this;this.isStopDisable=!!e,setTimeout((function(){t.isStop=!1}),1e4)}},addressDialog:function(e){e&&this.getNextLevelAddresses()},addressLevel:function(e){var t=e.name,a=e.id;if("0"==this.addressQuery.mask)this.addressQuery.city=t+"/";else{var n=this.addressQuery.city.split("/");if(this.addressQuery.mask==n.length-1)this.addressQuery.city+=t+"/";else{for(var r="",l=0;l<this.addressQuery.mask;l++)r+=n[l]+"/";this.addressQuery.city=r+t+"/"}}this.addressQuery.mask=++this.addressQuery.mask+"",this.addressQuery.mask<this.maskNumber?this.getNextLevelAddresses(a):(this.getZipCodeByAddressId(a),this.isAddress=!1,this.addressQuery.mask="0")}},created:function(){this.getMallList(),this.getIP()},mounted:function(){},methods:{getNextLevelAddresses:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,l,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.multipleSelection.filter((function(e){return e.LoginInfo.indexOf("成功")>=0&&e.country===t.countryVal})),!n||!n[0]){a.next=20;break}r={mallId:n[0].platform_mall_id,region:t.countryVal,type:0},a.t0=t.countryVal,a.next="ID"===a.t0||"VN"===a.t0||"TW"===a.t0?6:"PH"===a.t0?8:10;break;case 6:return t.maskNumber=3,a.abrupt("break",12);case 8:return t.maskNumber=4,a.abrupt("break",12);case 10:return t.maskNumber=2,a.abrupt("break",12);case 12:return e&&(r["address_id"]=e),a.next=15,t.$shopeemanService.getNextLevelAddresses(t.countryVal,r);case 15:l=a.sent,s=JSON.parse(l),s.status>=200&&s.status<300?(i=JSON.parse(s.data),o=JSON.parse(JSON.stringify(t.addressList)),o[t.addressQuery.mask]=i.data.list,t.addressList=JSON.parse(JSON.stringify(o))):s.status,a.next=22;break;case 20:t.$message.error(e?"登陆失效无法获取列表":"暂无登陆店铺登录"),t.addressDialog=!1;case 22:case"end":return a.stop()}}),a)})))()},getZipCodeByAddressId:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,l,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.multipleSelection.filter((function(e){return e.LoginInfo.indexOf("成功")>=0&&e.country===t.countryVal})),!n||!n[0]){a.next=10;break}return r={mallId:n[0].platform_mall_id,region:t.countryVal,address_id:e},a.next=5,t.$shopeemanService.getZipCodeByAddressId(t.countryVal,r);case 5:l=a.sent,s=JSON.parse(l),s.status>=200&&s.status<300?(i=JSON.parse(s.data),t.addressQueryNumber=i.data.list):s.status,a.next=12;break;case 10:t.$message.error(e?"登陆失效无法获取列表":"暂无登陆店铺登录"),t.addressDialog=!1;case 12:case"end":return a.stop()}}),a)})))()},cancelAddresses:function(){this.addressDialog=!1,this.isAddress=!1,this.addressQuery={name:"",phone:"",city:"",cityId:"",address:"",number:"",default:!1,take:!1,backMail:!1,mask:"0"}},confirmAddresses:function(){var e=this.addressQuery.city,t=this.$shopeemanService.getTelephoneNumberIsTrue(this.countryVal,this.addressQuery.phone),a=e.split("/"),n={address:this.addressQuery.address,country:this.countryVal,name:this.addressQuery.name,phone:t,zip_code:this.addressQuery.zip_code,full_address:"",geo_info:"",state:a[0]||"",city:a[1]||"",district:a[2]||"",town:a[3]||""},r=[];this.multipleSelection.forEach((function(e){e.country===n.country&&r.push(Object.assign(n,{mallId:e.platform_mall_id,platform_mall_name:e.platform_mall_name,mall_alias_name:e.mall_alias_name}))})),Object(o["c"])(r,this.setAddresses)},setAddresses:function(e){var t=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,l,s,i,o,c,u,d,p,m,g,f,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{count:1},n.prev=1,l=e.mall_alias_name||e.platform_mall_name,delete e.mall_alias_name,delete e.platform_mall_name,s={headers:{"Content-Type":"application/json;charset=UTF-8",Accept:"application/json, text/plain, */*"}},n.next=8,a.$shopeemanService.addAddress(e.country,e,s);case 8:if(i=n.sent,o=JSON.parse(i),c="",!(o.status>=200&&o.status<300)){n.next=17;break}u=JSON.parse(o.data),c=u.data.address_id,a.$refs.Logs.writeLog("店铺【".concat(l,"】添加地址成功"),!0),n.next=24;break;case 17:if(403!==o.status){n.next=22;break}return a.$refs.Logs.writeLog("店铺【".concat(l,"】尚未登陆无法设置地址"),!1),n.abrupt("return");case 22:return a.$refs.Logs.writeLog("店铺【".concat(l,"】添加地址失败，无法设置"),!1),n.abrupt("return");case 24:if(!a.addressQuery.default){n.next=31;break}return d={mallId:e.mallId,address_id:c},n.next=28,a.$shopeemanService.setDefaultAddress(e.country,d);case 28:p=n.sent,m=JSON.parse(p),m.status>=200&&m.status<300?(JSON.parse(m.data),a.$refs.Logs.writeLog("店铺【".concat(l,"】默认地址设置成功"),!0)):a.$refs.Logs.writeLog("店铺【".concat(l,"】默认地址设置失败"),!1);case 31:if(!a.addressQuery.take&&!a.addressQuery.backMail){n.next=40;break}return g={mallId:e.mallId,set_as_seller_return_address:!1},a.addressQuery.take&&(g["pick_up_address_id"]=c),a.addressQuery.backMail&&(g["return_address_id"]=c),n.next=37,a.$shopeemanService.setShopAddress(e.country,g);case 37:f=n.sent,h=JSON.parse(f),h.status>=200&&h.status<300?(JSON.parse(h.data),a.$refs.Logs.writeLog("店铺【".concat(l,"】\n            ").concat(a.addressQuery.take&&"取件地址").concat(a.addressQuery.backMail&&"取件地址","设置成功"),!0)):a.$refs.Logs.writeLog("店铺【".concat(l,"】\n            ").concat(a.addressQuery.take&&"取件地址").concat(a.addressQuery.backMail&&"取件地址","设置失败"),!1);case 40:n.next=45;break;case 42:n.prev=42,n.t0=n["catch"](1),a.$refs.Logs.writeLog("店铺【".concat(name,"】地址设置失败"),!1);case 45:return n.prev=45,r.count--,n.finish(45);case 48:case"end":return n.stop()}}),n,null,[[1,42,45,48]])})))()},changeSub:function(e){e.isChecked=!e.isChecked},cancel2:function(){this.delMallDialog=!1,this.reset()},cancel3:function(){this.mallBKSettingDialog=!1,this.reset2()},cancel4:function(){this.batchExpressDialog=!1,this.reset3()},openDeleteMallDialog:function(){var e=this.multipleSelection.length;e?e>10?this.$message.error("解绑店铺最多为：10个/次, 当前选择店铺数为：".concat(e,"个")):this.delMallDialog=!0:this.$message.error("请选择店铺")},selectImageOrigin:function(){"1"===this.imageOrigin?"3"===this.imageSiteVal?this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png":this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/76528659.png":this.imageUrl=""},selectImageSiteVal:function(){"1"===this.imageOrigin&&("3"===this.imageSiteVal?this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png":this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/76528659.png")},imgSaveToUrl2:function(e,t){var a=this,n=t.raw.type,r=new FileReader;r.readAsDataURL(t.raw),r.onload=function(){var e=r.result;a.imageUrl=e,a.imageType=n}},beforeAvatarUpload2:function(e){var t=new FileReader;t.onload=function(e){var t=e.target.result,a=document.createElement("img");a.src=t,a.onload=function(){}},t.readAsDataURL(e);var a="image/png"===e.type,n="image/jpg"===e.type,r="image/jpeg"===e.type,l=a||n||r;return l||this.$message2.error("上传商品图片只能是 PNG、JPG、JPEG 格式!"),l},convertBase64UrlToBlob:function(e){for(var t=e.dataURL,a=e.type,n=window.atob(t.split(",")[1]),r=new ArrayBuffer(n.length),l=new Uint8Array(r),s=0;s<n.length;s++)l[s]=n.charCodeAt(s);return new Blob([r],{type:a})},getBase64Image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);var n=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase(),r=t.toDataURL("image/"+n);return{code:200,data:{dataURL:r,ext:n}}},getUrlToBolb:function(){var e=this;return new Promise((function(t,a){var n=new Image;n.crossOrigin="",n.src=e.imageUrl;var r=e;n.onload=function(){var e=r.getBase64Image(n);t({code:200,data:e.data})},n.onerror=function(e){t({code:-2,data:e})}}))},BatchUpdateMallBk:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.imageUrl){t.next=2;break}return t.abrupt("return",e.$message.error("请上传背景图"));case 2:if(a={},"1"!==e.imageOrigin){t.next=9;break}return t.next=6,e.getUrlToBolb();case 6:a=t.sent,t.next=10;break;case 9:a={code:200,data:{dataURL:e.imageUrl,ext:e.imageType}};case 10:if(200===a.code){t.next=13;break}return e.$message.error("转换背景图失败"),t.abrupt("return");case 13:return e.imageInfo=a.data,n=e.multipleSelection,e.buttonStatus.updateBK=!0,e.hideConsole=!1,r=n.length,e.percentage=0,e.addPercentage=100/r,e.mallBKSettingDialog=!1,t.next=23,Object(o["c"])(n,e.setMall);case 23:e.percentage=100,e.hideConsole=!0,e.buttonStatus.updateBK=!1,e.reset2();case 27:case"end":return t.stop()}}),t)})))()},setMall:function(e){var t=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,l,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{count:1},l=e.platform_mall_name,n.prev=2,n.next=5,a.mallListAPIInstance.get_image_resource_id(e,a.imageInfo);case 5:if(s=n.sent,200===s.code){n.next=9;break}return a.$refs.Logs.writeLog("店铺【".concat(l,"】设置背景图失败(1)：").concat(s.data),!1),n.abrupt("return");case 9:return n.next=11,a.mallListAPIInstance.updateMallBK(e,s.data);case 11:if(i=n.sent,200===i.code){n.next=15;break}return a.$refs.Logs.writeLog("店铺【".concat(l,"】设置背景图失败(2)：").concat(i.data),!1),n.abrupt("return");case 15:a.$refs.Logs.writeLog("店铺【".concat(l,"】更新背景图片成功"),!0),n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](2),a.$refs.Logs.writeLog("店铺【".concat(l,"】设置背景图失败：").concat(n.t0),!1);case 21:return n.prev=21,--r.count,a.percentage+=a.addPercentage,n.finish(21);case 25:case"end":return n.stop()}}),n,null,[[2,18,21,25]])})))()},openUpdateExpressdialog:function(){if(""!==this.countryVal)if(this.multipleSelection.length){var e=this.multipleSelection.filter((function(e){return"success"===e.loginStatus}));if(!e.length)return this.$message.error("请登录店铺并选中数据后再操作");this.batchExpressDialog=!0,this.getMallExpress(e[0])}else this.$message.error("请选择店铺");else this.$message.error("批量修改物流方式只支持选择单个站点, 请重新选择")},getMallExpress:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.buttonStatus.getExpress){a.next=2;break}return a.abrupt("return");case 2:return t.buttonStatus.getExpress=!0,a.next=5,t.mallListAPIInstance.getMallExpress(e);case 5:if(n=a.sent,200===n.code){a.next=8;break}return a.abrupt("return",t.$message.error("店铺【".concat(e.platform_mall_name,"】: ").concat(n.data)));case 8:t.LogisticsList=n.data.listsObj,t.activeNames=n.data.activeNames[0],t.buttonStatus.getExpress=!1;case 11:case"end":return a.stop()}}),a)})))()},BatchUpdateMallExpress:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object.keys(e.LogisticsList).length){t.next=2;break}return t.abrupt("return",e.$message.error("获取物流信息失败,无法设置"));case 2:if(!e.buttonStatus.getExpress2){t.next=4;break}return t.abrupt("return");case 4:return a=e.multipleSelection,e.buttonStatus.getExpress2=!0,e.hideConsole=!1,n=a.length,e.percentage=0,e.addPercentage=100/n,e.batchExpressDialog=!1,t.next=13,Object(o["c"])(a,e.setMallExpress);case 13:e.percentage=100,e.hideConsole=!0,e.buttonStatus.getExpress2=!1,e.reset3();case 17:case"end":return t.stop()}}),t)})))()},setMallExpress:function(e){var t=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,i,c,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.length>1&&void 0!==t[1]?t[1]:{count:1},i=e.platform_mall_name;try{for(u in c=[],a.LogisticsList)(d=c).push.apply(d,Object(l["a"])(a.LogisticsList[u]));c.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.mallListAPIInstance.setMallExpress(e,n);case 2:if(r=t.sent,200===r.code){t.next=6;break}return-1===r.data.indexOf("Sorry that this channel can't be enabled")&&a.$refs.Logs.writeLog("店铺【".concat(i,"】更改物流 【").concat(n.name,"】失败：").concat(r.data),!1),t.abrupt("return");case 6:return a.$refs.Logs.writeLog("店铺【".concat(i,"】更改物流 【").concat(n.name,"】成功"),!0),t.next=9,Object(o["g"])(1e3);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c=null}catch(p){a.$refs.Logs.writeLog("店铺【".concat(i,"】设置背景图失败：").concat(p),!1)}finally{--r.count,a.percentage+=a.addPercentage}case 3:case"end":return n.stop()}}),n)})))()},getIP:function(){var e=this;this.$BaseUtilService.getAddressIP().then((function(t){e.IPVal=t})).catch((function(e){}))},chekedDelMall:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a="删除店铺，后果自负"===e.comfirmText.replace(/,/,"，").trim(),a){t.next=4;break}return e.$message.error("请填写正确的确认信息再操作"),t.abrupt("return");case 4:if(e.buttonStatus.delMall=!0,n=e.multipleSelection.map((function(e){return e.id})),e.IPVal){t.next=8;break}return t.abrupt("return",e.$message.error("未获取到IP地址,无法操作"));case 8:return r={sysMallIds:n.toString(),ip:e.IPVal,isPushToXzy:e.delOrderType},t.next=11,e.$api.deleteBindMall(r);case 11:if(l=t.sent,200===l.data.code){t.next=16;break}return e.$message.error("解绑店铺失败:  ".concat(l.data.message)),e.buttonStatus.delMall=!1,t.abrupt("return");case 16:e.$message.success("解绑店铺成功"),e.getMallList(),e.cancel2(),e.buttonStatus.delMall=!1;case 20:case"end":return t.stop()}}),t)})))()},reset:function(){this.comfirmText="",this.delOrderType=1},reset2:function(){this.imageOrigin="1",this.imageSiteVal="3",this.imageUrl="https://taobaotj.oss-cn-shenzhen.aliyuncs.com/image/privateGoods/2021/11/69981640.png"},reset3:function(){this.LogisticsList={},this.activeNames=[]},handleSelectionChange:function(e){this.multipleSelection=e},handleSelectionChange2:function(e){this.multipleSelection2=e},getGroup:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},e.countryVal&&(a["country"]=e.countryVal),t.next=4,e.mallListAPIInstance.getGroup(a);case 4:if(n=t.sent,200===n.code){t.next=8;break}return e.$message.error("获取店铺分组失败"),t.abrupt("return");case 8:e.groupList=n.data;case 9:case"end":return t.stop()}}),t)})))()},mallAuthorization:function(){return this.importMallListData.length?this.multipleSelection2.length?void this.alotOfLogined(this.multipleSelection2):this.$message.error("请勾选店铺"):this.$message.error("请导入店铺")},editWaterMall:function(e){this.importType=e,this.multipleSelection.length||"edit"!==this.importType?this.waterDialogVisible=!0:this.$message.error("请先勾选店铺")},refreshStatus:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.multipleSelection.length){t.next=2;break}return t.abrupt("return",e.$message.error("请选择店铺"));case 2:a=e.multipleSelection.length,n=e.multipleSelection,e.buttonStatus.refresh=!0,n.forEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n,r){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.mallListAPIInstance.getUserInfo(n);case 2:l=t.sent,200===l.code?n.LoginInfo='<p style="color: green">登录成功</p>':n.LoginInfo='<p style="color: red">未登录(已掉线)</p>',r===a-1&&(e.buttonStatus.refresh=!1);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})))()},handlerSelectTableOperating:function(e){this.multipleSelection.length?this[e](this.multipleSelection):this[e](this.mallList)},openMallBKSetting:function(){var e=this.multipleSelection.length;if(!e)return this.$message.error("请选择店铺");this.mallBKSettingDialog=!0},asyncMallData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return",t.$message("暂无同步数据"));case 2:return t.buttonStatus.async=!0,t.hideConsole=!1,n=e.length,t.percentage=0,t.addPercentage=100/n,a.next=9,Object(o["c"])(e,t.asyncMallInfo);case 9:t.percentage=100,t.hideConsole=!0,t.buttonStatus.async=!1,t.getMallList();case 13:case"end":return a.stop()}}),a)})))()},asyncMallInfo:function(e){var t=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,l,s,i,o,c,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:{count:1},l=e.platform_mall_name,n.prev=2,a.$refs.Logs.writeLog("开始同步店铺【".concat(l,"】信息"),!0),s=a.mallListAPIInstance.getMallInfo(e),i=a.mallListAPIInstance.getMallGoodsAmount(e),n.next=8,Promise.all([s,i]);case 8:if(o=n.sent,200===o[0].code){n.next=12;break}return a.$refs.Logs.writeLog("同步店铺【".concat(l,"】信息失败：").concat(o[0].data),!1),n.abrupt("return");case 12:return c=o[0].data,u={sysMallId:e.id,platformMallName:c.shop_name,mallStatus:c.shop_status,itemLimit:500,userEmail:c.user_email,phone:c.phone,userRealName:c.username},200===o[1].code&&(u["itemLimit"]=o[1].data.count_for_limit),n.next=17,a.mallListAPIInstance.updateMallInfo(u);case 17:if(d=n.sent,200===d.code){n.next=21;break}return a.$refs.Logs.writeLog("同步店铺【".concat(l,"】信息失败：").concat(d.data),!1),n.abrupt("return");case 21:a.$refs.Logs.writeLog("同步店铺【".concat(l,"】信息成功"),!0),n.next=27;break;case 24:n.prev=24,n.t0=n["catch"](2),a.$refs.Logs.writeLog("同步店铺【".concat(l,"】信息失败：").concat(n.t0),!1);case 27:return n.prev=27,--r.count,a.percentage+=a.addPercentage,n.finish(27);case 31:case"end":return n.stop()}}),n,null,[[2,24,27,31]])})))()},closeOrOpenMallVacation:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.multipleSelection.length,r=t.multipleSelection,n){a.next=4;break}return a.abrupt("return",t.$message.error("请选择店铺"));case 4:e?t.buttonStatus.openVacation=!0:t.buttonStatus.closeVacation=!0,t.hideConsole=!1,r.forEach(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(r,l){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=r.platform_mall_name,a.next=3,t.mallListAPIInstance.closeOrOpenMallVacation(r,e);case 3:i=a.sent,200===i.code?t.$refs.Logs.writeLog("店铺【".concat(s,"】休闲模式").concat(e?"开启":"关闭","成功"),!0):t.$refs.Logs.writeLog("店铺【".concat(s,"】休闲模式").concat(e?"开启":"关闭","失败：").concat(i.data),!1),l===n-1&&(t.buttonStatus.openVacation=!1,t.buttonStatus.closeVacation=!1,t.hideConsole=!0);case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}());case 7:case"end":return a.stop()}}),a)})))()},alotOfLogined:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,l,s,i,o,c,u,d,p,m,g,f,h,b,_,v,y,x,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.buttonStatus.login){a.next=2;break}return a.abrupt("return");case 2:if(n=1,r=null,l=null,e?(r=e.length,l=e,n=2):(r=t.multipleSelection.length,l=t.multipleSelection),r){a.next=9;break}return t.$message.error("请先勾选店铺"),a.abrupt("return");case 9:t.buttonStatus.login=!0,s=0,i=0;case 12:if(!(i<r)){a.next=87;break}if(o=l[i],c=o.platform_mall_name,1===n?o.LoginInfo="正在登陆中...":t.writeLog("(".concat(i+1,"/").concat(r,")账号【").concat(c,"】开始授权"),!0),t.forceLogin||1!==n){a.next=27;break}return a.next=19,t.mallListAPIInstance.getUserInfo(o);case 19:if(u=a.sent,200!==u.code){a.next=26;break}return o.LoginInfo='<p style="color: green">快速登录成功</p>',o.loginStatus="success",a.abrupt("continue",84);case 26:o.loginStatus="fail";case 27:return a.next=29,t.$shopeemanService.login(o,n);case 29:if(d=a.sent,200===d.code){a.next=34;break}return 1===n?o.LoginInfo='<p style="color: red">登录失败：'.concat(d.data,"</p>"):t.writeLog("(".concat(i+1,"/").concat(r,")账号【").concat(c,"】授权失败：").concat(d.data),!1),o.loginStatus="fail",a.abrupt("continue",84);case 34:if(p=d.data.mallId,m=d.data.mallUId,g=null,1!==n){a.next=54;break}return a.next=40,t.$appConfig.getGlobalCacheInfo("mallInfo",p);case 40:return f=a.sent,g=JSON.parse(f),h=d.data.Cookie,g.web_login_info["SPC_EC"]=h.SPC_EC,g.web_login_info["sso"]=h.SPC_EC,g.web_login_info["SPC_SC_TK"]=h.SPC_SC_TK,g.web_login_info["token"]=h.SPC_SC_TK,g.web_login_info["ShopeeUid"]=h.ShopeeUid,g.web_login_info["shopeeuid"]=h.ShopeeUid,g.web_login_info["shopid"]=h.shopid,a.next=52,t.$appConfig.updateInfoMall(p,JSON.stringify(g));case 52:a.next=74;break;case 54:return g=d.data.mallInfo_new,a.next=57,t.$appConfig.updateInfoMall(p,JSON.stringify(g));case 57:return a.next=59,t.mallListAPIInstance.isNormalMall(g);case 59:if(b=a.sent,200===b.code&&b.data){a.next=63;break}return t.writeLog("(".concat(i+1,"/").concat(r,")账号【").concat(c,"】授权失败：该账号属于跨境店铺"),!1),a.abrupt("continue",84);case 63:return _={platformMallId:p,platformMallUid:m,mallAccountInfo:JSON.stringify(o.mall_account_info),mallGroup:o.group_name,itemLimit:500,platformMallName:c,mallAliasName:o.mall_alias_name,mallMainName:o.MallMainName,country:o.country,SPC_EC:o.SPC_EC,SPC_SC_TK:o.SPC_SC_TK,mall_type:1},a.next=66,t.mallListAPIInstance.getMallGoodsAmount(g);case 66:return v=a.sent,200===v.code&&(_["itemLimit"]=v.data.count_for_limit),a.next=70,t.mallListAPIInstance.saveMallAuthInfo(_);case 70:if(y=a.sent,200===y.code){a.next=74;break}return t.writeLog("(".concat(i+1,"/").concat(r,")账号【").concat(c,"】授权失败：").concat(y.data),!1),a.abrupt("continue",84);case 74:return x={mallId:p,webLoginInfo:JSON.stringify(d.data.Cookie)},a.next=77,t.mallListAPIInstance.uploadMallCookie(x);case 77:if(w=a.sent,200===w.code){a.next=81;break}return t.writeLog("(".concat(i+1,"/").concat(r,")账号【").concat(c,"】授权失败：上报店铺信息cookie失败"),!1),a.abrupt("continue",84);case 81:s++,1===n?o.LoginInfo='<p style="color: green">登录成功</p>':t.writeLog("(".concat(i+1,"/").concat(r,")账号【").concat(c,"】授权成功"),!0),o.loginStatus="success";case 84:i++,a.next=12;break;case 87:2===n&&s&&t.getMallList(),t.buttonStatus.login=!1;case 89:case"end":return a.stop()}}),a)})))()},handleRereturnLogin:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.code,r=t.message,l=null,e.platform_mall_id,a.prev=4,a.abrupt("return",{code:n,data:{message:r,dataResult:l}});case 9:return a.prev=9,a.t0=a["catch"](4),a.abrupt("return",{code:-2,data:{message:a.t0,dataResult:l}});case 12:case"end":return a.stop()}}),a,null,[[4,9]])})))()},getMallCodeData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoading=!0,a=0;case 2:if(!(a<e.mallListTemp.length)){t.next=12;break}return n=e.mallListTemp[a],t.next=6,e.$appConfig.getGlobalCacheInfo("mallInfo",n.platform_mall_id);case 6:r=t.sent,l=JSON.parse(r),e.mallCodeAllData.push(l);case 9:a++,t.next=2;break;case 12:e.mallCodeData=e.mallCodeAllData.filter((function(e){return"TH"===e.country})),e.isLoading=!1;case 14:case"end":return t.stop()}}),t)})))()},queryMallCode:function(){var e=this;this.mallCodeData=this.mallCodeAllData.filter((function(t){return t.country===e.codeCountryVal&&e.mallCodeIdVal?t.platform_mall_id===e.mallCodeIdVal:t.country===e.codeCountryVal}))},updateCodeData:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],1===t?r.push(e):e.forEach((function(e){r.push(e)})),n.next=4,a.updateCode(r,t);case 4:case"end":return n.stop()}}),n)})))()},updateCode:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,l,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:2===t&&(a.isUpdateCode=!0),r=0;case 2:if(!(r<e.length)){n.next=14;break}return l=e[r],n.next=6,a.$appConfig.updateInfoMall(l.platform_mall_id,JSON.stringify(l));case 6:return s={mallId:l.platform_mall_id,webLoginInfo:JSON.stringify(l)},n.next=9,a.mallListAPIInstance.uploadMallCookie(s);case 9:i=n.sent,200===i.code?(a.$set(l,"status","更新成功"),a.$set(l,"color","green")):(a.$set(l,"status","更新失败:".concat(i.data)),a.$set(l,"color","red"));case 11:r++,n.next=2;break;case 14:a.isUpdateCode=!1;case 15:case"end":return n.stop()}}),n)})))()},batchUpdateList:function(){var e=this;if(!this.browserCodeVal)return this.$message("浏览器识别码不能为空");this.mallCodeData.map((function(t){t.web_login_info.SPC_F=e.browserCodeVal}))},handleClose4:function(e){if(this.isUpdateCode)return this.$message("正在更新数据,请勿关闭");e(),this.mallCodeData=[],this.mallCodeAllData=[],this.codeCountryVal="TH",this.mallCodeIdVal="",this.browserCodeVal=""},importMall:function(e){this.importType=e,this.importMallDialogVisible=!0},exportMall:function(){var e=this,t='<tr>\n        <td style="width: 200px; text-align:left;">分组</td>\n        <td style="width: 200px; text-align:left;">站点</td>\n        <td style="width: 200px; text-align:left;">店铺真实名称</td>\n        <td style="width: 200px; text-align:left;">店铺ID</td>\n        <td style="width: 200px; text-align:left;">店铺账号</td>\n        <td style="width: 200px; text-align:left;">店铺水印文字</td>\n        <td style="width: 200px; text-align:left;">店铺额度</td>\n        <td style="width: 200px; text-align:left;">店铺别名</td>\n        <td style="width: 200px; text-align:left;">店铺状态</td>\n        <td style="width: 200px; text-align:left;">授权日期</td>\n      </tr>';this.mallList.map((function(a){var n,r;t+='\n        <tr>\n          <td style="text-align:left;">'.concat(a.group_name||"",'</td>\n          <td style="text-align:left;">').concat(e.$filters.chineseSite(a.country)||"",'</td>\n          <td style="text-align:left;">').concat((null===a||void 0===a||null===(n=a.mall_account_info)||void 0===n?void 0:n.userRealName)||a.platform_mall_name||"",'</td>\n          <td style="text-align:left;">').concat(a.platform_mall_id,'</td>\n          <td style="text-align:left;">').concat(null===a||void 0===a||null===(r=a.mall_account_info)||void 0===r?void 0:r.username,'</td>\n          <td style="text-align:left;">').concat(a.watermark||"",'</td>\n          <td style="text-align:left;">').concat(a.item_limit||"",'</td>\n          <td style="text-align:left;">').concat(a.mall_alias_name||"",'</td>\n          <td style="text-align:left;">').concat(e.mallStatusObj[a.mall_status],'</td>\n          <td style="text-align:left;">').concat(a.created_at,"</td>\n        </tr>\n        ")})),Object(o["h"])("店铺信息",t)},downloadTemplate:function(){var e=this;if("edit"===this.importType){var t='<tr>\n      <td style="width: 200px; text-align:left;">站点</td>\n      <td style="width: 200px; text-align:left;">店铺名称</td>\n      <td style="width: 200px; text-align:left;">店铺ID<span style="color:red">(必填)</span></td>\n      <td style="width: 200px; text-align:left;">店铺文字水印</td>\n      <td style="width: 200px; text-align:left;">分组</td>\n      </tr>';this.multipleSelection.map((function(a){t+='\n        <tr>\n          <td style="text-align:left;">'.concat(e.$filters.chineseSite(a.country),'</td>\n          <td style="text-align:left;">').concat(a.platform_mall_name,'</td>\n          <td style="text-align:left;">').concat(a.platform_mall_id,'</td>\n          <td style="text-align:left;">').concat(a.watermark||"",'</td>\n          <td style="text-align:left;">').concat(a.group_name||"","</td>\n        </tr>\n        ")})),Object(o["h"])("修改店铺水印文字模板",t)}else if("update"===this.importType){var a='<tr>\n        <td style="width: 200px; text-align:left;">SHOPEE店铺ID<span style="color:red">(必填)</span></td>\n        <td style="width: 200px; text-align:left;">店铺登录账号<span style="color:red">(必填)</span></td>\n        <td style="width: 200px; text-align:left;">密码(必填)</td>\n      </tr>';Object(o["h"])("修改店铺密码模板",a)}else{var n='<tr>\n      <td style="width: 400px">站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)<span style="color:red">(必填)</span></td>\n      <td style="width: 300px">账号<span style="color:red">(必填)(如果为手机号，请不要加国家区号)</span></td>\n      <td style="width: 200px">密码<span style="color:red">(必填)</span></span></td>\n      <td style="width: 200px">店铺真实名称<span style="color:red">(必填)</span></span></td>\n      <td style="width: 200px">分组<span style="color:orange">(选填)</span></td>\n      <td style="width: 200px">店铺主体名称<span style="color:red">(需申IP隔离必填)</span></td>\n      <td style="width: 200px">SPC_F<span style="color:red">(浏览识别码)</span></td>\n      <td style="width: 200px">店铺别名<span style="color:orange">(选填)</span></td>\n      </tr>';Object(o["h"])("SHOPEE店铺批量授权模板",n)}},importEditWateNameOrUpdate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,l,s,i,o,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.importTemplateData.length,"edit"!==e.importType){t.next=14;break}return n={lists:[]},e.importTemplateData.forEach((function(t,r){if(t["店铺ID(必填)"]){var l=e.mallListAPIInstance.getMallID(t["店铺ID(必填)"]+"");if(l){var s={sysMallId:l,watermark:t["店铺文字水印"]};n["lists"].push(s)}else e.writeLog("(".concat(r+1,"/").concat(a,") 店铺平台ID填写有误"))}else e.writeLog("(".concat(r+1,"/").concat(a,") 店铺ID(必填)"))})),t.next=6,e.mallListAPIInstance.updateWatermark(n);case 6:if(r=t.sent,200===r.code){t.next=10;break}return e.writeLog("修改失败:".concat(r.data),!1),t.abrupt("return");case 10:e.getMallList(),e.writeLog("修改成功",!0),t.next=51;break;case 14:if("update"!==e.importType){t.next=51;break}l=0,s=0,i=0;case 18:if(!(i<a)){t.next=49;break}if(o={sysMallId:"",password:"",username:""},c=e.importTemplateData[i],c["SHOPEE店铺ID(必填)"]){t.next=24;break}return e.writeLog("(".concat(i+1,"/").concat(a,")店铺ID不能为空")),t.abrupt("continue",46);case 24:if(c["店铺登录账号(必填)"]){t.next=27;break}return e.writeLog("(".concat(i+1,"/").concat(a,")密码不能为空")),t.abrupt("continue",46);case 27:if(c["密码(必填)"]){t.next=30;break}return e.writeLog("(".concat(i+1,"/").concat(a,")店铺账号不能为空")),t.abrupt("continue",46);case 30:if(u=e.mallListAPIInstance.getMallID(c["SHOPEE店铺ID(必填)"]+""),u){t.next=34;break}return e.writeLog("(".concat(i+1,"/").concat(a,") 店铺平台ID填写有误")),t.abrupt("continue",46);case 34:return o["sysMallId"]=u,o["username"]=c["店铺登录账号(必填)"],o["password"]=c["密码(必填)"],t.next=39,e.mallListAPIInstance.updateUserPassword(o);case 39:if(d=t.sent,200===d.code){t.next=44;break}return e.writeLog("(".concat(i+1,"/").concat(a,")修改失败:").concat(d.data),!1),s++,t.abrupt("continue",46);case 44:l++,e.writeLog("(".concat(i+1,"/").concat(a,")修改成功"),!0);case 46:i++,t.next=18;break;case 49:e.writeLog("共导入店铺【".concat(a,"】个,成功【").concat(l,"】个, 失败【").concat(s,"】个"),!0),e.getMallList();case 51:e.importTemplateData=null;case 52:case"end":return t.stop()}}),t)})))()},updateMallAliasName:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isCheckedWaterMark2=!1,n={lists:[{sysMallId:e.id,mallAliasName:e.mall_alias_name}]},a.next=4,t.mallListAPIInstance.updateMallAliasName(n);case 4:if(r=a.sent,200===r.code){a.next=8;break}return t.$message.error("修改失败:".concat(r.data),!1),a.abrupt("return");case 8:t.$message.success("修改成功",!0);case 9:case"end":return a.stop()}}),a)})))()},updateWateMark:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isCheckedWaterMark=!1,n={lists:[{sysMallId:e.id,watermark:e.watermark}]},a.next=4,t.mallListAPIInstance.updateWatermark(n);case 4:if(r=a.sent,200===r.code){a.next=8;break}return t.$message.error("修改失败:".concat(r.data),!1),a.abrupt("return");case 8:t.$message.success("修改成功",!0);case 9:case"end":return a.stop()}}),a)})))()},importMallName:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.importTemplateData.length,n=[],r=function(t){if(e.isStop)return e.writeLog("取消导入",!1),"break";var r=e.importTemplateData[t];if(!r["站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"])return e.writeLog("(".concat(t+1,"/").concat(a,")未找到站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"),!1),"continue";if(!r["账号(必填)(如果为手机号，请不要加国家区号)"])return e.writeLog("(".concat(t+1,"/").concat(a,")未找到账号(必填)(如果为手机号，请不要加国家区号)"),!1),"continue";if(!r["密码(必填)"])return e.writeLog("(".concat(t+1,"/").concat(a,")未找到密码(必填)"),!1),"continue";if(!r["店铺真实名称(必填)"])return e.writeLog("(".concat(t+1,"/").concat(a,")未找到店铺真实名称(必填)"),!1),"continue";var l=e.countries.filter((function(e){return e.label===r["站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"]}));if(!l.length)return e.writeLog("(".concat(t+1,"/").concat(a,")未找到[").concat(r["站点(马来站，台湾站，泰国站，印尼站，菲律宾站，新加坡站，越南站)(必填)"],"],站点填写有误"),!1),"continue";var s=r["密码(必填)"],i="".concat(r["账号(必填)(如果为手机号，请不要加国家区号)"]),o=r["店铺别名(选填)"]||"",c=r["分组(选填)"]||"",u=r["店铺主体名称(需申IP隔离必填)"]||"",d=r["店铺真实名称(必填)"],p={id:0,group_name:c,country:l[0].value,platform_mall_name:i,platform_mall_id:"",platform_mall_uid:"",MallMainName:u,mall_account_info:{password:s+"",username:i,userRealName:d,subsiteindex:0},item_limit:500,mall_group_uid:0,mall_group_id:0,watermark:"",created_at:"",mall_alias_name:o,mall_status:1,good_mall_status:"-1",web_login_info:"",mall_remark:"",mall_type:"",userRealName:d,SPC_EC:"",SPC_SC_TK:""};n.push(p)},l=0;case 4:if(!(l<a)){t.next=13;break}if(s=r(l),"break"!==s){t.next=8;break}return t.abrupt("break",13);case 8:if("continue"!==s){t.next=10;break}return t.abrupt("continue",10);case 10:l++,t.next=4;break;case 13:e.importMallListData=n,e.writeLog("导入成功, 共【".concat(e.importMallListData.length,"】条数据"),!0),e.importTemplateData=null;case 16:case"end":return t.stop()}}),t)})))()},importTemplateEvent:function(e){var t=this,a={0:e.raw};if(/\.(xls|xlsx)$/.test(a[0].name.toLowerCase()))if(a.length<=0)this.writeLog("表格为空",!1);else{var n=new FileReader;n.onload=function(a){var n=a.target.result,r=u.a.read(n,{type:"binary"}),l=r.SheetNames[0],s=u.a.utils.sheet_to_json(r.Sheets[l]);t.importTemplateData=s,s=null,t.writeLog("正在读取中...",!0),"edit"===t.importType?t.importEditWateNameOrUpdate():"authorization"===t.importType?t.importMallName():"update"===t.importType?t.importEditWateNameOrUpdate():t.writeLog("【".concat(e.name,"】该模板不符合要求,请下载指定模板"),!1),t.$refs.importRef.value=""},n.readAsBinaryString(a[0])}else this.writeLog("上传格式不对,请上传xls、xls格式的文件",!1)},getMallList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={},!e.buttonStatus.mallList){t.next=3;break}return t.abrupt("return");case 3:return e.buttonStatus.mallList=!0,e.countryVal&&(a["country"]=e.countryVal),e.mallSearchConditionInputVal&&(a[e.mallSearchConditionVal]=e.mallSearchConditionInputVal),a["groupId"]=e.groupId,e.mallStausVal&&(a["isFilterFrozen"]=e.mallStausVal),t.next=10,e.mallListAPIInstance.getMallList(a);case 10:if(n=t.sent,200===n.code){t.next=14;break}return e.$message.error("获取店铺列表失败: ".concat(n.data)),t.abrupt("return");case 14:e.mallList=n.data,e.mallListTemp=e.mallList,e.buttonStatus.mallList=!1,e.$nextTick((function(){e.$refs.plTable.clearSelection(),e.$refs.plTable.toggleAllSelection()})),e.getGroup();case 19:case"end":return t.stop()}}),t)})))()},handleClose:function(e){e(),this.consoleMsg=""},handleClose2:function(e){e(),this.importMallListData=[],this.consoleMsg=""},handleClose3:function(e){e(),this.reset2()},handleClose5:function(e){e(),this.reset3()},writeLog:function(e,t,a){if(e){var n=t?"green":"red";a&&(n=a);var r=this.dateFormat(new Date(Date.now()),"hh:mm:ss");this.consoleMsg='<p style="color:'.concat(n,'">').concat(r,":").concat(e,"</p>")+this.consoleMsg}},dateFormat:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}}},p=d,m=(a("8335"),a("1134"),a("2877")),g=Object(m["a"])(p,n,r,!1,null,"67db4b02",null);t["default"]=g.exports},8335:function(e,t,a){"use strict";a("9c2d")},"9c2d":function(e,t,a){},a6fc:function(e,t,a){}}]);