(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28334324"],{"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},7037:function(e,t,r){function a(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=a=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),a(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},"81a6":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d3b7"),r("25f0"),r("a9e3"),r("fb6a");function a(){this.date=new Date,"function"!==typeof this.newGUID&&(a.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),r=this.hexadecimal(this.getGUIDTime(),16),a=0;a<9;a++)e+=Math.floor(16*Math.random()).toString(16);e+=t,e+=r;while(e.length<32)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},a.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},a.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},a.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},a.prototype.hexadecimal=function(e,t,r){return void 0!=r?parseInt(e.toString(),r).toString(t):parseInt(e.toString()).toString(t)},a.prototype.formatGUID=function(e){var t=e.slice(0,8)+"-",r=e.slice(8,12)+"-",a=e.slice(12,16)+"-",n=e.slice(16,20)+"-",o=e.slice(20);return t+r+a+n+o})}},d1dd:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r("53ca"),n=r("b85c"),o=r("2909"),i=r("1da1"),s=r("d4ec"),c=r("bee2"),u=r("ade3"),l=(r("96cf"),r("a9e3"),r("ac1f"),r("1276"),r("a434"),r("159b"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("4de4"),r("b680"),r("d81d"),r("99af"),r("25f0"),r("c740"),r("f68b")),m=r("0e0b"),p=r("2b0e"),f=null,d=function(){function e(){Object(s["a"])(this,e),Object(u["a"])(this,"mallTest",""),Object(u["a"])(this,"MallAPIInstance",new l["a"](new p["default"])),Object(u["a"])(this,"mallSearchList",[]),Object(u["a"])(this,"storeLogList",{})}return Object(c["a"])(e,[{key:"autoAddFenceActive",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=["MY","TW","VN","ID","PH","TH","SG","BR","MX","CO","CL","PL"],r=0,a=t;case 2:if(!(r<a.length)){e.next=14;break}return n=a[r],o={},o["country"]=n,o["log_message"]=[],e.next=9,window.BaseUtilBridgeService.getAttentionUserTask(n);case 9:i=e.sent,i.length&&(s=(new Date).getTime(),c=Number(i[0].exec_time),this.runTesk(s-c,i));case 11:r++,e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"runTesk",value:function(e,t){var r=this;this.storeLogList["".concat(t[0].country)]={},this.storeLogList["".concat(t[0].country)].log_message=[],e=e>0?0:0-e,e?this.storeLogList["".concat(t[0].country)].log_message.push({option:"【".concat(t[0].country,"】该任务还未到执行时间"),activeTime:this.formatTime((new Date).getTime())}):this.storeLogList["".concat(t[0].country)].log_message.push({option:"【".concat(t[0].country,"】任务即将执行...."),activeTime:this.formatTime((new Date).getTime())}),setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.searchMall(t[0]);case 2:return e.next=4,r.startCancer(t[0]);case 4:return a={country:t[0].country,mall_ids:t[0].mall_ids,mall_names:t[0].mall_names,product_max:t[0].product_max,last_login_day:t[0].last_login_day,open_hour:t[0].open_hour,open_minute:t[0].open_minute,key_word:t[0].key_word,follow_number:t[0].follow_number,follow_interval:t[0].follow_interval,is_not_follow_min_order_evaluation:t[0].is_not_follow_min_order_evaluation,min_order_evaluation:t[0].min_order_evaluation,is_not_follow_followed_day:t[0].is_not_follow_followed_day,followed_day:t[0].followed_day,followed_type:t[0].followed_type,cancel_follow_number:t[0].cancel_follow_number,cancel_follow_sort_type:t[0].cancel_follow_sort_type,exec_time:(new Date).getTime()},e.next=7,window.BaseUtilBridgeService.saveAttentionUserTask(a);case 7:return e.sent,e.next=10,window.BaseUtilBridgeService.getAttentionUserTask(t[0].country);case 10:return n=e.sent,r.storeLogList["".concat(t[0].country)].task_id=n[0].id,r.storeLogList["".concat(t[0].country)].country=n[0].country,r.storeLogList["".concat(t[0].country)].created_at=r.formatTime((new Date).getTime()),r.storeLogList["".concat(t[0].country)].log_message=JSON.stringify(r.storeLogList["".concat(t[0].country)].log_message),e.next=17,window.BaseUtilBridgeService.saveAttentionUserLog(r.storeLogList["".concat(t[0].country)]);case 17:e.sent;case 18:case"end":return e.stop()}}),e)}))),e)}},{key:"add0",value:function(e){return e<10?"0"+e:e}},{key:"formatTime",value:function(t){var r=new e,a=new Date(t),n=a.getFullYear(),o=a.getMonth()+1,i=a.getDate(),s=a.getHours(),c=a.getMinutes(),u=a.getSeconds();return n+"-"+r.add0(o)+"-"+r.add0(i)+" "+r.add0(s)+":"+r.add0(c)+":"+r.add0(u)}},{key:"searchMall",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,i,s,c,u,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=10*t.mall_ids.split(",").length,a=[],this.storeLogList["".concat(t.country)].log_message.push({option:"正在查询【".concat(t.key_word,"】相关店铺...."),activeTime:this.formatTime((new Date).getTime())}),n=0;case 4:if(!(n<r)){e.next=32;break}return i={},i["country"]=t.country,i["mallId"]=Number(t.mall_ids.split(",")[0]),i["newest"]=60*n,i["keyword"]=t.key_word,i["min_order_evaluation"]=t.min_order_evaluation,e.next=13,this.searchMallInstance(i);case 13:if(s=e.sent,s.length){e.next=17;break}return this.storeLogList["".concat(t.country)].log_message.push({option:"暂无数据",activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return");case 17:return e.next=19,this.filterList(s,t);case 19:if(c=e.sent,!c.length){e.next=27;break}if((u=a).push.apply(u,Object(o["a"])(c)),!(a.length>=r)){e.next=25;break}return a=a.splice(0,r),e.abrupt("break",32);case 25:e.next=29;break;case 27:return this.storeLogList["".concat(t.country)].log_message.push({option:"此关键词暂无更多数据！",activeTime:this.formatTime((new Date).getTime())}),e.abrupt("break",32);case 29:n++,e.next=4;break;case 32:this.storeLogList["".concat(t.country)].log_message.push({option:"店铺搜索获取结束",activeTime:this.formatTime((new Date).getTime())}),this.mallSearchList=[],a.forEach((function(e){e.item_basic.totalRate=e.item_basic.item_rating.rating_count.reduce((function(e,t,r,a){return e+t})),l.mallSearchList.push(e.item_basic)}));case 35:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchMallInstance",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.mallId,r["by"]="relevancy",r["keyword"]=t.keyword,r["limit"]=60,r["newest"]=t.newest,r["order"]="desc",r["page_type"]="search",r["rating_filter"]=t.min_order_evaluation,e.prev=10,e.next=13,this.MallAPIInstance.addCancerMall(r);case 13:if(a=e.sent,200!==a.status){e.next=18;break}return e.abrupt("return",JSON.parse(a.data).items);case 18:return this.storeLogList["".concat(t.country)].log_message.push({option:"店铺搜索请求失败,230-line:".concat(a.status),activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 20:e.next=26;break;case 22:return e.prev=22,e.t0=e["catch"](10),this.storeLogList["".concat(t.country)].log_message.push({option:"店铺搜索请求失败,234-line:".concat(e.t0),activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,this,[[10,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],n=new Map,t.forEach((function(e){n.has(e.item_basic.itemid)||n.has(e.item_basic.shopid)||n.set(e.itemid,e)})),a=Object(o["a"])(n.values()),i=Number(r.product_max),s=a.filter((function(e){var t=e.item_basic.item_rating.rating_count.reduce((function(e,t,r,a){return e+t}));if(Number(e.item_basic.liked_count)>=100&&Number(e.item_basic.liked_count)<=1e4&&Number(e.item_basic.item_rating.rating_star.toFixed(2))>=4.5&&Number(e.item_basic.item_rating.rating_star.toFixed(2))<=5&&t>=50&&t<=5e3&&e.item_basic.stock>=i)return e})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"startCancer",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.mallSearchList.length<=0)){e.next=3;break}return this.storeLogList["".concat(t.country)].log_message.push({option:"当前关键词【".concat(t.key_word,"】暂无数据"),activeTime:this.formatTime((new Date).getTime())}),e.abrupt("return");case 3:return r=t.mall_ids.split(","),a=t.mall_names.split(","),n=this.mallSearchList.map((function(e){return e.shopid})),o=r.map((function(e,r){var o={};return o.platform_mall_id=e,o.mall_alias_name=a[r],o.country=t.country,o.mallIDlist=n,o.Tesk_follow_number=t.follow_number,o.followed_type=t.followed_type,o.follow_interval=t.follow_interval,o.last_login_day=t.last_login_day,o.min_order_evaluation=t.min_order_evaluation,o})),f=this,this.storeLogList["".concat(t.country)].log_message.push({option:"开始处理关注店铺数据......",activeTime:this.formatTime((new Date).getTime())}),e.next=11,Object(m["c"])(o,this.getFllowerInfo);case 11:this.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.country,"】数据处理结束"),activeTime:this.formatTime((new Date).getTime())});case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowerInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,o,i,s,c,u,l,p,d,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{count:1},e.prev=1,o=t.mallIDlist,t.following=0,t.fence=0,t.newFollow=0,t.cancerFollow=0,t.state="-",e.next=10,f.isLoginFun(t);case 10:if(i=e.sent,i){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,f.getHomeMallData(t);case 15:if(s=e.sent,s){e.next=19;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺暂无数据"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return");case 19:c=t.newFollow,u=Object(n["a"])(o),e.prev=21,p=regeneratorRuntime.mark((function e(){var r,a,o,i,s,u,p,d,h,g,_,b,v,x,y,w,k,T,S,L,F,I,A,D,N,R,O,M,j,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=l.value,!f.isStop){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(a={},a["country"]=t.country,a["mallId"]=t.platform_mall_id,a["shopid"]=r,"0"!==t.followed_type){e.next=123;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】正在获取").concat(r,"店铺粉丝信息"),activeTime:f.formatTime((new Date).getTime())}),o=!0,a["offset"]=0,e.next=13,f.GetShopLikes(a);case 13:i=e.sent,f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取第").concat(a.offset/20+1,"页粉丝"),activeTime:f.formatTime((new Date).getTime())}),s=Object(n["a"])(i),e.prev=16,s.s();case 18:if((u=s.n()).done){e.next=56;break}if(p=u.value,!f.isStop){e.next=22;break}return e.abrupt("return",{v:void 0});case 22:return e.next=24,f.filterShopDatas(i,t.country,t.platform_mall_id);case 24:if(d=e.sent,d){e.next=27;break}return e.abrupt("continue",54);case 27:return e.next=29,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),p.ShopId);case 29:if(h=e.sent,!h.attention_shop_id){e.next=32;break}return e.abrupt("continue",54);case 32:return e.next=34,f.runAttention(p,t,r);case 34:if(g=e.sent,!g){e.next=42;break}return c++,e.next=39,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:p.ShopId});case 39:e.sent,e.next=45;break;case 42:return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(p.UserName,"失败"),activeTime:f.formatTime((new Date).getTime())}),o=!1,e.abrupt("continue",54);case 45:if(!Number(t.Tesk_follow_number)){e.next=50;break}if(!(c>=Number(t.Tesk_follow_number))){e.next=48;break}return e.abrupt("return",{v:void 0});case 48:e.next=54;break;case 50:if(!(t.following+c>=3e3)){e.next=54;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增关注").concat(c,"个"),activeTime:f.formatTime((new Date).getTime())}),f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 54:e.next=18;break;case 56:e.next=61;break;case 58:e.prev=58,e.t0=e["catch"](16),s.e(e.t0);case 61:return e.prev=61,s.f(),e.finish(61);case 64:f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增关注").concat(c,"个"),activeTime:f.formatTime((new Date).getTime())});case 65:if(!o){e.next=119;break}if(!f.isStop){e.next=68;break}return e.abrupt("return",{v:void 0});case 68:return a["offset"]+=20,e.next=71,f.GetShopLikes(a);case 71:i=e.sent,f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取第").concat(a.offset/20+1,"页粉丝数据"),activeTime:f.formatTime((new Date).getTime())}),_=0;case 74:if(!(_<i.length)){e.next=113;break}if(!f.isStop){e.next=77;break}return e.abrupt("return",{v:void 0});case 77:return b=i[_],e.next=80,f.filterShopDatas(b,t.country,t.platform_mall_id,t.last_login_day);case 80:if(v=e.sent,v){e.next=83;break}return e.abrupt("continue",110);case 83:return e.next=85,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),b.ShopId);case 85:if(x=e.sent,!x.attention_shop_id){e.next=88;break}return e.abrupt("continue",110);case 88:return e.next=90,f.runAttention(b,t,r);case 90:if(y=e.sent,!y){e.next=98;break}return c++,e.next=95,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:b.ShopId});case 95:e.sent,e.next=100;break;case 98:return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(b.UserName,"失败"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("continue",110);case 100:if(!Number(t.Tesk_follow_number)){e.next=106;break}if(!(c>=Number(t.Tesk_follow_number))){e.next=104;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(c,"个粉丝"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 104:e.next=110;break;case 106:if(!(t.following+c>=3e3)){e.next=110;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(c,"个"),activeTime:f.formatTime((new Date).getTime())}),f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 110:_++,e.next=74;break;case 113:return i.length<20&&(f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(r,"】查找结束"),activeTime:f.formatTime((new Date).getTime())}),o=!1),f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(c,"个"),activeTime:f.formatTime((new Date).getTime())}),e.next=117,Object(m["y"])(1e3*Number(t.follow_interval));case 117:e.next=65;break;case 119:f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(c,"个"),activeTime:f.formatTime((new Date).getTime())}),f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】操作结束"),activeTime:that.formatTime((new Date).getTime())}),e.next=226;break;case 123:return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】正在获取评价用户信息"),activeTime:f.formatTime((new Date).getTime())}),w=!0,k=[],T=f.mallSearchList.findIndex((function(e){return e.shopid===Number(r)})),S=f.mallSearchList[T].itemid,L=0,f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取").concat(r,"第【").concat(L/52+1,"】页评价用户"),activeTime:f.formatTime((new Date).getTime())}),e.next=132,f.GetShopComment(S,r,t,L);case 132:if(k=e.sent,k.length){e.next=136;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"".concat(r,"暂无用户评价"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return","continue");case 136:F=0;case 137:if(!(F<k.length)){e.next=173;break}return I=k[F],A={},A["ShopId"]=I.author_shopid,A["UserName"]=I.author_username,e.next=144,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),A.ShopId);case 144:if(D=e.sent,!D.attention_shop_id){e.next=147;break}return e.abrupt("continue",170);case 147:return e.next=149,f.runAttention(A,t,I.shopid);case 149:if(N=e.sent,!N){e.next=157;break}return c++,e.next=154,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:A.ShopId});case 154:e.sent,e.next=160;break;case 157:return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(A.UserName,"失败"),activeTime:f.formatTime((new Date).getTime())}),w=!1,e.abrupt("continue",170);case 160:if(!Number(t.Tesk_follow_number)){e.next=166;break}if(!(c>=Number(t.Tesk_follow_number))){e.next=164;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注成功"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 164:e.next=170;break;case 166:if(!(t.following+c>=3e3)){e.next=170;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】新增").concat(c,"个"),activeTime:f.formatTime((new Date).getTime())}),f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 170:F++,e.next=137;break;case 173:f.$set(t,"newFollow",c);case 174:if(!w){e.next=224;break}if(!f.isStop){e.next=177;break}return e.abrupt("return",{v:void 0});case 177:return L+=52,f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】获取").concat(r,"第【").concat(L/52+1,"】页评价用户"),activeTime:f.formatTime((new Date).getTime())}),e.next=181,f.GetShopComment(S,r,t,L);case 181:k=e.sent,R=0;case 183:if(!(R<k.length)){e.next=219;break}if(!f.isStop){e.next=186;break}return e.abrupt("return",{v:void 0});case 186:return O=k[R],M={},M["ShopId"]=O.shopid,M["UserName"]=O.author_username,e.next=192,window.BaseUtilBridgeService.getAttentionUser(t.country,t.platform_mall_id.toString(),M.ShopId);case 192:if(j=e.sent,!j.attention_shop_id){e.next=195;break}return e.abrupt("continue",216);case 195:return e.next=197,f.runAttention(M,t,r);case 197:if(C=e.sent,!C){e.next=205;break}return c++,e.next=202,BaseUtilBridgeService.saveAttentionUser({country:t.country,mall_id:t.platform_mall_id.toString(),attention_shop_id:M.ShopId});case 202:e.sent,e.next=207;break;case 205:return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注").concat(M.UserName,"失败"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("continue",216);case 207:if(!Number(t.Tesk_follow_number)){e.next=213;break}if(!(c>=Number(t.Tesk_follow_number))){e.next=211;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注成功"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 211:e.next=216;break;case 213:if(!(t.following+c>=3e3)){e.next=216;break}return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注已达上限"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",{v:void 0});case 216:R++,e.next=183;break;case 219:return k.length<52&&(f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】查找结束"),activeTime:f.formatTime((new Date).getTime())}),w=!1),e.next=222,Object(m["y"])(1e3*Number(t.follow_interval));case 222:e.next=174;break;case 224:f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】成功关注").concat(c,"个粉丝"),activeTime:f.formatTime((new Date).getTime())}),f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】操作结束"),activeTime:f.formatTime((new Date).getTime())});case 226:case"end":return e.stop()}}),e,null,[[16,58,61,64]])})),u.s();case 24:if((l=u.n()).done){e.next=33;break}return e.delegateYield(p(),"t0",26);case 26:if(d=e.t0,"continue"!==d){e.next=29;break}return e.abrupt("continue",31);case 29:if("object"!==Object(a["a"])(d)){e.next=31;break}return e.abrupt("return",d.v);case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e["catch"](21),u.e(e.t1);case 38:return e.prev=38,u.f(),e.finish(38);case 41:f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】关注结束"),activeTime:f.formatTime((new Date).getTime())}),e.next=47;break;case 44:e.prev=44,e.t2=e["catch"](1),f.storeLogList["".concat(t.country)].log_message.push({option:"用户信息获取失败-line373，".concat(e.t2),activeTime:f.formatTime((new Date).getTime())});case 47:return e.prev=47,--r.count,e.finish(47);case 50:case"end":return e.stop()}}),e,null,[[1,44,47,50],[21,35,38,41]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isLoginFun",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.MallAPIInstance.isLogin(t);case 2:if(r=e.sent,200!==r.code||!r.data){e.next=7;break}return e.abrupt("return",!0);case 7:return f.storeLogList["".concat(t.country)].log_message.push({option:"【".concat(t.mall_alias_name||t.platform_mall_name,"】店铺未登录"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeMallData",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.platform_mall_id,e.next=5,f.MallAPIInstance.UserProfile(r);case 5:if(a=e.sent,200!==a.code){e.next=19;break}return n=a.data.username,r["username"]=n,e.next=11,f.MallAPIInstance.getHomeMallinfo(r);case 11:if(o=e.sent,200!==o.code){e.next=16;break}return e.abrupt("return",o.data);case 16:return e.abrupt("return","");case 17:e.next=20;break;case 19:return e.abrupt("return","");case 20:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeFollowingList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a["country"]=t.country,a["mallId"]=t.platform_mall_id,a["offset"]=0,a["mallName"]=t.mall_alias_name||t.platform_mall_name,e.next=7,this.getHomeFllowering(a);case 7:if(n=e.sent,o=n,o.length){e.next=11;break}return e.abrupt("return",[]);case 11:if(!(n.length>=20)){e.next=21;break}if(!this.isStop){e.next=14;break}return e.abrupt("break",21);case 14:return a["offset"]+=20,e.next=17,this.getHomeFllowering(a);case 17:n=e.sent,o=o.concat(n),e.next=11;break;case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"GetShopLikes",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.mallId,r["shopid"]=t.shopid,r["offset"]=t.offset,r["limit"]=20,r["offset_of_offset"]=0,r["timeStamp"]=(new Date).getTime(),e.next=10,f.MallAPIInstance.getFllower(r);case 10:if(a=e.sent,200!==a.code){e.next=15;break}return e.abrupt("return",a.data);case 15:return f.storeLogList["".concat(t.country)].log_message.push({option:"粉丝获取失败",activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterShopDatas",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r,a,n){var o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getActiveUser({country:r,mallId:a,userName:t.UserName});case 2:if(o=e.sent,i=new Date((new Date).toLocaleDateString()).getTime(),s=i-i*(Number(n)-1),!(o>s)){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));function t(t,r,a,n){return e.apply(this,arguments)}return t}()},{key:"getActiveUser",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r["country"]=t.country,r["mallId"]=t.mallId,r["username"]=t.userName,e.next=6,f.MallAPIInstance.getActiveTimeFollower(r);case 6:if(a=e.sent,200!==a.code){e.next=11;break}return e.abrupt("return",1e3*Number(a.data.last_active_time));case 11:return f.$refs.Logs.writeLog("店铺活跃状态获取失败:".concat(a.message),!1),e.abrupt("return","");case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"runAttention",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["country"]=r.country,n["mallId"]=r.platform_mall_id,n["userShopid"]=t.ShopId,n["followMallID"]=a,e.next=7,f.MallAPIInstance.buyerFollow(n);case 7:if(o=e.sent,200===o.code){e.next=12;break}f.storeLogList["".concat(r.country)].log_message.push({option:"【".concat(r.mall_alias_name||r.platform_mall_name,"】关注").concat(t.UserName,"失败,").concat(o.message),activeTime:f.formatTime((new Date).getTime())}),e.next=18;break;case 12:if(!o.data){e.next=17;break}return f.storeLogList["".concat(r.country)].log_message.push({option:"【".concat(r.mall_alias_name||r.platform_mall_name,"】关注").concat(t.UserName,"成功"),activeTime:f.formatTime((new Date).getTime())}),e.abrupt("return",!0);case 17:f.storeLogList["".concat(r.country)].log_message.push({option:"【".concat(r.mall_alias_name||r.platform_mall_name,"】关注").concat(t.UserName,"失败,").concat(o.message),activeTime:f.formatTime((new Date).getTime())});case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"GetShopComment",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r,a,n){var o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o={},o["mallId"]=a.platform_mall_id,o["country"]=a.country,o["itemid"]=t,o["offset"]=n,o["shopid"]=r,e.next=8,f.MallAPIInstance.getShoppComment(o);case 8:if(i=e.sent,200!==i.code){e.next=15;break}return s=i.data.ratings||[],c=s.filter((function(e){if(e.rating_star>=Number(a.min_order_evaluation))return e})),e.abrupt("return",c);case 15:return f.storeLogList["".concat(a.country)].log_message.push({option:"商品评价获取失败".concat(i.message),activeTime:that.formatTime((new Date).getTime())}),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e)})));function t(t,r,a,n){return e.apply(this,arguments)}return t}()}]),e}()},f68b:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r("4d63"),r("ac1f"),r("25f0"),r("d3b7"),r("3ca3"),r("10d1"),r("ddb0"),r("80e0"),r("5319"),r("a4d3"),r("e01a"),r("fb6a"),r("b64b");var a=r("7037"),n=r.n(a);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(){s=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,a,n){var i=new RegExp(e,a);return t.set(i,n||t.get(e)),o(i,r.prototype)}function a(e,r){var a=t.get(r);return Object.keys(a).reduce((function(t,r){return t[r]=e[a[r]],t}),Object.create(null))}return i(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=a(r,this)),r},r.prototype[Symbol.replace]=function(r,o){if("string"===typeof o){var i=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+i[t]})))}if("function"===typeof o){var s=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!==n()(e[e.length-1])&&(e=[].slice.call(e),e.push(a(e,s))),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},s.apply(this,arguments)}var c=r("1da1"),u=r("d4ec"),l=r("bee2"),m=(r("96cf"),r("5b81"),r("4de4"),r("81a6"),function(){function e(t){Object(u["a"])(this,e),this._this=t}return Object(l["a"])(e,[{key:"urlencode",value:function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}},{key:"guid",value:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}))}},{key:"addCancerMall",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a=encodeURI(r.keyword),n={},n["mallId"]=r.mallId,n["by"]=r.by,n["keyword"]=r.keyword,n["limit"]=r.limit,n["newest"]=r.newest,n["order"]=r.order,n["page_type"]=r.page_type,n["scenario"]="PAGE_GLOBAL_SEARCH",n["version"]=2,o=this.guid(),e.next=16,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v4/search/search_items?",n,{headers:{"Content-type":"application/json",referer:"/search?keyword=".concat(a,"&trackingId=searchhint-1646186021-961459e5-99cb-11ec-85af-8a3d66826fb4"),Accept:"application/json","If-None-Match-":this.guid(),"x-api-source":"pc","sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","X-CSRFToken":o}});case 16:return i=e.sent,e.abrupt("return",JSON.parse(i));case 20:return e.prev=20,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"店铺搜索异常 ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[1,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllower",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.shopid,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,e.next=11,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.shopid,"/followers/?"),a,{headers:{"Content-type":"text/html; charset=utf-8",referer:"/shop/".concat(r.shopid,"/followers/?__classic__=1"),accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 11:n=e.sent,o=JSON.parse(n).data,i=s(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),c={},u=[];do{c=i.exec(o),null!==(l=c)&&void 0!==l&&l.groups&&u.push(c.groups)}while(c=i.exec(o));if(!n){e.next=21;break}return e.abrupt("return",{code:200,data:u});case 21:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"粉丝请求异常 ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[1,24]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyerFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["isAddCsrfToken"]=!0,a["userShopid"]=r.userShopid,a["csrfmiddlewaretoken"]=this.guid().replaceAll("-",""),e.next=9,this._this.$shopeemanService.postChineseBuyer(r.country,"/buyer/follow/shop/".concat(r.userShopid,"/"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":"52","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1",referer:"/shop/".concat(r.followMallID,"/followers/?__classic__=1"),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" */*","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid()}});case 9:if(n=e.sent,o=JSON.parse(n),200!==o.status){e.next=19;break}if(!JSON.parse(o.data).success){e.next=16;break}return e.abrupt("return",{code:200,data:!0});case 16:return e.abrupt("return",{code:200,data:!1});case 17:e.next=20;break;case 19:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"关注请求异常 ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"buyerUNFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["isAddCsrfToken"]=!0,a["ShopId"]=r.ShopId,a["csrfmiddlewaretoken"]=this.guid().replaceAll("-",""),e.next=9,this._this.$shopeemanService.postChineseBuyer(r.country,"/buyer/unfollow/shop/".concat(r.ShopId,"/"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Content-Length":"52","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?1",referer:"/shop/".concat(r.followMallID,"/followers/?__classic__=1"),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" */*","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid()}});case 9:if(n=e.sent,!n){e.next=14;break}return e.abrupt("return",{code:200,data:!0});case 14:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"取消关注用户请求异常 ".concat(e.t0)});case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CommentFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.userShopid,n=this.guid(),e.next=8,this._this.$shopeemanService.postChineseBuyer(r.country,"/api/v4/shop/follow",a,{headers:{"Content-Type":"application/json","Content-Length":"20","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?0",referer:"/shop/".concat(r.userShopid),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" application/json","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-CN,zh;q=0.9","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid(),"X-CSRFToken":n}});case 8:if(o=e.sent,i=JSON.parse(o),200!==i.status){e.next=18;break}if(!JSON.parse(i.data).success){e.next=15;break}return e.abrupt("return",{code:200,data:!0});case 15:return e.abrupt("return",{code:200,data:!1});case 16:e.next=19;break;case 18:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"关注评价请求异常 ".concat(e.t0)});case 24:case"end":return e.stop()}}),e,this,[[1,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CommentUNFollow",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.userShopid,n=this.guid(),e.next=8,this._this.$shopeemanService.postChineseBuyer(r.country,"/api/v4/shop/unfollow",a,{headers:{"Content-Type":"application/json","Content-Length":"20","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"sec-ch-ua-mobile":"?0",referer:"/shop/".concat(r.userShopid),"Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Accept:" application/json","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-CN,zh;q=0.9","X-Requested-With":"XMLHttpRequest","If-None-Match-":this.guid(),"X-CSRFToken":n}});case 8:if(o=e.sent,i=JSON.parse(o),200!==i.status){e.next=18;break}if(!JSON.parse(i.data).success){e.next=15;break}return e.abrupt("return",{code:200,data:!0});case 15:return e.abrupt("return",{code:200,data:!1});case 16:e.next=19;break;case 18:return e.abrupt("return",{code:201,data:!1,message:"请求失败"});case 19:e.next=24;break;case 21:return e.prev=21,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"取关评价用户请求异常 ".concat(e.t0)});case 24:case"end":return e.stop()}}),e,this,[[1,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getActiveTimeFollower",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["shopid"]=r.mallId,a["username"]=r.username,e.next=8,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v4/shop/get_shop_detail?",a,{headers:{"X-API-SOURCE":"pc","Content-Type":"application/xml"}});case 8:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=14;break}return e.abrupt("return",{code:200,data:o.data});case 14:return e.abrupt("return",{code:201,data:[],message:o.error});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"粉丝活跃时间 ".concat(e.t0)});case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowerHostMall",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,e.next=10,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.mallId,"/followers/?"),a,{headers:{"Content-type":"text/html; charset=utf-8",referer:"/shop/".concat(r.mallId,"/followers/?__classic__=1"),accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 10:n=e.sent,o=JSON.parse(n).data,i=s(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),c={},u=[];do{c=i.exec(o),null!==(l=c)&&void 0!==l&&l.groups&&u.push(c.groups)}while(c=i.exec(o));if(!n){e.next=20;break}return e.abrupt("return",{code:200,data:u});case 20:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 21:e.next=26;break;case 23:return e.prev=23,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"粉丝请求异常 ".concat(e.t0)});case 26:case"end":return e.stop()}}),e,this,[[1,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getShoppComment",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["filter"]=0,a["flag"]=1,a["itemid"]=r.itemid,a["limit"]=52,a["offset"]=r.offset,a["shopid"]=r.shopid,a["type"]=0,e.next=13,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v2/item/get_ratings?",a,{headers:{accept:"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Mobile Safari/537.36","sec-ch-ua":'" Not A;Brand";v="99", "Chromium";v="98", "Google Chrome";v="98"',"x-requested-with":"XMLHttpRequest","If-None-Match-":this.guid(),"sec-ch-ua-mobile":"?1","sec-ch-ua-platform":'"Android"',"sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","Accept-Encoding":"gzip, deflate, br"}});case 13:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=19;break}return e.abrupt("return",{code:200,data:o.data});case 19:return e.abrupt("return",{code:201,data:[],message:o.error});case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"获取评论 ".concat(e.t0)});case 25:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomeMallinfo",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t,a={},a["mallId"]=r.mallId,a["username"]=r.username,e.next=7,this._this.$shopeemanService.getChinese(r.country,"/api/v4/shop/get_shop_detail?",a,{headers:{"X-API-SOURCE":"pc","Content-Type":"application/xml",Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml","Accept-Encoding":"gzip, deflate"}});case 7:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),o.error){e.next=13;break}return e.abrupt("return",{code:200,data:o.data});case 13:return e.abrupt("return",{code:201,data:[],message:o.error});case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:[],message:"主要店铺信息 ".concat(e.t0)});case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"UserProfile",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,e.next=6,this._this.$shopeemanService.getChineseBuyer(r.country,"/api/v2/user/profile/get/",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml"}});case 6:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),!o.error){e.next=12;break}return e.abrupt("return",{code:201,data:"",message:o.error_msg});case 12:return e.abrupt("return",{code:200,data:o.data});case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:[],message:"用户信息获取 ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFllowering",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o,i,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.mallId,a["offset"]=r.offset,a["limit"]=r.limit,a["offset_of_offset"]=r.offset_of_offset,a["_"]=r.timeStamp,a["__classic__"]=1,e.next=11,this._this.$shopeemanService.getChineseBuyer(r.country,"/shop/".concat(r.mallId,"/following/?"),a,{headers:{referer:"/shop/".concat(r.mallId,"/following/"),"Accept-Encoding":"gzip, deflate"}});case 11:n=e.sent,o=JSON.parse(n).data,i=s(/<li[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower\x2Dshop\x2Did=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?data\x2Dfollower(?:(?!>)[\s\S])+>[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?<a(((?:(?!>)[\s\S])+username='((?:(?!>)[\s\S])+)'[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?userid=[\s\S]([0-9]+?)[\s\S][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?class=[\s\S]shop\x2Dhref[\s\S])|())>/gi,{ShopId:1,UserName:4,UserId:5}),c={},u=[];do{c=i.exec(o),null!==(l=c)&&void 0!==l&&l.groups&&u.push(c.groups)}while(c=i.exec(o));if(!n){e.next=21;break}return e.abrupt("return",{code:200,data:u});case 21:return e.abrupt("return",{code:201,data:[],message:"请求失败"});case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"host粉丝请求异常 ".concat(e.t0)});case 27:case"end":return e.stop()}}),e,this,[[1,24]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isLogin",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,e.prev=1,a={},a["mallId"]=r.platform_mall_id,e.next=6,this._this.$shopeemanService.getChinese(r.country,"/api/v2/login/?",a,{headers:{Accept:"application/json, application/xml, text/json, text/x-json, text/javascript, text/xml"}});case 6:if(n=e.sent,o=JSON.parse(JSON.parse(n).data),!o.errcode){e.next=12;break}return e.abrupt("return",{code:200,data:!1,message:"店铺未登录"});case 12:return e.abrupt("return",{code:200,data:!0});case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"判断用户是否登录请求异常 ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"add0",value:function(e){return e<10?"0"+e:e}},{key:"formatTime",value:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),i=t.getMinutes(),s=t.getSeconds();return r+"-"+this.add0(a)+"-"+this.add0(n)+" "+this.add0(o)+":"+this.add0(i)+":"+this.add0(s)}}]),e}())}}]);