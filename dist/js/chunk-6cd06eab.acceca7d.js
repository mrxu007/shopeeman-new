(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cd06eab"],{"30be":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"contaniner"},[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"自动回复",name:"autoReply"}},[s("el-row",{staticClass:"header"},[s("el-col",{staticClass:"header-top"},[s("storeChoose",{staticStyle:{"margin-bottom":"10px"},attrs:{source:"autoReply"},on:{changeMallList:t.changeMallList}}),s("el-col",{staticClass:"header-two-top",attrs:{span:24}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.autoReplyVisible=!0,t.autoReplyTitle="批量设置自动回复内容"}}},[t._v(" 批量设置预设自动回复 ")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSetAutoReply(1,"",1)}}},[t._v("批量开启预设自动回复")]),s("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSetAutoReply(0,"",1)}}},[t._v("批量关闭预设自动回复")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.autoReplyVisible=!0,t.autoReplyTitle="批量设置离线回复内容"}}},[t._v(" 批量设置离线自动回复 ")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSetAutoReply(1)}}},[t._v("批量开启离线自动回复")]),s("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSetAutoReply(0)}}},[t._v("批量关闭离线自动回复")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchAutoReplyTable}},[t._v("搜索")]),s("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.autoReplyShowConsole,callback:function(e){t.autoReplyShowConsole=e},expression:"autoReplyShowConsole"}},[t._v("隐藏日志")])],1)],1)],1),s("el-row",{staticClass:"article"},[s("el-col",{attrs:{span:t.isShowLog?20:24}},[s("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.autoReplyLoad,expression:"autoReplyLoad"}],ref:"tableAutoReply",attrs:{height:t.height,data:t.tableDataAutoReply,"use-virtual":"","data-changes-scroll-top":!1,"row-height":t.rowHeight,border:!1},on:{"selection-change":t.handleSelectionChange1,"table-body-scroll":t.tableScroll}},[s("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),s("u-table-column",{attrs:{align:"left",type:"index",label:"序列号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"店铺名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"预设自动回复"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"reply_setting"},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(s){return s.stopPropagation(),t.setAutoReply(e.row)}},model:{value:e.row.auto_reply_status,callback:function(s){t.$set(e.row,"auto_reply_status",s)},expression:"scope.row.auto_reply_status"}}),s("div",{staticClass:"reply_content"},[t._v(" "+t._s(e.row.auto_reply_content)+" ")])],1)]}}])}),s("u-table-column",{attrs:{align:"left",label:"离线自动回复"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"reply_setting"},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(s){return s.stopPropagation(),t.setOfflineReply(e.row)}},model:{value:e.row.status,callback:function(s){t.$set(e.row,"status",s)},expression:"scope.row.status"}}),s("div",{staticClass:"reply_content"},[t._v(" "+t._s(e.row.content)+" ")])],1)]}}])})],1)],1),t.isShowLog?s("el-col",{attrs:{span:4}},[s("div",{staticClass:"log-show",style:"height:"+t.height+"px"})]):t._e()],1),s("Logs",{ref:"autoReplyLogs",attrs:{clear:""},model:{value:t.autoReplyShowConsole,callback:function(e){t.autoReplyShowConsole=e},expression:"autoReplyShowConsole"}})],1),s("el-tab-pane",{attrs:{label:"常见问题助理",name:"FAQAssistant"}},[s("el-row",{staticClass:"header"},[s("el-col",{staticClass:"header-top"},[s("storeChoose",{staticStyle:{"margin-bottom":"10px"},attrs:{source:"FAQAssistant"},on:{changeMallList:t.changeMallList}}),s("el-col",{staticClass:"header-two-top",attrs:{span:24}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allFaqsShopSettings(1,1)}}},[t._v("批量开启")]),s("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allFaqsShopSettings(0,1)}}},[t._v("批量关闭")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.updateFaqsShop("批量添加常见问题")}}},[t._v(" 批量添加常见问题 ")]),s("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allFaqsShopSettings()}}},[t._v("批量删除常见问题")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.scFaqsTable}},[t._v("搜索")]),s("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.FAQAssistantShowConsole,callback:function(e){t.FAQAssistantShowConsole=e},expression:"FAQAssistantShowConsole"}},[t._v("隐藏日志")])],1)],1)],1),s("el-row",{staticClass:"article"},[s("el-col",{attrs:{span:t.isShowLog?20:24}},[s("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.FAQAssistantLoad,expression:"FAQAssistantLoad"}],ref:"FAQAssistant",attrs:{height:t.height,"use-virtual":"","data-changes-scroll-top":!1,"row-height":t.rowHeight,data:t.tableDataFAQAssistant,border:!1},on:{"selection-change":t.handleSelectionChange2,"table-body-scroll":t.tableScroll}},[s("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),s("u-table-column",{attrs:{align:"left",type:"index",label:"序列号",width:"80"}}),s("u-table-column",{attrs:{align:"left",label:"店铺名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"分组名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.group_name)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"问候语",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.greeting_content)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"常见问题助理",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(s){return s.stopPropagation(),t.setFaqsShopSettings(e.row)}},model:{value:e.row.faq_status,callback:function(s){t.$set(e.row,"faq_status",s)},expression:"scope.row.faq_status"}})]}}])}),s("u-table-column",{attrs:{align:"left",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.updateFaqsShop("编辑常见问题",e.row)}}},[t._v("编辑 ")]),s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.deleteFaqsShopSettings(e.row)}}},[t._v("删除")])]}}])})],1)],1),t.isShowLog?s("el-col",{attrs:{span:4}},[s("div",{staticClass:"log-show",style:"height:"+t.height+"px"})]):t._e()],1),s("Logs",{ref:"FAQAssistantLogs",attrs:{clear:""},model:{value:t.FAQAssistantShowConsole,callback:function(e){t.FAQAssistantShowConsole=e},expression:"FAQAssistantShowConsole"}})],1),s("el-tab-pane",{attrs:{label:"讯息快捷",name:"messageQuickly"}},[s("el-row",{staticClass:"header"},[s("el-col",{staticClass:"header-top"},[s("storeChoose",{staticStyle:{"margin-bottom":"10px"},attrs:{source:"messageQuickly"},on:{changeMallList:t.changeMallList}}),s("el-col",{staticClass:"header-two-top",attrs:{span:24}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSwitch_DeleteMessageShortcutsGroups(1,1)}}},[t._v("批量开启 ")]),s("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSwitch_DeleteMessageShortcutsGroups(0,1)}}},[t._v("批量关闭")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addMessageQuickly()}}},[t._v("批量添加")]),s("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){return t.allSwitch_DeleteMessageShortcutsGroups()}}},[t._v("批量删除")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.messageShortcutsGroupsTable}},[t._v("搜索")]),s("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.messageQuicklyShowConsole,callback:function(e){t.messageQuicklyShowConsole=e},expression:"messageQuicklyShowConsole"}},[t._v("隐藏日志")])],1)],1)],1),s("el-row",{staticClass:"article"},[s("el-col",{attrs:{span:t.isShowLog?20:24}},[s("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.messageQuicklyLoad,expression:"messageQuicklyLoad"}],ref:"tableMessageQuickly",attrs:{height:t.height,"use-virtual":"",data:t.tableDataMessageQuickly,"data-changes-scroll-top":!1,"row-height":t.rowHeight,border:!1},on:{"selection-change":t.handleSelectionChange3,"table-body-scroll":t.tableScroll}},[s("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),s("u-table-column",{attrs:{align:"left",type:"index",label:"序列号",width:"80"}}),s("u-table-column",{attrs:{align:"left",label:"店铺名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"分组名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),s("u-table-column",{attrs:{align:"left",label:"分组状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(s){return s.stopPropagation(),t.switchMessageShortcutsGroups(e.row)}},model:{value:e.row.state,callback:function(s){t.$set(e.row,"state",s)},expression:"scope.row.state"}})]}}])}),s("u-table-column",{attrs:{align:"left",label:"讯息内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"message_content"},t._l(e.row.message_shortcuts,(function(e){return s("p",{key:e.id,staticClass:"contentP"},[t._v(t._s(e.content))])})),0)]}}])}),s("u-table-column",{attrs:{align:"left",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.updateMessageQuickly(e.row)}}},[t._v("编辑")]),s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.deleteMessageShortcutsGroups(e.row)}}},[t._v("删除")])]}}])})],1)],1),t.isShowLog?s("el-col",{attrs:{span:4}},[s("div",{staticClass:"log-show",style:"height:"+t.height+"px"})]):t._e()],1),s("Logs",{ref:"messageQuicklyLogs",attrs:{clear:""},model:{value:t.messageQuicklyShowConsole,callback:function(e){t.messageQuicklyShowConsole=e},expression:"messageQuicklyShowConsole"}})],1)],1),s("div",{staticClass:"autoReply_dialog"},[s("el-dialog",{attrs:{title:t.autoReplyTitle,visible:t.autoReplyVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.autoReplyVisible=e}}},[s("div",[s("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"textarea",rows:12,placeholder:"请输入内容",resize:"none"},model:{value:t.autoReplyText,callback:function(e){t.autoReplyText=e},expression:"autoReplyText"}}),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.allSetAutoReply(-1,t.autoReplyText)}}},[t._v("确定")]),s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.autoReplyVisible=!1}}},[t._v("取消")])],1)],1)])],1),s("div",{staticClass:"FAQAssistant_dialog"},[s("el-dialog",{attrs:{title:t.FAQAssistantTitle,visible:t.FAQAssistantVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.FAQAssistantVisible=e}}},[t.FAQAssistantAction?s("div",{staticClass:"FAQAssistant_box"},[s("div",{staticClass:"FAQAssistant_title"},[s("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("分组")]),s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入分组（长度<80）",size:"mini"},model:{value:t.FAQAssistantAction.group_name,callback:function(e){t.$set(t.FAQAssistantAction,"group_name",e)},expression:"FAQAssistantAction.group_name"}})],1),s("div",{staticClass:"FAQAssistant_title"},[s("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("问候语")]),s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入问候语（长度<80）",size:"mini"},model:{value:t.FAQAssistantAction.greeting_content,callback:function(e){t.$set(t.FAQAssistantAction,"greeting_content",e)},expression:"FAQAssistantAction.greeting_content"}})],1),s("div",{staticClass:"FAQAssistant_content"},t._l(t.FAQAssistantAction.categorys,(function(e,a){return s("div",{key:a,staticClass:"FAQAssistant_item"},[s("div",{staticClass:"item_title"},[s("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("常见问题类型")]),s("el-input",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入问题类型（长度<80）",size:"mini"},model:{value:e.title,callback:function(s){t.$set(e,"title",s)},expression:"item.title"}})],1),s("div",{staticClass:"item_content"},[s("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("内容1")]),s("div",{staticClass:"content_content"},[s("el-input",{attrs:{placeholder:"请输入具体问题（长度<80）",size:"mini"},model:{value:e.questions[0].question,callback:function(s){t.$set(e.questions[0],"question",s)},expression:"item.questions[0].question"}}),s("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"mini",type:"textarea",rows:3,placeholder:"请输入具体答案（长度<80）",resize:"none"},model:{value:e.questions[0].answer,callback:function(s){t.$set(e.questions[0],"answer",s)},expression:"item.questions[0].answer"}})],1)]),s("div",{staticClass:"item_content"},[s("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("内容2")]),s("div",{staticClass:"content_content"},[s("el-input",{attrs:{placeholder:"请输入具体问题（长度<80）",size:"mini"},model:{value:e.questions[1].question,callback:function(s){t.$set(e.questions[1],"question",s)},expression:"item.questions[1].question"}}),s("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"mini",type:"textarea",rows:3,placeholder:"请输入具体答案（长度<80）",resize:"none"},model:{value:e.questions[1].answer,callback:function(s){t.$set(e.questions[1],"answer",s)},expression:"item.questions[1].answer"}})],1)]),s("div",{staticClass:"item_content"},[s("div",{staticStyle:{width:"110px","padding-right":"10px","text-align":"right"}},[t._v("内容3")]),s("div",{staticClass:"content_content"},[s("el-input",{attrs:{placeholder:"请输入具体问题（长度<80）",size:"mini"},model:{value:e.questions[2].question,callback:function(s){t.$set(e.questions[2],"question",s)},expression:"item.questions[2].question"}}),s("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"mini",type:"textarea",rows:3,placeholder:"请输入具体答案（长度<80）",resize:"none"},model:{value:e.questions[2].answer,callback:function(s){t.$set(e.questions[2],"answer",s)},expression:"item.questions[2].answer"}})],1)])])})),0),s("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"10px"}},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateCategorys(1)}}},[t._v("新增类型")]),s("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",disabled:t.FAQAssistantAction.categorys.length<2},on:{click:function(e){return t.updateCategorys()}}},[t._v("删除 ")])],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmFaqsShopSettings}},[t._v("确定")]),s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.FAQAssistantVisible=!1}}},[t._v("取消")])],1)]):t._e()])],1),s("div",{staticClass:"messageQuickly_dialog"},[s("el-dialog",{attrs:{title:t.messageQuicklyTitle,visible:t.messageQuicklyVisible,"close-on-click-modal":!1,width:"450px"},on:{"update:visible":function(e){t.messageQuicklyVisible=e}}},[s("div",{staticClass:"messageQuickly_box"},[s("div",{staticClass:"messageQuickly_title"},[s("div",{staticStyle:{width:"80px"}},[t._v("群组名称")]),s("el-input",{attrs:{size:"mini"},model:{value:t.messageQuicklyAction&&t.messageQuicklyAction.name,callback:function(e){t.$set(t.messageQuicklyAction&&t.messageQuicklyAction,"name",e)},expression:"messageQuicklyAction && messageQuicklyAction.name"}})],1),s("div",{staticClass:"messageQuickly_content"},t._l(t.messageQuicklyAction&&t.messageQuicklyAction.message_shortcuts,(function(e,a){return s("div",{key:a,staticClass:"content"},[s("div",{staticStyle:{width:"60px"}},[t._v("讯息"+t._s(a+1))]),s("el-input",{attrs:{size:"mini"},model:{value:e.content,callback:function(s){t.$set(e,"content",s)},expression:"item.content"}})],1)})),0),s("div",{staticClass:"messageQuickly_add"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addMessageQuicklyList}},[t._v("添 加 讯 息")])],1),s("div",{staticClass:"messageQuickly_footer"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.messageShortcutsGroups_dialog}},[t._v("确定")]),s("el-button",{attrs:{size:"mini"},on:{click:function(e){t.messageQuicklyVisible=!1}}},[t._v("取消")])],1)])])],1)],1)},i=[],n=s("1da1"),l=(s("c740"),s("a434"),s("ac1f"),s("5319"),s("159b"),s("99af"),s("b0c0"),s("96cf"),s("feb6")),o=s("0e0b"),r={components:{storeChoose:l["a"]},data:function(){return{activeName:"autoReply",source:"autoReply",isShowLog:!1,height:300,rowHeight:50,SiteList:{autoReply:[],FAQAssistant:[],messageQuickly:[]},autoReplyVisible:!1,autoReplyTitle:"",autoReplyText:"",tableDataAutoReply:[],selectDataAutoReply:[],FAQAssistantVisible:!1,FAQAssistantTitle:"",FAQAssistantAction:null,tableDataFAQAssistant:[],selectDataFAQAssistant:[],messageQuicklyVisible:!1,messageQuicklyTitle:"",messageQuicklyAction:null,tableDataMessageQuickly:[],selectDataMessageQuickly:[],autoReplyShowConsole:!0,FAQAssistantShowConsole:!0,messageQuicklyShowConsole:!0,autoReplyLoad:0,FAQAssistantLoad:0,messageQuicklyLoad:0}},watch:{},created:function(){var t=this;this.resizeHeight(),window.addEventListener("resize",(function(e){t.resizeHeight()}))},methods:{changeMallList:function(t){console.log(t,"val"),t.mallList&&t.mallList.length>0&&(this.source=t.source,this.SiteList[t.source]=t.mallList)},searchAutoReplyTable:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableDataAutoReply=[],s=t.SiteList.autoReply||[],t.$refs.autoReplyLogs.writeLog("开始查询",!0),t.autoReplyLoad=s.length,e.next=6,Object(o["d"])(s,t.getAutoReplyTable);case 6:e.sent,t.autoReplyLoad=0;case 8:case"end":return e.stop()}}),e)})))()},getAutoReplyTable:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c,u,m,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},n={country:t.country,platform_mall_id:t.platform_mall_id,platform_mall_name:t.platform_mall_name,mall_alias_name:t.mall_alias_name},s.$refs.autoReplyLogs.writeLog("正在获取店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设回复"),!0),a.next=5,s.$shopeemanService.scOfflineReply(t.country,{shop_id:t.platform_mall_id,timezone:8});case 5:return l=a.sent,a.next=8,s.$shopeemanService.scChatSetting(t.country,{shop_id:t.platform_mall_id});case 8:if(o=a.sent,a.prev=9,r=JSON.parse(l),c=JSON.parse(r.data),u=JSON.parse(o),m=JSON.parse(u.data),console.log(r,u),200!==r.status){a.next=20;break}s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复获取成功"),!0),n=Object.assign(n,c,{status:"enabled"===c.status}),a.next=26;break;case 20:if(403!==r.status){a.next=25;break}return s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),a.abrupt("return");case 25:s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复获取失败"),!1);case 26:200===u.status?(s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复获取成功"),!0),n=Object.assign(n,m,{auto_reply_status:"enabled"===m.auto_reply_status})):s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复获取失败"),!1),p=s.tableDataAutoReply.findIndex((function(t){return t.platform_mall_id===n.platform_mall_id})),p>-1?s.tableDataAutoReply.splice(p,1,n):s.tableDataAutoReply.push(n),a.next=34;break;case 31:a.prev=31,a.t0=a["catch"](9),s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设回复获取失败"),!1);case 34:return a.prev=34,i.count--,a.finish(34);case 37:case"end":return a.stop()}}),a,null,[[9,31,34,37]])})))()},setAutoReply:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:"",n=e.length>2&&void 0!==e[2]?e[2]:-1,s.autoReplyLoad||(s.autoReplyLoad=1),l=t.auto_reply_status,n>-1&&(l=!!n),s.$refs.autoReplyLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复"),!0),a.next=8,s.$shopeemanService.setChatSetting(t.country,{shop_id:parseInt(t.platform_mall_id),auto_reply_status:l?"enabled":"disabled",auto_reply_content:i||t.auto_reply_content});case 8:if(o=a.sent,r=JSON.parse(o),console.log("setChatSettingRes",r),!(r.status>=200&&r.status<300)){a.next=15;break}s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复设置成功"),!0),a.next=21;break;case 15:if(403!==r.status){a.next=20;break}return s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),a.abrupt("return");case 20:s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设自动回复设置失败"),!1);case 21:--s.autoReplyLoad||s.searchAutoReplyTable();case 22:case"end":return a.stop()}}),a)})))()},setOfflineReply:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:"",n=e.length>2&&void 0!==e[2]?e[2]:-1,s.autoReplyLoad||(s.autoReplyLoad=1),l=t.status,n>-1&&(l=!!n),s.$refs.autoReplyLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复"),!0),o={shop_id:parseInt(t.platform_mall_id),status:l?"enabled":"disabled",content:i||t.content,timezone:8,working_days:t.working_days},o=JSON.stringify(o).replace(/\s*(\d+):\s*(\d+):00/g,"$1:$2"),a.next=10,s.$shopeemanService.setOfflineReply(t.country,JSON.parse(o),{headers:{referer:"/portal/assistant/basic/autoReply"}});case 10:if(r=a.sent,c=JSON.parse(r),console.log(c),!(c.status>=200&&c.status<300)){a.next=17;break}s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复设置成功"),!0),a.next=23;break;case 17:if(403!==c.status){a.next=22;break}return s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),a.abrupt("return");case 22:s.$refs.autoReplyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的预设离线回复设置失败"),!1);case 23:--s.autoReplyLoad||s.searchAutoReplyTable();case 24:case"end":return a.stop()}}),a)})))()},allSetAutoReply:function(t,e,s){var a=this;0!==this.selectDataAutoReply.length?(this.autoReplyVisible&&(this.autoReplyVisible=!1,s="批量设置自动回复内容"===this.autoReplyTitle),this.autoReplyLoad=this.selectDataAutoReply.length,this.selectDataAutoReply.forEach((function(i){s&&a.setAutoReply(i,e,t),!s&&a.setOfflineReply(i,e,t)}))):this.$message.error("至少选择一条预设回复")},scFaqsTable:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableDataFAQAssistant=[],s=t.SiteList.FAQAssistant||[],t.$refs.FAQAssistantLogs.writeLog("开始查询",!0),t.FAQAssistantLoad=s.length,e.next=6,Object(o["d"])(s,t.getFaqsTable);case 6:e.sent,t.FAQAssistantLoad=0;case 8:case"end":return e.stop()}}),e)})))()},getFaqsTable:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},a.prev=1,s.$refs.FAQAssistantLogs.writeLog("正在获取店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),a.next=5,s.$shopeemanService.scFaqs(t.country,{shop_id:t.platform_mall_id,group_type:1});case 5:n=a.sent,l={country:t.country,platform_mall_id:t.platform_mall_id,platform_mall_name:t.platform_mall_name,mall_alias_name:t.mall_alias_name},o=JSON.parse(n),o.status>=200&&o.status<300?(r=o.data,c=JSON.parse(r),s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题获取成功，共有").concat(c.length||0,"条"),!0),c.forEach((function(t){t=Object.assign(t,l,{faq_status:!!t.faq_status});var e=s.tableDataFAQAssistant.findIndex((function(t){return t.faq_id===l.faq_id}));e>-1?s.tableDataFAQAssistant.splice(e,1,t):s.tableDataFAQAssistant.push(t)}))):403===o.status?s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1):s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题获取失败"),!1),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题获取失败"),!1);case 14:return a.prev=14,i.count--,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[1,11,14,17]])})))()},setFaqsShopSettings:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:-1,n=e.length>2?e[2]:void 0,s.FAQAssistantLoad||(s.FAQAssistantLoad=1),s.$refs.FAQAssistantLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),l={shop_id:parseInt(t.platform_mall_id),faq_id:t.faq_id},n||(o=t.faq_status?1:0,i>-1&&(o=i),l["faq_status"]=o),a.next=8,s.$shopeemanService.faqsShopSettings(t.country,l);case 8:r=a.sent,c=JSON.parse(r),console.log("faqsShopSettingsRes",c),c.status>=200&&c.status<300?s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题设置成功"),!0):s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题设置失败"),!1),--s.FAQAssistantLoad||s.scFaqsTable();case 13:case"end":return a.stop()}}),a)})))()},deleteFaqsShopSettings:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.FAQAssistantLoad||(e.FAQAssistantLoad=1),e.$refs.FAQAssistantLogs.writeLog("正在删除店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),s.next=4,e.$shopeemanService.deleteFaqsShopSettings(t.country,{shop_id:parseInt(t.platform_mall_id),faq_id:t.faq_id},{headers:{referer:"/portal/assistant/faq","Content-Type":"application/json;charset=UTF-8"}});case 4:a=s.sent,i=JSON.parse(a),console.log("deleteFaqsShopRes",i),i.status>=200&&i.status<300?e.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题删除成功"),!0):e.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题删除失败"),!1),--e.FAQAssistantLoad||e.scFaqsTable();case 9:case"end":return s.stop()}}),s)})))()},updateFaqsShopSettings:function(t,e){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s.FAQAssistantLoad||(s.FAQAssistantLoad=1),s.FAQAssistantVisible=!1,console.log("updateFaqsShopSettings",t),!e){a.next=14;break}return s.$refs.FAQAssistantLogs.writeLog("正在编辑店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),i={shop_id:parseInt(t.platform_mall_id),group_name:t.group_name,greeting_content:t.greeting_content,faq_id:t.faq_id,faq_type:t.faq_type,categorys:t.categorys,faq_status:t.faq_status?1:0},a.next=8,s.$shopeemanService.faqsShopSettings(t.country,i);case 8:n=a.sent,l=JSON.parse(n),console.log("faqsShopSettingsRes",l),l.status>=200&&l.status<300?s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题编辑成功"),!0):s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题编辑失败"),!1),a.next=22;break;case 14:return s.$refs.FAQAssistantLogs.writeLog("正在添加店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题"),!0),o={shop_id:parseInt(t.platform_mall_id),group_name:t.group_name,greeting_content:t.greeting_content,faq_status:t.faq_status?1:0,faq_type:t.faq_type,categorys:t.categorys},a.next=18,s.$shopeemanService.updateFaqsShopSettings(t.country,o);case 18:r=a.sent,c=JSON.parse(r),c.status>=200&&c.status<300?s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题添加成功"),!0):s.$refs.FAQAssistantLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的常见问题添加失败"),!1),console.log("updateFaqsShopSettingsRes",c);case 22:--s.FAQAssistantLoad||s.scFaqsTable();case 23:case"end":return a.stop()}}),a)})))()},confirmFaqsShopSettings:function(){var t=this,e=this.FAQAssistantAction&&this.FAQAssistantAction.platform_mall_id;e?this.updateFaqsShopSettings(this.FAQAssistantAction,1):(this.FAQAssistantLoad=this.SiteList.FAQAssistant.length,this.SiteList.FAQAssistant.forEach((function(e){var s=JSON.parse(JSON.stringify(e));s=Object.assign(s,t.FAQAssistantAction),t.updateFaqsShopSettings(s)})))},updateFaqsShop:function(t,e){if(this.FAQAssistantVisible=!0,this.FAQAssistantTitle=t,"编辑常见问题"===t){var s=e;console.log("updateFaqsShop",s);for(var a=0;a<s.categorys.length;a++){var i=s.categorys[a].questions||[];i[0]=i[0]||{answer:"",is_fake:!0,question:""},i[1]=i[1]||{answer:"",is_fake:!0,question:""},i[2]=i[2]||{answer:"",is_fake:!0,question:""},s.categorys[a].questions=i}this.FAQAssistantAction=s}else this.FAQAssistantAction={group_name:"",greeting_content:"",faq_status:0,faq_type:1,categorys:[{is_fake:!0,title:"",questions:[{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""}]}]}},updateCategorys:function(t){t?this.FAQAssistantAction.categorys.push({is_fake:!0,title:"",questions:[{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""},{answer:"",is_fake:!0,question:""}]}):this.FAQAssistantAction.categorys.length>1&&this.FAQAssistantAction.categorys.splice(this.FAQAssistantAction.categorys.length-1,1)},allFaqsShopSettings:function(t,e){var s=this;this.FAQAssistantLoad=this.selectDataFAQAssistant.length,this.selectDataFAQAssistant.length?this.selectDataFAQAssistant.forEach((function(a){e&&s.setFaqsShopSettings(a,t),!e&&s.deleteFaqsShopSettings(a,t)})):this.$message.error("至少选择一个常见问题")},messageShortcutsGroupsTable:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.messageQuicklyLogs.writeLog("开始查询",!0),t.tableDataMessageQuickly=[],s=t.SiteList.messageQuickly||[],t.messageQuicklyLoad=s.length,e.next=6,Object(o["d"])(s,t.getMessageShortcutsGroupsTable);case 6:e.sent,t.messageQuicklyLoad=0;case 8:case"end":return e.stop()}}),e)})))()},getMessageShortcutsGroupsTable:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{count:1},a.prev=1,s.$refs.messageQuicklyLogs.writeLog("正在获取店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),a.next=5,s.$shopeemanService.messageShortcutsGroups(t.country,{shop_id:t.platform_mall_id,group_type:1});case 5:if(n=a.sent,l=JSON.stringify({country:t.country,platform_mall_id:t.platform_mall_id,platform_mall_name:t.platform_mall_name,mall_alias_name:t.mall_alias_name}),o=JSON.parse(n),!(o.status>=200&&o.status<300)){a.next=15;break}r=o.data,c=JSON.parse(r),s.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息获取成功，共").concat(c.length||0,"条"),!0),c.forEach((function(t){var e=Object.assign(JSON.parse(l),t,{state:"enabled"===t.state}),a=s.tableDataMessageQuickly.findIndex((function(t){return t.id===e.id}));a>-1?s.tableDataMessageQuickly.splice(a,1,e):s.tableDataMessageQuickly.push(e)})),a.next=21;break;case 15:if(403!==o.status){a.next=20;break}return s.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的未登录"),!1),a.abrupt("return");case 20:s.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息获取失败"),!1);case 21:a.next=26;break;case 23:a.prev=23,a.t0=a["catch"](1),s.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息获取失败"),!1);case 26:return a.prev=26,i.count--,a.finish(26);case 29:case"end":return a.stop()}}),a,null,[[1,23,26,29]])})))()},switchMessageShortcutsGroups:function(t){var e=arguments,s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n,l,o,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:-1,n=e.length>2?e[2]:void 0,s.messageQuicklyLoad||(s.messageQuicklyLoad=1),s.$refs.messageQuicklyLogs.writeLog("正在设置店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),l={shop_id:parseInt(t.platform_mall_id),group_type:1,id:t.id},n?(l["group_name"]=n.name,l["message_shortcuts"]=n.message_shortcuts):(o=t.state,i>-1&&(o=!!i),l["state"]=o?"enabled":"disabled"),a.next=8,s.$shopeemanService.switchMessageShortcutsGroups(t.country,l,{headers:{referer:"/portal/assistant/basic/messageShortcuts"}});case 8:r=a.sent,c=JSON.parse(r),console.log(c),c.status>=200&&c.status<300?s.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息设置成功"),!0):s.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息设置失败"),!1),--s.messageQuicklyLoad||s.messageShortcutsGroupsTable();case 13:case"end":return a.stop()}}),a)})))()},addMessageShortcutsGroups:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.messageQuicklyLoad||(e.messageQuicklyLoad=1),e.$refs.messageQuicklyLogs.writeLog("正在添加店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),s.next=4,e.$shopeemanService.setShortcutsGroups(t.country,{shop_id:parseInt(t.platform_mall_id),group_type:1,group_name:e.messageQuicklyAction.name,message_shortcuts:e.messageQuicklyAction.message_shortcuts});case 4:a=s.sent,i=JSON.parse(a),console.log("setShortcutsGroupsRes",i),i.status>=200&&i.status<300?e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息添加成功"),!0):e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息添加失败"),!1),--e.messageQuicklyLoad||e.messageShortcutsGroupsTable();case 9:case"end":return s.stop()}}),s)})))()},deleteMessageShortcutsGroups:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.messageQuicklyLoad||(e.messageQuicklyLoad=1),e.$refs.messageQuicklyLogs.writeLog("正在删除店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息"),!0),s.next=4,e.$shopeemanService.deleteMessageShortcutsGroups(t.country,{shop_id:parseInt(t.platform_mall_id),group_type:1,id:t.id},{headers:{referer:"/portal/assistant/basic/messageShortcuts","Content-Type":"application/json;charset=UTF-8"}});case 4:a=s.sent,i=JSON.parse(a),console.log("deleteMessageShortcutsGroupsRes",i),i.status>=200&&i.status<300?e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息删除成功"),!0):e.$refs.messageQuicklyLogs.writeLog("店铺【".concat(t.mall_alias_name||t.platform_mall_name,"】的快捷讯息删除失败"),!1),--e.messageQuicklyLoad||e.messageShortcutsGroupsTable();case 9:case"end":return s.stop()}}),s)})))()},allSwitch_DeleteMessageShortcutsGroups:function(t,e){var s=this;this.selectDataMessageQuickly.length?(this.messageQuicklyLoad=this.selectDataMessageQuickly.length,this.selectDataMessageQuickly.forEach((function(a){e&&s.switchMessageShortcutsGroups(a,t),!e&&s.deleteMessageShortcutsGroups(a,t)}))):this.$message.error("至少选择一条讯息")},addMessageQuickly:function(){this.messageQuicklyAction={name:"",message_shortcuts:[{content:""}]},this.messageQuicklyTitle="批量添加快捷讯息",this.messageQuicklyVisible=!0},addMessageQuicklyList:function(){this.messageQuicklyAction.message_shortcuts.length<20?this.messageQuicklyAction.message_shortcuts.push({content:""}):this.$message.error("最多可添加20条讯息")},updateMessageQuickly:function(t){this.messageQuicklyAction=JSON.parse(JSON.stringify(t)),this.messageQuicklyTitle="编辑快捷讯息",this.messageQuicklyVisible=!0},messageShortcutsGroups_dialog:function(){var t=this;this.messageQuicklyShowConsole=!1,this.messageQuicklyVisible=!1;var e="编辑快捷讯息"===this.messageQuicklyTitle;e?this.switchMessageShortcutsGroups(this.messageQuicklyAction,0,this.messageQuicklyAction):(this.messageQuicklyLoad=this.SiteList[this.activeName].length,this.SiteList[this.activeName].forEach((function(e){t.addMessageShortcutsGroups(e)})))},handleClick:function(){},handleSelectionChange1:function(t){this.selectDataAutoReply=t},handleSelectionChange2:function(t){this.selectDataFAQAssistant=t},handleSelectionChange3:function(t){this.selectDataMessageQuickly=t},resizeHeight:function(){var t=window.outerHeight;this.height=t-190},tableScroll:function(){}}},c=r,u=(s("f800"),s("73a4"),s("2877")),m=Object(u["a"])(c,a,i,!1,null,"51d25138",null);e["default"]=m.exports},"4c28":function(t,e,s){},"4f51":function(t,e,s){"use strict";s("50ca")},"50ca":function(t,e,s){},"73a4":function(t,e,s){"use strict";s("ac69")},8992:function(t,e,s){"use strict";s("4c28")},ac69:function(t,e,s){},c1b9:function(t,e,s){},f800:function(t,e,s){"use strict";s("c1b9")},feb6:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"storeChooseUL"},[t.isMall?s("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):s("li",{style:t.isReset&&"margin-bottom: 5px"},[s("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),s("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:t.isBanPerform},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?s("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),s("li",{style:t.isReset&&"margin-bottom: 5px"},[s("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),s("el-select",{staticClass:"selectBox",style:{width:t.inputWidth},attrs:{disabled:t.isBanPerform,multiple:"","collapse-tags":"",filterable:"",size:"mini"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[s("el-option",{attrs:{label:"全部",value:""},nativeOn:{click:function(e){return t.changeGroupSelect(t.groupId,!0)}}}),t._l(t.groupIdList,(function(e,a){return s("el-option",{key:a,attrs:{label:e.group_name,value:e.id},nativeOn:{click:function(e){return t.changeGroupSelect(t.groupId)}}})}))],2)],1),s("li",{directives:[{name:"show",rawName:"v-show",value:t.showGrade<2,expression:"showGrade < 2"}],style:t.isReset&&"margin-bottom: 5px"},[s("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),s("el-popover",{attrs:{placement:"top",width:"180",trigger:"click"}},[t.tableShow?s("u-table",{ref:"zz_mall_select_all",staticClass:"zz_mall_select_all",attrs:{"tooltip-effect":"dark","show-header":!1,"row-height":34,border:!1,"big-data-checkbox":"","use-virtual":"","show-body-overflow":"","data-changes-scroll-top":!1,data:t.siteShowList,"max-height":"250","cell-style":{padding:"0px!important"}}},[s("u-table-column",{attrs:{align:"left","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"zz_mall_select_item",class:t.siteId.includes(e.row.platform_mall_id)&&"zz_mall_select_active",on:{click:function(s){return t.changeSiteSelect(e.row.platform_mall_id,!e.row.platform_mall_id)}}},[t._v(" "+t._s(e.row.mall_alias_name||e.row.platform_mall_name)+" ")])]}}],null,!1,749083916)})],1):t._e(),s("div",{staticClass:"zz_mall_select_input",style:{width:t.inputWidth},attrs:{slot:"reference"},on:{click:t.goTableShowTop},slot:"reference"},[t.site.length?s("el-tag",{attrs:{type:"info",size:"mini"}},[t._v(" "+t._s(t.site[0].mall_alias_name||t.site[0].platform_mall_name)+" ")]):t._e(),t.site.length>1?s("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("+"+t._s(t.site.length-1))]):t._e(),s("el-input",{attrs:{size:"mini",clearable:""},on:{input:t.searchInput},model:{value:t.searchSite,callback:function(e){t.searchSite=e},expression:"searchSite"}})],1)],1)],1),t.isReset?s("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[s("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:t.reset}},[t._v(" 　刷　　新　 ")])],1):t._e()])])},i=[],n=s("1da1"),l=s("2909"),o=(s("96cf"),s("a9e3"),s("caad"),s("2532"),s("99af"),s("d81d"),s("fb6a"),s("4de4"),s("d3b7"),s("6062"),s("3ca3"),s("ddb0"),s("c740"),s("a434"),s("25f0"),s("7db0"),s("7646")),r={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},inputWidth:{type:String,default:"180px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}},showGrade:{type:Number,default:function(){return 0}}},data:function(){return{countryVal:null,groupId:[],groupIdList:[],allSiteList:[],site:[],siteId:[],siteList:[],siteShowList:[],tableShow:!0,searchSite:"",countries:this.$filters.countries_option,mallListAPIInstance:new o["a"](this),showMallNumber:100,mallShowIndex:0}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t){this.groupId=[],this.groupIdList=[],this.getMallGoodsGetMallList(1)},deep:!0}},mounted:function(){this.countryVal=!this.isAll&&this.parentCountry||""},methods:{reset:function(){this.groupId=[],this.groupIdList=[],this.getMallGoodsGetMallList(1)},changeGroupSelect:function(t,e){console.log("changeGroupSelect"),e?t.includes("")?this.groupId=[""].concat(Object(l["a"])(this.groupIdList.map((function(t){return t.id})))):this.groupId=[]:t.includes("")||t.length!==this.groupIdList.length?t.includes("")&&t.length===this.groupIdList.length&&(this.groupId=t.slice(1)):this.groupId.unshift(""),this.getMallGoodsGetMallList(2)},getMallGoodsGetMallList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i,n,o,r,c,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.log("getMallGoodsGetMallList - val",t),e.searchSite="",1!==t){s.next=11;break}return a=e.countryVal,s.next=6,e.mallListAPIInstance.ddMallGoodsGetMallList();case 6:i=s.sent,200===i.code?(n=i.data||[],e.isAShop||n.unshift({platform_mall_name:"全部",platform_mall_id:""}),e.allSiteList=n,e.siteList=""===a?n:n.filter((function(t){return(null===t||void 0===t?void 0:t.country)===a||!t.platform_mall_id}))):e.$message.error("获取分组、店铺列表失败"),0===e.groupIdList.length&&(o=new Set(e.siteList.map((function(t){if(t.group_id)return JSON.stringify({group_name:t.group_name,id:t.group_id})}))),o.delete(void 0),r=Object(l["a"])(o),c=r.map((function(t){return JSON.parse(t)})),c.zzSort("id"),e.groupIdList=Object(l["a"])(c),e.groupId=[""].concat(Object(l["a"])(c.map((function(t){return t.id}))))),s.next=14;break;case 11:u=[],u=""===e.groupId[0]?e.allSiteList:e.allSiteList.filter((function(t){if(e.groupId.includes(t.group_id)||!t.platform_mall_id)return t})),e.siteList=u;case 14:e.siteId=[],e.changeSiteSelect("",!0);case 16:case"end":return s.stop()}}),s)})))()},changeSiteSelect:function(t,e){var s=this.searchSite,a=this.siteId;if(this.isAShop)this.siteId=[t];else{if(e)if(s){var i=this.siteShowList.map((function(t){return t.platform_mall_id}));if(a.includes(t))a=a.filter((function(t){return!i.includes(t)}));else{var n=new Set([""].concat(Object(l["a"])(a),Object(l["a"])(i)));a=Object(l["a"])(n)}}else a=a.includes(t)?[]:this.siteList.map((function(t){return t.platform_mall_id}));else{var o=a.findIndex((function(e){return e===t}));if(o>-1)a.splice(o,1),a.includes("")&&a.splice(0,1);else if(a.push(t),s){var r,c=this.siteShowList.filter((function(t){return a.includes(t.platform_mall_id)}));a.includes("")||(null===(r=this.siteShowList)||void 0===r?void 0:r.length)!==c.length+1||a.unshift("")}else{var u;a.includes("")||(null===(u=this.siteList)||void 0===u?void 0:u.length)!==a.length+1||a.unshift("")}}this.siteId=a}this.changeMallList()},changeMallList:function(){var t=[],e="",s=this.siteId;if(this.isAShop){s=s[0];var a=this.siteList.find((function(t){return t.platform_mall_id===s}));e=s,t.push(a)}else this.site=this.siteList.filter((function(t){return s.includes(t.platform_mall_id)})),s.length&&""===s[0]?(s=s.slice(1),t=this.site.slice(1)):t=this.site,e=s.toString();!this.countryVal&&this.groupId.indexOf("")>-1&&(e=t.length!==this.siteList.length&&e||""),console.log("changeMallList",t),this.source?this.$emit("changeMallList",{mallList:t,groupIdList:this.groupId,source:this.source,searchAll:e,country:this.countryVal.toLocaleUpperCase()}):(t["country"]=this.countryVal,this.$emit("changeMallList",t))},searchInput:function(){var t=this;this.searchSetTime&&clearTimeout(this.searchSetTime),this.searchSetTime=null,this.searchSetTime=setTimeout((function(){var e=t.siteList.filter((function(e){var s=!0;if(t.searchSite&&e.platform_mall_id){var a=e.mall_alias_name||e.platform_mall_name;s=a.includes(t.searchSite)}return s}));t.siteShowList=e,t.tableShow=!1,t.$nextTick((function(){t.tableShow=!0}))}),500)},goTableShowTop:function(){var t=this;this.tableShow=!1,this.$nextTick((function(){t.tableShow=!0}))}}},c=r,u=(s("8992"),s("4f51"),s("2877")),m=Object(u["a"])(c,a,i,!1,null,"5836cb4c",null);e["a"]=m.exports}}]);