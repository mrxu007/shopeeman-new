(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53524d18"],{4705:function(t,e,i){"use strict";i("ba09")},"4c28":function(t,e,i){},"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}},5551:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var a=i("1da1"),s=i("d4ec"),n=i("bee2"),r=(i("d3b7"),i("25f0"),i("96cf"),function(){function t(e){Object(s["a"])(this,t),this._this=e}return Object(n["a"])(t,[{key:"getDiscountNominate",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.item,t.prev=1,a={},a["limit"]=100,a["offset"]=i.offset,a["mallId"]=i.platform_mall_id,a["discount_id"]=i.discount_id,t.next=9,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/nominate/?",a);case 9:if(s=t.sent,n=this.isJsonString(this.isJsonString(s).data),!n||0!==n.code){t.next=15;break}return t.abrupt("return",{code:200,data:n.data});case 15:if(2!==n.code&&2!==n.errcode){t.next=19;break}return t.abrupt("return",{code:201,data:"店铺未登录"});case 19:return t.abrupt("return",{code:-2,data:"查询折扣活动详情失败"});case 20:t.next=25;break;case 22:return t.prev=22,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"查询折扣活动详情异常： ".concat(t.t0)});case 25:case"end":return t.stop()}}),t,this,[[1,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getByDiscountids",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,a,s,n,r,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.mItem,a=e.promotionid,s=e.limit,n=e.discountType,t.prev=1,r={},r["discount_id_list"]=a,r["discount_type"]=n,r["limit"]=s,r["offset"]=i.offset,r["mallId"]=i.platform_mall_id,t.next=10,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/get_by_discountids/?",r);case 10:if(o=t.sent,l=this.isJsonString(this.isJsonString(o).data),!l||0!==l.code){t.next=16;break}return t.abrupt("return",{code:200,data:l.data});case 16:if(2!==l.code&&2!==l.errcode){t.next=20;break}return t.abrupt("return",{code:201,data:"店铺未登录"});case 20:return t.abrupt("return",{code:-2,data:"获取列表数据失败"});case 21:t.next=26;break;case 23:return t.prev=23,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取列表数据异常： ".concat(t.t0)});case 26:case"end":return t.stop()}}),t,this,[[1,23]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getDiscountStandardSearch",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,a,s,n,r,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.mItem,a=e.keyword,s=e.searchType,n=e.discountType,t.prev=1,r={},r["keyword"]=a,r["search_type"]=s,"all"!==n&&(r["promotion_status"]=n),r["mallId"]=i.platform_mall_id,t.next=9,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/standard_search/?",r);case 9:if(o=t.sent,l=this.isJsonString(this.isJsonString(o).data),!l||0!==l.code){t.next=15;break}return t.abrupt("return",{code:200,data:l.data});case 15:if(2!==l.code&&2!==l.errcode){t.next=19;break}return t.abrupt("return",{code:201,data:"店铺未登录"});case 19:return t.abrupt("return",{code:-2,data:"获取失败"});case 20:t.next=25;break;case 22:return t.prev=22,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取promotionid数据异常： ".concat(t.t0)});case 25:case"end":return t.stop()}}),t,this,[[1,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getDiscountList",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,a,s,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.mItem,a=e.limit,s=e.discountType,t.prev=1,n={},n["limit"]=a,n["offset"]=i.offset,n["discount_type"]=s,n["mallId"]=i.platform_mall_id,t.next=9,this._this.$shopeemanService.getChinese(i.country,"/api/marketing/v3/discount/list/?",n);case 9:if(r=t.sent,o=this.isJsonString(this.isJsonString(r).data),!o||0!==o.code){t.next=15;break}return t.abrupt("return",{code:200,data:o.data});case 15:if(2!==o.code&&2!==o.errcode){t.next=19;break}return t.abrupt("return",{code:201,data:"店铺未登录"});case 19:return t.abrupt("return",{code:-2,data:"获取失败"});case 20:t.next=25;break;case 22:return t.prev=22,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取折扣列表数据异常： ".concat(t.t0)});case 25:case"end":return t.stop()}}),t,this,[[1,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isJsonString",value:function(t){if("string"!==typeof t)return t;try{return JSON.parse(t),JSON.parse(t)}catch(e){return t}}},{key:"stopActive",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var a,s,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={},a["discount_id"]=e.discount_id.toString(),a["action"]=i,a["mallId"]=e.platform_mall_id,t.next=7,this._this.$shopeemanService.mixChinese(e.country,"/api/marketing/v3/discount/?",a,{Headers:{"Content-Type":" application/json"}},"delete");case 7:if(s=t.sent,n=s&&JSON.parse(s),!n||200!==n.status){t.next=18;break}if(r=JSON.parse(n.data),!r||0!==r.code){t.next=15;break}return t.abrupt("return",{code:200,data:r.data||[]});case 15:return t.abrupt("return",{code:50001,data:r.message||n.statusText||""});case 16:t.next=21;break;case 18:if(403!==n.status){t.next=20;break}return t.abrupt("return",{code:n.status,data:"操作失败，店铺未登录！"});case 20:return t.abrupt("return",{code:n.status,data:"操作失败".concat(n.statusText)});case 21:t.next=26;break;case 23:return t.prev=23,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"操作异常： ".concat(t.t0)});case 26:case"end":return t.stop()}}),t,this,[[0,23]])})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"createActive",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$shopeemanService.postChinese(e,"/api/marketing/v3/discount/?",i,{Headers:{"Content-Type":" application/json"}});case 3:if(a=t.sent,s=a&&JSON.parse(a),!s||200!==s.status){t.next=14;break}if(n=JSON.parse(s.data),!n||0!==n.code){t.next=11;break}return t.abrupt("return",{code:200,data:n.data||[]});case 11:return t.abrupt("return",{code:50001,data:n.message||s.statusText||""});case 12:t.next=17;break;case 14:if(403!==s.status){t.next=16;break}return t.abrupt("return",{code:s.status,data:"操作失败，店铺未登录！"});case 16:return t.abrupt("return",{code:s.status,data:"操作失败".concat(s.statusText)});case 17:t.next=22;break;case 19:return t.prev=19,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"操作异常： ".concat(t.t0)});case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"putActive",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$shopeemanService.mixChinese(e,"/api/marketing/v3/discount/?",i,{Headers:{"Content-Type":" application/json"}},"put");case 3:if(a=t.sent,s=a&&JSON.parse(a),!s||200!==s.status){t.next=14;break}if(n=JSON.parse(s.data),!n||0!==n.code){t.next=11;break}return t.abrupt("return",{code:200,data:n.data||[]});case 11:return t.abrupt("return",{code:50001,data:n.message||s.statusText||""});case 12:t.next=17;break;case 14:if(403!==s.status){t.next=16;break}return t.abrupt("return",{code:s.status,data:"操作失败，店铺未登录！"});case 16:return t.abrupt("return",{code:s.status,data:"操作失败".concat(s.statusText)});case 17:t.next=22;break;case 19:return t.prev=19,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"操作异常： ".concat(t.t0)});case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"putModelActive",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,i){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$shopeemanService.mixChinese(e,"/api/marketing/v3/discount/nominate/",i,{Headers:{"Content-Type":" application/json"}},"put");case 3:if(a=t.sent,s=a&&JSON.parse(a),!s||200!==s.status){t.next=14;break}if(n=JSON.parse(s.data),!n||0!==n.code){t.next=11;break}return t.abrupt("return",{code:200,data:n.data||[]});case 11:return t.abrupt("return",{code:50001,data:n.message||s.statusText||""});case 12:t.next=17;break;case 14:if(403!==s.status){t.next=16;break}return t.abrupt("return",{code:s.status,data:"操作失败，店铺未登录！"});case 16:return t.abrupt("return",{code:s.status,data:"操作失败".concat(s.statusText)});case 17:t.next=22;break;case 19:return t.prev=19,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"操作异常： ".concat(t.t0)});case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,i){return t.apply(this,arguments)}return e}()}]),t}())},"73a3":function(t,e,i){},"78cd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"contaniner"},[i("el-row",{staticClass:"header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isNoFoldShow,expression:"isNoFoldShow"}],staticClass:"nowrapBox"},[i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[t._v("店铺设置")]),i("storeChoose",{staticStyle:{"margin-bottom":"5px"},attrs:{spanWidth:"60px",source:"true","is-reset":!0,"is-ban-perform":t.isBanPerform},on:{changeMallList:t.changeMallList}}),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",[t._v("物流设置：")]),i("div",[i("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.logistics,callback:function(e){t.logistics=e},expression:"logistics"}},t._l(t.logisticsList,(function(e){return i("el-checkbox",{key:e.ShipId,attrs:{label:e.ShipId,disabled:t.isBanPerform}},[t._v(t._s(e.ShipName)+" ")])})),1),t.customLogistics[0]?i("div",[i("p",{staticStyle:{color:"var(--themeColor)"}},[t._v("确保此物流方式已在商家后台开启 "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请填写相应站点币种价格，此价格不可转换",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question"})])],1)],1),t._l(t.customLogistics,(function(e){return i("div",{key:e.ShipId,staticStyle:{"margin-bottom":"5px"}},[i("span",[t._v(t._s(e.ShipName))]),i("el-input",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{size:"mini"},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"item.price"}})],1)}))],2):t._e()],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("水印设置：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.storeConfig.watermarkChecked,callback:function(e){t.$set(t.storeConfig,"watermarkChecked",e)},expression:"storeConfig.watermarkChecked"}},[t._v("批量添加水印 ")]),i("el-button",{staticStyle:{"margin-left":"15px"},attrs:{disabled:t.isBanPerform,size:"mini",type:"primary"},on:{click:function(e){return t.setWatermark(1)}}},[t._v("水印配置 ")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("SKU价格：")]),i("div",[i("el-radio",{attrs:{label:0,disabled:t.isBanPerform},model:{value:t.storeConfig.priceRadio,callback:function(e){t.$set(t.storeConfig,"priceRadio",e)},expression:"storeConfig.priceRadio"}},[t._v("保留全部")]),i("el-radio",{attrs:{label:1,disabled:t.isBanPerform},model:{value:t.storeConfig.priceRadio,callback:function(e){t.$set(t.storeConfig,"priceRadio",e)},expression:"storeConfig.priceRadio"}},[t._v("删除最低价")]),i("el-radio",{attrs:{label:2,disabled:t.isBanPerform},model:{value:t.storeConfig.priceRadio,callback:function(e){t.$set(t.storeConfig,"priceRadio",e)},expression:"storeConfig.priceRadio"}},[t._v("删除最高价")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("商品设置：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.storeConfig.activityChecked,callback:function(e){t.$set(t.storeConfig,"activityChecked",e)},expression:"storeConfig.activityChecked"}},[t._v("添加到折扣活动或商品分类 ")]),i("el-button",{staticStyle:{"margin-left":"15px"},attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:function(e){return t.setSellActive()}}},[t._v("行销活动配置 ")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.storeConfig.chineseChecked,callback:function(e){t.$set(t.storeConfig,"chineseChecked",e)},expression:"storeConfig.chineseChecked"}},[i("el-checkbox",{staticStyle:{margin:"0"},attrs:{label:"允许上新中文",disabled:t.isBanPerform}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"勾选后，将不再检测商品信息中是否含有中文",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1),i("el-checkbox",{staticStyle:{"margin-left":"15px"},attrs:{label:"允许上新简体数据",disabled:t.isBanPerform||t.storeConfig.chineseChecked.length<1}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"勾选后，将不再检测商品语种是否为简体",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("图片上传线程数量： "),i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},on:{change:function(e){return t.changeStockUpNumber(t.storeConfig.pictureThread,4)}},model:{value:t.storeConfig.pictureThread,callback:function(e){t.$set(t.storeConfig,"pictureThread",e)},expression:"storeConfig.pictureThread"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"0<线程数量<6，建议数量为3",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"15px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.storeConfig.wordsHeavy,callback:function(e){t.$set(t.storeConfig,"wordsHeavy",e)},expression:"storeConfig.wordsHeavy"}},[t._v("标题内单词去重")])],1)]),"MY"===t.country||"ID"===t.country?i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("危险物品：")]),i("el-radio",{attrs:{label:0,disabled:t.isBanPerform},model:{value:t.storeConfig.dangerousRadio,callback:function(e){t.$set(t.storeConfig,"dangerousRadio",e)},expression:"storeConfig.dangerousRadio"}},[t._v("不是")]),i("el-radio",{attrs:{label:1,disabled:t.isBanPerform},model:{value:t.storeConfig.dangerousRadio,callback:function(e){t.$set(t.storeConfig,"dangerousRadio",e)},expression:"storeConfig.dangerousRadio"}},[t._v("包含电池/磁铁/易燃材料")])],1):t._e(),i("div",{staticClass:"basisInstall-box"},[i("el-button",{attrs:{size:"mini",disabled:t.isBanPerform,type:"primary"},on:{click:t.enterGoodsTag}},[t._v("标记商品标签")]),i("el-button",{attrs:{size:"mini",disabled:t.isBanPerform},on:{click:function(e){return t.enterCategory({})}}},[t._v("同步类目属性")]),i("el-button",{attrs:{size:"mini",disabled:t.isBanPerform,type:"primary"},on:{click:t.publishGoodsConfigSave}},[t._v("保存配置 ")])],1)],1),i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[t._v("基础设置")]),i("div",{staticClass:"basisInstall-box"},[i("el-radio",{attrs:{disabled:t.isBanPerform,label:1},model:{value:t.valuationRadio,callback:function(e){t.valuationRadio=e},expression:"valuationRadio"}},[t._v("计价方式一")]),i("el-radio",{attrs:{disabled:t.isBanPerform,label:2},model:{value:t.valuationRadio,callback:function(e){t.valuationRadio=e},expression:"valuationRadio"}},[t._v("计价方式二")]),i("el-radio",{attrs:{disabled:t.isBanPerform,label:3},model:{value:t.valuationRadio,callback:function(e){t.valuationRadio=e},expression:"valuationRadio"}},[t._v("计价方式三")])],1),1===t.valuationRadio?i("div",[i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("基础加价：")]),i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:t.basicConfig.formula.percentage,callback:function(e){t.$set(t.basicConfig.formula,"percentage",e)},expression:"basicConfig.formula.percentage"}}),t._v(" %　+　基础价 "),i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:t.basicConfig.formula.basis,callback:function(e){t.$set(t.basicConfig.formula,"basis",e)},expression:"basicConfig.formula.basis"}}),t._v(" 　+　藏价 "),i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:t.basicConfig.formula.hidden,callback:function(e){t.$set(t.basicConfig.formula,"hidden",e)},expression:"basicConfig.formula.hidden"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"加价方式：原价+原价*百分百+基础价+藏价",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("商品折扣：")]),i("div",[i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:t.basicConfig.discount,callback:function(e){t.$set(t.basicConfig,"discount",e)},expression:"basicConfig.discount"}}),t._v(" % "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"例：25（加价完成后价格） / 0.5（商品折扣为50%）",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"10px"}},[t._v("计价方式：")]),i("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.isBanPerform,label:0},model:{value:t.basicConfig.valuationMethodsRadio,callback:function(e){t.$set(t.basicConfig,"valuationMethodsRadio",e)},expression:"basicConfig.valuationMethodsRadio"}},[t._v("以折扣价为准 ")]),i("el-radio",{attrs:{disabled:t.isBanPerform,label:1},model:{value:t.basicConfig.valuationMethodsRadio,callback:function(e){t.$set(t.basicConfig,"valuationMethodsRadio",e)},expression:"basicConfig.valuationMethodsRadio"}},[t._v("以零售价为准 ")])],1)]):t._e(),2===t.valuationRadio?i("div",[i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("计价方式：")]),i("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.isBanPerform,label:0},model:{value:t.basicConfig.valuationMethodsRadio,callback:function(e){t.$set(t.basicConfig,"valuationMethodsRadio",e)},expression:"basicConfig.valuationMethodsRadio"}},[t._v("以折扣价为准 ")]),i("el-radio",{attrs:{disabled:t.isBanPerform,label:1},model:{value:t.basicConfig.valuationMethodsRadio,callback:function(e){t.$set(t.basicConfig,"valuationMethodsRadio",e)},expression:"basicConfig.valuationMethodsRadio"}},[t._v("以零售价为准 ")]),i("el-button",{attrs:{disabled:t.isBanPerform,size:"mini",type:"primary"},on:{click:t.valuationInit}},[t._v("计价配置")])],1)]):t._e(),3===t.valuationRadio?i("div",[i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("商品价格：")]),i("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.basicConfig.fixedPrice,callback:function(e){t.$set(t.basicConfig,"fixedPrice",e)},expression:"basicConfig.fixedPrice"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个热搜词之间以逗号隔开，不进行翻译",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)]):t._e(),i("div",{staticClass:"basisInstall-box"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",[t._v("添加热搜词：")]),i("el-radio",{staticStyle:{"margin-right":"15px","line-height":"28px"},attrs:{disabled:t.isBanPerform,label:0},model:{value:t.basicConfig.headlineRadio,callback:function(e){t.$set(t.basicConfig,"headlineRadio",e)},expression:"basicConfig.headlineRadio"}},[t._v(" 标题前加 ")]),i("el-radio",{staticStyle:{"margin-right":"20px","line-height":"28px"},attrs:{disabled:t.isBanPerform,label:1},model:{value:t.basicConfig.headlineRadio,callback:function(e){t.$set(t.basicConfig,"headlineRadio",e)},expression:"basicConfig.headlineRadio"}},[t._v(" 标题后加 ")]),i("div",[t._v("热搜词随机个数 "),i("el-input",{staticStyle:{width:"60px","margin-left":"5px"},attrs:{size:"mini"},model:{value:t.basicConfig.hotSearch,callback:function(e){t.$set(t.basicConfig,"hotSearch",e)},expression:"basicConfig.hotSearch"}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个热搜词之间以逗号隔开，不进行翻译",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{width:"95%","margin-top":"5px"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,resize:"none",placeholder:"请输入热搜词,以逗号隔开"},model:{value:t.basicConfig.hotList,callback:function(e){t.$set(t.basicConfig,"hotList",e)},expression:"basicConfig.hotList"}})],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("禁运设置：")]),i("div",[i("el-checkbox",{attrs:{disabled:t.isBanPerform,size:"mini"},model:{value:t.basicConfig.embargoChecked1,callback:function(e){t.$set(t.basicConfig,"embargoChecked1",e)},expression:"basicConfig.embargoChecked1"}},[t._v("启动禁运类目拦截 ")]),i("el-checkbox",{attrs:{disabled:t.isBanPerform,size:"mini"},model:{value:t.basicConfig.embargoChecked2,callback:function(e){t.$set(t.basicConfig,"embargoChecked2",e)},expression:"basicConfig.embargoChecked2"}},[t._v("启动禁运词拦截 ")])],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("商品重量：")]),i("div",[i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:t.basicConfig.minHeavy,callback:function(e){t.$set(t.basicConfig,"minHeavy",e)},expression:"basicConfig.minHeavy"}}),t._v(" - "),i("el-input",{staticStyle:{width:"60px","margin-right":"5px"},attrs:{size:"mini"},model:{value:t.basicConfig.maxHeavy,callback:function(e){t.$set(t.basicConfig,"maxHeavy",e)},expression:"basicConfig.maxHeavy"}}),t._v(" kg "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"商品重量默认随机0.1 - 1kg",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"15px"}},[t._v("类目映射：")]),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.basicConfig.categoryMapping,callback:function(e){t.$set(t.basicConfig,"categoryMapping",e)},expression:"basicConfig.categoryMapping"}},t._l(t.categoryMappingList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("Shopee商品类目：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.basicConfig.sourceCategoryChecked,callback:function(e){t.$set(t.basicConfig,"sourceCategoryChecked",e)},expression:"basicConfig.sourceCategoryChecked"}},[t._v(" 使用Shopee采集商品源类目 ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Shopee商品只有类目能使用商品源类目，属性只能选择默认！",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("预购：")]),i("div",[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.basicConfig.stockUpChecked,callback:function(e){t.$set(t.basicConfig,"stockUpChecked",e)},expression:"basicConfig.stockUpChecked"}},[t._v("是否较长时间备货 ")]),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini",min:7,max:30},on:{change:function(e){return t.changeStockUpNumber(t.basicConfig.stockUpNumber,1)}},model:{value:t.basicConfig.stockUpNumber,callback:function(e){t.$set(t.basicConfig,"stockUpNumber",e)},expression:"basicConfig.stockUpNumber"}}),t._v(" 天 "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"如果备货最短"+t.preorderMinDays+"天，最长"+t.preorderMaxDays+"天",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),"TW"===t.country?i("div",[t._v("最小购物数：")]):t._e(),"TW"===t.country?i("div",[i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},model:{value:t.basicConfig.min_purchase_limit,callback:function(e){t.$set(t.basicConfig,"min_purchase_limit",e)},expression:"basicConfig.min_purchase_limit"}})],1):t._e()]),i("div",{staticClass:"basisInstall-box"},[i("div",[t._v("上新线程：")]),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},on:{change:function(e){return t.changeStockUpNumber(t.basicConfig.onNewThread,2)}},model:{value:t.basicConfig.onNewThread,callback:function(e){t.$set(t.basicConfig,"onNewThread",e)},expression:"basicConfig.onNewThread"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请根据电脑配置合理设置上新线程数，最大为5",min:1,max:5,placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1),i("div",{staticStyle:{"margin-left":"25px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.basicConfig.numberCeilingChecked,callback:function(e){t.$set(t.basicConfig,"numberCeilingChecked",e)},expression:"basicConfig.numberCeilingChecked"}},[t._v("单店店铺上货数量上限 ")]),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},model:{value:t.basicConfig.numberCeiling,callback:function(e){t.$set(t.basicConfig,"numberCeiling",e)},expression:"basicConfig.numberCeiling"}})],1)],1),i("div",{staticClass:"basisInstall-box"},[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.basicConfig.usedChecked,callback:function(e){t.$set(t.basicConfig,"usedChecked",e)},expression:"basicConfig.usedChecked"}},[t._v("是否二手商品")]),i("div",{staticStyle:{"margin-left":"15px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.basicConfig.deleteCollectChecked,callback:function(e){t.$set(t.basicConfig,"deleteCollectChecked",e)},expression:"basicConfig.deleteCollectChecked"}},[t._v("上新后删除收藏商品 ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除商品库中的原商品（不适用于一商品多店铺模式）",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticStyle:{"margin-left":"15px"}},[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.basicConfig.autoCompleteChecked,callback:function(e){t.$set(t.basicConfig,"autoCompleteChecked",e)},expression:"basicConfig.autoCompleteChecked"}},[t._v("自动补齐9张轮播主图 ")])],1)],1)]),i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[t._v("防关联设置")]),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[t._v("商品标题：")]),i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.specialCharChecked,callback:function(e){t.$set(t.associatedConfig,"specialCharChecked",e)},expression:"associatedConfig.specialCharChecked"}},[t._v("随机加入特殊字符 ")]),i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.realNameChecked,callback:function(e){t.$set(t.associatedConfig,"realNameChecked",e)},expression:"associatedConfig.realNameChecked"}},[t._v("开头加上店铺真实名 ")])],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[t._v("上新时间间隔：")]),i("el-input",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{size:"mini"},model:{value:t.associatedConfig.onNewInterval,callback:function(e){t.$set(t.associatedConfig,"onNewInterval",e)},expression:"associatedConfig.onNewInterval"}}),t._v(" S "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认印尼站点上新时间间隔为50S，其他站点为40S",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[t._v("重复上新维度：")]),i("el-radio",{attrs:{label:1,disabled:t.isBanPerform},model:{value:t.associatedConfig.dimensionRadio,callback:function(e){t.$set(t.associatedConfig,"dimensionRadio",e)},expression:"associatedConfig.dimensionRadio"}},[t._v("站点")]),i("el-radio",{attrs:{label:0,disabled:t.isBanPerform},model:{value:t.associatedConfig.dimensionRadio,callback:function(e){t.$set(t.associatedConfig,"dimensionRadio",e)},expression:"associatedConfig.dimensionRadio"}},[t._v("店铺")]),i("el-radio",{staticStyle:{"margin-right":"0"},attrs:{label:2,disabled:t.isBanPerform},model:{value:t.associatedConfig.dimensionRadio,callback:function(e){t.$set(t.associatedConfig,"dimensionRadio",e)},expression:"associatedConfig.dimensionRadio"}},[t._v("一商品多店铺 ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"同一商品上新到不同店铺中，为避免重复铺货，请配合热搜词使用",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),2===t.associatedConfig.dimensionRadio?i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[t._v("商品价格幅度：")]),t._v(" 一商品多店铺上新价格幅度± "),i("el-input",{staticStyle:{width:"80px",margin:"0 5px"},attrs:{size:"mini",oninput:"value=value.replace(/[^0-9]+/g,'')"},on:{change:function(e){return t.changeStockUpNumber(t.associatedConfig.priceRange,3)}},model:{value:t.associatedConfig.priceRange,callback:function(e){t.$set(t.associatedConfig,"priceRange",e)},expression:"associatedConfig.priceRange"}}),t._v(" % "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"避免同一商品在多个店铺中价格相同，最大幅度10%，不设置请填入0",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1):t._e(),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"keepRight"},[t._v("图片设置：")]),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center",flex:"1"}},[i("div",{staticStyle:{width:"100%"}},[2===t.associatedConfig.dimensionRadio?i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.pictureSetting.mainRandomChecked,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"mainRandomChecked",e)},expression:"associatedConfig.pictureSetting.mainRandomChecked"}},[t._v("随机主图 ")]):t._e(),i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.pictureSetting.firstChecked,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"firstChecked",e)},expression:"associatedConfig.pictureSetting.firstChecked"}},[t._v("删除首图 ")]),i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.pictureSetting.cutChecked,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"cutChecked",e)},expression:"associatedConfig.pictureSetting.cutChecked"}},[t._v(" 图片删减 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.pictureSetting.randomChecked,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"randomChecked",e)},expression:"associatedConfig.pictureSetting.randomChecked"}},[t._v("图片顺序随机 ")]),i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.pictureSetting.whiteChecked,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"whiteChecked",e)},expression:"associatedConfig.pictureSetting.whiteChecked"}},[t._v("首图白底 ")])],1),i("div",{staticStyle:{width:"100%"}},[t._v(" 将 "),i("el-input",{staticStyle:{width:"60px",margin:"0 5px"},attrs:{size:"mini"},model:{value:t.associatedConfig.pictureSetting.index,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"index",e)},expression:"associatedConfig.pictureSetting.index"}}),t._v(" 张设为封面 ")],1),i("el-checkbox",{attrs:{size:"mini"},model:{value:t.associatedConfig.pictureSetting.compressionChecked,callback:function(e){t.$set(t.associatedConfig.pictureSetting,"compressionChecked",e)},expression:"associatedConfig.pictureSetting.compressionChecked"}},[t._v("自动压缩图片")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"商品图片超过1MB时，将压缩图片",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1)]),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[t._v("图片缺失上传：")]),i("el-checkbox",{attrs:{size:"mini",disabled:t.isBanPerform},model:{value:t.associatedConfig.missingUploadChecked,callback:function(e){t.$set(t.associatedConfig,"missingUploadChecked",e)},expression:"associatedConfig.missingUploadChecked"}},[t._v(" 是否允许图片缺失上传 ")])],1),i("div",{staticClass:"basisInstall-box"},[i("div",{staticClass:"keepRight"},[t._v("关键词过滤：")]),i("div",[i("el-select",{staticStyle:{width:"180px"},attrs:{multiple:"","collapse-tags":"",size:"mini"},model:{value:t.associatedConfig.keyFilter,callback:function(e){t.$set(t.associatedConfig,"keyFilter",e)},expression:"associatedConfig.keyFilter"}},[i("el-option",{attrs:{label:"全部",value:0},nativeOn:{click:function(e){return t.keyFilterChange(1)}}}),t._l(t.keyFilterList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value},nativeOn:{click:function(e){return t.keyFilterChange()}}})}))],2),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每个关键词之间以逗号隔开，不进行翻译",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"separation"},[i("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:3,resize:"none",placeholder:"请输入关键词,以逗号隔开"},model:{value:t.associatedConfig.keyList,callback:function(e){t.$set(t.associatedConfig,"keyList",e)},expression:"associatedConfig.keyList"}})],1)])]),i("div",{staticClass:"basisInstall"},[i("div",{staticClass:"basisInstall-title"},[t._v("数据统计")]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[t._v("商品总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.statistics.count))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[t._v("成功总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.statistics.success))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[t._v("失败总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.statistics.failure))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[t._v("重复总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.statistics.repeat))])]),i("div",{staticClass:"basisInstall-box loose"},[i("div",[t._v("过滤总数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.statistics.filter))])])])]),i("div",{staticClass:"nowrapBox"},[i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:t.startRelease}},[t._v("开始发布")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform,disabled:""}},[t._v("导入数据")]),i("el-button",{attrs:{size:"mini"},on:{click:t.cancelRelease}},[t._v("取消发布")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:function(e){return t.deleteGoodsList(!0)}}},[t._v("清理全部")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform,disabled:""}},[t._v("设置定时任务")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:function(e){return t.enterCategory(2,1)}}},[t._v("批量映射虾皮类目 ")]),i("el-button",{attrs:{size:"mini",type:t.isNoFoldShow?"primary":""},on:{click:function(e){t.isNoFoldShow=!t.isNoFoldShow}}},[t._v(" "+t._s(t.isNoFoldShow?"折叠":"展开")+" ")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform}},[t._v("清理类目缓存")]),i("div",{staticStyle:{"margin-left":"10px"}},[t._v("源商品类目： "),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.sourceCategory,callback:function(e){t.sourceCategory=e},expression:"sourceCategory"}},t._l(t.sourceCategoryList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),i("div",{staticStyle:{"margin-left":"10px"}},[t._v("发布结果过滤： "),i("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.resultsFilter,callback:function(e){t.resultsFilter=e},expression:"resultsFilter"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._l(t.resultsFilterList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",disabled:t.isBanPerform}},[t._v("查询")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:function(e){return t.deleteGoodsList()}}},[t._v("删除")]),i("div",{staticStyle:{"margin-left":"10px",display:"flex","align-items":"center"}},[i("span",[t._v("上新进度：")]),i("el-progress",{staticStyle:{width:"180px"},attrs:{"text-inside":!0,"stroke-width":18,percentage:t.mewOnProgress}})],1)],1)]),i("u-table",{attrs:{data:t.goodsTable,"use-virtual":"","data-changes-scroll-top":!1,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-key":"id",border:!1,"big-data-checkbox":!0,height:t.isNoFoldShow?320:729},on:{"selection-change":t.handleSelectionChange}},[i("u-table-column",{attrs:{align:"left",type:"selection",width:"50"}}),i("u-table-column",{attrs:{align:"left",label:"序列号",type:"index",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),i("u-table-column",{attrs:{align:"center",label:"商品主图",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-tooltip",{staticStyle:{width:"56px",height:"56px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:a.image}})],1),i("el-image",{staticStyle:{width:"56px",height:"56px"},attrs:{src:t._f("changeImgSizeFilter")({url:a.image,source:a.source})}})],1)]}}])}),i("u-table-column",{attrs:{align:"center",label:"上家商品Id",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{staticClass:"goToGoods",on:{click:function(e){return e.stopPropagation(),t.goToGoods(a)}}},[t._v(t._s(a.goods_id))]),i("el-button",{staticClass:"copyIcon",attrs:{type:"text"},on:{click:function(e){return t.copy(a.goods_id)}}},[i("i",{staticClass:"el-icon-document-copy"})])]}}])}),i("u-table-column",{attrs:{align:"left",label:"shopee-Id",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{staticClass:"goToGoods",on:{click:function(e){return e.stopPropagation(),t.goToGoods(a,1)}}},[t._v(t._s(a.product_id||""))]),a.product_id?i("el-button",{staticClass:"copyIcon",attrs:{type:"text"},on:{click:function(e){return t.copy(a.product_id)}}},[i("i",{staticClass:"el-icon-document-copy"})]):t._e()]}}])}),i("u-table-column",{attrs:{align:"left",label:"标题","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"goodsTableLine"},[t._v(" "+t._s(a.title)+" ")])]}}])}),i("u-table-column",{attrs:{align:"left",label:"店铺",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(t._s(i.mallName||"")+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"goodsTableLine"},[t._v(" "+t._s(a.statusName)+" ")])]}}])}),i("u-table-column",{attrs:{align:"left",label:"源平台类目",prop:"category_name",width:"120","show-overflow-tooltip":""}}),i("u-table-column",{attrs:{align:"left",label:"shopee类目","show-overflow-tooltip":"",prop:"categoryName",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.enterCategory(0,e.row)}}},[t._v(" "+t._s(e.row.categoryName||"请选择类目")+" ")])]}}])}),i("u-table-column",{attrs:{align:"left",label:"价格",prop:"price",width:"80"}}),i("u-table-column",{attrs:{align:"left",label:"上新价格(RMB)",prop:"CalAfterPriceRMB",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t.getValuationPrice(i.price,i))+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"上新价格("+t.$filters.siteCoin(t.country)+")",prop:"CalAfterPrice",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(Math.ceil(t.getValuationPrice(i.price,i)/t.rateList[t.country]))+" ")]}}])}),i("u-table-column",{attrs:{align:"left",label:"销量",prop:"sales",width:"80"}}),i("u-table-column",{attrs:{align:"left",label:"标签",prop:"sys_label_name",width:"80","show-overflow-tooltip":""}}),i("u-table-column",{attrs:{align:"left",label:"来源",prop:"sourceName",width:"80"}})],1),i("div",{staticClass:"on_new_dialog"},[i("el-dialog",{attrs:{title:"水印配置",width:"500px","close-on-click-modal":!1,top:"10vh",visible:t.watermarkVisible},on:{"update:visible":function(e){t.watermarkVisible=e}}},[i("div",{staticClass:"watermark_dialog"},[i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("水印类型：")]),i("div",[i("el-radio",{attrs:{label:1},model:{value:t.watermarkConfig.type,callback:function(e){t.$set(t.watermarkConfig,"type",e)},expression:"watermarkConfig.type"}},[t._v("文字水印")]),i("el-radio",{attrs:{label:2},model:{value:t.watermarkConfig.type,callback:function(e){t.$set(t.watermarkConfig,"type",e)},expression:"watermarkConfig.type"}},[t._v("图片水印")]),i("el-radio",{attrs:{label:3},model:{value:t.watermarkConfig.type,callback:function(e){t.$set(t.watermarkConfig,"type",e)},expression:"watermarkConfig.type"}},[t._v("商品背景图")])],1)]),i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("图片类型配置：")]),i("div",[i("el-radio",{attrs:{label:0},model:{value:t.watermarkConfig.addType,callback:function(e){t.$set(t.watermarkConfig,"addType",e)},expression:"watermarkConfig.addType"}},[t._v("首图")]),i("el-radio",{attrs:{label:1},model:{value:t.watermarkConfig.addType,callback:function(e){t.$set(t.watermarkConfig,"addType",e)},expression:"watermarkConfig.addType"}},[t._v("全部")])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.watermarkConfig.type,expression:"watermarkConfig.type === 1"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("水印文字：")]),i("div",[i("el-radio",{staticStyle:{margin:"0"},attrs:{label:1},model:{value:t.watermarkConfig.textType,callback:function(e){t.$set(t.watermarkConfig,"textType",e)},expression:"watermarkConfig.textType"}},[t._v("店铺别名")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"选择店铺别名时，若无别名则使用店铺真实名",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px","margin-right":"15px"}})])],1),i("el-radio",{staticStyle:{margin:"0 15px 0 0"},attrs:{label:2},model:{value:t.watermarkConfig.textType,callback:function(e){t.$set(t.watermarkConfig,"textType",e)},expression:"watermarkConfig.textType"}},[t._v("店铺真实名")]),i("el-radio",{staticStyle:{margin:"0"},attrs:{label:3},model:{value:t.watermarkConfig.textType,callback:function(e){t.$set(t.watermarkConfig,"textType",e)},expression:"watermarkConfig.textType"}},[t._v("店铺设置的水印文字")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"选择店铺设置的水印文字时，未设置则默认使用店铺名称",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px","margin-right":"15px"}})])],1)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:1!==t.watermarkConfig.type,expression:"watermarkConfig.type !== 1"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("示例图选择：")]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{"margin-right":"25px",display:"flex","flex-flow":"row","justify-content":"center","align-items":"center"}},[i("div",{staticStyle:{"text-align":"justify","text-align-last":"justify",display:"inline-block",width:"20px"}},[t._v("商品图")]),i("div",{staticClass:"watermarkConfig_img",on:{click:t.watermarkPreview1}},[t.watermarkConfig.goodsImg?i("el-image",{staticClass:"avatar",attrs:{src:t.watermarkConfig.goodsImg}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),i("div",{staticStyle:{display:"flex","flex-flow":"row","justify-content":"center","align-items":"center"}},[i("div",{staticStyle:{"text-align":"justify","text-align-last":"justify",width:"20px"}},[t._v("水印图")]),i("div",{staticClass:"watermarkConfig_img",on:{click:t.watermarkPreview2}},[t.watermarkConfig.watermarkImg?i("el-image",{staticClass:"avatar",attrs:{src:t.watermarkConfig.watermarkImg}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)]),t.uploadImgAdd?i("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{action:"#","list-type":"picture-card",drag:!0,"show-file-list":!1,limit:1,"auto-upload":!1,"on-change":t.watermarkPreview}},[i("el-button",{ref:"uploadImg",attrs:{size:"mini",type:"primary"}},[t._v("选择图片")])],1):t._e()],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.watermarkConfig.type,expression:"watermarkConfig.type === 2"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("图片透明度：")]),i("el-slider",{staticStyle:{width:"65%"},attrs:{"show-input":"","input-size":"mini",min:0,max:1,step:.1},model:{value:t.watermarkConfig.clarity,callback:function(e){t.$set(t.watermarkConfig,"clarity",e)},expression:"watermarkConfig.clarity"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.watermarkConfig.type,expression:"watermarkConfig.type !== 3"}],staticClass:"on_new_dialog_box"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",{staticClass:"keepRight"},[t._v("水印位置：")]),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:t.watermarkConfig.locate,callback:function(e){t.$set(t.watermarkConfig,"locate",e)},expression:"watermarkConfig.locate"}},t._l(t.locateList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.watermarkConfig.type,expression:"watermarkConfig.type === 1"}],staticStyle:{display:"flex","align-items":"center","margin-left":"15px"}},[i("div",{staticClass:"keepRight"},[t._v("水印文字大小：")]),i("el-input",{staticStyle:{width:"60px"},attrs:{size:"mini"},model:{value:t.watermarkConfig.textSize,callback:function(e){t.$set(t.watermarkConfig,"textSize",e)},expression:"watermarkConfig.textSize"}}),i("el-color-picker",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini"},model:{value:t.watermarkConfig.textColor,callback:function(e){t.$set(t.watermarkConfig,"textColor",e)},expression:"watermarkConfig.textColor"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"水印文字大小最小为12，水印文字颜色默认为灰白色（#D5D4DA）",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px","margin-right":"15px"}})])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.watermarkConfig.type,expression:"watermarkConfig.type === 2"}],staticStyle:{display:"flex","align-items":"center"}},[i("div",{staticClass:"keepRight"},[t._v("图片大小：")]),i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini"},model:{value:t.watermarkConfig.imgSize,callback:function(e){t.$set(t.watermarkConfig,"imgSize",e)},expression:"watermarkConfig.imgSize"}},t._l(t.imgSizeList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"justify-content":"center","margin-top":"5px"}},[i("div",{staticClass:"watermark_palette"},[i("div",{staticClass:"goods_image"},[i("img",{attrs:{src:t.watermarkConfig.goodsImg||"",alt:""}})]),i("div",{staticClass:"watermark_image",class:t.watermarkConfig.type<3&&t.locateClass||"watermark_image_background"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===t.watermarkConfig.type,expression:"watermarkConfig.type === 1"}],style:"font-size:"+t.watermarkConfig.textSize+"px!important;color:"+t.watermarkConfig.textColor},[t._v(" "+t._s(t.watermarkConfig.text)+" ")]),i("img",{directives:[{name:"show",rawName:"v-show",value:1!==t.watermarkConfig.type,expression:"watermarkConfig.type !== 1"}],style:2===t.watermarkConfig.type&&"opacity: "+t.watermarkConfig.clarity||"",attrs:{src:t.watermarkConfig.watermarkImg||"",alt:""}})])])]),i("div",{staticStyle:{display:"flex","justify-content":"space-evenly"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.setWatermark()}}},[t._v("提交")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.watermarkVisible=!1}}},[t._v("退出")])],1)])]),i("el-dialog",{attrs:{title:"行销活动设置",width:"700px","close-on-click-modal":!1,top:"10vh",visible:t.sellActiveVisible},on:{"update:visible":function(e){t.sellActiveVisible=e}}},[i("div",{staticClass:"sell_active_dialog"},[i("div",{staticClass:"on_new_dialog_box"},[t._v(" 添加活动商品，请配置折扣活动信息或商店分类信息 ")]),i("div",{staticClass:"on_new_dialog_box"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){}}},[t._v("下载模板")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){}}},[t._v("导入模板")])],1),i("div",{staticClass:"on_new_dialog_box"},[i("u-table",{attrs:{data:t.sellActiveTable,"tooltip-effect":"dark",height:"450"}},[i("u-table-column",{attrs:{label:"店铺名称",align:"left","show-overflow-tooltip":!0,"min-width":"120px"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.mall_alias_name||i.platform_mall_name)+" ")]}}])}),i("u-table-column",{attrs:{label:"活动折扣配置",align:"left",width:"350px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("el-checkbox",{attrs:{size:"mini"},model:{value:e.row.isExisting,callback:function(i){t.$set(e.row,"isExisting",i)},expression:"scope.row.isExisting"}},[t._v("使用已有活动ID")]),i("el-input",{staticStyle:{width:"120px",margin:"0 5px"},attrs:{size:"mini"},model:{value:e.row.discountId,callback:function(i){t.$set(e.row,"discountId",i)},expression:"scope.row.discountId"}}),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.setSellActive(e.row)}}},[t._v(t._s(e.row.isExisting?"配置折扣":"创建活动")+" ")])],1)]}}])}),i("u-table-column",{attrs:{align:"left",width:"142px"},scopedSlots:t._u([{key:"header",fn:function(e){return[t._v(" 商品分类ID "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分类ID请至【商品管理】 - 【商店分类】中查看",placement:"top-end"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)]}},{key:"default",fn:function(e){return[i("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.row.goodsId,callback:function(i){t.$set(e.row,"goodsId",i)},expression:"scope.row.goodsId"}})]}}])})],1)],1),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"justify-content":"space-evenly"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateSellActive(1)}}},[t._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.sellActiveVisible=!1}}},[t._v("取消")])],1)])]),i("el-dialog",{attrs:{title:t.sellActiveCurrent.isExisting?"配置折扣":"创建活动",width:"350px",top:"25vh",visible:t.setSellActiveVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.setSellActiveVisible=e}}},[i("div",{staticClass:"sell_active_dialog"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.sellActiveCurrent.isExisting,expression:"!sellActiveCurrent.isExisting"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("活动名称：")]),i("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:t.sellActiveCurrent.name,callback:function(e){t.$set(t.sellActiveCurrent,"name",e)},expression:"sellActiveCurrent.name"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.sellActiveCurrent.isExisting,expression:"!sellActiveCurrent.isExisting"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("活动开始时间：")]),i("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"datetime",size:"mini",placeholder:"选择开始时间"},model:{value:t.sellActiveCurrent.startTime,callback:function(e){t.$set(t.sellActiveCurrent,"startTime",e)},expression:"sellActiveCurrent.startTime"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.sellActiveCurrent.isExisting,expression:"!sellActiveCurrent.isExisting"}],staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("活动结束时间：")]),i("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"datetime",size:"mini",placeholder:"选择结束时间"},model:{value:t.sellActiveCurrent.endTime,callback:function(e){t.$set(t.sellActiveCurrent,"endTime",e)},expression:"sellActiveCurrent.endTime"}})],1),i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("活动折扣：")]),i("el-input",{staticStyle:{width:"180px","margin-right":"5px"},attrs:{size:"mini"},model:{value:t.sellActiveCurrent.discount,callback:function(e){t.$set(t.sellActiveCurrent,"discount",e)},expression:"sellActiveCurrent.discount"}}),t._v(" % "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折扣价格 = 商品原价 * 折扣%，如原价1000的商品，输入80折扣的折扣价格为800",placement:"top-end"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v("限购数量：")]),i("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:t.sellActiveCurrent.number,callback:function(e){t.$set(t.sellActiveCurrent,"number",e)},expression:"sellActiveCurrent.number"}})],1),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"justify-content":"space-evenly"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateSellActive()}}},[t._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.setSellActiveVisible=!1}}},[t._v("取消")])],1)])]),i("el-dialog",{attrs:{title:"商品标签",width:"300px",top:"25vh","close-on-click-modal":!1,visible:t.goodsTagVisible},on:{"update:visible":function(e){t.goodsTagVisible=e}}},[t.goodsTagVisible?i("goodsLabel",{attrs:{"goods-table-select":t.goodsTableSelect},on:{goodsTagChange:t.goodsTagChange}}):t._e()],1),i("el-dialog",{attrs:{title:"类目映射",width:"700px",top:"25vh","close-on-click-modal":!1,visible:t.categoryVisible},on:{"update:visible":function(e){t.categoryVisible=e}}},[t.categoryVisible?i("categoryMapping",{attrs:{country:t.country,"goods-current":t.goodsCurrent,"mall-list":t.mallList},on:{categoryChange:t.categoryChange}}):t._e()],1),i("el-dialog",{attrs:{title:"计价助手",width:"900px",top:"15vh","close-on-click-modal":!1,visible:t.valuationVisible},on:{"update:visible":function(e){t.valuationVisible=e}}},[i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[t._v("配置区"),i("span",{staticStyle:{color:"red"}},[t._v("(必填)")])]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",[t._v("标签：")]),i("el-select",{attrs:{value:"",size:"mini"},model:{value:t.valuationLabel,callback:function(e){t.valuationLabel=e},expression:"valuationLabel"}},t._l(t.valuationLabelList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.id,label:t.label}})})),1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可设置常用的标签，保存区域运费比例数据",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("运送方式：")]),i("el-select",{attrs:{value:"",size:"mini"},model:{value:t.valuationConfig.shippingMethod,callback:function(e){t.$set(t.valuationConfig,"shippingMethod",e)},expression:"valuationConfig.shippingMethod"}},t._l(t.shippingMethodList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"小件计重商品一般选择空运方式；大件商品视您实际情况选择陆运或海运方式",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("货物类型：")]),i("el-select",{attrs:{value:"",size:"mini"},model:{value:t.valuationConfig.goodsType,callback:function(e){t.$set(t.valuationConfig,"goodsType",e)},expression:"valuationConfig.goodsType"}},t._l(t.goodsTypeList,(function(t,e){return i("el-option",{key:e,attrs:{value:"",label:t.label,value:t.value}})})),1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("交易手续费(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.transactionCommission,callback:function(e){t.$set(t.valuationConfig,"transactionCommission",e)},expression:"valuationConfig.transactionCommission"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("仓库服务费(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.warehouseServiceCharge,callback:function(e){t.$set(t.valuationConfig,"warehouseServiceCharge",e)},expression:"valuationConfig.warehouseServiceCharge"}})],1)]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap",margin:"10px 0"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("折扣率(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.discount,callback:function(e){t.$set(t.valuationConfig,"discount",e)},expression:"valuationConfig.discount"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折扣率：折扣需在行销活动中自行设置商品折扣",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("毛利率(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.grossProfitMargin,callback:function(e){t.$set(t.valuationConfig,"grossProfitMargin",e)},expression:"valuationConfig.grossProfitMargin"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("提现手续费(%)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.withdrawalCharge,callback:function(e){t.$set(t.valuationConfig,"withdrawalCharge",e)},expression:"valuationConfig.withdrawalCharge"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("清关费：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.customsClearanceFee,callback:function(e){t.$set(t.valuationConfig,"customsClearanceFee",e)},expression:"valuationConfig.customsClearanceFee"}})],1)]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item",staticStyle:{"padding-right":"18px"}},[i("div",{staticClass:"item-name"},[t._v("其他杂费：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.valuationConfig.other,callback:function(e){t.$set(t.valuationConfig,"other",e)},expression:"valuationConfig.other"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("泡重计算比：")]),i("el-input",{attrs:{size:"mini"},on:{input:function(e){return t.$set(t.calculateReference,"bubbleHeavyNum",t.valuationConfig.bubbleHeavy)}},model:{value:t.valuationConfig.bubbleHeavy,callback:function(e){t.$set(t.valuationConfig,"bubbleHeavy",e)},expression:"valuationConfig.bubbleHeavy"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"泡重计算比：泡重计算公式为：长*宽*高/泡重计算比，请填写相应货代的计算比",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){t.freightVisible=!0}}},[t._v("运费设置")])],1),i("div",{staticClass:"basisInstall-box-item"},[i("span",{staticStyle:{display:"inline-block",width:"100px"}})])])]),i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[t._v("计算参考")]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap","margin-bottom":"10px"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("长(CM)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.calculateReference.long,callback:function(e){t.$set(t.calculateReference,"long",e)},expression:"calculateReference.long"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("宽(CM)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.calculateReference.width,callback:function(e){t.$set(t.calculateReference,"width",e)},expression:"calculateReference.width"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("高(CM)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.calculateReference.height,callback:function(e){t.$set(t.calculateReference,"height",e)},expression:"calculateReference.height"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"})]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("成本(RMB)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.calculateReference.costing,callback:function(e){t.$set(t.calculateReference,"costing",e)},expression:"calculateReference.costing"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("重量(g)：")]),i("el-input",{attrs:{size:"mini"},model:{value:t.calculateReference.weight,callback:function(e){t.$set(t.calculateReference,"weight",e)},expression:"calculateReference.weight"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("泡重(g)：")]),i("el-input",{staticStyle:{"pointer-events":"none"},attrs:{size:"mini"},model:{value:t.calculateReference.bubbleHeavy,callback:function(e){t.$set(t.calculateReference,"bubbleHeavy",e)},expression:"calculateReference.bubbleHeavy"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"填写此项仅为计算价格时使用，以选品时设置的体积为准",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"})])]),i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("el-button",{staticStyle:{margin:"0 25px"},attrs:{size:"mini",type:"primary"},on:{click:t.saveCalculate}},[t._v("确认")]),i("el-button",{staticStyle:{margin:"0 25px"},attrs:{size:"mini",type:"primary"},on:{click:t.saveCalculateLabel}},[t._v("保存标签")]),i("el-button",{staticStyle:{margin:"0 25px"},attrs:{size:"mini",type:"primary"},on:{click:t.referenceCalculate}},[t._v("计算价格")])],1),i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-title"},[t._v("计算参考")]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("上新价("+t._s(t.RMBShow?"RMB":t.$filters.siteCoin(t.country))+")：")]),i("div",{staticClass:"item-input"},[t._v(" "+t._s(t.RMBShow&&t.calculateResults.results||Math.ceil(t.calculateResults.results/t.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"标价=折后价/折扣率",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("折后价("+t._s(t.RMBShow?"RMB":t.$filters.siteCoin(t.country))+")：")]),i("div",{staticClass:"item-input"},[t._v(" "+t._s(t.RMBShow&&t.calculateResults.discount||Math.ceil(t.calculateResults.discount/t.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"折后价=成本+运费+手续费+佣金+仓库服务费+利润+交店费/清关费+其它杂费",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"}),i("div",{staticClass:"basisInstall-box-item"})]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap",margin:"10px 0"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("运费("+t._s(t.RMBShow?"RMB":t.$filters.siteCoin(t.country))+")：")]),i("div",{staticClass:"item-input"},[t._v(" "+t._s(t.RMBShow&&t.calculateResults.freight||Math.ceil(t.calculateResults.freight/t.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"运费=计费重*计费单价+仓库服务费+交店费/清关费",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("利润("+t._s(t.RMBShow?"RMB":t.$filters.siteCoin(t.country))+")：")]),i("div",{staticClass:"item-input"},[t._v(" "+t._s(t.RMBShow&&t.calculateResults.profits||Math.ceil(t.calculateResults.profits/t.rateList[this.country]))+" ")]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"利润=折后价*毛利率",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text"}},[i("i",{staticClass:"el-icon-question",staticStyle:{padding:"0 2px"}})])],1)],1),i("div",{staticClass:"basisInstall-box-item"}),i("div",{staticClass:"basisInstall-box-item"})]),i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap"}},[i("div",{staticClass:"basisInstall-box-item"},[i("div",{staticClass:"item-name"},[t._v("当前汇率：")]),i("el-input",{staticStyle:{"pointer-events":"none"},attrs:{disabled:"",size:"mini"},model:{value:t.rateList[this.country],callback:function(e){t.$set(t.rateList,this.country,e)},expression:"rateList[this.country]"}})],1),i("div",{staticClass:"basisInstall-box-item"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.RMBShow=!t.RMBShow}}},[t._v("币种转换")])],1),i("div",{staticClass:"basisInstall-box-item"}),i("div",{staticClass:"basisInstall-box-item"})])])]),i("el-dialog",{attrs:{title:"运费详情",width:"540px",top:"14vh","close-on-click-modal":!1,visible:t.freightVisible},on:{"update:visible":function(e){t.freightVisible=e}}},[i("div",{staticClass:"basisInstall",staticStyle:{width:"100%"}},[i("div",{staticClass:"basisInstall-box",staticStyle:{"flex-wrap":"nowrap",padding:"0 10px"}},[i("div",{staticClass:"basisInstall-box-item"},[t._v(" 运输方式 ")]),i("div",{staticClass:"basisInstall-box-item"},[t._v(" 重量(g) ")]),i("div",{staticClass:"basisInstall-box-item"},[t._v(" 价格(RMB) ")])]),t._l(t.shippingMethodList,(function(e,a){return i("div",{key:a},t._l(t.goodsTypeList,(function(a,s){return i("div",{key:s,staticClass:"basisInstall-box",staticStyle:{padding:"10px",margin:"0",color:"#000"},style:"background:"+(1==s?"#F6ECCB":2==s&&"#FE4148")},[i("div",{staticClass:"basisInstall-box-item"},[t._v(" "+t._s(e.label+"-"+a.label)+" ")]),i("div",{staticClass:"basisInstall-box-item"},[t._v(" 每100g ")]),i("div",{staticClass:"basisInstall-box-item"},[i("el-input",{attrs:{size:"mini"},model:{value:t.freightList[e.value+"-"+a.value],callback:function(i){t.$set(t.freightList,e.value+"-"+a.value,i)},expression:"freightList[sItem.value + '-' +gItem.value]"}})],1)])})),0)}))],2)])],1)],1)},s=[],n=i("53ca"),r=i("2909"),o=i("b85c"),l=i("1da1"),c=(i("96cf"),i("159b"),i("4de4"),i("b680"),i("7db0"),i("5b81"),i("c740"),i("caad"),i("2532"),i("99af"),i("3ca3"),i("ddb0"),i("fb6a"),i("d81d"),i("498a"),i("a4d3"),i("e01a"),i("ac1f"),i("1276"),i("b0c0"),i("d3b7"),i("6062"),i("a15b"),i("a434"),i("a9e3"),i("841c"),i("feb6")),u=i("eb09"),d=i("2b22"),p=i("0e0b");i("25f0");function m(){this.date=new Date,"function"!==typeof this.newGUID&&(m.prototype.newGUID=function(){this.date=new Date;for(var t="",e=this.hexadecimal(this.getGUIDDate(),16),i=this.hexadecimal(this.getGUIDTime(),16),a=0;a<9;a++)t+=Math.floor(16*Math.random()).toString(16);t+=e,t+=i;while(t.length<32)t+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(t)},m.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},m.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},m.prototype.addZero=function(t){return"NaN"!=Number(t).toString()&&t>=0&&t<10?"0"+Math.floor(t):t.toString()},m.prototype.hexadecimal=function(t,e,i){return void 0!=i?parseInt(t.toString(),i).toString(e):parseInt(t.toString()).toString(e)},m.prototype.formatGUID=function(t){var e=t.slice(0,8)+"-",i=t.slice(8,12)+"-",a=t.slice(12,16)+"-",s=t.slice(16,20)+"-",n=t.slice(20);return e+i+a+s+n})}var g=i("7646"),f=i("e1e4"),h=i("5551"),b={data:function(){return{mallListAPIInstance:new g["a"](this),goodsTable:[],goodsTableSelect:[],goodsCurrent:"",mallList:[],country:"",sourceCategoryList:[],sourceCategory:[],resultsFilterList:[{label:"待发布",value:"1"},{label:"发布成功",value:"2"},{label:"发布失败",value:"3"},{label:"重新刊登",value:"4"},{label:"已过滤数据",value:"5"}],resultsFilter:"",mewOnProgress:0,isNoFoldShow:!0,categoryVisible:!1,attributesList:[],attributesCurrent:[],goodsTagVisible:!1,goodsTagAction:"",goodsTagCurrent:"",sellActiveVisible:!1,setSellActiveVisible:!1,sellActiveTable:[],sellActiveSetting:[],sellActiveCurrent:{},watermarkVisible:!1,watermarkConfig:{type:1,addType:1,textType:1,textSize:"30",textColor:"#D5D4DA",locate:1,clarity:.3,imgSize:1,goodsImg:"",watermarkImg:"",text:"水印"},watermarkSetting:{},locateList:[{label:"左上角",value:1},{label:"左下角",value:2},{label:"右上角",value:3},{label:"右下角",value:4},{label:"中间",value:5}],imgSizeList:[{label:"按比例缩放",value:1},{label:"与商品图宽一致",value:2},{label:"与商品图高一致",value:3}],locateClass:"watermark_image_left watermark_image_top",logistics:[],logisticsList:[],customLogistics:[],storeConfig:{watermarkChecked:!0,priceRadio:0,activityChecked:!1,chineseChecked:[],pictureThread:"3",dangerousRadio:0,wordsHeavy:!1},valuationRadio:1,basicConfig:{formula:{percentage:"50",basis:"5",hidden:"5"},discount:"100",valuationMethodsRadio:0,fixedPrice:"150",headlineRadio:0,hotSearch:"1",hotList:"",embargoChecked1:!0,embargoChecked2:!0,minHeavy:"0.1",maxHeavy:"1",categoryMapping:1,sourceCategoryChecked:!1,stockUpChecked:!0,stockUpNumber:"15",onNewThread:"5",numberCeilingChecked:!1,numberCeiling:"1000",usedChecked:!1,deleteCollectChecked:!1,autoCompleteChecked:!1,min_purchase_limit:1},valuationVisible:!1,valuationLabel:"",valuationConfig:{shippingMethod:"sea",goodsType:"general",transactionCommission:"2",warehouseServiceCharge:"3",discount:"",grossProfitMargin:"20",withdrawalCharge:"3",customsClearanceFee:"4.5",other:"",bubbleHeavy:""},valuationSetting:{},valuationLabelList:[],shippingMethodList:[{label:"海运",value:"sea"},{label:"陆运",value:"land"},{label:"空运",value:"air"}],goodsTypeList:[{label:"普货",value:"general"},{label:"敏感货",value:"sensitive"},{label:"特货",value:"special"}],calculateReference:{long:"",width:"",height:"",weight:"10",costing:"",bubbleHeavy:"",bubbleHeavyNum:""},calculateResults:{results:"",discount:"",freight:"",profits:""},freightVisible:!1,freightList:{"sea-general":"1.8","sea-sensitive":"1.8","sea-special":"1.8","land-general":"1.8","land-sensitive":"1.8","land-special":"1.8","air-general":"1.8","air-sensitive":"1.8","air-special":"1.8"},exchangeRate:"",categoryMappingList:[{label:"个人类目映射",value:1},{label:"共有类目映射",value:2}],associatedConfig:{specialCharChecked:!0,realNameChecked:!1,onNewInterval:"40",dimensionRadio:1,pictureSetting:{mainRandomChecked:!0,firstChecked:!0,cutChecked:!0,randomChecked:!0,whiteChecked:!1,index:"1",compressionChecked:!0},missingUploadChecked:!1,keyFilter:[0,1,2,3],keyList:"",priceRange:"2"},keyFilterList:[{label:"标题",value:1},{label:"描述",value:2},{label:"SKU",value:3}],statistics:{count:0,success:0,failure:0,repeat:0,filter:0},sourceObj:null,source:null,labelList:[],isBanPerform:!1,RMBShow:!0,rateList:{},titleInterval:{TH:{min:20,max:120},VN:{min:10,max:120},MY:{min:20,max:120},SG:{min:10,max:120},TW:{min:5,max:60},PH:{min:20,max:100},ID:{min:5,max:100},BR:{min:1,max:120}},descriptionInterval:{TH:{min:25,max:3e3},VN:{min:100,max:3e3},MY:{min:20,max:3e3},SG:{min:20,max:3e3},TW:{min:5,max:3e3},PH:{min:100,max:3e3},ID:{min:20,max:3e3},BR:{min:1,max:3e3}},uploadImgAdd:!1,watermarkPreviewType:1,GoodsManagerAPIInstance:new f["a"](this),GoodsDiscount:new h["a"](this),preorderMinDays:"",preorderMaxDays:""}},computed:{},components:{storeChoose:c["a"],categoryMapping:u["a"],goodsLabel:d["a"]},watch:{country:function(t){switch(this.associatedConfig.onNewInterval="ID"!==t?"40":"50",this.sellActiveSetting=[],t){case"BR":this.preorderMaxDays=10,this.preorderMinDays=5,this.basicConfig.stockUpNumber=7;break;case"TW":this.preorderMaxDays=20,this.preorderMinDays=5,this.basicConfig.stockUpNumber=10;break;case"ID":case"VN":this.preorderMaxDays=15,this.preorderMinDays=7,this.basicConfig.stockUpNumber=10;break;default:this.preorderMaxDays=30,this.preorderMinDays=7,this.basicConfig.stockUpNumber=15;break}this.changeLogistics(),this.publishGoodsConfigGet()},valuationRadio:function(t){if(2===t){var e=this.valuationSetting;e&&e.bubbleHeavy>=0||this.$alert("计价信息为空，请填写点击确认后再选择此计价方式上新！","提示",{confirmButtonText:"确定",callback:function(t){}})}},watermarkConfig:{handler:function(t){if(t.type<3){var e=t.locate%2?"watermark_image_top ":"watermark_image_bottom ";e+=t.locate>2?"watermark_image_right ":"watermark_image_left ",e=t.locate<5&&e||"watermark_image_center ",2===t.type&&(e+=1===t.imgSize?"watermark_image_reduce ":"watermark_image_fixed ",2===t.imgSize||t.imgSize,e+=(1===t.imgSize?"watermark_image_reduce ":2===t.imgSize&&"watermark_image_width ")||"watermark_image_height "),this.locateClass=e}},deep:!0},logistics:function(t){var e=this;this.customLogistics=[],t.forEach((function(t){var i=e.logisticsList.filter((function(e){return e.ShipId===t}))[0];i&&i.IsCustomShipFee&&e.customLogistics.push(i)}))},goodsTagAction:function(t){this.goodsTagCurrent=t},goodsTable:{handler:function(t){},deep:!0},calculateReference:{handler:function(t){var e=t.long||0,i=t.width||0,a=t.height||0,s=t.bubbleHeavyNum||0,n=e*i*a;s&&n&&(n=1*(n/s*1e3).toFixed(2)),this.calculateReference.bubbleHeavy=n},deep:!0},valuationLabel:function(t){try{var e=this.valuationLabelList.find((function(e){return e.id===t})),i=e&&e.config,a=i&&i[0]||"";if(a)this.valuationSetting=JSON.parse(a),this.valuationConfig=JSON.parse(a),this.freightList=i[1]&&JSON.parse(i[1])||this.freightList;else{var s={shippingMethod:i.TransportType||"sea",goodsType:i.GoodsType||"general",transactionCommission:i.Brokerage||"2",warehouseServiceCharge:i.WarehouseFee||"3",discount:i.DiscountRate||"",grossProfitMargin:i.GrossMargin||"20",withdrawalCharge:i.HandlingFee||"3",customsClearanceFee:i.ShopFeeOrClearanceFee||"4.5",other:i.OriginPrice||"",bubbleHeavy:i.BulkRate||""};if(this.valuationSetting=s,this.valuationConfig=s,i.FeeDetailList)for(var n in i.FeeDetailList){var r=i.FeeDetailList[n],o=r.TransportType;o.replaceAll("海运","sea"),o.replaceAll("陆运","land"),o.replaceAll("空运","air"),o.replaceAll("普货","general"),o.replaceAll("敏感货","sensitive"),o.replaceAll("特货","special"),this.freightList[o]=r.ShipFee}}}catch(l){}}},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.$IpcMain.on("gotoUpload",function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(i){var a,s,n,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$BaseUtilService.getUploadGoodsId();case 2:a=e.sent,s=JSON.parse(a),n=Object(o["a"])(s);try{for(l=function(){var e=r.value,i=t.goodsTable.findIndex((function(t){return t.id===e.id}));i>=0&&t.$set(t.goodsTable,i,e)||t.goodsTable.push(e)},n.s();!(r=n.n()).done;)l()}catch(i){n.e(i)}finally{n.f()}return t.statistics.count=t.goodsTable.length,e.next=9,t.$BaseUtilService.gotoUploadTab("updateId","");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,t.$appConfig.getUserInfo();case 4:return i=e.sent,t.rateList=i.ExchangeRates||{},e.next=8,t.$api.valuationConfigGetAll();case 8:a=e.sent,t.valuationLabelList=a&&a.data.data||[],t.publishGoodsConfigGet(),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})))()},methods:{startRelease:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.goodsTableSelect.length<1)){e.next=3;break}return t.$message.error("请选择商品后再操作"),e.abrupt("return");case 3:if(!(t.logistics.length<1)){e.next=6;break}return t.$message.error("配置物流信息后再操作"),e.abrupt("return");case 6:if(!(t.mallList.length<1)){e.next=9;break}return t.$message.error("请选择店铺后再操作"),e.abrupt("return");case 9:if(!(t.customLogistics.length>0)){e.next=28;break}i=Object(o["a"])(t.customLogistics),e.prev=11,i.s();case 13:if((a=i.n()).done){e.next=20;break}if(s=a.value,1*s.price){e.next=18;break}return t.$message.error("运费价格有误，请确认"),e.abrupt("return");case 18:e.next=13;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](11),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:if(!t.storeConfig.watermarkChecked||!t.watermarkSetting||t.watermarkSetting.type){e.next=31;break}return t.$message.error("配置水印后再操作"),e.abrupt("return");case 31:return t.isBanPerform=!0,t.isCancelRelease=!1,t.mewOnProgress=0,t.statistics=Object.assign(t.statistics,{success:0,failure:0,repeat:0,filter:0}),e.next=37,Object(p["c"])(t.mallList,t.prepareWork,t.basicConfig.onNewThread);case 37:t.mewOnProgress=100,t.isBanPerform=!1;case 39:case"end":return e.stop()}}),e,null,[[11,22,25,28]])})))()},cancelRelease:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isCancelRelease=!0,Object(p["z"])();case 2:case"end":return e.stop()}}),e)})))()},prepareWork:function(t){var e=arguments,i=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,l,c,u,d,g,f,h,b,v,C,x,y,k,_,w,S,I,R,M,N,T,z,$,L,A,O;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.length>1&&void 0!==e[1]?e[1]:{count:1},l=null,c="",a.prev=3,u=t.mall_alias_name||t.platform_mall_name,d=t.platform_mall_id,g=[],f=[],a.next=10,i.mallListAPIInstance.getUserInfo(t);case 10:if(h=a.sent,b=200===h.code,!b){a.next=23;break}return v={},v["mallId"]=t.platform_mall_id,a.next=17,i.$shopeemanService.getChinese(t.country,"/api/v3/logistics/get_channel_list/?",v);case 17:C=a.sent,x=JSON.parse(C),y=JSON.parse(x.data),k=y.data&&y.data.list||[],_=Object(o["a"])(k);try{for(S=function(){var t=w.value;if(t.enabled!==i.logistics.includes(t.channel_id+"")||t.is_mask_channel){var e={enabled:i.logistics.includes(t.channel_id+""),channelid:t.channel_id,sizeid:0,size:0,price:"0.00",cover_shipping_fee:!1,parent_channel_id:0},a=i.customLogistics.find((function(e){return e.shopId===t.channel_id+""}));a&&(e["price"]=a.price+""),f.push(e)}},_.s();!(w=_.n()).done;)S()}catch(P){_.e(P)}finally{_.f()}case 23:if(i.associatedConfig.dimensionRadio<2)for(I=i.mallList.length,R=i.mallList.findIndex((function(e){return e.id===t.id})),M=i.goodsTableSelect.length,N=0;R<M;N++)R+=I*N,R<M&&(g=[].concat(Object(r["a"])(g),[i.goodsTableSelect[R]]));else g=i.goodsTableSelect;T=Object(o["a"])(g),a.prev=25,$=regeneratorRuntime.mark((function e(){var a,s,n,o,g,h,v,C,x,y,k,_,w,S,I,R,M,N,T,$,L,A,O,P,B,j,D,J,F,V,U,G,H,E,q,W,Y,Z,K,Q,X,tt,et,it,at,st,nt,rt,ot,lt,ct,ut,dt,pt,mt,gt,ft,ht,bt,vt,Ct,xt,yt,kt,_t,wt,St,It,Rt,Mt,Nt,Tt;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=z.value,!i.isCancelRelease){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:if(l=n,i.updateAttributeName(n,"正在准备发布"),i.updateAttributeName(n,u,"mallName"),b){e.next=10;break}return i.updateAttributeName(n,"发布失败：".concat(u,"店铺未登录")),++i.statistics.failure,e.abrupt("return","continue");case 10:return o={attributes:[],stock:n.stock,model_list:[],weight:n.weight+"",dimension:{width:n.width,height:n.height,length:n.long},condition:1,dangerous_goods:0,min_purchase_limit:"TW"===i.country&&parseInt(i.basicConfig.min_purchase_limit)||1,input_normal_price:null,input_promotion_price:null,id:0,images:[],tier_variation:[],category_recommend:[],price_before_discount:"",wholesale_list:[],installment_tenures:{},pre_order:i.basicConfig.stockUpChecked,days_to_ship:Math.floor(i.basicConfig.stockUpNumber)||15,logistics_channels:f.slice(0,4),unlisted:i.basicConfig.usedChecked,add_on_deal:[]},g=n.originCategoryId||n.category_id,h=n.platform||n.source,i.updateAttributeName(n,"正在抓取产品"),e.next=16,i.$commodityService.getSpuDetailByIdV2(n.id);case 16:return v=e.sent,C=JSON.parse(v),x=C.data,200!=C.code&&(c=C.msg||""),y=JSON.parse(JSON.stringify(o)),i.updateAttributeName(n,"正在匹配类目"),e.next=24,i.$commodityService.getCategoryRelation(g,i.country,h);case 24:if(k=e.sent,_=JSON.parse(k),w=(null===_||void 0===_||null===(a=_.data)||void 0===a||null===(s=a.category)||void 0===s?void 0:s.platform_category_id)||"",!w){e.next=42;break}return e.next=30,i.getCategoryPath(w);case 30:if(e.t0=e.sent,e.t0){e.next=33;break}e.t0=[];case 33:y["category_path"]=e.t0,S=_.data&&_.data.attributes||[],I=_.data.category,R="".concat(I.platform_category_name,"(").concat(I.platform_category_cn_name,")"),M=i.goodsTable.findIndex((function(t){return t.id===n.id})),i.$set(i.goodsTable[M],"categoryName",R),S.forEach((function(t){t.attribute_id?y["attributes"].push({attribute_id:t.attribute_id,attribute_value_id:Math.floor(t.value_id)}):y["brand_id"]=Math.floor(t.value_id)||0})),e.next=45;break;case 42:return i.updateAttributeName(n,"无类目映射，请选择类目"),++i.statistics.failure,e.abrupt("return","continue");case 45:return N=1,i.associatedConfig.dimensionRadio<2&&(N=i.associatedConfig.dimensionRadio+1),T={sysMallId:t.id+"",platformType:n.source,itemSku:n.goods_id+"",title:n.title,country:i.country,dimension:N+""},e.next=50,i.$commodityService.checkListingRepeat(T);case 50:if($=e.sent,L=JSON.parse($),200!==L.code){e.next=59;break}if(A=L.data,O=A.status,!(O>0)){e.next=59;break}return i.updateAttributeName(n,"发布失败：此产品已重复上新"),++i.statistics.failure,e.abrupt("return","continue");case 59:return i.updateAttributeName(n,"开始组装商品数据"),"0"==y["weight"]&&(y["weight"]=Object(p["s"])(i.basicConfig.minHeavy,i.basicConfig.maxHeavy,2)+"",x["weight"]=y["weight"]),P=n.extra_info&&JSON.parse(n.extra_info),B=P&&P.tmall_cross_border_user_id||"",e.next=65,i.$BaseUtilService.buildGoodCode(h,n.goods_id,i.country,t.platform_mall_id,B);case 65:if(y["parent_sku"]=e.sent,j=new m,y["ds_cat_rcmd_id"]=j.newGUID()+"|c|EN",y["ds_attr_rcmd_id"]=j.newGUID()+"|a|EN",D=x.tier_variation,D[D.spec1].length>0&&y["tier_variation"].push({name:D.spec1,options:Object(r["a"])(D[D.spec1].map((function(t){return t.substring(0,20).trim()}))),images:D.images}),D[D.spec2].length>0&&y["tier_variation"].push({name:D.spec2,options:Object(r["a"])(D[D.spec2].map((function(t){return t.substring(0,20).trim()}))),images:[]}),y["price"]=i.getValuationPrice(x.price,x),y["price"]=Math.ceil(y["price"]/i.rateList[i.country])+"",y["description"]=x.description||"",J=i.basicConfig.hotList||"",J=J.replaceAll("，",","),J=J.split(",")||[],F="",V=n.title,i.basicConfig.hotSearch>0&&J[0]){for(U=J.length,G=0;G<i.basicConfig.hotSearch;G++)H=Math.floor(Math.random()*U),F+=J[H]+" ";V=i.basicConfig.headlineRadio?V+" "+F:F+""+V}return i.associatedConfig.specialCharChecked&&(E=i.$filters.special_characters,q=E[Math.floor(Math.random()*E.length)],V=q+" "+V),i.associatedConfig.realNameChecked&&(V=t.platform_mall_name+" "+V),y["name"]=V,i.updateAttributeName(n,"检测商品数据是否合格"),e.next=87,i.fieldFilter(y,n);case 87:if(W=e.sent,W){e.next=91;break}return++i.statistics.failure,e.abrupt("return","continue");case 91:if(i.storeConfig.wordsHeavy&&(Y=y["name"].split(" "),Z=new Set,Y.forEach((function(t){Z.add(t)})),y["name"]=Object(r["a"])(Z).join("")),K=x.images,Q=!1,i.associatedConfig.pictureSetting.firstChecked&&K.splice(0,1),i.associatedConfig.pictureSetting.cutChecked){X=Math.floor(K.length/3),tt=Math.ceil(Math.random()*X)||0;while(tt--)et=Math.floor(Math.random()*K.length),K.splice(et,1)}if(2===i.associatedConfig.dimensionRadio?i.associatedConfig.pictureSetting.mainRandomChecked&&(it=Math.floor(Math.random()*K.length),at=K.splice(it,1),K=[].concat(Object(r["a"])(at),Object(r["a"])(K))):(st=K.splice(i.associatedConfig.pictureSetting.index,1),K=[].concat(Object(r["a"])(st),Object(r["a"])(K))),!i.associatedConfig.pictureSetting.whiteChecked){e.next=103;break}return nt=K[0],e.next=101,i.$MattingService.getDrawbotMattingByUrl(nt,(new Date).getTime()+".png");case 101:rt=e.sent,200===rt.Code&&(ot=rt.Data,lt=ot.Data&&ot.Data.ImageURL,K[0]=lt||nt);case 103:if(!i.storeConfig.watermarkChecked){e.next=122;break}if(0!==i.watermarkConfig.addType){e.next=111;break}return e.next=107,i.additionalWatermarking(K[0],t);case 107:Q=e.sent,K[0]=Q||K[0],e.next=122;break;case 111:ct=0;case 112:if(!(ct<K.length)){e.next=122;break}return e.next=115,i.additionalWatermarking(K[ct],t);case 115:if(Q=e.sent,K[ct]=Q||K[ct],Q){e.next=119;break}return e.abrupt("return",{v:void 0});case 119:ct++,e.next=112;break;case 122:return y["images"]=K,x.sizeImages&&x.sizeImages[0]&&(y["size_chart"]=x.sizeImages[0].img||""),ut=JSON.stringify(x.itemmodels),y["model_list"]=JSON.parse(ut).map((function(t){var e=i.getValuationPrice(t.price,x);return e=Math.ceil(e/i.rateList[i.country])+"",t={id:0,name:"",is_default:!1,item_price:"",input_normal_price:null,input_promotion_price:null,tier_index:t.tier_index,sku:t.sku,stock:t.stock,price:e},t})),i.updateAttributeName(n,"正在上传轮播图"),e.next=129,Object(p["u"])(t,y["images"],i,i.storeConfig.pictureThread);case 129:if(dt=e.sent,y["images"]=y.images.map((function(t){return t=dt[t]||"",t})),!y["images"].includes("")){e.next=139;break}if(i.associatedConfig.missingUploadChecked){e.next=136;break}return i.updateAttributeName(n,"轮播图上传缺失"),++i.statistics.failure,e.abrupt("return","continue");case 136:pt=[],y["images"].forEach((function(t){t&&pt.push(t)})),y["images"]=pt;case 139:return i.updateAttributeName(n,"正在上传规格图"),e.next=142,Object(p["u"])(t,x.spec_image,i,i.storeConfig.pictureThread);case 142:for(ht in mt=e.sent,gt=JSON.stringify(y["tier_variation"]),ft=[],mt)gt=gt.replaceAll('"'+ht+'"','"'+mt[ht]+'"'),ft.push(mt[ht]);if(!ft.includes("")){e.next=150;break}return i.updateAttributeName(n,"规格图上传缺失"),++i.statistics.failure,e.abrupt("return","continue");case 150:if(y["tier_variation"]=JSON.parse(gt),!y["size_chart"]){e.next=157;break}return i.updateAttributeName(n,"正在上传尺寸图"),e.next=155,Object(p["u"])(t,[y["size_chart"]],i,i.storeConfig.pictureThread);case 155:bt=e.sent,y["size_chart"]=bt[y["size_chart"]]||"";case 157:return i.basicConfig.autoCompleteChecked&&y["images"].length<9&&(vt=[].concat(Object(r["a"])(y["images"]),ft),y["images"]=vt.slice(0,9)),i.updateAttributeName(n,"正在创建商品信息"),e.next=161,Object(p["y"])(1e3*i.associatedConfig.onNewInterval);case 161:return e.next=163,i.$shopeemanService.createProduct(i.country,{mallId:t.platform_mall_id},[y]);case 163:if(Ct=e.sent,200!==Ct.code){e.next=200;break}return xt=Ct.data&&Ct.data.product_id,++i.statistics.success,i.updateAttributeName(n,"发布完成"),yt={sysMallId:t.id+"",platformType:n.source+"",itemSku:n.goods_id+"",title:n.title,listingId:xt+"",country:i.country,mallId:t.platform_mall_id,categoryId:w+"",skuDatas:""},e.next=171,i.$commodityService.SaveListingRecord(yt);case 171:if(kt=e.sent,JSON.parse(kt),i.updateAttributeName(n,xt,"product_id"),i.updateAttributeName(n,d,"mallId"),i.updateAttributeName(n,i.country,"country"),!i.storeConfig.activityChecked){e.next=198;break}if(_t=i.sellActiveSetting.find((function(e){return e.platform_mall_id===t.platform_mall_id})),!_t.goodsId){e.next=184;break}return wt={country:i.country,mallId:t.platform_mall_id,collection_id:Number(_t.goodsId),product_id_list:[xt]},e.next=182,i.GoodsManagerAPIInstance.addCollectionGoods(wt);case 182:St=e.sent,0===St.ecode?i.$message.success("添加成功"):i.$message.warning("添加失败".concat(St.message));case 184:if(!(_t.discountId&&_t.number&&_t.discount)){e.next=198;break}return It={},It["product_id"]=xt,It["version"]="3.2.0",It["shop_id"]=n.platform_mall_id,e.next=191,i.$shopeemanService.searchProductDetail(n.country,It);case 191:if(Rt=e.sent,200!==Rt.code){e.next=198;break}return Mt=[],Rt.data.model_list.forEach((function(t){var e={discount:Math.floor(100-_t.discount),itemid:xt,model_name:t.name,modelid:t.id,price_before_discount:Number(t.price),promotion_price:(t.price*_t.discount/100).toFixed(2),promotionid:_t.discountId,selected:!0,shopid:Number(n.platform_mall_id),status:1,total_item_limit:0,user_item_limit:_t.number};Mt.push(e)})),Nt={discount_id:_t.discountId,discount_model_list:Mt,mallId:n.platform_mall_id},e.next=198,i.GoodsDiscount.putModelActive(n.country,Nt);case 198:e.next=203;break;case 200:++i.statistics.failure,Tt=i.$filters.errorMsg(Ct.data),i.updateAttributeName(n,Tt);case 203:case"end":return e.stop()}}),e)})),T.s();case 28:if((z=T.n()).done){a.next=37;break}return a.delegateYield($(),"t0",30);case 30:if(L=a.t0,"continue"!==L){a.next=33;break}return a.abrupt("continue",35);case 33:if("object"!==Object(n["a"])(L)){a.next=35;break}return a.abrupt("return",L.v);case 35:a.next=28;break;case 37:a.next=42;break;case 39:a.prev=39,a.t1=a["catch"](25),T.e(a.t1);case 42:return a.prev=42,T.f(),a.finish(42);case 45:a.next=50;break;case 47:a.prev=47,a.t2=a["catch"](3),l&&i.updateAttributeName(l,c||"发布失败，数据或请求异常");case 50:return a.prev=50,A=100/i.mallList.length,O=(i.mewOnProgress+A).toFixed(2),O=O<100&&O||100,i.mewOnProgress=1*O,--s.count,a.finish(50);case 57:case"end":return a.stop()}}),a,null,[[3,47,50,57],[25,39,42,45]])})))()},fieldFilter:function(t,e){var i=this;return new Promise(function(){var a=Object(l["a"])(regeneratorRuntime.mark((function a(s){var n,r,o,l,c,u,d,p,m,g,f,h,b,v,C;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n=JSON.stringify(t["tier_variation"]),r=i.associatedConfig.keyFilter,o=i.titleInterval[i.country],l=i.descriptionInterval[i.country],t["name"]=t["name"].slice(0,o.max),t["name"].length<o.min&&(i.updateAttributeName(e,"商品标题长度过短"),s(!1)),t["description"]=t["description"].slice(0,l.max),t["description"].length<l.min&&(i.updateAttributeName(e,"商品描述长度过短"),s(!1)),c=i.associatedConfig.keyList,u=c.split(","),u.length>0&&u.forEach((function(a){if(a){var o=t["name"].includes(a),l=t["description"].includes(a),c=n.search('"options":".*('+a+').*",'),u=!1;r.includes(0)&&(o||l||c)?u=!0:(r.includes(1)&&o&&(u=!0),r.includes(2)&&l&&(u=!0),r.includes(3)&&c&&(u=!0)),u&&i.updateAttributeName(e,"关键词过滤成功"),u&&++i.statistics.filter,u&&s(!1)}})),d={page:"1",perpage:"100",word:"",country:i.country,source:"0",type:"1"},a.next=15,i.$commodityService.getBannedWordList(d);case 15:return p=a.sent,m=JSON.parse(p),g=m.data&&m.data.data||[],g.forEach((function(a){if(a.word){var r=t["name"].includes(a.word),o=t["description"].includes(a.word),l=n.search('"options":".*('+a.word+').*",');if(r||o||l){var c=[];r&&c.push("标题"),o&&c.push("描述"),l&&c.push("SKU"),c=c.join("、"),i.updateAttributeName(e,"发布失败：此商品".concat(c,"含有禁运词")),++i.statistics.filter,s(!1)}}})),f={type:"0",country:i.country,page:"1",perpage:"100",parentCategoryTree:[]},a.next=22,i.$commodityService.getBlackCategory(f);case 22:h=a.sent,b=JSON.parse(h),v=b.data&&b.data.data||[],C=t["category_path"].join("-"),v.forEach((function(t){t&&t.parent_category_tree===C&&(++i.statistics.filter,i.updateAttributeName(e,"发布失败：该类目是禁运类目"),s(!1))})),s(!0),a.next=35;break;case 30:a.prev=30,a.t0=a["catch"](0),i.updateAttributeName(e,"发布失败：网络异常请稍后再试"),++i.statistics.filter,s(!1);case 35:case"end":return a.stop()}}),a,null,[[0,30]])})));return function(t){return a.apply(this,arguments)}}())},additionalWatermarking:function(t,e){var i=this,a=this;return new Promise((function(s){var n=i.watermarkSetting,r=new Image;r.setAttribute("crossOrigin","anonymous"),r.src=t,r.onload=Object(l["a"])(regeneratorRuntime.mark((function t(){var i,o,c,u,d,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=document.createElement("canvas"),i.width=r.width,i.height=r.height,o=i.getContext("2d"),o.drawImage(r,0,0,r.width,r.height),c=0,u=0,1===n.type?(d="",1===a.watermarkConfig.textType?d=e.mall_alias_name||e.platform_mall_name:(2===a.watermarkConfig.textType||3===a.watermarkConfig.textType)&&(d=e.platform_mall_name),o.font="".concat(a.watermarkConfig.textSize,'px "微软雅黑"'),o.fillStyle=a.watermarkConfig.textColor,o.textBaseline="top",1===n.locate?(o.textAlign="left",c=5,u=5):2===n.locate?(o.textAlign="left",c=5,u=Math.floor(r.height)-5):3===n.locate?(o.textAlign="right",c=Math.floor(r.width)-5,u=5):4===n.locate?(o.textAlign="right",c=Math.floor(r.width)-5,u=Math.floor(r.height)-5):5===n.locate&&(o.textBaseline="center",o.textAlign="center",c=Math.floor(r.width/2),u=Math.floor(r.height/2)),o.fillText(d,c,u),p=i.toDataURL("image/png"),s(p)):n.watermarkImg&&(m=new Image,m.src=n.watermarkImg,m.onload=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:2===n.type?(1===n.imgSize?(m.width=Math.floor(r.width/5),m.height=Math.floor(r.height/5)):2===n.imgSize?m.width=r.width:3===n.imgSize&&(m.height=r.height),1===n.locate?(c=5,u=5):2===n.locate?(c=5,u=Math.floor(r.height-m.height)-5):3===n.locate?(c=Math.floor(r.width-m.width)-5,u=5):4===n.locate?(c=Math.floor(r.width-m.width)-5,u=Math.floor(r.height-m.height)-5):5===n.locate&&(c=Math.floor((r.width-m.width)/2),u=Math.floor((r.height-m.height)/2)),r.width<=m.width&&(c=0),r.height<=m.height&&(u=0),m.style.opacity=n.clarity,o.globalAlpha=n.clarity):(m.width=m.width<r.width&&m.width||r.width,m.height=m.height<r.height&&m.height||r.height,o.globalAlpha=1),o.beginPath(),o.drawImage(m,c,u,m.width,m.height),o.closePath(),o.save(),e=i.toDataURL("image/png"),s(e);case 7:case"end":return t.stop()}}),t)}))));case 7:case"end":return t.stop()}}),t)})))}))},getValuationPrice:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t*=1,1===this.valuationRadio){var a=(t*this.basicConfig.formula.percentage/100).toFixed(2),s=1*a+1*this.basicConfig.formula.hidden+1*this.basicConfig.formula.basis;return s=(t+s*this.basicConfig.discount/100).toFixed(2),this.basicConfig.valuationMethodsRadio&&(s=Math.ceil(s)),s}if(2===this.valuationRadio){if(i=i||this.valuationSetting,i&&i.bubbleHeavy>=0){var n=e.long||e.length,r=e.width,o=e.height,l=1*(n*r*o/i.bubbleHeavy*1e3).toFixed(2),c=e.weight>l&&e.weight||l;c=Math.ceil(c/100);var u=1*this.freightList[i.shippingMethod+"-"+i.goodsType],d=1*i.warehouseServiceCharge,p=1*i.customsClearanceFee,m=1*(c*u+d+p).toFixed(2),g=i.other&&1*i.other||0,f=i.transactionCommission||0,h=i.withdrawalCharge||0,b=i.grossProfitMargin||0,v=((100-1*f)/100).toFixed(2),C=((100+1*h)/100).toFixed(2),x=((100-1*b)/100).toFixed(2),y=t+m+g,k=1*(y/v/x*C).toFixed(2),_=1*(k*(1-x)).toFixed(2);this.valuationVisible&&(this.calculateResults.profits=this.country.includes("MY")&&_||Math.ceil(_),this.calculateResults.discount=this.country.includes("MY")&&k||Math.ceil(k),this.calculateResults.freight=this.country.includes("MY")&&m||Math.ceil(m));var w=(i.discount/100).toFixed(2),S=1*(k/w).toFixed(2);return S=this.country.includes("MY")&&S||Math.ceil(S),this.basicConfig.valuationMethodsRadio&&(S=Math.ceil(S)),S}return 0}if(3===this.valuationRadio)return this.basicConfig.fixedPrice},saveCalculate:function(){var t=this.valuationConfig,e="";t.discount?t.bubbleHeavy||(e="泡重计算比不能为空"):e="折扣率不能为空",e?this.$message.error(e):(this.valuationSetting=JSON.parse(JSON.stringify(t))||"",this.valuationVisible=!1)},saveCalculateLabel:function(){var t=this;this.$prompt("请输入标签名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(i){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i.value,s={country:t.country,label:a,config:[JSON.stringify(t.valuationConfig),JSON.stringify(t.freightList)]},e.next=4,t.$api.valuationConfigSave(s);case 4:e.sent,t.$message({type:"success",message:"保存标签成功"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$message({type:"info",message:"取消保存标签"})}))},updateAttributeName:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"statusName",a=this.goodsTable.findIndex((function(e){return e.id===t.id}));a>=0&&this.$set(this.goodsTable[a],i,e)},getCategoryPath:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$commodityService.getCategoryTbInfo(e.country,t,"0");case 3:if(a=i.sent,s=JSON.parse(a),n=s.data,o=(null===n||void 0===n?void 0:n.categories[0].parent_id)||0,i.t1=o,!i.t1){i.next=17;break}return i.t2=[],i.t3=r["a"],i.next=13,e.getCategoryPath(o);case 13:i.t4=i.sent,i.t5=(0,i.t3)(i.t4),i.t6=[t],i.t1=i.t2.concat.call(i.t2,i.t5,i.t6);case 17:if(i.t0=i.t1,i.t0){i.next=20;break}i.t0=[t];case 20:return i.abrupt("return",i.t0);case 23:return i.prev=23,i.t7=i["catch"](0),i.abrupt("return",[t]);case 26:case"end":return i.stop()}}),i,null,[[0,23]])})))()},changeStockUpNumber:function(t,e){1===e?(t=t<this.preorderMinDays&&this.preorderMinDays||t,t=t>this.preorderMaxDays&&this.preorderMaxDays||t,this.basicConfig.stockUpNumber=t):2===e?(t=t<1?1:t,t=t>5?5:t,this.basicConfig.onNewThread=t):3===e?(t=t,t=t>10?10:t,this.associatedConfig.priceRange=t):4===e&&(t=t<1?1:t,t=t>5?5:t,this.storeConfig.pictureThread=t)},synchronousCategory:function(){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},valuationInit:function(){this.valuationConfig=Object.assign(this.valuationConfig,this.valuationSetting),this.calculateReference={long:"",width:"",height:"",weight:"10",costing:"",bubbleHeavy:""},this.calculateResults={results:"",discount:"",freight:"",profits:""},this.valuationVisible=!0},referenceCalculate:function(){var t=this.valuationConfig,e=this.calculateReference,i="";t.discount?t.bubbleHeavy||(i="泡重计算比不能为空"):i="折扣率不能为空",i?this.$message.error(i):this.calculateResults.results=this.getValuationPrice(e.costing,e,t)},goToGoods:function(t,e){if(e)try{var i=this.$filters.countryShopeebuyCom(t.country);this.$BaseUtilService.openUrl("".concat(i,"/product/").concat(t.mallId,"/").concat(t.product_id))}catch(r){this.$message.error("打开失败")}else{var a=t.extra_info&&JSON.parse(t.extra_info)||{},s=Object.assign({productId:t.goods_id},a),n=Object(p["p"])(t.source,s);this.$BaseUtilService.openUrl(n.url)}},enterCategory:function(){var t=arguments,e=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:0,s=t.length>1&&void 0!==t[1]?t[1]:null,!(1===a&&e.mallList.length<1)){i.next=5;break}return e.$message.error("请选择一个店铺"),i.abrupt("return",!1);case 5:if(!(2===a&&e.goodsTableSelect.length<1)){i.next=8;break}return e.$message.error("请选择一个商品信息"),i.abrupt("return",!1);case 8:e.goodsCurrent=s,e.categoryVisible=!0;case 10:case"end":return i.stop()}}),i)})))()},categoryChange:function(t){var e=this;if(t){var i=t.categoryList,a=i[i.length-1],s=a&&"".concat(a.category_name,"(").concat(a.category_cn_name,")");if(this.goodsCurrent){var n=this.goodsTable.findIndex((function(t){return t.id===e.goodsCurrent.id}));this.$set(this.goodsTable[n],"categoryName",s)}else{var r=[];t.attributesList.forEach((function(t){var e=t.new_options_obj.find((function(e){return e.value_id===t.options}));r.push({attributeId:t.attribute_id,attributeName:t.attribute_name,valueId:e.value_id,value:e.value})})),this.goodsTableSelect.forEach(function(){var i=Object(l["a"])(regeneratorRuntime.mark((function i(a){var n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n={relationCategoryId:a.category_id,country:t.country,platformId:a.source,platformCategoryId:t.categoryList[t.categoryList.length-1].category_id,categoryAttributes:r},i.next=3,e.$commodityService.saveCategoryRelation(n);case 3:i.sent,o=e.goodsTable.findIndex((function(t){return t.id===a.id})),e.$set(e.goodsTable[o],"categoryName",s);case 6:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())}}this.categoryVisible=!1},enterGoodsTag:function(){this.goodsTableSelect.length<1?this.$message.error("请至少选择一个商品"):this.goodsTagVisible=!0},goodsTagChange:function(t){var e=this;t&&(this.goodsTableSelect.forEach((function(i){var a=t.category&&t.category.label_name;e.updateAttributeName(i,a,"sys_label_name")})),this.$message.success("商品标签修改成功")),this.goodsTagVisible=!1},updateSellActive:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var a,s,n,r,o,l,c,u,d,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t){i.next=5;break}a=e.sellActiveTable.find((function(t){if(!t.goodsId&&(!t.discountId||!t.discount||!t.number))return t})),a?e.$confirm("部分折扣活动未配置折扣信息，是否放弃并继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){e.sellActiveTable.forEach((function(t){var i=e.sellActiveSetting.findIndex((function(e){return e.platform_mall_id===t.platform_mall_id}));t.discount&&t.number||t.goodsId?i>-1?e.sellActiveSetting[i]=t:e.sellActiveSetting.push(t):i>-1&&e.sellActiveSetting.splice(i,1)})),e.sellActiveVisible=!1})).catch((function(){})):(e.sellActiveTable.forEach((function(t){var i=e.sellActiveSetting.findIndex((function(e){return e.platform_mall_id===t.platform_mall_id}));t.discount&&t.number||t.goodsId?i>-1?e.sellActiveSetting[i]=t:e.sellActiveSetting.push(t):i>-1&&e.sellActiveSetting.splice(i,1)})),e.sellActiveVisible=!1),i.next=29;break;case 5:if(s=parseInt(e.sellActiveCurrent.discount),n=parseInt(e.sellActiveCurrent.number),!(s<0||s>100||n<1)){i.next=10;break}return e.$message.error("折扣比例或限购数量输入数值有误"),i.abrupt("return");case 10:if(r=e.sellActiveTable.findIndex((function(t){return t.platform_mall_id===e.sellActiveCurrent.platform_mall_id})),!e.sellActiveCurrent.isExisting){i.next=16;break}e.sellActiveTable[r].discount=s,e.sellActiveTable[r].number=n,i.next=28;break;case 16:if(o=Math.floor(new Date(e.sellActiveCurrent.startTime).getTime()/1e3),l=Math.floor(new Date(e.sellActiveCurrent.endTime).getTime()/1e3),!(l-o<3600)){i.next=21;break}return e.$message.error("活动时间不能小于1小时"),i.abrupt("return");case 21:return c={mallId:e.sellActiveCurrent.platform_mall_id,fe_status:"upcoming",highlight:"",title:e.sellActiveCurrent.name,start_time:o,end_time:l,status:1},u={headers:{"Content-Type":"application/json;charset=UTF-8"}},i.next=25,e.$shopeemanService.discount(e.country,c,u);case 25:d=i.sent,p=JSON.parse(d),p.status>=200&&p.status<300?(m=JSON.parse(p.data),0===m.code&&(e.sellActiveTable[r].discountId=m.data.discount_id,e.sellActiveTable[r].discount=s,e.sellActiveTable[r].number=n)):403===p.status?e.$message.error("店铺【".concat(e.sellActiveCurrent.mall_alias_name||e.sellActiveCurrent.platform_mall_name,"】的未登录")):e.$message.error("店铺【".concat(e.sellActiveCurrent.mall_alias_name||e.sellActiveCurrent.platform_mall_name,"】的添加活动折扣失败"));case 28:e.setSellActiveVisible=!1;case 29:case"end":return i.stop()}}),i)})))()},setSellActive:function(t){var e=this;t?(this.sellActiveCurrent=Object.assign(JSON.parse(JSON.stringify(t)),{name:"",startTime:"",endTime:""}),this.setSellActiveVisible=!0):(this.sellActiveTable=[],this.mallList.forEach((function(t){var i=e.sellActiveSetting.filter((function(e){return e.platform_mall_id===t.platform_mall_id}))[0];i=i||Object.assign(JSON.parse(JSON.stringify(t)),{isExisting:!0,discountId:"",goodsId:"",discount:"",number:""}),e.sellActiveTable.push(i)})),this.sellActiveVisible=!0)},setWatermark:function(t){t?(this.watermarkConfig=Object.assign(this.watermarkConfig,JSON.parse(JSON.stringify(this.watermarkSetting))),this.watermarkVisible=!0):(this.watermarkSetting=JSON.parse(JSON.stringify(this.watermarkConfig)),this.watermarkVisible=!1)},watermarkPreview1:function(){var t=this;this.uploadImgAdd=!0,this.watermarkPreviewType=1,setTimeout((function(){t.$refs["uploadImg"].$el.click()}),100)},watermarkPreview2:function(){var t=this;this.uploadImgAdd=!0,this.watermarkPreviewType=2,setTimeout((function(){t.$refs["uploadImg"].$el.click()}),100)},watermarkPreview:function(t){var e=this,i=t.raw,a=new FileReader;a.readAsDataURL(i),a.onload=function(){1===e.watermarkPreviewType?e.watermarkConfig.goodsImg=a.result:e.watermarkConfig.watermarkImg=a.result},this.uploadImgAdd=!1},changeLogistics:function(){var t=this,e=this.$shopeeManConfig.getLogisticsList();e=e[this.country]||[],this.logisticsList=[],this.logistics=[],e.forEach((function(e){t.logisticsList.push(e),e.IsSelected&&t.logistics.push(e.ShipId)}))},changeMallList:function(t){this.mallList=t.mallList||[],this.country=t.country},handleSelectionChange:function(t){this.goodsTableSelect=t||[]},deleteGoodsList:function(t){var e=this;t?this.goodsTable=[]:this.goodsTableSelect.length>0?this.goodsTableSelect.forEach((function(t){var i=e.goodsTable.findIndex((function(e){return e.id===t.id}));e.goodsTable.splice(i,1)})):this.$message.error("请选择一个商品")},copy:function(t){Object(p["e"])(t)},keyFilterChange:function(t){t?this.associatedConfig.keyFilter.includes(0)?this.associatedConfig.keyFilter=[0,1,2,3]:this.associatedConfig.keyFilter=[]:this.associatedConfig.keyFilter.includes(0)?this.associatedConfig.keyFilter.splice(0,1):3===this.associatedConfig.keyFilter.length&&(this.associatedConfig.keyFilter=[0,1,2,3])},publishGoodsConfigSave:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,a,s,n,r,o,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.storeConfig.watermarkChecked||!t.watermarkSetting||t.watermarkSetting.type){e.next=3;break}return t.$message.error("配置水印后再操作"),e.abrupt("return");case 3:return i=JSON.stringify(t.storeConfig),a=JSON.stringify(t.basicConfig),s=JSON.stringify(t.associatedConfig),n=JSON.stringify(t.freightList),r=JSON.stringify(t.valuationSetting),o=JSON.stringify(t.watermarkSetting),l={config:{storeConfig:i,basicConfig:a,associatedConfig:s,freightList:n,valuationSetting:r,watermarkSetting:o},country:t.country},e.next=12,t.$api.publishGoodsConfigSave(l);case 12:c=e.sent,u=c.data,200===u.code?t.$message.success("保存配置成功"):t.$message.error("保存配置失败");case 15:case"end":return e.stop()}}),e)})))()},publishGoodsConfigGet:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var i,a,s,n,r,o,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.publishGoodsConfigGet({country:t.country});case 2:i=e.sent,a=i.data,200===a.code&&a.data&&(s=a.data.config,s&&(n=s.basicConfig&&JSON.parse(s.basicConfig),r=s.storeConfig&&JSON.parse(s.storeConfig),o=s.associatedConfig&&JSON.parse(s.associatedConfig),l=s.freightList&&JSON.parse(s.freightList),c=s.valuationSetting&&JSON.parse(s.valuationSetting),u=s.watermarkSetting&&JSON.parse(s.watermarkSetting),t.basicConfig=n||t.basicConfig,t.storeConfig=r||t.storeConfig,t.associatedConfig=o||t.associatedConfig,t.freightList=l||t.freightList,t.valuationSetting=c||t.valuationSetting,t.watermarkSetting=u||t.watermarkSetting));case 5:case"end":return e.stop()}}),e)})))()}}},v=b,C=(i("c4a0"),i("4705"),i("2877")),x=Object(C["a"])(v,a,s,!1,null,"0e97b383",null);e["default"]=x.exports},8992:function(t,e,i){"use strict";i("4c28")},ba09:function(t,e,i){},c4a0:function(t,e,i){"use strict";i("73a3")},feb6:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"storeChooseUL"},[t.isMall?i("li",[t._v(t._s(t._f("chineseSite")(t.countryVal)))]):i("li",{style:t.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),i("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:"",disabled:t.isBanPerform},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?i("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),i("li",{style:t.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),i("el-select",{staticClass:"selectBox",attrs:{disabled:t.isBanPerform,placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupIdList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})})),1)],1),i("li",{style:t.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),i("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{disabled:t.isBanPerform,placeholder:"",multiple:!t.isAShop,"collapse-tags":"","filter-method":t.filterMall,size:"mini",filterable:"",clearable:""},on:{"visible-change":function(e){return t.filterMall("")}},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[t.isAShop?t._e():i("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteShowList,(function(e,a){return t.showMall(e,a)?i("el-option",{key:a,attrs:{label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id}}):t._e()}))],2)],1),t.isReset?i("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[i("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary",disabled:t.isBanPerform},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},s=[],n=i("1da1"),r=i("b85c"),o=i("2909"),l=(i("96cf"),i("d81d"),i("fb6a"),i("caad"),i("2532"),i("d3b7"),i("25f0"),i("99af"),i("6062"),i("3ca3"),i("ddb0"),i("4de4"),i("159b"),i("c740"),i("7db0"),i("7646")),c=i("2b0e");c["default"].directive("loadmore",{bind:function(t,e){var i=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");i.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?e.value(!0,this):this.scrollTop<30&&e.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isBanPerform:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}},isAShop:{type:Boolean,default:function(){return!1}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new l["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(t){this.siteShowList=t},countryVal:{handler:function(t,e){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var i=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var a=e.indexOf("")>-1,s=t.indexOf("")>-1;a!==s?this.groupId=s?Object(o["a"])(this.groupIdList.map((function(t){return t.id}))):[]:s?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){i.isAllowSet2=!0,i.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var i=this;if(this.isAllowSet1){this.isAllowSet1=!1;var a=this.isShowName;if(!this.isAShop){var s=e.includes(""),n=t.includes("");if(s!==n||e.toString()===t.toString()&&this.isShowNameAll)if(n&&(!a||a&&!this.isShowNameAll)){var l=a&&Object(o["a"])(this.siteShowList.map((function(t){return t.platform_mall_id})))||[""].concat(Object(o["a"])(this.siteList.map((function(t){return t.platform_mall_id})))),c=new Set([].concat(Object(o["a"])(l),Object(o["a"])(e)));this.site=Object(o["a"])(c),this.isShowNameAll=!0,a&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(a){var d=a&&Object(o["a"])(this.siteShowList.map((function(t){return t.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,m=d.length>this.site.length&&d||this.site;u=new Set(this.site);var g,f=Object(r["a"])(m);try{for(f.s();!(g=f.n()).done;){var h=g.value;p.includes(h)&&u.delete(h)}}catch(b){f.e(b)}finally{f.f()}u.delete("")}this.site=Object(o["a"])(u)}else n?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1}setTimeout((function(){i.changeMallList(),i.filterMall(a),i.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n,r,o,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.site=[],a=e.countryVal,s=[],!(e.jsonMallData.length>0)){i.next=7;break}s=e.jsonMallData,i.next=12;break;case 7:return i.next=9,e.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:n=i.sent,s=JSON.parse(n)||[],e.jsonMallData=JSON.parse(n)||[];case 12:if(!(s.length>0)){i.next=17;break}1===t&&(e.siteList=""===a?s:s.filter((function(t){return t.country===a}))),2===t&&(0===e.groupId.length?e.siteList=[]:(e.siteList=[],e.groupId.forEach((function(t){s.forEach((function(i){a?t===i.group_id&&a===i.country&&e.siteList.push(i):t===i.group_id&&e.siteList.push(i)}))})))),i.next=22;break;case 17:return r={country:"",mallGroupIds:""},i.next=20,e.mallListAPIInstance.ddMallGoodsGetMallList(r);case 20:o=i.sent,200===o.code?(e.$appConfig.temporaryCacheInfo("save","mallAllData",o.data),l=o.data||[],e.siteList=l,e.jsonMallData=l,e.siteList=""===a?l:l.filter((function(t){return t.country===a}))):e.$message.error("获取分组、店铺列表失败");case 22:0===e.groupIdList.length&&(e.groupIdList=[{group_name:"全部",id:""}],e.groupId=[""],e.siteList.forEach((function(t){var i=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&i<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=!e.isAShop&&[""]||""}),10);case 24:case"end":return i.stop()}}),i)})))()},changeMallList:function(){var t=this,e=[],i="";if(this.isAShop){var a=this.siteList.find((function(e){return e.platform_mall_id===t.site}));i=this.site,e.push(a)}else this.site.forEach((function(a){if(a){var s=t.siteList.find((function(t){return t.platform_mall_id===a}));e.push(s),i+=a+","}}));!this.countryVal&&this.groupId.indexOf("")>-1&&(i=e.length!==this.siteList.length&&i||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:i,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))},filterMall:function(t){var e=this,i=t&&this.isShowName!==t?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){e.isShowName!==t&&(e.mallShowIndex=0),e.isShowName=t||"";var i=e.siteList;t&&(i=e.siteList.filter((function(e){var i=e.mall_alias_name||e.platform_mall_name;return i.includes(t)}))),e.siteShowList=i}),i)},showMall:function(t,e){var i=t.mall_alias_name||t.platform_mall_name,a=this.site[0]===t.platform_mall_id;return a||this.mallShowIndex<=e&&e<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||i.includes(this.isShowName))},loadmoreMall:function(t,e){if(this.siteShowList.length>this.showMallNumber){var i=0;t?(i=this.mallShowIndex+10,i=i<this.siteShowList.length-this.showMallNumber&&i||this.siteShowList.length-this.showMallNumber):(i=this.mallShowIndex-10,i=i>0&&i||0),i!==this.mallShowIndex&&(e.scrollTop=t?e.scrollTop-100:30),this.mallShowIndex=i}}}},d=u,p=(i("8992"),i("2877")),m=Object(p["a"])(d,a,s,!1,null,null,null);e["a"]=m.exports}}]);