(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a646dc"],{"2b29":function(e,t,a){},"5dd5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("仓库名称：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.wid,callback:function(t){e.$set(e.form,"wid",t)},expression:"form.wid"}},e._l(e.widList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.warehouse_name}})})),1)],1),a("li",[a("span",[e._v("订单出库状态：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.statusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.lable,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("出库单创建时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.created_time,callback:function(t){e.$set(e.form,"created_time",t)},expression:"form.created_time"}})],1)]),a("ul",[a("li",[a("span",[e._v("订单编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.oversea_order_sn,callback:function(t){e.$set(e.form,"oversea_order_sn",t)},expression:"form.oversea_order_sn"}})],1),a("li",[a("span",[e._v("平台物流单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.logistic_no,callback:function(t){e.$set(e.form,"logistic_no",t)},expression:"form.logistic_no"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.getOutOfStockList()}}},[e._v("搜 索")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.cancelOverseaOrder(e.multipleSelection,2)}}},[e._v("批量取消订单")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportTableData}},[e._v("导出数据")])],1)])]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],ref:"plTable",attrs:{height:"calc(100vh - 200px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50",fixed:""}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",fixed:""}}),a("el-table-column",{attrs:{prop:"country",label:"站点","min-width":"100",align:"center","show-overflow-tooltip":"",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}])}),a("el-table-column",{attrs:{prop:"oversea_order_sn",label:"订单编号","min-width":"135",align:"center","show-overflow-tooltip":"",fixed:""}}),a("el-table-column",{attrs:{prop:"logistic_no",label:"平台物流单号",align:"center","min-width":"130","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"所属仓库",align:"center","min-width":"100",prop:"warehouse_name"}}),a("el-table-column",{attrs:{prop:"created_at",label:"出库单创建时间",align:"center","min-width":"140"}}),a("el-table-column",{attrs:{prop:"deliver_time",label:"订单出库时间",align:"center","min-width":"140"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.status?e.statusObj[a.status]:"")+" ")]}}])}),a("el-table-column",{attrs:{label:"出库商品详情",align:"center","min-width":"125"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.detailsVisible=!0,e.getDetails(r)}}},[e._v("查看商品详情")])]}}])}),a("el-table-column",{attrs:{prop:"goods_num",label:"出库商品总数",align:"center","min-width":"95"}}),a("el-table-column",{attrs:{prop:"remark",label:"仓库备注",align:"center","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"goods_price",label:"出库商品总价(RMB)",align:"center","min-width":"135"}}),a("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[5!=r.status&&3!=r.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.cancelOverseaOrder(r,1)}}},[e._v("取消订单")]):e._e(),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.setUid(r)}}},[e._v("补 件")])]}}])}),a("el-table-column",{attrs:{label:"操作状态",align:"center","min-width":"140",fixed:"right","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{style:r.color&&"color:"+r.color},[e._v(e._s(r.orderStatus))])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}})],1),a("el-dialog",{staticClass:"details-dialog",attrs:{title:"出库商品详情",visible:e.detailsVisible,width:"1000px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.detailsVisible=t}}},[a("el-table",{attrs:{height:"420",data:e.detailsData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{prop:"order_sn",width:"150",align:"center",label:"订单编号",fixed:""}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"出库商品状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.status?e.skuStatusObj[a.status]:"")+" ")]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"系统商品编号(SysSku)",prop:"sys_sku_id"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品编号(SKU)",prop:"sku_id"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品名称",prop:"goods_name"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"出库数量",prop:"sku_num"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品单价(RMB)",prop:"sku_price"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品规格",prop:"sku_name"}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_url?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(r.sku_url)}}},[e._v("查看商品链接")]):e._e()]}}])})],1)],1),a("el-dialog",{staticClass:"reissue-dialog",attrs:{title:"海外仓补件",visible:e.reissueVisible,width:"1200px","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.reissueClose},on:{"update:visible":function(t){e.reissueVisible=t}}},[a("ul",[a("li",[a("span",[e._v("仓库名称：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.stockForm.wid,callback:function(t){e.$set(e.stockForm,"wid",t)},expression:"stockForm.wid"}},[a("el-option",{attrs:{value:"0",label:"全部"}}),e._l(e.widList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.warehouse_name}})}))],2)],1),a("li",[a("span",[e._v("系统商品编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.stockForm.sys_sku_id,callback:function(t){e.$set(e.stockForm,"sys_sku_id",t)},expression:"stockForm.sys_sku_id"}})],1),a("li",[a("span",[e._v("商品编号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.stockForm.sku_id,callback:function(t){e.$set(e.stockForm,"sku_id",t)},expression:"stockForm.sku_id"}})],1),a("li",[a("span",[e._v("商品规格：")]),a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:e.stockForm.sku_name,callback:function(t){e.$set(e.stockForm,"sku_name",t)},expression:"stockForm.sku_name"}})],1),a("li",[a("el-checkbox",{model:{value:e.filterZero,callback:function(t){e.filterZero=t},expression:"filterZero"}},[e._v("过滤0库存")])],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.getStock()}}},[e._v("搜 索")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchReissue}},[e._v("批量补件")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.reissueLoading,expression:"reissueLoading"}],attrs:{height:"420",data:e.reissueData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}},on:{"selection-change":e.reissueSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50",fixed:""}}),a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{width:"130",align:"center",label:"仓库名称",prop:"warehouse_name",fixed:""}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"系统商品编号",prop:"sys_sku_id"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品编号(SkuId)",prop:"sku_id"}}),a("el-table-column",{attrs:{width:"130",align:"center",label:"商品名称",prop:"goods_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品规格",prop:"sku_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"库存数量",prop:"stock_num"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品单价(RMB)",prop:"sku_price"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sku_price?a.sku_price/100:"")+" ")]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品链接",prop:"sku_url"}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_image||r.real_image_url?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.sku_image||r.real_image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])]),e._v(" > "),a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})]),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.sku_image||r.real_image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])]),e._v(" > "),a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1)]):e._e()]}}])}),a("el-table-column",{attrs:{width:"130",align:"center",label:"货架仓位",prop:"position"}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.stockPage,"page-sizes":[30,50,100],"page-size":e.stockPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.stockTotal},on:{"size-change":e.reissueSizeChange,"current-change":e.reissueCurrentChange}})],1)],1),a("el-dialog",{staticClass:"batchrei-dialog",attrs:{title:"批量补件",visible:e.batchreiVisible,width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!e.batchreiLoading},on:{"update:visible":function(t){e.batchreiVisible=t},close:e.batchreiClose}},[a("div",{staticClass:"wrap"},[a("span",[e._v("补件数量：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.reissueNum,callback:function(t){e.reissueNum=t},expression:"reissueNum"}})],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{loading:e.batchreiLoading,size:"mini",type:"primary"},on:{click:function(t){return e.addReissueStore(e.reissueSelection)}}},[e._v("确 定")])],1)])],1)},s=[],n=a("1da1"),i=(a("a9e3"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("99af"),a("4de4"),a("d81d"),a("b680"),a("96cf"),a("d4ec")),o=a("bee2"),l=function(){function e(t){Object(i["a"])(this,e),this._this=t}return Object(o["a"])(e,[{key:"overseasWh",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("overseasWh",t);case 3:if(a=e.sent,"null"===a){e.next=7;break}return r=JSON.parse(a),e.abrupt("return",{code:200,data:r.warehouse_name});case 7:return e.abrupt("return",{code:200,data:""});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取海外仓库中文名异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelOverseaOrder",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.cancelOverseaOrder(t);case 3:if(a=e.sent,200!==Number(a.data.code)){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:Number(a.data.code),data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"取消订单异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addReissueStore",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.addReissueStore(t);case 3:if(a=e.sent,200!==Number(a.data.code)){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:Number(a.data.code),data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"补件异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStock",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.stock.index",t);case 3:if(a=e.sent,r=JSON.parse(JSON.parse(a).data),200!==r.code){e.next=7;break}return e.abrupt("return",{code:200,data:r.data});case 7:return e.abrupt("return",{code:r.code,data:r.message});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取海外仓补件数据异常".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOutOfStockList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.created_time?"\n      ".concat(this._this.$dayjs(t.created_time[0]).format("YYYY-MM-DD 00:00:00"),"/\n      ").concat(this._this.$dayjs(t.created_time[1]).format("YYYY-MM-DD 23:59:59")):"",r=JSON.parse(JSON.stringify(t)),r.created_time=a,e.next=6,this._this.$api.getOutOfStockList(r);case 6:if(s=e.sent,200!==s.data.code){e.next=9;break}return e.abrupt("return",{code:200,data:s.data.data});case 9:return e.abrupt("return",{code:s.data.code,data:"".concat(s.data.message)});case 12:return e.prev=12,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取数据异常：".concat(e.t0)});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOverseasWarehouse",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("allWh","");case 3:if(t=e.sent,a=this.isJsonString(t),null===a||void 0===a||!a.length){e.next=7;break}return e.abrupt("return",{code:200,data:a});case 7:return e.abrupt("return",{code:201,data:"仓库列表为空"});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取仓库列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"isJsonString",value:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}}}]),e}(),c=a("0e0b"),u={data:function(){return{showConsole:!0,isShowLoading:!1,reissueLoading:!1,detailsVisible:!1,reissueVisible:!1,batchreiVisible:!1,batchreiLoading:!1,BroadDeliveryOrder:new l(this),filterZero:!1,total:0,pageSize:30,page:1,stockTotal:0,stockPageSize:30,stockPage:1,tableData:[],multipleSelection:[],reissueSelection:[],detailsData:[],reissueData:[],reissueNum:"",overseaOrderSn:"",form:{wid:"",oversea_order_sn:"",logistic_no:"",created_time:"",status:""},stockForm:{app_uid:"",wid:"0",sku_id:"",sku_name:"",is_zero_filter:0,sys_sku_id:"",type:"query"},statusObj:{1:"初始化数据(推送出库单)",2:"已构建出库单",3:"海外仓订单出库",4:"海外仓订单申请退件",5:"海外仓订单已交运"},skuStatusObj:{"-1":"未出库",1:"订单初始化",2:"预扣库存",3:"已出库",4:"已签收"},widList:[],statusList:[{value:1,lable:"初始化数据(推送出库单)"},{value:2,lable:"已构建出库单"},{value:3,lable:"海外仓订单出库"},{value:4,lable:"海外仓订单申请退件"},{value:5,lable:"海外仓订单已交运"}]}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.created_time=[(new Date).getTime()-1296e6,new Date],t.next=3,e.getOverseasWarehouse();case 3:return t.next=5,e.getOutOfStockList();case 5:case"end":return t.stop()}}),t)})))()},methods:{cancelOverseaOrder:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,n,i,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=[],1!==t){r.next=5;break}s.push(e),r.next=8;break;case 5:if(null!==e&&void 0!==e&&e.length){r.next=7;break}return r.abrupt("return",a.$message("请选择需要取消订单的商品"));case 7:s=e;case 8:n=0;case 9:if(!(n<s.length)){r.next=22;break}if(i=s[n],5===i.status||3===i.status){r.next=19;break}return o={},o["wid"]=i.wid,o["overseaOrderSn"]=i.oversea_order_sn,r.next=17,a.BroadDeliveryOrder.cancelOverseaOrder(o);case 17:l=r.sent,200===l.code?(a.$set(i,"orderStatus","取消订单成功"),a.$set(i,"color","green")):(a.$set(i,"orderStatus",l.data),a.$set(i,"color","red"));case 19:n++,r.next=9;break;case 22:case"end":return r.stop()}}),r)})))()},batchReissue:function(){var e,t=this;if(null===(e=this.reissueSelection)||void 0===e||!e.length)return this.$message("请选择需要补件的商品");var a=this.reissueSelection.every((function(e){return e.wid===t.reissueSelection[0].wid}));a?this.batchreiVisible=!0:this.$message.error("无法同时补件不同仓库的商品")},addReissueStore:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,n,i,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=[],s={},n=!1,/(^[1-9]\d*$)/.test(Number(t.reissueNum))){a.next=5;break}return a.abrupt("return",t.$message("请输入大于0的正整数"));case 5:for(i=0;i<e.length;i++)o=e[i],Number(o.stock_num)<Number(t.reissueNum)?(t.$refs.Logs.writeLog("商品【".concat(o.goods_name,"】:库存数小于补件数"),!1),n=!0):(l={sku_id:o.sku_id,sys_sku_id:o.sys_sku_id,sku_name:o.sku_name,goods_name:o.goods_name,number:t.reissueNum},r.push(l));if(s["overseaOrderSn"]=t.overseaOrderSn,s["wid"]=e[0].wid,s["skuLists"]=r,null!==r&&void 0!==r&&r.length){a.next=11;break}return a.abrupt("return",t.$message("库存数小于补件数"));case 11:return t.batchreiLoading=!0,a.next=14,t.BroadDeliveryOrder.addReissueStore(s);case 14:c=a.sent,200===c.code?(t.$message.success("补件成功"),t.batchreiVisible=!1):t.$message.error(c.data),n&&(t.showConsole=!1),t.batchreiLoading=!1;case 18:case"end":return a.stop()}}),a)})))()},setUid:function(e){this.overseaOrderSn=e.oversea_order_sn,this.stockForm.app_uid=e.uid,this.reissueVisible=!0,this.getStock()},openUrl:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$BaseUtilService.openUrl(e);case 3:a.next=8;break;case 5:a.prev=5,a.t0=a["catch"](0),t.$message.error("打开链接【".concat(e,"】失败"));case 8:case"end":return a.stop()}}),a,null,[[0,5]])})))()},getStock:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.reissueLoading=!0,e.stockForm.page_num=e.stockPageSize,e.stockForm.page=e.stockPage,e.stockForm.is_zero_filter=e.filterZero?1:0,t.next=6,e.BroadDeliveryOrder.getStock(e.stockForm);case 6:if(a=t.sent,200!==a.code){t.next=22;break}e.stockTotal=a.data.total,e.reissueData=a.data.data,r=0;case 11:if(!(r<e.reissueData.length)){t.next=20;break}return s=e.reissueData[r],t.next=15,e.BroadDeliveryOrder.overseasWh(s.wid);case 15:n=t.sent,200===n.code?e.$set(s,"warehouse_name",n.data):e.$set(s,"warehouse_name","");case 17:r++,t.next=11;break;case 20:t.next=23;break;case 22:e.$message.error(a.data);case 23:e.reissueLoading=!1;case 24:case"end":return t.stop()}}),t)})))()},getOverseasWarehouse:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Map,t.next=3,e.BroadDeliveryOrder.getOverseasWarehouse();case 3:r=t.sent,200===r.code?r.data.forEach((function(t){e.widList=e.widList.concat(t.child)})):e.$message.error(r.data),e.widList=e.widList.filter((function(e){return!a.has(e.id)&&a.set(e.id,1)})),e.form.wid=e.widList[0].id;case 7:case"end":return t.stop()}}),t)})))()},getOutOfStockList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,e.form.page=e.page,e.form.pageSize=e.pageSize,t.next=5,e.BroadDeliveryOrder.getOutOfStockList(e.form);case 5:a=t.sent,200===a.code?(e.tableData=a.data.data,e.tableData.map((function(e){var t=0,a=0;e.sku_list.forEach((function(e){t+=e.sku_num?Number(e.sku_num):0,a+=e.sku_price?parseFloat(e.sku_price).toFixed(2)*e.sku_num:0})),e.goods_num=t,e.goods_price=a})),e.total=a.data.total):e.$message.error(a.data),e.isShowLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},getDetails:function(e){this.detailsData=e.sku_list,this.detailsData.map((function(t){t.order_sn=e.oversea_order_sn}))},exportTableData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.total){t.next=2;break}return t.abrupt("return",e.$message("暂无导出数据"));case 2:e.isShowLoading=!0,a=[],r=[],s=e.form,s.pageSize=200,s.page=1;case 8:if(!(r.length<e.total)){t.next=22;break}return t.next=11,e.BroadDeliveryOrder.getOutOfStockList(s);case 11:if(n=t.sent,200!==n.code){t.next=17;break}r=r.concat(n.data.data),s.page++,t.next=20;break;case 17:return e.$refs.Logs.writeLog("导出数据错误",n.data),e.isShowLoading=!1,t.abrupt("break",22);case 20:t.next=8;break;case 22:r.forEach((function(e){e.sku_list.forEach((function(t){var r={};r["country"]=e.country,r["oversea_order_sn"]=e.oversea_order_sn,r["logistic_no"]=e.logistic_no,r["warehouse_name"]=e.warehouse_name,r["created_at"]=e.created_at,r["deliver_time"]=e.deliver_time,r["status"]=e.status,r["sys_sku_id"]=t.sys_sku_id,r["sku_id"]=t.sku_id,r["goods_name"]=t.goods_name,r["sku_num"]=t.sku_num,r["sku_id"]=t.sku_id,r["goods_name"]=t.goods_name,r["sku_price"]=t.sku_price,r["sku_name"]=t.sku_name,r["sku_image"]=t.sku_image,r["sku_url"]=t.sku_url,a.push(r)}))})),i="<tr>\n          <td>站点</td>\n          <td>订单编号</td>\n          <td>平台物流单号</td>\n          <td>所属仓库</td>\n          <td>出库单创建时间</td>\n          <td>订单出库时间</td>\n          <td>状态</td>\n          <td>系统商品编号</td>\n          <td>商品编号</td>\n          <td>商品名称</td>\n          <td>出库数量</td>\n          <td>商品单价(RMB)</td>\n          <td>商品规格</td>\n          <td>商品图片</td>\n          <td>商品链接</td>\n        </td>",a.forEach((function(t){i+="<tr>\n        <td>".concat(t.country?e.$filters.chineseSite(t.country):"\t","</td>\n        <td>").concat(t.oversea_order_sn?t.oversea_order_sn:"\t","</td>\n        <td style=\"mso-number-format:'@';\">").concat(t.logistic_no?t.logistic_no:"\t","</td>\n        <td>").concat(t.warehouse_name?t.warehouse_name:"\t","</td>\n        <td>").concat(t.created_at?t.created_at:"\t","</td>\n        <td>").concat(t.deliver_time?t.deliver_time:"\t","</td>\n        <td>").concat(e.statusObj[t.status]?e.statusObj[t.status]:"\t","</td>\n        <td>").concat(t.sys_sku_id?t.sys_sku_id:"\t","</td>\n        <td>").concat(t.sku_id?t.sku_id:"\t","</td>\n        <td>").concat(t.goods_name?t.goods_name:"\t","</td>\n        <td>").concat(t.sku_num?t.sku_num:"\t","</td>\n         <td>").concat(t.sku_price?t.sku_price:"\t","</td>\n        <td>").concat(t.sku_name?t.sku_name:"\t","</td>\n        <td>").concat(t.sku_image?t.sku_image:"\t","</td>\n        <td>").concat(t.sku_url?t.sku_url:"\t","</td>\n        </tr>")})),e.isShowLoading=!1,Object(c["i"])("海外仓出库订单数据",i);case 27:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getOutOfStockList()},handleCurrentChange:function(e){this.page=e,this.getOutOfStockList()},handleSelectionChange:function(e){this.multipleSelection=e},reissueSizeChange:function(e){this.stockPage=1,this.stockPageSize=e,this.getStock()},reissueCurrentChange:function(e){this.stockPage=e,this.getStock()},reissueSelectionChange:function(e){this.reissueSelection=e},reissueClose:function(e){e(),this.stockForm.wid="0",this.stockForm.app_uid="",this.stockForm.sku_id="",this.stockForm.sku_name="",this.stockForm.is_zero_filter=0,this.stockForm.sys_sku_id="",this.filterZero=!1,this.overseaOrderSn=""},batchreiClose:function(){this.reissueNum=""}}},d=u,p=(a("e234"),a("2877")),m=Object(p["a"])(d,r,s,!1,null,"24e8c23e",null);t["default"]=m.exports},e234:function(e,t,a){"use strict";a("2b29")}}]);