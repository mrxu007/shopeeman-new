(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5926b1ee"],{"3ba1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("站点：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},e._l(e.siteList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("li",[a("span",[e._v("店铺分组：")]),a("el-select",{attrs:{placeholder:"请选择分组",multiple:"","collapse-tags":"",clearable:"",size:"medium",filterable:""},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},[e.selectall?a("el-option",{attrs:{label:"全部",value:0}}):e._e(),e.selectall?e._e():a("el-option",{attrs:{label:"全部",value:-2}}),e._l(e.gruopList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("店铺：")]),a("el-select",{attrs:{placeholder:"请选择店铺",multiple:"","collapse-tags":"",clearable:"",size:"medium",filterable:""},model:{value:e.mall,callback:function(t){e.mall=t},expression:"mall"}},[e.selectall1?a("el-option",{attrs:{label:"全部",value:0}}):e._e(),e.selectall1?e._e():a("el-option",{attrs:{label:"全部",value:-2}}),e._l(e.mallList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("统计时间：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.Statisticaltime,callback:function(t){e.Statisticaltime=t},expression:"Statisticaltime"}},e._l(e.returnStatisticaltime,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",[e._v("订单类型：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.Status,callback:function(t){e.Status=t},expression:"Status"}},e._l(e.returnStatusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:e.Loading1,size:"mini"},on:{click:e.getallinfo}},[e._v("搜索")])],1)]),a("br"),a("div",{staticStyle:{border:"1px solid black",width:"100%"}},[a("span",{staticStyle:{"margin-left":"20px"}},[e._v("排行数据")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.Loading3,expression:"Loading3"}],ref:"plTable",staticStyle:{"margin-top":"10px"},attrs:{"header-align":"center",height:"calc(100vh - 140px)",data:e.tableData3,"header-cell-style":{backgroundColor:"#f5f7fa"}}},[a("el-table-column",{attrs:{align:"center",label:"店铺名称",width:"140",prop:"mallname"}}),e._e(),e._e(),a("el-table-column",{attrs:{align:"center",prop:"ranktype",label:"排行类型",width:"355"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("div",{domProps:{innerHTML:e._s(l.ranktype)}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"img",label:"商品图片",width:"355"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[l.img?a("el-tooltip",{staticStyle:{width:"40px",height:"40px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:e._f("imageRender")([l.site,l.mallid,l.img]),width:"300px",height:"300px"}})]),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e._f("imageRender")([l.site,l.mallid,l.img])}})],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"goodsname",label:"商品名称",width:"830",align:"center"}})],1)],1)])],1)},i=[],r=a("1da1"),s=(a("96cf"),a("99af"),a("159b"),a("a434"),a("b680"),{data:function(){return{Loading1:!1,Loading3:!1,selectall:!0,selectall1:!0,allgroupid:[],errmall:[],allmallid:[],tableData3:[],Status:"palced",total:0,Statisticaltime:"real_time",site:"TH",siteList:this.$filters.countries_option,group:0,gruopList:[],mall:[],mallList:[],start_time:1634659200,end_time:1634695200,returnStatisticaltime:[{value:"real_time",label:"实时"},{value:"yesterday",label:"昨日"},{value:"past7days",label:"近7天"},{value:"past30days",label:"近30天"}],returnStatusList:[{value:"palced",label:"下单"},{value:"confirmed",label:"确认订单"},{value:"paid",label:"付费订单"}]}},watch:{group:function(e,t){this.mall=[];for(var a=0;a<e.length;a++)if(0===e[a])this.group=this.allgroupid,this.mall=[].concat(this.allmallid),this.selectall=!1;else if(-2===e[a])this.group=[],this.mall=[],this.selectall=!0;else for(var l=0;l<this.mallList.length;l++)e[a]===this.mallList[l].group_id&&this.mall.push(this.mallList[l].value)},mall:function(e,t){for(var a=0;a<e.length;a++)0===e[a]&&(this.mall=this.allmallid,this.selectall1=!1),-2===e[a]&&(this.mall=[],this.selectall1=!0)},Statisticaltime:function(e,t){"real_time"===e?(this.start_time=1634659200,this.end_time=1634695200):"yesterday"===e||"past7days"===e?(this.start_time=1634054400,this.end_time=1634659200):"past30days"===e&&(this.start_time=1632067200,this.end_time=1634659200)},site:function(e,t){this.mall=[],this.group=[],this.getInfo()}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,l,i,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={country:e.site,mallGroupIds:e.group},t.next=3,e.$api.ddMallGoodsGetMallList(a);case 3:if(l=t.sent,e.mallList=[],e.gruopList=[],e.allgroupid=[],e.allmallid=[],200===l.data.code){for(l.data.data.forEach((function(t){t.group_id&&e.gruopList.push({label:t.group_name,value:t.group_id}),t.id&&e.mallList.push({label:t.mall_alias_name?t.mall_alias_name:t.platform_mall_name,value:t.platform_mall_id,group_id:t.group_id})})),i=0;i<e.gruopList.length-1;i++)for(r=i+1;r<e.gruopList.length;r++)e.gruopList[i].value===e.gruopList[r].value&&e.gruopList.splice(r,1);for(s=0;s<e.gruopList.length;s++)e.allgroupid.push(e.gruopList[s].value);for(n=0;n<e.mallList.length;n++)e.allmallid.push(e.mallList[n].value)}else e.$message.warning("店铺列表获取失败！");case 9:case"end":return t.stop()}}),t)})))()},getallinfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,l,i,r,s,n,o,u,m,p,d,c,g,h,f,b,v,_,L,y,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.Loading1=!0,e.Loading3=!0,e.tableData3=[],e.errmall=[],a=0;case 5:if(!(a<e.mall.length)){t.next=24;break}for(l={start_time:e.start_time,end_time:e.end_time,period:e.Statisticaltime,orderType:e.Status,mallId:e.mall[a],fetag:"fetag",limit:5},i=void 0,r=0;r<e.mallList.length;r++)e.mallList[r].value===e.mall[a]&&(i=e.mallList[r].label);return t.next=11,e.$shopeemanService.getCateRank(e.site,l,{headers:{"Content-Type":"application/json; charset=utf-8"}});case 11:return s=t.sent,t.next=14,e.$shopeemanService.getRank(e.site,l,{headers:{"Content-Type":"application/json; charset=utf-8"}});case 14:if(n=t.sent,o=JSON.parse(s),u=JSON.parse(n),o.data=JSON.parse(o.data),u.data=JSON.parse(u.data),0===u.data.code)for(m in u.data.result){if("product_pv"===m&&u.data.result[m])for(p=0;p<u.data.result[m].length;p++)d={},d.site=e.site,d.mallid=e.mall[a],d.mallname=i,d.ranktype="<pre>按商品销量排行</pre><pre>销量 "+u.data.result[m][p].value+"</pre>",d.img=u.data.result[m][p].image,d.goodsname=u.data.result[m][p].item_name,e.tableData3.push(d);if("sales"===m&&u.data.result[m])for(c=0;c<u.data.result[m].length;c++)g={},g.site=e.site,g.mallid=e.mall[a],g.mallname=i,g.ranktype="<pre>按下单数排行</pre><pre>下单数 "+u.data.result[m][c].value+"</pre>",g.img=u.data.result[m][c].image,g.goodsname=u.data.result[m][c].item_name,e.tableData3.push(g);if("orders"===m&&u.data.result[m])for(h=0;h<u.data.result[m].length;h++)f={},f.site=e.site,f.mallid=e.mall[a],f.mallname=i,f.ranktype="<pre>按页面访客量排行</pre><pre>访客量 "+u.data.result[m][h].value+"</pre>",f.img=u.data.result[m][h].image,f.goodsname=u.data.result[m][h].item_name,e.tableData3.push(f);if("uv_to_paid_buyers_rate"===m&&u.data.result[m])for(b=0;b<u.data.result[m].length;b++)v={},v.site=e.site,v.mallid=e.mall[a],v.mallname=i,v.ranktype="<pre>按转换率排行</pre><pre>转换率 "+(100*u.data.result[m][b].value).toFixed(2)+"%</pre>",v.img=u.data.result[m][b].image,v.goodsname=u.data.result[m][b].item_name,e.tableData3.push(v)}else 2===u.data.errcode&&e.errmall.push(i);if(0===o.data.code&&o.data.result)for(_=0;_<o.data.result.length;_++)L={},L.site=e.site,L.mallid=e.mall[a],L.mallname=i,L.ranktype="<pre>按类目销量排行</pre><pre>销售量 "+o.data.result[_].value+"</pre>",L.img="",L.goodsname=o.data.result[_].l1_cat_name+"===>"+o.data.result[_].l2_cat_name,e.tableData3.push(L);else 2===o.data.errcode&&e.errmall.push(i);case 21:a++,t.next=5;break;case 24:for(y=0;y<e.errmall.length-1;y++)for(k=y+1;k<e.errmall.length;k++)e.errmall[y]===e.errmall[k]&&e.errmall.splice(k,1);e.errmall.length>0&&e.$message.error("店铺【".concat(e.errmall,"】未登录")),e.Loading1=!1,e.Loading3=!1;case 28:case"end":return t.stop()}}),t)})))()}}}),n=s,o=(a("817f"),a("2877")),u=Object(o["a"])(n,l,i,!1,null,"772a84fa",null);t["default"]=u.exports},"817f":function(e,t,a){"use strict";a("99e1")},"99e1":function(e,t,a){}}]);