(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a48b642"],{"00f1":function(e,t,a){},"1d0a":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"wrap"},[a("li",[a("span",[e._v("一级类目：")]),a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},on:{change:function(t){e.categroyVal2="",e.categroyVal3="",e.handleChange01()}},model:{value:e.categroyVal1,callback:function(t){e.categroyVal1=t},expression:"categroyVal1"}},e._l(e.categroyList1,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.cat_name,value:e.id}})})),1)],1),a("li",[a("span",[e._v("二级类目：")]),a("el-select",{attrs:{disabled:!e.categroyVal1,placeholder:"请选择",size:"mini"},on:{change:function(t){e.categroyVal3="",e.handleChange02()}},model:{value:e.categroyVal2,callback:function(t){e.categroyVal2=t},expression:"categroyVal2"}},e._l(e.categroyList2,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.cat_name,value:e.id}})})),1)],1),a("li",[a("span",[e._v("三级类目：")]),a("el-select",{attrs:{disabled:!e.categroyVal2,placeholder:"请选择",size:"mini"},on:{change:function(t){return e.handleChange03()}},model:{value:e.categroyVal3,callback:function(t){e.categroyVal3=t},expression:"categroyVal3"}},e._l(e.categroyList3,(function(e,t){return a("el-option",{key:e.id,attrs:{label:e.cat_name,value:e.id}})})),1)],1)])])},i=[],n=a("1da1"),s=(a("96cf"),{name:"ProductChoose",props:{isClean:{type:Boolean,default:!1}},data:function(){return{categroyList1:[],categroyList2:[],categroyList3:[],categroyVal1:"",categroyVal2:"",categroyVal3:"",categroyData:[]}},watch:{},mounted:function(){this.init()},methods:{cleanData:function(){this.categroyVal1="",this.categroyVal2="",this.categroyVal3="",this.$emit("CateId",0)},init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCategoryInfo(0);case 2:e.categroyList1=e.categroyData;case 3:case"end":return t.stop()}}),t)})))()},handleChange01:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCategoryInfo(e.categroyVal1);case 2:e.categroyList2=e.categroyData,e.$emit("CateId",e.categroyVal1);case 4:case"end":return t.stop()}}),t)})))()},handleChange02:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCategoryInfo(e.categroyVal2);case 2:e.categroyList3=e.categroyData,e.$emit("CateId",e.categroyVal2);case 4:case"end":return t.stop()}}),t)})))()},handleChange03:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("CateId",e.categroyVal3);case 1:case"end":return t.stop()}}),t)})))()},getCategoryInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r="",a.prev=1,a.next=4,t.$commodityService.getCategoryInfo(e);case 4:r=a.sent,i=JSON.parse(r),200===i.status_code?t.categroyData=i.data:t.$message.error(i.message),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),t.$message.error("产品中心类目获取失败");case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()}}}),o=s,c=(a("5776"),a("2877")),l=Object(c["a"])(o,r,i,!1,null,"ceff3776",null);t["a"]=l.exports},3880:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("预报时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.created_time,callback:function(t){e.$set(e.form,"created_time",t)},expression:"form.created_time"}})],1),a("li",[a("span",[e._v("签收时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.sign_Time,callback:function(t){e.$set(e.form,"sign_Time",t)},expression:"form.sign_Time"}})],1),a("li",[a("span",[e._v("中转仓：")]),a("el-select",{attrs:{size:"mini",filterable:""},on:{change:function(t){e.form.oversea_wid="",e.widCollect(1)}},model:{value:e.form.wid,callback:function(t){e.$set(e.form,"wid",t)},expression:"form.wid"}},e._l(e.widList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name,value:e.id}})})),1)],1),a("li",[a("span",[e._v("海外仓：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.oversea_wid,callback:function(t){e.$set(e.form,"oversea_wid",t)},expression:"form.oversea_wid"}},e._l(e.overseaWidList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name,value:e.id}})})),1)],1),a("li",[a("span",[e._v("是否审核：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.is_verify,callback:function(t){e.$set(e.form,"is_verify",t)},expression:"form.is_verify"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.isVerifyList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})}))],2)],1)]),a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("入库时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.store_time,callback:function(t){e.$set(e.form,"store_time",t)},expression:"form.store_time"}})],1),a("li",[a("span",[e._v("物流单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.package_code,callback:function(t){e.$set(e.form,"package_code",t)},expression:"form.package_code"}})],1),a("li",[a("span",{staticStyle:{width:"121px","text-align":"right"}},[e._v("海外仓单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.forecast_code,callback:function(t){e.$set(e.form,"forecast_code",t)},expression:"form.forecast_code"}})],1),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.getStockingForecastLists()}}},[e._v("搜 索")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.foreignVisible=!0}}},[e._v("发起预报")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.isDeleteLoading},on:{click:function(t){return e.deleteForecast(e.multipleSelection,2)}}},[e._v("批量删除")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportTableData}},[e._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downTutorial}},[e._v("海外仓商品预报教程下载")])],1)]),a("ul",[a("li",[a("span",{staticStyle:{color:"red"}},[e._v("温馨提示：1、为让仓库方便快捷的查找您备货的商品，请在您寄送的包裹上面贴上系统的商品标签码      2、打印尺寸应不小于宽78mm x 高88mm ")])]),a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downBarCode}},[e._v("下载预报单条形码")])],1),a("li",[a("el-checkbox",{model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}},[e._v("隐藏日志")])],1)])]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],ref:"plTable",attrs:{height:"calc(100vh - 240px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50",fixed:""}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{prop:"package_code",label:"预报物流单号",width:"130",align:"center",fixed:""}}),a("el-table-column",{attrs:{prop:"forecast_code",label:"海外仓单号",width:"150",align:"center"}}),a("el-table-column",{attrs:{width:"150",align:"center","show-overflow-tooltip":"",label:"填报人",prop:"forecaster"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.isForecaster?a("el-input",{directives:[{name:"fo",rawName:"v-fo"}],attrs:{size:"mini"},on:{blur:function(t){return e.updateForecaster(r)}},model:{value:r.forecaster,callback:function(t){e.$set(r,"forecaster",t)},expression:"row.forecaster"}}):a("span",{on:{click:function(t){return e.isShowForecaster(r)}}},[a("el-input",{attrs:{disabled:!r.isForecaster,size:"mini"},model:{value:r.forecaster,callback:function(t){e.$set(r,"forecaster",t)},expression:"row.forecaster"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"warehouse_name",label:"中转仓",align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"oversea_warehouse_name",label:"海外仓",align:"center",width:"130"}}),a("el-table-column",{attrs:{prop:"status",label:"预报单状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.statusObj[a.status]?e.statusObj[a.status]:"已拦截(其他原因)")+" ")]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"预报时间",align:"center",width:"140"}}),a("el-table-column",{attrs:{label:"签收时间",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sign_time)+" ")]}}])}),a("el-table-column",{attrs:{prop:"store_time",label:"中转仓入库时间",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"goods_total",label:"商品总量",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"goods_price_total",label:"商品总价",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.goods_price_total?parseFloat(a.goods_price_total).toFixed(2):"")+" ")]}}])}),a("el-table-column",{attrs:{label:"运输方式",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.shipTypeObj[a.ship_type])+" ")]}}])}),a("el-table-column",{attrs:{prop:"is_verify",label:"审核状态",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{style:e.colorObj[r.is_verify]&&"color:"+e.colorObj[r.is_verify]},[e._v(e._s(r.is_verify?e.isVerifyObj[r.is_verify]:""))])]}}])}),a("el-table-column",{attrs:{prop:"verify_remark",label:"审核备注",align:"center",width:"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"增值服务(贴单/质检)",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s((a.is_wainscot?e.servicebj[a.is_wainscot]:"")+"/"+(a.is_checked?e.servicebj[a.is_checked]:""))+" ")]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center",width:"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"warehouse_remark",label:"仓库备注",align:"center",width:"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"商品详情",align:"center",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.detailsVisible=!0,e.getDetails(r)}}},[e._v("查看商品详情")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"95",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.deleteForecast(r,1)}}},[e._v("删 除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}})],1),a("el-dialog",{staticClass:"details-dialog",attrs:{title:"预报商品详情",visible:e.detailsVisible,width:"1000px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.detailsVisible=t}}},[a("el-table",{attrs:{height:"450",data:e.detailsData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{width:"130",align:"center",label:"预报物流单号",prop:"package_code","show-overflow-tooltip":"",fixed:""}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.status?e.skuStatusObj[a.status]:"")+" ")]}}])}),a("el-table-column",{attrs:{width:"140",align:"center",label:"商品编号(SKU)","show-overflow-tooltip":"",prop:"sku_id"}}),a("el-table-column",{attrs:{width:"130",align:"center",label:"系统商品编码",prop:"sys_sku_id","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"签收时间",prop:"sign_time"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"中转仓入库时间",prop:"store_time"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品名称",prop:"goods_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品数量",prop:"sku_num"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品单价(RMB)",prop:"sku_price"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品规格",prop:"sku_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_url?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(r.sku_url)}}},[e._v("商品链接")]):e._e()]}}])})],1)],1),a("el-dialog",{staticClass:"foreign-dialog",attrs:{title:"预报海外仓备货商品",visible:e.foreignVisible,width:"1200px",top:"8vh","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.foreignClose},on:{"update:visible":function(t){e.foreignVisible=t}}},[a("div",{staticStyle:{display:"flex"}},[a("div",[a("ul",[a("li",[a("span",[e._v("中转仓库：")]),a("el-select",{attrs:{size:"mini",filterable:""},on:{change:function(t){e.foreignOverseaWid="",e.widCollect(2)}},model:{value:e.foreignWid,callback:function(t){e.foreignWid=t},expression:"foreignWid"}},e._l(e.widList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name,value:e.id}})})),1)],1),a("li",[a("span",[e._v("目的仓库：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.foreignOverseaWid,callback:function(t){e.foreignOverseaWid=t},expression:"foreignOverseaWid"}},e._l(e.foreignOverseaWidList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouse_name,value:e.id}})})),1)],1)]),a("ul",[a("li",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.itselfGoodsImport}},[e._v("自有商品导入")]),a("el-upload",{ref:"importRef",staticStyle:{margin:"0 10px"},attrs:{disabled:e.isforeignClose,accept:".xls,.xlsx",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.importTemplate,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{attrs:{disabled:e.isforeignClose,data:e.importTemplateData,size:"mini",type:"primary"}},[e._v(" 批量Excel导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadTemplate}},[e._v("下载预报模板")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isforeignClose},on:{click:e.exportTickData}},[e._v("导出勾选数据")])],1)])]),a("div",{staticClass:"wid-info"},[a("p",[e._v(" "+e._s(""+(e.widInfo.warehouse_name?e.widInfo.warehouse_name:""))+" ")]),a("p",[e._v(" "+e._s("地址："+(e.widInfo.full_address?e.widInfo.full_address:""))+" ")]),a("p",[e._v(" "+e._s("收件人："+(e.widInfo.receiving_name?e.widInfo.receiving_name:""))+" ")]),a("p",[e._v(" "+e._s("联系电话："+(e.widInfo.receiving_tel?e.widInfo.receiving_tel:""))+" ")])])]),a("span",{staticStyle:{color:"red"}},[e._v(" 提示：1：应仓库要求，预报单中需包含商品的体积(长宽高)，需下载最新版的预报模板     2：导入商品会导入到对应的中转仓库和目的仓库，请选择好再导入 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.productLoading,expression:"productLoading"}],attrs:{height:"420",data:e.foreignData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"60px"}},on:{"selection-change":e.foreignSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50",fixed:""}}),a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号",fixed:""}}),a("el-table-column",{attrs:{width:"130",align:"center",label:"预报物流单号",prop:"package_code","show-overflow-tooltip":"",fixed:""}}),a("el-table-column",{attrs:{width:"120",align:"center","show-overflow-tooltip":"",label:"商品编号(SKU)",prop:"sku_id"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sku_list[0].sku_id)+" ")]}}])}),a("el-table-column",{attrs:{width:"100",align:"center","show-overflow-tooltip":"",label:"填报人",prop:"forecaster"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"商品名称","show-overflow-tooltip":"",prop:"goods_name"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sku_list[0].goods_name)+" ")]}}])}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品数量",prop:"sku_num"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sku_list[0].sku_num)+" ")]}}])}),a("el-table-column",{attrs:{width:"110",align:"center",label:"商品单价(RMB)",prop:"sku_price"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sku_list[0].sku_price)+" ")]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品规格",prop:"sku_name","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sku_list[0].sku_name)+" ")]}}])}),a("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_list[0].sku_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.sku_list[0].sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.sku_list[0].sku_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sku_list[0].sku_url?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(r.sku_list[0].sku_url)}}},[e._v("商品链接")]):e._e()]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"运输方式"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.shipTypeObj[a.ship_type]?e.shipTypeObj[a.ship_type]:a.ship_type)+" ")]}}])}),a("el-table-column",{attrs:{width:"150",align:"center",label:"备注",prop:"remark","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"150",label:"操作状态",prop:"status",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"status",staticStyle:{height:"60px","text-align":"left"},style:r.color&&"color:"+r.color},[e._v(" "+e._s(r.status)+" ")])]}}])})],1)],1),a("el-dialog",{staticClass:"itself-goods-dialog",attrs:{title:"导入预报",visible:e.itselfGoodsVisible,width:"1200px",top:"8vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.itselfGoodsVisible=t}}},[a("ul",[a("li",[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("产品中心商品")])]),a("div",{staticStyle:{display:"flex"}},[a("product-choose",{ref:"isClean",on:{CateId:e.CateId}}),a("div",{staticClass:"left-wrap"},[a("ul",{staticStyle:{display:"block"}},[a("li",[a("span",[e._v("商品名称：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.productFrom.ProductName,callback:function(t){e.$set(e.productFrom,"ProductName",t)},expression:"productFrom.ProductName"}})],1),a("li",[a("span",[e._v("商品编码：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.productFrom.ProductId,callback:function(t){e.$set(e.productFrom,"ProductId",t)},expression:"productFrom.ProductId"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.cleanProductFrom()}}},[e._v("清 空")])],1),a("li",[a("span",[e._v("SKU编码：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.productFrom.SkuId,callback:function(t){e.$set(e.productFrom,"SkuId",t)},expression:"productFrom.SkuId"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){e.productPage=1,e.getProductList()}}},[e._v("搜 索")])],1)])])],1),a("el-table",{attrs:{height:"420",data:e.productData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{width:"100",align:"center",label:"商品ID",prop:"product_id"}}),a("el-table-column",{attrs:{width:"160",align:"center",label:"商品名称",prop:"product_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"主图"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.image_url?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.image_url}})],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"商品价格",prop:"price"}}),a("el-table-column",{attrs:{width:"103",align:"center",label:"操作",prop:"remark"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.skuDetailsVisible=!0,e.getProductSkuList(r)}}},[e._v("SKU详情")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.productPage,"page-sizes":[50,100,200],"page-size":e.productPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.productTotal},on:{"size-change":e.productSizeChange,"current-change":e.productCurrentChange}})],1)],1)],1),a("li",[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("预报SKU")])]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"right-wrap"},[a("ul",[a("li",[a("span",[e._v("物流单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.foreignSku.package_code,callback:function(t){e.$set(e.foreignSku,"package_code",t)},expression:"foreignSku.package_code"}})],1),a("li",[a("span",[e._v("商品数量：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.foreignSku.sku_num,callback:function(t){e.$set(e.foreignSku,"sku_num",t)},expression:"foreignSku.sku_num"}})],1),a("li",[a("span",[e._v("运输方式：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.foreignSku.ship_type,callback:function(t){e.$set(e.foreignSku,"ship_type",t)},expression:"foreignSku.ship_type"}},e._l(e.shipTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("ul",[a("li",{staticClass:"goods-volume"},[a("span",[e._v("商品体积：")]),a("el-input",{staticStyle:{padding:"0px"},attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.foreignSku.sku_long,callback:function(t){e.$set(e.foreignSku,"sku_long",t)},expression:"foreignSku.sku_long"}}),e._v("* "),a("el-input",{attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.foreignSku.sku_width,callback:function(t){e.$set(e.foreignSku,"sku_width",t)},expression:"foreignSku.sku_width"}}),e._v("* "),a("el-input",{attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.foreignSku.sku_height,callback:function(t){e.$set(e.foreignSku,"sku_height",t)},expression:"foreignSku.sku_height"}})],1),a("li",[a("span",[e._v("贴单服务：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.foreignSku.is_wainscot,callback:function(t){e.$set(e.foreignSku,"is_wainscot",t)},expression:"foreignSku.is_wainscot"}},e._l(e.serviceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("li",[a("span",{staticStyle:{width:"81px","text-align":"right"}},[e._v("质检服务：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.foreignSku.is_checked,callback:function(t){e.$set(e.foreignSku,"is_checked",t)},expression:"foreignSku.is_checked"}},e._l(e.serviceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("ul",[a("li",[a("span",[e._v("备注信息：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.foreignSku.remark,callback:function(t){e.$set(e.foreignSku,"remark",t)},expression:"foreignSku.remark"}})],1),a("li",[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.batchSetUp}},[e._v("批量设置")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:e.addForecast}},[e._v("添加到预报单")])],1)])])]),a("el-table",{attrs:{height:"420",data:e.goodsForeignData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[a("el-table-column",{attrs:{width:"120",align:"center",label:"SkuID",prop:"sku_id","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"Sku名称",prop:"sku_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"Sku图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.image_url?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"Sku价格",prop:"price"}}),a("el-table-column",{attrs:{width:"450",align:"center",label:"基本设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex"}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.skuList.remark[t.$index],callback:function(a){e.$set(e.skuList.remark,t.$index,a)},expression:"skuList.remark[scope.$index]"}})],1),a("el-form-item",{attrs:{label:"体积:"}},[a("el-input",{staticClass:"volume",attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.skuList.sku_long[t.$index],callback:function(a){e.$set(e.skuList.sku_long,t.$index,a)},expression:"skuList.sku_long[scope.$index]"}}),e._v("* "),a("el-input",{staticClass:"volume",attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.skuList.sku_width[t.$index],callback:function(a){e.$set(e.skuList.sku_width,t.$index,a)},expression:"skuList.sku_width[scope.$index]"}}),e._v("* "),a("el-input",{staticClass:"volume",attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.skuList.sku_height[t.$index],callback:function(a){e.$set(e.skuList.sku_height,t.$index,a)},expression:"skuList.sku_height[scope.$index]"}})],1),a("el-form-item",{attrs:{label:"物流单号:"}},[a("el-input",{attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.skuList.package_code[t.$index],callback:function(a){e.$set(e.skuList.package_code,t.$index,a)},expression:"skuList.package_code[scope.$index]"}})],1)],1),a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"运输方式:"}},[a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.skuList.ship_type[t.$index],callback:function(a){e.$set(e.skuList.ship_type,t.$index,a)},expression:"skuList.ship_type[scope.$index]"}},e._l(e.shipTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"贴单服务:"}},[a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.skuList.is_wainscot[t.$index],callback:function(a){e.$set(e.skuList.is_wainscot,t.$index,a)},expression:"skuList.is_wainscot[scope.$index]"}},e._l(e.serviceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"质检服务:"}},[a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.skuList.is_checked[t.$index],callback:function(a){e.$set(e.skuList.is_checked,t.$index,a)},expression:"skuList.is_checked[scope.$index]"}},e._l(e.serviceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)]}}])}),a("el-table-column",{attrs:{width:"120",align:"center",label:"Sku库存",prop:"stock"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"Sku数量",prop:"ship_type"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.skuList.sku_num[t.$index],callback:function(a){e.$set(e.skuList.sku_num,t.$index,a)},expression:"skuList.sku_num[scope.$index]"}})]}}])}),a("el-table-column",{attrs:{width:"103",align:"center",label:"操作",prop:"remark",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goodsForeignData.splice(t.$index,1)}}},[e._v("移 除")])]}}])})],1)],1)],1)])]),a("el-dialog",{staticClass:"sku-details-dialog",attrs:{title:"选择需要预报的SKU",visible:e.skuDetailsVisible,width:"620px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.skuDetailsVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.productSkuLoading,expression:"productSkuLoading"}],attrs:{height:"420",data:e.skuDetailsData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}},on:{"selection-change":e.skuDetailsSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号"}}),a("el-table-column",{attrs:{width:"120",align:"center",label:"SkuID",prop:"sku_id","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"Sku名称",prop:"sku_name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{width:"80",align:"center",label:"Sku图片"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.image_url?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:r.image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:r.image_url}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{width:"100",align:"center",label:"Sku价格",prop:"price"}}),a("el-table-column",{attrs:{width:"100",align:"center",label:"Sku库存",prop:"stock"}})],1),a("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.confirmSku()}}},[e._v("确 认")])],1)],1)],1)},i=[],n=a("1da1"),s=(a("d81d"),a("159b"),a("a434"),a("c740"),a("99af"),a("a9e3"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("7db0"),a("b0c0"),a("b680"),a("96cf"),a("d4ec")),o=a("bee2"),c=function(){function e(t){Object(s["a"])(this,e),this._this=t}return Object(o["a"])(e,[{key:"updateForecaster",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.updateForecaster(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"修改填报人异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"downloadBarCode",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$BaseUtilService.downloadBarCode(t);case 3:if(a=e.sent,r=this.isJsonString(a),200!==r.code){e.next=7;break}return e.abrupt("return",{code:200});case 7:return e.abrupt("return",{code:r.code,data:"".concat(r.msg)});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"下载条形码异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isJsonString",value:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}}},{key:"getStockingForecastLists",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.created_time?"".concat(this._this.$dayjs(t.created_time[0]).format("YYYY-MM-DD 00:00:00"),"/").concat(this._this.$dayjs(t.created_time[1]).format("YYYY-MM-DD 23:59:59")):"",r=t.sign_Time?"".concat(this._this.$dayjs(t.sign_Time[0]).format("YYYY-MM-DD 00:00:00"),"/").concat(this._this.$dayjs(t.sign_Time[1]).format("YYYY-MM-DD 23:59:59")):"",i=t.store_time?"".concat(this._this.$dayjs(t.store_time[0]).format("YYYY-MM-DD 00:00:00"),"/").concat(this._this.$dayjs(t.store_time[1]).format("YYYY-MM-DD 23:59:59")):"",n={wid:t.wid,oversea_wid:t.oversea_wid,package_code:t.package_code,forecast_code:t.forecast_code,created_time:a,sign_Time:r,store_time:i,is_verify:t.is_verify,page:t.page,pageSize:t.pageSize},e.next=7,this._this.$api.getStockingForecastLists(n);case 7:if(s=e.sent,200!==s.data.code){e.next=10;break}return e.abrupt("return",{code:200,data:s.data.data});case 10:return e.abrupt("return",{code:s.data.code,data:"".concat(s.data.message)});case 13:return e.prev=13,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取数据异常： ".concat(e.t0)});case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteForecast",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={purchase_order_sn:t},e.prev=1,e.next=4,this._this.$api.deleteForecast(a);case 4:if(r=e.sent,200!==r.code){e.next=7;break}return e.abrupt("return",{code:200});case 7:return e.abrupt("return",{code:r.data.code,data:"".concat(r.data.message)});case 10:return e.prev=10,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"删除预报单异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOverseasWarehouse",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("allWh","");case 3:if(t=e.sent,a=this.isJsonString(t),null===a||void 0===a||!a.length){e.next=7;break}return e.abrupt("return",{code:200,data:a});case 7:return e.abrupt("return",{code:201,data:"仓库列表为空"});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取仓库列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"stockingForecastUpload",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$api.stockingForecastUpload(t);case 3:if(a=e.sent,200!==a.data.code){e.next=6;break}return e.abrupt("return",{code:200,data:a.data.data});case 6:return e.abrupt("return",{code:a.data.code,data:"".concat(a.data.message)});case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"发起商品预报异常： ".concat(e.t0)});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getProductList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$commodityService.getProductList(t);case 3:if(a=e.sent,r=JSON.parse(a),200!==r.status_code){e.next=7;break}return e.abrupt("return",{code:200,data:r.data});case 7:return e.abrupt("return",{code:r.status_code,data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取产品中心数据异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getProductSkuList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$commodityService.getProductSkuList(t);case 3:if(a=e.sent,r=JSON.parse(a),200!==r.status_code){e.next=7;break}return e.abrupt("return",{code:200,data:r.data});case 7:return e.abrupt("return",{code:r.status_code,data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取产品中心SKU列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),l=a("0e0b"),u=a("1d0a"),d=a("1146"),p=a.n(d),g={components:{ProductChoose:u["a"]},data:function(){return{detailsVisible:!1,foreignVisible:!1,itselfGoodsVisible:!1,skuDetailsVisible:!1,isShowLoading:!1,isDeleteLoading:!1,productLoading:!1,productSkuLoading:!1,showConsole:!0,isforeignClose:!1,StrockUpForegin:new c(this),total:0,pageSize:30,page:1,productTotal:0,productPageSize:50,productPage:1,tableData:[],detailsData:[],skuDetailsSelection:[],foreignSelection:[],multipleSelection:[],importTemplateData:"",foreignData:[],foreignWid:"",foreignOverseaWid:"",widInfo:{},productData:[],excelForeignData:[],goodsForeignData:[],skuDetailsData:[],skuList:{remark:[],sku_long:[],sku_width:[],sku_height:[],package_code:[],ship_type:[],is_wainscot:[],is_checked:[],sku_num:[]},form:{wid:"",oversea_wid:"",package_code:"",forecast_code:"",created_time:"",sign_Time:"",store_time:"",is_verify:""},foreignSku:{package_code:"",sku_num:"0",ship_type:"1",sku_long:"0",sku_width:"0",sku_height:"0",is_wainscot:"1",is_checked:"1",remark:""},productFrom:{CateId:0,ProductName:"",ProductId:"",SkuId:"",Status:"-1"},statusObj:{1:"用户已下单",2:"预报单已签收"},shipTypeObj:{1:"陆运",2:"海运",3:"空运"},shipTypeNameObj:{"陆运":1,"海运":2,"空运":3},isVerifyObj:{"-1":"未审核",1:"审核成功",2:"审核失败"},colorObj:{1:"green",2:"red"},skuStatusObj:{1:"用户已下单",2:"签收",3:"称重入库",4:"商品sku_id与大包号已绑定",5:"商品sku_id与大包号已合包",6:"打印发票",7:"大包已出库",8:"海外仓已签收",9:"海外仓已入库",10:"海外仓已上架"},isYnObj:{"是":"1","否":"-1"},servicebj:{1:"是","-1":"否"},widList:[],overseaWidList:[],foreignOverseaWidList:[],isVerifyList:[{value:"-1",name:"未审核"},{value:"1",name:"审核成功"},{value:"2",name:"审核失败"}],shipTypeList:[{value:"1",name:"陆运"},{value:"2",name:"海运"},{value:"3",name:"空运"}],serviceList:[{value:"1",name:"是"},{value:"-1",name:"否"}]}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.created_time=[(new Date).getTime()-2592e6,new Date],t.next=3,e.getOverseasWarehouse();case 3:return t.next=5,e.getStockingForecastLists();case 5:case"end":return t.stop()}}),t)})))()},methods:{updateForecaster:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$set(e,"isForecaster",!1),r=JSON.parse(JSON.stringify(e.forecaster)),i={id:e.id,forecaster:r},a.next=5,t.StrockUpForegin.updateForecaster(i);case 5:n=a.sent,200===n.code?(t.$message.success("修改填报人成功"),e.forecaster=r):(e.forecaster=e.forecaster,t.$message.error("".concat(n.data)));case 7:case"end":return a.stop()}}),a)})))()},isShowForecaster:function(e){this.$set(e,"isForecaster",!0)},openUrl:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$BaseUtilService.openUrl(e);case 3:a.next=8;break;case 5:a.prev=5,a.t0=a["catch"](0),t.$message.error("打开链接【".concat(e,"】失败"));case 8:case"end":return a.stop()}}),a,null,[[0,5]])})))()},getStockingForecastLists:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,e.form.page=e.page,e.form.pageSize=e.pageSize,t.next=5,e.StrockUpForegin.getStockingForecastLists(e.form);case 5:a=t.sent,200===a.code?(e.total=a.data.total,e.tableData=a.data.data,e.tableData.map((function(e){var t=0,a=0;e.sku_list.forEach((function(e){t+=e.sku_num?e.sku_num:0,a+=e.sku_price?e.sku_price*e.sku_num:0})),e.goods_total=t,e.goods_price_total=a}))):e.$message.error("".concat(a.data)),e.isShowLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},deleteForecast:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=[],1!==t){r.next=5;break}i.push(e.forecast_code),r.next=9;break;case 5:if(0!==e.length){r.next=7;break}return r.abrupt("return",a.$message("请先选择需要删除的数据"));case 7:a.isDeleteLoading=!0,e.forEach((function(e){i.push(e.forecast_code)}));case 9:a.delForecast(i);case 10:case"end":return r.stop()}}),r)})))()},delForecast:function(e){var t=this;e.forEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.StrockUpForegin.deleteForecast(a);case 2:r=e.sent,200===r.code?(t.$refs.Logs.writeLog("单号【".concat(a,"】:删除成功"),!0),t.tableData.splice(t.tableData.findIndex((function(e){return e.forecast_code===a})),1)):t.$refs.Logs.writeLog("单号【".concat(a,"】:").concat(r.data),!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.showConsole=!1,this.isDeleteLoading=!1},downTutorial:function(){window.open("https://shopeeman.oss-cn-shenzhen.aliyuncs.com/files/shopeemanFiles/appFiles/20211111/20211111141313618cb47981eb1.pdf")},getOverseasWarehouse:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.StrockUpForegin.getOverseasWarehouse();case 2:a=t.sent,200===a.code?(e.widList=a.data,e.init()):e.$message.error("".concat(a.data));case 4:case"end":return t.stop()}}),t)})))()},widCollect:function(e){var t=this,a=[],r={};1===e?(this.widList.map((function(e){e.id===t.form.wid&&(a=e.child)})),this.overseaWidList=a,this.form.oversea_wid=a[0].id):(this.widList.map((function(e){e.id===t.foreignWid&&(a=e.child,r=e)})),this.widInfo=r,this.foreignOverseaWidList=a,this.foreignOverseaWid=a[0].id)},init:function(){this.form.wid=this.widList[0].id,this.form.oversea_wid=this.widList[0].child[0].id,this.overseaWidList=this.widList[0].child,this.foreignWid=this.widList[0].id,this.foreignOverseaWid=this.widList[0].child[0].id,this.foreignOverseaWidList=this.widList[0].child,this.widInfo=this.widList[0]},confirmSku:function(){var e,t=this;if(null===(e=this.skuDetailsSelection)||void 0===e||!e.length)return this.$message("请选择需要预报的SKU");for(var a=0;a<this.skuDetailsSelection.length;a++){for(var r=this.skuDetailsSelection[a],i=0;i<this.goodsForeignData.length;i++){var n=this.goodsForeignData[i];if(r.sku_id===n.sku_id)return void this.$message("SkuID【".concat(r.sku_id,"】已存在，请勿重复添加"))}this.goodsForeignData.push(r)}this.goodsForeignData.map((function(e,a){t.skuList.sku_long[a]="0",t.skuList.sku_width[a]="0",t.skuList.sku_height[a]="0",t.skuList.ship_type[a]="1",t.skuList.is_wainscot[a]="1",t.skuList.is_checked[a]="1",t.skuList.sku_num[a]="1",t.skuList.package_code[a]="",t.skuList.remark[a]=""})),this.skuDetailsVisible=!1},getProductList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.productLoading=!0,e.productFrom.Page=e.productPage,e.productFrom.PageSize=e.productPageSize,e.productFrom.Status=Number(e.productFrom.Status),t.next=6,e.StrockUpForegin.getProductList(e.productFrom);case 6:a=t.sent,200!==a.code&&e.$message.error(a.data),e.productTotal=a.data.total,e.productData=a.data.data,e.productLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},stockingForecastUpload:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isforeignClose=!0,a=JSON.parse(JSON.stringify(e.foreignData)),a.forEach((function(t){var a=e.excelForeignData.findIndex((function(e){return t.package_code===e.package_code}));-1!==a?e.excelForeignData[a].sku_list.push(t.sku_list[0]):e.excelForeignData.push(t)})),r=regeneratorRuntime.mark((function t(a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.excelForeignData[a],r.is_wainscot=e.isYnObj[r.is_wainscot]?e.isYnObj[r.is_wainscot]:r.is_wainscot,r.is_checked=e.isYnObj[r.is_checked]?e.isYnObj[r.is_checked]:r.is_checked,r.ship_type=e.shipTypeNameObj[r.ship_type]?e.shipTypeNameObj[r.ship_type]:r.ship_type,t.next=6,e.StrockUpForegin.stockingForecastUpload(r);case 6:i=t.sent,200===i.code?e.foreignData.map((function(t){t.package_code===r.package_code&&(e.$set(t,"status","预报成功"),e.$set(t,"color","green"))})):e.foreignData.map((function(t){t.package_code===r.package_code&&(e.$set(t,"status",i.data),e.$set(t,"color","red"))}));case 8:case"end":return t.stop()}}),t)})),i=0;case 5:if(!(i<e.excelForeignData.length)){t.next=10;break}return t.delegateYield(r(i),"t0",7);case 7:i++,t.next=5;break;case 10:e.isforeignClose=!1;case 11:case"end":return t.stop()}}),t)})))()},addForecast:function(){var e,t=this;if(null===(e=this.goodsForeignData)||void 0===e||!e.length)return this.$message("请先选择需要预报的SKU");var a=this.goodsForeignData.some((function(e,a){return""===t.skuList.package_code[a]}));if(a)return this.$message("请先【设置】sku的其他信息");this.excelForeignData=[],this.goodsForeignData.map((function(e,a){var r={wid:t.foreignWid,oversea_wid:t.foreignOverseaWid,package_code:t.skuList.package_code[a],is_wainscot:t.skuList.is_wainscot[a],is_checked:t.skuList.is_checked[a],ship_type:t.skuList.ship_type[a],remark:t.skuList.remark[a],sku_list:[{sku_id:e.sku_id,goods_name:e.goods_name,sku_num:t.skuList.sku_num[a],sku_price:e.price,sku_name:e.sku_name,sku_long:t.skuList.sku_long[a],sku_width:t.skuList.sku_width[a],sku_height:t.skuList.sku_height[a],sku_image:e.image_url,sku_url:e.purchase_goods_url}]};t.foreignData.push(r)})),this.stockingForecastUpload(),this.itselfGoodsVisible=!1},batchSetUp:function(){var e=this;return this.foreignSku.package_code?!this.foreignSku.sku_num||Number(this.foreignSku.sku_num)<=0?this.$message("商品数量不能小于或等于0"):!this.foreignSku.sku_long||Number(this.foreignSku.sku_long)<=0?this.$message("商品长度不能小于或等于0"):!this.foreignSku.sku_width||Number(this.foreignSku.sku_width)<=0?this.$message("商品宽度不能小于或等于0"):!this.foreignSku.sku_height||Number(this.foreignSku.sku_height)<=0?this.$message("商品高度不能小于或等于0"):void this.$confirm("是否覆盖已单独设置的选项","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.goodsForeignData.map((function(t,a){e.skuList.sku_long[a]=e.foreignSku.sku_long,e.skuList.sku_width[a]=e.foreignSku.sku_width,e.skuList.sku_height[a]=e.foreignSku.sku_height,e.skuList.ship_type[a]=e.foreignSku.ship_type,e.skuList.is_wainscot[a]=e.foreignSku.is_wainscot,e.skuList.is_checked[a]=e.foreignSku.is_checked,e.skuList.sku_num[a]=e.foreignSku.sku_num,e.skuList.package_code[a]=e.foreignSku.package_code,e.skuList.remark[a]=e.foreignSku.remark,e.$forceUpdate()}));case 1:case"end":return t.stop()}}),t)})))):this.$message("物流单号不能为空")},downBarCode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,s,o,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={BarCodeList:[]},null!==(a=e.multipleSelection)&&void 0!==a&&a.length){t.next=3;break}return t.abrupt("return",e.$message("请选择需要下载的数据"));case 3:e.showConsole=!1,e.$refs.Logs.writeLog("开始批量生成预报单条形码至软件安装目录...",!0),i=0;case 6:if(!(i<e.multipleSelection.length)){t.next=37;break}n=e.multipleSelection[i],r["UniqueCode"]=n.package_code,r["AllFilePath"]="海外仓预报单条形码\\".concat(n.package_code,"\\").concat(n.package_code,"合并面单.PDF"),r["DirectoryName"]="海外仓预报单条形码\\".concat(n.package_code),r["FileWidth"]=220,r["FileHeight"]=250,r["BarCodeList"]=[],s=0;case 15:if(!(s<n.sku_list.length)){t.next=30;break}if(o=n.sku_list[s],o.sys_sku_id){t.next=20;break}return e.$refs.Logs.writeLog("【".concat(n.package_code,"】的商品SkuId【").concat(o.sku_id,"】对应的系统商品ID为空"),!1),t.abrupt("continue",27);case 20:c={BarCodeContent:["物流单号:".concat(n.package_code),"预报单号:".concat(n.forecast_code),"商品SkuId:".concat(o.sku_id),"商品数量:".concat(o.sku_num),"系统SkuId:".concat(o.sys_sku_id),"商品名称:".concat(o.sku_name)]},c["BarCode"]=o.sys_sku_id,c["BarCodeWidth"]=200,c["BarCodeHeight"]=50,c["FontSize"]=11,c["FilePath"]="海外仓预报单条形码\\".concat(n.package_code,"\\").concat(o.sys_sku_id,".PDF"),r["BarCodeList"].push(c);case 27:s++,t.next=15;break;case 30:return t.next=32,e.StrockUpForegin.downloadBarCode(r);case 32:l=t.sent,200===l.code?e.$refs.Logs.writeLog("【".concat(n.package_code,"】条形码生成完成"),!0):e.$refs.Logs.writeLog("【".concat(n.package_code,"】条形码生成失败：").concat(l.data),!1);case 34:i++,t.next=6;break;case 37:e.$refs.Logs.writeLog("批量生成条形码完成",!0);case 38:case"end":return t.stop()}}),t)})))()},getProductSkuList:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.productSkuLoading=!0,a.next=3,t.StrockUpForegin.getProductSkuList(e.product_id);case 3:r=a.sent,200!==r.code&&t.$message.error(r.data),t.skuDetailsData=r.data,t.skuDetailsData.map((function(t){t.goods_name=e.product_name})),t.productSkuLoading=!1;case 8:case"end":return a.stop()}}),a)})))()},itselfGoodsImport:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.productFrom.CateId=0,e.productFrom.ProductName="",e.productFrom.ProductId="",e.productFrom.SkuId="",e.productFrom.Status="-1",e.foreignSku.package_code="",e.foreignSku.sku_num="0",e.foreignSku.ship_type="1",e.foreignSku.sku_long="0",e.foreignSku.sku_width="0",e.foreignSku.sku_height="0",e.foreignSku.is_wainscot="1",e.foreignSku.is_checked="1",e.foreignSku.remark="",e.productData=[],e.goodsForeignData=[],e.itselfGoodsVisible=!0,e.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.isClean.cleanData(),t.next=3,e.getProductList();case 3:case"end":return t.stop()}}),t)}))));case 18:case"end":return t.stop()}}),t)})))()},getDetails:function(e){this.detailsData=e.sku_list,this.detailsData.map((function(t){t.package_code=e.package_code}))},batchImport:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,s,o,c,l,u,d,p,g,f,h,k,m,_,b,v,w,y,x,S,L,$,C,D;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],e.excelForeignData=[],e.foreignData=[],r=e.importTemplateData.length,!(r<=0)){t.next=8;break}return e.$refs.Logs.writeLog("表格数据为空",!1),e.showConsole=!1,t.abrupt("return");case 8:e.$refs.Logs.writeLog("开始读取数据...",!0),i=0;case 10:if(!(i<r)){t.next=88;break}if(n=e.importTemplateData[i],s=n["物流单号(必填：多个SKU可对应同一物流单号)"],o=n["商品编号(sku)(必填：只能填字母或数字)"],c=n["填报人"],l=n["商品名称(必填：中文)"],u=n["商品数量(必填)"],d=n["商品单价(RMB)(必填)"],p=n["商品规格(必填)"],g=n["长(cm)(必填)"],f=n["宽(cm)(必填)"],h=n["高(cm)(必填)"],k=n["商品图片链接(请填写url地址)"],m=n["商品链接(请填写url地址)"],_=n["贴单服务(必填：填入是或否，同一物流单号取第一次填写的)"],b=n["质检服务(必填：填入是或否，同一物流单号取第一次填写的)"],v=n["运输方式(必填：填入陆运或海运，同一物流单号取第一次填写的)"]||n["运输方式(必填：填入陆运、空运或海运，同一物流单号取第一次填写的)"],w=n["备注(同一物流单号只需填写一次，取第一次填写的备注)"],s){t.next=31;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】物流单号为空"),!1),t.abrupt("continue",85);case 31:if(o){t.next=34;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】商品编号(sku)为空"),!1),t.abrupt("continue",85);case 34:if(l){t.next=37;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】商品名称为空"),!1),t.abrupt("continue",85);case 37:if(u){t.next=40;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】商品数量为空"),!1),t.abrupt("continue",85);case 40:if(d){t.next=43;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】商品单价(RMB)为空"),!1),t.abrupt("continue",85);case 43:if(p){t.next=46;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】商品规格为空"),!1),t.abrupt("continue",85);case 46:if(""!==g){t.next=49;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】长(cm)为空"),!1),t.abrupt("continue",85);case 49:if(""!==f){t.next=52;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】宽(cm)为空"),!1),t.abrupt("continue",85);case 52:if(""!==h){t.next=55;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】高(cm)为空"),!1),t.abrupt("continue",85);case 55:if(_){t.next=58;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】贴单服务为空"),!1),t.abrupt("continue",85);case 58:if(b){t.next=61;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】质检服务为空"),!1),t.abrupt("continue",85);case 61:if(v){t.next=64;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】运输方式为空"),!1),t.abrupt("continue",85);case 64:if(v.includes("海运")||v.includes("空运")||v.includes("陆运")){t.next=67;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】运输方式应为陆运、空运或海运"),!1),t.abrupt("continue",85);case 67:if("空运"!==v){t.next=71;break}if(y=function(){var t=e.foreignWid,a=e.widList.find((function(e){return e.id==t})).warehouse_name;if(!a.includes("菲律宾")&&!a.includes("马来"))return e.$refs.Logs.writeLog("【".concat(i+1,"】空运暂时只支持菲律宾和马来西亚站点"),!1),"continue"}(),"continue"!==y){t.next=71;break}return t.abrupt("continue",85);case 71:if(e.isYnObj[_]){t.next=74;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】贴单服务未找到引用值"),!1),t.abrupt("continue",85);case 74:if(e.isYnObj[b]){t.next=77;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】质检服务未找到引用值"),!1),t.abrupt("continue",85);case 77:if(e.shipTypeNameObj[v]){t.next=80;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】运输方式未找到引用值"),!1),t.abrupt("continue",85);case 80:if(!(m&&m.length>255)){t.next=83;break}return e.$refs.Logs.writeLog("【".concat(i+1,"】商品链接过长"),!1),t.abrupt("continue",85);case 83:x={wid:e.foreignWid,oversea_wid:e.foreignOverseaWid,package_code:s,is_wainscot:_,is_checked:b,ship_type:v,remark:w,forecaster:c,sku_list:[{sku_id:o,goods_name:l,sku_num:u,sku_price:d,sku_name:p,sku_long:g,sku_width:f,sku_height:h,sku_image:k,sku_url:m}]},a.push(x);case 85:i++,t.next=10;break;case 88:S=[],L=function(){var t=C[$],a=S.find((function(e){return e.package_code===t.package_code&&e.sku_list[0].sku_id===t.sku_list[0].sku_id}));if(a)return e.$refs.Logs.writeLog("过滤重复物流订单号【".concat(a.package_code,"】,商品编号(SKU)【").concat(a.sku_list[0].sku_id,"】"),!1),"continue";S.push(t),e.foreignData.push(t)},$=0,C=a;case 91:if(!($<C.length)){t.next=98;break}if(D=L(),"continue"!==D){t.next=95;break}return t.abrupt("continue",95);case 95:$++,t.next=91;break;case 98:e.showConsole=!1,e.$refs.Logs.writeLog("读取完毕",!0),e.stockingForecastUpload();case 101:case"end":return t.stop()}}),t)})))()},importTemplate:function(e){var t=this,a={0:e.raw};if(!/\.(xls|xlsx)$/.test(a[0].name.toLowerCase()))return this.$refs.Logs.writeLog("格式错误,请上传xls、xlsx格式的文件",!1),void(this.showConsole=!1);if(a.length<=0)return this.$refs.Logs.writeLog("表格为空",!1),void(this.showConsole=!1);var r=new FileReader;r.onload=function(e){var a=e.target.result,r=p.a.read(a,{type:"binary"}),i=r.SheetNames[0],n=p.a.utils.sheet_to_json(r.Sheets[i]);t.importTemplateData=n,t.batchImport(),n=null,t.$refs.importRef.value=""},r.readAsBinaryString(a[0])},downloadTemplate:function(){var e='<tr>\n      <td style="width: 300px">物流单号<span style="color:red">(必填：多个SKU可对应同一物流单号)</span></td>\n      <td style="width: 280px">商品编号(sku)<span style="color:red">(必填：只能填字母或数字)</span></td>\n      <td style="width: 100px">填报人</td>\n      <td style="width: 180px">商品名称<span style="color:red">(必填：中文)</span></td>\n      <td style="width: 100px">商品数量<span style="color:red">(必填)</span></td>\n      <td style="width: 150px">商品单价(RMB)<span style="color:red">(必填)</span></td>\n      <td style="width: 150px">商品规格<span style="color:red">(必填)</span></td>\n      <td style="width: 100px">长(cm)<span style="color:red">(必填)</span></td>\n      <td style="width: 100px">宽(cm)<span style="color:red">(必填)</span></td>\n      <td style="width: 100px">高(cm)<span style="color:red">(必填)</span></td>\n      <td style="width: 400px">商品图片链接<span style="color:red">(请填写url地址)</span></td>\n      <td style="width: 400px">商品链接<span style="color:red">(请填写url地址)</span></td>\n      <td style="width: 400px">贴单服务<span style="color:red">(必填：填入是或否，同一物流单号取第一次填写的)</span></td>\n      <td style="width: 400px">质检服务<span style="color:red">(必填：填入是或否，同一物流单号取第一次填写的)</span></td>\n      <td style="width: 390px">运输方式<span style="color:red">(必填：填入陆运、空运或海运，同一物流单号取第一次填写的)</span></td>\n      <td style="width: 380px">备注<span style="color:red">(同一物流单号只需填写一次，取第一次填写的备注)</span></td>\n      </tr>\n      <tr>\n        <td>ZT0001</td>\n        <td>TH135648</td>\n        <td>张三</td>\n        <td>波司登极寒系列羽绒服</td>\n        <td>1</td>\n        <td>20</td>\n        <td>红色,L</td>\n        <td>10</td>\n        <td>20</td>\n        <td>30</td>\n        <td>https://img.alicdn.com/imgextra/i4/196993935/O1CN01BO1VFm1ewH8WsD5ms_!!196993935.jpg</td>\n        <td>https://detail.tmall.com/item.htm?id=558418048450</td>\n        <td>是</td>\n        <td>是</td>\n        <td>陆运</td>\n      </tr>\n      ';Object(l["k"])("海外仓备货预报模板",e)},exportTickData:function(){var e,t=this;if(null===(e=this.foreignSelection)||void 0===e||!e.length)return this.$message("请选择需要导出的数据");var a="<tr>\n          <td>预报物流单号</td>\n          <td>商品编号(SKU)</td>\n          <td>商品名称</td>\n          <td>商品数量</td>\n          <td>商品单价(RMB)</td>\n          <td>商品规格</td>\n          <td>商品图片</td>\n          <td>商品链接</td>\n          <td>运输方式</td>\n          <td>备注</td>\n          <td>操作状态</td>\n        </td>";this.foreignSelection.forEach((function(e){a+="<tr>\n        <td>".concat(e.package_code?e.package_code:"\t","</td>\n        <td>").concat(e.sku_list[0].sku_id?e.sku_list[0].sku_id:"\t","</td>\n        <td>").concat(e.sku_list[0].goods_name?e.sku_list[0].goods_name:"\t","</td>\n        <td>").concat(e.sku_list[0].sku_num?e.sku_list[0].sku_num:"\t","</td>\n        <td>").concat(e.sku_list[0].sku_price?e.sku_list[0].sku_price:"\t","</td>\n        <td>").concat(e.sku_list[0].sku_name?e.sku_list[0].sku_name:"\t","</td>\n        <td>").concat(e.sku_list[0].sku_image?e.sku_list[0].sku_image:"\t","</td>\n        <td>").concat(e.sku_list[0].sku_url?e.sku_list[0].sku_url:"\t","</td>\n        <td>").concat(t.shipTypeObj[e.ship_type]?t.shipTypeObj[e.ship_type]:e.ship_type+"\t","</td>\n        <td>").concat(e.remark?e.remark:"\t","</td>\n        <td>").concat(e.status?e.status:"\t","</td>\n        </tr>")})),Object(l["k"])("预报海外仓备货商品数据",a)},exportTableData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.total){t.next=2;break}return t.abrupt("return",e.$message("暂无导出数据"));case 2:e.isShowLoading=!0,a=[],r=[],i=e.form,i.pageSize=200,i.page=1;case 8:if(!(r.length<e.total)){t.next=22;break}return t.next=11,e.StrockUpForegin.getStockingForecastLists(i);case 11:if(n=t.sent,200!==n.code){t.next=17;break}r=r.concat(n.data.data),i.page++,t.next=20;break;case 17:return e.$refs.Logs.writeLog("导出数据错误",n.data),e.isShowLoading=!1,t.abrupt("break",22);case 20:t.next=8;break;case 22:r.forEach((function(e){e.sku_list.forEach((function(t){var r={};r["package_code"]=e.package_code,r["forecast_code"]=e.forecast_code,r["warehouse_name"]=e.warehouse_name,r["oversea_warehouse_name"]=e.oversea_warehouse_name,r["forecaster"]=e.forecaster,r["created_at"]=e.created_at,r["sign_time"]=e.sign_time,r["store_time"]=e.store_time,r["status"]=e.status,r["is_wainscot"]=e.is_wainscot,r["is_checked"]=e.is_checked,r["ship_type"]=e.ship_type,r["is_verify"]=e.is_verify,r["verify_remark"]=e.verify_remark,r["remark"]=e.remark,r["warehouse_remark"]=e.warehouse_remark,r["skuStatus"]=t.status,r["sku_id"]=t.sku_id,r["sys_sku_id"]=t.sys_sku_id,r["goods_name"]=t.goods_name,r["sku_num"]=t.sku_num,r["sku_price"]=t.sku_price,r["sku_name"]=t.sku_name,r["sku_image"]=t.sku_image,r["sku_url"]=t.sku_url,a.push(r)}))})),s="<tr>\n          <td>预报物流单号</td>\n          <td>海外仓单号</td>\n          <td>中转仓库</td>\n          <td>海外仓库</td>\n          <td>填报人</td>\n          <td>预报时间</td>\n          <td>签收时间</td>\n          <td>中转仓入库时间</td>\n          <td>预报单状态</td>\n          <td>增值服务(贴单/质检)</td>\n          <td>运输方式</td>\n          <td>审核状态</td>\n          <td>审核备注</td>\n          <td>备注</td>\n          <td>仓库备注</td>\n          <td>商品状态</td>\n          <td>商品编号(SKU)</td>\n          <td>系统商品编码</td>\n          <td>商品名称</td>\n          <td>商品数量</td>\n          <td>商品单价(RMB)</td>\n          <td>商品规格</td>\n          <td>商品图片</td>\n          <td>商品链接</td>\n        </td>",a.forEach((function(t){s+="<tr>\n        <td>".concat(t.package_code?t.package_code:"\t","</td>\n        <td>").concat(t.forecast_code?t.forecast_code:"\t","</td>\n        <td>").concat(t.warehouse_name?t.warehouse_name:"\t","</td>\n        <td>").concat(t.oversea_warehouse_name?t.oversea_warehouse_name:"\t","</td>\n        <td>").concat(t.forecaster?t.forecaster:"\t","</td>\n        <td>").concat(t.created_at?t.created_at:"\t","</td>\n        <td>").concat(t.sign_time?t.sign_time:"\t","</td>\n        <td>").concat(t.store_time?t.store_time:"\t","</td>\n        <td>").concat(t.status?e.statusObj[t.status]?e.statusObj[t.status]:"已拦截(其他原因)":"\t","</td>\n        <td>").concat(t.is_wainscot&&t.is_checked?e.servicebj[t.is_wainscot]+"/"+e.servicebj[t.is_checked]:"\t","</td>\n        <td>").concat(t.ship_type?e.shipTypeObj[t.ship_type]:"\t","</td>\n        <td>").concat(t.is_verify?e.isVerifyObj[t.is_verify]:"\t","</td>\n        <td>").concat(t.verify_remark?t.verify_remark:"\t","</td>\n        <td>").concat(t.remark?t.remark:"\t","</td>\n        <td>").concat(t.warehouse_remark?t.warehouse_remark:"\t","</td>\n        <td>").concat(t.skuStatus?e.skuStatusObj[t.skuStatus]?e.skuStatusObj[t.skuStatus]:"":"\t","</td>\n        <td>").concat(t.sku_id?t.sku_id:"\t","</td>\n        <td>").concat(t.sys_sku_id?t.sys_sku_id:"\t","</td>\n        <td>").concat(t.goods_name?t.goods_name:"\t","</td>\n        <td>").concat(t.sku_num?t.sku_num:"\t","</td>\n        <td>").concat(t.sku_price?parseFloat(t.sku_price).toFixed(2):"\t","</td>\n        <td>").concat(t.sku_name?t.sku_name:"\t","</td>\n        <td>").concat(t.sku_image?t.sku_image:"\t","</td>\n        <td>").concat(t.sku_url?t.sku_url:"\t","</td>\n        </tr>")})),e.isShowLoading=!1,Object(l["k"])("海外仓预报单数据",s);case 27:case"end":return t.stop()}}),t)})))()},foreignClose:function(e){if(this.isforeignClose)return this.$message("正在发起商品预报,请勿关闭");e(),this.getStockingForecastLists(),this.foreignData=[],this.init()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getStockingForecastLists()},handleCurrentChange:function(e){this.page=e,this.getStockingForecastLists()},productSizeChange:function(e){this.productPage=1,this.productPageSize=e,this.getProductList()},productCurrentChange:function(e){this.productPage=e,this.getProductList()},handleSelectionChange:function(e){this.multipleSelection=e},foreignSelectionChange:function(e){this.foreignSelection=e},skuDetailsSelectionChange:function(e){this.skuDetailsSelection=e},CateId:function(e){this.productFrom.CateId=e},cleanProductFrom:function(){this.productFrom.ProductName="",this.productFrom.ProductId="",this.productFrom.SkuId="",this.$refs.isClean.cleanData()}}},f=g,h=(a("4117"),a("2877")),k=Object(h["a"])(f,r,i,!1,null,"8efe6348",null);t["default"]=k.exports},4117:function(e,t,a){"use strict";a("00f1")},5776:function(e,t,a){"use strict";a("677c")},"677c":function(e,t,a){}}]);