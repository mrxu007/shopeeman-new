(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46bec962"],{"0b64":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("1da1"),r=a("d4ec"),n=a("bee2"),o=(a("96cf"),function(){function e(t){Object(r["a"])(this,e),this._this=t}return Object(n["a"])(e,[{key:"putModelActive",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$shopeemanService.mixChinese(t,"/api/marketing/v3/discount/nominate/",a,{Headers:{"Content-Type":" application/json"}},"put");case 3:if(i=e.sent,r=i&&JSON.parse(i),!r||200!==r.status){e.next=14;break}if(n=JSON.parse(r.data),!n||0!==n.code){e.next=11;break}return e.abrupt("return",{code:200,data:n.data||[]});case 11:return e.abrupt("return",{code:50001,data:n.message||r.statusText||""});case 12:e.next=17;break;case 14:if(403!==r.status){e.next=16;break}return e.abrupt("return",{code:r.status,data:"操作失败，店铺未登录！"});case 16:return e.abrupt("return",{code:r.status,data:"操作失败".concat(r.statusText)});case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"操作异常： ".concat(e.t0)});case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"deleteCollectGoodsInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$commodityService.deleteCollectGoodsInfo(t);case 3:if(a=e.sent,i=this.isJsonString(a),200!==i.code){e.next=7;break}return e.abrupt("return",{code:200});case 7:return e.abrupt("return",{code:201,data:i.msg});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"删除云商品库数据异常 ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dismissInvalidProducts",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={},a["ids"]=[t.id],a["mallId"]=t.platform_mall_id,e.next=6,this._this.$shopeemanService.postChinese(t.country,"/api/v3/product/dismiss_invalid_products?",a);case 6:if(i=e.sent,r=this.isJsonString(i),200!==r.status){e.next=12;break}if(n=this.isJsonString(r.data),0!==n.code){e.next=12;break}return e.abrupt("return",{code:200});case 12:return e.abrupt("return",{code:201,data:r.statusText});case 15:return e.prev=15,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"确认虾皮禁卖异常： ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteAddOnDealSubItemList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a,i){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r={},r["add_on_deal_id"]=a,r["create_type"]=0,r["sub_item_list"]=i,r["mallId"]=t.platform_mall_id,e.next=8,this._this.$shopeemanService.postChinese(t.country,"/api/marketing/v3/add_on_deal/sub_item_list/?",r);case 8:if(n=e.sent,o=this.isJsonString(this.isJsonString(n).data),"success"!==o.message){e.next=12;break}return e.abrupt("return",{code:200});case 12:return e.abrupt("return",{code:201,data:o.message});case 15:return e.prev=15,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"删除加购子商品异常： ".concat(e.t0)});case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t,a,i){return e.apply(this,arguments)}return t}()},{key:"getAdd0nDealAggrSubItemList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},i["add_on_deal_id"]=a,i["mallId"]=t.platform_mall_id,i["promotion_status"]="ongoing",e.prev=4,e.next=7,this._this.$shopeemanService.getChinese(t.country,"/api/marketing/v3/add_on_deal/aggr_sub_item_list/?",i);case 7:if(r=e.sent,n=this.isJsonString(this.isJsonString(r).data),"success"!==n.message){e.next=11;break}return e.abrupt("return",{code:200,data:n.data});case 11:return e.abrupt("return",{code:201,data:n.message});case 14:return e.prev=14,e.t0=e["catch"](4),e.abrupt("return",{code:-2,data:"子商品加购活动列表异常： ".concat(e.t0)});case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"deleteAddOnDealMainItemList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a,i){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r={},r["add_on_deal_id"]=i,r["main_item_list"]=[{item_id:t.id,status:a}],r["mallId"]=t.platform_mall_id,e.next=7,this._this.$shopeemanService.postChinese(t.country,"/api/marketing/v3/add_on_deal/main_item_list/?",r);case 7:if(n=e.sent,o=this.isJsonString(this.isJsonString(n).data),"success"!==o.message){e.next=11;break}return e.abrupt("return",{code:200});case 11:return e.abrupt("return",{code:201,data:o.message});case 14:return e.prev=14,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"删除加购主商品异常： ".concat(e.t0)});case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t,a,i){return e.apply(this,arguments)}return t}()},{key:"getAdd0nDealAggrMainItemList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var i,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},i["add_on_deal_id"]=a,i["mallId"]=t.platform_mall_id,e.prev=3,e.next=6,this._this.$shopeemanService.getChinese(t.country,"/api/marketing/v3/add_on_deal/aggr_main_item_list/?",i);case 6:if(r=e.sent,n=this.isJsonString(r),200!==n.status){e.next=11;break}return o=this.isJsonString(n.data),e.abrupt("return",{code:200,data:o.data});case 11:return e.abrupt("return",{code:201,data:n.statusText});case 14:return e.prev=14,e.t0=e["catch"](3),e.abrupt("return",{code:-2,data:"主商品加购活动列表异常： ".concat(e.t0)});case 17:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getAddOnDealStandardSearch",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a["search_type"]="item_id",a["keyword"]=t.id,a["mallId"]=t.platform_mall_id,a["promotion_status"]="ongoing",e.prev=5,e.next=8,this._this.$shopeemanService.getChinese(t.country,"/api/marketing/v3/add_on_deal/standard_search/?",a);case 8:if(i=e.sent,r=this.isJsonString(i),200!==r.status){e.next=13;break}return n=this.isJsonString(r.data),e.abrupt("return",{code:200,data:n.data});case 13:return e.abrupt("return",{code:201,data:r.statusText});case 16:return e.prev=16,e.t0=e["catch"](5),e.abrupt("return",{code:-2,data:"加购活动异常： ".concat(e.t0)});case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteBundleGoods",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i={},i["bundle_deal_id"]=a,i["items"]=[{item_id:t.id}],i["mallId"]=t.platform_mall_id,e.next=7,this._this.$shopeemanService.deleteChinese(t.country,"/api/marketing/v3/bundle_deal/item/",i,{headers:{"Content-Type":"application/json",referer:"portal/marketing/bundle/".concat(a)}});case 7:if(r=e.sent,n=this.isJsonString(this.isJsonString(r).data),"success"!==n.message){e.next=11;break}return e.abrupt("return",{code:200});case 11:return e.abrupt("return",{code:201,data:n.message});case 14:return e.prev=14,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"删除套装商品异常： ".concat(e.t0)});case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getBundleDeal",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a["keyword"]=t.id,a["search_type"]="item_id",a["mallId"]=t.platform_mall_id,a["promotion_status"]="ongoing",e.prev=5,e.next=8,this._this.$shopeemanService.getChineseReferer(t.country,"/api/marketing/v3/bundle_deal/standard_search/?",a);case 8:if(i=e.sent,r=this.isJsonString(i),200!==r.status){e.next=13;break}return n=this.isJsonString(r.data),e.abrupt("return",{code:200,data:n.data});case 13:return e.abrupt("return",{code:201,data:r.statusText});case 16:return e.prev=16,e.t0=e["catch"](5),e.abrupt("return",{code:-2,data:"套装活动异常： ".concat(e.t0)});case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDiscountCampainDetail",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i={},i["discount_id"]=a,i["itemid_list"]=[t.id],i["mallId"]=t.platform_mall_id,e.next=7,this._this.$shopeemanService.deleteChinese(t.country,"/api/marketing/v3/discount/nominate/abnormal/",i,{headers:{"Content-Type":"application/json",referer:"/portal/marketing/discount/".concat(a,"/")}});case 7:if(r=e.sent,n=this.isJsonString(this.isJsonString(r).data),"success"!==n.message){e.next=11;break}return e.abrupt("return",{code:200});case 11:return e.abrupt("return",{code:201,data:n.message});case 14:return e.prev=14,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"删除折扣商品异常： ".concat(e.t0)});case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getMallDiscountsIdByKeyword",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a["search_type"]="item_id",a["keyword"]=t.id,a["mallId"]=t.platform_mall_id,a["promotion_status"]="ongoing",e.prev=5,e.next=8,this._this.$shopeemanService.getChinese(t.country,"/api/marketing/v3/discount/standard_search/?",a);case 8:if(i=e.sent,r=this.isJsonString(i),200!==r.status){e.next=13;break}return n=this.isJsonString(r.data),e.abrupt("return",{code:200,data:n.data});case 13:return e.abrupt("return",{code:201,data:r.statusText});case 16:return e.prev=16,e.t0=e["catch"](5),e.abrupt("return",{code:-2,data:"折扣活动异常： ".concat(e.t0)});case 19:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCategoryName",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a,i,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$commodityService.getCategoryTbInfo(t,a+"",i,r);case 3:if(n=e.sent,o=this.isJsonString(n),200!==o.code){e.next=7;break}return e.abrupt("return",{code:200,data:o.data});case 7:return e.abrupt("return",{code:201,data:o.msg});case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{code:-2,data:"获取类目名异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t,a,i,r){return e.apply(this,arguments)}return t}()},{key:"searchProductList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,n,o,s,c,l,u,d,p,m,h,g,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.mItem,i=t.pageSize,r=t.searchType,n=t.keyword,o=t.goodsMin,s=t.goodsMax,c=t.soldMin,l=t.soldMax,u=t.listType,d=t.categoryId,p=t.cursor,e.prev=1,m={page_number:a.pageNumber,page_size:i,mallId:a.platform_mall_id,search_type:r,keyword:n,category_id:d,stock_min:o,stock_max:s,sold_min:c,sold_max:l,list_type:u,count_list_types:"sold_out,banned,deboosted,deleted,unlisted",source:"seller_center",cursor:p,version:"4.0.0"},e.next=5,this._this.$shopeemanService.getChinese(a.country,"/api/v3/product/search_product_list/?",m,{headers:{accept:"application/json, text/plain, */*"}});case 5:if(h=e.sent,g=this.isJsonString(h),200!==g.status){e.next=12;break}if(b=this.isJsonString(g.data),"success"!==b.message){e.next=11;break}return e.abrupt("return",{code:200,data:b.data});case 11:return e.abrupt("return",{code:201,data:"数据获取失败：".concat(b.message)});case 12:if(403!==g.status){e.next=14;break}return e.abrupt("return",{code:403,data:"未登录，请登录后再查询"});case 14:if(0!==g.status){e.next=16;break}return e.abrupt("return",{code:0,data:"异常，请检查代理"});case 16:return e.abrupt("return",{code:g.status,data:"".concat(g.statusText)});case 19:return e.prev=19,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"获取数据异常： ".concat(e.t0)});case 22:case"end":return e.stop()}}),e,this,[[1,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMpskuList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,r,n,o,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.mItem,i=t.pageSize,r=t.listType,n=t.listOrderType,e.prev=1,o={page_number:a.pageNumber,page_size:i,mallId:a.platform_mall_id,list_type:r,source:"seller_center",version:"1.0.0"},n&&(o["list_order_type"]=n),e.next=6,this._this.$shopeemanService.getChinese(a.country,"/api/v3/mpsku/get_mpsku_list/?",o,{headers:{accept:"application/json, text/plain, */*"}});case 6:if(s=e.sent,c=this.isJsonString(s),200!==c.status){e.next=13;break}if(l=this.isJsonString(c.data),"success"!==l.message){e.next=12;break}return e.abrupt("return",{code:200,data:l.data});case 12:return e.abrupt("return",{code:201,data:"数据获取失败：".concat(l.message)});case 13:if(403!==c.status){e.next=15;break}return e.abrupt("return",{code:403,data:"未登录，请登录后再查询"});case 15:if(0!==c.status){e.next=17;break}return e.abrupt("return",{code:0,data:"异常，请检查代理"});case 17:return e.abrupt("return",{code:c.status,data:"".concat(c.statusText)});case 20:return e.prev=20,e.t0=e["catch"](1),e.abrupt("return",{code:-2,data:"获取数据异常： ".concat(e.t0)});case 23:case"end":return e.stop()}}),e,this,[[1,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isJsonString",value:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}}}]),e}())},"4c28":function(e,t,a){},"53ca":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}},"6d5c":function(e,t,a){"use strict";a("744d")},"73da":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"container-row"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("storeChoose",{on:{changeMallList:e.changeMallList}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.isFold=!e.isFold}}},[e._v(e._s(e.isFold?"折叠":"展开"))])],1),e.isFold?a("ul",{staticStyle:{"margin-bottom":"5px"}},[a("li",{staticClass:"data"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("商品数据相关")]),a("div",{staticClass:"base-item"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("li",{staticClass:"data-input"},[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"销售量："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.soldMin,callback:function(t){e.soldMin=t},expression:"soldMin"}}),e._v("- "),a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.soldMax,callback:function(t){e.soldMax=t},expression:"soldMax"}})],1),a("el-form-item",{attrs:{label:"访客量："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.viewMin,callback:function(t){e.viewMin=t},expression:"viewMin"}}),e._v("- "),a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.viewMax,callback:function(t){e.viewMax=t},expression:"viewMax"}})],1),a("el-form-item",{attrs:{label:"粉丝量："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.likeMin,callback:function(t){e.likeMin=t},expression:"likeMin"}}),e._v("- "),a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.likeMax,callback:function(t){e.likeMax=t},expression:"likeMax"}})],1),a("el-form-item",{attrs:{label:"价格："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.priceMin,callback:function(t){e.priceMin=t},expression:"priceMin"}}),e._v("- "),a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.priceMax,callback:function(t){e.priceMax=t},expression:"priceMax"}})],1),a("el-form-item",{attrs:{label:"商品数量："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.goodsMin,callback:function(t){e.goodsMin=t},expression:"goodsMin"}}),e._v("- "),a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.goodsMax,callback:function(t){e.goodsMax=t},expression:"goodsMax"}})],1)],1)],1),a("li",[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"是否售空："}},[a("el-select",{attrs:{size:"mini",filterable:"",disabled:e.operationBut},model:{value:e.sellStatus,callback:function(t){e.sellStatus=t},expression:"sellStatus"}},[a("el-option",{attrs:{value:0,label:"全部"}}),e._l(e.sellStatusList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}))],2)],1),a("el-form-item",{attrs:{label:"商品状态："}},[a("el-select",{attrs:{disabled:e.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.changeSelect(t,"goodsStatus")}},model:{value:e.goodsStatus,callback:function(t){e.goodsStatus=t},expression:"goodsStatus"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(t){return e.selectAll("goodsStatus",e.goodsStatusList)}}}),e._l(e.goodsStatusList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}))],2)],1),a("el-form-item",{attrs:{label:"上家来源："}},[a("el-select",{attrs:{disabled:e.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.changeSelect(t,"source")}},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(t){return e.selectAll("source",e.sourceList)}}}),e._l(e.sourceList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}))],2)],1),a("el-form-item",{attrs:{label:"更新时间："}},[a("el-date-picker",{attrs:{"default-time":["00:00:00","23:59:59"],disabled:e.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.modifyTime,callback:function(t){e.modifyTime=t},expression:"modifyTime"}})],1),a("el-form-item",{attrs:{label:"创建时间："}},[a("el-date-picker",{attrs:{"default-time":["00:00:00","23:59:59"],disabled:e.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1)],1)],1)]),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("li",[a("el-checkbox",{staticStyle:{"margin-right":"3px"},attrs:{disabled:e.operationBut},model:{value:e.productNumChecked,callback:function(t){e.productNumChecked=t},expression:"productNumChecked"}},[e._v("单店查询商品数量")]),a("el-input",{staticStyle:{width:"105px"},attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.productNum,callback:function(t){e.productNum=t},expression:"productNum"}})],1),a("li",{staticClass:"data-goods"},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:e.operationBut,size:"mini",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-select",{attrs:{slot:"prepend",disabled:e.operationBut},slot:"prepend",model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.searchTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)]),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{staticStyle:{"margin-right":"3px"},attrs:{disabled:e.operationBut,type:"primary",size:"mini"},on:{click:function(t){e.editCategory=1,e.categoryVisible=!0}}},[e._v("选择类目")]),a("el-input",{staticStyle:{width:"455px"},attrs:{disabled:!0,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}})],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("syncOriginGoodsNum")}}},[e._v("同步上家库存")]),a("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("goodsMove")}}},[e._v("商品搬迁")]),a("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchConfirm")}}},[e._v("批量确认")]),a("el-button",{attrs:{type:"primary",disabled:e.operationBut,size:"mini"},on:{click:function(t){return e.operation("refurbishment")}}},[e._v("商品一键翻新")])],1),a("ul",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){e.queryType=100,e.queryData()}}},[e._v("一键查询100小时以上无流量商品")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){e.queryType=200,e.queryData()}}},[e._v("一键查询200小时以上无流量商品")])],1)])])]),a("li",{staticClass:"operation"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("操作选项")]),a("div",{staticClass:"base-item"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){e.queryType=1,e.queryData()}}},[e._v("查询数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchTitle")}}},[e._v("批量编辑标题")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){e.operation("batchUpDownProduct"),e.upDown=!1}}},[e._v("批量上架")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){e.queryType=1,e.operation("batchDelete")}}},[e._v("批量删除")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchCategory")}}},[e._v("批量修改类目属性")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:e.exportTableData}},[e._v("导出数据")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchDescription")}}},[e._v("批量编辑描述")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){e.operation("batchUpDownProduct"),e.upDown=!0}}},[e._v("批量下架")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:!e.operationBut},on:{click:function(t){e.stop(),e.flag=!0}}},[e._v("取消操作")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:e.queryBanned}},[e._v("一键查询禁卖商品")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}},[e._v("隐藏日志")])],1),a("ul",[a("li",{staticClass:"operation-input"},[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"商品库存："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.productStock,callback:function(t){e.productStock=t},expression:"productStock"}})],1),a("el-form-item",{attrs:{label:"商品价格："}},[a("el-input",{staticClass:"mini-input",attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]-/g,'')"},model:{value:e.productPrice1,callback:function(t){e.productPrice1=t},expression:"productPrice1"}}),e._v(" % + "),a("el-input",{staticClass:"mini-input",attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]-/g,'')"},model:{value:e.productPrice2,callback:function(t){e.productPrice2=t},expression:"productPrice2"}})],1),a("el-form-item",{attrs:{label:"发货天数："}},[a("el-input",{attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.productDay,callback:function(t){e.productDay=t},expression:"productDay"}})],1),a("el-form-item",{attrs:{label:"物流方式："}},[a("el-select",{attrs:{disabled:e.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(t){return e.changeSelect(t,"logistics")}},model:{value:e.logistics,callback:function(t){e.logistics=t},expression:"logistics"}},[a("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(t){return e.selectAll("logistics",e.logisticsList)}}}),e._l(e.logisticsList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.ShipId,label:e.ShipName}})}))],2)],1),a("el-form-item",{attrs:{label:"商品重量："}},[a("el-input",{staticStyle:{width:"102px"},attrs:{disabled:e.operationBut,size:"mini",onkeyup:"value=value.replace(/[^\\d.]/g,'')"},model:{value:e.productWeight,callback:function(t){e.productWeight=t},expression:"productWeight"}}),a("span",{staticClass:"red-span",staticStyle:{"margin-left":"3px"}},[e._v("kg")])],1),a("div",{staticStyle:{"line-height":"31px"}},[a("el-radio",{attrs:{disabled:e.operationBut,label:1},model:{value:e.freightRadio,callback:function(t){e.freightRadio=t},expression:"freightRadio"}},[e._v("免运")]),a("el-radio",{attrs:{disabled:e.operationBut,label:2},model:{value:e.freightRadio,callback:function(t){e.freightRadio=t},expression:"freightRadio"}},[e._v("运费由买家承担")])],1),a("el-form-item",{attrs:{label:"商品尺寸："}},[a("el-input",{staticClass:"mini-input item",attrs:{disabled:e.operationBut,size:"mini",placeholder:"长",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.productLength,callback:function(t){e.productLength=t},expression:"productLength"}}),e._v("* "),a("el-input",{staticClass:"mini-input item",attrs:{disabled:e.operationBut,size:"mini",placeholder:"宽",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.productWidth,callback:function(t){e.productWidth=t},expression:"productWidth"}}),e._v("* "),a("el-input",{staticClass:"mini-input item",attrs:{disabled:e.operationBut,size:"mini",placeholder:"高",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.productHeight,callback:function(t){e.productHeight=t},expression:"productHeight"}})],1)],1)],1),a("li",{staticClass:"operation-but"},[a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchStock")}}},[e._v("批量更新库存")]),a("span",{staticClass:"red-span"},[e._v("（0，表示库存设置为0）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",disabled:e.operationBut,size:"mini"},on:{click:function(t){return e.operation("batchPrice")}}},[e._v("批量更新价格")]),a("span",{staticClass:"red-span"},[e._v("（加价公式：原价+原价*百分比+数值）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",disabled:e.operationBut,size:"mini"},on:{click:function(t){return e.operation("batchDay")}}},[e._v("批量更新天数")]),a("span",{staticClass:"red-span"},[e._v("（最长30天）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[e.isCustomShipFee?a("el-popover",{attrs:{placement:"right",width:"320",trigger:"click"}},[a("div",[e._l(e.logistics,(function(t,i){return a("div",{key:i},e._l(e.logisticsList,(function(i,r){return a("div",{key:r},[i.ShipId===t&&!0===i.IsCustomShipFee?a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("span",{staticStyle:{"line-height":"24px","margin-right":"10px"}},[e._v(e._s(i.ShipName))]),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:i.CustomShipFee,callback:function(t){e.$set(i,"CustomShipFee",t)},expression:"item2.CustomShipFee"}})],1):e._e()])})),0)})),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.operation("batchLogistics")}}},[e._v("确 定")])],1)],2),a("el-button",{attrs:{slot:"reference",disabled:e.operationBut,type:"primary",size:"mini"},slot:"reference"},[e._v("批量更新物流方式")])],1):e._e(),e.isCustomShipFee?e._e():a("el-button",{attrs:{slot:"reference",type:"primary",disabled:e.operationBut,size:"mini"},on:{click:function(t){return e.operation("batchLogistics")}},slot:"reference"},[e._v("批量更新物流方式")]),a("span",{staticClass:"red-span"},[e._v("（请先至商家后台开启对应物流方式）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchWeight")}}},[e._v("批量更新重量")]),a("span",{staticClass:"red-span"},[e._v("（必须大于0kg）")])],1),a("ul",{staticStyle:{"margin-bottom":"3px"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchFreight")}}},[e._v("批量更新运费")]),a("span",{staticClass:"red-span"},[e._v("（只能更改当前商品已开启的物流）")])],1),a("ul",[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.operationBut},on:{click:function(t){return e.operation("batchSize")}}},[e._v("批量修改商品尺寸")])],1)])])])])]),a("li",{staticClass:"progress"},[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("操作进度相关")]),a("div",{staticClass:"base-item"},[a("ul",[a("el-progress",{staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(e.percentage),status:"success"}})],1),a("ul",[a("li",[a("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[a("el-form-item",{attrs:{label:"查询数量："}},[e._v(" "+e._s(e.queryNum)+" ")]),a("el-form-item",{attrs:{label:"更新数量："}},[e._v(" "+e._s(e.updateNum)+" ")]),a("el-form-item",{attrs:{label:"成功数量："}},[e._v(" "+e._s(e.successNum)+" ")]),a("el-form-item",{attrs:{label:"失败数量："}},[e._v(" "+e._s(e.failNum)+" ")])],1)],1)])])])])]):e._e(),e.isFold?a("ul",[a("span",{staticClass:"red-span"},[e._v("说明：库存公式：设置后的库存 = 原库存 +（填写的库存）；如果填写的库存为零将会把商品的库存置为0； 价格公式：设置后的价格 = 原价 +（原价*填写的百分比）+（填写的价格）")])]):e._e()]),a("el-row",{attrs:{id:"article"}},[a("u-table",{ref:"plTable",attrs:{data:e.tableData,"use-virtual":"",height:e.isFold?490:800,"row-height":68,"data-changes-scroll-top":!1,border:!1,"row-key":e.getRowKey,"header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("u-table-column",{attrs:{align:"center",type:"selection",width:"50","reserve-selection":!0}}),a("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"站点"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"200",label:"类目",prop:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.getCategoryName(a.categoryId,a.country))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"店铺名",prop:"mallName","show-overflow-tooltip":""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"主图"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-tooltip",{staticStyle:{width:"50px",height:"50px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:e._f("imageRender")([i.images])}})],1),a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e._f("imageRender")([i.images,!0])}})],1)]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"上家类型",prop:"platformTypeStr"}}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"上家链接"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.productId?a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(i.productId)}}},[a("i",{staticClass:"el-icon-document-copy"})]):e._e(),a("span",{staticClass:"green-span",on:{click:function(t){return e.openUrl(i,2)}}},[e._v(" "+e._s(i.productId)+" ")])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"itemID"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.id?a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(i.id)}}},[a("i",{staticClass:"el-icon-document-copy"})]):e._e(),a("span",{staticClass:"green-span",on:{click:function(t){return e.openUrl(i,1)}}},[e._v(" "+e._s(i.id)+" ")])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"价格",prop:"price",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"80",label:"库存",prop:"stock",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"标题",prop:"name","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"red-span",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.viewDetails(i)}}},[e._v(e._s(i.name))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{style:i.status&&"color:"+e.statusColor[i.status]},[e._v(e._s(e.statusObj[i.status]))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"创建时间",prop:"create_time",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.$dayjs(a.create_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"150",label:"更新时间",prop:"modify_time",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.$dayjs(a.modify_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"销售量",prop:"sold",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"访客量",prop:"view_count",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"100",label:"粉丝量",prop:"like_count",sortable:""}}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"操作状态","show-overflow-tooltip":"",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{style:i.color&&"color:"+i.color},[e._v(e._s(e._f("errorMsg")(i.batchStatus)))])]}}])}),a("u-table-column",{attrs:{align:"center","min-width":"120",label:"更多操作","show-overflow-tooltip":"",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-dropdown",{staticStyle:{width:"80px","margin-left":"10px"},attrs:{trigger:"click",size:"mini"}},[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",plain:"",type:"primary"}},[e._v(" 操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(t){return e.topExtension(i)}}},[e._v("置顶推广")])]),a("el-dropdown-item",[a("div",{staticClass:"dropdownItem",on:{click:function(t){return e.editParent(i)}}},[e._v("修改上家")])])],1)],1)]}}])})],1)],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}})],1),e.categoryVisible?a("el-dialog",{staticClass:"category-dialog",attrs:{modal:!1,title:"类目映射",visible:e.categoryVisible,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.categoryVisible=t}}},[e.categoryVisible?a("categoryMapping",{attrs:{country:e.country,"mall-list":e.selectMallList,"goods-current":{}},on:{categoryChange:e.categoryChange}}):e._e()],1):e._e(),a("el-dialog",{staticClass:"title-dialog",attrs:{title:"批量编辑标题",modal:!1,visible:e.titleVisible,width:"600px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.titleVisible=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"编辑类型："}},[a("div",[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v("新标题直接填入")])]),a("el-radio",{attrs:{label:1},model:{value:e.titleRadio,callback:function(t){e.titleRadio=t},expression:"titleRadio"}},[e._v("新标题")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v("需要新增多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:2},model:{value:e.titleRadio,callback:function(t){e.titleRadio=t},expression:"titleRadio"}},[e._v("新增关键词/标题前")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v("需要新增多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:3},model:{value:e.titleRadio,callback:function(t){e.titleRadio=t},expression:"titleRadio"}},[e._v("新增关键词/标题后")])],1),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v("需要删除多个热搜词/关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:4},model:{value:e.titleRadio,callback:function(t){e.titleRadio=t},expression:"titleRadio"}},[e._v("删除关键词")])],1)],1)]),a("el-form-item",{attrs:{label:"新标题/关键字："}},[a("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:e.titleVal,callback:function(t){e.titleVal=t},expression:"titleVal"}})],1)],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editProduct("setTitle")}}},[e._v("保 存")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.titleVisible=!1}}},[e._v("关 闭")])],1)],1),a("el-dialog",{staticClass:"get-description-dialog",attrs:{title:"获取描述模板",modal:!1,visible:e.getDescriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.getDescriptionVisible=t}}},[a("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"描述："}},[a("div",[a("el-radio",{attrs:{label:1},model:{value:e.descriptionRadio,callback:function(t){e.descriptionRadio=t},expression:"descriptionRadio"}},[e._v("新增关键词/描述前")]),a("el-radio",{attrs:{label:2},model:{value:e.descriptionRadio,callback:function(t){e.descriptionRadio=t},expression:"descriptionRadio"}},[e._v("新增关键词/描述后")]),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("span",[e._v("需要删除多个关键词，请以英文';'间隔!")])]),a("el-radio",{attrs:{label:3},model:{value:e.descriptionRadio,callback:function(t){e.descriptionRadio=t},expression:"descriptionRadio"}},[e._v("删除关键词")])],1),a("el-radio",{attrs:{label:4},model:{value:e.descriptionRadio,callback:function(t){e.descriptionRadio=t},expression:"descriptionRadio"}},[e._v("模板")]),a("el-radio",{attrs:{label:5},model:{value:e.descriptionRadio,callback:function(t){e.descriptionRadio=t},expression:"descriptionRadio"}},[e._v("模板+SKU")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.selectDescription(0)}}},[e._v("选择模板")])],1)]),1===e.descriptionRadio||2===e.descriptionRadio||3===e.descriptionRadio?a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:e.descriptionVal,callback:function(t){e.descriptionVal=t},expression:"descriptionVal"}})],1):e._e()],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editProduct("setDescription")}}},[e._v("确 认")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.getDescriptionVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{staticClass:"description-dialog",attrs:{title:"描述模板",modal:!1,visible:e.descriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.descriptionVisible=t}}},[a("div",[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("标签：")]),a("el-select",{attrs:{size:"mini"},model:{value:e.descriptionConfigId,callback:function(t){e.descriptionConfigId=t},expression:"descriptionConfigId"}},e._l(e.descriptionLabelList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.lable,value:e.id}})})),1)],1),a("li",[a("span",[e._v("新增标签：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:e.descriptionConfig.tag,callback:function(t){e.$set(e.descriptionConfig,"tag",t)},expression:"descriptionConfig.tag"}})],1)]),a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("描述：")]),a("el-input",{staticStyle:{width:"430px"},attrs:{type:"textarea",rows:6,resize:"none",placeholder:"",size:"mini"},model:{value:e.descriptionConfig.text,callback:function(t){e.$set(e.descriptionConfig,"text",t)},expression:"descriptionConfig.text"}})],1)]),a("div",{staticClass:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.selectDescription(1)}}},[e._v("保存")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectDescription(2)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.selectDescription(3)}}},[e._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.selectDescription(4)}}},[e._v("取消")])],1)])]),a("el-dialog",{staticClass:"parent-dialog",attrs:{title:"上家产品修改",modal:!1,visible:e.parentVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.parentVisible=t}}},[a("div",[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("上家产品ID设置")]),a("div",{staticClass:"base-item"},[a("div",[a("span",[e._v("上家类型：")]),a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.parentType,callback:function(t){e.parentType=t},expression:"parentType"}},e._l(e.parentTypeList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("div",[a("span",[e._v("   产品ID：")]),a("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini"},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}}),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.parentLoad1},on:{click:function(t){return e.editpParentSku(1)}}},[e._v("修 改")])],1)])]),a("div",[a("div",{staticClass:"base-box"},[a("span",{staticClass:"base-title"},[e._v("上家产品链接设置")]),a("div",{staticClass:"base-item"},[a("div",[a("span",[e._v("产品链接：")]),a("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini"},model:{value:e.parentUrl,callback:function(t){e.parentUrl=t},expression:"parentUrl"}}),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.parentLoad2},on:{click:function(t){return e.editpParentSku(2)}}},[e._v("修 改")])],1)])])])])]),a("el-dialog",{staticClass:"activity-dialog",attrs:{modal:!1,title:"活动信息",visible:e.activityVisible,width:"505px",top:"30vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.activityVisible=t}}},[a("div",{staticClass:"wrap"},[a("span",[e._v("活动折扣：")]),a("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.discountVal,callback:function(t){e.discountVal=t},expression:"discountVal"}}),e._v("% ")],1),a("div",{staticClass:"wrap tip"},[a("span",[e._v("商品折扣 = 商品原价*折扣%。如原价100元的商品，输入80，最后的折扣价格为80元")])]),a("div",{staticClass:"wrap"},[a("span",[e._v("限购数量：")]),a("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.quotaVal,callback:function(t){e.quotaVal=t},expression:"quotaVal"}})],1),a("div",{staticClass:"wrap but"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveActivityMsg}},[e._v("保 存")])],1)]),e.moveSetVisible?a("el-dialog",{staticClass:"moveSet-dialog",attrs:{modal:!1,title:"商品搬迁设置",visible:e.moveSetVisible,width:"590px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.moveSetVisible=t}}},[a("div",{staticClass:"wrap tip"},[a("span",[e._v("店铺商品设有店铺文字水印的谨慎操作")])]),a("div",{staticClass:"wrap"},[a("span",[e._v("搬迁类型：")]),a("el-radio",{staticStyle:{"margin-right":"77.5px"},attrs:{label:"1"},model:{value:e.moveType,callback:function(t){e.moveType=t},expression:"moveType"}},[e._v("同站点搬迁")]),a("el-radio",{attrs:{label:"2"},model:{value:e.moveType,callback:function(t){e.moveType=t},expression:"moveType"}},[e._v("跨站点搬迁")])],1),"1"===e.moveType?a("div",[a("div",{staticClass:"wrap"},[a("span",[e._v("搬迁模式：")]),a("el-radio",{attrs:{label:"1"},model:{value:e.movePattern,callback:function(t){e.movePattern=t},expression:"movePattern"}},[e._v("全部搬迁至所有店铺")]),a("el-radio",{attrs:{label:"2"},model:{value:e.movePattern,callback:function(t){e.movePattern=t},expression:"movePattern"}},[e._v("随机分配店铺搬迁")])],1),a("div",{staticClass:"wrap"},[a("storeChoose",{attrs:{"span-width":"60px","parent-country":e.country,"is-mall":""},on:{changeMallList:e.changeMoveMallList}})],1),a("div",{staticClass:"wrap but"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.moveSetVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.goodsDetermineMove}},[e._v("确 定")])],1)]):a("div",[a("div",{staticClass:"wrap tip"},[a("span",[e._v("跨站点搬迁将商品原链接跳转至采集页面，无上家类型的跳转shopee商品链接")])]),a("div",{staticClass:"wrap but"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.setLink}},[e._v("跳转至采集")])],1)])]):e._e(),e.moveVisible?a("el-dialog",{staticClass:"move-dialog",attrs:{modal:!1,title:"商品搬迁",visible:e.moveVisible,width:"1280px",top:"7vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.moveVisible=t},close:e.handelClose}},[a("ul",[a("li",[a("span",[e._v("上新间隔：")]),a("el-input",{attrs:{disabled:e.goodsMoveBut,size:"mini"},model:{value:e.moveTime,callback:function(t){e.moveTime=t},expression:"moveTime"}}),e._v("秒 ")],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:e.goodsMoveBut,size:"mini"},on:{click:e.batchSetSize}},[e._v("批量调整重量/体积")]),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.goodsMoveBut},on:{click:e.startGoodsMove}},[e._v("开 始")]),a("el-button",{attrs:{size:"mini",disabled:!e.goodsMoveBut,loading:e.cancelMoveLoad},on:{click:function(t){e.cancelMove=!0,e.cancelMoveLoad=!0}}},[e._v("取 消")])],1),a("li",[a("span",[e._v("商品总数："),a("span",{staticStyle:{color:"#0000ff"}},[e._v(e._s(e.moveTotal))])])]),a("li",[a("span",[e._v("成功总数："),a("span",{staticStyle:{color:"green"}},[e._v(e._s(e.moveSuccess))])])]),a("li",[a("span",[e._v("失败总数："),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.movefail))])])])]),a("el-table",{ref:"moveTable",attrs:{"data-changes-scroll-top":!1,border:!1,data:e.goodsMoveData,height:"550px","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":e.moveSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{align:"center","min-width":"80",label:"站点"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("chineseSite")(a.country))+" ")]}}],null,!1,2790571770)}),a("el-table-column",{attrs:{align:"center","min-width":"120",label:"店铺名",prop:"mallName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"shopee类目",prop:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"red-span",on:{click:function(t){e.categoryVisible=!0,e.editCategory=3,e.moveCategory=i}}},[e._v(e._s(i.categoryName?i.categoryName:e.getCategoryName(i.categoryId,i.country)))])]}}],null,!1,702136225)}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"主图"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-tooltip",{staticStyle:{width:"50px",height:"50px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:e._f("imageRender")([i.images])}})],1),a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e._f("imageRender")([i.images,!0])}})],1)]}}],null,!1,624633267)}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"上家类型",prop:"platformTypeStr"}}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"上家链接"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.productId?a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(i.productId)}}},[a("i",{staticClass:"el-icon-document-copy"})]):e._e(),a("span",{staticClass:"green-span",on:{click:function(t){return e.openUrl(i,2)}}},[e._v(" "+e._s(i.productId)+" ")])]}}],null,!1,64974631)}),a("el-table-column",{attrs:{align:"center","min-width":"120",label:"itemID"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.id?a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(i.id)}}},[a("i",{staticClass:"el-icon-document-copy"})]):e._e(),a("span",{staticClass:"green-span",on:{click:function(t){return e.openUrl(i,1)}}},[e._v(" "+e._s(i.id)+" ")])]}}],null,!1,988702031)}),a("el-table-column",{attrs:{align:"center","min-width":"80",label:"价格",prop:"price",sortable:""}}),a("el-table-column",{attrs:{align:"center","min-width":"80",label:"库存",prop:"stock",sortable:""}}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"标题",prop:"name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{style:i.status&&"color:"+e.statusColor[i.status]},[e._v(e._s(e.statusObj[i.status]))])]}}],null,!1,4189161824)}),a("el-table-column",{attrs:{align:"center","min-width":"100",label:"销售量",prop:"sold"}}),a("el-table-column",{attrs:{align:"center","min-width":"110",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getMoveDetails(i)}}},[e._v("查看详情")])]}}],null,!1,3099083642)}),a("el-table-column",{attrs:{align:"center","min-width":"150",label:"操作状态","show-overflow-tooltip":"",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{style:i.color&&"color:"+i.color},[e._v(e._s(e._f("errorMsg")(i.moveStatus)))])]}}],null,!1,2832947155)})],1)],1):e._e(),a("el-dialog",{attrs:{title:"设置商品重量和体积",width:"300px",top:"25vh","close-on-click-modal":!1,modal:!1,visible:e.goodsSizeVisible},on:{"update:visible":function(t){e.goodsSizeVisible=t}}},[e.goodsSizeVisible?a("goods-size",{on:{goodsSizeChange:e.goodsSizeChange}}):e._e()],1),e.detailsVisible?a("el-dialog",{staticClass:"details-dialog",attrs:{modal:!1,title:"上新状态查看",visible:e.detailsVisible,width:"1280px",top:"7vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.detailsVisible=t}}},[a("el-table",{attrs:{"data-changes-scroll-top":!1,border:!1,data:e.moveDetailsData,height:"590px","header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"上家ID","min-width":"100",prop:"productId"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"red-span",on:{click:function(t){return e.openUrl(i,2)}}},[e._v(" "+e._s(i.productId)+" ")])]}}],null,!1,1170900030)}),a("el-table-column",{attrs:{align:"center",label:"shopeeId","min-width":"100",prop:"shopeeId"}}),a("el-table-column",{attrs:{align:"center",label:"店铺名称","min-width":"150",prop:"mallName"}}),a("el-table-column",{attrs:{align:"center",label:"上新后标题","min-width":"200",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"name",staticStyle:{height:"60px","text-align":"left"}},[e._v(" "+e._s(i.name)+" ")])]}}],null,!1,3467410001)}),a("el-table-column",{attrs:{align:"center",label:"上新状态","min-width":"150",prop:"status","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{style:i.color&&"color:"+i.color},[e._v(e._s(e._f("errorMsg")(i.status)))])]}}],null,!1,1092467426)}),a("el-table-column",{attrs:{align:"center",label:"上新后价格","min-width":"100",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.price?parseInt(a.price).toFixed(2):"")+" ")]}}],null,!1,3513771721)}),a("el-table-column",{attrs:{align:"center",label:"来源","min-width":"100",prop:"source"}})],1)],1):e._e()],1)},r=[],n=a("2909"),o=a("53ca"),s=a("b85c"),c=a("1da1"),l=(a("96cf"),a("4de4"),a("a4d3"),a("e01a"),a("ac1f"),a("1276"),a("a15b"),a("99af"),a("159b"),a("a9e3"),a("caad"),a("2532"),a("c740"),a("3ca3"),a("ddb0"),a("b0c0"),a("fb6a"),a("498a"),a("d3b7"),a("25f0"),a("b680"),a("5b81"),a("d81d"),a("6062"),a("5319"),a("0b64")),u=a("feb6"),d=a("0e0b"),p=a("eb09"),m=a("c12c"),h={components:{StoreChoose:u["a"],categoryMapping:p["a"],goodsSize:m["a"]},data:function(){return{index:1,isFold:!0,showConsole:!0,activityVisible:!1,categoryVisible:!1,titleVisible:!1,sourceVisible:!1,getDescriptionVisible:!1,operationBut:!1,flag:!1,upDown:!0,GoodsList:new l["a"](this),editCategory:null,categoryList:{},categoryNameArr:{},categoryIdList:[],mallHoliday:{},categoryName:"",productNumChecked:!1,productNum:50,freightRadio:2,titleRadio:1,titleVal:"",descriptionRadio:4,descriptionVal:"",descriptionConfig:{description:"",text:"",lable:"",tag:""},descriptionConfigId:"",descriptionConfigText:"",descriptionLabelList:[],descriptionVisible:!1,queryType:"",percentage:0,selectMallList:"",country:"",tableData:[],deleteData:[],deleteId:[],multipleSelection:[],pageSize:48,sellStatus:0,goodsStatus:0,goodsStatusName:"",goodsStatusVal:"",searchType:"id",keyword:"",source:0,queryNum:0,updateNum:0,successNum:0,failNum:0,createTime:[],modifyTime:[],goodsMin:0,goodsMax:99999999,soldMin:0,soldMax:99999999,priceMin:0,priceMax:99999999,viewMin:0,viewMax:99999999,likeMin:0,likeMax:99999999,platformData:{},logistics:0,isCustomShipFee:!1,logisticsFeeList:[],logisticsList:[],productStock:10,productPrice1:-1,productPrice2:0,productWeight:1,productLength:"",productWidth:"",productHeight:"",minDays:0,maxDays:0,productDay:15,preOrderDeliveryDays:2,minLength:0,maxLength:0,parentType:1,parentId:"",parentUrl:"",goodsValue:"",parentLoad1:!1,parentLoad2:!1,parentVisible:!1,discountVal:null,quotaVal:null,discountId:"",isRefurbishProduct:!1,isUseProductChannel:!0,moveVisible:!1,moveSetVisible:!1,moveType:"1",movePattern:"1",selectMoveMallList:"",goodsMoveData:[],moveCategory:{},moveTime:40,moveTotal:0,moveSuccess:0,movefail:0,moveSelection:[],goodsSizeVisible:!1,goodsSize:"",goodsMoveBut:!1,moveDetails:[],moveDetailsData:[],detailsVisible:!1,cancelMove:!1,cancelMoveLoad:!1,isMove:!1,sellStatusList:[{value:1,label:"售空"},{value:2,label:"非售空"}],goodsStatusList:[{value:1,label:"正常"},{value:6,label:"审核中"},{value:3,label:"禁卖下架"},{value:11,label:"已售完"},{value:8,label:"待上架"},{value:4,label:"禁卖shopee官方删除"},{value:100,label:"已压制"}],statusObj:{1:"正常",2:"审核中",6:"审核中",3:"禁卖下架",11:"已售完",8:"待上架",4:"禁卖shopee官方删除",100:"已压制"},statusFilter:{1:"live",8:"unlisted",2:"banned",3:"banned",11:"sold_out",100:"deboosted",4:"deleted"},statusColor:{8:"red"},operationObj:{setTitle:"标题",setDescription:"描述",setStock:"库存",setPrice:"价格",setDay:"发货天数",setWeight:"重量",setSize:"尺寸",setFreight:"运费",setLogistics:"物流方式",setCategory:"类目属性"},parentTypeObj:{1:"拼多多",2:"淘宝",3:"天猫",4:"京东",5:"自有产品",6:"皮皮虾供货平台",7:"货源甲",8:"1688",9:"lazada",10:"京喜",11:"Shopee",12:"速卖通",13:"天猫淘宝海外平台",15:"货老板云仓"},searchTypeList:[{value:"name",label:"商品名称"},{value:"sku",label:"主商品货号"},{value:"msku",label:"商品规格货号"},{value:"id",label:"商品编号"},{value:"originId",label:"上家商品ID"}],sourceList:[{value:"拼多多",label:"拼多多"},{value:"淘宝",label:"淘宝"},{value:"天猫",label:"天猫"},{value:"自有产品",label:"自有产品"},{value:"皮皮虾供货平台",label:"皮皮虾供货平台"},{value:"货老板",label:"货老板"},{value:"1688",label:"1688"},{value:"Lazada",label:"Lazada"},{value:"京喜",label:"京喜"},{value:"Shopee",label:"Shopee"},{value:"速卖通",label:"速卖通"},{value:"天猫淘宝海外平台",label:"天猫淘宝海外平台"}],countryArr:["SG","GL","PH","VN","TW","MY","ID","TH","MX","CO","CL","PL","FR","ES"],parentTypeList:[{value:1,label:"拼多多"},{value:2,label:"淘宝天猫"},{value:8,label:"1688"},{value:9,label:"lazada"}]}},computed:{getCategoryName:function(){return function(e,t){return this.categoryNameArr[e]||(this.categoryNameArr[e]="正在获取类目...",this.setCategoryName(e,t)),this.categoryNameArr[e]||""}}},watch:{country:function(e){this.getLogistics(),this.getDayLength("")},descriptionConfigId:function(e){var t=this.descriptionLabelList.filter((function(t){return t&&t.id===e}))[0];this.descriptionConfig.text=t&&t.description||"",this.descriptionConfig.description=t&&t.description||"",this.descriptionConfig.lable=t&&t.lable||""}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.createTime=[(new Date).getTime()-1296e7,new Date],t.next=3,e.selectAll("goodsStatus",e.goodsStatusList);case 3:return t.next=5,e.selectAll("source",e.sourceList);case 5:case"end":return t.stop()}}),t)})))()},methods:{setCategoryName:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,c,l,u,d,p,m,h,g,b,f,v,_;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=[],n=e.split(","),o=Object(s["a"])(n),i.prev=3,o.s();case 5:if((c=o.n()).done){i.next=35;break}if(l=c.value,u=a.categoryIdList[l],u){i.next=32;break}return i.next=11,a.$appConfig.temporaryCacheInfo("get","category_".concat(l),"");case 11:if(d=i.sent,p=a.isJsonString(d),p&&"{}"!==d){i.next=28;break}return a.$appConfig.temporaryCacheInfo("save","category_".concat(l),{category_name:"",category_cn_name:""}),i.next=17,a.GoodsList.getCategoryName(t,l,"0","");case 17:return g=i.sent,b=g.data.categories&&g.data.categories[0]||"",f=null!==(m=null===b||void 0===b?void 0:b.category_cn_name)&&void 0!==m?m:"未匹配到类目",v=null!==(h=null===b||void 0===b?void 0:b.category_name)&&void 0!==h?h:"未匹配到类目",_={category_name:v,category_cn_name:f},i.next=24,a.$appConfig.temporaryCacheInfo("save","category_".concat(l),_);case 24:a.categoryIdList[l]=_,r.push("".concat(v,"(").concat(f,")")),i.next=30;break;case 28:a.categoryIdList[l]=p||"正在获取类目",r.push("".concat(p["category_name"],"(").concat(p["category_cn_name"],")"));case 30:i.next=33;break;case 32:r.push("".concat(u["category_name"],"(").concat(u["category_cn_name"],")"));case 33:i.next=5;break;case 35:i.next=40;break;case 37:i.prev=37,i.t0=i["catch"](3),o.e(i.t0);case 40:return i.prev=40,o.f(),i.finish(40);case 43:a.categoryNameArr[e]=r.join("->");case 44:case"end":return i.stop()}}),i,null,[[3,37,40,43]])})))()},setLink:function(){var e=[];this.multipleSelection.forEach((function(t){e.push(t.url)})),localStorage.setItem("linkKey",e),this.moveSetVisible=!1,this.$message.success("链接保存成功，请前往商品链接采集页面")},getMoveDetails:function(e){this.detailsVisible=!0,this.moveDetails.length>0&&(this.moveDetailsData=this.moveDetails.filter((function(t){return t.productId===e.productId})))},startGoodsMove:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(Number(e.moveTime)<40)){t.next=2;break}return t.abrupt("return",e.$message("上新间隔时间不得小于40秒"));case 2:return e.goodsMoveBut=!0,e.isRefurbishProduct=!0,e.isMove=!0,e.cancelMove=!1,e.moveDetails=[],e.selectMoveMallList.forEach((function(e){e["isCreateNum"]=0,e["createNum"]=0})),e.moveSuccess=0,e.movefail=0,t.next=12,Object(d["c"])(e.goodsMoveData,e.goodsMoveOperation);case 12:e.goodsMoveBut=!1,e.isRefurbishProduct=!1,e.cancelMoveLoad=!1,e.isMove=!1;case 16:case"end":return t.stop()}}),t)})))()},goodsMoveOperation:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,p,m,h,g,b,f,v,_,y;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.cancelMove){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.moveStatus(e,"".concat(a.cancelMove?"取消搬迁":"正在获取商品详情..."),!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=52;break}if(n=o.data,a.goodsSize&&(n["weight"]=a.goodsSize["weight"],n["dimension"]["width"]=Number(a.goodsSize["width"]),n["dimension"]["height"]=Number(a.goodsSize["height"]),n["dimension"]["length"]=Number(a.goodsSize["long"])),null===e||void 0===e||!e.isCategoryName){i.next=38;break}s=[],a.categoryList.categoryList.forEach((function(e){s.push(e.category_id)})),c=[],l=0;case 18:if(!(l<a.categoryList.attributesList.length)){i.next=36;break}if(u=a.categoryList.attributesList[l],!a.countryArr.includes(e.country)){i.next=30;break}if(!(u.attribute_id<1)){i.next=24;break}return n["brand_id"]=u.options,i.abrupt("continue",33);case 24:p={},p["attribute_id"]=u.attribute_id,p["attribute_value_id"]=u.options,c.push(p),i.next=33;break;case 30:m={custom_value:{}},m["custom_value "]["raw_value"]=u.selected_attribute_value_name,c.push(m);case 33:l++,i.next=18;break;case 36:n["attributes"]=c,n["category_path"]=s;case 38:h=[],"2"===a.movePattern?(g=a.selectMoveMallList.length,b=a.goodsMoveData.findIndex((function(t){return t.id===e.id})),f=b%g,h=[a.selectMoveMallList[f]]):h=a.selectMoveMallList,v=regeneratorRuntime.mark((function t(i){var r,o,s,c,l,u,p,m,g,b,f,v,_,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=h[i],t.prev=1,!a.cancelMove){t.next=4;break}return t.abrupt("return","break");case 4:if(o={},s=r.mall_alias_name||r.platform_mall_name,a.moveStatus(e,"开始上新到".concat(s),!0),r.platform_mall_id!==e.platform_mall_id){t.next=15;break}a.moveStatus(e,"同店铺商品无需再次上新",!1),r["status"]="同店铺商品无需再次上新",r["color"]="red",a.movefail++,++r["isCreateNum"],t.next=72;break;case 15:return t.prev=15,c={},c["product_id"]=n.id,c["mallId"]=r.platform_mall_id,t.next=21,a.$shopeemanService.getLogistics(r.country,c);case 21:if(l=t.sent,200!==l.code){t.next=26;break}return t.next=25,a.getLogisticsInfo(l.data.list,!1,r);case 25:n["logistics_channels"]=t.sent;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t["catch"](15),++r["isCreateNum"],a.moveStatus(e,"商品信息物流异常".concat(t.t0),!1);case 32:return u="天猫淘宝海外平台"===e.platformTypeStr?e.id:"",t.next=35,a.$BaseUtilService.buildGoodCode(e.platform,e.id,e.country,r.platform_mall_id,u);case 35:return n["parent_sku"]=t.sent,p=a.$filters.special_characters,m=p[Math.floor(Math.random()*p.length)],n["name"]=m+" "+n.name,a.getTitleLength(e),n["name"]=n.name.trim().slice(0,a.maxLength),g={mallId:r.platform_mall_id},b=r["createNum"]++,t.next=45,Object(d["A"])((function(){return b===r["isCreateNum"]}),36e5);case 45:return f=a.setCreateData(n),t.next=48,a.$shopeemanService.createProduct(r.country,g,[f]);case 48:if(v=t.sent,200!==v.code){t.next=67;break}return setTimeout((function(){++r["isCreateNum"]}),1e3*Number(a.moveTime)),a.moveStatus(e,"店铺【".concat(s,"】发布成功"),!0),r["status"]="发布成功",r["color"]="green",a.moveSuccess++,_={},_["product_id"]=v.data.product_id,_["shop_id"]=r.platform_mall_id,_["version"]="3.2.0",t.next=61,a.$shopeemanService.searchProductDetail(r.country,_);case 61:y=t.sent,o["name"]=y.data.name,o["shopeeId"]=v.data.product_id,o["price"]=y.data.price,t.next=72;break;case 67:++r["isCreateNum"],a.moveStatus(e,"店铺【".concat(s,"】").concat(v.data),!1),r["status"]="".concat(v.data),r["color"]="red",a.movefail++;case 72:o["productId"]=e.productId,o["mallName"]=s,o["status"]=r.status,o["color"]=r.color,o["source"]=e.platformTypeStr,o["url"]=e.url,a.moveDetails.push(o),t.next=84;break;case 81:t.prev=81,t.t1=t["catch"](1),++r["isCreateNum"];case 84:case"end":return t.stop()}}),t,null,[[1,81],[15,28]])})),_=0;case 42:if(!(_<h.length)){i.next=50;break}return i.delegateYield(v(_),"t0",44);case 44:if(y=i.t0,"break"!==y){i.next=47;break}return i.abrupt("break",50);case 47:_++,i.next=42;break;case 50:i.next=54;break;case 52:a.movefail++,a.moveStatus(e,"".concat(o.data),!1);case 54:i.next=60;break;case 56:i.prev=56,i.t1=i["catch"](4),a.movefail++,a.moveStatus(e,"商品搬迁异常".concat(i.t1),!1);case 60:return i.prev=60,--r.count,i.finish(60);case 63:case"end":return i.stop()}}),i,null,[[4,56,60,63]])})))()},goodsDetermineMove:function(){var e=this;if(!this.selectMoveMallList.length)return this.$message("至少选择一个店铺");this.moveVisible=!0,this.goodsMoveData=JSON.parse(JSON.stringify(this.multipleSelection)),this.moveTotal="2"===this.movePattern?this.goodsMoveData.length:this.goodsMoveData.length*this.selectMoveMallList.length,this.$nextTick((function(){e.goodsMoveData.forEach((function(t){e.$refs.moveTable.toggleRowSelection(t)}))}))},setCreateData:function(e){var t=[];e.model_list.forEach((function(e){var a={};a["stock"]=e.stock,a["sku"]="",a["input_normal_price"]=null,a["input_promotion_price"]=null,Number(e.price_before_discount)>0&&(e.price=e.price_before_discount.toString()),a["price"]=e.price,a["id"]=0,a["name"]="",a["tier_index"]=e.tier_index,a["is_default"]=e.is_default,a["item_price"]="",t.push(a)}));var a={attributes:e.attributes,stock:e.stock,model_list:t,weight:e.weight,dimension:{width:e.dimension.width,height:e.dimension.height,length:e.dimension.length},condition:1,parent_sku:e.parent_sku,dangerous_goods:0,min_purchase_limit:1,input_normal_price:null,input_promotion_price:null,ds_cat_rcmd_id:e.ds_cat_rcmd_id,ds_attr_rcmd_id:e.ds_attr_rcmd_id,id:0,name:e.name,images:e.images,brand_id:0,size_chart:"",tier_variation:e.tier_variation,description:e.description,category_path:e.category_path,category_recommend:e.category_recommend,price_before_discount:"",price:e.price,wholesale_list:e.wholesale_list,installment_tenures:e.installment_tenures,pre_order:e.pre_order,days_to_ship:e.days_to_ship,logistics_channels:e.logistics_channels,unlisted:!1,add_on_deal:e.add_on_deal};return a},batchSetSize:function(){if(!this.moveSelection.length)return this.$message("请选择数据后操作");this.goodsSizeVisible=!0},goodsSizeChange:function(e){e&&(this.goodsSize=e),this.goodsSizeVisible=!1},goodsMove:function(){this.moveSetVisible=!0,this.moveType="1",this.movePattern="1"},saveActivityMsg:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.discountVal&&!(Number(e.discountVal)>100)){t.next=2;break}return t.abrupt("return",e.$message("请输 0 - 100 之间的值"));case 2:if(e.quotaVal){t.next=4;break}return t.abrupt("return",e.$message("请输入限购数量"));case 4:return e.initData(),e.activityVisible=!1,e.isRefurbishProduct=!0,e.isMove=!1,e.updateNum=e.multipleSelection.length,e.deleteId=[],t.next=12,Object(d["c"])(e.multipleSelection,e.startRefurbishment,1);case 12:return t.next=14,e.deleteCollectGoodsInfo();case 14:e.operationBut=!1,e.isRefurbishProduct=!1;case 16:case"end":return t.stop()}}),t)})))()},startRefurbishment:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,p,m,h;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return a.batchStatus(e,"正在获取商品详情...",!0),i.prev=5,n={},i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=42;break}return n=o.data,i.next=14,a.deleteProduct(e);case 14:if(s=i.sent,c=s.batchStatus,l=s.code,-2!==l){i.next=20;break}return a.failNum++,i.abrupt("return",a.batchStatus(e,"".concat(c),!1));case 20:return a.batchStatus(e,"".concat(c),!0),u={mallId:e.platform_mall_id},a.getTitleLength(e),n["name"]=n.name.trim().slice(0,a.maxLength),p=a.setCreateData(n),i.next=27,Object(d["i"])(4e4);case 27:return i.next=29,a.$shopeemanService.createProduct(e.country,u,[p]);case 29:if(m=i.sent,200!==m.code){i.next=38;break}if(a.batchStatus(e,"发布成功",!0),a.successNum++,!e.campaignTypeList.Name.includes(1)){i.next=36;break}return i.next=36,a.putModelActive(e,m.data.product_id);case 36:i.next=40;break;case 38:a.batchStatus(e,"发布失败:".concat(m.data),!1),a.failNum++;case 40:i.next=44;break;case 42:a.batchStatus(e,o.data,!1),a.failNum++;case 44:i.next=50;break;case 46:i.prev=46,i.t0=i["catch"](5),a.failNum++,a.batchStatus(e,"翻新异常".concat(i.t0),!1);case 50:return i.prev=50,--r.count,h=100/a.multipleSelection.length,a.percentage+=h,i.finish(50);case 55:case"end":return i.stop()}}),i,null,[[5,46,50,55]])})))()},putModelActive:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,r={},r["product_id"]=t,r["version"]="3.2.0",r["shop_id"]=e.platform_mall_id,i.next=7,a.$shopeemanService.searchProductDetail(e.country,r);case 7:if(n=i.sent,200!==n.code){i.next=18;break}return o=[],n.data.model_list.forEach((function(e){var t={is_stock_insufficient:!1,itemid:n.data.id,modelid:e.id,promotion_price:(Number(e.price)*(Number(a.discountVal)/100)).toFixed(2).toString(),status:1,user_item_limit:0,promotion_stock:Number(a.quotaVal)};o.push(t)})),s={discount_id:a.discountId,discount_model_list:o,mallId:e.platform_mall_id},i.next=14,a.GoodsList.putModelActive(e.country,s);case 14:c=i.sent,200===c.code?a.$refs.Logs.writeLog("商品itemId【".concat(e.id,"】创建折扣活动成功"),!0):a.$refs.Logs.writeLog("商品itemId【".concat(e.id,"】创建折扣活动失败").concat(c.data),!1),i.next=19;break;case 18:a.$refs.Logs.writeLog("商品itemId【".concat(e.id,"】获取详情失败：").concat(n.data),!0);case 19:i.next=23;break;case 21:i.prev=21,i.t0=i["catch"](0);case 23:case"end":return i.stop()}}),i,null,[[0,21]])})))()},refurbishment:function(){var e=this;this.$confirm("商品一键翻新操作有风险，请谨慎使用！（如商品删除成功，上新失败，商品将不会复原）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.activityVisible=!0;case 1:case"end":return t.stop()}}),t)}))))},syncOriginGoodsNum:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initData(),e.updateNum=e.multipleSelection.length,t.next=4,Object(d["c"])(e.multipleSelection,e.syncOriginGoods);case 4:e.operationBut=!1;case 5:case"end":return t.stop()}}),t)})))()},syncOriginGoods:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},i.prev=1,!a.flag){i.next=5;break}return Object(d["z"])(),i.abrupt("return");case 5:return a.batchStatus(e,"开始同步上家库存...",!0),i.next=8,Object(d["h"])(e.productId,e.platform,e.platform_mall_id,e.id,e.country,"",a.$refs.Logs.writeLog,e.oriShopId,e.oriSite,a,e);case 8:i.next=12;break;case 10:i.prev=10,i.t0=i["catch"](1);case 12:return i.prev=12,--r.count,n=100/a.multipleSelection.length,a.percentage+=n,i.finish(12);case 17:case"end":return i.stop()}}),i,null,[[1,10,12,17]])})))()},editpParentSku:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,c,l,u,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i="",r="",a.prev=2,1!==e){a.next=11;break}if(t.parentId.trim()){a.next=6;break}return a.abrupt("return",t.$message("产品ID不能为空"));case 6:i=t.parentId,r=t.parentType,t.parentLoad1=!0,a.next=19;break;case 11:if(t.parentUrl.trim()){a.next=13;break}return a.abrupt("return",t.$message("产品链接不能为空"));case 13:if(n=Object(d["o"])(t.parentUrl),200===n.code){a.next=16;break}return a.abrupt("return",t.$message("".concat(n.data),!1));case 16:i=n.data.GoodsId,r=n.data.platformId,t.parentLoad2=!0;case 19:if(i){a.next=21;break}return a.abrupt("return",t.writeLog("链接:".concat(t.parentUrl," 识别商品ID失败"),!1));case 21:return o="天猫淘宝海外平台"===t.goodsValue.platformTypeStr?t.goodsValue.id:"",a.next=24,t.$BaseUtilService.buildGoodCode(r,i,t.goodsValue.country,t.goodsValue.platform_mall_id,o);case 24:return s=a.sent,c={},a.next=28,t.getProductDetail(t.goodsValue);case 28:if(l=a.sent,200!==l.code){a.next=60;break}return c=l.data,c["parent_sku"]=s,u={mallId:t.goodsValue.platform_mall_id},a.next=35,t.$shopeemanService.handleProductEdit(t.goodsValue.country,u,[c]);case 35:if(p=a.sent,200!==p.code){a.next=57;break}if(t.batchStatus(t.goodsValue,"修改成功",!0),t.goodsValue.platformTypeStr=t.parentTypeObj[r],t.goodsValue.productId=i,1!==e){a.next=54;break}a.t0=r,a.next=1===a.t0?44:2===a.t0?46:8===a.t0?48:9===a.t0?50:52;break;case 44:return t.goodsValue.url="http://mobile.yangkeduo.com/goods.html?goods_id=".concat(i),a.abrupt("break",52);case 46:return t.goodsValue.url="https://item.taobao.com/item.htm?id=".concat(i),a.abrupt("break",52);case 48:return t.goodsValue.url="https://detail.1688.com/offer/".concat(i,".html"),a.abrupt("break",52);case 50:return t.goodsValue.url="".concat(t.$filters.lazadaGoodsUrl(t.goodsValue.country),"/").concat(i,".html"),a.abrupt("break",52);case 52:a.next=55;break;case 54:t.goodsValue.url=t.parentUrl;case 55:a.next=58;break;case 57:t.batchStatus(t.goodsValue,"修改失败：".concat(p.data),!1);case 58:a.next=61;break;case 60:t.batchStatus(t.goodsValue,"".concat(l.data),!1);case 61:a.next=67;break;case 63:a.prev=63,a.t1=a["catch"](2),t.batchStatus(t.goodsValue,"修改上家异常：".concat(a.t1),!1),t.parentVisible=!1;case 67:t.parentVisible=!1,t.parentLoad1=!1,t.parentLoad2=!1;case 70:case"end":return a.stop()}}),a,null,[[2,63]])})))()},editParent:function(e){this.parentVisible=!0,this.goodsValue=e,this.parentType=1,this.parentId="",this.parentUrl=""},topExtension:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={id:Number(e.id),shop_id:e.platform_mall_id},a.next=3,t.$shopeemanService.handleGoodsTop(e.country,i);case 3:r=a.sent,200===r.code?t.batchStatus(e,"商品置顶成功！",!0):t.batchStatus(e,"".concat(r.data),!1);case 5:case"end":return a.stop()}}),a)})))()},categoryChange:function(e){if(e)if(this.categoryList=e,1===this.editCategory){var t=[];this.categoryList.categoryList.forEach((function(e){t.push("".concat(e.category_name,"(").concat(e.category_cn_name,")"))})),this.categoryName=t.join("->")}else if(2===this.editCategory)this.editProduct("setCategory");else{var a=this.categoryList.categoryList.length-1,i=this.categoryList.categoryList[a].category_name,r=this.categoryList.categoryList[a].category_cn_name;this.$set(this.moveCategory,"categoryName","".concat(i,"(").concat(r,")")),this.$set(this.moveCategory,"isCategoryName",!0)}else this.categoryName="";this.categoryVisible=!1},batchCategory:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.categoryVisible=!0,e.editCategory=2;case 2:case"end":return t.stop()}}),t)})))()},batchConfirm:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initData(),e.updateNum=e.multipleSelection.length,t.next=4,Object(d["c"])(e.multipleSelection,e.confirmProduct);case 4:e.operationBut=!1;case 5:case"end":return t.stop()}}),t)})))()},confirmProduct:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:if(i.prev=4,4===e.status){i.next=10;break}a.failNum++,a.batchStatus(e,"该商品不属于禁卖shopee官方删除",!1),i.next=14;break;case 10:return i.next=12,a.GoodsList.dismissInvalidProducts(e);case 12:n=i.sent,200===n.code?(a.successNum++,a.batchStatus(e,"确认禁卖成功",!0),a.rowSelection([],!1,e)):(a.failNum++,a.batchStatus(e,"确认禁卖失败",!1));case 14:i.next=20;break;case 16:i.prev=16,i.t0=i["catch"](4),a.failNum++,a.batchStatus(e,"确认禁卖异常",!1);case 20:return i.prev=20,--r.count,o=100/a.multipleSelection.length,a.percentage+=o,i.finish(20);case 25:case"end":return i.stop()}}),i,null,[[4,16,20,25]])})))()},batchLogistics:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(a=e.logistics)&&void 0!==a&&a.length){t.next=2;break}return t.abrupt("return",e.$message("至少选择一种物流方式"));case 2:if(i=!1,e.isCustomShipFee&&(i=e.logistics.some((function(t){return e.logisticsList.some((function(e){return e.ShipId===t&&e.IsCustomShipFee&&""===e.CustomShipFee}))}))),!i){t.next=6;break}return t.abrupt("return",e.$message("请输入运费"));case 6:e.editProduct("setLogistics");case 7:case"end":return t.stop()}}),t)})))()},batchFreight:function(){this.editProduct("setFreight")},batchSize:function(){if(!this.productLength||Number(this.productLength)<=0||!this.productWidth||Number(this.productWidth)<=0||!this.productHeight||Number(this.productHeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setSize")},batchWeight:function(){if(!this.productWeight||Number(this.productWeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setWeight")},batchDay:function(){return this.productDay?Number(this.productDay)>30?this.$message("最长不超过30天"):void this.editProduct("setDay"):this.$message("请填写预售天数")},batchPrice:function(){return this.productPrice1?this.productPrice2||0===Number(this.productPrice2)?void this.editProduct("setPrice"):this.$message("数值不能为空"):this.$message("价格百分比不能为空")},batchStock:function(){if(!this.productStock||Number(this.productStock)<0||Number(this.productStock)>1e7)return this.$message("仓库必须在 0 到 10000000 之间");this.editProduct("setStock")},batchTitle:function(){this.titleVisible=!0,this.titleRadio=1,this.titleVal=""},batchDescription:function(){this.getDescriptionVisible=!0,this.descriptionRadio=4,this.descriptionVal=""},editProduct:function(e){var t=this;if("setTitle"===e){if(1===this.titleRadio&&!this.titleVal)return this.$message("新标题不能为空");if((2===this.titleRadio||3===this.titleRadio||4===this.titleRadio)&&!this.titleVal)return this.$message("关键词不能为空")}if("setDescription"===e){if((1===this.descriptionRadio||2===this.descriptionRadio||3===this.descriptionRadio)&&!this.descriptionVal)return this.$message("关键词不能为空");if((4===this.descriptionRadio||5===this.descriptionRadio)&&!this.descriptionConfig.description)return this.$message("请选择模板")}this.isUseProductChannel="setLogistics"!==e,this.$confirm("确定更新商品吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.initData(),t.titleVisible=!1,t.getDescriptionVisible=!1,t.updateNum=t.multipleSelection.length,t.multipleSelection.forEach((function(t){t.edit=e})),a.next=7,Object(d["c"])(t.multipleSelection,t[e]);case 7:t.operationBut=!1;case 8:case"end":return a.stop()}}),a)}))))},getProductDetail:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={},r={},r["product_id"]=e.id,r["version"]="3.2.0",r["shop_id"]=e.platform_mall_id,a.next=7,t.$shopeemanService.searchProductDetail(e.country,r);case 7:if(n=a.sent,200!==n.code||!n.data){a.next=19;break}if(Number(n.data.id)!==Number(e.id)){a.next=16;break}return i=JSON.parse(JSON.stringify(n.data)),a.next=13,t.getProductInfo(i,e);case 13:return a.abrupt("return",{code:200,data:i});case 16:return a.abrupt("return",{code:201,data:"获取到的产品id不一致"});case 17:a.next=20;break;case 19:return a.abrupt("return",{code:0,data:"获取商品详情失败"});case 20:case"end":return a.stop()}}),a)})))()},handleProductEdit:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.batchStatus(t,"正在更新".concat(a.operationObj[t.edit],"..."),!0),r={mallId:t.platform_mall_id},i.next=4,a.$shopeemanService.handleProductEdit(t.country,r,[e]);case 4:n=i.sent,200===n.code?(a.successNum++,"setStock"===t.edit&&(o=0,t.model_list.forEach((function(e){o+=Number(a.productStock)})),t.stock=o),"setPrice"===t.edit&&(s=[],t.model_list.forEach((function(e){s.push(Math.ceil(Number(e.price_info.normal_price)+Number(e.price_info.normal_price)*(Number(a.productPrice1)/100)+Number(a.productPrice2)))})),t.price=Math.min.apply(null,s)),"setTitle"===t.edit&&(t.name=e.name),a.rowSelection([],!1,t),a.batchStatus(t,"更新".concat(a.operationObj[t.edit],"成功"),!0)):(a.failNum++,a.batchStatus(t,"更新".concat(a.operationObj[t.edit],"失败").concat(n.data),!1));case 6:case"end":return i.stop()}}),i)})))()},setCategory:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,p,m,h;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=40;break}n=o.data,s=[],a.categoryList.categoryList.forEach((function(e){s.push(e.category_id)})),c=[],l=0;case 16:if(!(l<a.categoryList.attributesList.length)){i.next=34;break}if(u=a.categoryList.attributesList[l],!a.countryArr.includes(e.country)){i.next=28;break}if(!(u.attribute_id<1)){i.next=22;break}return n["brand_id"]=u.options,i.abrupt("continue",31);case 22:p={},p["attribute_id"]=u.attribute_id,p["attribute_value_id"]=u.options,c.push(p),i.next=31;break;case 28:m={custom_value:{}},m["custom_value "]["raw_value "]=u.selected_attribute_value_name,c.push(m);case 31:l++,i.next=16;break;case 34:return n["attributes"]=c,n["category_path"]=s,i.next=38,a.handleProductEdit(n,e);case 38:i.next=42;break;case 40:a.batchStatus(e,o.data,!1),a.failNum++;case 42:i.next=48;break;case 44:i.prev=44,i.t0=i["catch"](4),a.batchStatus(e,"更新类目异常",!1),a.failNum++;case 48:return i.prev=48,h=100/a.multipleSelection.length,a.percentage+=h,--r.count,i.finish(48);case 53:case"end":return i.stop()}}),i,null,[[4,44,48,53]])})))()},setLogistics:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,s,c,l,u,p,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(s=i.sent,200!==s.code){i.next=28;break}n=s.data,c=[],l=function(t){var i=n.logistics_channels[t];if(a.logistics.includes(i.channelid.toString())&&0===i.parent_channel_id){if(!1===i.enabled){var r=[];a.logistics.forEach((function(e){a.logisticsList.forEach((function(t){e===t.ShipId&&e===i.channelid.toString()&&r.push(t)}))}));var o=(null===r||void 0===r?void 0:r.length)>0?r[0].ShipName:i.channelid.toString();return a.batchStatus(e,"物流方式：".concat(o,"未开启"),!1),{v:void 0}}c.push(i.channelid.toString())}},u=0;case 15:if(!(u<n.logistics_channels.length)){i.next=22;break}if(p=l(u),"object"!==Object(o["a"])(p)){i.next=19;break}return i.abrupt("return",p.v);case 19:u++,i.next=15;break;case 22:for(m=function(e){var t=n.logistics_channels[e],i=[];a.logistics.forEach((function(e){a.logisticsList.forEach((function(a){e===a.ShipId&&e===t.channelid.toString()&&i.push(a)}))})),c.includes(t.channelid.toString())?t.enabled=!0:t.enabled=!1,(null===i||void 0===i?void 0:i.length)>0&&""!==i[0].CustomShipFee&&(t.price=i[0].CustomShipFee)},h=0;h<n.logistics_channels.length;h++)m(h);return i.next=26,a.handleProductEdit(n,e);case 26:i.next=30;break;case 28:a.batchStatus(e,s.data,!1),a.failNum++;case 30:i.next=36;break;case 32:i.prev=32,i.t0=i["catch"](5),a.batchStatus(e,"更新物流方式异常",!1),a.failNum++;case 36:return i.prev=36,g=100/a.multipleSelection.length,a.percentage+=g,--r.count,i.finish(36);case 41:case"end":return i.stop()}}),i,null,[[5,32,36,41]])})))()},setFreight:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=17;break}for(n=o.data,s=0;s<n.logistics_channels.length;s++)c=n.logistics_channels[s],c.enabled&&(c.cover_shipping_fee=1===a.freightRadio);return i.next=15,a.handleProductEdit(n,e);case 15:i.next=19;break;case 17:a.batchStatus(e,o.data,!1),a.failNum++;case 19:i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](5),a.batchStatus(e,"更新运费异常",!1),a.failNum++;case 25:return i.prev=25,l=100/a.multipleSelection.length,a.percentage+=l,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[5,21,25,30]])})))()},setSize:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=19;break}return n=o.data,n["dimension"]["width"]=Number(a.productWidth),n["dimension"]["length"]=Number(a.productLength),n["dimension"]["height"]=Number(a.productHeight),i.next=17,a.handleProductEdit(n,e);case 17:i.next=21;break;case 19:a.batchStatus(e,o.data,!1),a.failNum++;case 21:i.next=27;break;case 23:i.prev=23,i.t0=i["catch"](5),a.batchStatus(e,"更新尺寸异常",!1),a.failNum++;case 27:return i.prev=27,s=100/a.multipleSelection.length,a.percentage+=s,--r.count,i.finish(27);case 32:case"end":return i.stop()}}),i,null,[[5,23,27,32]])})))()},setWeight:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=17;break}return n=o.data,n["weight"]=a.productWeight+"",i.next=15,a.handleProductEdit(n,e);case 15:i.next=19;break;case 17:a.batchStatus(e,o.data,!1),a.failNum++;case 19:i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](5),a.batchStatus(e,"更新重量异常",!1),a.failNum++;case 25:return i.prev=25,s=100/a.multipleSelection.length,a.percentage+=s,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[5,21,25,30]])})))()},setDay:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=23;break}if(n=o.data,a.getDayLength(e),!(Number(a.productDay)>Number(a.maxDays)||Number(a.productDay)<Number(a.preOrderDeliveryDays))){i.next=17;break}a.batchStatus(e,"出货天数需设置在 "+a.preOrderDeliveryDays+" 到 "+a.maxDays+" 天",!1),i.next=21;break;case 17:return n["pre_order"]=!(Number(a.productDay)<a.minDays),n["days_to_ship"]=n.pre_order?Number(a.productDay):a.preOrderDeliveryDays,i.next=21,a.handleProductEdit(n,e);case 21:i.next=25;break;case 23:a.batchStatus(e,o.data,!1),a.failNum++;case 25:i.next=31;break;case 27:i.prev=27,i.t0=i["catch"](5),a.batchStatus(e,"更新天数异常",!1),a.failNum++;case 31:return i.prev=31,s=100/a.multipleSelection.length,a.percentage+=s,--r.count,i.finish(31);case 36:case"end":return i.stop()}}),i,null,[[5,27,31,36]])})))()},setPrice:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=18;break}for(n=o.data,"ID"===e.country&&a.checkCountryPriceForID(n,e),s=0;s<n.model_list.length;s++)c=n.model_list[s],c.price=Math.ceil(Number(c.price)+Number(c.price)*(Number(a.productPrice1)/100)+Number(a.productPrice2))+"";return i.next=16,a.handleProductEdit(n,e);case 16:i.next=20;break;case 18:a.batchStatus(e,o.data,!1),a.failNum++;case 20:i.next=26;break;case 22:i.prev=22,i.t0=i["catch"](5),a.batchStatus(e,"更新价格异常",!1),a.failNum++;case 26:return i.prev=26,l=100/a.multipleSelection.length,a.percentage+=l,--r.count,i.finish(26);case 31:case"end":return i.stop()}}),i,null,[[5,22,26,31]])})))()},setStock:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n={},i.prev=5,a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=17;break}for(n=o.data,s=0;s<n.model_list.length;s++)c=n.model_list[s],c.stock=Number(a.productStock);return i.next=15,a.handleProductEdit(n,e);case 15:i.next=19;break;case 17:a.batchStatus(e,o.data,!1),a.failNum++;case 19:i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](5),a.batchStatus(e,"更新库存异常",!1),a.failNum++;case 25:return i.prev=25,l=100/a.multipleSelection.length,a.percentage+=l,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[5,21,25,30]])})))()},setDescription:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,p,m,h,g,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return n="",o={},i.prev=6,a.batchStatus(e,"正在获取商品详情...",!0),i.next=10,a.getProductDetail(e);case 10:if(s=i.sent,200!==s.code){i.next=38;break}o=s.data,a.descriptionVal=a.descriptionVal.replaceAll("；",";"),i.t0=a.descriptionRadio,i.next=1===i.t0?17:2===i.t0?19:3===i.t0?21:4===i.t0?23:5===i.t0?25:28;break;case 17:return o["description"]=a.descriptionVal+o.description,i.abrupt("break",28);case 19:return o["description"]=o.description+a.descriptionVal,i.abrupt("break",28);case 21:if(a.descriptionVal.indexOf(";")>-1)for(c=a.descriptionVal.split(";"),l=0;l<c.length;l++)u=c[l],o["description"]=o.description.replaceAll(u,"");else o["description"]=o.description.replaceAll(a.descriptionVal,"");return i.abrupt("break",28);case 23:return o["description"]=a.descriptionConfig.description,i.abrupt("break",28);case 25:for(p=0;p<o.tier_variation.length;p++)for(m=o.tier_variation[p],h=0;h<m.options.length;h++)g=m.options[h],n+=g+"\n";return o["description"]=a.descriptionConfig.description+"\n"+n,i.abrupt("break",28);case 28:if(a.getDescriptionLength(e),!("description"===e.edit&&0!==a.minLength&&o.description.length<a.minLength)){i.next=33;break}a.batchStatus(e,"描述长度过短：最小长度"+a.minLength,!1),i.next=36;break;case 33:return o["description"]=o["description"].trim().replaceAll(";"," ").slice(0,a.maxLength),i.next=36,a.handleProductEdit(o,e);case 36:i.next=40;break;case 38:a.batchStatus(e,s.data,!1),a.failNum++;case 40:i.next=46;break;case 42:i.prev=42,i.t1=i["catch"](6),a.batchStatus(e,"更新描述异常",!1),a.failNum++;case 46:return i.prev=46,b=100/a.multipleSelection.length,a.percentage+=b,--r.count,i.finish(46);case 51:case"end":return i.stop()}}),i,null,[[6,42,46,51]])})))()},setTitle:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:return i.prev=4,n={},a.batchStatus(e,"正在获取商品详情...",!0),i.next=9,a.getProductDetail(e);case 9:if(o=i.sent,200!==o.code){i.next=35;break}n=o.data,a.titleVal=a.titleVal.replaceAll("；",";"),i.t0=a.titleRadio,i.next=1===i.t0?16:2===i.t0?18:3===i.t0?20:4===i.t0?22:24;break;case 16:return n["name"]=a.titleVal,i.abrupt("break",24);case 18:return n["name"]=a.titleVal+n.name,i.abrupt("break",24);case 20:return n["name"]=n.name+a.titleVal,i.abrupt("break",24);case 22:if(a.titleVal.indexOf(";")>-1)for(s=a.titleVal.split(";"),c=0;c<s.length;c++)l=s[c],n["name"]=n.name.replaceAll(l,"");else n["name"]=n.name.replaceAll(a.titleVal,"");return i.abrupt("break",24);case 24:if(a.getTitleLength(e),!(0!==a.minLength&&n.name.length<a.minLength)){i.next=30;break}a.batchStatus(e,"标题长度过短：最小长度"+a.minLength,!1),a.failNum++,i.next=33;break;case 30:return n["name"]=n["name"].trim().replaceAll(";"," ").slice(0,a.maxLength),i.next=33,a.handleProductEdit(n,e);case 33:i.next=37;break;case 35:a.batchStatus(e,o.data,!1),a.failNum++;case 37:i.next=43;break;case 39:i.prev=39,i.t1=i["catch"](4),a.batchStatus(e,"更新标题异常",!1),a.failNum++;case 43:return i.prev=43,u=100/a.multipleSelection.length,a.percentage+=u,--r.count,i.finish(43);case 48:case"end":return i.stop()}}),i,null,[[4,39,43,48]])})))()},getProductInfo:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,d,p,m,h,g,b,f,v,_;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(i.prev=0,e.id=Number(e.id),e.name=e.name.toString().trim(),e.brand_id=Number(e.brand_id),e.size_chart=e.size_chart.toString(),e.category_path=JSON.parse(JSON.stringify(e.category_path)),e.add_on_deal=JSON.parse(JSON.stringify(e.add_on_deal)),null===e||void 0===e||!e.attributes){i.next=23;break}c=[],l={},u=0;case 11:if(!(u<e.attributes.length)){i.next=22;break}if(m=e.attributes[u],h=null===m||void 0===m||null===(d=m.custom_value.raw_value)||void 0===d?void 0:d.toString(),h||"0"!==(null===h||void 0===h||null===(p=h.attribute_value_id)||void 0===p?void 0:p.toString())){i.next=16;break}return i.abrupt("continue",19);case 16:g=m.attribute_id.toString(),l=!g||"0"===g||h?{attribute_id:Number(g),custom_value:{raw_value:m.custom_value.raw_value.toString(),unit:null===m||void 0===m||null===(b=m.custom_value)||void 0===b||null===(f=b.unit)||void 0===f?void 0:f.toString()}}:{attribute_id:Number(g),attribute_value_id:Number(m.attribute_value_id)},c.push(l);case 19:u++,i.next=11;break;case 22:e.attributes=c;case 23:if(a.countryArr.includes(t.country)&&(e.ds_attr_rcmd_id="".concat(a.guid().toString(),"|a|EN"),e.ds_cat_rcmd_id="".concat(a.guid().toString(),"|c|EN")),e.stock=Number(e.stock),e.parent_sku=e.parent_sku.toString(),e.price=e.price.toString(),e.price_before_discount=e.price_before_discount.toString(),e.input_normal_price=e.price_info?e.price_info.input_normal_price.toString():"0",e.input_promotion_price=e.price_info?e.price_info.input_promotion_price.toString():"0",e.weight=e.weight.toString(),e.dimension=JSON.parse(JSON.stringify(e.dimension)),e.pre_order=JSON.parse(e.pre_order),e.days_to_ship=Number(e.days_to_ship),e.description=e.description.toString().trim(),e.installment_tenures=JSON.parse(JSON.stringify(e.installment_tenures)),a.getModelList(e.model_list,a.isRefurbishProduct),a.isMove){i.next=53;break}return i.prev=38,v={},v["product_id"]=e.id,v["mallId"]=t.platform_mall_id,i.next=44,a.$shopeemanService.getLogistics(t.country,v);case 44:if(_=i.sent,200!==_.code){i.next=49;break}return i.next=48,a.getLogisticsInfo(_.data.list,a.isUseProductChannel,t);case 48:e.logistics_channels=i.sent;case 49:i.next=53;break;case 51:i.prev=51,i.t0=i["catch"](38);case 53:e.images=JSON.parse(JSON.stringify(e.images)),(null===(r=e.tier_variation)||void 0===r?void 0:r.length)>0&&(e.tier_variation=JSON.parse(JSON.stringify(e.tier_variation))),"8"===e.status.toString()&&(e.unlisted=!0),1===(null===(n=e.model_list)||void 0===n?void 0:n.length)&&1===(null===(o=e.tier_variation)||void 0===o?void 0:o.length)&&(e.tier_variation[0].options[0]||(e.tier_variation[0].options[0]=e.tier_variation[0].name?e.tier_variation[0].name:e.model_list[0].name),e.tier_variation[0].name||(e.tier_variation[0].name=e.model_list[0].name)),null!==e&&void 0!==e&&null!==(s=e.min_purchase_limit_info)&&void 0!==s&&s.min_purchase_limit&&(e.min_purchase_limit_info.min_purchase_limit=Number(e.min_purchase_limit_info.min_purchase_limit)?Number(e.min_purchase_limit_info.min_purchase_limit):1,e.min_purchase_limit=e.min_purchase_limit_info.min_purchase_limit<1?1:e.min_purchase_limit_info.min_purchase_limit),a.checkCountryPriceForID(e,t),i.next=63;break;case 61:i.prev=61,i.t1=i["catch"](0);case 63:case"end":return i.stop()}}),i,null,[[0,61],[38,51]])})))()},checkCountryPriceForID:function(e,t){if("ID"===t.country){var a;if("0"!==e.input_normal_price)t.in_promotion&&(e.price=e.input_normal_price),e.price=e.input_normal_price;else for(var i=0;i<e.model_list.length;i++){var r=e.model_list[i];if(e.price===t.price.toString()){if(t.in_promotion){e.price=r.input_promotion_price;break}e.price=r.input_normal_price;break}}if((null===(a=e.model_list)||void 0===a?void 0:a.length)>0)for(var n=0;n<e.model_list.length;n++){var o=e.model_list[n];t.in_promotion?t.price=t.input_normal_price:o.price=o.input_normal_price}}},getLogisticsInfo:function(e,t,a){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,s,c,l,u,d,p,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=[],s=[],!((null===(n=e)||void 0===n?void 0:n.length)>0)){r.next=10;break}return u={platform_mall_id:a.platform_mall_id},r.next=6,i.$shopeemanService.getChinese(a.country,"/api/v3/logistics/get_channel_list/?",u);case 6:d=r.sent,d=JSON.parse(JSON.parse(d).data),null!==(c=d)&&void 0!==c&&null!==(l=c.data)&&void 0!==l&&l.list&&(s=d.data.list),e=i.filterLogistics(e,s,t);case 10:for(p=0;p<e.length;p++)m=e[p],h={},h.channelid=Number(m.channel_id),h.price=m.price?m.price.toString():"0.00",h.enabled=JSON.parse(m.enabled),h.cover_shipping_fee=JSON.parse(m.cover_shipping_fee),h.sizeid=Number(m.size_id),h.size=Number(m.size),h.parent_channel_id=Number(m.parent_channel_id),o.push(h);return r.abrupt("return",o);case 12:case"end":return r.stop()}}),r)})))()},filterLogistics:function(e,t,a){for(var i=[],r=0;r<t.length;r++){var n=t[r],o=n.channel_id.toString(),s="parent_channel_id"in n?n.parent_channel_id.toString():"0";if("0"===s&&(JSON.parse(n.is_mask_channel)||JSON.parse(n.enabled))){for(var c=!1,l=0;l<e.length;l++){var u=e[l];if(u.channel_id.toString()===o){a||(u.enabled=n.enabled.toString()),null!==u&&void 0!==u&&u.default_price||(u.default_price="0.00"),i.push(u),c=!0;break}}c||(n.price=n.default_price?n.default_price.toString():"0.00",n.cover_shipping_fee=!("0"===n.cover_shipping_fee.toString()||"false"===n.cover_shipping_fee.toString()),n.size_id=0,n.size=0,i.push(n))}}return i},getModelList:function(e,t){try{if((null===e||void 0===e?void 0:e.length)>0)for(var a=0;a<e.length;a++){var i=e[a];i.id=Number(i.id),i.name=!i.name&&i.sku?i.sku:i.name.toString(),i.sku=i.sku.toString(),i.stock=Number(i.stock),i.price=i.price.toString(),i.tier_index=JSON.parse(JSON.stringify(i.tier_index)),i.input_normal_price=i.price_info.input_normal_price.toString(),i.input_promotion_price=i.price_info.input_promotion_price.toString(),i.is_default=!!JSON.parse(i.is_default)&&JSON.parse(i.is_default)}}catch(r){}},deleteActicity:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s,c,l,u,d,p,m,h,g,b,f,v,_,y,x,k,S;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.prev=0,i=0;case 2:if(!(i<e.campaignTypeList.Name.length)){a.next=70;break}if(r=e.campaignTypeList.Name[i],n="",1!==r){a.next=22;break}return l="",a.next=9,t.GoodsList.getMallDiscountsIdByKeyword(e);case 9:if(u=a.sent,200===u.code){a.next=12;break}return a.abrupt("return",{batchStatus:"获取该商品参加的折扣活动ID失败：".concat(u.data),color:!1,code:u.code});case 12:if(l=null===(s=u.data)||void 0===s||null===(c=s.hits[0])||void 0===c?void 0:c.promotionid,!l){a.next=20;break}return t.discountId=l,a.next=17,t.GoodsList.deleteDiscountCampainDetail(e,l);case 17:if(d=a.sent,200===d.code){a.next=20;break}return a.abrupt("return",{batchStatus:"删除折扣活动失败：".concat(d.data),color:!1,code:d.code});case 20:a.next=67;break;case 22:if(3!==r){a.next=35;break}return a.next=25,t.GoodsList.getBundleDeal(e,n);case 25:if(h=a.sent,n=null===(p=h.data)||void 0===p||null===(m=p.hits[0])||void 0===m?void 0:m.bundle_deal_id,!n){a.next=33;break}return a.next=30,t.GoodsList.deleteBundleGoods(e,n);case 30:if(g=a.sent,200===g.code){a.next=33;break}return a.abrupt("return",{batchStatus:"删除套装活动失败：".concat(g.data),color:!1,code:g.code});case 33:a.next=67;break;case 35:if(4!==r){a.next=66;break}return a.next=38,t.GoodsList.getAddOnDealStandardSearch(e);case 38:if(v=a.sent,200===v.code){a.next=41;break}return a.abrupt("return",{batchStatus:"获取该商品参加的加购活动ID失败：".concat(v.data),color:!1,code:v.code});case 41:if(n=null===(b=v.data)||void 0===b||null===(f=b.add_on_deal_list[0])||void 0===f?void 0:f.add_on_deal_id,!n){a.next=64;break}if(!e.campaignTypeList.IsSelected){a.next=60;break}return a.next=46,t.GoodsList.getAdd0nDealAggrMainItemList(e,n);case 46:if(_=a.sent,200===_.code){a.next=49;break}return a.abrupt("return",{batchStatus:"获取主商品加购活动列表失败：".concat(_.data),color:!1,code:_.code});case 49:return y=_.data.main_item_list.filter((function(t){return t.item_id===e.id})),x="",1===y[0].status&&(x=0),2===y[0].status&&(x=1),a.next=55,t.GoodsList.deleteAddOnDealMainItemList(e,x,n);case 55:if(k=a.sent,200===k.code){a.next=58;break}return a.abrupt("return",{batchStatus:"删除主商品加购活动失败：".concat(k.data),color:!1,code:k.code});case 58:a.next=64;break;case 60:return a.delegateYield(regeneratorRuntime.mark((function a(){var i,r,o,s,c,l,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.GoodsList.getAdd0nDealAggrMainItemList(e,n);case 2:if(o=a.sent,s=(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.main_item_list)||[],!(s.length<=0)){a.next=6;break}return a.abrupt("return",{v:{batchStatus:"删除子商品加购活动失败，请先确认主要产品",color:!1,code:201}});case 6:return a.next=8,t.GoodsList.getAdd0nDealAggrSubItemList(e,n);case 8:if(c=a.sent,200===c.code){a.next=11;break}return a.abrupt("return",{v:{batchStatus:"获取子商品加购活动列表失败：".concat(c.data),color:!1,code:c.code}});case 11:if(l=null===(r=c.data)||void 0===r?void 0:r.sub_item_list.filter((function(t){return t.item_id===e.id})),l.map((function(t){var a;delete t.input_sub_item_price,delete t.price,delete t.sub_item_price,t.sub_item_input_price=(null===(a=c.data)||void 0===a?void 0:a.model_info[e.id][0].price)||0,t.status=0})),!((null===l||void 0===l?void 0:l.length)>0)){a.next=24;break}u=0;case 15:if(!(u<l.length)){a.next=24;break}return a.next=18,t.GoodsList.deleteAddOnDealSubItemList(e,n,l);case 18:if(d=a.sent,200===d.code){a.next=21;break}return a.abrupt("return",{v:{batchStatus:"删除子商品加购活动失败：".concat(d.data),color:!1,code:d.code}});case 21:u++,a.next=15;break;case 24:case"end":return a.stop()}}),a)}))(),"t0",61);case 61:if(S=a.t0,"object"!==Object(o["a"])(S)){a.next=64;break}return a.abrupt("return",S.v);case 64:a.next=67;break;case 66:return a.abrupt("continue",67);case 67:i++,a.next=2;break;case 70:return a.abrupt("return",{batchStatus:"删除活动成功",color:!0,code:200});case 73:return a.prev=73,a.t1=a["catch"](0),a.abrupt("return",{batchStatus:"删除活动异常",color:!1,code:-2});case 76:case"end":return a.stop()}}),a,null,[[0,73]])})))()},batchUpDownProduct:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initData(),e.updateNum=e.multipleSelection.length,t.next=4,Object(d["c"])(e.multipleSelection,e.upDownProduct);case 4:e.operationBut=!1;case 5:case"end":return t.stop()}}),t)})))()},upDownProduct:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:if(i.prev=4,!a.upDown){i.next=13;break}if(!((null===(n=e.campaignTypeList.Name)||void 0===n?void 0:n.length)>0)){i.next=13;break}return i.next=9,a.deleteActicity(e,e.campaignTypeList);case 9:o=i.sent,s=o.batchStatus,c=o.color,a.batchStatus(e,s,c);case 13:return l=[{id:Number(e.id),unlisted:a.upDown}],u={mallId:e.platform_mall_id},i.next=17,a.$shopeemanService.handleGoodsDelist(e.country,u,l);case 17:p=i.sent,200===p.code?(a.rowSelection([],!1,e),a.successNum++,a.batchStatus(e,"".concat(a.upDown?"下架成功":"上架成功"),!0)):(a.failNum++,a.batchStatus(e,p.data,!1)),i.next=25;break;case 21:i.prev=21,i.t0=i["catch"](4),a.failNum++,a.batchStatus(e,"".concat(a.upDown?"下架异常":"上架异常"),!1);case 25:return i.prev=25,m=100/a.multipleSelection.length,a.percentage+=m,--r.count,i.finish(25);case 30:case"end":return i.stop()}}),i,null,[[4,21,25,30]])})))()},batchDelete:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(null===(a=e.tableData)||void 0===a?void 0:a.length)>0&&(100===e.queryType||200===e.queryType)?e.deleteData=e.tableData:e.deleteData=e.multipleSelection,e.$confirm("确定删除【".concat(e.deleteData.length,"】个商品吗"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initData(),e.deleteId=[],e.updateNum=e.deleteData.length,t.next=5,Object(d["c"])(e.deleteData,e.deleteProduct);case 5:return t.next=7,e.deleteCollectGoodsInfo();case 7:e.operationBut=!1;case 8:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},deleteProduct:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,p,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return Object(d["z"])(),i.abrupt("return");case 4:if(i.prev=4,a.batchStatus(e,"正在删除商品...",!0),!((null===(n=e.campaignTypeList.Name)||void 0===n?void 0:n.length)>0)){i.next=17;break}return i.next=9,a.deleteActicity(e,e.campaignTypeList);case 9:if(o=i.sent,s=o.batchStatus,c=o.color,l=o.code,200===l){i.next=17;break}if(!a.isRefurbishProduct){i.next=16;break}return i.abrupt("return",{batchStatus:s,code:-2});case 16:return i.abrupt("return",a.batchStatus(e,s,c));case 17:return u={product_id_list:[Number(e.id)],mallId:e.platform_mall_id},i.next=20,a.$shopeemanService.handleGoodsDelete(e.country,u);case 20:if(p=i.sent,200!==p.code){i.next=30;break}if(!a.isRefurbishProduct){i.next=24;break}return i.abrupt("return",{batchStatus:"删除成功-开始上新",code:200});case 24:a.successNum++,a.batchStatus(e,"删除成功",!0),a.deleteId.push(e.id),a.rowSelection([],!1,e),i.next=34;break;case 30:if(!a.isRefurbishProduct){i.next=32;break}return i.abrupt("return",{batchStatus:"删除失败：".concat(p.data),code:-2});case 32:a.failNum++,a.batchStatus(e,"删除失败：".concat(p.data),!1);case 34:i.next=42;break;case 36:if(i.prev=36,i.t0=i["catch"](4),!a.isRefurbishProduct){i.next=40;break}return i.abrupt("return",{batchStatus:"删除异常",code:-2});case 40:a.failNum++,a.batchStatus(e,"删除异常",!1);case 42:return i.prev=42,a.isRefurbishProduct||(m=100/a.deleteData.length,a.percentage+=m),--r.count,i.finish(42);case 46:case"end":return i.stop()}}),i,null,[[4,36,42,46]])})))()},deleteCollectGoodsInfo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.deleteId.length>0)){t.next=6;break}return e.$refs.Logs.writeLog("正在删除云商品库数据...",!0),t.next=4,e.GoodsList.deleteCollectGoodsInfo(e.deleteId);case 4:a=t.sent,200===a.code?e.$refs.Logs.writeLog("删除云商品库数据成功",!0):e.$refs.Logs.writeLog("删除云商品库数据失败：".concat(a.data),!1);case 6:case"end":return t.stop()}}),t)})))()},getGoodsActInfo:function(e){try{var t,a,i,r,o=null,s={},c=[];if(null!==e&&void 0!==e&&null!==(t=e.ongoing_upcoming_campaigns)&&void 0!==t&&t.upcoming_campaigns)if(o=e.ongoing_upcoming_campaigns.upcoming_campaigns,(null===(i=o)||void 0===i?void 0:i.length)>0)for(var l=0;l<o.length;l++){var u=o[l];c.push(u.campaign_type)}if(null!==e&&void 0!==e&&null!==(a=e.ongoing_upcoming_campaigns)&&void 0!==a&&a.ongoing_campaigns)if(o=e.ongoing_upcoming_campaigns.ongoing_campaigns,(null===(r=o)||void 0===r?void 0:r.length)>0)for(var d=0;d<o.length;d++){var p=o[d];c.push(p.campaign_type)}return s.Name=Object(n["a"])(new Set(c)),s.IsSelected=e.add_on_deal,s}catch(m){}},getDayLength:function(e){var t=e?e.country:this.country;switch(t){case"TH":case"MY":case"SG":this.minDays=7,this.maxDays=30,this.productDay=e?this.productDay:15,this.preOrderDeliveryDays=2;break;case"TW":this.minDays=5,this.maxDays=20,this.productDay=e?this.productDay:10,this.preOrderDeliveryDays=3;break;case"PH":this.minDays=7,this.maxDays=30,this.productDay=e?this.productDay:10,this.preOrderDeliveryDays=2;break;case"ID":this.minDays=7,this.maxDays=15,this.productDay=e?this.productDay:10,this.preOrderDeliveryDays=2;break;case"VN":this.minDays=7,this.maxDays=15,this.productDay=e?this.productDay:7,this.preOrderDeliveryDays=2;break;case"BR":this.minDays=5,this.maxDays=10,this.productDay=e?this.productDay:7,this.preOrderDeliveryDays=3;break}},getDescriptionLength:function(e){switch(e.country){case"TH":this.maxLength=3e3,this.minLength=25;break;case"VN":this.maxLength=3e3,this.minLength=100;break;case"MY":case"SG":case"ID":this.maxLength=3e3,this.minLength=20;break;case"PH":this.maxLength=3e3,this.minLength=5;break;case"TW":case"BR":this.maxLength=3e3,this.minLength=1;break}},getTitleLength:function(e){switch(e.country){case"TH":case"MY":this.maxLength=120,this.minLength=20;break;case"VN":case"SG":this.maxLength=120,this.minLength=10;break;case"TW":this.maxLength=60,this.minLength=5;break;case"PH":this.maxLength=100,this.minLength=20;break;case"ID":this.maxLength=100,this.minLength=5;break;case"BR":this.maxLength=120,this.minLength=1;break}},operation:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==(i=t.multipleSelection)&&void 0!==i&&i.length){a.next=2;break}return a.abrupt("return",t.$message("没有可操作的商品，请选择"));case 2:t[e]();case 3:case"end":return a.stop()}}),a)})))()},selectDescription:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==e){a.next=10;break}return a.next=3,t.$commodityService.descriptionTemplateList();case 3:i=a.sent,r=JSON.parse(i),t.descriptionLabelList=r.data||[],t.descriptionConfigId?(n=t.descriptionLabelList.filter((function(e){return e&&e.id===t.descriptionConfigId}))[0],t.descriptionConfig.text=n&&n.description||t.descriptionConfig.text,t.descriptionConfig.description=n&&n.description||t.descriptionConfig.description,t.descriptionConfig.lable=n&&n.lable||""):t.descriptionConfigId=t.descriptionLabelList[0]&&t.descriptionLabelList[0].id||"",t.descriptionVisible=!0,a.next=31;break;case 10:if(1!==e){a.next=21;break}return o=t.descriptionConfig.tag||t.descriptionConfig.lable,a.next=14,t.$commodityService.uploadDescriptionTemplate(o,t.descriptionConfig.text);case 14:s=a.sent,c=JSON.parse(s),t.descriptionConfig.tag="",t.descriptionConfigId=parseInt(c.data),t.descriptionConfig.description=t.descriptionConfig.text,a.next=30;break;case 21:if(2!==e){a.next=29;break}return a.next=24,t.$commodityService.deleteDescriptionTemplate(t.descriptionConfigId);case 24:l=a.sent,u=JSON.parse(l),200===u.code?(t.descriptionConfigId="",t.$message.success("删除成功")):t.$message.error("删除失败"),a.next=30;break;case 29:3===e?t.descriptionConfig.description=t.descriptionConfig.text:4===e&&(t.descriptionConfig.text=t.descriptionConfig.description);case 30:t.descriptionVisible=!1;case 31:case"end":return a.stop()}}),a)})))()},viewDetails:function(e){var t={type:"itemDetail",shopId:e.platform_mall_id,id:e.id};this.$BaseUtilService.getOrderDetailInfo(e.platform_mall_id,JSON.stringify(t))},getLogistics:function(){var e=this,t=this.$shopeeManConfig.getLogisticsList();t=t[this.country]||[],this.logisticsList=[],this.logistics=[],t.forEach((function(t){t.CustomShipFee="",e.logisticsList.push(t),t.IsSelected&&e.logistics.push(t.ShipId)})),this.setIsCustomShipFee()},queryData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectMallList.length){t.next=2;break}return t.abrupt("return",e.$message("请选择店铺"));case 2:if(null!==(a=e.goodsStatus)&&void 0!==a&&a.length){t.next=4;break}return t.abrupt("return",e.$message("请选择商品状态"));case 4:if(null!==(i=e.source)&&void 0!==i&&i.length){t.next=6;break}return t.abrupt("return",e.$message("请选择上家来源"));case 6:if(!(e.soldMin<0||e.soldMax>99999999)){t.next=8;break}return t.abrupt("return",e.$message("销售量请输入0-99999999之间的数字"));case 8:if(!(e.viewMin<0||e.viewMax>99999999)){t.next=10;break}return t.abrupt("return",e.$message("访客量请输入0-99999999之间的数字"));case 10:if(!(e.likeMin<0||e.likeMax>99999999)){t.next=12;break}return t.abrupt("return",e.$message("粉丝量请输入0-99999999之间的数字"));case 12:if(!(e.priceMin<0||e.priceMax>99999999)){t.next=14;break}return t.abrupt("return",e.$message("价格请输入0-99999999之间的数字"));case 14:if(!(e.goodsMin<0||e.goodsMax>99999999)){t.next=16;break}return t.abrupt("return",e.$message("商品数量请输入0-99999999之间的数字"));case 16:e.initData(),e.queryNum=0,e.tableData=[],e.$refs.Logs.consoleMsg="",e.showConsole=!1,e.$refs.plTable.clearSelection(),1===e.queryType?e.$refs.Logs.writeLog("开始查询...",!0):100===e.queryType?e.$refs.Logs.writeLog("开始查询100小时内无流量商品",!0):200===e.queryType&&e.$refs.Logs.writeLog("开始查询200小时内无流量商品",!0),e.selectMallList.forEach((function(e){e.pageNumber=1,e.mylist=[],e.isFlag=!0,e.cursor=""})),e.index=1,r=0;case 26:if(!(r<e.goodsStatus.length)){t.next=45;break}if(!e.flag){t.next=29;break}return t.abrupt("break",45);case 29:if(n=e.goodsStatus[r],e.goodsStatusVal=n,0!==n&&100!==e.queryType&&200!==e.queryType){t.next=38;break}return e.goodsStatusName="",t.next=35,Object(d["c"])(e.selectMallList,e.getTableData,3);case 35:return t.abrupt("break",45);case 38:return e.goodsStatusName=e.statusFilter[n],e.selectMallList.forEach((function(e){e.pageNumber=1,e.mylist=[],e.isFlag=!0,e.cursor=""})),t.next=42,Object(d["c"])(e.selectMallList,e.getTableData,3);case 42:r++,t.next=26;break;case 45:e.operationBut=!1,e.showConsole=!0,e.$refs.Logs.writeLog("查询完成",!0),100!==e.queryType&&200!==e.queryType||(null===(o=e.tableData)||void 0===o?void 0:o.length)>0&&e.batchDelete();case 49:case"end":return t.stop()}}),t)})))()},getTableData:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,d,p,m,h,g,b,f,v;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return a.stop(),i.abrupt("return");case 4:if(n="",o=e.mall_alias_name||e.platform_mall_name,i.prev=6,s={},s["mItem"]=e,s["pageSize"]=a.pageSize,s["listType"]=a.goodsStatusName?a.goodsStatusName:"all",!("originId"!==a.searchType&&a.keyword||a.goodsMax<99999999&&a.goodsMax>=0||a.goodsMin>0&&a.goodsMin<99999999||a.soldMin>0&&a.soldMin<99999999||a.soldMax<99999999&&a.soldMax>=0||a.categoryName)){i.next=21;break}return 100!==a.queryType&&200!==a.queryType&&(a.keyword&&(s["searchType"]=a.searchType,s["keyword"]=a.keyword.trim()),a.categoryName&&(s["categoryId"]=a.categoryList.categoryList[a.categoryList.categoryList.length-1].category_id),s["goodsMin"]=a.goodsMin,s["goodsMax"]=a.goodsMax),s["soldMin"]=a.soldMin,s["soldMax"]=a.soldMax,e.cursor&&(s["cursor"]=e.cursor),i.next=18,a.GoodsList.searchProductList(s);case 18:n=i.sent,i.next=24;break;case 21:return i.next=23,a.GoodsList.getMpskuList(s);case 23:n=i.sent;case 24:if(200!==n.code){i.next=35;break}if(e.cursor=n.data.page_info.cursor,null===(c=n.data.list)||void 0===c||!c.length){i.next=33;break}return i.next=29,a.setTableData(n.data.list,e,o);case 29:l=a.filterData(n.data.list),u=l.fData,d=l.len,a.productNumChecked?e.mylist=u:(a.tableData=a.tableData.concat(u),a.queryNum=a.tableData.length,a.rowSelection(u,!0,{})),a.$refs.Logs.writeLog("查询店铺【".concat(o,"】第【").concat(e.pageNumber,"】页数据：").concat(n.data.list.length),!0),d>0&&a.$refs.Logs.writeLog("【".concat(o,"】第【").concat(e.pageNumber,"】页过滤数据【").concat(d,"】条"),!1);case 33:i.next=36;break;case 35:a.$refs.Logs.writeLog("店铺【".concat(o,"】").concat(n.data),!1);case 36:i.next=41;break;case 38:i.prev=38,i.t0=i["catch"](6),a.$refs.Logs.writeLog("店铺【".concat(o,"】获取数据异常"),!1);case 41:if(i.prev=41,g=a.tableData.filter((function(t){return t.platform_mall_id===e.platform_mall_id})),a.productNumChecked&&g.length<Number(a.productNum)&&(b=Number(a.productNum)-g.length,a.tableData=a.tableData.concat(e.mylist.slice(0,b)),a.rowSelection(e.mylist.slice(0,b),!0,{}),f=a.tableData.filter((function(t){return t.platform_mall_id===e.platform_mall_id})),f.length>=Number(a.productNum)&&(e.isFlag=!1)),!((null===(p=n)||void 0===p||null===(m=p.data)||void 0===m||null===(h=m.list)||void 0===h?void 0:h.length)>=a.pageSize&&e.isFlag)||a.flag){i.next=51;break}if(e.pageNumber++,a.flag){i.next=49;break}return i.next=49,a.getTableData(e,r);case 49:i.next=55;break;case 51:a.queryNum=a.tableData.length,v=8===a.goodsStatus.length||100===a.queryType||200===a.queryType?1:a.goodsStatus.length,a.percentage=a.index++/(a.selectMallList.length*v)*100,--r.count;case 55:return i.finish(41);case 56:case"end":return i.stop()}}),i,null,[[6,38,41,56]])})))()},queryBanned:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initData(),e.tableData=[],e.showConsole=!1,e.$refs.Logs.consoleMsg="",e.$refs.plTable.clearSelection(),e.$refs.Logs.writeLog("开始查询禁卖商品...",!0),e.selectMallList.forEach((function(e){e.pageNumber=1,e.mylist=[],e.isFlag=!0})),t.next=9,Object(d["c"])(e.selectMallList,e.getBannedData,3);case 9:e.operationBut=!1,e.showConsole=!0,e.$refs.Logs.writeLog("禁卖商品查询结束",!0);case 12:case"end":return t.stop()}}),t)})))()},getBannedData:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r,n,o,s,c,l,u,d,p,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:{count:1},!a.flag){i.next=4;break}return a.stop(),i.abrupt("return");case 4:return n="",o=e.mall_alias_name||e.platform_mall_name,i.prev=6,s={},s["mItem"]=e,s["pageSize"]=a.pageSize,s["listType"]="banned",s["listOrderType"]="list_time_asc",i.next=14,a.GoodsList.getMpskuList(s);case 14:if(n=i.sent,200!==n.code){i.next=23;break}if(null===(c=n.data.list)||void 0===c||!c.length){i.next=21;break}return a.$refs.Logs.writeLog("查询店铺【".concat(o,"】第【").concat(e.pageNumber,"】页数据：").concat(n.data.list.length),!0),i.next=20,a.setTableData(n.data.list,e,o);case 20:a.productNumChecked?e.mylist=n.data.list:(a.tableData=a.tableData.concat(n.data.list),a.rowSelection(n.data.list,!0,{}),a.queryNum=a.tableData.length);case 21:i.next=24;break;case 23:a.$refs.Logs.writeLog("店铺【".concat(o,"】").concat(n.data),!1);case 24:i.next=29;break;case 26:i.prev=26,i.t0=i["catch"](6),a.$refs.Logs.writeLog("店铺【".concat(o,"】获取数据异常"),!1);case 29:if(i.prev=29,p=a.tableData.filter((function(t){return t.platform_mall_id===e.platform_mall_id})),a.productNumChecked&&p.length<Number(a.productNum)&&(m=Number(a.productNum)-p.length,a.tableData=a.tableData.concat(e.mylist.slice(0,m)),a.rowSelection(e.mylist.slice(0,m),!0,{}),h=a.tableData.filter((function(t){return t.platform_mall_id===e.platform_mall_id})),h.length>=Number(a.productNum)&&(e.isFlag=!1)),!((null===(l=n)||void 0===l||null===(u=l.data)||void 0===u||null===(d=u.list)||void 0===d?void 0:d.length)>=a.pageSize&&e.isFlag)){i.next=39;break}if(e.pageNumber++,a.flag){i.next=37;break}return i.next=37,a.getBannedData(e,r);case 37:i.next=43;break;case 39:a.queryNum=a.tableData.length,g=100/a.selectMallList.length,a.percentage+=g,--r.count;case 43:return i.finish(29);case 44:case"end":return i.stop()}}),i,null,[[6,26,29,44]])})))()},setTableData:function(e,t,a){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=regeneratorRuntime.mark((function r(n){var o,s,c,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=e[n],s=0,c=0,l=[],u="",o.country=t.country,o.mallName=a,o.create_time=1e3*o.create_time,o.modify_time=1e3*o.modify_time,o.images=o.images[0],o.platform_mall_id=t.platform_mall_id,o.model_list.forEach((function(e){l.push(Number(e.price_info.normal_price)),s+=Number(e.stock_info.normal_stock),c+=Number(e.sold)})),o.holiday_mode_on=null,o.categoryId=o.category_path.toString(),o.stock=s,o.sold=c,o.price=Math.min.apply(null,l),u=2===o.status?6:1===o.status&&0===o.stock?11:1===o.status&&100===i.goodsStatusVal?100:o.status,o.status=u,r.next=21,i.getPlatformData(o.parent_sku);case 21:o.platformTypeStr=i.platformData["platformTypeStr"]||"",o.productId=i.platformData["productId"]||"",o.url=i.platformData["url"]||"",o.platform=i.platformData["platform"]||"",o.oriShopId=i.platformData["shopId"]||"",o.oriSite=i.platformData["site"]||"",o.campaignTypeList=i.getGoodsActInfo(o);case 28:case"end":return r.stop()}}),r)})),o=0;case 2:if(!(o<e.length)){r.next=7;break}return r.delegateYield(n(o),"t0",4);case 4:o++,r.next=2;break;case 7:case"end":return r.stop()}}),r)})))()},filterData:function(e){for(var t=[],a=0;a<e.length;a++){var i,r,n,o,s=e[a];if(100!==this.queryType&&200!==this.queryType){if("originId"===this.searchType&&this.keyword&&this.keyword!==s.productId)continue;if(6===this.goodsStatusVal&&6!==s.status)continue;if(this.goodsStatusVal&&6!==this.goodsStatusVal&&6===s.status)continue;if(1===Number(this.sellStatus)&&Number(s.stock)>0)continue;if(2===Number(this.sellStatus)&&0===Number(s.stock))continue}(0===this.source[0]||this.source.includes(s.platformTypeStr))&&(null!==(i=this.modifyTime)&&void 0!==i&&i.length&&s.modify_time<this.modifyTime[0]||null!==(r=this.modifyTime)&&void 0!==r&&r.length&&s.modify_time>new Date(this.modifyTime[1]).getTime()||null!==(n=this.createTime)&&void 0!==n&&n.length&&s.create_time<this.createTime[0]||null!==(o=this.createTime)&&void 0!==o&&o.length&&s.create_time>new Date(this.createTime[1]).getTime()||Number(s.price)>=Number(this.priceMin)&&Number(s.price)<=Number(this.priceMax)&&Number(s.view_count)>=Number(this.viewMin)&&Number(s.view_count)<=Number(this.viewMax)&&Number(s.like_count)>=Number(this.likeMin)&&Number(s.like_count)<=Number(this.likeMax)&&(100===this.queryType&&(Number((new Date).getTime())-Number(s.create_time)<36e7||0!==Number(s.view_count)||0!==Number(s.like_count))||200===this.queryType&&(Number((new Date).getTime())-Number(s.create_time)<72e7||0!==Number(s.view_count)||0!==Number(s.like_count))||t.push(s)))}var c=(null===e||void 0===e?void 0:e.length)-(null===t||void 0===t?void 0:t.length)||0;return{fData:t,len:c}},getPlatformData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.decryptShopeeItemSku(e);case 2:i=t.platformData["platform"],r=t.platformData["productId"],5===i&&r.toString().includes("-")&&(t.getSelfGoodsPlatform(e),t.platformData&&t.platformData["platform"]&&(i=t.platformData["platform"])),n=Object(d["p"])(i,t.platformData),o=n.url,s=n.platformTypeStr,t.platformData["url"]=o,t.platformData["platformTypeStr"]=s;case 8:case"end":return a.stop()}}),a)})))()},decryptShopeeItemSku:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,i=/^[+-]?\d*[.]?\d*$/,!(e.length<30)){a.next=10;break}return a.next=5,t.$userInfo.user_create_time;case 5:r=a.sent,r&&(n=new Date(r).getTime(),o=new Date("2018-12-20 00:00:00").getTime(),n>o&&(t.platformData["platform"]=5,t.platformData["productId"]=e)),e.indexOf("_")>-1?(s=e.split("_"),i.test(s[0])&&i.test(s[1])?(c=Number(s[1]),1===c||2===c||3===c||5===c||6===c||7===c||8===c?(t.platformData["platform"]=c,t.platformData["productId"]=s[0]):(t.platformData["platform"]=5,t.platformData["productId"]=e)):(t.platformData["platform"]=5,t.platformData["productId"]=e)):i.test(e)?(t.platformData["platform"]=1,t.platformData["productId"]=e):(t.platformData["platform"]=5,t.platformData["productId"]=e),a.next=14;break;case 10:return a.next=12,t.$BaseUtilService.decGoodCode(e);case 12:l=a.sent,l.indexOf("-")>-1?(u=l.split("-"),t.getPlatformSimpleStr(u[0],u)):(t.platformData["platform"]=5,t.platformData["productId"]=e);case 14:a.next=18;break;case 16:a.prev=16,a.t0=a["catch"](0);case 18:case"end":return a.stop()}}),a,null,[[0,16]])})))()},getPlatformSimpleStr:function(e,t){try{var a=t[1];"pdd"===e.toLocaleLowerCase()?(this.platformData["platform"]=1,this.platformData["productId"]=a):"tb"===e.toLocaleLowerCase()||"tm"===e.toLocaleLowerCase()?(this.platformData["platform"]=2,this.platformData["productId"]=a):"tb"===e.toLocaleLowerCase()?(this.platformData["platform"]=3,this.platformData["productId"]=a):"own"===e.toLocaleLowerCase()?(this.platformData["platform"]=5,this.platformData["productId"]=a):"ghpt"===e.toLocaleLowerCase()?(this.platformData["platform"]=6,this.platformData["productId"]=a):"alibaba"===e.toLocaleLowerCase()?(this.platformData["platform"]=8,this.platformData["productId"]=a):"hyj"===e.toLocaleLowerCase()||"hlb"===e.toLocaleLowerCase()?(this.platformData["platform"]=7,this.platformData["productId"]=a,this.platformData["site"]=t[2],this.platformData["shopId"]=t[3]):"shopee"===e.toLocaleLowerCase()?(this.platformData["platform"]=11,this.platformData["productId"]=a,this.platformData["site"]=t[2],this.platformData["shopId"]=t[3]):"aliexpress"===e.toLocaleLowerCase()?(this.platformData["platform"]=12,this.platformData["productId"]=a):"lazada"===e.toLocaleLowerCase()?(this.platformData["platform"]=9,this.platformData["productId"]=a,this.platformData["site"]=t[2]):"hyjhw"===e.toLocaleLowerCase()?(this.platformData["platform"]=15,this.platformData["productId"]=a,this.platformData["site"]=t[2]):"jx"===e.toLocaleLowerCase()?(this.platformData["platform"]=10,this.platformData["productId"]=a,this.platformData["site"]=t[2]):"crossbroder"===e.toLocaleLowerCase()&&(this.platformData["platform"]=13,this.platformData["productId"]=a,this.platformData["userId"]=t.Length>2?t[2]:"")}catch(i){}},getSelfGoodsPlatform:function(e){var t=5,a="",i=[];try{e.includes("-")&&(i=e.split("-"),t=i[0]),this.getPlatformSimpleStr(t,i)}catch(r){this.platformData["platform"]=t,this.platformData["productId"]=a}},selectAll:function(e,t){var a=this;this[e].length<t.length?(this[e]=[],this[e].push(0),t.map((function(t){a[e].push("logistics"===e?t.ShipId:t.value)}))):this[e]=[],"logistics"===e&&this.setIsCustomShipFee()},changeSelect:function(e,t){(e.includes(0)||e.length!==this[t].length)&&e.includes(0)&&e.length-1<this[t].length&&(this[t]=this[t].filter((function(e){return 0!==e}))),"logistics"===t&&this.setIsCustomShipFee()},setIsCustomShipFee:function(){var e=this;this.isCustomShipFee=this.logistics.some((function(t){return e.logisticsList.some((function(e){return e.ShipId===t&&e.IsCustomShipFee}))}))},openUrl:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1===t)try{r=a.$filters.countryShopeebuyCom(e.country),a.$BaseUtilService.openUrl("".concat(r,"/product/").concat(e.platform_mall_id,"/").concat(e.id))}catch(n){a.$message.error("打开失败")}else 2===t?a.$BaseUtilService.openUrl(e.url):a.$BaseUtilService.openUrl(e);case 1:case"end":return i.stop()}}),i)})))()},changeMallList:function(e){this.selectMallList=e,this.country=e.country},changeMoveMallList:function(e){this.selectMoveMallList=e},handleSelectionChange:function(e){this.multipleSelection=e},moveSelectionChange:function(e){this.moveSelection=e},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}))},handelClose:function(){this.moveSuccess=0,this.movefail=0,this.moveTime=40,this.goodsSize="",this.moveDetails=[],this.moveDetailsData=[]},batchStatus:function(e,t,a){this.$set(e,"batchStatus",t),this.$set(e,"color",a?"green":"red")},moveStatus:function(e,t,a){this.$set(e,"moveStatus",t),this.$set(e,"color",a?"green":"red")},stop:function(){this.$refs.Logs.writeLog("停止操作",!0),Object(d["z"])()},initData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.operationBut=!0,e.isMove=!1,e.isRefurbishProduct=!1,e.percentage=0,e.updateNum=0,e.successNum=0,e.failNum=0,e.flag=!1;case 8:case"end":return t.stop()}}),t)})))()},isHoliday:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={},r=Object(s["a"])(e),a.prev=2,r.s();case 4:if((n=r.n()).done){a.next=24;break}if(o=n.value,i[o.platform_mall_id]){a.next=21;break}return a.next=9,t.$appConfig.temporaryCacheInfo("get","holiday_".concat(o.platform_mall_id));case 9:if(c=a.sent,"{}"!==c){a.next=17;break}return a.next=13,t.$shopeemanService.getUserInfo(o);case 13:l=a.sent,200===l.code&&(o.holiday_mode_on=l.data.holiday_mode_on,t.$appConfig.temporaryCacheInfo("save","holiday_".concat(o.platform_mall_id),l.data.holiday_mode_on),i[o.platform_mall_id]=l.data.holiday_mode_on),a.next=19;break;case 17:o.holiday_mode_on=JSON.parse(c),i[o.platform_mall_id]=JSON.parse(c);case 19:a.next=22;break;case 21:o.holiday_mode_on=i[o.platform_mall_id];case 22:a.next=4;break;case 24:a.next=29;break;case 26:a.prev=26,a.t0=a["catch"](2),r.e(a.t0);case 29:return a.prev=29,r.f(),a.finish(29);case 32:return u=[],e.forEach((function(a){if(a.holiday_mode_on){t.batchStatus(a,"该店铺正处于休假模式"),t.failNum++;var i=100/e.length;t.percentage+=i}else u.push(a)})),a.abrupt("return",u);case 35:case"end":return a.stop()}}),a,null,[[2,26,29,32]])})))()},rowSelection:function(e,t,a){var i=this;t?e.length>0&&this.$nextTick((function(){e.forEach((function(e){i.$refs.plTable.toggleRowSelection([{row:e}])}))})):"{}"!==JSON.stringify(a)&&this.$nextTick((function(){i.$refs.plTable.toggleRowSelection([{row:a,selected:!1}])}))},getRowKey:function(e){return e.id},isJsonString:function(e){if("string"!==typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}},exportTableData:function(){var e,t=this;if(null===(e=this.tableData)||void 0===e||!e.length)return this.$message("暂无数据导出");var a="<tr>\n          <td>站点</td>\n          <td>店铺名</td>\n          <td>主图</td>\n          <td>类目</td>\n          <td>上家类型</td>\n          <td>上家链接</td>\n          <td>itemID</td>\n          <td>itemID链接</td>\n          <td>价格</td>\n          <td>库存</td>\n          <td>标题</td>\n          <td>状态</td>\n          <td>创建时间</td>\n          <td>更新时间</td>\n          <td>销售量</td>\n          <td>访客量</td>\n          <td>粉丝量</td>\n        </td>";this.tableData.forEach((function(e){a+="<tr>\n        <td>".concat(e.country?t.$filters.chineseSite(e.country):"\t","</td>\n        <td>").concat(e.mallName?e.mallName:"\t","</td>\n        <td>").concat(e.images?t.$filters.imageRender([e.images]):"\t","</td>\n        <td>").concat(e.categoryId?t.getCategoryName(e.categoryId,e.country):"\t","</td>\n        <td>").concat(e.platformTypeStr?e.platformTypeStr:"\t","</td>\n        <td>").concat(e.url?e.url:"\t","</td>\n        <td>").concat(e.id?e.id:"\t","</td>\n        <td>").concat(e.id?"".concat(t.$filters.countryShopeebuyCom(e.country),"/product/").concat(e.platform_mall_id,"/").concat(e.id):"\t","</td>\n        <td>").concat(e.price?e.price:"\t","</td>\n        <td>").concat(e.stock?e.stock:"\t","</td>\n        <td>").concat(e.name?e.name:"\t","</td>\n        <td>").concat(e.status?t.statusObj[e.status]:"\t","</td>\n        <td>").concat(e.create_time?t.$dayjs(e.create_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(e.modify_time?t.$dayjs(e.modify_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(e.sold?e.sold:"\t","</td>\n        <td>").concat(e.view_count?e.view_count:"\t","</td>\n        <td>").concat(e.like_count?e.like_count:"\t","</td>\n        </tr>")})),Object(d["j"])("商品列表数据",a)},copy:function(e){var t=document.createElement("div");t.id="tempTarget",t.style.opacity="0",t.innerText=e,document.body.appendChild(t);try{var a=document.createRange();a.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(i){}t.parentElement.removeChild(t)}}},g=h,b=(a("6d5c"),a("2877")),f=Object(b["a"])(g,i,r,!1,null,"6cc4da36",null);t["default"]=f.exports},"744d":function(e,t,a){},8992:function(e,t,a){"use strict";a("4c28")},9772:function(e,t,a){},b0bd:function(e,t,a){"use strict";a("9772")},c12c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contaniner category-mapp"},[a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[e._v("商品重量(kg)：")]),a("el-input",{attrs:{size:"mini"},model:{value:e.goodsSize.weight,callback:function(t){e.$set(e.goodsSize,"weight",t)},expression:"goodsSize.weight"}})],1),a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[e._v("商品长度(cm)：")]),a("el-input",{attrs:{size:"mini"},model:{value:e.goodsSize.long,callback:function(t){e.$set(e.goodsSize,"long",t)},expression:"goodsSize.long"}})],1),a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[e._v("商品宽度(cm)：")]),a("el-input",{attrs:{size:"mini"},model:{value:e.goodsSize.width,callback:function(t){e.$set(e.goodsSize,"width",t)},expression:"goodsSize.width"}})],1),a("div",{staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight",staticStyle:{"margin-right":"5px"}},[e._v("商品高度(cm)：")]),a("el-input",{attrs:{size:"mini"},model:{value:e.goodsSize.height,callback:function(t){e.$set(e.goodsSize,"height",t)},expression:"goodsSize.height"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-evenly",margin:"15px 0"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$emit("goodsSizeChange",e.goodsSize)}}},[e._v("确定")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$emit("goodsSizeChange","")}}},[e._v("取消")])],1)])},r=[],n={name:"goods-size",data:function(){return{goodsSize:{width:"0",height:"0",long:"0",weight:"0"}}}},o=n,s=a("2877"),c=Object(s["a"])(o,i,r,!1,null,"1e5dfb64",null);t["a"]=c.exports},eb09:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category-mapp contaniner"},[a("div",{staticClass:"category_dialog"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"keepRight"},[e._v("店铺站点：")]),e.country?a("div",[e._v(e._s(e._f("chineseSite")(e.country)))]):a("div",[a("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.countryOption,callback:function(t){e.countryOption=t},expression:"countryOption"}},e._l(e.countriesOption,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]),e._l(e.categoryList,(function(t,i){return a("div",{key:i,staticClass:"on_new_dialog_box"},[a("div",{staticClass:"keepRight"},[e._v(e._s(i+1)+"级类目：")]),a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",filterable:""},on:{change:function(t){return e.setCategory(e.categoryAction[i],i)}},model:{value:e.categoryAction[i],callback:function(t){e.$set(e.categoryAction,i,t)},expression:"categoryAction[index]"}},[a("el-option",{attrs:{value:"",label:"全部"}}),e._l(t,(function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name+"("+e.category_cn_name+")",value:e.category_id}})}))],2)],1)}))],2),a("div",{staticClass:"category_box",staticStyle:{"margin-left":"20px"}},[e._m(0),e._l(e.attributesList,(function(t,i){return a("div",{key:i,staticClass:"on_new_dialog_box line_height_28"},[a("div",{staticClass:"width_single_150"},[e._v(e._s(t.attribute_name)+"("+e._s(t.attribute_cn_name)+")")]),a("div",[a("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini",filterable:""},model:{value:t.options,callback:function(a){e.$set(t,"options",a)},expression:"item.options"}},e._l(t.new_options_obj,(function(e){return a("el-option",{key:e.value_id,attrs:{label:e.value,value:e.value_id}})})),1)],1)])}))],2)]),a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-top":"25px","justify-content":"space-evenly"}},[e.mallList[0]?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.confirmCategory(0)}}},[e._v("　刷　新　")]):e._e(),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.confirmCategory()}}},[e._v("　确　定　")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$emit("categoryChange","")}}},[e._v("　取　消　")])],1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"width_single_150"},[e._v("属性名称：")]),a("div",[e._v("属性值"),a("span",{staticStyle:{color:"red"}},[e._v("(必填)")])])])}],n=a("1da1"),o=(a("159b"),a("7db0"),a("b0c0"),a("c740"),a("a434"),a("96cf"),{name:"category-mapping",props:{country:{type:String,default:function(){return""}},goodsCurrent:{type:Object,default:function(){return{}}},mallList:{type:Array,default:function(){return[]}}},data:function(){return{countriesOption:this.$filters.countries_option,countryOption:"TH",categoryAction:[],attributesCurrent:[],categoryList:[],attributesList:[]}},watch:{countryOption:function(e){this.enterCategory()}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.enterCategory();case 2:case"end":return t.stop()}}),t)})))()},methods:{confirmCategory:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,c,l,u,d,p,m,h,g,b,f,v,_,y,x,k,S,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:-1,r=t.country||t.countryOption,n=[],t.categoryList.forEach((function(e,a){var i=e.find((function(e){return e.category_id===t.categoryAction[a]}));i&&n.push(i)})),!(t.goodsCurrent&&i<0)){a.next=17;break}if(o=t.goodsCurrent.originCategoryId||t.goodsCurrent.category_id,s=t.goodsCurrent.platform||t.goodsCurrent.source,!o||!s){a.next=14;break}return c=[],t.attributesList.forEach((function(e){var t=e.new_options_obj.find((function(t){return t.value_id===e.options}));c.push({attributeId:e.attribute_id,attributeName:e.attribute_name,valueId:t.value_id,value:t.value})})),l={relationCategoryId:o,country:t.country,platformId:s,platformCategoryId:n[n.length-1].category_id,categoryAttributes:c},a.next=13,t.$commodityService.saveCategoryRelation(l);case 13:a.sent;case 14:t.$emit("categoryChange",{categoryList:n,attributesList:t.attributesList,country:r||t.countryOption}),a.next=56;break;case 17:return i=i<0?0:i,u=t.mallList[i],d=t.categoryAction[t.categoryAction.length-1],p={mallId:u.platform_mall_id,category_ids:d,brand_status:1,cursor:0,limit:100},a.next=23,t.$shopeemanService.getBrandList(r,p,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 23:if(m=a.sent,h=JSON.parse(m),!(h.status>=200&&h.status<=300)){a.next=54;break}if(g=JSON.parse(h.data),0!==g.code){a.next=51;break}return b=g.data&&g.data.list[0]&&g.data.list[0].brand_list,f=[],b.forEach((function(e){f.push({value:e.name,value_id:e.brand_id})})),v=[{category_id:d,attribute_id:0,is_mandatory:1,attribute_name:"Brand",attribute_cn_name:"品牌",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(f),attribute_label:"",is_key_attribute:1}],a.prev=32,a.next=35,t.$shopeemanService.getAttributeTree(r,p,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 35:_=a.sent,y=JSON.parse(_),x=JSON.parse(y.data),k=x&&x.data&&x.data.list[0]&&x.data.list[0].attribute_tree||[],k.forEach((function(e){var t=[];e.children.forEach((function(e){t.push({value:e.display_name||e.name,value_id:e.value_id})})),v.push({category_id:d,attribute_id:e.attribute_id,is_mandatory:e.mandatory?1:0,attribute_name:e.display_name||e.name,attribute_cn_name:"",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(t),attribute_label:"",is_key_attribute:0})})),a.next=44;break;case 42:a.prev=42,a.t0=a["catch"](32);case 44:return a.prev=44,a.next=47,t.$commodityService.uploadCateGoryAttr(v);case 47:return S=a.sent,w=JSON.parse(S),200===w.code?t.$message.success("同步成功"):t.$message.error("同步失败"),a.finish(44);case 51:t.$emit("categoryChange",""),a.next=56;break;case 54:return a.next=56,t.confirmCategory(++i);case 56:case"end":return a.stop()}}),a,null,[[32,42,44,51]])})))()},getAttribute:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.categoryAction[e.categoryAction.length-1]||e.categoryAction[e.categoryAction.length-2]||"0",i=e.country||e.countryOption,t.next=4,e.$commodityService.getAttributeInfo(i,a);case 4:r=t.sent,n=JSON.parse(r),e.attributesList=[],200===n.code&&(o=n.data&&n.data.attributes||[],o.forEach((function(t){var a=e.attributesCurrent.findIndex((function(e){return e.attribute_id===t.attribute_id})),i=e.attributesCurrent[a]&&e.attributesCurrent[a].value_id||0;t.new_options_obj=t.new_options&&JSON.parse(t.new_options)||[],t.options=a>-1&&parseInt(i)||t.new_options_obj[0]&&t.new_options_obj[0].value_id,e.attributesList.push(t)})),e.attributesCurrent=[]);case 8:case"end":return t.stop()}}),t)})))()},setCategory:function(e,t){this.categoryList.splice(t+1,this.categoryList.length-t),this.categoryAction.splice(t+1,this.categoryAction.length-t),this.enterCategory(e+"",++t)},enterCategory:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,c,l,u,d,p,m,h,g,b,f,v;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.length>0&&void 0!==e[0]?e[0]:"0",r=e.length>1&&void 0!==e[1]?e[1]:0,n=e.length>2&&void 0!==e[2]?e[2]:null,o=e.length>3&&void 0!==e[3]?e[3]:"1",s=t.country||t.countryOption,0!==r||0!==t.attributesCurrent.length){a.next=19;break}if(t.categoryAction=n&&n.categoryIdList||[],!t.goodsCurrent||!t.goodsCurrent.goodsId&&!t.goodsCurrent.goods_id){a.next=19;break}return t.categoryAction=[],u=t.goodsCurrent.originCategoryId||t.goodsCurrent.category_id,d=t.goodsCurrent.platform||t.goodsCurrent.source,a.next=13,t.$commodityService.getCategoryRelation(u,s,d);case 13:p=a.sent,m=JSON.parse(p),t.attributesCurrent=m.data&&m.data.attributes||[],i=(null===m||void 0===m||null===(c=m.data)||void 0===c||null===(l=c.category)||void 0===l?void 0:l.platform_category_id)||i,o="0"===i&&o||0,!o&&t.categoryAction.unshift(i);case 19:if(!i){a.next=47;break}return h=JSON.parse(JSON.stringify(t.categoryList))||[],a.next=23,t.$commodityService.getCategoryTbInfo(s,i,o);case 23:if(g=a.sent,b=JSON.parse(g),200!==b.code){a.next=45;break}if(f=b.data,0!==o){a.next=35;break}return v=(null===f||void 0===f?void 0:f.categories[0].parent_id)||0,v&&t.categoryAction.unshift(v),o=0===v?1:0,a.next=33,t.enterCategory(v+"",0,null,o);case 33:a.next=45;break;case 35:if(!f||!f.categories){a.next=43;break}return h[r]=f.categories,t.categoryList=h,t.categoryAction[r]=t.categoryAction[r]||h[r][0].category_id,a.next=41,t.enterCategory(t.categoryAction[r],++r);case 41:a.next=45;break;case 43:return a.next=45,t.getAttribute();case 45:a.next=49;break;case 47:return a.next=49,t.getAttribute(!0);case 49:case"end":return a.stop()}}),a)})))()}}}),s=o,c=(a("b0bd"),a("2877")),l=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=l.exports},feb6:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"storeChooseUL"},[e.isMall?a("li",[e._v(e._s(e._f("chineseSite")(e.countryVal)))]):a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("所属站点：")]),a("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:e.countryVal,callback:function(t){e.countryVal=t},expression:"countryVal"}},[e.isAll?a("el-option",{attrs:{label:"全部",value:""}}):e._e(),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("店铺分组：")]),a("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groupIdList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})})),1)],1),a("li",{style:e.isReset&&"margin-bottom: 5px"},[a("span",{style:{width:e.spanWidth}},[e._v("店铺名称：")]),a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadmoreMall,expression:"loadmoreMall"}],staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"","filter-method":e.filterMall,size:"mini",filterable:""},on:{"visible-change":function(t){return e.filterMall("")}},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.siteShowList,(function(t,i){return e.showMall(t,i)?a("el-option",{key:i,attrs:{label:t.mall_alias_name||t.platform_mall_name,value:t.platform_mall_id}}):e._e()}))],2)],1),e.isReset?a("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[a("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:e.reset}},[e._v("　刷　　新　")])],1):e._e()])])},r=[],n=a("1da1"),o=a("b85c"),s=a("2909"),c=(a("96cf"),a("d81d"),a("fb6a"),a("caad"),a("2532"),a("d3b7"),a("25f0"),a("99af"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("159b"),a("c740"),a("7db0"),a("7646")),l=a("2b0e");l["default"].directive("loadmore",{bind:function(e,t){var a=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){this.scrollHeight-this.scrollTop<=this.clientHeight+50?t.value(!0,this):this.scrollTop<30&&t.value(!1,this)}))}});var u={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},parentCountry:{type:String,default:"TH"},isMall:{type:Boolean,default:function(){return!1}},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],siteShowList:[],countries:this.$filters.countries_option,mallListAPIInstance:new c["a"](this),isShowName:"",isShowNameAll:!1,showMallNumber:100,mallShowIndex:0,jsonMallData:[],filterMallTime:null}},watch:{siteList:function(e){this.siteShowList=e},countryVal:{handler:function(e,t){this.isShowName="",this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(e,t){var a=this;if(this.isAllowSet2){this.isShowName="",this.isAllowSet2=!1;var i=t.indexOf("")>-1,r=e.indexOf("")>-1;i!==r?this.groupId=r?Object(s["a"])(this.groupIdList.map((function(e){return e.id}))):[]:r?this.groupId=e.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length-1&&this.groupId.unshift(""),setTimeout((function(){a.isAllowSet2=!0,a.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(e,t){var a=this;if(this.isAllowSet1){this.isAllowSet1=!1;var i=this.isShowName,r=t.includes(""),n=e.includes("");if(r!==n||t.toString()===e.toString()&&this.isShowNameAll)if(n&&(!i||i&&!this.isShowNameAll)){var c=i&&Object(s["a"])(this.siteShowList.map((function(e){return e.platform_mall_id})))||[""].concat(Object(s["a"])(this.siteList.map((function(e){return e.platform_mall_id})))),l=new Set([].concat(Object(s["a"])(c),Object(s["a"])(t)));this.site=Object(s["a"])(l),this.isShowNameAll=!0,i&&this.siteList.length===this.site.length&&this.site.unshift("")}else{this.isShowNameAll=!1;var u=[];if(i){var d=i&&Object(s["a"])(this.siteShowList.map((function(e){return e.platform_mall_id}))),p=d.length>this.site.length&&this.site||d,m=d.length>this.site.length&&d||this.site;u=new Set(this.site);var h,g=Object(o["a"])(m);try{for(g.s();!(h=g.n()).done;){var b=h.value;p.includes(b)&&u.delete(b)}}catch(f){g.e(f)}finally{g.f()}u.delete("")}this.site=Object(s["a"])(u)}else n?this.site=e.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length?this.site.unshift(""):this.isShowNameAll=!1;setTimeout((function(){a.changeMallList(),a.filterMall(i),a.isAllowSet1=!0}),10)}},deep:!0}},mounted:function(){this.countryVal=this.isMall?this.parentCountry:this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},ddMallGoodsGetMallList:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.site=[],i=t.countryVal,r=[],!(t.jsonMallData.length>0)){a.next=7;break}r=t.jsonMallData,a.next=12;break;case 7:return a.next=9,t.$appConfig.temporaryCacheInfo("get","mallAllData","");case 9:n=a.sent,r=JSON.parse(n)||[],t.jsonMallData=JSON.parse(n)||[];case 12:if(!(r.length>0)){a.next=17;break}1===e&&(t.siteList=""===i?r:r.filter((function(e){return e.country===i}))),2===e&&(0===t.groupId.length?t.siteList=[]:(t.siteList=[],t.groupId.forEach((function(e){r.forEach((function(a){i?e===a.group_id&&i===a.country&&t.siteList.push(a):e===a.group_id&&t.siteList.push(a)}))})))),a.next=22;break;case 17:return o={country:"",mallGroupIds:""},a.next=20,t.mallListAPIInstance.ddMallGoodsGetMallList(o);case 20:s=a.sent,200===s.code?(t.$appConfig.temporaryCacheInfo("save","mallAllData",s.data),c=s.data||[],t.siteList=c,t.jsonMallData=c,t.siteList=""===i?c:c.filter((function(e){return e.country===i}))):t.$message.error("获取分组、店铺列表失败");case 22:0===t.groupIdList.length&&(t.groupIdList=[{group_name:"全部",id:""}],t.groupId=[""],t.siteList.forEach((function(e){var a=t.groupIdList.findIndex((function(t){return t.id===e.group_id}));e.group_name&&a<0&&(t.groupIdList.push({group_name:e.group_name,id:e.group_id}),t.groupId.push(e.group_id))}))),setTimeout((function(){t.isAllowSet2=!0,t.isAllowSet1=!0,t.site=[""]}),10);case 24:case"end":return a.stop()}}),a)})))()},changeMallList:function(){var e=this,t=[],a="";this.site.forEach((function(i){if(i){var r=e.siteList.find((function(e){return e.platform_mall_id===i}));t.push(r),a+=i+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(a=t.length!==this.siteList.length&&a||""),this.source?this.$emit("changeMallList",{mallList:t,source:this.source,searchAll:a,country:this.countryVal.toLocaleUpperCase()}):(t["country"]=this.countryVal,this.$emit("changeMallList",t))},filterMall:function(e){var t=this,a=e&&this.isShowName!==e?1e3:100;this.filterMallTime&&(clearTimeout(this.filterMallTime),this.filterMallTime=null),this.filterMallTime=setTimeout((function(){t.isShowName!==e&&(t.mallShowIndex=0),t.isShowName=e||"";var a=t.siteList;e&&(a=t.siteList.filter((function(t){var a=t.mall_alias_name||t.platform_mall_name;return a.includes(e)}))),t.siteShowList=a}),a)},showMall:function(e,t){var a=e.mall_alias_name||e.platform_mall_name,i=this.site[0]===e.platform_mall_id;return i||this.mallShowIndex<=t&&t<=this.mallShowIndex+this.showMallNumber&&(!this.isShowName||a.includes(this.isShowName))},loadmoreMall:function(e,t){if(this.siteShowList.length>this.showMallNumber){var a=0;e?(a=this.mallShowIndex+10,a=a<this.siteShowList.length-this.showMallNumber&&a||this.siteShowList.length-this.showMallNumber):(a=this.mallShowIndex-10,a=a>0&&a||0),a!==this.mallShowIndex&&(t.scrollTop=e?t.scrollTop-100:30),this.mallShowIndex=a}}}},d=u,p=(a("8992"),a("2877")),m=Object(p["a"])(d,i,r,!1,null,null,null);t["a"]=m.exports}}]);