(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-728126b0"],{"2fd9":function(e,t,r){"use strict";r("ac90")},ac90:function(e,t,r){},f9db:function(e,t,r){"use strict";r.r(t);var a=r("1da1"),n=(r("a9e3"),r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),r("159b"),r("99af"),r("4de4"),r("96cf"),r("d4ec")),s=r("bee2"),o=function(){function e(t){Object(n.a)(this,e),this._this=t}var t,r,o,i,c,u,d,l,p;return Object(s.a)(e,[{key:"addSharedInventory",value:(p=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.addSharedInventory",t);case 3:if(r=e.sent,r=JSON.parse(JSON.parse(r).data),200===Number(r.code))return e.abrupt("return",{code:200});e.next=7;break;case 7:return e.abrupt("return",{code:Number(r.code),data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"修改共享库存库存异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return p.apply(this,arguments)})},{key:"overseasWh",value:(l=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("overseasWh",t);case 3:if("null"!==(r=e.sent))return r=JSON.parse(r),e.abrupt("return",{code:200,data:r.warehouse_name});e.next=7;break;case 7:return e.abrupt("return",{code:200,data:""});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"获取海外仓库中文名异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return l.apply(this,arguments)})},{key:"delSharedInventory",value:(d=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.delSharedInventory",t);case 3:if(r=e.sent,r=JSON.parse(JSON.parse(r).data),200===Number(r.code))return e.abrupt("return",{code:200,data:r.data});e.next=7;break;case 7:return e.abrupt("return",{code:Number(r.code),data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"撤销共享库存异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return d.apply(this,arguments)})},{key:"delbindUser",value:(u=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.delbindUser",t);case 3:if(r=e.sent,r=JSON.parse(JSON.parse(r).data),200===Number(r.code))return e.abrupt("return",{code:200,data:r.data});e.next=7;break;case 7:return e.abrupt("return",{code:Number(r.code),data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"删除绑定用户异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return u.apply(this,arguments)})},{key:"addSharedBindUser",value:(c=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.addSharedBindUser",t);case 3:if(r=e.sent,r=JSON.parse(JSON.parse(r).data),200===Number(r.code))return e.abrupt("return",{code:200,data:r.data});e.next=7;break;case 7:return e.abrupt("return",{code:Number(r.code),data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"添加绑定用户异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return c.apply(this,arguments)})},{key:"getBindUser",value:(i=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.getBindUser",t);case 3:if(r=e.sent,r=JSON.parse(JSON.parse(r).data),200===Number(r.code))return e.abrupt("return",{code:200,data:r.data});e.next=7;break;case 7:return e.abrupt("return",{code:Number(r.code),data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"查询平台用户异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return i.apply(this,arguments)})},{key:"getSharedUserList",value:(o=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.getSharedUserList",t);case 3:if(r=e.sent,r=JSON.parse(JSON.parse(r).data),200===Number(r.code))return e.abrupt("return",{code:200,data:r.data});e.next=7;break;case 7:return e.abrupt("return",{code:Number(r.code),data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"查看绑定用户异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return o.apply(this,arguments)})},{key:"stockSharedList",value:(r=Object(a.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$XzyNetMessageService.post("xzy.stockSharedList",t);case 3:if(r=e.sent,200===(r=JSON.parse(JSON.parse(r).data)).code)return e.abrupt("return",{code:200,data:r.data});e.next=7;break;case 7:return e.abrupt("return",{code:r.code,data:"".concat(r.message)});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"获取我共享的库存列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return r.apply(this,arguments)})},{key:"getOverseasWarehouse",value:(t=Object(a.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._this.$appConfig.getGlobalCacheInfo("allWh","");case 3:if(t=e.sent,null!=(t=this.isJsonString(t))&&t.length)return e.abrupt("return",{code:200,data:t});e.next=7;break;case 7:return e.abrupt("return",{code:201,data:"仓库列表为空"});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:-2,data:"获取仓库列表异常： ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return t.apply(this,arguments)})},{key:"isJsonString",value:function(e){if("string"!=typeof e)return e;try{return JSON.parse(e),JSON.parse(e)}catch(t){return e}}}]),e}(),i=r("0e0b"),c={data:function(){return{isShowLoading:!1,sharedUserLoading:!1,addBindUserLoading:!1,sharedUserVisible:!1,bindUserVisible:!1,editSharedVisible:!1,ShareBroadStock:new o(this),total:0,pageSize:30,page:1,tableData:[],multipleSelection:[],widList:[],sharedUserData:[],shareTockData:{},sharedNum:"",sharedId:"",form:{wid:"0",sys_sku_id:"",status:""},platformUserFrom:{username:"",platform_ids:""},addBindUserFrom:{shared_id:"",userList:[]},delBindUserFrom:{shared_id:"",app_uid_list:[]},platformList:[{value:"1",label:"莱赞"},{value:"2",label:"ShopeeMan"},{value:"14",label:"店梯货代"}],statusList:[{value:1,label:"正常"},{value:2,label:"已完成"},{value:3,label:"弃用"}],statusObj:{1:"正常",2:"已完成",3:"弃用"},platformObj:{1:"莱赞",2:"ShopeeMan",14:"店梯货代"},colorObj:{1:"green",3:"red"}}},mounted:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getOverseasWarehouse();case 2:return t.next=4,e.stockSharedList();case 4:case"end":return t.stop()}}),t)})))()},methods:{addSharedInventory:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shareTockData.shared_num){t.next=2;break}return t.abrupt("return",e.$message("请输入共享库数"));case 2:if(Number(e.shareTockData.shared_num)>Number(e.shareTockData.stock_num))return t.abrupt("return",e.$message("共享库存数不能大于可用库存数"));t.next=4;break;case 4:return(r={}).wid=e.shareTockData.wid,r.shared_num=e.shareTockData.shared_num,r.sys_sku_id=e.shareTockData.sys_sku_id,t.next=10,e.ShareBroadStock.addSharedInventory(r);case 10:200===(r=t.sent).code?(e.$message.success("修改共享库存成功"),e.editSharedVisible=!1,e.stockSharedList()):e.$message.error(r.data);case 12:case"end":return t.stop()}}),t)})))()},editSharedInventory:function(e){this.editSharedVisible=!0,this.sharedNum="",this.shareTockData=e.stock},openUrl:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$BaseUtilService.openUrl(e);case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),t.$message.error("打开链接【".concat(e,"】失败"));case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},delSharedInventory:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.id,n=e.wid,(s={}).shared_id=a,s.wid=n,r.next=6,t.ShareBroadStock.delSharedInventory(s);case 6:200===(s=r.sent).code?(t.$message.success("撤销成功"),t.stockSharedList()):t.$message.error(s.data);case 8:case"end":return r.stop()}}),r)})))()},delbindUser:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.delBindUserFrom.app_uid_list=[],a=e.app_uid,n=e.platform_id,s=e.username,s={app_uid:a,platform_id:n,username:s},t.delBindUserFrom.shared_id=t.sharedId,t.delBindUserFrom.app_uid_list.push(s),r.next=7,t.ShareBroadStock.delbindUser(t.delBindUserFrom);case 7:200===(s=r.sent).code?(t.$message.success("删除成功"),t.getSharedUserList(t.sharedId)):t.$message.error(s.data);case 9:case"end":return r.stop()}}),r)})))()},bindUser:function(e){this.bindUserVisible=!0,this.addBindUserFrom.shared_id=e.id},addSharedBindUser:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.addBindUserFrom.userList=[],e.platformUserFrom.platform_ids){t.next=3;break}return t.abrupt("return",e.$message("请先选择共享平台"));case 3:if(e.platformUserFrom.username){t.next=5;break}return t.abrupt("return",e.$message("请输入用户名称"));case 5:return e.addBindUserLoading=!0,t.next=8,e.ShareBroadStock.getBindUser(e.platformUserFrom);case 8:if(200!==(r=t.sent).code){t.next=22;break}if(0<(null===(a=r.data)||void 0===a?void 0:a.length))return n={app_uid:r.data[0].app_uid,platform_id:e.platformUserFrom.platform_ids,username:e.platformUserFrom.username},e.addBindUserFrom.userList.push(n),t.next=15,e.ShareBroadStock.addSharedBindUser(e.addBindUserFrom);t.next=19;break;case 15:200===(n=t.sent).code?e.$message.success("绑定成功"):e.$message.error(n.data),t.next=20;break;case 19:e.$message("未查询到用户");case 20:t.next=23;break;case 22:e.$message.error(r.data);case 23:e.addBindUserLoading=!1;case 24:case"end":return t.stop()}}),t)})))()},getSharedUserList:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.sharedUserVisible=!0,t.sharedUserLoading=!0,t.sharedId=e,a={shared_id:e},r.next=6,t.ShareBroadStock.getSharedUserList(a);case 6:200===(a=r.sent).code?t.sharedUserData=a.data:t.$message.error(a.data),t.sharedUserLoading=!1;case 9:case"end":return r.stop()}}),r)})))()},stockSharedList:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,e.form.page=e.page,e.form.page_num=e.pageSize,t.next=5,e.ShareBroadStock.stockSharedList(e.form);case 5:if(200!==(r=t.sent).code){t.next=21;break}e.tableData=r.data.data,e.total=r.data.total,a=0;case 10:if(a<e.tableData.length)return n=e.tableData[a],t.next=14,e.ShareBroadStock.overseasWh(n.wid);t.next=19;break;case 14:200===(s=t.sent).code?e.$set(n,"warehouse_name",s.data):e.$set(n,"warehouse_name","");case 16:a++,t.next=10;break;case 19:t.next=22;break;case 21:e.$message.error(r.data);case 22:e.isShowLoading=!1;case 23:case"end":return t.stop()}}),t)})))()},getOverseasWarehouse:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Map,t.next=3,e.ShareBroadStock.getOverseasWarehouse();case 3:200===(a=t.sent).code?a.data.forEach((function(t){e.widList=e.widList.concat(t.child)})):e.$message.error(a.data),e.widList=e.widList.filter((function(e){return!r.has(e.id)&&r.set(e.id,1)}));case 6:case"end":return t.stop()}}),t)})))()},exportTableData:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r,n,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.total)return t.abrupt("return",e.$message("暂无导出数据"));t.next=2;break;case 2:e.isShowLoading=!0,r=[],(n=e.form).page_num=200,n.page=1;case 7:if(r.length<e.total)return t.next=10,e.ShareBroadStock.stockSharedList(n);t.next=22;break;case 10:if(200!==(s=t.sent).code){t.next=17;break}s.data.data.forEach(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ShareBroadStock.overseasWh(a.wid);case 2:200===(n=t.sent).code?a.warehouse_name=n.data:a.warehouse_name="",r.push(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.page++,t.next=20;break;case 17:return e.$message.error("导出数据错误",s.data),e.isShowLoading=!1,t.abrupt("break",22);case 20:t.next=7;break;case 22:o="<tr>\n          <td>仓库名称</td>\n          <td>系统商品编号</td>\n          <td>商品编号</td>\n          <td>商品名称</td>\n          <td>商品规格</td>\n          <td>状态</td>\n          <td>共享库存</td>\n          <td>可使用库存</td>\n          <td>商品单价(RMB)</td>\n          <td>商品图片</td>\n          <td>商品链接</td>\n        </td>",r.forEach(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o+="<tr>\n        <td>".concat(r.warehouse_name||"\t","</td>\n        <td>").concat(r.sys_sku_id||"\t","</td>\n        <td style=\"mso-number-format:'@';\">").concat(r.stock&&r.stock.sku_id?r.stock.sku_id:"\t","</td>\n        <td>").concat(r.stock&&r.stock.goods_name?r.stock.goods_name:"\t","</td>\n        <td>").concat(r.stock&&r.stock.sku_name?r.stock.sku_name:"\t","</td>\n        <td>").concat(e.statusObj[r.status]||"\t","</td>\n        <td>").concat(r.shared_num||"\t","</td>\n        <td>").concat(r.consume_num||"\t","</td>\n        <td>").concat(r.stock&&r.stock.sku_price?r.stock.sku_price/100:"\t","</td>\n        <td>").concat(r.stock.sku_image||r.stock.real_image_url+"\t","</td>\n         <td>").concat(r.stock&&r.stock.sku_url?r.stock.sku_url:"\t","</td>\n        </tr>");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.isShowLoading=!1,Object(i.h)("海外共享库存管理数据",o);case 26:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.stockSharedList()},handleCurrentChange:function(e){this.page=e,this.stockSharedList()},handleSelectionChange:function(e){this.multipleSelection=e},bindUserClose:function(){this.platformUserFrom.username="",this.platformUserFrom.platform_ids="",this.addBindUserFrom.shared_id=""}}};r("2fd9"),r=r("2877"),c=Object(r.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"contaniner"},[r("el-row",{staticClass:"header"},[r("ul",[r("li",[r("span",[e._v("仓库名称：")]),r("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.wid,callback:function(t){e.$set(e.form,"wid",t)},expression:"form.wid"}},[r("el-option",{attrs:{value:"0",label:"全部"}}),e._l(e.widList,(function(e,t){return r("el-option",{key:t,attrs:{value:e.id,label:e.warehouse_name}})}))],2)],1),r("li",{staticClass:"status"},[r("span",[e._v("商品状态：")]),r("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-option",{attrs:{value:"",label:"全部"}}),e._l(e.statusList,(function(e,t){return r("el-option",{key:t,attrs:{value:e.value,label:e.label}})}))],2)],1),r("li",[r("span",[e._v("系统商品编号：")]),r("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.sys_sku_id,callback:function(t){e.$set(e.form,"sys_sku_id",t)},expression:"form.sys_sku_id"}})],1),r("li",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.stockSharedList()}}},[e._v("搜 索")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportTableData}},[e._v("导出数据")])],1)])]),r("el-row",{attrs:{id:"article"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],ref:"plTable",attrs:{height:"calc(100vh - 160px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),r("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),r("el-table-column",{attrs:{label:"仓库名称",align:"center","min-width":"130",prop:"warehouse_name"}}),r("el-table-column",{attrs:{prop:"sys_sku_id",label:"系统商品编号","min-width":"120",align:"center"}}),r("el-table-column",{attrs:{label:"商品编号(SkuId)",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.stock&&t.stock.sku_id?t.stock.sku_id:"")+" ")]}}])}),r("el-table-column",{attrs:{label:"商品名称",align:"center","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.stock&&t.stock.goods_name?t.stock.goods_name:"")+" ")]}}])}),r("el-table-column",{attrs:{label:"商品规格",align:"center","min-width":"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.stock&&t.stock.sku_name?t.stock.sku_name:"")+" ")]}}])}),r("el-table-column",{attrs:{prop:"status",label:"状态",align:"center","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[r("span",{style:e.colorObj[t.status]&&"color:"+e.colorObj[t.status]},[e._v(e._s(t.status?e.statusObj[t.status]:""))])]}}])}),r("el-table-column",{attrs:{prop:"shared_num",label:"共享库存",align:"center","min-width":"70"}}),r("el-table-column",{attrs:{prop:"consume_num",label:"可使用库存",align:"center","min-width":"80"}}),r("el-table-column",{attrs:{"min-width":"130",align:"center",label:"商品链接"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.stock.sku_url?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openUrl(a.stock.sku_url)}}},[e._v("查看商品链接")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"商品单价(RMB)",align:"center","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.stock&&t.stock.sku_price?t.stock.sku_price/100:"")+" ")]}}])}),r("el-table-column",{attrs:{width:"80",align:"center",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[t.stock.sku_image||t.stock.real_image_url?r("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t.stock.sku_image||t.stock.real_image_url}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),r("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.stock.sku_image||t.stock.real_image_url}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),r("el-table-column",{attrs:{label:"绑定用户",align:"center","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.getSharedUserList(a.id)}}},[e._v("查看绑定用户")])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","min-width":"260",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1===a.status?r("div",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.bindUser(a)}}},[e._v("绑定用户")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editSharedInventory(a)}}},[e._v("修改库存")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.delSharedInventory(a)}}},[e._v("撤 销")])],1):e._e()]}}])})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{staticClass:"shared-user-dialog",attrs:{title:"共享库存绑定用户",visible:e.sharedUserVisible,width:"550px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.sharedUserVisible=t}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.sharedUserLoading,expression:"sharedUserLoading"}],attrs:{height:"420",data:e.sharedUserData,"header-cell-style":{backgroundColor:"#f5f7fa"},"row-style":{color:"black",height:"50px"}}},[r("el-table-column",{attrs:{width:"50",align:"center",type:"index",label:"序号"}}),r("el-table-column",{attrs:{prop:"platform_id",width:"150",align:"center",label:"平台名称"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.platform_id?e.platformObj[t.platform_id]:"")+" ")]}}])}),r("el-table-column",{attrs:{width:"150",align:"center",label:"用户名称",prop:"username"}}),r("el-table-column",{attrs:{width:"150",align:"center",label:"操作",prop:"sku_id"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.delbindUser(a)}}},[e._v("删除用户")])]}}])})],1)],1),r("el-dialog",{staticClass:"bind-user-dialog",attrs:{title:"添加共享库存绑定用户",visible:e.bindUserVisible,width:"300px","show-close":!e.addBindUserLoading,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.bindUserVisible=t},close:e.bindUserClose}},[r("ul",[r("li",{staticStyle:{"margin-bottom":"15px"}},[r("span",[e._v("共享平台：")]),r("el-select",{attrs:{size:"mini",filterable:""},model:{value:e.platformUserFrom.platform_ids,callback:function(t){e.$set(e.platformUserFrom,"platform_ids",t)},expression:"platformUserFrom.platform_ids"}},[r("el-option",{attrs:{value:"",label:"请选择平台"}}),e._l(e.platformList,(function(e,t){return r("el-option",{key:t,attrs:{value:e.value,label:e.label}})}))],2)],1),r("li",{staticStyle:{"margin-bottom":"15px"}},[r("span",[e._v("用户名称：")]),r("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.platformUserFrom.username,callback:function(t){e.$set(e.platformUserFrom,"username",t)},expression:"platformUserFrom.username"}})],1),r("li",[r("el-button",{attrs:{type:"primary",size:"mini",loading:e.addBindUserLoading},on:{click:e.addSharedBindUser}},[e._v("添 加")])],1)])]),r("el-dialog",{staticClass:"edit-storck-dialog",attrs:{visible:e.editSharedVisible,width:"300px",title:"修改共享库存"},on:{"update:visible":function(t){e.editSharedVisible=t}}},[r("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[r("el-form-item",{attrs:{label:"商品名称："}},[e._v(" "+e._s(e.shareTockData.goods_name)+" ")]),r("el-form-item",{attrs:{label:"商品规格："}},[e._v(" "+e._s(e.shareTockData.sku_name)+" ")]),r("el-form-item",{attrs:{label:"skuid："}},[e._v(" "+e._s(e.shareTockData.sku_id)+" ")]),r("el-form-item",{attrs:{label:"可用库存："}},[e._v(" "+e._s(e.shareTockData.stock_num)+" ")]),r("el-form-item",{attrs:{label:"共享库存："}},[r("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,0)",clearable:""},model:{value:e.shareTockData.shared_num,callback:function(t){e.$set(e.shareTockData,"shared_num",t)},expression:"shareTockData.shared_num"}})],1),r("div",{staticClass:"footer"},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addSharedInventory}},[e._v("确 定")])],1)],1)],1)],1)}),[],!1,null,"31b5aea2",null);t.default=c.exports}}]);