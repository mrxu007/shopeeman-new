(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5d838942"],{"05e3":function(t,e,a){"use strict";var o=a("1da1"),r=(a("96cf"),a("a9e3"),{name:"CategoryChoose",props:{isSelect:{type:Boolean,default:!1},spanWidth:{type:String,default:""},isAll:{type:Boolean,default:!1},isCategoryAll:{type:Boolean,default:!0},level:{type:Number,default:3},isColumn:{type:Boolean,default:!1}},data:function(){return{countryVal:null,countries:this.$filters.countries_option,countries_id:{TH:"4",MY:"5",TW:"3",SG:"1",PH:"7",VN:"6",ID:"2",BR:"8",MX:"9",CO:"10",CL:"11",PL:"12"},category1:"",categoryList1:[],category2:"",categoryList2:[],category3:"",categoryList3:[],categoryList:[]}},watch:{countryVal:{handler:function(t,e){this.category1="",this.category2="",this.category3="",this.categoryList1=[],this.categoryList2=[],this.categoryList3=[],this.getCategory(t,0)},deep:!0},category1:function(t,e){this.category2="",this.category3="",this.categoryList2=[],this.categoryList3=[],this.sendParent()},category2:function(t,e){this.category3="",this.categoryList3=[],this.sendParent()}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{chageSite:function(t){this.countryVal=t},getCategory:function(t,e){var a=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a.countryVal){o.next=3;break}return a.sendParent(),o.abrupt("return");case 3:if(a.level===e)return a.sendParent(),o.abrupt("return");o.next=6;break;case 6:if(0===e||t){o.next=11;break}return a["category".concat(e+1)]="",a["categoryList".concat(e+1)]=[],a.sendParent(),o.abrupt("return");case 11:return n=[a.countryVal,0!==e?t&&""!==t?t:"":"0","1","tbCategory"],o.next=14,a.$commodityService.getCategory(n);case 14:if(r=o.sent){o.next=17;break}return o.abrupt("return",a.$message.warning("获取失败"));case 17:if(200!==(n=JSON.parse(r)).code){o.next=23;break}(n=n.data).categories&&(a["categoryList".concat(e+1)]=n.categories||[]),o.next=24;break;case 23:return o.abrupt("return",a.$message.warning("获取失败"));case 24:a.sendParent();case 25:case"end":return o.stop()}}),o)})))()},sendParent:function(){var t;this.categoryList=[],this.category1&&(t=[this.category1],this.categoryList=t),this.category1&&this.category2&&(t=[this.category1,this.category2],this.categoryList=t),this.category1&&this.category2&&this.category3&&(e=[this.category1,this.category2,this.category3],this.categoryList=e);var e={country:this.countryVal,categoryFirst:this.category1,categorySecond:this.category2,categoryThird:this.category3,categoryList:this.categoryList,platformId:this.countries_id[this.countryVal]};this.$emit("setCategory",e)}}});a("c79a"),a=a("2877"),r=Object(a.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{class:["category-content",{"category-column":!0===t.isColumn}]},[a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("站点：")]),a("el-select",{attrs:{size:"mini",filterable:"",disabled:t.isSelect},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("一级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,1)}},model:{value:t.category1,callback:function(e){t.category1=e},expression:"category1"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList1,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1),3===t.level||2===t.level?a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("二级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,2)}},model:{value:t.category2,callback:function(e){t.category2=e},expression:"category2"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList2,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1):t._e(),3===t.level?a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("三级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,3)}},model:{value:t.category3,callback:function(e){t.category3=e},expression:"category3"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList3,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1):t._e()])])}),[],!1,null,"65cef3da",null);e.a=r.exports},"590c":function(t,e,a){"use strict";a("b8a0")},b8a0:function(t,e,a){},c79a:function(t,e,a){"use strict";a("eb7d")},d9bc:function(t,e,a){"use strict";a.r(e);var o=a("1da1"),r=(a("ac1f"),a("1276"),a("99af"),a("96cf"),a("05e3")),n=a("0e0b");r={components:{CategoryChoose:r.a},data:function(){return{tableData:[],country:"",platformId:"4",categoryFirst:"",categorySecond:"",tableLoading:!1,currentPage:1,total:0,pageSize:100}},mounted:function(){this.getKeyWord()},methods:{setCategory:function(t){this.country=t.country,this.platformId=t.platformId,this.categoryFirst=t.categoryFirst,this.categorySecond=t.categorySecond},getKeyWord:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={platform_id:t.platformId,cat_id_1:t.categoryFirst,cat_id_2:t.categorySecond},t.tableLoading=!0,e.next=4,t.$commodityService.getKeyWord(a);case 4:a=e.sent;try{o=JSON.parse(a),t.tableData=o.data,t.total=o.data.length}catch(e){t.$message.error("热搜词列表请求失败")}finally{t.tableLoading=!1}case 6:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(t){this.currentPage=t,this.searchTableList()},handleSizeChange:function(t){this.pageSize=t,this.searchTableList()},exportData:function(){if(!this.tableData.length)return this.$message.warning("没有可导出的数据");for(var t=1,e="<tr>\n              <td>编号</td>\n              <td>站点</td>\n              <td>一级类目</td>\n              <td>二级类目</td>\n              <td>热搜词分类类目</td>\n              <td>热搜词名称</td>\n              <td>产品数</td>\n              <td>更新时间</td>\n              <td>近30天销量</td>\n            </tr>",a=0;a<this.tableData.length;a++){var o=this.tableData[a],r=o.display_path&&o.display_path.split(">")[0]&&"".concat(o.display_path.split(">")[0],"(").concat(o.display_path_cn.split(">")[0],")")||"",i=o.display_path&&o.display_path.split(">")[1]&&"".concat(o.display_path.split(">")[1],"(").concat(o.display_path_cn.split(">")[1],")")||"";e+="<tr><td>".concat(t++,"</td>\n                    <td>").concat(this.$filters.chineseSite(o.platform_id)+"\t","</td>\n                    <td>").concat(r+"\t","</td>\n                    <td>").concat(i+"\t","</td>\n                    <td>").concat(i+"\t","</td>\n                    <td>").concat(o.hotKeywords[0]&&o.hotKeywords[0].keyword_name||"\t","</td>\n                    <td>").concat(o.hotKeywords[0]&&o.hotKeywords[0].total_count||"0\t","</td>\n                    <td>").concat(Object(n.f)(1e3*o.update_time,"yyyy-MM-dd")+"\t","</td>\n                    <td>").concat(o.hotKeywords[0]&&o.hotKeywords[0].keyword_month_sales||"0\t","</td>\n                </tr>")}Object(n.h)("热搜词推荐",e)}}},a("590c"),a=a("2877"),r=Object(a.a)(r,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticClass:"product-put-on-hot-word"},[e("div",{staticClass:"category-choose-box"},[e("category-choose",{attrs:{level:2},on:{setCategory:t.setCategory}}),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.getKeyWord}},[t._v("查询")]),e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.exportData}},[t._v("导出")])],1),e("div",{staticClass:"content"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{"row-style":{height:"50px"},data:t.tableData,"tooltip-effect":"dark",height:"calc(100vh - 120px)"}},[e("el-table-column",{attrs:{align:"center",type:"index",label:"序号","min-width":"50",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),e("el-table-column",{attrs:{"min-width":"80px",label:"站点",prop:"country",align:"center",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("chineseSite")(e.row.platform_id)))]}}])}),e("el-table-column",{attrs:{"min-width":"150px",label:"一级类目","show-overflow-tooltip":"",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.display_path.split(">")[0])+"("+t._s(e.row.display_path_cn.split(">")[0])+")")]}}])}),e("el-table-column",{attrs:{"min-width":"150px",label:"二级类目","show-overflow-tooltip":"",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.display_path.split(">")[1]&&e.row.display_path.split(">")[1]+"("+e.row.display_path_cn.split(">")[1]+")"||""))]}}])}),e("el-table-column",{attrs:{"min-width":"150px",label:"热搜词分类类目","show-overflow-tooltip":"",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.display_path.split(">")[1]&&e.row.display_path.split(">")[1]+"("+e.row.display_path_cn.split(">")[1]+")"||""))]}}])}),e("el-table-column",{attrs:{"min-width":"100px",label:"热搜词名称","show-overflow-tooltip":"",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.hotKeywords[0]&&e.row.hotKeywords[0].keyword_name||""))]}}])}),e("el-table-column",{attrs:{"min-width":"100px",label:"产品数","show-overflow-tooltip":"",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.hotKeywords[0]&&e.row.hotKeywords[0].total_count||""))]}}])}),e("el-table-column",{attrs:{"min-width":"100px",label:"更新时间","show-overflow-tooltip":"",prop:"created_at",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$dayjs(1e3*e.row.update_time).format("YYYY-MM-DD")))]}}])}),e("el-table-column",{attrs:{"min-width":"100px",label:"近30天销量","show-overflow-tooltip":"",prop:"warehouse_name",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.hotKeywords[0]&&e.row.hotKeywords[0].keyword_month_sales||""))]}}])})],1)],1)])}),[],!1,null,"2e057387",null);e.default=r.exports},eb7d:function(t,e,a){}}]);