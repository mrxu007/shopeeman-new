(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6869b74d"],{"05e3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{class:["category-content",{"category-column":!0===t.isColumn}]},[a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("站点：")]),a("el-select",{attrs:{size:"mini",filterable:"",disabled:t.isSelect},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("一级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,1)}},model:{value:t.category1,callback:function(e){t.category1=e},expression:"category1"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList1,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1),3===t.level||2===t.level?a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("二级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,2)}},model:{value:t.category2,callback:function(e){t.category2=e},expression:"category2"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList2,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1):t._e(),3===t.level?a("li",{class:[{"column-item":!0===t.isColumn}]},[a("span",{style:{width:t.spanWidth}},[t._v("三级类目：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},on:{change:function(e){return t.getCategory(e,3)}},model:{value:t.category3,callback:function(e){t.category3=e},expression:"category3"}},[t.isCategoryAll?a("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.categoryList3,(function(t,e){return a("el-option",{key:e,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})}))],2)],1):t._e()])])},i=[],r=a("1da1"),o=(a("96cf"),a("a9e3"),{name:"CategoryChoose",props:{isSelect:{type:Boolean,default:!1},spanWidth:{type:String,default:""},isAll:{type:Boolean,default:!1},isCategoryAll:{type:Boolean,default:!0},level:{type:Number,default:3},isColumn:{type:Boolean,default:!1}},data:function(){return{countryVal:null,countries:this.$filters.countries_option,countries_id:{TH:"4",MY:"5",TW:"3",SG:"1",PH:"7",VN:"6",ID:"2",BR:"8",MX:"9",CO:"10",CL:"11",PL:"12"},category1:"",categoryList1:[],category2:"",categoryList2:[],category3:"",categoryList3:[],categoryList:[]}},watch:{countryVal:{handler:function(t,e){this.category1="",this.category2="",this.category3="",this.categoryList1=[],this.categoryList2=[],this.categoryList3=[],this.getCategory(t,0)},deep:!0},category1:function(t,e){this.category2="",this.category3="",this.categoryList2=[],this.categoryList3=[],this.sendParent()},category2:function(t,e){this.category3="",this.categoryList3=[],this.sendParent()}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{chageSite:function(t){this.countryVal=t},getCategory:function(t,e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.countryVal){n.next=3;break}return a.sendParent(),n.abrupt("return");case 3:if(a.level!==e){n.next=6;break}return a.sendParent(),n.abrupt("return");case 6:if(0===e||t){n.next=11;break}return a["category".concat(e+1)]="",a["categoryList".concat(e+1)]=[],a.sendParent(),n.abrupt("return");case 11:return i=[a.countryVal,0!==e?t&&""!==t?t:"":"0","1","tbCategory"],n.next=14,a.$commodityService.getCategory(i);case 14:if(r=n.sent,r){n.next=17;break}return n.abrupt("return",a.$message.warning("获取失败"));case 17:if(o=JSON.parse(r),200!==o.code){n.next=23;break}s=o.data,s.categories&&(a["categoryList".concat(e+1)]=s.categories||[]),n.next=24;break;case 23:return n.abrupt("return",a.$message.warning("获取失败"));case 24:a.sendParent();case 25:case"end":return n.stop()}}),n)})))()},sendParent:function(){if(this.categoryList=[],this.category1){var t=[this.category1];this.categoryList=t}if(this.category1&&this.category2){var e=[this.category1,this.category2];this.categoryList=e}if(this.category1&&this.category2&&this.category3){var a=[this.category1,this.category2,this.category3];this.categoryList=a}var n={country:this.countryVal,categoryFirst:this.category1,categorySecond:this.category2,categoryThird:this.category3,categoryList:this.categoryList,platformId:this.countries_id[this.countryVal]};this.$emit("setCategory",n)}}}),s=o,c=(a("5bef"),a("2877")),l=Object(c["a"])(s,n,i,!1,null,"56c5a0e3",null);e["a"]=l.exports},"3c6e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-put-on-popular-selection"},[a("div",{staticClass:"category-choose-box"},[a("category-choose",{attrs:{level:3},on:{setCategory:t.setCategory}}),a("div",{staticClass:"conditions-box"},[a("span",[t._v("出货地点：")]),a("el-select",{attrs:{placeholder:"",value:"",size:"mini",filterable:""},model:{value:t.deliveryPlace,callback:function(e){t.deliveryPlace=e},expression:"deliveryPlace"}},t._l(t.deliveryPlaceList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"conditions-box"},[a("span",[t._v("店铺类型：")]),a("el-select",{attrs:{placeholder:"",value:"",size:"mini",filterable:""},model:{value:t.shopType,callback:function(e){t.shopType=e},expression:"shopType"}},t._l(t.shopTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"conditions-box"},[a("span",[t._v("排行：")]),a("el-select",{attrs:{placeholder:"",value:"",size:"mini",filterable:""},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}},t._l(t.sortByList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{staticClass:"conditions-box conditions-input"},[a("span",[t._v("月销量：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.minSales,callback:function(e){t.minSales=e},expression:"minSales"}}),a("div",{staticStyle:{width:"6px",height:"1px",background:"#111",margin:"0 5px"}}),a("el-input",{attrs:{size:"mini"},model:{value:t.maxSales,callback:function(e){t.maxSales=e},expression:"maxSales"}})],1),a("div",{staticClass:"conditions-box conditions-input"},[a("span",[t._v("新增点赞数：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.minGive,callback:function(e){t.minGive=e},expression:"minGive"}}),a("div",{staticStyle:{width:"6px",height:"1px",background:"#111",margin:"0 5px"}}),a("el-input",{attrs:{size:"mini"},model:{value:t.maxGive,callback:function(e){t.maxGive=e},expression:"maxGive"}})],1),a("div",{staticClass:"conditions-box conditions-input"},[a("span",[t._v("新增评论数：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.minComments,callback:function(e){t.minComments=e},expression:"minComments"}}),a("div",{staticStyle:{width:"6px",height:"1px",background:"#111",margin:"0 5px"}}),a("el-input",{attrs:{size:"mini"},model:{value:t.maxComments,callback:function(e){t.maxComments=e},expression:"maxComments"}})],1),a("div",{staticClass:"conditions-box conditions-input"},[a("span",[t._v("价格区间(当地币种)：")]),a("el-input",{attrs:{size:"mini"},model:{value:t.minPrice,callback:function(e){t.minPrice=e},expression:"minPrice"}}),a("div",{staticStyle:{width:"6px",height:"1px",background:"#111",margin:"0 5px"}}),a("el-input",{attrs:{size:"mini"},model:{value:t.maxPrice,callback:function(e){t.maxPrice=e},expression:"maxPrice"}})],1),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary"},on:{click:t.searchShopeeHotGoods}},[t._v("查询")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini"},on:{click:t.exportData}},[t._v("导出")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary"},on:{click:t.fasterToken}},[t._v("一键采集商品")]),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary"},on:{click:t.watchDBData}},[t._v("查看电霸数据")])],1),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{data:t.tableData,"tooltip-effect":"dark",height:"calc(100vh - 150px)"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.currentPage-1)*t.pageSize+e.$index+1))]}}])}),a("el-table-column",{attrs:{width:"120px",label:"站点",prop:"country",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("chineseSite")(e.row.platform)))]}}])}),a("el-table-column",{attrs:{width:"120px",label:"商品ID",prop:"country",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.itemid))]}}])}),a("el-table-column",{attrs:{width:"100px",label:"商品图片",prop:"country",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{src:t._f("imageRender")([e.row.platform,e.row.shopid,e.row.image]),"preview-src-list":t._f("imageRender")([e.row.platform,e.row.shopid,e.row.image,1])}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])]}}])}),a("el-table-column",{attrs:{"min-width":"60px",label:"商品名称",prop:"country",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),a("el-table-column",{attrs:{width:"100px",label:"官方店铺",prop:"country",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.is_official_shop?"是":"否"))]}}])}),a("el-table-column",{attrs:{"min-width":"60px",label:"一级类目",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cat_path.split(">")[0])+"("+t._s(e.row.display_path_cn.split(">")[0])+") ")]}}])}),a("el-table-column",{attrs:{"min-width":"70px",label:"二级类目",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cat_path.split(">")[1]&&e.row.cat_path.split(">")[1]+"("+e.row.display_path_cn.split(">")[1]+")"||"")+" ")]}}])}),a("el-table-column",{attrs:{"min-width":"80px",label:"三级类目",prop:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cat_path.split(">")[2]&&e.row.cat_path.split(">")[2]+"("+e.row.display_path_cn.split(">")[2]+")"||"")+" ")]}}])}),a("el-table-column",{attrs:{width:"100px",label:"创建时间",prop:"created_at",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$dayjs(1e3*e.row.ctime).format("YYYY-MM-DD")))]}}])}),a("el-table-column",{attrs:{width:"100px",label:"近30天销量",prop:"warehouse_name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sold||"")+" ")]}}])}),a("el-table-column",{attrs:{width:"80px",label:"价格",prop:"warehouse_name",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.price||""))]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1)])},i=[],r=a("1da1"),o=(a("96cf"),a("159b"),a("99af"),a("d3b7"),a("25f0"),a("ac1f"),a("1276"),a("b0c0"),a("05e3")),s=a("0e0b"),c=a("d4ec"),l=a("bee2"),u=function(){function t(e){Object(c["a"])(this,t),this._this=e}return Object(l["a"])(t,[{key:"tokenDianBdata",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=e,t.next=4,this._this.$shopeemanService.getChineseLaiZan("http://open.dianba6.com/?",a,{headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-CN,zh;q=0.9","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36"}});case 4:return t.sent,t.abrupt("return",{code:des.code,data:des.data,message:des.message});case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"refreshAccessToken-catch: ".concat(t.t0)});case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),p={components:{CategoryChoose:o["a"]},data:function(){return{popularSelectionApiInstance:new u(this),tableData:[],country:"",platformId:0,categoryFirst:"",categorySecond:"",categoryThird:"",tableLoading:!1,deliveryPlaceList:[{label:"本地",value:"-1"},{label:"海外",value:"-2"}],shopTypeList:[{label:"全部",value:"2"},{label:"官方",value:"1"},{label:"非官方",value:"0"}],sortByList:[{label:"飙升",value:"1"},{label:"热门",value:"2"}],currentPage:1,total:0,pageSize:20,deliveryPlace:"-1",shopType:"2",sortBy:"1",minSales:0,maxSales:1e3,minGive:0,maxGive:1e3,minComments:0,maxComments:1e3,minPrice:0,maxPrice:1e3}},mounted:function(){},methods:{fasterToken:function(){var t=[];this.tableData.forEach((function(e){var a="https://xiapi.xiapibuy.com/product/".concat(e.shopid,"/").concat(e.itemid);t.push(a)})),this.$message.success("链接添加成功，请手动点击采集！")},watchDBData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$appConfig.getUserInfo();case 2:return a=e.sent,n={uid:a.muid,phone:a.Phone,time:Date.parse(new Date).toString().substr(0,10),sign:""},e.next=6,window.BaseUtilBridgeService.getDianBaDataSign(n.time).then((function(t){n.sign=t}));case 6:window.BaseUtilBridgeService.openUrl("http://open.dianba6.com/?uid="+n.uid+"&mobile="+n.phone+"&platform=shopee&time="+n.time+"&invite_code=Wr38mSR3&version=1.0&sign="+n.sign+"&app_key=dbyEOmrAqF7unG2Mxj5L");case 7:case"end":return e.stop()}}),e)})))()},setCategory:function(t){this.country=t.country,this.platformId=t.platformId,this.categoryFirst=t.categoryFirst,this.categorySecond=t.categorySecond,this.categoryThird=t.categoryThird},searchShopeeHotGoods:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,o,s,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.minPrice+"_"+t.maxPrice,n=t.minSales+"_"+t.maxSales,i=t.minGive+"_"+t.maxGive,r=t.minComments+"_"+t.maxComments,o=(t.categoryThird?3:t.categorySecond&&2)||t.categoryFirst&&1||"",s=t.categoryThird||t.categorySecond||t.categoryFirst||"",c={page:t.currentPage+"",page_size:t.pageSize+"",platform_id:t.platformId+"",cat_id:s+"",level:o+"",price:a,month_sales:n,increment_like_count:i,increment_item_rating:r,location:t.deliveryPlace,shopType:t.shopType,sortBy:t.sortBy},t.tableLoading=!0,e.prev=9,e.next=12,t.$commodityService.searchShopeeHotGoods(c);case 12:l=e.sent,u=JSON.parse(l),t.tableData=u,t.total=3e3,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](9),t.$message.error("获取爆款选品列表失败");case 21:return e.prev=21,t.tableLoading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[9,18,21,24]])})))()},exportData:function(){if(!this.tableData.length)return this.$message.warning("没有可导出的数据");for(var t=1,e="<tr>\n              <td>编号</td>\n              <td>站点</td>\n              <td>商品ID</td>\n              <td>商品图片</td>\n              <td>商品名称</td>\n              <td>官方店铺</td>\n              <td>一级类目</td>\n              <td>二级类目</td>\n              <td>三级类目</td>\n              <td>创建时间</td>\n              <td>近30天销量</td>\n              <td>价格</td>\n            </tr>",a=0;a<this.tableData.length;a++){var n=this.tableData[a],i=n.cat_path&&n.cat_path.split(">")[0]&&"".concat(n.cat_path.split(">")[0],"(").concat(n.display_path_cn.split(">")[0],")")||"",r=n.cat_path&&n.cat_path.split(">")[1]&&"".concat(n.cat_path.split(">")[1],"(").concat(n.display_path_cn.split(">")[1],")")||"",o=n.cat_path&&n.cat_path.split(">")[2]&&"".concat(n.cat_path.split(">")[2],"(").concat(n.display_path_cn.split(">")[2],")")||"";e+="<tr><td>".concat(t++,"</td>\n                    <td>").concat(this.$filters.chineseSite(n.platform)+"\t","</td>\n                    <td>").concat((n.itemid||"")+"\t","</td>\n                    <td>").concat(this.$filters.imageRender([n.platform,n.shopid,n.image])+"\t","</td>\n                    <td>").concat(n.name+"\t","</td>\n                    <td>").concat((n.is_official_shop?"是":"否")+"\t","</td>\n                    <td>").concat(i+"\t","</td>\n                    <td>").concat(r+"\t","</td>\n                    <td>").concat(o+"\t","</td>\n                    <td>").concat(Object(s["g"])(1e3*n.ctime,"yyyy-MM-dd")+"\t","</td>\n                    <td>").concat(n.sold||"0\t","</td>\n                    <td>").concat(n.price||"0\t","</td>\n                </tr>")}Object(s["i"])("爆款选品",e)},handleCurrentChange:function(t){this.currentPage=t,this.searchShopeeHotGoods()},handleSizeChange:function(t){this.pageSize=t,this.searchShopeeHotGoods()}}},d=p,m=(a("7b7d"),a("2877")),h=Object(m["a"])(d,n,i,!1,null,null,null);e["default"]=h.exports},"5bef":function(t,e,a){"use strict";a("829a")},"79d2":function(t,e,a){},"7b7d":function(t,e,a){"use strict";a("79d2")},"829a":function(t,e,a){}}]);