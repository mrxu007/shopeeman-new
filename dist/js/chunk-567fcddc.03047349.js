(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-567fcddc"],{"1e45":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CatchNoticeSignForPackage"},[a("div",{staticClass:"search"},[a("div",{staticClass:"rowOne"},[a("div",{staticClass:"signingTime"},[e._v("签收时间："),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.form.selectTime,callback:function(t){e.$set(e.form,"selectTime",t)},expression:"form.selectTime"}})],1),a("div",{staticClass:"logisticsNumber"},[e._v(" 采购物流单号： "),a("el-input",{attrs:{size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.packageCode,callback:function(t){e.$set(e.form,"packageCode",t)},expression:"form.packageCode"}})],1),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.getExceptionNoOrderIndex}},[e._v("搜索")])],1),a("div",{staticClass:"rowTwo"},[e._v("说       明：包裹已签收，但是匹配不到订单，仓库无法发货，需及时匹配订单，此界面只显示近7天的数据包裹异常数据")]),a("div",{staticClass:"rowThree"},[e._v("操作指引：请在此界面手动标记订单号或者在【订单列表】右键【同步此订单】获取订单信息")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.buttonStatus.getList,expression:"buttonStatus.getList"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#f5f7fa"},data:e.tableData,height:"calc(100vh - 135px)"}},[a("el-table-column",{attrs:{type:"index",label:"序列号",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:"仓库",prop:"warehouse_name","min-width":"100",align:"center"}}),a("el-table-column",{attrs:{prop:"package_time",label:"签收时间","min-width":"140",align:"center"}}),a("el-table-column",{attrs:{label:"包裹图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.package_image?a("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t.row.package_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.row.package_image}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"package_code",label:"采购物流单号","min-width":"140",align:"center"}}),a("el-table-column",{attrs:{label:"操作","min-width":"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.markMyOrderHandle(t.row)}}},[e._v("标记为我的订单")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.applyReturnPartsHandle(t.row)}}},[e._v("申请退件")])]}}])})],1),a("el-dialog",{attrs:{title:"标记为我的订单",visible:e.markMyOrderDialogFormVisible,width:"300px"},on:{"update:visible":function(t){e.markMyOrderDialogFormVisible=t}}},[a("span",{staticStyle:{color:"red","margin-left":"17px"}},[e._v("温馨提示：请填写子订单号")]),a("el-form",{attrs:{model:e.markMyOrderDialogForm,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"订单编号:"}},[a("el-input",{staticStyle:{width:"165px"},attrs:{autocomplete:"off",size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.markMyOrderDialogForm.orderSn,callback:function(t){e.$set(e.markMyOrderDialogForm,"orderSn",t)},expression:"markMyOrderDialogForm.orderSn"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.markMyOrderDialogHandle}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"填写退件信息",visible:e.applyDialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.applyDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.applyForm,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"包裹号:"}},[a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.applyForm.lists[0].packageCode))])]),a("el-form-item",{attrs:{label:"收件人:"}},[a("el-input",{staticStyle:{width:"178px"},attrs:{size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnContact,callback:function(t){e.$set(e.applyForm,"returnContact",t)},expression:"applyForm.returnContact"}})],1),a("el-form-item",{attrs:{label:"联系电话:"}},[a("el-input",{staticStyle:{width:"178px"},attrs:{size:"mini",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnPhoneNumber,callback:function(t){e.$set(e.applyForm,"returnPhoneNumber",t)},expression:"applyForm.returnPhoneNumber"}})],1),a("el-form-item",{attrs:{label:"退件地区:"}},[a("el-cascader",{ref:"refTbCate",attrs:{props:e.props,clearable:"",size:"mini"},on:{change:e.targetCate},model:{value:e.applyRegion,callback:function(t){e.applyRegion=t},expression:"applyRegion"}})],1),a("el-form-item",{attrs:{label:"详细地址:"}},[a("el-input",{attrs:{type:"textarea",resize:"none",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnAddress,callback:function(t){e.$set(e.applyForm,"returnAddress",t)},expression:"applyForm.returnAddress"}})],1),a("el-form-item",{attrs:{label:"退件备注:"}},[a("el-input",{attrs:{type:"textarea",resize:"none",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.applyForm.returnRemarks,callback:function(t){e.$set(e.applyForm,"returnRemarks",t)},expression:"applyForm.returnRemarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.saveLoading,type:"primary",size:"mini"},on:{click:e.applyDialogHandle}},[e._v("保存")])],1)],1)],1)},n=[],i=a("1da1"),o=(a("96cf"),a("d81d"),a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b64b"),a("99af"),a("4d90"),a("0e0b"),{data:function(){return{saveLoading:!1,props:{lazy:!0,that:this,lazyLoad:function(e,t){var a=this,r=e.level;setTimeout(Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=[],0!==r){n.next=8;break}return n.next=4,a.that.$BaseUtilService.getPddAddressModel("0");case 4:o=n.sent,i=o.map((function(e){return e.label=e.RegionName,e.leaf=e.RegionType>=3,e.value=e.RegionId,e})),n.next=12;break;case 8:return n.next=10,a.that.$BaseUtilService.getPddAddressModel(e.value);case 10:l=n.sent,i=l.map((function(e){return e.label=e.RegionName,e.leaf=e.RegionType>=3,e.value=e.RegionId,e}));case 12:t(i||[]);case 13:case"end":return n.stop()}}),n)}))),1e3)}},form:{packageCode:"",selectTime:[(new Date).getTime()-6048e5,new Date]},markMyOrderDialogFormVisible:!1,markMyOrderDialogForm:{id:"",orderSn:""},applyDialogFormVisible:!1,applyForm:{lists:[{gpcId:0,packageCode:""}],returnContact:"",returnPhoneNumber:"",returnAddress:"",returnRemarks:""},applyRegion:[],tableData:[],buttonStatus:{getList:!1},selectCateFinally:""}},mounted:function(){this.getExceptionNoOrderIndex()},methods:{targetCate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.length>0&&(t.selectCateFinally="",r=t.$refs.refTbCate.getCheckedNodes()[0],n={},r.pathLabels.map((function(e){n[e]||(n[e]="1")})),t.applyForm.returnAddress=Object.keys(n).toString().replace(/,/g,""));case 1:case"end":return a.stop()}}),a)})))()},getExceptionNoOrderIndex:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.selectTime){t.next=3;break}return e.$message.error("请先选择时间"),t.abrupt("return");case 3:if(!e.buttonStatus.getList){t.next=5;break}return t.abrupt("return");case 5:return e.buttonStatus.getList=!0,a=e.formatSearch(e.form.selectTime[0]),r=e.formatSearch(e.form.selectTime[1]),n=e.form.packageCode,i={},a&&r&&(i["packageTime"]="".concat(a,"/").concat(r)),n&&(i["packageCode"]=n),t.next=14,e.$api.getExceptionNoOrderIndex(i);case 14:o=t.sent,200===o.data.code?e.tableData=o.data.data.data:e.$message.error(o.data.message),e.buttonStatus.getList=!1;case 17:case"end":return t.stop()}}),t)})))()},markMyOrderHandle:function(e){this.markMyOrderDialogForm={id:"",orderSn:""},this.markMyOrderDialogForm.id=e.id,this.markMyOrderDialogFormVisible=!0},markMyOrderDialogHandle:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.markPackageToMy(e.markMyOrderDialogForm);case 2:a=t.sent,200===a.data.code?(e.markMyOrderDialogFormVisible=!1,e.$message({message:"标记成功",type:"success"}),e.getExceptionNoOrderIndex()):e.$message.error(a.data.message);case 5:case"end":return t.stop()}}),t)})))()},applyDialogHandle:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.applyForm.returnContact){t.next=3;break}return e.$message.error("收件人不能为空"),t.abrupt("return");case 3:if(e.applyForm.returnPhoneNumber){t.next=5;break}return t.abrupt("return",e.$message.error("联系电话不能为空"));case 5:if(e.applyRegion&&e.applyRegion.length){t.next=7;break}return t.abrupt("return",e.$message.error("退件地区不能为空"));case 7:if(e.applyForm.returnAddress){t.next=9;break}return t.abrupt("return",e.$message.error("详细地址不能为空"));case 9:if(e.applyForm.returnRemarks){t.next=11;break}return t.abrupt("return",e.$message.error("退件备注不能为空"));case 11:return e.saveLoading=!0,t.next=14,e.$api.applicationForreJection(e.applyForm);case 14:a=t.sent,200===a.data.code?(e.applyDialogFormVisible=!1,e.$message({message:"申请退件成功",type:"success"})):(r=a.data.data[0],r=r.substring(r.indexOf(":")+1),e.$message.error(r)),e.saveLoading=!1;case 17:case"end":return t.stop()}}),t)})))()},applyReturnPartsHandle:function(e){this.applyForm.lists=[],this.applyForm.lists.push({gpcId:e.id,packageCode:e.package_code}),this.applyForm["returnPhoneNumber"]="",this.applyForm["returnContact"]="",this.applyForm["returnRemarks"]="",this.applyForm["returnAddress"]="",this.applyRegion=[],this.applyDialogFormVisible=!0},formatSearch:function(e){var t=new Date(e),a=t.getFullYear(),r=(t.getMonth()+1+"").padStart(2,0),n=(t.getDate()+"").padStart(2,0),i=(t.getHours()+"").padStart(2,0),o=(t.getMinutes()+"").padStart(2,0),l=(t.getSeconds()+"").padStart(2,0),s="".concat(a,"-").concat(r,"-").concat(n," ").concat(i,":").concat(o,":").concat(l);return s}}}),l=o,s=(a("c599"),a("2877")),c=Object(s["a"])(l,r,n,!1,null,"66dd520d",null);t["default"]=c.exports},ad6c:function(e,t,a){},c599:function(e,t,a){"use strict";a("ad6c")}}]);