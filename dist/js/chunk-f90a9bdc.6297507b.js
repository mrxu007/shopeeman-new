(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f90a9bdc"],{"4c28":function(t,e,i){},"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}},"73da":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"contaniner"},[i("el-row",{staticClass:"header"},[i("ul",{staticStyle:{"margin-bottom":"10px"}},[i("storeChoose",{on:{changeMallList:t.changeMallList}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.isFold=!t.isFold}}},[t._v(t._s(t.isFold?"折叠":"展开"))])],1),t.isFold?i("ul",{staticStyle:{"margin-bottom":"5px"}},[i("li",{staticClass:"data"},[i("div",{staticClass:"base-box"},[i("span",{staticClass:"base-title"},[t._v("商品数据相关")]),i("div",{staticClass:"base-item"},[i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("li",{staticClass:"data-input"},[i("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[i("el-form-item",{attrs:{label:"销售量："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.soldMin,callback:function(e){t.soldMin=e},expression:"soldMin"}}),t._v("- "),i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.soldMax,callback:function(e){t.soldMax=e},expression:"soldMax"}})],1),i("el-form-item",{attrs:{label:"访客量："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.viewMin,callback:function(e){t.viewMin=e},expression:"viewMin"}}),t._v("- "),i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.viewMax,callback:function(e){t.viewMax=e},expression:"viewMax"}})],1),i("el-form-item",{attrs:{label:"粉丝量："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.likeMin,callback:function(e){t.likeMin=e},expression:"likeMin"}}),t._v("- "),i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.likeMax,callback:function(e){t.likeMax=e},expression:"likeMax"}})],1),i("el-form-item",{attrs:{label:"价格："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.priceMin,callback:function(e){t.priceMin=e},expression:"priceMin"}}),t._v("- "),i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.priceMax,callback:function(e){t.priceMax=e},expression:"priceMax"}})],1),i("el-form-item",{attrs:{label:"商品数量："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.goodsMin,callback:function(e){t.goodsMin=e},expression:"goodsMin"}}),t._v("- "),i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.goodsMax,callback:function(e){t.goodsMax=e},expression:"goodsMax"}})],1)],1)],1),i("li",[i("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[i("el-form-item",{attrs:{label:"是否售空："}},[i("el-select",{attrs:{size:"mini",filterable:"",disabled:t.operationBut},model:{value:t.sellStatus,callback:function(e){t.sellStatus=e},expression:"sellStatus"}},[i("el-option",{attrs:{value:0,label:"全部"}}),t._l(t.sellStatusList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),i("el-form-item",{attrs:{label:"商品状态："}},[i("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"goodsStatus")}},model:{value:t.goodsStatus,callback:function(e){t.goodsStatus=e},expression:"goodsStatus"}},[i("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("goodsStatus",t.goodsStatusList)}}}),t._l(t.goodsStatusList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),i("el-form-item",{attrs:{label:"上家来源："}},[i("el-select",{attrs:{disabled:t.operationBut,size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"source")}},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}},[i("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("source",t.sourceList)}}}),t._l(t.sourceList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.value,label:t.label}})}))],2)],1),i("el-form-item",{attrs:{label:"更新时间："}},[i("el-date-picker",{attrs:{disabled:t.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.modifyTime,callback:function(e){t.modifyTime=e},expression:"modifyTime"}})],1),i("el-form-item",{attrs:{label:"创建时间："}},[i("el-date-picker",{attrs:{disabled:t.operationBut,"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}})],1)],1)],1)]),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("li",[i("el-checkbox",{staticStyle:{"margin-right":"3px"},model:{value:t.productNumChecked,callback:function(e){t.productNumChecked=e},expression:"productNumChecked"}},[t._v("单店查询商品数量")]),i("el-input",{staticStyle:{width:"105px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productNum,callback:function(e){t.productNum=e},expression:"productNum"}})],1),i("li",{staticClass:"data-goods"},[i("el-input",{staticClass:"input-with-select",attrs:{size:"mini",oninput:"value=value.replace(/\\s+/g,'')",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("el-select",{attrs:{slot:"prepend"},slot:"prepend",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchTypeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1)]),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{staticStyle:{"margin-right":"3px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.editCategory=!1,t.categoryVisible=!0}}},[t._v("选择类目")]),i("el-input",{staticStyle:{width:"455px"},attrs:{disabled:!0,size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.categoryName,callback:function(e){t.categoryName=e},expression:"categoryName"}})],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=100,t.queryData()}}},[t._v("一键查询100小时以上无流量商品")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=200,t.queryData()}}},[t._v("一键查询200小时以上无流量商品")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut}},[t._v("商品一键翻新1")])],1),i("ul",[i("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("同步上家库存1")]),i("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("商品搬迁1")]),i("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("批量确认")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.queryType=1,t.queryData()}}},[t._v("查询数据")]),i("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}},[t._v("隐藏日志")])],1)])])]),i("li",{staticClass:"operation"},[i("div",{staticClass:"base-box"},[i("span",{staticClass:"base-title"},[t._v("操作选项")]),i("div",{staticClass:"base-item"},[i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchDelete")}}},[t._v("批量删除")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.operation("batchUpDownProduct"),t.upDown=!0}}},[t._v("批量下架")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchTitle")}}},[t._v("批量编辑标题")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.operationBut},on:{click:function(e){t.flag=!0}}},[t._v("取消操作")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchCategory")}}},[t._v("批量修改类目属性")])],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.sourceVisible=!0}}},[t._v("货源查找")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){t.operation("batchUpDownProduct"),t.upDown=!1}}},[t._v("批量上架")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:function(e){return t.operation("batchDescription")}}},[t._v("批量编辑描述")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:t.exportTableData}},[t._v("导出数据")]),i("el-button",{attrs:{type:"primary",size:"mini",disabled:t.operationBut},on:{click:t.queryBanned}},[t._v("一键查询禁卖商品")])],1),i("ul",[i("li",{staticClass:"operation-input"},[i("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[i("el-form-item",{attrs:{label:"商品库存："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productStock,callback:function(e){t.productStock=e},expression:"productStock"}})],1),i("el-form-item",{attrs:{label:"商品价格："}},[i("el-input",{staticClass:"mini-input",attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productPrice1,callback:function(e){t.productPrice1=e},expression:"productPrice1"}}),t._v(" % + "),i("el-input",{staticClass:"mini-input",attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productPrice2,callback:function(e){t.productPrice2=e},expression:"productPrice2"}})],1),i("el-form-item",{attrs:{label:"发货天数："}},[i("el-input",{attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productDay,callback:function(e){t.productDay=e},expression:"productDay"}})],1),i("el-form-item",{attrs:{label:"物流方式："}},[i("el-select",{attrs:{size:"mini",filterable:"",multiple:"","collapse-tags":""},on:{change:function(e){return t.changeSelect(e,"logistics")}},model:{value:t.logistics,callback:function(e){t.logistics=e},expression:"logistics"}},[i("el-option",{attrs:{value:0,label:"全部"},nativeOn:{click:function(e){return t.selectAll("logistics",t.logisticsList)}}}),t._l(t.logisticsList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.ShipId,label:t.ShipName}})}))],2)],1),i("el-form-item",{attrs:{label:"商品重量："}},[i("el-input",{staticStyle:{width:"102px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productWeight,callback:function(e){t.productWeight=e},expression:"productWeight"}}),i("span",{staticClass:"red-span",staticStyle:{"margin-left":"3px"}},[t._v("kg")])],1),i("div",{staticStyle:{"line-height":"31px"}},[i("el-radio",{attrs:{label:1},model:{value:t.freightRadio,callback:function(e){t.freightRadio=e},expression:"freightRadio"}},[t._v("免运")]),i("el-radio",{attrs:{label:2},model:{value:t.freightRadio,callback:function(e){t.freightRadio=e},expression:"freightRadio"}},[t._v("运费由买家承担")])],1),i("el-form-item",{attrs:{label:"商品尺寸："}},[i("el-input",{staticClass:"mini-input item",attrs:{size:"mini",placeholder:"长",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productLength,callback:function(e){t.productLength=e},expression:"productLength"}}),t._v("* "),i("el-input",{staticClass:"mini-input item",attrs:{size:"mini",placeholder:"宽",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productWidth,callback:function(e){t.productWidth=e},expression:"productWidth"}}),t._v("* "),i("el-input",{staticClass:"mini-input item",attrs:{size:"mini",placeholder:"高",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.productHeight,callback:function(e){t.productHeight=e},expression:"productHeight"}})],1)],1)],1),i("li",{staticClass:"operation-but"},[i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchStock")}}},[t._v("批量更新库存")]),i("span",{staticClass:"red-span"},[t._v("（0，表示库存设置为0）")])],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchPrice")}}},[t._v("批量更新价格")]),i("span",{staticClass:"red-span"},[t._v("（加价公式：原价+原价*百分比+数值）")])],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchDay")}}},[t._v("批量更新天数")]),i("span",{staticClass:"red-span"},[t._v("（最长30天）")])],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[t.isCustomShipFee?i("el-popover",{attrs:{placement:"right",width:"320",trigger:"click"}},[i("div",[t._l(t.logistics,(function(e,a){return i("div",{key:a},t._l(t.logisticsList,(function(a,r){return i("div",{key:r},[a.ShipId===e&&!0===a.IsCustomShipFee?i("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[i("span",{staticStyle:{"line-height":"24px","margin-right":"10px"}},[t._v(t._s(a.ShipName))]),i("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:a.CustomShipFee,callback:function(e){t.$set(a,"CustomShipFee",e)},expression:"item2.CustomShipFee"}})],1):t._e()])})),0)})),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchLogistics")}}},[t._v("确 定")])],1)],2),i("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[t._v("批量更新物流方式")])],1):t._e(),t.isCustomShipFee?t._e():i("el-button",{attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchLogistics")}},slot:"reference"},[t._v("批量更新物流方式")]),i("span",{staticClass:"red-span"},[t._v("（请先至商家后台开启对应物流方式）")])],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchWeight")}}},[t._v("批量更新重量")]),i("span",{staticClass:"red-span"},[t._v("（必须大于0kg）")])],1),i("ul",{staticStyle:{"margin-bottom":"3px"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchFreight")}}},[t._v("批量更新运费")]),i("span",{staticClass:"red-span"},[t._v("（只能更改当前商品已开启的物流）")])],1),i("ul",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.operation("batchSize")}}},[t._v("批量修改商品尺寸")])],1)])])])])]),i("li",{staticClass:"progress"},[i("div",{staticClass:"base-box"},[i("span",{staticClass:"base-title"},[t._v("操作进度相关")]),i("div",{staticClass:"base-item"},[i("ul",[i("el-progress",{staticStyle:{width:"230px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:t.percentage,status:"success"}})],1),i("ul",[i("li",[i("el-form",{attrs:{"label-position":"right","label-width":"60px"}},[i("el-form-item",{attrs:{label:"查询数量："}},[t._v(" "+t._s(t.queryNum)+" ")]),i("el-form-item",{attrs:{label:"更新数量："}},[t._v(" "+t._s(t.updateNum)+" ")]),i("el-form-item",{attrs:{label:"成功数量："}},[t._v(" "+t._s(t.successNum)+" ")]),i("el-form-item",{attrs:{label:"失败数量："}},[t._v(" "+t._s(t.failNum)+" ")])],1)],1)])])])])]):t._e(),t.isFold?i("ul",[i("span",{staticClass:"red-span"},[t._v("说明：库存公式：设置后的库存 = 原库存 +（填写的库存）；如果填写的库存为零将会把商品的库存置为0； 价格公式：设置后的价格 = 原价 +（原价*填写的百分比）+（填写的价格）")])]):t._e()]),i("el-row",{attrs:{id:"article"}},[i("u-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isShowLoading,expression:"isShowLoading"}],ref:"plTable",attrs:{data:t.tableData,"use-virtual":"",height:420,"row-height":68,"data-changes-scroll-top":!1,border:!1,"header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":t.handleSelectionChange}},[i("u-table-column",{attrs:{align:"center",type:"selection",label:"序号",width:"50"}}),i("u-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),i("u-table-column",{attrs:{align:"center","min-width":"80",label:"站点"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t._f("chineseSite")(i.country))+" ")]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"150",label:"类目",prop:"categoryName","show-overflow-tooltip":""}}),i("u-table-column",{attrs:{align:"center","min-width":"120",label:"店铺名",prop:"mallName","show-overflow-tooltip":""}}),i("u-table-column",{attrs:{align:"center","min-width":"100",label:"主图"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.images?i("el-tooltip",{staticStyle:{width:"50px",height:"50px"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t._f("imageRender")([a.country,a.platform_mall_id,a.images])}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),i("span",{staticClass:"dot"},[t._v("...")])])])],1),i("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t._f("imageRender")([a.country,a.platform_mall_id,a.images])}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"}),i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),i("span",{staticClass:"dot"},[t._v("...")])])])],1):t._e()]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"100",label:"上家类型",prop:"platformTypeStr"}}),i("u-table-column",{attrs:{align:"center","min-width":"150",label:"上家链接"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(a,2)}}},[t._v(" "+t._s(a.productId)+" ")]),a.productId?i("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(a.productId)}}},[i("i",{staticClass:"el-icon-document-copy"})]):t._e()]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"120",label:"itemID"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{staticClass:"green-span",on:{click:function(e){return t.openUrl(a,1)}}},[t._v(" "+t._s(a.id)+" ")]),a.id?i("span",{staticClass:"copyIcon",on:{click:function(e){return t.copy(a.id)}}},[i("i",{staticClass:"el-icon-document-copy"})]):t._e()]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"80",label:"价格",prop:"price",sortable:""}}),i("u-table-column",{attrs:{align:"center","min-width":"80",label:"库存",prop:"stock",sortable:""}}),i("u-table-column",{attrs:{align:"center","min-width":"150",label:"标题",prop:"name","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{staticClass:"red-span",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.viewDetails(a)}}},[t._v(t._s(a.name))])]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"100",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{style:a.status&&"color:"+t.statusColor[a.status]},[t._v(t._s(t.statusObj[a.status]))])]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"150",label:"创建时间",prop:"create_time"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t.$dayjs(i.create_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"150",label:"更新时间",prop:"modify_time"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t.$dayjs(i.modify_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),i("u-table-column",{attrs:{align:"center","min-width":"100",label:"销售量",prop:"sold",sortable:""}}),i("u-table-column",{attrs:{align:"center","min-width":"100",label:"访客量",prop:"view_count",sortable:""}}),i("u-table-column",{attrs:{align:"center","min-width":"100",label:"粉丝量",prop:"like_count",sortable:""}}),i("u-table-column",{attrs:{align:"center","min-width":"120",label:"操作状态","show-overflow-tooltip":"",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{style:a.color&&"color:"+a.color},[t._v(t._s(a.batchStatus))])]}}])})],1)],1),i("div",{staticClass:"logging"},[i("Logs",{ref:"Logs",attrs:{clear:""},model:{value:t.showConsole,callback:function(e){t.showConsole=e},expression:"showConsole"}})],1),t.categoryVisible?i("el-dialog",{staticClass:"category-dialog",attrs:{title:"类目映射",visible:t.categoryVisible,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.categoryVisible=e}}},[t.categoryVisible?i("categoryMapping",{attrs:{country:t.country,"mall-list":t.selectMallList},on:{categoryChange:t.categoryChange}}):t._e()],1):t._e(),i("el-dialog",{staticClass:"title-dialog",attrs:{title:"批量编辑标题",visible:t.titleVisible,width:"600px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.titleVisible=e}}},[i("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[i("el-form-item",{attrs:{label:"编辑类型："}},[i("div",[i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v("新标题直接填入")])]),i("el-radio",{attrs:{label:1},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新标题")])],1),i("el-radio",{attrs:{label:2},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新增关键词/标题前")]),i("el-radio",{attrs:{label:3},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("新增关键词/标题后")]),i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v("需要删除多个热搜词/关键词，请以英文';'间隔!")])]),i("el-radio",{attrs:{label:4},model:{value:t.titleRadio,callback:function(e){t.titleRadio=e},expression:"titleRadio"}},[t._v("删除关键词")])],1)],1)]),i("el-form-item",{attrs:{label:"新标题/关键字："}},[i("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:t.titleVal,callback:function(e){t.titleVal=e},expression:"titleVal"}})],1)],1),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editProduct("setTitle")}}},[t._v("保 存")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.titleVisible=!1}}},[t._v("关 闭")])],1)],1),i("el-dialog",{staticClass:"get-description-dialog",attrs:{title:"获取描述模板",visible:t.getDescriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.getDescriptionVisible=e}}},[i("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[i("el-form-item",{attrs:{label:"描述："}},[i("div",[i("el-radio",{attrs:{label:1},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("新增关键词/描述前")]),i("el-radio",{attrs:{label:2},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("新增关键词/描述后")]),i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[t._v("需要删除多个关键词，请以英文';'间隔!")])]),i("el-radio",{attrs:{label:3},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("删除关键词")])],1),i("el-radio",{attrs:{label:4},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("模板")]),i("el-radio",{attrs:{label:5},model:{value:t.descriptionRadio,callback:function(e){t.descriptionRadio=e},expression:"descriptionRadio"}},[t._v("模板+SKU")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.selectDescription(0)}}},[t._v("选择模板")])],1)]),1===t.descriptionRadio||2===t.descriptionRadio||3===t.descriptionRadio?i("el-form-item",{attrs:{label:"关键词："}},[i("el-input",{attrs:{type:"textarea",rows:6,size:"mini",resize:"none",placeholder:"请输入内容","show-word-limit":""},model:{value:t.descriptionVal,callback:function(e){t.descriptionVal=e},expression:"descriptionVal"}})],1):t._e()],1),i("div",{staticClass:"footer"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.editProduct("setDescription")}}},[t._v("确 认")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.descriptionVisible=!1}}},[t._v("取 消")])],1)],1),i("el-dialog",{staticClass:"description-dialog",attrs:{title:"描述模板",visible:t.descriptionVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.descriptionVisible=e}}},[i("div",[i("ul",{staticStyle:{"margin-bottom":"10px"}},[i("li",[i("span",[t._v("标签：")]),i("el-select",{attrs:{size:"mini"},model:{value:t.descriptionConfigId,callback:function(e){t.descriptionConfigId=e},expression:"descriptionConfigId"}},t._l(t.descriptionLabelList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.lable,value:t.id}})})),1)],1),i("li",[i("span",[t._v("新增标签：")]),i("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.descriptionConfig.tag,callback:function(e){t.$set(t.descriptionConfig,"tag",e)},expression:"descriptionConfig.tag"}})],1)]),i("ul",{staticStyle:{"margin-bottom":"10px"}},[i("li",[i("span",[t._v("描述：")]),i("el-input",{staticStyle:{width:"430px"},attrs:{type:"textarea",rows:6,resize:"none",placeholder:"",size:"mini"},model:{value:t.descriptionConfig.text,callback:function(e){t.$set(t.descriptionConfig,"text",e)},expression:"descriptionConfig.text"}})],1)]),i("div",{staticClass:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.selectDescription(1)}}},[t._v("保存")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.selectDescription(2)}}},[t._v("删除")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.selectDescription(3)}}},[t._v("确定")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.selectDescription(4)}}},[t._v("取消")])],1)])]),i("el-dialog",{staticClass:"source-dialog",attrs:{title:"货源查找",visible:t.sourceVisible,width:"550px",top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.sourceVisible=e}}},[i("el-form",{attrs:{"label-position":"right","label-width":"110px"}},[i("el-form-item",{attrs:{label:"虾皮商品ID："}},[i("el-input",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{size:"mini"},model:{value:t.sourceId,callback:function(e){t.sourceId=e},expression:"sourceId"}}),i("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",size:"mini"},on:{click:t.sourceQuery}},[t._v("查 询")])],1),i("el-form-item",{attrs:{label:"上家类型："}},[t._v(" "+t._s(t.sourceType)+" ")]),i("el-form-item",{attrs:{label:"采购产品链接："}},[t._v(" "+t._s(t.sourceProductUrl)+" ")]),i("el-form-item",{attrs:{label:"虾皮商品链接："}},[t._v(" "+t._s(t.sourceGoodsUrl)+" ")])],1)],1)],1)},r=[],n=i("53ca"),o=i("1da1"),s=(i("96cf"),i("4de4"),i("a4d3"),i("e01a"),i("159b"),i("99af"),i("a15b"),i("a9e3"),i("caad"),i("2532"),i("d3b7"),i("25f0"),i("ac1f"),i("1276"),i("5b81"),i("498a"),i("b0c0"),i("07ac"),i("fb6a"),i("3ca3"),i("ddb0"),i("d81d"),i("5319"),i("d4ec")),c=i("bee2"),l=function(){function t(e){Object(s["a"])(this,t),this._this=e}return Object(c["a"])(t,[{key:"getMallDiscountsIdByKeyword",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={mallId:e.mallId,keyword:e.keyword,search_type:e.search_type},t.prev=1,t.next=4,this._this.$shopeemanService.getChinese(e.country,"/api/marketing/v3/discount/standard_search/",i);case 4:a=t.sent,this.isJsonString(a),t.next=11;break;case 8:return t.prev=8,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"折扣活动异常： ".concat(t.t0)});case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCategoryName",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i,a,r){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._this.$commodityService.getCategoryTbInfo(e,i+"",a,r);case 3:if(n=t.sent,o=this.isJsonString(n),200!==o.code){t.next=7;break}return t.abrupt("return",{code:200,data:o.data});case 7:return t.abrupt("return",{code:201,data:o.msg});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{code:-2,data:"获取类目名异常： ".concat(t.t0)});case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e,i,a,r){return t.apply(this,arguments)}return e}()},{key:"searchProductList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a,r,n,o,s,c,l,u,p,d,m,h,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.mItem,a=e.pageSize,r=e.searchType,n=e.keyword,o=e.goodsMin,s=e.goodsMax,c=e.soldMin,l=e.soldMax,u=e.listType,p=e.categoryId,t.prev=1,d={page_number:i.pageNumber,page_size:a,mallId:i.platform_mall_id,search_type:r,keyword:n,category_id:p,stock_min:o,stock_max:s,sold_min:c,sold_max:l,list_type:u,count_list_types:"sold_out,banned,deboosted,deleted,unlisted",source:"seller_center",version:"4.0.0"},t.next=5,this._this.$shopeemanService.getChinese(i.country,"/api/v3/product/search_product_list/?",d,{headers:{accept:"application/json, text/plain, */*"}});case 5:if(m=t.sent,h=this.isJsonString(m),200!==h.status){t.next=12;break}if(g=this.isJsonString(h.data),"success"!==g.message){t.next=11;break}return t.abrupt("return",{code:200,data:g.data});case 11:return t.abrupt("return",{code:201,data:"数据获取失败：".concat(g.message)});case 12:if(403!==h.status){t.next=14;break}return t.abrupt("return",{code:403,data:"未登录，请登录后再查询"});case 14:if(0!==h.status){t.next=16;break}return t.abrupt("return",{code:0,data:"异常，请检查代理"});case 16:return t.abrupt("return",{code:h.status,data:"".concat(h.statusText)});case 19:return t.prev=19,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取数据异常： ".concat(t.t0)});case 22:case"end":return t.stop()}}),t,this,[[1,19]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getMpskuList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a,r,n,o,s,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.mItem,a=e.pageSize,r=e.listType,n=e.listOrderType,t.prev=1,o={page_number:i.pageNumber,page_size:a,mallId:i.platform_mall_id,list_type:r,source:"seller_center",version:"1.0.0"},n&&(o["list_order_type"]=n),t.next=6,this._this.$shopeemanService.getChinese(i.country,"/api/v3/mpsku/get_mpsku_list/?",o,{headers:{accept:"application/json, text/plain, */*"}});case 6:if(s=t.sent,c=this.isJsonString(s),200!==c.status){t.next=13;break}if(l=this.isJsonString(c.data),"success"!==l.message){t.next=12;break}return t.abrupt("return",{code:200,data:l.data});case 12:return t.abrupt("return",{code:201,data:"数据获取失败：".concat(l.message)});case 13:if(403!==c.status){t.next=15;break}return t.abrupt("return",{code:403,data:"未登录，请登录后再查询"});case 15:if(0!==c.status){t.next=17;break}return t.abrupt("return",{code:0,data:"异常，请检查代理"});case 17:return t.abrupt("return",{code:c.status,data:"".concat(c.statusText)});case 20:return t.prev=20,t.t0=t["catch"](1),t.abrupt("return",{code:-2,data:"获取数据异常： ".concat(t.t0)});case 23:case"end":return t.stop()}}),t,this,[[1,20]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isJsonString",value:function(t){if("string"!==typeof t)return t;try{return JSON.parse(t),JSON.parse(t)}catch(e){return t}}}]),t}(),u=i("feb6"),p=i("0e0b"),d=i("eb09"),m={components:{StoreChoose:u["a"],categoryMapping:d["a"]},data:function(){return{isFold:!0,isShowLoading:!1,showConsole:!0,categoryVisible:!1,titleVisible:!1,sourceVisible:!0,getDescriptionVisible:!1,operationBut:!1,flag:!1,upDown:!0,GoodsList:new l(this),editCategory:!1,categoryList:{},categoryName:"",productNumChecked:!1,productNum:50,freightRadio:2,titleRadio:1,titleVal:"",descriptionRadio:4,descriptionVal:"",descriptionConfig:{description:"",text:"",lable:"",tag:""},descriptionConfigId:"",descriptionConfigText:"",descriptionLabelList:[],descriptionVisible:!1,sourceId:"",sourceType:"",sourceProductUrl:"",sourceGoodsUrl:"",queryType:"",percentage:0,selectMallList:"",country:"",tableData:[],multipleSelection:[],pageSize:48,sellStatus:0,goodsStatus:0,goodsStatusName:"",goodsStatusVal:"",searchType:"id",keyword:"",source:0,queryNum:0,updateNum:0,successNum:0,failNum:0,createTime:[],modifyTime:[],goodsMin:0,goodsMax:99999999,soldMin:0,soldMax:99999999,priceMin:0,priceMax:99999999,viewMin:0,viewMax:99999999,likeMin:0,likeMax:99999999,platformData:{},logistics:0,isCustomShipFee:!1,logisticsFeeList:[],logisticsList:[],productStock:10,productPrice1:-1,productPrice2:0,productWeight:1,productLength:"",productWidth:"",productHeight:"",minDays:0,maxDays:0,productDay:15,preOrderDeliveryDays:2,minLength:0,maxLength:0,sellStatusList:[{value:1,label:"售空"},{value:2,label:"非售空"}],goodsStatusList:[{value:1,label:"正常"},{value:6,label:"审核中"},{value:3,label:"禁卖下架"},{value:11,label:"已售完"},{value:8,label:"待上架"},{value:4,label:"禁卖shopee官方删除"},{value:100,label:"已压制"}],statusObj:{1:"正常",2:"审核中",6:"审核中",3:"禁卖下架",11:"已售完",8:"待上架",4:"禁卖shopee官方删除",100:"已压制"},statusFilter:{1:"live",8:"unlisted",2:"banned",3:"banned",11:"sold_out",100:"deboosted"},statusColor:{8:"red"},operationObj:{setTitle:"标题",setDescription:"描述",setStock:"库存",setPrice:"价格",setDay:"发货天数",setWeight:"重量",setSize:"尺寸",setFreight:"运费",setLogistics:"物流方式",setCategory:"类目属性"},searchTypeList:[{value:"name",label:"商品名称"},{value:"sku",label:"主商品货号"},{value:"msku",label:"商品规格货号"},{value:"id",label:"商品编号"},{value:"originId",label:"上家商品ID"}],sourceList:[{value:"拼多多",label:"拼多多"},{value:"淘宝",label:"淘宝"},{value:"天猫",label:"天猫"},{value:"自有产品",label:"自有产品"},{value:"皮皮虾供货平台",label:"皮皮虾供货平台"},{value:"货老板",label:"货老板"},{value:"1688",label:"1688"},{value:"Lazada",label:"Lazada"},{value:"京喜",label:"京喜"},{value:"Shopee",label:"Shopee"},{value:"速卖通",label:"速卖通"},{value:"天猫淘宝海外平台",label:"天猫淘宝海外平台"}]}},watch:{country:function(t){this.getLogistics(),this.getDayLength("")},descriptionConfigId:function(t){var e=this.descriptionLabelList.filter((function(e){return e&&e.id===t}))[0];this.descriptionConfig.text=e&&e.description||"",this.descriptionConfig.description=e&&e.description||"",this.descriptionConfig.lable=e&&e.lable||""}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.createTime=[(new Date).getTime()-1296e7,new Date],e.next=3,t.selectAll("goodsStatus",t.goodsStatusList);case 3:return e.next=5,t.selectAll("source",t.sourceList);case 5:case"end":return e.stop()}}),e)})))()},methods:{sourceQuery:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.sourceId){e.next=2;break}return e.abrupt("return",t.$message("请输入虾皮商品ID"));case 2:case"end":return e.stop()}}),e)})))()},categoryChange:function(t){if(t)if(this.editCategory)this.categoryList=t,this.editProduct("setCategory");else{var e=[];this.categoryList=t,this.categoryList.categoryList.forEach((function(t){e.push("".concat(t.category_name,"(").concat(t.category_cn_name,")"))})),this.categoryName=e.join("->")}this.categoryVisible=!1},batchCategory:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.categoryVisible=!0,t.editCategory=!0;case 2:case"end":return e.stop()}}),e)})))()},batchLogistics:function(){var t,e=this;if(null===(t=this.logistics)||void 0===t||!t.length)return this.$message("至少选择一种物流方式");var i=!1;if(this.isCustomShipFee&&(i=this.logistics.some((function(t){return e.logisticsList.some((function(e){return e.ShipId===t&&e.IsCustomShipFee&&""===e.CustomShipFee}))}))),i)return this.$message("请输入运费");this.editProduct("setLogistics")},batchFreight:function(){this.editProduct("setFreight")},batchSize:function(){if(!this.productLength||Number(this.productLength)<=0||!this.productWidth||Number(this.productWidth)<=0||!this.productHeight||Number(this.productHeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setSize")},batchWeight:function(){if(!this.productWeight||Number(this.productWeight)<=0)return this.$message("请输入 0 以上的数值");this.editProduct("setWeight")},batchDay:function(){if(!this.productDay)return this.$message("请填写预售天数");this.editProduct("setDay")},batchPrice:function(){return this.productPrice1?this.productPrice2?void this.editProduct("setPrice"):this.$message("数值不能为空"):this.$message("价格百分比不能为空")},batchStock:function(){if(!this.productStock||Number(this.productStock)<0||Number(this.productStock)>1e7)return this.$message("仓库必须在 0 到 10000000 之间");this.editProduct("setStock")},batchTitle:function(){this.titleVisible=!0,this.titleRadio=1,this.titleVal=""},batchDescription:function(){this.getDescriptionVisible=!0,this.descriptionRadio=4,this.descriptionVal=""},editProduct:function(t){var e=this;if("title"===t){if(1===this.titleRadio&&!this.titleVal)return this.$message("新标题不能为空");if((2===this.titleRadio||3===this.titleRadio||4===this.titleRadio)&&!this.titleVal)return this.$message("关键词不能为空")}if("description"===t){if((1===this.descriptionRadio||2===this.descriptionRadio||3===this.descriptionRadio)&&!this.descriptionVal)return this.$message("关键词不能为空");if((4===this.descriptionRadio||5===this.descriptionRadio)&&!this.descriptionConfig.description)return this.$message("请选择模板")}this.$confirm("确定更新商品吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.operationBut=!0,e.percentage=0,e.updateNum=0,e.successNum=0,e.failNum=0,e.titleVisible=!1,e.getDescriptionVisible=!1,e.multipleSelection.forEach((function(e){e.edit=t})),i.next=10,Object(p["c"])(e.multipleSelection,e.getProductDetail);case 10:e.percentage=100,e.operationBut=!1;case 12:case"end":return i.stop()}}),i)}))))},getProductDetail:function(t){var e=arguments,i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},i.updateNum++,a.prev=2,n=null,o={product_id:t.id,version:"3.2.0",shop_id:t.platform_mall_id},i.$set(t,"batchStatus","正在获取商品详情..."),a.next=8,i.$shopeemanService.searchProductDetail(t.country,o);case 8:if(s=a.sent,200!==s.code||!s.data){a.next=25;break}if(n=s.data,Number(n.id)!==Number(t.id)){a.next=20;break}return i.$set(t,"batchStatus","获取商品详情成功"),i.$set(t,"color","green"),a.next=16,i.getProductInfo(n,t);case 16:return a.next=18,i[t.edit](n,t);case 18:a.next=23;break;case 20:i.failNum++,i.$set(t,"batchStatus","获取到的产品id不一致"),i.$set(t,"color","red");case 23:a.next=28;break;case 25:i.failNum++,i.$set(t,"batchStatus","获取商品详情失败"),i.$set(t,"color","red");case 28:a.next=35;break;case 30:a.prev=30,a.t0=a["catch"](2),i.failNum++,i.$set(t,"获取商品详情异常"),i.$set(t,"color","red");case 35:return a.prev=35,--r.count,a.finish(35);case 38:case"end":return a.stop()}}),a,null,[[2,30,35,38]])})))()},handleProductEdit:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,i.$set(e,"batchStatus","正在更新".concat(i.operationObj[e.edit],"...")),i.$set(e,"color","green"),r={mallId:e.platform_mall_id},a.next=6,i.$shopeemanService.handleProductEdit(e.country,r,[t]);case 6:n=a.sent,200===n.code?(i.successNum++,i.$set(e,"batchStatus","更新".concat(i.operationObj[e.edit],"成功")),i.$set(e,"color","green")):(i.failNum++,i.$set(e,"batchStatus","更新".concat(i.operationObj[e.edit],"失败").concat(n.data)),i.$set(e,"color","red")),a.next=15;break;case 10:a.prev=10,a.t0=a["catch"](0),i.failNum++,i.$set(e,"更新商品异常"),i.$set(e,"color","red");case 15:case"end":return a.stop()}}),a,null,[[0,10]])})))()},setCategory:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=[],i.categoryList.categoryList.forEach((function(t){a.push(t.category_id)})),t["category_path"]=a;case 3:case"end":return e.stop()}}),e)})))()},setLogistics:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,o,s,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=[],o=function(a){var n=t.logistics_channels[a];if(i.logistics.includes(n.channelid.toString())&&0===n.parent_channel_id){if(!1===n.enabled){var o=[];i.logistics.forEach((function(t){i.logisticsList.forEach((function(e){t===e.ShipId&&t===n.channelid.toString()&&o.push(e)}))}));var s=(null===o||void 0===o?void 0:o.length)>0?o[0].ShipName:n.channelid.toString();return i.$set(e,"batchStatus","物流方式："+s+"未开启"),i.$set(e,"color","red"),{v:void 0}}r.push(n.channelid.toString())}},s=0;case 3:if(!(s<t.logistics_channels.length)){a.next=10;break}if(c=o(s),"object"!==Object(n["a"])(c)){a.next=7;break}return a.abrupt("return",c.v);case 7:s++,a.next=3;break;case 10:for(l=function(e){var a=t.logistics_channels[e],n=[];i.logistics.forEach((function(t){i.logisticsList.forEach((function(e){t===e.ShipId&&t===a.channelid.toString()&&n.push(e)}))})),r.includes(a.channelid.toString())?a.enabled=!0:a.enabled=!1,(null===n||void 0===n?void 0:n.length)>0&&""!==n[0].CustomShipFee&&(a.price=n[0].CustomShipFee)},u=0;u<t.logistics_channels.length;u++)l(u);return a.next=14,i.handleProductEdit(t,e);case 14:case"end":return a.stop()}}),a)})))()},setFreight:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(r=0;r<t.logistics_channels.length;r++)n=t.logistics_channels[r],n.enabled&&(n.cover_shipping_fee=1===i.freightRadio);return a.next=3,i.handleProductEdit(t,e);case 3:case"end":return a.stop()}}),a)})))()},setSize:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t["dimension"]["width"]=Number(i.productWidth),t["dimension"]["length"]=Number(i.productLength),t["dimension"]["height"]=Number(i.productHeight),a.next=5,i.handleProductEdit(t,e);case 5:case"end":return a.stop()}}),a)})))()},setWeight:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t["weight"]=i.productWeight+"",a.next=3,i.handleProductEdit(t,e);case 3:case"end":return a.stop()}}),a)})))()},setDay:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.getDayLength(e),!(Number(i.productDay)>Number(i.maxDays)||Number(i.productDay)<Number(i.minDays))){a.next=6;break}i.$set(e,"batchStatus","出货天数需设置在 "+i.minDays+" 到 "+i.maxDays+" 天"),i.$set(e,"color","red"),a.next=9;break;case 6:return t["days_to_ship"]=t.pre_order?Number(i.productDay):Number(i.preOrderDeliveryDays),a.next=9,i.handleProductEdit(t,e);case 9:case"end":return a.stop()}}),a)})))()},setPrice:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for("ID"===e.country&&i.checkCountryPriceForID(t,e),r=0;r<t.model_list.length;r++)n=t.model_list[r],n.price=Math.ceil(Number(n.price)+Number(n.price)*(Number(i.productPrice1)/100)+Number(i.productPrice2))+"";return a.next=4,i.handleProductEdit(t,e);case 4:case"end":return a.stop()}}),a)})))()},setStock:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(r=0;r<t.model_list.length;r++)n=t.model_list[r],n.stock=Number(i.productStock);return a.next=3,i.handleProductEdit(t,e);case 3:case"end":return a.stop()}}),a)})))()},setDescription:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s,c,l,u,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r="",a.t0=i.descriptionRadio,a.next=1===a.t0?4:2===a.t0?6:3===a.t0?8:4===a.t0?10:5===a.t0?12:15;break;case 4:return t["description"]=i.descriptionVal+t.description,a.abrupt("break",15);case 6:return t["description"]=t.description+i.descriptionVal,a.abrupt("break",15);case 8:if(i.descriptionVal.indexOf(";")>-1)for(n=i.descriptionVal.split(";"),o=0;o<n.length;o++)s=n[o],t["description"]=t.description.replaceAll(s,"");else t["description"]=t.description.replaceAll(i.descriptionVal,"");return a.abrupt("break",15);case 10:return t["description"]=i.descriptionConfig.description,a.abrupt("break",15);case 12:for(c=0;c<t.tier_variation.length;c++)for(l=t.tier_variation[c],u=0;u<l.options.length;u++)p=l.options[u],r+=p+"\n";return t["description"]=i.descriptionConfig.description+"\n"+r,a.abrupt("break",15);case 15:if(i.getDescriptionLength(e),"description"!==e.edit||0===i.minLength||!(t.description.length>i.maxLength||t.description.length<i.minLength)){a.next=21;break}i.$set(e,"batchStatus","描述不符合,长度范围"+i.minLength+"-"+i.maxLength),i.$set(e,"color","red"),a.next=24;break;case 21:return t.description.trim(),a.next=24,i.handleProductEdit(t,e);case 24:case"end":return a.stop()}}),a)})))()},setTitle:function(t,e){switch(this.titleRadio){case 1:t["name"]=this.titleVal;break;case 2:t["name"]=this.titleVal+t.name;break;case 3:t["name"]=t.name+this.titleVal;break;case 4:if(this.titleVal.indexOf(";")>-1)for(var i=this.titleVal.split(";"),a=0;a<i.length;a++){var r=i[a];t["name"]=t.name.replaceAll(r,"")}else t["name"]=t.name.replaceAll(this.titleVal,"");break}this.getTitleLength(e),0!==this.minLength&&(t.name.length>this.maxLength||t.name.length<this.minLength)?(this.$set(e,"batchStatus","标题不符合,长度范围"+this.minLength+"-"+this.maxLength),this.$set(e,"color","red")):(t.description.trim(),this.handleProductEdit(t,e))},getProductInfo:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s,c,l,u,p,d,m,h,g,f,b,v,y,_,x,k;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,c=!1,l=!1,t.id=Number(t.id),t.name=t.name.toString().trim(),t.brand_id=Number(t.brand_id),t.size_chart=t.size_chart.toString(),t.category_path=JSON.parse(JSON.stringify(t.category_path)),t.add_on_deal=JSON.parse(JSON.stringify(t.add_on_deal)),null===t||void 0===t||!t.attributes){a.next=25;break}u=[],p={},d=0;case 13:if(!(d<t.attributes.length)){a.next=24;break}if(g=t.attributes[d],f=null===g||void 0===g||null===(m=g.custom_value.raw_value)||void 0===m?void 0:m.toString(),f||"0"!==(null===f||void 0===f||null===(h=f.attribute_value_id)||void 0===h?void 0:h.toString())){a.next=18;break}return a.abrupt("continue",21);case 18:b=g.attribute_id.toString(),p=!b||"0"===b||f?{attribute_id:Number(b),custom_value:{raw_value:g.custom_value.raw_value.toString(),unit:null===g||void 0===g||null===(v=g.custom_value)||void 0===v||null===(y=v.unit)||void 0===y?void 0:y.toString()}}:{attribute_id:Number(b),attribute_value_id:Number(g.attribute_value_id)},u.push(p);case 21:d++,a.next=13;break;case 24:t.attributes=u;case 25:return _=["SG","GL","PH","VN","TW","MY","ID","TH","MX","CO","CL","PL","FR","ES"],_.includes(e.country)&&(t.ds_attr_rcmd_id="".concat(i.guid().toString(),"|a|EN"),t.ds_cat_rcmd_id="".concat(i.guid().toString(),"|c|EN")),t.stock=Number(t.stock),t.parent_sku=t.parent_sku.toString(),t.price=t.price.toString(),c&&Number(t.price_before_discount)>0&&(t.price=t.price_before_discount.toString()),t.price_before_discount=t.price_before_discount.toString(),t.input_normal_price=t.price_info?t.price_info.input_normal_price.toString():"0",t.input_promotion_price=t.price_info?t.price_info.input_promotion_price.toString():"0",t.weight=t.weight.toString(),t.dimension=JSON.parse(JSON.stringify(t.dimension)),t.pre_order=JSON.parse(t.pre_order),t.days_to_ship=Number(t.days_to_ship),t.description=t.description.toString().trim(),t.installment_tenures=JSON.parse(JSON.stringify(t.installment_tenures)),i.getModelList(t.model_list,c),a.prev=41,x={},x["product_id"]=t.id,x["mallId"]=e.platform_mall_id,a.next=47,i.$shopeemanService.getLogistics(e.country,x);case 47:if(k=a.sent,200!==k.code){a.next=52;break}return a.next=51,i.getLogisticsInfo(k.data.list,l,e);case 51:t.logistics_channels=a.sent;case 52:a.next=56;break;case 54:a.prev=54,a.t0=a["catch"](41);case 56:t.images=JSON.parse(JSON.stringify(t.images)),(null===(r=t.tier_variation)||void 0===r?void 0:r.length)>0&&(t.tier_variation=JSON.parse(JSON.stringify(t.tier_variation))),"8"===t.status.toString()&&(t.unlisted=!0),1===(null===(n=t.model_list)||void 0===n?void 0:n.length)&&1===(null===(o=t.tier_variation)||void 0===o?void 0:o.length)&&(t.tier_variation[0].options[0]||(t.tier_variation[0].options[0]=t.tier_variation[0].name?t.tier_variation[0].name:t.model_list[0].name),t.tier_variation[0].name||(t.tier_variation[0].name=t.model_list[0].name)),null!==t&&void 0!==t&&null!==(s=t.min_purchase_limit_info)&&void 0!==s&&s.min_purchase_limit&&(t.min_purchase_limit_info.min_purchase_limit=Number(t.min_purchase_limit_info.min_purchase_limit)?Number(t.min_purchase_limit_info.min_purchase_limit):1,t.min_purchase_limit=t.min_purchase_limit_info.min_purchase_limit<1?1:t.min_purchase_limit_info.min_purchase_limit),i.checkCountryPriceForID(t,e),a.next=66;break;case 64:a.prev=64,a.t1=a["catch"](0);case 66:case"end":return a.stop()}}),a,null,[[0,64],[41,54]])})))()},checkCountryPriceForID:function(t,e){if("ID"===e.country){var i;if("0"!==t.input_normal_price)e.in_promotion&&(t.price=t.input_normal_price),t.price=t.input_normal_price;else for(var a=0;a<t.model_list.length;a++){var r=t.model_list[a];if(t.price===e.price.toString()){if(e.in_promotion){t.price=r.input_promotion_price;break}t.price=r.input_normal_price;break}}if((null===(i=t.model_list)||void 0===i?void 0:i.length)>0)for(var n=0;n<t.model_list.length;n++){var o=t.model_list[n];e.in_promotion?e.price=e.input_normal_price:o.price=o.input_normal_price}}},getLogisticsInfo:function(t,e,i){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,o,s,c,l,u,p,d,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=[],s=[],!((null===(n=t)||void 0===n?void 0:n.length)>0)){r.next=10;break}return u={platform_mall_id:i.platform_mall_id},r.next=6,a.$shopeemanService.getChinese(i.country,"/api/v3/logistics/get_channel_list/?",u);case 6:p=r.sent,p=JSON.parse(JSON.parse(p).data),null!==(c=p)&&void 0!==c&&null!==(l=c.data)&&void 0!==l&&l.list&&(s=p.data.list),t=a.filterLogistics(t,s,e);case 10:for(d=0;d<t.length;d++)m=t[d],h={},h.channelid=Number(m.channel_id),h.price=m.price?m.price.toString():"0.00",h.enabled=JSON.parse(m.enabled),h.cover_shipping_fee=JSON.parse(m.cover_shipping_fee),h.sizeid=Number(m.size_id),h.size=Number(m.size),h.parent_channel_id=Number(m.parent_channel_id),o.push(h);return r.abrupt("return",o);case 12:case"end":return r.stop()}}),r)})))()},filterLogistics:function(t,e,i){for(var a=[],r=0;r<e.length;r++){var n=e[r],o=n.channel_id.toString(),s="parent_channel_id"in n?n.parent_channel_id.toString():"0";if("0"===s&&(JSON.parse(n.is_mask_channel)||JSON.parse(n.enabled))){for(var c=!1,l=0;l<t.length;l++){var u=t[l];if(u.channel_id.toString===o){i||(u.enabled=n.enabled.toString()),null!==u&&void 0!==u&&u.default_price||(u.default_price="0.00"),a.push(u),c=!0;break}}c||(n.price=n.price?n.price.toString:"0.00",n.cover_shipping_fee=!("0"===n.cover_shipping_fee.toString()||"false"===n.cover_shipping_fee.toString()),n.size_id=0,n.size=0,a.push(n))}}return a},getModelList:function(t,e){try{if((null===t||void 0===t?void 0:t.length)>0)for(var i=0;i<t.length;i++){var a=t[i];a.id=Number(a.id),a.name=!a.name&&a.sku?a.sku:a.name.toString(),a.sku=a.sku.toString(),a.stock=Number(a.stock),a.price=a.price.toString(),e&&Number(a.price_before_discount)>0&&(a.price=a.price_before_discount.toString()),a.tier_index=JSON.parse(JSON.stringify(a.tier_index)),a.input_normal_price=a.price_info.input_normal_price.toString(),a.input_promotion_price=a.price_info.input_promotion_price.toString(),a.is_default=!!JSON.parse(a.is_default)&&JSON.parse(a.is_default)}}catch(r){}},getMallDiscountsIdByKeyword:function(t,e,i,a){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n["mallId"]=t.platform_mall_id,n["keyword"]=a,n["search_type"]=i,n["country"]=t.country,e.next=7,r.GoodsList.getMallDiscountsIdByKeyword(n);case 7:e.sent;case 8:case"end":return e.stop()}}),e)})))()},deleteActicity:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,r,n,o,s,c,l,u,p,d,m,h,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:"折扣",a="",r=["upcoming","ongoing"],n=0;case 4:if(!(n<t.campaignTypeList.length)){i.next=46;break}o=t.campaignTypeList[n],i.t0=o.Name,i.next="1"===i.t0?9:"3"===i.t0?39:43;break;case 9:if(null===o||void 0===o||!o.CameraId){i.next=36;break}return s={product_id:t.id,version:"3.2.0",shop_id:t.platform_mall_id},i.next=13,e.$shopeemanService.searchProductDetail(t.country,s);case 13:if(c=i.sent,200!==c.code||!c.data){i.next=33;break}if(l=c.data,l.id.toString()===t.id.toString()){i.next=18;break}return i.abrupt("continue",43);case 18:if(null===l||void 0===l||!l.model_list){i.next=31;break}if(u=JSON.parse(JSON.stringify(l.model_list)),!((null===u||void 0===u?void 0:u.length)>0)){i.next=31;break}if(null!==(p=u[0])&&void 0!==p&&p.promotion_id&&(a=u[0]["promotion_id"].toString(),"0"===a&&(o.CameraId=a)),a&&"0"!==a){i.next=31;break}d=0;case 24:if(!(d<r.length)){i.next=31;break}return m=r[d],i.next=28,e.getMallDiscountsIdByKeyword(t,m,"item_sku",t.GoodsParentSKU);case 28:d++,i.next=24;break;case 31:i.next=34;break;case 33:return i.abrupt("continue",43);case 34:i.next=37;break;case 36:a=o.CameraId;case 37:return i.abrupt("break",43);case 39:if("套装",r=["2","3"],!o.CameraId)for(h=0;h<r.length;h++)g=r[h],Number(g),10,0,1,1;return i.abrupt("break",43);case 43:n++,i.next=4;break;case 46:case"end":return i.stop()}}),i)})))()},batchUpDownProduct:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.operationBut=!0,t.percentage=0,t.updateNum=0,t.successNum=0,t.failNum=0,e.next=7,Object(p["c"])(t.multipleSelection,t.upDownProduct);case 7:t.percentage=100,t.operationBut=!1;case 9:case"end":return e.stop()}}),e)})))()},upDownProduct:function(t){var e=arguments,i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},a.prev=1,i.updateNum++,n=[{id:Number(t.id),unlisted:i.upDown}],o={mallId:t.platform_mall_id},a.next=7,i.$shopeemanService.handleGoodsDelist(t.country,o,n);case 7:s=a.sent,200===s.code?(i.successNum++,i.$set(t,"batchStatus","".concat(i.upDown?"下架成功":"上架成功")),i.$set(t,"color","green")):(i.failNum++,i.$set(t,"batchStatus","".concat(s.data)),i.$set(t,"color","red")),a.next=16;break;case 11:a.prev=11,a.t0=a["catch"](1),i.failNum++,i.$set(t,"batchStatus","".concat(i.upDown?"下架异常":"上架异常")),i.$set(t,"color","red");case 16:return a.prev=16,--r.count,a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[1,11,16,19]])})))()},batchDelete:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$confirm("确定删除【".concat(t.multipleSelection.length,"】个商品吗"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.operationBut=!0,t.percentage=0,t.updateNum=0,t.successNum=0,t.failNum=0,e.next=7,Object(p["c"])(t.multipleSelection,t.deleteProduct);case 7:t.percentage=100,t.operationBut=!1;case 9:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t){var e=arguments,i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{count:1},a.prev=1,a.next=4,i.deleteActicity(t);case 4:a.next=11;break;case 6:a.prev=6,a.t0=a["catch"](1),i.failNum++,i.$set(t,"batchStatus","删除异常"),i.$set(t,"color","red");case 11:return a.prev=11,--r.count,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,6,11,14]])})))()},getGoodsActInfo:function(t){try{var e,i,a,r,n,o,s,c={},l=null,u=[];if(null!==t&&void 0!==t&&null!==(e=t.ongoing_upcoming_campaigns)&&void 0!==e&&e.upcoming_campaigns)l=t.ongoing_upcoming_campaigns.upcoming_campaigns,(null===(a=l)||void 0===a?void 0:a.length)>0&&(c.Name=l[0]["campaign_type"].toString());if(null!==t&&void 0!==t&&null!==(i=t.ongoing_upcoming_campaigns)&&void 0!==i&&i.ongoing_campaigns)l=t.ongoing_upcoming_campaigns.ongoing_campaigns,(null===(r=l)||void 0===r?void 0:r.length)>0&&(c.Name=l[0]["campaign_type"].toString());if(Object.values(c).length>0)if(null!==t&&void 0!==t&&null!==(n=t.model_list[0])&&void 0!==n&&n.promotion_id)l=t.model_list,(null===(o=l)||void 0===o?void 0:o.length)>0&&"0"!==l[0]["promotion_id"].toString()&&(c.CameraId=l[0]["promotion_id"].toString());if(u.push(c),t.add_on_deal)l=t.add_on_deal,(null===(s=l)||void 0===s?void 0:s.length)>0&&(c.Name="10",c.CameraId=l[0]["add_on_deal_id"].toString(),c.IsSelected=JSON.parse(l[0]["is_main_item"]),u.push(c));return u}catch(p){}},getDayLength:function(t){var e=t?t.country:this.country;switch(e){case"TH":case"MY":case"SG":this.minDays=7,this.maxDays=30,this.productDay=t?this.productDay:15,this.preOrderDeliveryDays=2;break;case"TW":this.minDays=5,this.maxDays=20,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=3;break;case"PH":this.minDays=7,this.maxDays=30,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=2;break;case"ID":this.minDays=7,this.maxDays=15,this.productDay=t?this.productDay:10,this.preOrderDeliveryDays=2;break;case"VN":this.minDays=7,this.maxDays=15,this.productDay=t?this.productDay:7,this.preOrderDeliveryDays=2;break;case"BR":this.minDays=5,this.maxDays=10,this.productDay=t?this.productDay:7,this.preOrderDeliveryDays=3;break}},getDescriptionLength:function(t){switch(t.country){case"TH":this.maxLength=3e3,this.minLength=25;break;case"VN":this.maxLength=3e3,this.minLength=100;break;case"MY":case"SG":case"ID":this.maxLength=3e3,this.minLength=20;break;case"PH":this.maxLength=3e3,this.minLength=5;break;case"TW":case"BR":this.maxLength=3e3,this.minLength=1;break}},getTitleLength:function(t){switch(t.country){case"TH":case"MY":this.maxLength=120,this.minLength=20;break;case"VN":case"SG":this.maxLength=120,this.minLength=10;break;case"TW":this.maxLength=60,this.minLength=5;break;case"PH":this.maxLength=100,this.minLength=20;break;case"ID":this.maxLength=100,this.minLength=5;break;case"BR":this.maxLength=120,this.minLength=1;break}},operation:function(t){var e;if(null===(e=this.multipleSelection)||void 0===e||!e.length)return this.$message("没有可操作的商品，请选择");this[t]()},selectDescription:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(0!==t){i.next=10;break}return i.next=3,e.$commodityService.descriptionTemplateList();case 3:a=i.sent,r=JSON.parse(a),e.descriptionLabelList=r.data||[],e.descriptionConfigId?(n=e.descriptionLabelList.filter((function(t){return t&&t.id===e.descriptionConfigId}))[0],e.descriptionConfig.text=n&&n.description||e.descriptionConfig.text,e.descriptionConfig.description=n&&n.description||e.descriptionConfig.description,e.descriptionConfig.lable=n&&n.lable||""):e.descriptionConfigId=e.descriptionLabelList[0]&&e.descriptionLabelList[0].id||"",e.descriptionVisible=!0,i.next=31;break;case 10:if(1!==t){i.next=21;break}return o=e.descriptionConfig.tag||e.descriptionConfig.lable,i.next=14,e.$commodityService.uploadDescriptionTemplate(o,e.descriptionConfig.text);case 14:s=i.sent,c=JSON.parse(s),e.descriptionConfig.tag="",e.descriptionConfigId=parseInt(c.data),e.descriptionConfig.description=e.descriptionConfig.text,i.next=30;break;case 21:if(2!==t){i.next=29;break}return i.next=24,e.$commodityService.deleteDescriptionTemplate(e.descriptionConfigId);case 24:l=i.sent,u=JSON.parse(l),200===u.code?(e.descriptionConfigId="",e.$message.success("删除成功")):e.$message.error("删除失败"),i.next=30;break;case 29:3===t?e.descriptionConfig.description=e.descriptionConfig.text:4===t&&(e.descriptionConfig.text=e.descriptionConfig.description);case 30:e.descriptionVisible=!1;case 31:case"end":return i.stop()}}),i)})))()},viewDetails:function(t){var e={type:"itemDetail",shopId:t.platform_mall_id,id:t.id};this.$BaseUtilService.getOrderDetailInfo(t.platform_mall_id,JSON.stringify(e))},getLogistics:function(){var t=this,e=this.$shopeeManConfig.getLogisticsList();e=e[this.country],this.logisticsList=[],this.logistics=[],e.forEach((function(e){e.CustomShipFee="",t.logisticsList.push(e),e.IsSelected&&t.logistics.push(e.ShipId)})),this.setIsCustomShipFee()},queryData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectMallList.length){e.next=2;break}return e.abrupt("return",t.$message("请选择店铺"));case 2:if(null!==(i=t.goodsStatus)&&void 0!==i&&i.length){e.next=4;break}return e.abrupt("return",t.$message("请选择商品状态"));case 4:if(null!==(a=t.source)&&void 0!==a&&a.length){e.next=6;break}return e.abrupt("return",t.$message("请选择上家来源"));case 6:if(!(t.soldMin<0||t.soldMax>99999999)){e.next=8;break}return e.abrupt("return",t.$message("销售量请输入0-99999999之间的数字"));case 8:if(!(t.viewMin<0||t.viewMax>99999999)){e.next=10;break}return e.abrupt("return",t.$message("访客量请输入0-99999999之间的数字"));case 10:if(!(t.likeMin<0||t.likeMax>99999999)){e.next=12;break}return e.abrupt("return",t.$message("粉丝量请输入0-99999999之间的数字"));case 12:if(!(t.priceMin<0||t.priceMax>99999999)){e.next=14;break}return e.abrupt("return",t.$message("价格请输入0-99999999之间的数字"));case 14:if(!(t.goodsMin<0||t.goodsMax>99999999)){e.next=16;break}return e.abrupt("return",t.$message("商品数量请输入0-99999999之间的数字"));case 16:t.percentage=0,t.queryNum=0,t.updateNum=0,t.successNum=0,t.failNum=0,t.tableData=[],t.$refs.Logs.consoleMsg="",t.operationBut=!0,t.showConsole=!1,t.flag=!1,1===t.queryType?t.$refs.Logs.writeLog("开始查询...",!0):100===t.queryType?t.$refs.Logs.writeLog("开始查询100小时内无流量商品",!0):200===t.queryType&&t.$refs.Logs.writeLog("开始查询200小时内无流量商品",!0),t.$refs.Logs.writeLog(name,!0),t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[]})),r=0;case 30:if(!(r<t.goodsStatus.length)){e.next=46;break}if(n=t.goodsStatus[r],t.goodsStatusVal=n,0!==n){e.next=40;break}return t.goodsStatusName="",e.next=37,Object(p["c"])(t.selectMallList,t.getTableData);case 37:return e.abrupt("break",46);case 40:return t.goodsStatusName=t.statusFilter[n],e.next=43,Object(p["c"])(t.selectMallList,t.getTableData);case 43:r++,e.next=30;break;case 46:t.operationBut=!1,t.showConsole=!0,t.$refs.Logs.writeLog("查询完成",!0);case 49:case"end":return e.stop()}}),e)})))()},getTableData:function(t){var e=arguments,i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:1},n="",o="",a.prev=3,!i.flag){a.next=9;break}return r=0,i.operationBut=!1,i.$refs.Logs.writeLog("停止操作",!0),a.abrupt("return");case 9:if(s={},s["mItem"]=t,s["pageSize"]=i.pageSize,s["listType"]=i.goodsStatusName?i.goodsStatusName:"all",o=t.mall_alias_name||t.platform_mall_name,!("originId"!==i.searchType&&i.keyword||i.goodsMax<99999999||i.goodsMin>0||i.soldMin>0||i.soldMax<99999999||i.categoryName)){a.next=26;break}return i.keyword&&(s["searchType"]=i.searchType,s["keyword"]=i.keyword),i.categoryName&&(s["categoryId"]=i.categoryList.categoryList[i.categoryList.categoryList.length-1].category_id),s["goodsMin"]=i.goodsMin,s["goodsMax"]=i.goodsMax,s["soldMin"]=i.soldMin,s["soldMax"]=i.soldMax,a.next=23,i.GoodsList.searchProductList(s);case 23:n=a.sent,a.next=29;break;case 26:return a.next=28,i.GoodsList.getMpskuList(s);case 28:n=a.sent;case 29:if(200!==n.code){a.next=38;break}if(null===(c=n.data.list)||void 0===c||!c.length){a.next=36;break}return i.$refs.Logs.writeLog("查询店铺【".concat(o,"】第【").concat(t.pageNumber,"】页数据：").concat(n.data.list.length),!0),a.next=34,i.setTableData(n.data.list,t,o);case 34:l=i.filterData(n.data.list),i.productNumChecked?t.mylist=t.mylist.concat(l):(i.tableData=i.tableData.concat(l),i.queryNum=i.tableData.length);case 36:a.next=40;break;case 38:i.$refs.Logs.writeLog("店铺【".concat(o,"】").concat(n.data),!1),--r.count;case 40:a.next=45;break;case 42:a.prev=42,a.t0=a["catch"](3),i.$refs.Logs.writeLog("店铺【".concat(o,"】获取数据异常"),!1);case 45:if(a.prev=45,!(n.data.list.length>=i.pageSize)){a.next=52;break}return t.pageNumber++,a.next=50,i.getTableData(t,r);case 50:a.next=57;break;case 52:i.productNumChecked&&(i.tableData=i.tableData.concat(t.mylist.slice(0,Number(i.productNum)))),i.queryNum=i.tableData.length,u=100/i.selectMallList.length,i.percentage+=u,--r.count;case 57:return a.finish(45);case 58:case"end":return a.stop()}}),a,null,[[3,42,45,58]])})))()},queryBanned:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.percentage=0,t.queryNum=0,t.updateNum=0,t.successNum=0,t.failNum=0,t.tableData=[],t.operationBut=!0,t.showConsole=!1,t.$refs.Logs.consoleMsg="",t.flag=!1,t.$refs.Logs.writeLog("开始查询禁卖商品...",!0),t.selectMallList.forEach((function(t){t.pageNumber=1,t.mylist=[]})),e.next=14,Object(p["c"])(t.selectMallList,t.getBannedData);case 14:t.operationBut=!1,t.showConsole=!0,t.$refs.Logs.writeLog("禁卖商品查询结束",!0);case 17:case"end":return e.stop()}}),e)})))()},getBannedData:function(t){var e=arguments,i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,s,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{count:2},n="",o="",a.prev=3,!i.flag){a.next=9;break}return r=0,i.operationBut=!1,i.$refs.Logs.writeLog("停止操作",!0),a.abrupt("return");case 9:return s={},s["mItem"]=t,s["pageSize"]=i.pageSize,s["listType"]="banned",s["listOrderType"]="list_time_asc",o=t.mall_alias_name||t.platform_mall_name,a.next=17,i.GoodsList.getMpskuList(s);case 17:if(n=a.sent,200!==n.code){a.next=26;break}if(null===(c=n.data.list)||void 0===c||!c.length){a.next=24;break}return i.$refs.Logs.writeLog("查询店铺【".concat(o,"】第【").concat(t.pageNumber,"】页数据：").concat(n.data.list.length),!0),a.next=23,i.setTableData(n.data.list,t,o);case 23:i.productNumChecked?t.mylist=t.mylist.concat(n.data.list):(i.tableData=i.tableData.concat(n.data.list),i.queryNum=i.tableData.length);case 24:a.next=28;break;case 26:i.$refs.Logs.writeLog("店铺【".concat(o,"】").concat(n.data),!1),--r.count;case 28:a.next=33;break;case 30:a.prev=30,a.t0=a["catch"](3),i.$refs.Logs.writeLog("店铺【".concat(o,"】获取数据异常"),!1);case 33:if(a.prev=33,!(n.data.list.length>=i.pageSize)){a.next=40;break}return t.pageNumber++,a.next=38,i.getBannedData(t,r);case 38:a.next=45;break;case 40:i.productNumChecked&&(i.tableData=i.tableData.concat(t.mylist.slice(0,Number(i.productNum)))),i.queryNum=i.tableData.length,l=100/i.selectMallList.length,i.percentage+=l,--r.count;case 45:return a.finish(33);case 46:case"end":return a.stop()}}),a,null,[[3,30,33,46]])})))()},setTableData:function(t,e,i){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=regeneratorRuntime.mark((function r(n){var o,s,c,l,u,p,d,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:o=t[n],s=0,c=0,l=[],u=[],p="",o.country=e.country,o.mallName=i,o.create_time=1e3*o.create_time,o.modify_time=1e3*o.modify_time,o.images=o.images[0],o.platform_mall_id=e.platform_mall_id,o.campaignTypeList=a.getGoodsActInfo(o),o.model_list.forEach((function(t){l.push(Number(t.price_info.normal_price)),s+=Number(t.stock_info.normal_stock),c+=Number(t.sold)})),d=0;case 15:if(!(d<o.category_path.length)){r.next=24;break}return m=o.category_path[d],r.next=19,a.GoodsList.getCategoryName(o.country,m,"0","");case 19:h=r.sent,200===h.code?u.push(h.data.categories?"".concat(h.data.categories[0].category_name,"(").concat(h.data.categories[0].category_cn_name,")"):""):(u="",a.$refs.Logs.writeLog("".concat(h.data),!1));case 21:d++,r.next=15;break;case 24:return o.stock=s,o.sold=c,o.price=Math.min.apply(null,l),o.categoryName=u.join("->"),p=2===o.status?6:1===o.status&&0===o.stock?11:1===o.status&&100===a.goodsStatusVal?100:o.status,o.status=p,r.next=32,a.getPlatformData(o.parent_sku);case 32:o.platformTypeStr=a.platformData["platformTypeStr"],o.productId=a.platformData["productId"],o.url=a.platformData["url"];case 35:case"end":return r.stop()}}),r)})),o=0;case 2:if(!(o<t.length)){r.next=7;break}return r.delegateYield(n(o),"t0",4);case 4:o++,r.next=2;break;case 7:case"end":return r.stop()}}),r)})))()},filterData:function(t){for(var e=[],i=0;i<t.length;i++){var a,r,n,o,s=t[i];"originId"===this.searchType&&this.keyword&&this.keyword!==s.productId||(0===this.source[0]||this.source.includes(s.platformTypeStr))&&(null===(a=this.modifyTime)||void 0===a||!a.length||s.modify_time>=this.modifyTime[0])&&(null===(r=this.modifyTime)||void 0===r||!r.length||s.modify_time<=new Date(this.modifyTime[1]).getTime())&&(null===(n=this.createTime)||void 0===n||!n.length||s.create_time>=this.createTime[0])&&(null===(o=this.createTime)||void 0===o||!o.length||s.create_time<=new Date(this.createTime[1]).getTime())&&(4===this.goodsStatusVal&&4!==s.status||6===this.goodsStatusVal&&6!==s.status||1===Number(this.sellStatus)&&Number(s.stock)>0||2===Number(this.sellStatus)&&0===Number(s.stock)||Number(s.price)>=Number(this.priceMin)&&Number(s.price)<=Number(this.priceMax)&&Number(s.view_count)>=Number(this.viewMin)&&Number(s.view_count)<=Number(this.viewMax)&&(100===this.queryType&&Number((new Date).getTime())-Number(s.create_time)>36e7||200===this.queryType&&Number((new Date).getTime())-Number(s.create_time)>72e7||e.push(s)))}return e},getPlatformData:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.decryptShopeeItemSku(t);case 2:a=e.platformData["platform"],r=e.platformData["productId"],5===a&&r.toString().includes("-")&&(e.getSelfGoodsPlatform(t),e.platformData&&e.platformData["platform"]&&(a=e.platformData["platform"])),e.getGoodsUrl(a);case 6:case"end":return i.stop()}}),i)})))()},decryptShopeeItemSku:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,r,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(i.prev=0,a=/^[+-]?\d*[.]?\d*$/,!(t.length<30)){i.next=10;break}return i.next=5,e.$userInfo.user_create_time;case 5:r=i.sent,r&&(n=new Date(r).getTime(),o=new Date("2018-12-20 00:00:00").getTime(),n>o&&(e.platformData["platform"]=5,e.platformData["productId"]=t)),t.indexOf("_")>-1?(s=t.split("_"),a.test(s[0])&&a.test(s[1])?(c=Number(s[1]),1===c||2===c||3===c||5===c||6===c||7===c||8===c?(e.platformData["platform"]=c,e.platformData["productId"]=s[0]):(e.platformData["platform"]=5,e.platformData["productId"]=t)):(e.platformData["platform"]=5,e.platformData["productId"]=t)):a.test(t)?(e.platformData["platform"]=1,e.platformData["productId"]=t):(e.platformData["platform"]=5,e.platformData["productId"]=t),i.next=14;break;case 10:return i.next=12,e.$BaseUtilService.decGoodCode(t);case 12:l=i.sent,l.indexOf("-")>-1?(u=l.split("-"),e.getPlatformSimpleStr(u[0],u)):(e.platformData["platform"]=5,e.platformData["productId"]=t);case 14:i.next=18;break;case 16:i.prev=16,i.t0=i["catch"](0);case 18:case"end":return i.stop()}}),i,null,[[0,16]])})))()},getPlatformSimpleStr:function(t,e){try{var i=e[1];"pdd"===t.toLocaleLowerCase()?(this.platformData["platform"]=1,this.platformData["productId"]=i):"tb"===t.toLocaleLowerCase()||"tm"===t.toLocaleLowerCase()?(this.platformData["platform"]=2,this.platformData["productId"]=i):"tb"===t.toLocaleLowerCase()?(this.platformData["platform"]=3,this.platformData["productId"]=i):"own"===t.toLocaleLowerCase()?(this.platformData["platform"]=5,this.platformData["productId"]=i):"ghpt"===t.toLocaleLowerCase()?(this.platformData["platform"]=6,this.platformData["productId"]=i):"alibaba"===t.toLocaleLowerCase()?(this.platformData["platform"]=8,this.platformData["productId"]=i):"hyj"===t.toLocaleLowerCase()||"hlb"===t.toLocaleLowerCase()?(this.platformData["platform"]=7,this.platformData["productId"]=i,this.platformData["site"]=e[2],this.platformData["shopId"]=e[3]):"shopee"===t.toLocaleLowerCase()?(this.platformData["platform"]=11,this.platformData["productId"]=i):"aliexpress"===t.toLocaleLowerCase()?(this.platformData["platform"]=12,this.platformData["productId"]=i):"lazada"===t.toLocaleLowerCase()?(this.platformData["platform"]=9,this.platformData["productId"]=i,this.platformData["site"]=e[2]):"hyjhw"===t.toLocaleLowerCase()?(this.platformData["platform"]=15,this.platformData["productId"]=i,this.platformData["site"]=e[2]):"jx"===t.toLocaleLowerCase()?(this.platformData["platform"]=10,this.platformData["productId"]=i,this.platformData["site"]=e[2]):"crossbroder"===t.toLocaleLowerCase()&&(this.platformData["platform"]=13,this.platformData["productId"]=i,this.platformData["userId"]=e.Length>2?e[2]:"")}catch(a){}},getSelfGoodsPlatform:function(t){var e="5",i="",a=[];try{t.includes("-")&&(a=t.split("-"),e=a[0]),this.getPlatformSimpleStr(e,a)}catch(r){this.platformData["platform"]=e,this.platformData["productId"]=i}},getGoodsUrl:function(t){try{switch(t){case 1:this.platformData["url"]="http://mobile.yangkeduo.com/goods.html?goods_id=".concat(this.platformData["productId"]),this.platformData["platformTypeStr"]="拼多多";break;case 2:this.platformData["url"]="https://item.taobao.com/item.htm?id=".concat(this.platformData["productId"]),this.platformData["platformTypeStr"]="淘宝";break;case 3:this.platformData["url"]="https://detail.tmall.com/item.htm?id=".concat(this.platformData["productId"]),this.platformData["platformTypeStr"]="天猫";break;case 5:this.platformData["url"]="",this.platformData["platformTypeStr"]="自有产品";break;case 6:this.platformData["url"]="http://gh.ppxias.com/goods/".concat(this.platformData["productId"],".html"),this.platformData["platformTypeStr"]="皮皮虾供货平台";break;case 15:case 7:this.platformData["url"]="http://www.17hyj.com/detail?goodsid=".concat(this.platformData["productId"]),this.platformData["platformTypeStr"]="货老板";break;case 8:this.platformData["url"]="https://detail.1688.com/offer/".concat(this.platformData["productId"],".html"),this.platformData["platformTypeStr"]="1688";break;case 11:this.platformData["url"]="".concat(this.$filters.countryShopeebuyCom(this.platformData["site"]),"/product/").concat(this.platformData["shopId"],"/").concat(this.platformData["productId"]),this.platformData["platformTypeStr"]="Shopee";break;case 12:this.platformData["url"]="https://www.aliexpress.com/item/".concat(this.platformData["productId"],".html"),this.platformData["platformTypeStr"]="速卖通";break;case 9:this.platformData["url"]="".concat(this.$filters.lazadaGoodsUrl(this.platformData["site"])).concat(this.platformData["productId"],".html"),this.platformData["platformTypeStr"]="Lazada";break;case 10:this.platformData["url"]="https://item.m.jd.com/product/".concat(this.platformData["productId"],".html"),this.platformData["platformTypeStr"]="京喜";break;case 13:this.platformData["url"]="https://distributor.taobao.global/apps/product/detail?mpId=".concat(this.platformData["productId"]),this.platformData["platformTypeStr"]="天猫淘宝海外平台";break}}catch(e){}},selectAll:function(t,e){var i=this;this[t].length<e.length?(this[t]=[],this[t].push(0),e.map((function(e){i[t].push("logistics"===t?e.ShipId:e.value)}))):this[t]=[],"logistics"===t&&this.setIsCustomShipFee()},changeSelect:function(t,e){(t.includes(0)||t.length!==this[e].length)&&t.includes(0)&&t.length-1<this[e].length&&(this[e]=this[e].filter((function(t){return 0!==t}))),"logistics"===e&&this.setIsCustomShipFee()},setIsCustomShipFee:function(){var t=this;this.isCustomShipFee=this.logistics.some((function(e){return t.logisticsList.some((function(t){return t.ShipId===e&&t.IsCustomShipFee}))}))},openUrl:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1===e)try{r=i.$filters.countryShopeebuyCom(t.country),i.$BaseUtilService.openUrl("".concat(r,"/product/").concat(t.platform_mall_id,"/").concat(t.id))}catch(n){i.$message.error("打开失败")}else i.$BaseUtilService.openUrl(t.url);case 1:case"end":return a.stop()}}),a)})))()},changeMallList:function(t){this.selectMallList=t,this.country=t.country},handleSelectionChange:function(t){this.multipleSelection=t},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}))},exportTableData:function(){var t,e=this;if(null===(t=this.tableData)||void 0===t||!t.length)return this.$message("暂无数据导出");var i="<tr>\n          <td>站点</td>\n          <td>店铺名</td>\n          <td>主图</td>\n          <td>类目</td>\n          <td>上家类型</td>\n          <td>上家链接</td>\n          <td>itemID</td>\n          <td>itemID链接</td>\n          <td>价格</td>\n          <td>库存</td>\n          <td>标题</td>\n          <td>状态</td>\n          <td>创建时间</td>\n          <td>更新时间</td>\n          <td>销售量</td>\n          <td>访客量</td>\n          <td>粉丝量</td>\n        </td>";this.tableData.forEach((function(t){i+="<tr>\n        <td>".concat(t.country?e.$filters.chineseSite(t.country):"\t","</td>\n        <td>").concat(t.mallName?t.mallName:"\t","</td>\n        <td>").concat(t.images?e.$filters.imageRender([t.country,t.platform_mall_id,t.images]):"\t","</td>\n        <td>").concat(t.categoryName?t.categoryName:"\t","</td>\n        <td>").concat(t.platformTypeStr?t.platformTypeStr:"\t","</td>\n        <td>").concat(t.url?t.url:"\t","</td>\n        <td>").concat(t.id?t.id:"\t","</td>\n        <td>").concat(t.id?"".concat(e.$filters.countryShopeebuyCom(t.country),"/product/").concat(t.platform_mall_id,"/").concat(t.id):"\t","</td>\n        <td>").concat(t.price?t.price:"\t","</td>\n        <td>").concat(t.stock?t.stock:"\t","</td>\n        <td>").concat(t.name?t.name:"\t","</td>\n        <td>").concat(t.status?e.statusObj[t.status]:"\t","</td>\n        <td>").concat(t.create_time?e.$dayjs(t.create_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(t.modify_time?e.$dayjs(t.modify_time).format("YYYY-MM-DD HH:mm:ss"):"\t","</td>\n        <td>").concat(t.sold?t.sold:"\t","</td>\n        <td>").concat(t.view_count?t.view_count:"\t","</td>\n        <td>").concat(t.like_count?t.like_count:"\t","</td>\n        </tr>")})),Object(p["h"])("商品列表数据",i)},copy:function(t){var e=document.createElement("div");e.id="tempTarget",e.style.opacity="0",e.innerText=t,document.body.appendChild(e);try{var i=document.createRange();i.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(i),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(a){}e.parentElement.removeChild(e)}}},h=m,g=(i("f1f2"),i("2877")),f=Object(g["a"])(h,a,r,!1,null,"73c6dc9e",null);e["default"]=f.exports},8992:function(t,e,i){"use strict";i("4c28")},9772:function(t,e,i){},ace8:function(t,e,i){},b0bd:function(t,e,i){"use strict";i("9772")},eb09:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"category-mapp"},[i("div",{staticClass:"category_dialog"},[i("div",{staticClass:"category_box"},[i("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[i("div",{staticClass:"keepRight"},[t._v("店铺站点：")]),t.country?i("div",[t._v(t._s(t._f("chineseSite")(t.country)))]):i("div",[i("el-select",{attrs:{size:"mini",filterable:""},model:{value:t.countryOption,callback:function(e){t.countryOption=e},expression:"countryOption"}},t._l(t.countriesOption,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)]),t._l(t.categoryList,(function(e,a){return i("div",{key:a,staticClass:"on_new_dialog_box"},[i("div",{staticClass:"keepRight"},[t._v(t._s(a+1)+"级类目：")]),i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini"},on:{change:function(e){return t.setCategory(t.categoryAction[a],a)}},model:{value:t.categoryAction[a],callback:function(e){t.$set(t.categoryAction,a,e)},expression:"categoryAction[index]"}},t._l(e,(function(t){return i("el-option",{key:t.id,attrs:{label:t.category_name+"("+t.category_cn_name+")",value:t.category_id}})})),1)],1)}))],2),i("div",{staticClass:"category_box",staticStyle:{"margin-left":"20px"}},[t._m(0),t._l(t.attributesList,(function(e,a){return i("div",{key:a,staticClass:"on_new_dialog_box line_height_28"},[i("div",{staticClass:"width_single_150"},[t._v(t._s(e.attribute_name)+"("+t._s(e.attribute_cn_name)+")")]),i("div",[i("el-select",{staticStyle:{width:"180px"},attrs:{size:"mini"},model:{value:e.options,callback:function(i){t.$set(e,"options",i)},expression:"item.options"}},t._l(e.new_options_obj,(function(t){return i("el-option",{key:t.value_id,attrs:{label:t.value,value:t.value_id}})})),1)],1)])}))],2)]),i("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-top":"25px","justify-content":"space-evenly"}},[t.mallList[0]?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmCategory(0)}}},[t._v("　刷　新　")]):t._e(),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.confirmCategory()}}},[t._v("　确　定　")]),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$emit("categoryChange","")}}},[t._v("　取　消　")])],1)])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"on_new_dialog_box",staticStyle:{"margin-bottom":"10px"}},[i("div",{staticClass:"width_single_150"},[t._v("属性名称：")]),i("div",[t._v("属性值"),i("span",{staticStyle:{color:"red"}},[t._v("(必填)")])])])}],n=i("1da1"),o=(i("159b"),i("7db0"),i("b0c0"),i("c740"),i("a434"),i("96cf"),{name:"category-mapping",props:{country:{type:String,default:function(){return""}},goodsCurrent:{type:Object,default:function(){return{}}},mallList:{type:Array,default:function(){return[]}}},data:function(){return{countriesOption:this.$filters.countries_option,countryOption:"TH",categoryAction:[],attributesCurrent:[],categoryList:[],attributesList:[]}},watch:{countryOption:function(t){this.enterCategory()}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.enterCategory();case 2:case"end":return e.stop()}}),e)})))()},methods:{confirmCategory:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,r,n,o,s,c,l,u,p,d,m,h,g,f,b,v,y,_,x;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:-1,r=e.country||e.countryOption,!(e.goodsCurrent&&a<0)){i.next=10;break}n=[],o=[],e.categoryList.forEach((function(t,i){var a=t.find((function(t){return t.category_id===e.categoryAction[i]}));n.push(a)})),e.attributesList.forEach((function(t,e){var i=t.new_options_obj.find((function(e){return e.value_id===t.options}));o.push(i)})),e.$emit("categoryChange",{categoryList:n,attributesList:o}),i.next=47;break;case 10:return s=e.mallList[a],c=e.categoryAction[e.categoryAction.length-1],l={mallId:s.platform_mall_id,category_ids:c,brand_status:1,cursor:0,limit:100},i.next=15,e.$shopeemanService.getBrandList(r,l,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 15:if(u=i.sent,p=JSON.parse(u),!(p.status>=200&&p.status<=300)){i.next=46;break}if(d=JSON.parse(p.data),0!==d.code){i.next=43;break}return m=d.data&&d.data.list[0]&&d.data.list[0].brand_list,h=[],m.forEach((function(t){h.push({value:t.name,value_id:t.brand_id})})),g=[{category_id:c,attribute_id:0,is_mandatory:1,attribute_name:"Brand",attribute_cn_name:"品牌",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(h),attribute_label:"",is_key_attribute:1}],i.prev=24,i.next=27,e.$shopeemanService.getAttributeTree(r,l,{headers:{"Content-Type":"text/plain; charset=UTF-8"}});case 27:f=i.sent,b=JSON.parse(f),v=JSON.parse(b.data),y=v&&v.data&&v.data.list[0]&&v.data.list[0].attribute_tree||[],y.forEach((function(t){var e=[];t.children.forEach((function(t){e.push({value:t.display_name||t.name,value_id:t.value_id})})),g.push({category_id:c,attribute_id:t.attribute_id,is_mandatory:t.mandatory?1:0,attribute_name:t.display_name||t.name,attribute_cn_name:"",attribute_type:"STRING_TYPE",country:r,options:JSON.stringify(e),attribute_label:"",is_key_attribute:0})})),i.next=36;break;case 34:i.prev=34,i.t0=i["catch"](24);case 36:return i.prev=36,i.next=39,e.$commodityService.uploadCateGoryAttr(g);case 39:return _=i.sent,x=JSON.parse(_),200===x.code?e.$message.success("同步成功"):e.$message.error("同步失败"),i.finish(36);case 43:e.$emit("categoryChange",""),i.next=47;break;case 46:e.confirmCategory(++a);case 47:case"end":return i.stop()}}),i,null,[[24,34,36,43]])})))()},getAttribute:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.categoryAction[t.categoryAction.length-1]+"",a=t.country||t.countryOption,e.next=4,t.$commodityService.getAttributeInfo(a,i);case 4:r=e.sent,n=JSON.parse(r),t.attributesList=[],200===n.code&&(o=n.data&&n.data.attributes,o.forEach((function(e){var i=t.attributesCurrent.findIndex((function(t){return t.attribute_id===e.attribute_id})),a=t.attributesCurrent[i]&&t.attributesCurrent[i].value_id||0;e.new_options_obj=e.new_options&&JSON.parse(e.new_options)||[],e.options=i>-1&&parseInt(a)||e.new_options_obj[0]&&e.new_options_obj[0].value_id,t.attributesList.push(e)})),t.attributesCurrent=[]);case 8:case"end":return e.stop()}}),e)})))()},setCategory:function(t,e){this.categoryList.splice(e+1,this.categoryList.length-e),this.categoryAction.splice(e+1,this.categoryAction.length-e),this.enterCategory(t+"",++e)},enterCategory:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,r,n,o,s,c,l,u,p,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:"0",r=t.length>1&&void 0!==t[1]?t[1]:0,n=t.length>2&&void 0!==t[2]?t[2]:null,o=e.country||e.countryOption,0!==r){i.next=12;break}if(e.categoryAction=n&&n.categoryIdList||[],!e.goodsCurrent||!e.goodsCurrent.goodsId){i.next=12;break}return i.next=9,e.$commodityService.getCategoryRelation(e.goodsCurrent.originCategoryId,o,e.goodsCurrent.platform+"");case 9:s=i.sent,c=JSON.parse(s),e.attributesCurrent=c.data&&c.data.attributes||[];case 12:return l=JSON.parse(JSON.stringify(e.categoryList))||[],i.next=15,e.$commodityService.getCategoryTbInfo(o,a);case 15:u=i.sent,p=JSON.parse(u),200===p.code&&(d=p.data,d&&d.categories?(l[r]=d.categories,e.categoryList=l,e.categoryAction[r]=e.categoryAction[r]||l[r][0].category_id,e.enterCategory(e.categoryAction[r]+"",++r)):e.getAttribute());case 18:case"end":return i.stop()}}),i)})))()}}}),s=o,c=(i("b0bd"),i("2877")),l=Object(c["a"])(s,a,r,!1,null,null,null);e["a"]=l.exports},f1f2:function(t,e,i){"use strict";i("ace8")},feb6:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"storeChooseUL"},[i("li",{style:t.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:t.spanWidth}},[t._v("所属站点：")]),i("el-select",{staticClass:"siteSelectBox",attrs:{size:"mini",filterable:""},model:{value:t.countryVal,callback:function(e){t.countryVal=e},expression:"countryVal"}},[t.isAll?i("el-option",{attrs:{label:"全部",value:""}}):t._e(),t._l(t.countries,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],2)],1),i("li",{style:t.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:t.spanWidth}},[t._v("店铺分组：")]),i("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._l(t.groupIdList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.group_name,value:t.id}})}))],2)],1),i("li",{style:t.isReset&&"margin-bottom: 5px"},[i("span",{style:{width:t.spanWidth}},[t._v("店铺名称：")]),i("el-select",{staticClass:"selectBox",attrs:{placeholder:"",multiple:"","collapse-tags":"",size:"mini",filterable:""},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._l(t.siteList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.mall_alias_name||t.platform_mall_name,value:t.platform_mall_id}})}))],2)],1),t.isReset?i("li",{staticStyle:{"margin-bottom":"5px","margin-left":"25px"}},[i("el-button",{staticStyle:{"justify-self":"self-end"},attrs:{size:"mini",type:"primary"},on:{click:t.reset}},[t._v("　刷　　新　")])],1):t._e()])])},r=[],n=i("1da1"),o=(i("96cf"),i("159b"),i("fb6a"),i("d3b7"),i("25f0"),i("c740"),i("4de4"),i("7646")),s={name:"StoreChoose",props:{spanWidth:{type:String,default:"80px"},isAll:{type:Boolean,default:function(){return!1}},isReset:{type:Boolean,default:function(){return!1}},source:{type:String,default:function(){return""}}},data:function(){return{isAllowSet1:!0,isAllowSet2:!0,countryVal:null,groupId:[],groupIdList:[],site:[],siteList:[],countries:this.$filters.countries_option,mallListAPIInstance:new o["a"](this)}},watch:{countryVal:{handler:function(t,e){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},deep:!0},groupId:{handler:function(t,e){var i=this;if(this.isAllowSet2){this.isAllowSet2=!1;var a=e.indexOf("")>-1,r=t.indexOf("")>-1;a!==r?r?(this.groupId=[""],this.groupIdList.forEach((function(t){i.groupId.push(t.id)}))):this.groupId=[]:r?this.groupId=t.slice(1):this.groupIdList.length>0&&this.groupId.length===this.groupIdList.length&&this.groupId.unshift(""),setTimeout((function(){i.isAllowSet2=!0,i.ddMallGoodsGetMallList(2)}),10)}},deep:!0},site:{handler:function(t,e){var i=this;if(this.isAllowSet1){this.isAllowSet1=!1;var a=e.indexOf("")>-1,r=t.indexOf("")>-1;a!==r?r?(this.site=[""],this.siteList.forEach((function(t){i.site.push(t.platform_mall_id)}))):this.site=[]:r?this.site=t.slice(1):this.siteList.length>0&&this.siteList.length===this.site.length&&this.site.unshift(""),setTimeout((function(){i.changeMallList(),i.isAllowSet1=!0}))}},deep:!0}},mounted:function(){this.countryVal=this.isAll?"":"TH"},methods:{reset:function(){this.isAllowSet2=!1,this.groupId=[],this.groupIdList=[],this.ddMallGoodsGetMallList(1)},changeSelect:function(t){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},ddMallGoodsGetMallList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.site=[],i=e.countryVal,a=e.groupId.indexOf("")>-1&&e.groupId.slice(1).toString()||e.groupId.toString(),r={country:i,mallGroupIds:a},t.next=6,e.mallListAPIInstance.ddMallGoodsGetMallList(r);case 6:n=t.sent,200===n.code?(e.siteList=n.data,0===e.groupIdList.length&&(e.groupId=[""],e.siteList.forEach((function(t){var i=e.groupIdList.findIndex((function(e){return e.id===t.group_id}));t.group_name&&i<0&&(e.groupIdList.push({group_name:t.group_name,id:t.group_id}),e.groupId.push(t.group_id))}))),setTimeout((function(){e.isAllowSet2=!0,e.isAllowSet1=!0,e.site=[""]}),10)):e.$message.error("获取分组、店铺列表失败");case 8:case"end":return t.stop()}}),t)})))()},changeMallList:function(){var t=this,e=[],i="";this.site.forEach((function(a){if(a){var r=t.siteList.filter((function(t){return t.platform_mall_id===a}));e.push(r[0]),i+=a+","}})),!this.countryVal&&this.groupId.indexOf("")>-1&&(i=e.length!==this.siteList.length&&i||""),this.source?this.$emit("changeMallList",{mallList:e,source:this.source,searchAll:i,country:this.countryVal.toLocaleUpperCase()}):(e["country"]=this.countryVal,this.$emit("changeMallList",e))}}},c=s,l=(i("8992"),i("2877")),u=Object(l["a"])(c,a,r,!1,null,null,null);e["a"]=u.exports}}]);