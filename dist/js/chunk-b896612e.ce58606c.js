(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b896612e"],{c2d0:function(a,e,t){"use strict";t.r(e);var r=t("1da1"),l=(t("96cf"),t("99af"),t("159b"),t("a434"),t("b680"),{data:function(){return{Loading1:!1,Loading3:!1,selectall:!0,selectall1:!0,allgroupid:[],allmallid:[],tableData1:[],errmall:[],Status:"palced",total:0,Statisticaltime:"real_time",site:"TH",siteList:this.$filters.countries_option,group:0,gruopList:[],mall:[],mallList:[],start_time:1634659200,end_time:1634695200,returnStatisticaltime:[{value:"real_time",label:"实时"},{value:"yesterday",label:"昨日"},{value:"past7days",label:"近7天"},{value:"past30days",label:"近30天"}],returnStatusList:[{value:"palced",label:"下单"},{value:"confirmed",label:"确认订单"},{value:"paid",label:"付费订单"}]}},watch:{group:function(a,e){this.mall=[];for(var t=0;t<a.length;t++)if(0===a[t])this.group=this.allgroupid,this.mall=[].concat(this.allmallid),this.selectall=!1;else if(-2===a[t])this.group=[],this.mall=[],this.selectall=!0;else for(var r=0;r<this.mallList.length;r++)a[t]===this.mallList[r].group_id&&this.mall.push(this.mallList[r].value)},mall:function(a,e){for(var t=0;t<a.length;t++)0===a[t]&&(this.mall=this.allmallid,this.selectall1=!1),-2===a[t]&&(this.mall=[],this.selectall1=!0)},Statisticaltime:function(a,e){"real_time"===a?(this.start_time=1634659200,this.end_time=1634695200):"yesterday"===a||"past7days"===a?(this.start_time=1634054400,this.end_time=1634659200):"past30days"===a&&(this.start_time=1632067200,this.end_time=1634659200)},site:function(a,e){this.mall=[],this.group=[],this.getInfo()}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var a=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,l,s,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={country:a.site,mallGroupIds:a.group},e.next=3,a.$api.ddMallGoodsGetMallList(t);case 3:if(t=e.sent,a.mallList=[],a.gruopList=[],a.allgroupid=[],a.allmallid=[],200===t.data.code){for(t.data.data.forEach((function(e){e.group_id&&a.gruopList.push({label:e.group_name,value:e.group_id}),e.id&&a.mallList.push({label:e.mall_alias_name||e.platform_mall_name,value:e.platform_mall_id,group_id:e.group_id})})),r=0;r<a.gruopList.length-1;r++)for(l=r+1;l<a.gruopList.length;l++)a.gruopList[r].value===a.gruopList[l].value&&a.gruopList.splice(l,1);for(s=0;s<a.gruopList.length;s++)a.allgroupid.push(a.gruopList[s].value);for(n=0;n<a.mallList.length;n++)a.allmallid.push(a.mallList[n].value)}else a.$message.warning("店铺列表获取失败！");case 9:case"end":return e.stop()}}),e)})))()},getallinfo:function(){var a=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,l,s,n,i,c,o,u,d,p,_,b,h,g,m,y,f,v,x,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.Loading1=!0,a.Loading3=!0,a.tableData1=[],a.errmall=[],t=0;case 5:if(!(t<a.mall.length)){e.next=18;break}for(r={start_time:a.start_time,end_time:a.end_time,period:a.Statisticaltime,orderType:a.Status,mallId:a.mall[t],fetag:"fetag",limit:5},l=void 0,s=0;s<a.mallList.length;s++)a.mallList[s].value===a.mall[t]&&(l=a.mallList[s].label);return e.next=11,a.$shopeemanService.getCustomers(a.site,r,{headers:{"Content-Type":"application/json; charset=utf-8"}});case 11:if(n=e.sent,(n=JSON.parse(n)).data=JSON.parse(n.data),200===n.status){if("real_time"===a.Statisticaltime)for(i in n.data)"buyers"===i&&(c="",0<n.data.buyers_change?c="↑":n.data.buyers_change<0&&(c="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data.buyers_change).toFixed(2),"% ").concat(c,"</pre>")),"new_buyers"===i&&(o="",0<n.data.new_buyers_rate?o="↑":n.data.new_buyers_rate<0&&(o="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data.new_buyers_rate).toFixed(2),"% ").concat(o,"</pre>")),"existing_buyers"===i&&(o="",0<n.data.existing_buyers_rate?o="↑":n.data.existing_buyers_rate<0&&(o="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data.existing_buyers_rate).toFixed(2),"% ").concat(o,"</pre>")),"potential_buyers"===i&&(u="",0<n.data.potential_buyers_change?u="↑":n.data.potential_buyers_change<0&&(u="↓"),n.data[i]="<pre>".concat(n.data[i],"\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data.potential_buyers_change).toFixed(2),"% ").concat(u,"</pre>")),"repeat_purchase_rate"===i&&(u="",0<n.data.repeat_purchase_rate_change?u="↑":n.data.repeat_purchase_rate_change<0&&(u="↓"),n.data[i]="<pre>".concat((100*n.data[i]).toFixed(2),"%\nvs 00:00 - 13:00 ").concat(Math.abs(100*n.data.repeat_purchase_rate_change).toFixed(2),"% ").concat(u,"</pre>"));if("yesterday"===a.Statisticaltime)for(d in n.data)"buyers"===d&&(p="",0<n.data.buyers_change?p="↑":n.data.buyers_change<0&&(p="↓"),n.data[d]="<pre>".concat(n.data[d],"\nvs 前一天 ").concat(Math.abs(100*n.data.buyers_change).toFixed(2),"% ").concat(p,"</pre>")),"new_buyers"===d&&(_="",0<n.data.new_buyers_rate?_="↑":n.data.new_buyers_rate<0&&(_="↓"),n.data[d]="<pre>".concat(n.data[d],"\nvs 前一天 ").concat(Math.abs(100*n.data.new_buyers_rate).toFixed(2),"% ").concat(_,"</pre>")),"existing_buyers"===d&&(_="",0<n.data.existing_buyers_rate?_="↑":n.data.existing_buyers_rate<0&&(_="↓"),n.data[d]="<pre>".concat(n.data[d],"\nvs 前一天 ").concat(Math.abs(100*n.data.existing_buyers_rate).toFixed(2),"% ").concat(_,"</pre>")),"potential_buyers"===d&&(b="",0<n.data.potential_buyers_change?b="↑":n.data.potential_buyers_change<0&&(b="↓"),n.data[d]="<pre>".concat(n.data[d],"\nvs 前一天 ").concat(Math.abs(100*n.data.potential_buyers_change).toFixed(2),"% ").concat(b,"</pre>")),"repeat_purchase_rate"===d&&(b="",0<n.data.repeat_purchase_rate_change?b="↑":n.data.repeat_purchase_rate_change<0&&(b="↓"),n.data[d]="<pre>".concat((100*n.data[d]).toFixed(2),"%\nvs 前一天 ").concat(Math.abs(100*n.data.repeat_purchase_rate_change).toFixed(2),"% ").concat(b,"</pre>"));if("past7days"===a.Statisticaltime)for(h in n.data)"buyers"===h&&(g="",0<n.data.buyers_change?g="↑":n.data.buyers_change<0&&(g="↓"),n.data[h]="<pre>".concat(n.data[h],"\nvs 前7天 ").concat(Math.abs(100*n.data.buyers_change).toFixed(2),"% ").concat(g,"</pre>")),"new_buyers"===h&&(m="",0<n.data.new_buyers_rate?m="↑":n.data.new_buyers_rate<0&&(m="↓"),n.data[h]="<pre>".concat(n.data[h],"\nvs 前7天 ").concat(Math.abs(100*n.data.new_buyers_rate).toFixed(2),"% ").concat(m,"</pre>")),"existing_buyers"===h&&(m="",0<n.data.existing_buyers_rate?m="↑":n.data.existing_buyers_rate<0&&(m="↓"),n.data[h]="<pre>".concat(n.data[h],"\nvs 前7天 ").concat(Math.abs(100*n.data.existing_buyers_rate).toFixed(2),"% ").concat(m,"</pre>")),"potential_buyers"===h&&(y="",0<n.data.potential_buyers_change?y="↑":n.data.potential_buyers_change<0&&(y="↓"),n.data[h]="<pre>".concat(n.data[h],"\nvs 前7天 ").concat(Math.abs(100*n.data.potential_buyers_change).toFixed(2),"% ").concat(y,"</pre>")),"repeat_purchase_rate"===h&&(y="",0<n.data.repeat_purchase_rate_change?y="↑":n.data.repeat_purchase_rate_change<0&&(y="↓"),n.data[h]="<pre>".concat((100*n.data[h]).toFixed(2),"%\nvs 前7天 ").concat(Math.abs(100*n.data.repeat_purchase_rate_change).toFixed(2),"% ").concat(y,"</pre>"));if("past30days"===a.Statisticaltime)for(f in n.data)"buyers"===f&&(v="",0<n.data.buyers_change?v="↑":n.data.buyers_change<0&&(v="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前30天 ").concat(Math.abs(100*n.data.buyers_change).toFixed(2),"% ").concat(v,"</pre>")),"new_buyers"===f&&(x="",0<n.data.new_buyers_rate?x="↑":n.data.new_buyers_rate<0&&(x="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前30天 ").concat(Math.abs(100*n.data.new_buyers_rate).toFixed(2),"% ").concat(x,"</pre>")),"existing_buyers"===f&&(x="",0<n.data.existing_buyers_rate?x="↑":n.data.existing_buyers_rate<0&&(x="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前30天 ").concat(Math.abs(100*n.data.existing_buyers_rate).toFixed(2),"% ").concat(x,"<pre>")),"potential_buyers"===f&&(w="",0<n.data.potential_buyers_change?w="↑":n.data.potential_buyers_change<0&&(w="↓"),n.data[f]="<pre>".concat(n.data[f],"\nvs 前30天 ").concat(Math.abs(100*n.data.potential_buyers_change).toFixed(2),"% ").concat(w,"</pre>")),"repeat_purchase_rate"===f&&(w="",0<n.data.repeat_purchase_rate_change?w="↑":n.data.repeat_purchase_rate_change<0&&(w="↓"),n.data[f]="<pre>".concat((100*n.data[f]).toFixed(2),"%\nvs 前30天 ").concat(Math.abs(100*n.data.repeat_purchase_rate_change).toFixed(2),"% ").concat(w,"</pre>"));n.data.mallname=l,a.tableData1.push(n.data)}else 2===n.data.errcode&&a.errmall.push(l);case 15:t++,e.next=5;break;case 18:0<a.errmall.length&&a.$message.error("店铺【".concat(a.errmall,"】未登录")),a.Loading1=!1,a.Loading3=!1;case 21:case"end":return e.stop()}}),e)})))()}}});t("d71a"),t=t("2877"),l=Object(t.a)(l,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-row",{staticClass:"contaniner"},[t("el-row",{staticClass:"header"},[t("ul",{staticStyle:{"margin-bottom":"10px"}},[t("li",[t("span",[a._v("站点：")]),t("el-select",{attrs:{size:"mini",filterable:""},model:{value:a.site,callback:function(e){a.site=e},expression:"site"}},a._l(a.siteList,(function(a,e){return t("el-option",{key:e,attrs:{value:a.value,label:a.label}})})),1)],1),t("li",[t("span",[a._v("店铺分组：")]),t("el-select",{attrs:{placeholder:"请选择分组",multiple:"","collapse-tags":"",clearable:"",size:"medium",filterable:""},model:{value:a.group,callback:function(e){a.group=e},expression:"group"}},[a.selectall?t("el-option",{attrs:{label:"全部",value:0}}):a._e(),a.selectall?a._e():t("el-option",{attrs:{label:"全部",value:-2}}),a._l(a.gruopList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})}))],2)],1),t("li",[t("span",[a._v("店铺：")]),t("el-select",{attrs:{placeholder:"请选择店铺",multiple:"","collapse-tags":"",clearable:"",size:"medium",filterable:""},model:{value:a.mall,callback:function(e){a.mall=e},expression:"mall"}},[a.selectall1?t("el-option",{attrs:{label:"全部",value:0}}):a._e(),a.selectall1?a._e():t("el-option",{attrs:{label:"全部",value:-2}}),a._l(a.mallList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})}))],2)],1),t("li",[t("span",[a._v("统计时间：")]),t("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:a.Statisticaltime,callback:function(e){a.Statisticaltime=e},expression:"Statisticaltime"}},a._l(a.returnStatisticaltime,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})})),1)],1),t("li",[t("span",[a._v("订单类型：")]),t("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:a.Status,callback:function(e){a.Status=e},expression:"Status"}},a._l(a.returnStatusList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.label,value:a.value}})})),1)],1),t("li",[t("el-button",{attrs:{type:"primary",disabled:a.Loading1,size:"mini"},on:{click:a.getallinfo}},[a._v("搜索")])],1)]),t("br"),t("div",{staticStyle:{border:"1px solid black",width:"100%"}},[t("span",{staticStyle:{"margin-left":"20px"}},[a._v("客服数据")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.Loading3,expression:"Loading3"}],ref:"plTable",staticStyle:{"margin-top":"10px"},attrs:{"header-align":"center",height:"calc(100vh - 140px)",data:a.tableData1,"header-cell-style":{backgroundColor:"#f5f7fa"}}},[t("el-table-column",{attrs:{align:"center",label:"店铺名称",width:"280",prop:"mallname",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"buyers",label:"买家总数",width:"280",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){return e=e.row,[t("div",{domProps:{innerHTML:a._s(e.buyers)}})]}}])}),t("el-table-column",{attrs:{align:"center",prop:"new_buyers",label:"新买家数量",width:"280",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){return e=e.row,[t("div",{domProps:{innerHTML:a._s(e.new_buyers)}})]}}])}),t("el-table-column",{attrs:{prop:"existing_buyers",label:"现有买家",width:"280",align:"center",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){return e=e.row,[t("div",{domProps:{innerHTML:a._s(e.existing_buyers)}})]}}])}),t("el-table-column",{attrs:{prop:"potential_buyers",label:"潜在买家",width:"280",align:"center",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){return e=e.row,[t("div",{domProps:{innerHTML:a._s(e.potential_buyers)}})]}}])}),t("el-table-column",{attrs:{prop:"repeat_purchase_rate",label:"重复购买率",width:"280",align:"center",sortable:""},scopedSlots:a._u([{key:"default",fn:function(e){return e=e.row,[t("div",{domProps:{innerHTML:a._s(e.repeat_purchase_rate)}})]}}])})],1)],1)])],1)}),[],!1,null,"7c0b863a",null);e.default=l.exports},c908:function(a,e,t){},d71a:function(a,e,t){"use strict";t("c908")}}]);