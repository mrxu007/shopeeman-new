(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1a3e548f"],{"0c89":function(e,t,a){"use strict";a("0df5")},"0df5":function(e,t,a){},dd8a:function(e,t,a){"use strict";a.r(t);var n=a("1da1"),r=(a("96cf"),a("a9e3"),a("159b"),a("99af"),a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("b0c0"),a("1146")),i=a.n(r),o=a("0e0b");r={data:function(){return{showConsole:!0,consoleMsg:"",batchConsoleMsg:"",dialogBanWordVisible:!1,dialogVisible:!1,page:1,total:0,pageSize:100,isloading:!1,multipleSelection:[],importTemplateData:"",dialogSite:"MY",dialogType:"1",dialogkeyWord:"",countries:this.$filters.countries_option,siteObj:this.$filters.countries_site,form:{site:"",type:"0",source:"0",keyWord:""},sourceList:[{value:"0",label:"全部"},{value:"-1",label:"系统"},{value:"1",label:"用户"}],typeList:[{value:"0",label:"全部"},{value:"1",label:"禁运词"},{value:"2",label:"品牌词"},{value:"3",label:"违规词"}],typeObj:{"禁运词":"1","品牌词":"2","违规词":"3"},typeReObj:{1:"禁运词",2:"品牌词",3:"违规词"},tableData:[]}},mounted:function(){this.getBannedWordList()},methods:{exportSearch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.total)return t.abrupt("return",e.$message("暂无导出数据"));t.next=2;break;case 2:e.isloading=!0,a=[],n={page:1,word:e.form.keyWord,country:e.form.site,source:Number(e.form.source),type:Number(e.form.type),pageSize:200};case 5:if(a.length<e.total)return t.prev=6,t.next=9,e.$commodityService.getBannedWordList(n);t.next=22;break;case 9:r=t.sent,JSON.parse(r).data.data.forEach((function(e){a.push(e)})),n.page++,t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(6),e.$message.error("导出数据错误"),e.isloading=!1,t.abrupt("break",22);case 20:t.next=5;break;case 22:i="<tr>\n          <td>站点</td>\n          <td>词来源</td>\n          <td>词类型</td>\n          <td>关键词</td>\n          <td>添加时间</td>\n      </tr>",a.forEach((function(t){i+="<tr>\n        <td>".concat(t.country?e.$filters.chineseSite(t.country):"\t","</td>\n        <td>").concat(0===t.uid?"系统":"用户\t","</td>\n        <td>").concat(t.type?e.typeReObj[t.type]:"\t","</td>\n        <td>").concat(t.word||"\t","</td>\n        <td>").concat(t.created_at?t.created_at.replace("T"," ").replace("Z",""):"\t","</td>\n        </tr>")})),Object(o.h)("品牌词库",i),e.isloading=!1;case 26:case"end":return t.stop()}}),t,null,[[6,15]])})))()},batchDelete:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.multipleSelection.length<=0)return t.abrupt("return",e.$message("请选择要删除的数据"));t.next=2;break;case 2:a=0;case 3:if(!(a<e.multipleSelection.length)){t.next=16;break}if(0===(n=e.multipleSelection[a]).uid)return e.$refs.Logs.writeLog("违规词来源【系统】不可删除",!0),t.abrupt("continue",13);t.next=8;break;case 8:return t.next=10,e.$commodityService.deleteDannedWord(n.id);case 10:r=t.sent,200===(r=JSON.parse(r)).code?e.$refs.Logs.writeLog("违规词【".concat(n.word,"】删除成功"),!0):e.$refs.Logs.writeLog("违规词【".concat(n.word,"】删除失败 ").concat(r.msg),!1);case 13:a++,t.next=3;break;case 16:e.showConsole=!1,e.getBannedWordList();case 18:case"end":return t.stop()}}),t)})))()},downloadTemplate:function(){Object(o.h)("SHOPEE品牌词模板",'\n      <tr>\n        <td style="width: 500px">站点(马来站,台湾站,新加坡站,菲律宾站,泰国站,越南站,印尼站,巴西站)<span style="color:red">（必填）</span></td>\n        <td>关键词类型(违规词,品牌词,禁运词)<span style="color:red">（必填）</span></td>\n        <td>关键词<span style="color:red">（必填）</span></td>\n      </tr>\n      <tr>\n        <td>台湾站</td>\n        <td>违规词</td>\n        <td>食品</td>\n      </tr>\n      ')},batchImport:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n,r,i,o,l,s,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.importTemplateData.length)<=0)return e.batchWriteLog("表格数据为空",!1),t.abrupt("return");t.next=4;break;case 4:r=n=0,e.batchWriteLog("开始导入禁售词"),i=0;case 8:if(!(i<a)){t.next=57;break}if(c=e.importTemplateData[i],o=c["站点(马来站,台湾站,新加坡站,菲律宾站,泰国站,越南站,印尼站,巴西站)（必填）"],l=c["关键词类型(违规词,品牌词,禁运词)（必填）"],s=c["关键词（必填）"],o){t.next=17;break}return r++,e.batchWriteLog("【".concat(i+1,"】未找到站点(马来站,台湾站,新加坡站,菲律宾站,泰国站,越南站,印尼站,巴西站)（必填）"),!1),t.abrupt("continue",54);case 17:if(l){t.next=21;break}return r++,e.batchWriteLog("【".concat(i+1,"】未找到关键词类型(违规词,品牌词,禁运词)（必填）"),!1),t.abrupt("continue",54);case 21:if(s){t.next=25;break}return r++,e.batchWriteLog("【".concat(i+1,"】未找到关键词（必填）"),!1),t.abrupt("continue",54);case 25:if(e.siteObj[o]){t.next=29;break}return r++,e.batchWriteLog("【".concat(i+1,"】站点参数错误"),!1),t.abrupt("continue",54);case 29:if(e.typeObj[l]){t.next=33;break}return r++,e.batchWriteLog("【".concat(i+1,"】关键词类型参数错误"),!1),t.abrupt("continue",54);case 33:return c={word:s.toString(),country:e.siteObj[o],type:e.typeObj[l]},t.prev=34,t.next=37,e.$commodityService.addBannedWord(c);case 37:if(d=t.sent,200!==(d=JSON.parse(d)).code){t.next=48;break}if(1===d.data)return e.batchWriteLog("【".concat(i+1,"】站点【").concat(o,"】 禁售词【").concat(s,"】 重复添加"),!1),r++,t.abrupt("continue",54);t.next=44;break;case 44:n++,e.batchWriteLog("【".concat(i+1,"】站点【").concat(o,"】 添加禁售词【").concat(s,"】 成功"),!0),t.next=49;break;case 48:e.$refs.Logs.writeLog("【".concat(i+1,"】站点【").concat(o,"】 禁售词【").concat(s,"】添加失败 ").concat(d.msg),!1);case 49:t.next=54;break;case 51:t.prev=51,t.t0=t.catch(34),e.batchWriteLog("".concat(t.t0),!1);case 54:i++,t.next=8;break;case 57:e.getBannedWordList(),e.batchWriteLog("导入总数：".concat(a,"，成功数：").concat(n,"，失败数：").concat(r));case 59:case"end":return t.stop()}}),t,null,[[34,51]])})))()},addBannedWord:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogkeyWord){t.next=2;break}return t.abrupt("return",e.$message("请填写禁售词"));case 2:return a={word:e.dialogkeyWord,country:e.dialogSite,type:e.dialogType},t.prev=3,t.next=6,e.$commodityService.addBannedWord(a);case 6:if(n=t.sent,200!==(n=JSON.parse(n)).code){t.next=15;break}if(1===n.data)return t.abrupt("return",e.$message.error("不可重复添加"));t.next=11;break;case 11:e.$message.success("添加成功"),e.getBannedWordList(),t.next=16;break;case 15:e.$message.success("添加失败"+n.msg);case 16:t.next=20;break;case 18:t.prev=18,t.t0=t.catch(3);case 20:e.dialogVisible=!1;case 21:case"end":return t.stop()}}),t,null,[[3,18]])})))()},getBannedWordList:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,a={page:e.page,perpage:e.pageSize,word:e.form.keyWord,country:e.form.site,source:Number(e.form.source),type:Number(e.form.type)},t.prev=2,t.next=5,e.$commodityService.getBannedWordList(a);case 5:a=t.sent,200===(a=JSON.parse(a)).code?(e.tableData=a.data.data,e.total=a.data.total):e.$message.error("获取数据失败:".concat(a.msg)),e.isloading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),e.tableData=[],e.$message.error("获取数据失败"),e.isloading=!1;case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))()},importTemplateEvent:function(e){var t=this,a={0:e.raw};if(!/\.(xls|xlsx)$/.test(a[0].name.toLowerCase()))return this.$refs.Logs.writeLog("格式错误,请上传xls、xlsx格式的文件",!1),void(this.showConsole=!1);a.length<=0?this.$refs.Logs.writeLog("表格为空",!1):((e=new FileReader).onload=function(e){var a=e.target.result;e=i.a.read(a,{type:"binary"}),a=e.SheetNames[0],a=i.a.utils.sheet_to_json(e.Sheets[a]);t.importTemplateData=a,t.batchImport(),t.$refs.importRef.value=""},e.readAsBinaryString(a[0]))},batchWriteLog:function(e){e&&(this.batchConsoleMsg='<p style="color:'.concat(1<arguments.length&&void 0!==arguments[1]&&!arguments[1]?"red":"green",'; margin-top: 8px;">').concat(e,"</p>")+this.batchConsoleMsg)},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.page=e,this.getBannedWordList()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.getBannedWordList()},dialogClose:function(){this.batchConsoleMsg="",this.showConsole=!0,this.dialogkeyWord="",this.dialogSite="MY",this.dialogType="1"}}},a("0c89"),a=a("2877"),r=Object(a.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contaniner"},[a("div",{staticClass:"operation"},[a("div",{staticClass:"o-item"},[a("span",{staticStyle:{"white-space":"nowrap"}},[e._v("站点：")]),a("el-select",{staticClass:"unnormal",staticStyle:{width:"100px"},attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.site,callback:function(t){e.$set(e.form,"site",t)},expression:"form.site"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("div",{staticClass:"o-item"},[a("span",{staticStyle:{"min-width":"84px"}},[e._v("关键字类别：")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"o-item"},[a("span",{staticStyle:{"min-width":"57px"}},[e._v("词来源：")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}},e._l(e.sourceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"o-item"},[a("span",{staticStyle:{"min-width":"57px"}},[e._v("关键词：")]),a("el-input",{staticStyle:{width:"130px"},attrs:{size:"mini",placeholder:"请输入关键词",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.keyWord,callback:function(t){e.$set(e.form,"keyWord",t)},expression:"form.keyWord"}})],1),a("div",{staticClass:"o-item"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.page=1,e.getBannedWordList()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.batchDelete()}}},[e._v("批量删除")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogBanWordVisible=!0}}},[e._v(" 批量导入 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.exportSearch()}}},[e._v("导出数据")]),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}},[e._v("隐藏日志")])],1),a("div",{staticClass:"o-item"})]),a("div",{staticClass:"table-content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isloading,expression:"isloading"}],attrs:{data:e.tableData,height:"calc(100vh - 145px)",border:!1,"header-cell-style":{textAlign:"center",backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center","min-width":"55",fixed:""}}),a("el-table-column",{attrs:{prop:"country",align:"center",label:"站点","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(e._f("chineseSite")(t.country))+" ")]}}])}),a("el-table-column",{attrs:{prop:"uid",align:"center",label:"词来源","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(0===t.uid?"系统":"用户")+" ")]}}])}),a("el-table-column",{attrs:{prop:"type",align:"center",label:"词类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.type?e.typeReObj[t.type]:"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"word",align:"center","show-overflow-tooltip":"",label:"关键词","min-width":"180"}}),a("el-table-column",{attrs:{prop:"created_at",align:"center","show-overflow-tooltip":"",label:"添加时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.created_at?t.created_at.replace("T"," ").replace("Z",""):"")+" ")]}}])})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[100,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"dialog-content"},[a("el-dialog",{attrs:{title:"添加禁售词",visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[a("span",[a("el-form",{staticStyle:{"margin-left":"-30px"},attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"站点:"}},[a("el-select",{staticClass:"unnormal",attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.dialogSite,callback:function(t){e.dialogSite=t},expression:"dialogSite"}},e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"类别:"}},[a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.dialogType,callback:function(t){e.dialogType=t},expression:"dialogType"}},e._l(e.typeList.slice(1),(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"关键词:"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini",placeholder:"请输入关键词",clearable:"",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.dialogkeyWord,callback:function(t){e.dialogkeyWord=t},expression:"dialogkeyWord"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"-10px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addBannedWord()}}},[e._v("确 定")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)])],1),a("div",{staticClass:"dialog-ban-content"},[a("el-dialog",{attrs:{title:"批量导入禁售词",visible:e.dialogBanWordVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogBanWordVisible=t},close:e.dialogClose}},[a("div",{staticStyle:{display:"flex"}},[a("el-upload",{ref:"importRef",attrs:{accept:".xlsx,.xls",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.importTemplateEvent,"show-file-list":!1,"auto-upload":!1}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{data:e.importTemplateData,size:"mini",type:"primary"}},[e._v(" 批量导入 ")])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.downloadTemplate()}}},[e._v("下载模板")])],1),a("span",[a("div",{staticClass:"text-log-content",domProps:{innerHTML:e._s(e.batchConsoleMsg)}})]),a("span",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogBanWordVisible=!1}}},[e._v("关闭")])],1)])],1),a("div",{staticClass:"logging"},[a("Logs",{ref:"Logs",attrs:{clear:""},model:{value:e.showConsole,callback:function(t){e.showConsole=t},expression:"showConsole"}})],1)])}),[],!1,null,null,null);t.default=r.exports}}]);