(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7420ca91"],{"58a0":function(e,t,a){"use strict";a("b10c")},b10c:function(e,t,a){},d194:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"contaniner"},[a("el-row",{staticClass:"header"},[a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("二次销售状态：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.returnStatus,callback:function(t){e.$set(e.form,"returnStatus",t)},expression:"form.returnStatus"}},[a("el-option",{attrs:{label:"全部",value:-1}}),e._l(e.returnStatusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",[a("span",[e._v("商品ID：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.returnGoodsId,callback:function(t){e.$set(e.form,"returnGoodsId",t)},expression:"form.returnGoodsId"}})],1),a("li",[a("span",[e._v("包裹创建时间：")]),a("el-date-picker",{attrs:{"unlink-panels":"",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.returnCreateTime,callback:function(t){e.$set(e.form,"returnCreateTime",t)},expression:"form.returnCreateTime"}})],1)]),a("ul",{staticStyle:{"margin-bottom":"10px"}},[a("li",[a("span",[e._v("二次销售类型：")]),a("el-select",{attrs:{placeholder:"",size:"mini",filterable:""},model:{value:e.form.returnType,callback:function(t){e.$set(e.form,"returnType",t)},expression:"form.returnType"}},[a("el-option",{attrs:{label:"全部",value:-1}}),e._l(e.returnType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1),a("li",{staticStyle:{"margin-left":"3px"}},[a("span",[e._v("SkuID：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.returnSkuId,callback:function(t){e.$set(e.form,"returnSkuId",t)},expression:"form.returnSkuId"}})],1),a("li",[a("span",[e._v("平台物流单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.returnLogisticsDocNum,callback:function(t){e.$set(e.form,"returnLogisticsDocNum",t)},expression:"form.returnLogisticsDocNum"}})],1),a("li",[a("span",[e._v("主订单号：")]),a("el-input",{attrs:{clearable:"",size:"mini",oninput:"value=value.replace(/\\s+/g,'')"},model:{value:e.form.returnMainOrderNum,callback:function(t){e.$set(e.form,"returnMainOrderNum",t)},expression:"form.returnMainOrderNum"}})],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:e.Loading1,size:"mini"},on:{click:e.getSencondSales}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.Loading2},on:{click:e.DerivedData}},[e._v("导出数据")])],1)]),a("ul",[a("span",{staticStyle:{color:"red","margin-top":"10px"}},[e._v("温馨提示：此模块展示数据为海外仓退回仓库的包裹数据，若需将此模块包裹数据进行二次销售，请前往【订单管理】使用二次销售功能进行匹配（不支持拆包出库）")])])]),a("el-row",{attrs:{id:"article"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.Loading3,expression:"Loading3"}],ref:"plTable",attrs:{"header-align":"center",height:"calc(100vh - 230px)",data:e.tableData,"header-cell-style":{backgroundColor:"#f5f7fa"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection","min-width":"50px"}}),a("el-table-column",{attrs:{align:"center",label:"序号",type:"index","min-width":"50px",fixed:""}}),a("el-table-column",{attrs:{align:"center",label:"站点","min-width":"70px",prop:"country",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e._f("chineseSite")(n.country)))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"receive_warehouse_name",label:"包裹所在仓库","min-width":"150px",fixed:""}}),a("el-table-column",{attrs:{align:"center",prop:"platform_tracking_number",label:"平台物流单号","min-width":"150px","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"order_sn",label:"订单编号","min-width":"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[n.order_sn?a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(n.order_sn)}}},[a("i",{staticClass:"el-icon-document-copy"}),e._v(" "+e._s(n.order_sn)+" ")]):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"二次销售类型","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.returnType[n.type].label))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"二次销售状态","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.returnStatusList[n.status].label))])]}}])}),a("el-table-column",{attrs:{prop:"goods_id",label:"商品ID","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[n.goods_id?a("span",{staticClass:"copyIcon",on:{click:function(t){return e.copy(n.goods_id)}}},[a("i",{staticClass:"el-icon-document-copy"})]):e._e(),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return e.open(n)}}},[e._v(" "+e._s(n.goods_id)+" ")])],1)]}}])}),a("el-table-column",{attrs:{prop:"goods_img",label:"商品图片","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticStyle:{width:"56px",height:"56px",display:"inline-block"},attrs:{effect:"light",placement:"right-end","visible-arrow":!1,enterable:!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{src:e._f("imageRender")([t.row.goods_img])}})],1),a("el-image",{staticStyle:{width:"56px",height:"56px"},attrs:{src:e._f("imageRender")([t.row.goods_img,!0])}})],1)]}}])}),a("el-table-column",{attrs:{prop:"goods_count",label:"商品数量","min-width":"120px",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.goods_price)+e._s(e._f("siteCoin")(n.country)))])]}}])}),a("el-table-column",{attrs:{label:"商品规格","min-width":"180px",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.variation_sku?a.variation_sku:a.variation_name)+" ")]}}])}),a("el-table-column",{attrs:{prop:"variation_id",label:"商品货号（skuid）","min-width":"140px",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.goods_name?a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{width:"200px",height:"auto"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(n.goods_name))]),a("el-button",{staticClass:"bindmallclass",attrs:{type:"text"}},[e._v(e._s(n.goods_name))])],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"return_create_time",label:"包裹创建时间","min-width":"150px",align:"center"}}),a("el-table-column",{attrs:{prop:"expired_at",label:"过期时间","min-width":"180px",align:"center"}}),a("el-table-column",{attrs:{prop:"expired_tip",label:"过期提醒","min-width":"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{style:{color:"即将过期"===n.expired_tip?"red":""}},[e._v(e._s(n.expired_tip))])]}}])}),a("el-table-column",{attrs:{prop:"ext.free_storage_days",label:"免租天数","min-width":"100px",align:"center"}}),a("el-table-column",{attrs:{prop:"resale_order_sn",label:"二次销售订单号","min-width":"150px",align:"center"}}),a("el-table-column",{attrs:{prop:"operation_type",label:"操作状态","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[-1===n.operation_type?a("span",[e._v("-")]):0===n.operation_type?a("span",[e._v("上架")]):a("span",[e._v("申请下架")])]}}])}),a("el-table-column",{attrs:{prop:"operation_time",label:"操作时间","min-width":"150px",align:"center"}},[void 0],2),a("el-table-column",{attrs:{prop:"resale_order_sn",label:"操作","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[2===n.status||3===n.status||4===n.status?a("el-button",{attrs:{type:"primary",size:"mini",loading:e.Loading2},on:{click:function(t){return e.publishGoods(n,0)}}},[e._v("上架")]):e._e(),0===n.status||1===n.status||3===n.status||4===n.status?a("el-button",{attrs:{type:"primary",size:"mini",loading:e.Loading2},on:{click:function(t){return e.publishGoods(n,1)}}},[e._v("下架")]):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.page,"page-size":e.pageSize,layout:"total,sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[50,100,200]},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},r=[],o=a("2909"),i=a("1da1"),l=(a("99af"),a("159b"),a("96cf"),a("0e0b")),s={data:function(){return{Loading1:!1,Loading2:!1,Loading3:!1,tableData:[],total:0,pageSize:50,page:1,form:{returnStatus:-1,returnCreateTime:[(new Date).getTime()-2592e6,new Date],returnType:-1,returnGoodsId:"",returnSkuId:"",returnMainOrderNum:"",returnLogisticsDocNum:""},returnStatusList:[{value:0,label:"已收货或上架"},{value:1,label:"已匹配订单"},{value:2,label:"已下架"}],returnType:[{value:0,label:"未知"},{value:1,label:"跨境"},{value:2,label:"本土预售"},{value:3,label:"本土拍单"},{value:4,label:"采购物流单号"},{value:5,label:"备货暂存"}]}},mounted:function(){this.getSencondSales()},methods:{publishGoods:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$api.operationReturnPackage({id:e.id,operationType:t});case 2:r=n.sent,200===r.data.code?a.$message.success("操作成功，已通知操作人员进行包裹上架下架"):a.$message.warning("操作失败:"+r.data.message);case 4:case"end":return n.stop()}}),n)})))()},open:function(e){var t=this.$filters.countryShopeebuyCom(e.country);window.BaseUtilBridgeService.openUrl("".concat(t,"/product/").concat(e.platform_mall_id,"/").concat(e.goods_id))},getSencondSales:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.Loading1=!0,e.Loading3=!0,a=e.form.returnCreateTime?"".concat(e.$dayjs(e.form.returnCreateTime[0]).format("YYYY-MM-DD 00:00:00"),"/").concat(e.$dayjs(e.form.returnCreateTime[1]).format("YYYY-MM-DD 23:23:23")):"",n={orderSn:e.form.returnMainOrderNum,platformTrackingNumber:e.form.returnLogisticsDocNum,createTime:a,goodsId:e.form.returnGoodsId,variationId:e.form.returnSkuId,type:e.form.returnType,status:e.form.returnStatus,page:e.page,pageSize:e.pageSize},t.prev=4,t.next=7,e.$api.getsecondStroelist(n);case 7:if(r=t.sent,o=r.data,200===o.code){for(e.tableData=o.data.data,i=0;i<e.tableData.length;i++)e.tableData[i].ext&&void 0!==e.tableData[i].ext&&(e.tableData[i].ext=JSON.parse(e.tableData[i].ext)),l=new Date(e.tableData[i].expired_at).getTime(),s=(new Date).getTime(),e.tableData[i].expired_tip=l-s>2592e5?"-":l-s<2592e5&&l-s>0?"即将过期":"已过期";e.total=o.data.total}else e.$message.error("数据获取失败",o.message);t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](4);case 14:e.Loading1=!1,e.Loading3=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()},DerivedData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.total){t.next=2;break}return t.abrupt("return",e.$message("暂无导出数据"));case 2:e.Loading2=!0,a=[],n=e.form.returnCreateTime?"".concat(e.$dayjs(e.form.returnCreateTime[0]).format("YYYY-MM-DD 00:00:00"),"/").concat(e.$dayjs(e.form.returnCreateTime[1]).format("YYYY-MM-DD 23:23:23")):"",r={orderSn:e.form.returnMainOrderNum,platformTrackingNumber:e.form.returnLogisticsDocNum,createTime:n,goodsId:e.form.returnGoodsId,variationId:e.form.returnSkuId,type:e.form.returnType,status:e.form.returnStatus},r.pageSize=200,r.page=1;case 8:if(!(a.length<e.total)){t.next=31;break}return t.prev=9,t.next=12,e.$api.getsecondStroelist(r);case 12:if(i=t.sent,s=i.data,200!==s.code){t.next=19;break}a.push.apply(a,Object(o["a"])(s.data.data)),r.page++,t.next=22;break;case 19:return e.$message.error("导出数据错误",s.message),e.Loading2=!1,t.abrupt("break",31);case 22:t.next=29;break;case 24:return t.prev=24,t.t0=t["catch"](9),e.$message.error("导出数据错误"),e.Loading2=!1,t.abrupt("break",31);case 29:t.next=8;break;case 31:c="<tr>\n        <td>站点</td>\n        <td>发货仓库</td>\n        <td>收货仓库</td>\n        <td>平台物流单号</td>\n        <td>订单编号</td>\n        <td>二次销售类型</td>\n        <td>二次销售状态</td>\n        <td>商品ID</td>\n        <td>商品链接</td>\n        <td>商品数量</td>\n        <td>商品价格</td>\n        <td>价格币种</td>\n        <td>商品规格</td>\n        <td>商品货号（skuId）</td>\n        <td>商品名称</td>\n        <td>二次销售订单号</td>\n        <td>包裹创建时间</td>\n        <td>过期提醒</td>\n      </tr>",a.forEach((function(t){c+="\n        <tr>\n          <td>".concat(e.$filters.chineseSite(t.country)||"","</td>\n          <td>").concat(t.warehouse_name||"","</td>\n          <td>").concat(t.receive_warehouse_name||"","</td>\n          <td style=\"text-align:left;mso-number-format:'@';\">").concat(t.platform_tracking_number||"","</td>\n          <td>").concat(t.order_sn||"","</td>\n          <td>").concat(e.returnType[t.type].label||"","</td>\n          <td>").concat(e.returnStatusList[t.status].label||"","</td>\n          <td>").concat(t.goods_id||"","</td>\n          <td>").concat(e.$filters.countryShopeebuyCom(t.country),"/product/").concat(t.platform_mall_id,"/").concat(t.goods_id||"","</td>\n          <td>").concat(t.goods_count||"","</td>\n          <td>").concat(t.goods_price||"","</td>\n          <td>").concat(e.$filters.siteCoin(t.country)||"","</td>\n          <td>").concat(t.variation_sku?t.variation_sku:t.variation_name||"","</td>\n          <td>").concat(t.variation_id||"","</td>\n          <td>").concat(t.goods_name||"","</td>\n          <td>").concat(t.resale_order_sn||"","</td>\n          <td>").concat(t.return_create_time||"","</td>\n           <td>").concat(t.expired_tip||"","</td>\n        </tr>\n        ")})),Object(l["k"])("二次销售列表数据",c),e.Loading2=!1;case 35:case"end":return t.stop()}}),t,null,[[9,24]])})))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getSencondSales()},handleCurrentChange:function(e){this.page=e,this.getSencondSales()},handleSelectionChange:function(e){this.multipleSelection=e},copy:function(e){var t=document.createElement("div");t.id="tempTarget",t.style.opacity="0",t.innerText=e,document.body.appendChild(t);try{var a=document.createRange();a.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(a),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.$message.success("复制成功")}catch(n){}t.parentElement.removeChild(t)}}},c=s,u=(a("58a0"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"feda27ee",null);t["default"]=d.exports}}]);